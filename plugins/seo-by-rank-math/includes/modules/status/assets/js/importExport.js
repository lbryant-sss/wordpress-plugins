"use strict";(self.webpackChunkrank_math=self.webpackChunkrank_math||[]).push([[147],{829:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(311),a=n.n(r);function o(e,t,n,r){t=t||"error",r=r||!1;var o=a()('<div class="notice notice-'+t+' is-dismissible"><p>'+e+"</p></div>").hide();n.next(".notice").remove(),n.after(o),o.slideDown(),a()(document).trigger("wp-updates-notice-added"),a()("html,body").animate({scrollTop:o.offset().top-50},"slow"),r&&setTimeout((function(){o.fadeOut((function(){o.remove()}))}),r)}},698:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var r=n(3),a=n(537);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=rankMath.links[e]||"";if(!n)return"#";if(!t)return n;var r={utm_source:"Plugin",utm_medium:encodeURIComponent(t),utm_campaign:"WP"};return n+"?"+Object.keys(r).map((function(e){return"".concat(e,"=").concat(r[e])})).join("&")}var l=n(311),i=n.n(l),c=n(179),s=n.n(c),m=n(610),u=n(142),p=n(829);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=n(85);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k={general:(0,r.__)("General Settings","rank-math"),titles:(0,r.__)("Titles & Metas","rank-math"),sitemap:(0,r.__)("Sitemap Settings","rank-math"),"role-manager":(0,r.__)("Role Manager Settings","rank-math"),redirections:(0,r.__)("Redirections","rank-math")},y=[{name:"rank-math-import-form",title:wp.element.createElement(React.Fragment,null,wp.element.createElement("i",{className:"rm-icon rm-icon-import"}),wp.element.createElement("span",{className:"rank-math-tab-text"},(0,r.__)("Import Settings","rank-math"))),view:function(){var e=f((0,m.useState)(!1),2),t=e[0],n=e[1],o=new FormData;return o.append("import-me",t),wp.element.createElement("div",{id:"rank-math-import-form",className:"rank-math-export-form field-form"},wp.element.createElement("div",null,wp.element.createElement("label",{htmlFor:"import-me"},wp.element.createElement("strong",null,(0,r.__)("Settings File","rank-math")))),wp.element.createElement("div",null,wp.element.createElement(a.FormFileUpload,{__next40pxDefaultSize:!0,accept:".json",onChange:function(e){return n(e.currentTarget.files[0])}},wp.element.createElement("span",{className:"import-file-button"},(0,r.__)("Choose File","rank-math")),t&&wp.element.createElement("span",null,t.name)),wp.element.createElement("br",null),wp.element.createElement("span",{className:"validation-message"},(0,r.__)("Please select a file to import.","rank-math"))),wp.element.createElement("div",{className:"description"},(0,r.__)('Import settings by locating settings file and clicking "Import settings".',"rank-math")),wp.element.createElement("footer",null,wp.element.createElement(u.Button,{variant:"primary",disabled:!1===t,onClick:function(){confirm((0,r.__)("Are you sure you want to import settings into Rank Math? Don't worry, your current configuration will be saved as a backup.","rank-math"))&&s()({method:"POST",headers:{},path:"/rankmath/v1/status/importSettings",body:o}).catch((function(e){alert(e.message)})).then((function(e){var t=i()(".rank-math-breadcrumbs-wrap");e.error?(0,p.Z)(e.error,"error",t):(0,p.Z)(e.success,"success",t),n(!1)}))}},(0,r.__)("Import","rank-math"))))}},{name:"rank-math-export-form",title:wp.element.createElement(React.Fragment,null,wp.element.createElement("i",{className:"rm-icon rm-icon-export"}),wp.element.createElement("span",{className:"rank-math-tab-text"},(0,r.__)("Export Settings","rank-math"))),view:function(){var e=g((0,m.useState)(Object.keys(k)),2),t=e[0],n=e[1],a=(0,d.map)((0,d.entries)(k),(function(e){var t=g(e,2);return{id:t[0],label:t[1]}}));return wp.element.createElement("div",{id:"rank-math-export-form",className:"rank-math-export-form field-form"},wp.element.createElement(u.CheckboxList,{variant:"default",value:t,onChange:n,options:a}),wp.element.createElement("p",{className:"description"},(0,r.__)("Choose the panels to export.","rank-math")),wp.element.createElement("footer",null,wp.element.createElement(u.Button,{variant:"primary",disabled:(0,d.isEmpty)(t),onClick:function(){s()({method:"POST",headers:{},path:"/rankmath/v1/status/exportSettings",data:{panels:t}}).catch((function(e){alert(e.message)})).then((function(e){var t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="rank-math-settings-".concat((new Date).toISOString().replace(/[:.]/g,"-"),".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}))}},(0,r.__)("Export","rank-math"))))}}],b=function(){return wp.element.createElement("div",{className:"import-export-settings"},wp.element.createElement("h2",null,(0,r.__)("Plugin Settings","rank-math")),wp.element.createElement("p",{className:"description"},(0,r.__)("Import or export your Rank Math settings. This option is useful for replicating Rank Math settings across multiple websites. ","rank-math"),wp.element.createElement("a",{href:o("import-export-settings","Options Panel Import Export Page"),target:"_blank",rel:"noreferrer"},(0,r.__)("Learn more about the Import/Export options.","rank-math"))),wp.element.createElement("div",{className:"rank-math-box no-padding"},wp.element.createElement(a.TabPanel,{tabs:y},(function(e){var t=e.view;return wp.element.createElement("div",{className:"rank-math-box-content"},wp.element.createElement(t,null))}))))};function v(e,t,n){return i().ajax({url:rankMath.ajaxurl,type:n||"POST",dataType:"json",data:i().extend(!0,{action:"rank_math_"+e,security:rankMath.security},t)})}var _=n(69),E=n(180),S=function e(t,n,a,o,l,i){if(0===n.length){var c=(0,r.__)("Import finished.","rank-math");return(0,E.Z)(c,a,o),void i()}var s=n.shift(),m="deactivate"===s?"Deactivating plugin":"Importing "+s;l=l||1,"recalculate"===s&&(m=(0,r.__)("Starting SEO score recalculation","rank-math")),(0,E.Z)(m,a,o),v("import_plugin",{perform:s,pluginSlug:t,paged:l}).done((function(c){l=1,c&&c.page&&c.page<c.total_pages&&(l=c.page+1,n.unshift(s)),"recalculate"===s&&c.total_items>0?(0,_.Z)(c.data,a,o,(function(){e(t,n,a,l,i)})):("recalculate"===s&&0===c.total_items&&(c.message=(0,r.__)("No posts found with SEO score.","rank-math")),(0,E.Z)(c.success?c.message:c.error,a,o),e(t,n,a,o,l,i))})).fail((function(r){(0,E.Z)(r.statusText,a,o),e(t,n,a,o,null,i)}))};function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=function(e){var t=e.slug,n=e.choices,a=e.pluginName,o=e.importablePlugins,l=e.updateViewData;"redirections"!==t&&(n.recalculate=(0,r.__)("Calculate SEO Scores","rank-math"));var c=x((0,m.useState)((0,d.keys)(n)),2),s=c[0],f=c[1],h=x((0,m.useState)(!1),2),g=h[0],w=h[1],k=x((0,m.useState)([]),2),y=k[0],b=k[1],_=i()(".wp-header-end");return wp.element.createElement("div",{className:"rank-math-box-content"},wp.element.createElement(u.CheckboxList,{variant:"default",value:s,onChange:f,options:(0,d.map)(n,(function(e,t){return{id:t,label:e}}))}),0!==y.length&&wp.element.createElement(u.TextareaControl,{disable:"true",value:y.join("\n"),className:"import-progress-area large-text",rows:"8",style:{marginRight:"20px",background:"#eee"}}),wp.element.createElement("footer",null,wp.element.createElement(u.Button,{variant:"primary",onClick:function(){if(confirm((0,r.sprintf)((0,r.__)("Are you sure you want to import data from %s?","rank-math"),a)))if(s.length<1)(0,p.Z)((0,r.__)("Select data to import.","rank-math"),"error",_,5e3);else{w(!0);var e=s;e.push("deactivate"),(0,E.Z)("Import started...",y,b),S(t,e,y,b,null,(function(){w(!0),setTimeout((function(){b([])}),1e4)}))}},disabled:g},(0,r.__)("Import","rank-math")),wp.element.createElement(u.Button,{isDestructive:!0,onClick:function(){confirm((0,r.sprintf)((0,r.__)("Are you sure you want erase all traces of %s?","rank-math"),a))&&v("clean_plugin",{pluginSlug:t}).done((function(e){if(e.success){var n=o;delete n[t],l({importablePlugins:n})}(0,p.Z)(e.success?e.message:e.error,e.success?"success":"error",_,5e3)}))}},(0,r.__)("Clean","rank-math"))))};function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}var A=function(e){var t=e.data,n=e.updateViewData,l=t.importablePlugins,i=(0,d.map)(l,(function(e,t){return{slug:t,name:"import-plugin-".concat(t),choices:e.choices,pluginName:e.name,title:wp.element.createElement(React.Fragment,null,wp.element.createElement("i",{className:"rm-icon rm-icon-import"}),wp.element.createElement("span",null,e.name))}}));return wp.element.createElement("div",{className:"import-plugins"},wp.element.createElement("h2",null,(0,r.__)("Other Plugins","rank-math")),wp.element.createElement("p",{className:"description"},(0,r.__)("If you were using another plugin to add important SEO information to your website before switching to Rank Math SEO, you can import the settings and data here. ","rank-math"),wp.element.createElement("a",{href:o("import-export-settings","Options Panel Import Export Page Other Plugins"),target:"_blank",rel:"noreferrer"},(0,r.__)("Learn more about the Import/Export options.","rank-math"))),wp.element.createElement("div",{className:"rank-math-box no-padding rank-math-export-form field-form"},wp.element.createElement("div",{className:"with-action at-top"},(0,d.isEmpty)(l)?wp.element.createElement("p",{className:"empty-notice"},(0,r.__)("No plugin detected with importable data.","rank-math")):wp.element.createElement(a.TabPanel,{tabs:i},(function(e){return wp.element.createElement(N,j({key:e.slug},e,{importablePlugins:l,updateViewData:n}))})))))},C=function(e){var t=e.data,n=e.updateViewData,a=t.backups,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s()({method:"POST",path:"/rankmath/v1/status/runBackup",data:{action:e,key:t}}).catch((function(e){alert(e.message)})).then((function(e){var t=i()(".wp-header-end");(0,p.Z)(e.message,e.type,t),!1!==e.backups&&n({backups:e.backups})}))};return wp.element.createElement("div",{className:"settings-backup"},wp.element.createElement(u.Button,{variant:"primary",className:"alignright",onClick:function(){return o("create")}},(0,r.__)("Create Backup","rank-math")),wp.element.createElement("h3",null,(0,r.__)("Settings Backup","rank-math")),wp.element.createElement("p",{className:"description"},(0,r.__)("Take a backup of your plugin settings in case you wish to restore them in future. Use it as backup before making substantial changes to Rank Math settings. For taking a backup of the SEO data of your content, use the XML Export option.","rank-math")),wp.element.createElement("div",{className:"rank-math-settings-backup-form field-form"},wp.element.createElement("div",{className:"list-table with-action"},wp.element.createElement("table",{className:"form-table"},wp.element.createElement("tbody",null,!(0,d.isEmpty)(a)&&(0,d.map)(a,(function(e,t){return wp.element.createElement("tr",{key:t},wp.element.createElement("th",null,(0,r.sprintf)((0,r.__)("Backup: %s","rank-math"),e)),wp.element.createElement("td",null,wp.element.createElement(u.Button,{size:"small",variant:"secondary",onClick:function(){confirm((0,r.__)("Are you sure you want to restore this backup? Your current configuration will be overwritten.","rank-math"))&&o("restore",t)}},(0,r.__)("Restore","rank-math")),wp.element.createElement(u.Button,{size:"small",isDestructive:!0,onClick:function(){confirm((0,r.__)("Are you sure you want to delete this backup?","rank-math"))&&o("delete",t)}},(0,r.__)("Delete","rank-math"))))}))))),(0,d.isEmpty)(a)&&wp.element.createElement("p",{id:"rank-math-no-backup-message"},(0,r.__)("There is no backup.","rank-math"))))},I=function(e){return wp.element.createElement("div",{className:"rank-math-import-export"},wp.element.createElement(b,null),wp.element.createElement(A,e),wp.element.createElement(C,e))}},180:function(e,t){function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.Z=function(e,t,r){var a=new Date,o="["+(10>a.getHours()?"0":"")+a.getHours()+":"+(10>a.getMinutes()?"0":"")+a.getMinutes()+":"+(10>a.getSeconds()?"0":"")+a.getSeconds()+"] "+e;t.push(o),r(n(t))}},69:function(e,t,n){var r=n(311),a=n.n(r),o=n(85),l=n(3),i=n(813),c=n(180),s=[];t.Z=function(e,t,n,r,m,u,p){var f={};if("complete"!==e)return new Promise((function(t){(0,o.forEach)(e,(function(e,t){if(-1===s.indexOf(t)){s.push(t);var n=new i.ResultManager,r=wp.i18n,a=new i.Paper;a.setTitle(e.title),a.setDescription(e.description),a.setText(e.content),a.setKeyword(e.keyword),a.setKeywords(e.keywords),a.setPermalink(e.url),a.setUrl(e.url),e.thumbnail&&a.setThumbnail(e.thumbnail),a.setContentAI(e.hasContentAi);var l=function(e){var t=rankMath.assessor.researchesTests;return t=(0,o.difference)(t,["keywordNotUsed"]),e.isProduct?t=(0,o.difference)(t,["keywordInSubheadings","linksHasExternals","linksNotAllExternals","linksHasInternal","titleSentiment","titleHasNumber","contentHasTOC"]):t}(e);new i.Analyzer({i18n:r,analysis:l}).analyzeSome(l,a).then((function(r){n.update(a.getKeyword(),r,!0);var o=n.getScore(e.keyword);e.isProduct&&(o=e.isReviewEnabled?o+1:o,o=e.hasProductSchema?o+1:o),f[t]=o}))}})),t()})).then((function(){a().ajax({url:rankMath.api.root+"rankmath/v1/updateSeoScore",method:"POST",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",rankMath.restNonce)},data:{action:"rank_math_update_seo_score",postScores:f},success:function(){(0,c.Z)((0,l.sprintf)((0,l.__)("Calculating SEO score for posts %1$d - %2$d out of %3$d","rank-math"),m,u,p),t,n),r()},error:function(e){(0,c.Z)(e.statusText,t,n)}})}));r()}}}]);