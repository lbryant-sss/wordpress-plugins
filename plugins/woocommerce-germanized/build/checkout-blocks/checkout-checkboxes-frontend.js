(self.webpackWcBlocksJsonp=self.webpackWcBlocksJsonp||[]).push([[131],{735:function(e,t,c){"use strict";c.r(t),c.d(t,{default:function(){return f}});var n=c(196),a=c(307),o=c(554),r=c(819),s=c.n(r),l=c(184),d=c.n(l),i=function(e){let{icon:t,size:c=24,...n}=e;return(0,a.cloneElement)(t,{width:c,height:c,...n})},h=c(444),u=(0,a.createElement)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(h.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),m=({show:e,url:t,onClose:c,content:o})=>{const[r,s]=(0,a.useState)(!0),[l,d]=(0,a.useState)("");let h="";if(o)d(o),s(!1);else if(t)try{const e=new URL(t);h=t.toString().substring(e.origin.length)}catch{}return(0,a.useEffect)((()=>{e?document.body.classList.add("checkout-modal-open"):document.body.classList.remove("checkout-modal-open"),h&&(s(!0),d(""),fetch(h,{method:"get"}).then((e=>e.text())).then((e=>{d(e),s(!1)})).catch((function(e){s(!1)})))}),[h,d,e]),e?(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"wc-gzd-checkout-modal-bg"}),(0,n.createElement)("div",{className:"wc-gzd-checkout-modal-wrapper"},(0,n.createElement)("div",{className:"wc-gzd-checkout-modal"},(0,n.createElement)("div",{className:"actions"},(0,n.createElement)("a",{className:"wc-gzd-checkout-modal-close",onClick:e=>{document.body.classList.remove("checkout-modal-open"),c(e)}},(0,n.createElement)(i,{className:"wc-gzd-checkout-modal-close-icon",icon:u,size:24}))),r?(0,n.createElement)("div",{className:"content is-loading"},(0,n.createElement)("span",{className:"wc-block-components-spinner","aria-hidden":"true"})):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"content",dangerouslySetInnerHTML:{__html:l}}))))):null},g=c(818),k=c(801),b=(0,a.createElement)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,a.createElement)(h.Path,{d:"M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"})),p=({checkbox:e,setShowModal:t,setModalUrl:c,onChangeCheckbox:r})=>{const s="checkbox-"+e.id,{setValidationErrors:l,clearValidationError:h}=(0,g.useDispatch)(k.VALIDATION_STORE_KEY),u=!!e.hidden&&e.hidden,m=(0,g.useSelect)((e=>e(k.VALIDATION_STORE_KEY).getValidationError(s))),p=!(!m?.message||m?.hidden);(0,a.useEffect)((()=>{if(e.has_checkbox)return!0===e.checked||!0===e.hidden?h(s):e.is_required&&l({[s]:{message:e.error_message?e.error_message:"error_placeholder",hidden:!0}}),()=>{h(s)}}),[e.is_required,e.checked,e.hidden,s,h,l]);const _={id:`checkbox-${e.html_id}`,className:"wc-gzd-checkbox",name:`${e.name}`,checked:!!e.checked,hasError:e.is_required&&p,required:e.is_required};if(u)return null;const E=!1===m?.hidden&&m?.message&&"error_placeholder"!==m?.message;return(0,n.createElement)("div",{className:d()(`wc-gzd-block-checkout-checkboxes__${e.id}`,Object.values(e.wrapper_classes).join(" ")),key:`wrapper-${e.id}`},e.has_checkbox?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(o.CheckboxControl,{key:`checkbox-${e.id}`,..._,onChange:t=>{r({...e,checked:t})}},(0,n.createElement)("span",{onClick:e=>{const n=e.target.closest("a");if(n&&e.currentTarget.contains(n)&&n.classList.contains("wc-gzd-modal")){e.stopPropagation(),e.preventDefault();let a=n.getAttribute("href");a&&(c(a),t(!0))}},dangerouslySetInnerHTML:{__html:e.label}})),E&&(0,n.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,n.createElement)("p",{id:s},(0,n.createElement)(i,{icon:b}),(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:m?.message}})))):(0,n.createElement)("div",{className:"wc-gzd-checkbox has-no-checkbox"},(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:e.label}})))},_=c(617),E=e=>{const{onChangeCheckbox:t,checkbox:c}=e,{shouldCreateAccount:o,customerId:r}=(0,g.useSelect)((e=>{const t=e(k.CHECKOUT_STORE_KEY);return{customerId:t.getCustomerId(),shouldCreateAccount:t.getShouldCreateAccount()}})),s=!1===(0,_.getSetting)("checkoutAllowsGuest",!1)&&!r;return(0,a.useEffect)((()=>{t(o||s?{...c,hidden:!1}:{...c,hidden:!0})}),[o]),(0,n.createElement)(p,{...e})},w=e=>{const[t,c]=(0,a.useState)({}),{onChangeCheckbox:o,checkbox:r}=e,{billingAddress:s,paymentData:l,currentPaymentMethod:d}=(0,g.useSelect)((e=>{const t=e(k.CART_STORE_KEY),c=e(k.PAYMENT_STORE_KEY);return{billingAddress:t.getCartData().billingAddress,paymentData:c.getPaymentMethodData(),currentPaymentMethod:c.getActivePaymentMethod()}}));return(0,a.useEffect)((()=>{const e={country:s.country,postcode:s.postcode,city:s.city,street:s.address_1,address_2:s.address_2,account_holder:l.hasOwnProperty("direct_debit_account_holder")?l.direct_debit_account_holder:"",account_iban:l.hasOwnProperty("direct_debit_account_iban")?l.direct_debit_account_iban:"",account_swift:l.hasOwnProperty("direct_debit_account_bic")?l.direct_debit_account_bic:""};c(e),o("direct-debit"===d&&e.account_holder&&e.account_iban&&e.account_swift?{...r,hidden:!1}:{...r,hidden:!0})}),[s,l,d]),(0,n.createElement)(p,{...e,setModalUrl:c=>{c+="&"+new URLSearchParams(t).toString(),e.setModalUrl(c)}})},f=({children:e,checkoutExtensionData:t,extensions:c,cart:r,className:l})=>{const[i,h]=(0,a.useState)(!1),{setExtensionData:u}=t,g=c.hasOwnProperty("woocommerce-germanized")?c["woocommerce-germanized"]:{},k=g.hasOwnProperty("checkboxes")?g.checkboxes:[],b=k.reduce(((e,t)=>({...e,[t.id]:{...t,hidden:t.default_hidden,checked:t.default_checked}})),{}),[_,f]=(0,a.useState)(b),[x,y]=(0,a.useState)(""),S=(0,a.useRef)(!1),v=e=>Object.values(e).filter((e=>e.checked||!e.has_checkbox&&!e.hidden?e:null));(0,a.useEffect)((()=>{u("woocommerce-germanized","checkboxes",v(_))}),[_]);const C=(0,a.useCallback)((e=>{f((t=>{const c=t&&t.hasOwnProperty(e.id)&&t[e.id].checked!==e.checked,n={...t,[e.id]:{...e}};return c&&(0,o.extensionCartUpdate)({namespace:"woocommerce-germanized-checkboxes",data:{checkboxes:v(n)}}),n}))}),[u,_,f,o.extensionCartUpdate]);return(0,a.useEffect)((()=>{if(S.current){let e={};Object.keys(b).map((t=>{const c=_.hasOwnProperty(t)?{checked:_[t].checked,hidden:_[t].hidden}:{};e[t]={...b[t],...c}})),s().isEqual(e,_)||f(e)}S.current=!0}),[k]),(0,n.createElement)("div",{className:d()("wc-gzd-checkboxes",l)},(0,n.createElement)(m,{show:i,url:x,onClose:()=>{h(!1)}}),Object.keys(_).map((e=>{const t={..._[e]};return"sepa"===t.id?(0,n.createElement)(w,{checkbox:t,setShowModal:h,setModalUrl:y,key:t.id,onChangeCheckbox:C}):"privacy"===t.id?(0,n.createElement)(E,{checkbox:t,setShowModal:h,setModalUrl:y,key:t.id,onChangeCheckbox:C}):(0,n.createElement)(p,{checkbox:t,setShowModal:h,setModalUrl:y,key:t.id,onChangeCheckbox:C})})))}},184:function(e,t){var c;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var c=arguments[t];if(c){var o=typeof c;if("string"===o||"number"===o)e.push(c);else if(Array.isArray(c)){if(c.length){var r=a.apply(null,c);r&&e.push(r)}}else if("object"===o)if(c.toString===Object.prototype.toString)for(var s in c)n.call(c,s)&&c[s]&&e.push(s);else e.push(c.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(c=function(){return a}.apply(t,[]))||(e.exports=c)}()}}]);