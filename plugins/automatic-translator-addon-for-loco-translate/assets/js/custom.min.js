const AutoTranslator=function(t,n){function a(){if(I&&I.conf){const{conf:t}=I,n=I.conf.podata;n.shift();const{locale:a,project:o}=t,e=s(o,a),r="yandex";k(e,r),i(n)}}function o(){const{conf:t}=I,{locale:a,project:o}=t;0===n("#loco-editor nav").find("#cool-auto-translate-btn").length&&y(),T(),n("#cool-auto-translate-btn").on("click",w),n("button.icon-robot[data-loco='auto']").on("click",d),n("#atlt_yandex_translate_btn").on("click",function(){r(a)}),n(".atlt_save_strings").on("click",l)}function e(){n(".yt-button__icon.yt-button__icon_type_right").trigger("click"),n(".atlt_custom_model.yandex-widget-container").find(".atlt_string_container").scrollTop(0);const t=n(".modal-body.yandex-widget-body").find(".atlt_translate_progress");t.hide(),t.find(".progress-wrapper").hide(),t.find("#myProgressBar").css("width","0"),t.find("#progressText").text("0%")}function i(t){const a=u(t,"plain");a.length>0?$(a,type="yandex"):(n("#ytWidget").hide(),n(".notice-container").addClass("notice inline notice-warning").html("There is no plain string available for translations."),n(".atlt_string_container, .choose-lang, .translator-widget, .notice-info, .is-dismissible").hide())}function s(t,n){const{domain:a}=t||{},{lang:o,region:e}=n;return t?`${a}-${o}-${e}`:`temp-${o}-${e}`}function r(t){const a=t.lang||null;let o="";const e={bel:"be",snd:"sd",jv:"jv",nb:"no",nn:"no"};o=e[a]||a;let i=n("div#atlt_strings_model.yandex-widget-container");i.find(".atlt_actions > .atlt_save_strings").prop("disabled",!0),i.find(".atlt_stats").hide(),localStorage.setItem("lang",o);const s=["kir","he","af","jv","no","am","ar","az","ba","be","bg","bn","bs","ca","ceb","cs","cy","da","de","el","en","eo","es","et","eu","fa","fi","fr","ga","gd","gl","gu","he","hi","hr","ht","hu","hy","id","is","it","ja","jv","ka","kk","km","kn","ko","ky","la","lb","lo","lt","lv","mg","mhr","mi","mk","ml","mn","mr","mrj","ms","mt","my","ne","nl","no","pa","pap","pl","pt","ro","ru","si","sk","sl","sq","sr","su","sv","sw","ta","te","tg","th","tl","tr","tt","udm","uk","ur","uz","vi","xh","yi","zh"];s.includes(o)?(n("#atlt-dialog").dialog("close"),i.fadeIn("slow")):(n("#atlt-dialog").dialog("close"),i.find(".notice-container").addClass("notice inline notice-warning").html("Yandex Automatic Translator Does not support this language."),i.find(".atlt_string_container, .choose-lang, .atlt_save_strings, #ytWidget, .translator-widget, .notice-info, .is-dismissible").hide(),i.fadeIn("slow"))}function l(){let t="",a="";if(I&&I.conf&&I.conf.project&&I.conf.project.bundle)if(t=I.conf.project.bundle.split(".")[0],"theme"===t)a=I.conf.project.domain||"";else{const t=I.conf.project.bundle.match(/^[^.]+\.(.*?)(?=\/)/);a=t?t[1]:""}let o=[];const e={'"% s"':'"%s"','"% d"':'"%d"','"% S"':'"%s"','"% D"':'"%d"',"% s":" %s ","% S":" %s ","% d":" %d ","% D":" %d ","٪ s":" %s ","٪ S":" %s ","٪ d":" %d ","٪ D":" %d ","٪ س":" %s ","%S":" %s ","%D":" %d ","% %":"%%"},i=/(\%\s*\d+\s*\$?\s*[a-z0-9])/gi;n(".atlt_strings_table tbody tr").each(function(){const t=n(this).find("td.source").text(),a=n(this).find("td.target").text(),s=f(a,e),r=f(t,e),l=s.replace(i,function(t){return t.replace(/\s/g,"").toLowerCase()}),d=r.replace(i,function(t){return t.replace(/\s/g,"").toLowerCase()});o.push({source:d,target:l})});const s=n(this).closest(".atlt_custom_model"),r=s.data("translation-time")||0,l=s.data("translation-provider"),{lang:d,region:u}=I.conf.locale,p=u?`${d}_${u}`:d,g=o.reduce((t,n)=>t+n.source.length,0),m=o.length,h={time_taken:r,translation_provider:l,pluginORthemeName:a,target_language:p,total_characters:g,total_strings:m};var _=n(this).parents("#atlt_strings_model").find("#project_id").val();b(o,_,h),n(".atlt_custom_model").fadeOut("slow"),n("html").addClass("merge-translations"),c()}function d(t){if(void 0!==t.originalEvent)var a=setInterval(function(){var t=n(".loco-modal"),o=t.find("#loco-apis-batch"),e=t.find(".ui-dialog-titlebar .ui-dialog-title");if(o.length&&!t.is(":hidden")){t.removeClass("addtranslations"),o.find("select#auto-api").show(),o.find("a.icon-help, a.icon-group").show(),o.find("#loco-job-progress").show(),e.html("Auto-translate this file"),o.find("button.button-primary span").html("Translate");var i=o.find("select#auto-api option").length;1===i&&(o.find(".noapiadded").remove(),o.removeClass("loco-alert"),o.find("form").hide(),o.addClass("loco-alert"),e.html("No translation APIs configured"),o.append("<div class='noapiadded'>\n                            <p>Add automatic translation services in the plugin settings.<br>or<br>Use <strong>Auto Translate</strong> addon button.</p>\n                            <nav>\n                                <a href='http://locotranslate.local/wp-admin/admin.php?page=loco-config&amp;action=apis' class='button button-link has-icon icon-cog'>Settings</a>\n                                <a href='https://localise.biz/wordpress/plugin/manual/providers' class='button button-link has-icon icon-help' target='_blank'>Help</a>\n                                <a href='https://localise.biz/wordpress/translation?l=de-DE' class='button button-link has-icon icon-group' target='_blank'>Need a human?</a>\n                            </nav>\n                        </div>")),clearInterval(a)}},100)}function c(){var t=setInterval(function(){var a=n(".loco-modal"),o=n(".loco-modal #loco-apis-batch");if(a.length&&a.attr("style").indexOf("none")<=-1&&a.find("#loco-job-progress").length){n("html").removeClass("merge-translations"),o.find("a.icon-help, a.icon-group, #loco-job-progress").hide(),o.find("select#auto-api").hide();var e=n("select#auto-api option[value='loco_auto']").prop("selected","selected");o.find("select#auto-api").val(e.val()),a.find(".ui-dialog-titlebar .ui-dialog-title").html("Step 3 - Add Translations into Editor and Save"),o.find("button.button-primary span").html("Start Adding Process"),o.find("button.button-primary").on("click",function(){n(this).find("span").html("Adding...")}),a.addClass("addtranslations"),n(".noapiadded").remove(),o.find("form").show(),o.removeClass("loco-alert"),clearInterval(t)}},200)}function u(t,n){return t.filter(t=>!(!t.source||t.target)&&(!(p(t.source)||g(t.source)||m(t.source)||h(t.source)||t.source.includes("#"))&&(_(t.source),!0)))}function p(t){var n=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return n.test(t)}function g(t){var n=/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i;return n.test(t)}function m(t){var n=/[@^{}|<>]/g;return n.test(t)}function h(t){var n=["(?:[✀-➿]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[#-9]️?⃣|㊙|㊗|〽|〰|Ⓜ|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|🆎|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|🈚|🈯|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|‼|⁉|[▪-▫]|▶|◀|[◻-◾]|©|®|™|ℹ|🀄|[☀-⛿]|⬅|⬆|⬇|⬛|⬜|⭐|⭕|⌚|⌛|⌨|⏏|[⏩-⏳]|[⏸-⏺]|🃏|⤴|⤵|[←-⇿])"];return t.match(n.join("|"))}function _(t){var n=/%s|%d/g;return n.test(t)}function f(t,n,a){return!!t&&{2:function(){for(var a in n)t=f(t,a,n[a]);return t},3:function(){return t.replace(RegExp(n,"g"),a)},0:function(){}}[arguments.length]()}function b(t,n,a){if(t&&t.length>0){const o=2500;for(let e=0;e<t.length;e+=o){const i=t.slice(e,e+o),s=`-part-${Math.ceil(e/o)}`;v(i,n,s,a)}}}function v(t,a,o,e){const i={action:"save_all_translations",data:JSON.stringify(t),part:o,"project-id":a,wpnonce:z,translation_data:JSON.stringify(e)};jQuery.post(B,i,function(t){n("#loco-editor nav").find("button").each(function(t,a){var o=a.getAttribute("data-loco");"auto"==o&&(n(a).hasClass("model-opened")&&n(a).removeClass("model-opened"),n(a).addClass("model-opened"),n(a).trigger("click"))})})}function y(){const t=n("#loco-editor nav").find("#cool-auto-translate-btn");t.length>0&&t.remove();const a=n("#loco-editor nav").find("#loco-actions"),o=n('<fieldset><button id="cool-auto-translate-btn" class="button has-icon icon-translate">Auto Translate</button></fieldset>');a.append(o)}function w(){n("#atlt-dialog").dialog({dialogClass:O,resizable:!1,height:"auto",draggable:!1,width:400,modal:!0,buttons:{Cancel:function(){n(this).dialog("close")}}})}function x(t){for(var n=[],a=t.length-1;a>=0;a--)n.unshift(["&#",t[a].charCodeAt(),";"].join(""));return n.join("")}function $(t,a){let o="",e=0,i=1;if(t){let s=0;for(const n in t)if(t.hasOwnProperty(n)){const r=t[n],l=r.source.trim();s+=l.trim().split(/\s+/).length,""!==l&&("yandex"===a||n<=2500)&&(o+=`<tr id="${n}"><td>${i}</td><td class="notranslate source">${"yandex"===a?x(l):l}</td>`,o+="yandex"===a?`<td translate="yes" class="target translate">${l}</td></tr>`:'<td class="target translate"></td></tr>',i++,e+=l.length)}n(".atlt_stats").each(function(){n(this).find(".totalChars").html(e)})}n(".atlt_strings_table > tbody.atlt_strings_body").html(o)}function T(){const t={yandex:extradata.yt_preview,google:extradata.gt_preview,deepl:extradata.dpl_preview,chatgpt:extradata.chatGPT_preview,gemini:extradata.geminiAI_preview,openai:extradata.openai_preview,chrome:extradata.chromeAi_preview,docs:extradata.document_preview,error:extradata.error_preview},a="https://locoaddon.com/docs/",o=n=>D+"assets/images/"+t[n],e=`<img src="${o("docs")}" width="20" alt="Docs">`,i=`<img src="${o("error")}" alt="error" style="height:16px; vertical-align:middle; margin-right:5px;">`,s=[{name:"Yandex Translate",icon:"yandex",info:"https://translate.yandex.com/",btn:'<button id="atlt_yandex_translate_btn" class="atlt-provider-btn translate">Translate</button>',doc:`${a}translate-plugin-theme-via-yandex-translate/?utm_source=atlt_plugin&utm_medium=inside&utm_campaign=docs&utm_content=popup_yandex`},{name:"Google Translate",icon:"google",info:"https://translate.google.com/",btn:`<a href="https://locoaddon.com/pricing/?utm_source=atlt_plugin&utm_medium=inside&utm_campaign=get_pro&utm_content=popup_google" target="_blank"><button id="atlt_google_translate_btn" class="atlt-provider-btn error">${i}Buy Pro</button></a>`,doc:`${a}auto-translations-via-google-translate/?utm_source=atlt_plugin&utm_medium=inside&utm_campaign=docs&utm_content=popup_google`},{name:"Chrome Built-in AI",icon:"chrome",info:"https://developer.chrome.com/docs/ai/translator-api",btn:`<a href="https://locoaddon.com/pricing/?utm_source=atlt_plugin&utm_medium=inside&utm_campaign=get_pro&utm_content=popup_chrome" target="_blank"><button id="ChromeAiTranslator_settings_btn" class="atlt-provider-btn error">${i}Buy Pro</button></a>`,doc:`${a}how-to-use-chrome-ai-auto-translations/?utm_source=atlt_plugin&utm_medium=inside&utm_campaign=docs&utm_content=popup_chrome`},{name:"ChatGPT Translate",icon:"chatgpt",info:"https://chat.openai.com/",btn:`<a href="https://locoaddon.com/pricing/?utm_source=atlt_plugin&utm_medium=inside&utm_campaign=get_pro&utm_content=popup_chatgpt" target="_blank"><button id="atlt_chatGPT_btn" class="atlt-provider-btn error">${i}Buy Pro</button></a>`,doc:`${a}chatgpt-ai-translations-wordpress/?utm_source=atlt_plugin&utm_medium=inside&utm_campaign=docs&utm_content=popup_chatgpt`},{name:"Gemini AI Translate",icon:"gemini",info:"https://locoaddon.com/docs/pro-plugin/how-to-use-gemini-ai-to-translate-plugins-or-themes/",btn:`<a href="https://locoaddon.com/pricing/?utm_source=atlt_plugin&utm_medium=inside&utm_campaign=get_pro&utm_content=popup_gemini" target="_blank"><button id="atlt_geminiAI_btn" class="atlt-provider-btn error">${i}Buy Pro</button></a>`,doc:`${a}gemini-ai-translations-wordpress/?utm_source=atlt_plugin&utm_medium=inside&utm_campaign=docs&utm_content=popup_gemini`},{name:"OpenAI Translate",icon:"openai",info:"https://locoaddon.com/docs/pro-plugin/how-to-use-gemini-ai-to-translate-plugins-or-themes/",btn:`<a href="https://locoaddon.com/pricing/?utm_source=atlt_plugin&utm_medium=inside&utm_campaign=get_pro&utm_content=popup_openai" target="_blank"><button id="atlt_openai_btn" class="atlt-provider-btn error">${i}Buy Pro</button></a>`,doc:`${a}gemini-ai-translations-wordpress/?utm_source=atlt_plugin&utm_medium=inside&utm_campaign=docs&utm_content=popup_openai`},{name:"DeepL Translate",icon:"deepl",info:"https://www.deepl.com/en/translator",btn:`<a href="https://locoaddon.com/pricing/?utm_source=atlt_plugin&utm_medium=inside&utm_campaign=get_pro&utm_content=popup_deepl" target="_blank"><button id="atlt_deepl_btn" class="atlt-provider-btn error">${i}Buy Pro</button></a>`,doc:`${a}translate-via-deepl-doc-translator/?utm_source=atlt_plugin&utm_medium=inside&utm_campaign=docs&utm_content=popup_deepl`}],r=s.map(t=>`\n            <tr>\n                <td class="atlt-provider-name">\n                    <a href="${t.info}" target="_blank">\n                        <img src="${o(t.icon)}" class="atlt-provider-icon" alt="${t.name}">\n                    </a>\n                    ${t.name}\n                </td>\n                <td>${t.btn}</td>\n                <td>\n                    <a href="${t.doc}" target="_blank" class="atlt-provider-docs-btn">${e}</a>\n                </td>\n            </tr>\n        `).join(""),l=`\n            <div class="atlt-provider-modal" id="atlt-dialog" title="Step 2 - Select Translation Provider" style="display:none;">\n                <table class="atlt-provider-table">\n                    <thead>\n                        <tr><th>Name</th><th>Translate</th><th>Docs</th></tr>\n                    </thead>\n                    <tbody>${r}</tbody>\n                </table>\n            </div>\n        `;n("body").append(l)}function k(t,a){let{wrapperCls:o,headerCls:e,bodyCls:i,footerCls:s}=C("yandex"),r=`\n            <div id="atlt_strings_model" class="modal atlt_custom_model  ${o} ${O}">\n                <div class="modal-content">\n                    <input type="hidden" id="project_id" value="${t}"> \n                    ${A(a,e)}   \n                    ${j(a,i)}   \n                    ${P(a,s)}   \n            </div></div>`;n("body").append(r)}function C(t){let n="",a="",o="",e="";return n="yandex-widget-container",a="yandex-widget-header",o="yandex-widget-body",e="yandex-widget-footer",{wrapperCls:n,headerCls:a,bodyCls:o,footerCls:e}}function j(t,n){const a=`\n        <div class="modal-body  ${n}">\n            <div class="atlt_translate_progress">\n                Automatic translation is in progress....<br/>\n                It will take a few minutes, enjoy ☕ coffee in this time!<br/><br/>\n                Please do not leave this window or browser tab while the translation is in progress...\n\n                 <div class="progress-wrapper">\n                    <div class="progress-container">\n                        <div class="progress-bar" id="myProgressBar">\n                            <span id="progressText">0%</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ${S(t)}\n            <div class="atlt_string_container">\n                <table class="scrolldown atlt_strings_table">\n                    <thead>\n                        <th class="notranslate">S.No</th>\n                        <th class="notranslate">Source Text</th>\n                        <th class="notranslate">Translation</th>\n                    </thead>\n                    <tbody class="atlt_strings_body">\n                    </tbody>\n                </table>\n            </div>\n            <div class="notice-container"></div>\n        </div>`;return a}function A(t,n){const a=`\n        <div class="modal-header  ${n}">\n                        <span class="close">&times;</span>\n                        <h2 class="notranslate">Step 2 - Start Automatic Translation Process</h2>\n                        <div class="atlt_actions">\n                            <button class="notranslate atlt_save_strings button button-primary" disabled="true">Merge Translation</button>\n                        </div>\n                        <div style="display:none" class="atlt_stats hidden">\n                            Wahooo! You have saved your valuable time via auto translating \n                            <strong class="totalChars"></strong> characters  using \n                            <strong>\n                                <a href="https://wordpress.org/support/plugin/automatic-translator-addon-for-loco-translate/reviews/#new-post" target="_new">\n                                    LocoAI – Auto Translate for Loco Translate\n                                </a>\n                            </strong>\n                        </div>\n                    </div>\n                    <div class="notice inline notice-info is-dismissible">\n                        Plugin will not translate any strings with HTML or special characters because Yandex Translator currently does not support HTML and special characters translations.\n                        You can edit translated strings inside Loco Translate Editor after merging the translations. Only special characters (%s, %d) fixed at the time of merging of the translations.\n                    </div>\n                    <div class="notice inline notice-info is-dismissible">\n                        Machine translations are not 100% correct.\n                        Please verify strings before using on the production website.\n                    </div>`;return a}function P(t,n){const a=` <div class="modal-footer ${n}">\n        <div class="atlt_actions">\n            <button class="notranslate atlt_save_strings button button-primary" disabled="true">Merge Translation</button>\n        </div>\n        <div style="display:none" class="atlt_stats">\n            Wahooo! You have saved your valuable time via auto translating \n            <strong class="totalChars"></strong> characters  using \n            <strong>\n                <a href="https://wordpress.org/support/plugin/automatic-translator-addon-for-loco-translate/reviews/#new-post" target="_new">\n                    LocoAI – Auto Translate for Loco Translate\n                </a>\n            </strong>\n        </div>\n    </div>`;return a}function S(t){if("yandex"===t){const t='<div id="ytWidget">..Loading</div>';return`\n                <div class="translator-widget">\n                    <h3 class="choose-lang">Choose language <span class="dashicons-before dashicons-translation"></span></h3>\n                    ${t}\n                </div>`}return""}const I=t.locoConf,L=t.extradata,{ajax_url:B,nonce:z,ATLT_URL:D,extra_class:O}=L;a();var N=document.getElementById("atlt_strings_model");n(t).click(function(t){t.target.closest(".modal-content")||e(),t.target==N&&(N.style.display="none")}),n("#atlt_strings_model").find(".close").on("click",function(){e(),n("#atlt_strings_model").fadeOut("slow")}),n(document).ready(function(){o()})}(window,jQuery);