"use strict";

jQuery(document).ready(function ($) {
  /**
   * Ajax save.
   */
  $(document).on('click', '.elementor-save-skin', function () {
    var $button = $(this);
    var $controlWrapper = $button.closest('.elementor-control-content');
    var $select = $controlWrapper.find('.elementor-control-input-wrapper select');
    var selectedSkin = $select.val();
    var html_id = $button.attr('id');
    var nonce = WPBC_Ajax.nonce;

    // UI feedback: processing state.
    $button.attr('saved_title', $button.text());
    $button.text($button.attr('processing_title') + '...');
    $button.prop('disabled', true);
    $.ajax({
      url: WPBC_Ajax.ajax_url,
      type: 'POST',
      data: {
        action: 'wpbc_save_calendar_skin',
        skin: selectedSkin,
        _ajax_nonce: nonce,
        html_id: html_id
      },
      success: function success(response) {
        var _response$data;
        // Restore button state.
        if (html_id) {
          var $btn = $(document.getElementById(html_id));
          $btn.prop('disabled', false).text($btn.attr('saved_title')).removeAttr('saved_title');
        }
        if (!response.success) {
          console.warn('Skin save failed:', response.data || 'Unknown error');
          return;
        }
        var savedSkinUrl = (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.url_full;
        console.log('Skin saved successfully:', savedSkinUrl);
      },
      error: function error() {
        console.error('AJAX error occurred during skin save.');
        // Optional: restore button UI.
        if (html_id) {
          var $btn = $('#' + html_id);
          $btn.prop('disabled', false).text($btn.attr('saved_title')).removeAttr('saved_title');
        }
      }
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5jbHVkZXMvZWxlbWVudG9yLWJvb2tpbmctZm9ybS9fb3V0L3dwYmMtZWxlbWVudG9yLmpzIiwibmFtZXMiOlsialF1ZXJ5IiwiZG9jdW1lbnQiLCJyZWFkeSIsIiQiLCJvbiIsIiRidXR0b24iLCIkY29udHJvbFdyYXBwZXIiLCJjbG9zZXN0IiwiJHNlbGVjdCIsImZpbmQiLCJzZWxlY3RlZFNraW4iLCJ2YWwiLCJodG1sX2lkIiwiYXR0ciIsIm5vbmNlIiwiV1BCQ19BamF4IiwidGV4dCIsInByb3AiLCJhamF4IiwidXJsIiwiYWpheF91cmwiLCJ0eXBlIiwiZGF0YSIsImFjdGlvbiIsInNraW4iLCJfYWpheF9ub25jZSIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsIl9yZXNwb25zZSRkYXRhIiwiJGJ0biIsImdldEVsZW1lbnRCeUlkIiwicmVtb3ZlQXR0ciIsImNvbnNvbGUiLCJ3YXJuIiwic2F2ZWRTa2luVXJsIiwidXJsX2Z1bGwiLCJsb2ciLCJlcnJvciJdLCJzb3VyY2VzIjpbImluY2x1ZGVzL2VsZW1lbnRvci1ib29raW5nLWZvcm0vX3NyYy93cGJjLWVsZW1lbnRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJqUXVlcnkoIGRvY3VtZW50ICkucmVhZHkoIGZ1bmN0aW9uICgkKSB7XHJcblxyXG5cdC8qKlxyXG5cdCAqIEFqYXggc2F2ZS5cclxuXHQgKi9cclxuXHQkKCBkb2N1bWVudCApLm9uKCAnY2xpY2snLCAnLmVsZW1lbnRvci1zYXZlLXNraW4nLCBmdW5jdGlvbiAoKSB7XHJcblxyXG5cclxuXHRcdGNvbnN0ICRidXR0b24gICAgICAgICA9ICQoIHRoaXMgKTtcclxuXHRcdGNvbnN0ICRjb250cm9sV3JhcHBlciA9ICRidXR0b24uY2xvc2VzdCggJy5lbGVtZW50b3ItY29udHJvbC1jb250ZW50JyApO1xyXG5cdFx0Y29uc3QgJHNlbGVjdCAgICAgICAgID0gJGNvbnRyb2xXcmFwcGVyLmZpbmQoICcuZWxlbWVudG9yLWNvbnRyb2wtaW5wdXQtd3JhcHBlciBzZWxlY3QnICk7XHJcblx0XHRjb25zdCBzZWxlY3RlZFNraW4gICAgPSAkc2VsZWN0LnZhbCgpO1xyXG5cclxuXHRcdGNvbnN0IGh0bWxfaWQgPSAkYnV0dG9uLmF0dHIoICdpZCcgKTtcclxuXHRcdGNvbnN0IG5vbmNlICAgPSBXUEJDX0FqYXgubm9uY2U7XHJcblxyXG5cdFx0Ly8gVUkgZmVlZGJhY2s6IHByb2Nlc3Npbmcgc3RhdGUuXHJcblx0XHQkYnV0dG9uLmF0dHIoICdzYXZlZF90aXRsZScsICRidXR0b24udGV4dCgpICk7XHJcblx0XHQkYnV0dG9uLnRleHQoICRidXR0b24uYXR0ciggJ3Byb2Nlc3NpbmdfdGl0bGUnICkgKyAnLi4uJyApO1xyXG5cdFx0JGJ1dHRvbi5wcm9wKCAnZGlzYWJsZWQnLCB0cnVlICk7XHJcblxyXG5cdFx0JC5hamF4KFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dXJsOiBXUEJDX0FqYXguYWpheF91cmwsXHJcblx0XHRcdFx0dHlwZTogJ1BPU1QnLFxyXG5cdFx0XHRcdGRhdGE6IHtcclxuXHRcdFx0XHRcdGFjdGlvbjogJ3dwYmNfc2F2ZV9jYWxlbmRhcl9za2luJyxcclxuXHRcdFx0XHRcdHNraW46IHNlbGVjdGVkU2tpbixcclxuXHRcdFx0XHRcdF9hamF4X25vbmNlOiBub25jZSxcclxuXHRcdFx0XHRcdGh0bWxfaWQ6IGh0bWxfaWQsXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuXHJcblx0XHRcdFx0XHQvLyBSZXN0b3JlIGJ1dHRvbiBzdGF0ZS5cclxuXHRcdFx0XHRcdGlmICggaHRtbF9pZCApIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgJGJ0biA9ICQoIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBodG1sX2lkICkgKTtcclxuXHRcdFx0XHRcdFx0JGJ0bi5wcm9wKCAnZGlzYWJsZWQnLCBmYWxzZSApLnRleHQoICRidG4uYXR0ciggJ3NhdmVkX3RpdGxlJyApICkucmVtb3ZlQXR0ciggJ3NhdmVkX3RpdGxlJyApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggISByZXNwb25zZS5zdWNjZXNzICkge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdTa2luIHNhdmUgZmFpbGVkOicsIHJlc3BvbnNlLmRhdGEgfHwgJ1Vua25vd24gZXJyb3InICk7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRjb25zdCBzYXZlZFNraW5VcmwgPSByZXNwb25zZS5kYXRhPy51cmxfZnVsbDtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCAnU2tpbiBzYXZlZCBzdWNjZXNzZnVsbHk6Jywgc2F2ZWRTa2luVXJsICk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRlcnJvciAgOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvciggJ0FKQVggZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHNraW4gc2F2ZS4nICk7XHJcblx0XHRcdFx0XHQvLyBPcHRpb25hbDogcmVzdG9yZSBidXR0b24gVUkuXHJcblx0XHRcdFx0XHRpZiAoIGh0bWxfaWQgKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0ICRidG4gPSAkKCAnIycgKyBodG1sX2lkICk7XHJcblx0XHRcdFx0XHRcdCRidG4ucHJvcCggJ2Rpc2FibGVkJywgZmFsc2UgKS50ZXh0KCAkYnRuLmF0dHIoICdzYXZlZF90aXRsZScgKSApLnJlbW92ZUF0dHIoICdzYXZlZF90aXRsZScgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0fSApO1xyXG5cclxufSApO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBQUFBLE1BQU0sQ0FBRUMsUUFBUyxDQUFDLENBQUNDLEtBQUssQ0FBRSxVQUFVQyxDQUFDLEVBQUU7RUFFdEM7QUFDRDtBQUNBO0VBQ0NBLENBQUMsQ0FBRUYsUUFBUyxDQUFDLENBQUNHLEVBQUUsQ0FBRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsWUFBWTtJQUc5RCxJQUFNQyxPQUFPLEdBQVdGLENBQUMsQ0FBRSxJQUFLLENBQUM7SUFDakMsSUFBTUcsZUFBZSxHQUFHRCxPQUFPLENBQUNFLE9BQU8sQ0FBRSw0QkFBNkIsQ0FBQztJQUN2RSxJQUFNQyxPQUFPLEdBQVdGLGVBQWUsQ0FBQ0csSUFBSSxDQUFFLHlDQUEwQyxDQUFDO0lBQ3pGLElBQU1DLFlBQVksR0FBTUYsT0FBTyxDQUFDRyxHQUFHLENBQUMsQ0FBQztJQUVyQyxJQUFNQyxPQUFPLEdBQUdQLE9BQU8sQ0FBQ1EsSUFBSSxDQUFFLElBQUssQ0FBQztJQUNwQyxJQUFNQyxLQUFLLEdBQUtDLFNBQVMsQ0FBQ0QsS0FBSzs7SUFFL0I7SUFDQVQsT0FBTyxDQUFDUSxJQUFJLENBQUUsYUFBYSxFQUFFUixPQUFPLENBQUNXLElBQUksQ0FBQyxDQUFFLENBQUM7SUFDN0NYLE9BQU8sQ0FBQ1csSUFBSSxDQUFFWCxPQUFPLENBQUNRLElBQUksQ0FBRSxrQkFBbUIsQ0FBQyxHQUFHLEtBQU0sQ0FBQztJQUMxRFIsT0FBTyxDQUFDWSxJQUFJLENBQUUsVUFBVSxFQUFFLElBQUssQ0FBQztJQUVoQ2QsQ0FBQyxDQUFDZSxJQUFJLENBQ0w7TUFDQ0MsR0FBRyxFQUFFSixTQUFTLENBQUNLLFFBQVE7TUFDdkJDLElBQUksRUFBRSxNQUFNO01BQ1pDLElBQUksRUFBRTtRQUNMQyxNQUFNLEVBQUUseUJBQXlCO1FBQ2pDQyxJQUFJLEVBQUVkLFlBQVk7UUFDbEJlLFdBQVcsRUFBRVgsS0FBSztRQUNsQkYsT0FBTyxFQUFFQTtNQUNWLENBQUM7TUFDRGMsT0FBTyxFQUFFLFNBQVRBLE9BQU9BLENBQVlDLFFBQVEsRUFBRTtRQUFBLElBQUFDLGNBQUE7UUFFNUI7UUFDQSxJQUFLaEIsT0FBTyxFQUFHO1VBQ2QsSUFBTWlCLElBQUksR0FBRzFCLENBQUMsQ0FBRUYsUUFBUSxDQUFDNkIsY0FBYyxDQUFFbEIsT0FBUSxDQUFFLENBQUM7VUFDcERpQixJQUFJLENBQUNaLElBQUksQ0FBRSxVQUFVLEVBQUUsS0FBTSxDQUFDLENBQUNELElBQUksQ0FBRWEsSUFBSSxDQUFDaEIsSUFBSSxDQUFFLGFBQWMsQ0FBRSxDQUFDLENBQUNrQixVQUFVLENBQUUsYUFBYyxDQUFDO1FBQzlGO1FBRUEsSUFBSyxDQUFFSixRQUFRLENBQUNELE9BQU8sRUFBRztVQUN6Qk0sT0FBTyxDQUFDQyxJQUFJLENBQUUsbUJBQW1CLEVBQUVOLFFBQVEsQ0FBQ0wsSUFBSSxJQUFJLGVBQWdCLENBQUM7VUFDckU7UUFDRDtRQUVBLElBQU1ZLFlBQVksSUFBQU4sY0FBQSxHQUFHRCxRQUFRLENBQUNMLElBQUksY0FBQU0sY0FBQSx1QkFBYkEsY0FBQSxDQUFlTyxRQUFRO1FBQzVDSCxPQUFPLENBQUNJLEdBQUcsQ0FBRSwwQkFBMEIsRUFBRUYsWUFBYSxDQUFDO01BQ3hELENBQUM7TUFDREcsS0FBSyxFQUFJLFNBQVRBLEtBQUtBLENBQUEsRUFBZ0I7UUFFcEJMLE9BQU8sQ0FBQ0ssS0FBSyxDQUFFLHVDQUF3QyxDQUFDO1FBQ3hEO1FBQ0EsSUFBS3pCLE9BQU8sRUFBRztVQUNkLElBQU1pQixJQUFJLEdBQUcxQixDQUFDLENBQUUsR0FBRyxHQUFHUyxPQUFRLENBQUM7VUFDL0JpQixJQUFJLENBQUNaLElBQUksQ0FBRSxVQUFVLEVBQUUsS0FBTSxDQUFDLENBQUNELElBQUksQ0FBRWEsSUFBSSxDQUFDaEIsSUFBSSxDQUFFLGFBQWMsQ0FBRSxDQUFDLENBQUNrQixVQUFVLENBQUUsYUFBYyxDQUFDO1FBQzlGO01BQ0Q7SUFDRCxDQUNELENBQUM7RUFDRixDQUFFLENBQUM7QUFFSixDQUFFLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=
