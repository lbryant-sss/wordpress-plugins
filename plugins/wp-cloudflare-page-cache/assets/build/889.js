"use strict";(globalThis.webpackChunkwp_cloudflare_page_cache=globalThis.webpackChunkwp_cloudflare_page_cache||[]).push([[889],{2889:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ne});var l=t(1609),c=t(3781),r=t(5975),o=t(7248),n=t(2748);function s({...e}){return(0,l.createElement)(o._s.Root,{"data-slot":"drawer",...e})}function i({...e}){return(0,l.createElement)(o._s.Trigger,{"data-slot":"drawer-trigger",...e})}function d({...e}){return(0,l.createElement)(o._s.Portal,{"data-slot":"drawer-portal",...e})}function p({...e}){return(0,l.createElement)(o._s.Close,{"data-slot":"drawer-close",...e})}function u({className:e,...a}){return(0,l.createElement)(o._s.Overlay,{"data-slot":"drawer-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[9999] bg-black/50",e),...a})}function m({className:e,children:a,...t}){return(0,l.createElement)(d,{"data-slot":"drawer-portal"},(0,l.createElement)(u,null),(0,l.createElement)(o._s.Content,{"data-slot":"drawer-content",className:(0,n.cn)("group/drawer-content bg-background fixed z-[10000] isolate flex flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",e),...t},a))}function h({className:e,...a}){return(0,l.createElement)("div",{"data-slot":"drawer-header",className:(0,n.cn)("flex flex-col gap-1.5 p-4",e),...a})}function g({className:e,...a}){return(0,l.createElement)(o._s.Title,{"data-slot":"drawer-title",className:(0,n.cn)("text-foreground font-semibold",e),...a})}var _=t(4585),f=t(4758),b=t(7723),w=t(166),E=t(8697),y=t(827),v=t(5404),x=t(4721),N=t(7102),k=t(9391),C=t(4674);function A({className:e,children:a,...t}){return(0,l.createElement)(C.bL,{"data-slot":"scroll-area",className:(0,n.cn)("relative",e),...t},(0,l.createElement)(C.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1"},a),(0,l.createElement)(P,null),(0,l.createElement)(C.OK,null))}function P({className:e,orientation:a="vertical",...t}){return(0,l.createElement)(C.VM,{"data-slot":"scroll-area-scrollbar",orientation:a,className:(0,n.cn)("flex touch-none p-px transition-colors select-none","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",e),...t},(0,l.createElement)(C.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"}))}var R=t(504),S=t(6087);const L=()=>{const{darkMode:e}=(0,f.C)(),{isToggleOn:a,settings:t}=(0,_.C)(),{i18n:c}=window.SPCDash,o=e=>{navigator.clipboard.writeText(e),x.oR.success((0,b.__)("Copied to clipboard!","wp-cloudflare-page-cache"))},u=(0,b.sprintf)("map $upstream_http_x_wp_cf_super_cache_active $wp_cf_super_cache_active {\n  default  'no-cache, no-store, must-revalidate, max-age=0';\n  '1' 's-maxage=%s, max-age=%s';\n}",t.cf_maxage,t.cf_browser_maxage),C="more_clear_headers 'Pragma';\nmore_clear_headers 'Expires';\nmore_clear_headers 'Cache-Control';\nadd_header Cache-Control $wp_cf_super_cache_active;";let P="";return a("cf_bypass_sitemap")&&(P+='location ~* \\.(xml|xsl)$ { add_header Cache-Control "no-cache, no-store, must-revalidate, max-age=0"; expires -1; }\n'),a("cf_bypass_file_robots")&&(P+='location /robots.txt { add_header Cache-Control "no-cache, no-store, must-revalidate, max-age=0"; expires -1; }\n'),a("cf_browser_caching_htaccess")&&(P+='location ~* \\.(css|js|pdf)$ { add_header Cache-Control "public, must-revalidate, proxy-revalidate, immutable, max-age=2592000, stale-while-revalidate=86400, stale-if-error=604800"; expires 30d; }\n',P+='location ~* \\.(jpg|jpeg|png|gif|ico|eot|swf|svg|webp|avif|ttf|otf|woff|woff2|ogg|mp4|mpeg|avi|mkv|webm|mp3)$ { add_header Cache-Control "public, must-revalidate, proxy-revalidate, immutable, max-age=31536000, stale-while-revalidate=86400, stale-if-error=604800"; expires 365d; }\n'),P+='location /wp-cron.php { add_header Cache-Control "no-cache, no-store, must-revalidate, max-age=0"; expires -1; }\n',(0,l.createElement)(s,null,(0,l.createElement)(i,{className:"underline text-current cursor-pointer"},(0,b.__)("here","wp-cloudflare-page-cache")),(0,l.createElement)(d,null,(0,l.createElement)(m,{className:(0,n.cn)("overflow-hidden",{dark:e})},(0,l.createElement)(h,{className:"border-b border-border bg-muted"},(0,l.createElement)(R.A,{className:"text-left flex items-center justify-between w-full"},(0,l.createElement)(g,null,(0,l.createElement)("h2",{className:"flex items-center text-lg mb-0"},(0,l.createElement)(w.A,{className:"size-6 text-orange-500 mr-3"}),(0,b.__)("Nginx Instructions","wp-cloudflare-page-cache"))),(0,l.createElement)(p,null,(0,l.createElement)(r.A,{variant:"ghost",size:"icon",className:"absolute top-2 right-2",icon:E.A},(0,l.createElement)("span",{className:"sr-only"},c.close))))),(0,l.createElement)(A,{className:"overflow-auto max-w-full max-h-[80vh] py-5"},(0,l.createElement)(R.A,{className:"py-0"},a("cf_cache_control_htaccess")&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"flex items-center mb-3"},(0,l.createElement)(y.A,{className:"size-5 mr-2 text-blue-500"}),(0,l.createElement)("h3",{className:"text-base"},(0,b.__)("Overwrite the cache-control header","wp-cloudflare-page-cache"))),(0,l.createElement)("div",{className:"space-y-4"},(0,l.createElement)("p",{className:"text-sm mb-2 text-muted-foreground"},(0,S.createInterpolateElement)((0,b.__)("Edit the main Nginx configuration file, usually <code>/etc/nginx.conf</code>, and enter these rules immediately after opening the http block:","wp-cloudflare-page-cache"),{code:(0,l.createElement)("code",{className:"px-2 py-1 rounded bg-muted font-mono"},"/etc/nginx.conf")})),(0,l.createElement)("div",{className:"relative"},(0,l.createElement)(r.A,{variant:"default",size:"icon",onClick:()=>o(u),icon:v.A,className:"absolute top-2 right-2 z-10"},(0,l.createElement)("span",{className:"sr-only"},(0,b.__)("Copy to clipboard","wp-cloudflare-page-cache"))),(0,l.createElement)("pre",{className:"text-muted-foreground bg-muted border border-border break-all p-4 rounded-2xl overflow-x-auto text-sm whitespace-pre-wrap"},u)),(0,l.createElement)("div",null,(0,l.createElement)("p",{className:"text-sm mb-2 text-muted-foreground"},(0,b.__)("Now open the configuration file of your domain and add the following rules inside the block that deals with the management of PHP pages:","wp-cloudflare-page-cache")),(0,l.createElement)("div",{className:"relative"},(0,l.createElement)(r.A,{variant:"default",size:"icon",onClick:()=>o(C),className:"absolute top-2 right-2 z-10",icon:v.A},(0,l.createElement)("span",{className:"sr-only"},(0,b.__)("Copy to clipboard","wp-cloudflare-page-cache"))),(0,l.createElement)("pre",{className:"text-muted-foreground bg-muted border border-border p-4 rounded-2xl overflow-y-auto text-sm whitespace-pre-wrap"},C)))),(0,l.createElement)(N.A,{className:"my-5"})),(0,l.createElement)("div",{className:"flex items-center mb-3"},(0,l.createElement)(y.A,{className:"size-5 mr-2 text-blue-500"}),(0,l.createElement)("h3",{className:"text-base"},(0,b.__)("Browser caching rules","wp-cloudflare-page-cache"))),(0,l.createElement)("div",{className:"space-y-4"},(0,l.createElement)("div",null,(0,l.createElement)("p",{className:"text-sm mb-2 text-muted-foreground"},(0,b.__)("Open the configuration file of your domain and add the following rules:","wp-cloudflare-page-cache")),(0,l.createElement)("div",{className:"relative"},(0,l.createElement)(r.A,{variant:"default",size:"icon",onClick:()=>o(P),className:"absolute top-2 right-2 z-10",icon:v.A},(0,l.createElement)("span",{className:"sr-only"},(0,b.__)("Copy to clipboard","wp-cloudflare-page-cache"))),(0,l.createElement)("pre",{className:"text-muted-foreground bg-muted border border-border p-4 rounded-2xl overflow-y-auto text-sm whitespace-pre-wrap"},P)))),(0,l.createElement)(k.A,{type:"info",className:"my-5",title:(0,b.__)("Save and restart Nginx.","wp-cloudflare-page-cache")}))))))};var I=t(7158),j=t(2318),z=t(5181),T=t(1584),U=t(5107);function O({...e}){return(0,l.createElement)(T.bL,{"data-slot":"accordion",...e})}function D({className:e,...a}){return(0,l.createElement)(T.q7,{"data-slot":"accordion-item",className:e,...a})}function F({className:e,children:a,...t}){return(0,l.createElement)(T.Y9,{className:"flex",as:"p"},(0,l.createElement)(T.l9,{"data-slot":"accordion-trigger",className:(0,n.cn)("cursor-pointer focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-center justify-between gap-4 py-2 text-left text-sm w-full font-medium transition-all outline-none focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",e),...t},a,(0,l.createElement)(U.A,{className:"ml-auto text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})))}function W({className:e,children:a,...t}){return(0,l.createElement)(T.UC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...t},(0,l.createElement)("div",{className:(0,n.cn)("py-4",e)},a))}var M=t(3327);const $=()=>(0,l.createElement)("div",{className:"grid gap-1"},(0,l.createElement)(O,{type:"single",collapsible:!0,className:"rounded-sm border overflow-hidden"},(0,l.createElement)(D,{value:"htaccess"},(0,l.createElement)(F,{className:"!m-0 bg-muted px-4 py-3 !text-sm"},(0,b.__)("Additional info","wp-cloudflare-page-cache")),(0,l.createElement)(W,{className:"p-4 bg-muted/20"},(0,l.createElement)(k.A,{type:"warning",title:(0,b.__)("Important Notes","wp-cloudflare-page-cache"),description:(0,S.createInterpolateElement)((0,b.__)("This option is not essential as in most cases this plugin works out of the box. If the page cache does not work after a considerable number of attempts or you see that max-age and s-maxage values of <code>X-WP-CF-Super-Cache-Cache-Control</code> response header are not the same of the ones in <code>Cache-Control</code> response header, activate this option.","wp-cloudflare-page-cache"),{code:(0,l.createElement)("code",null)})}),(0,l.createElement)("div",{className:"grid lg:grid-cols-2 gap-4 mt-4"},(0,l.createElement)(k.A,{type:"success",title:`${(0,b.__)("Read here if you use Apache","wp-cloudflare-page-cache")} (.htaccess):`,description:(0,S.createInterpolateElement)((0,b.__)("For overwriting to work, make sure that the rules added by Super Page Cache are placed at the bottom of the <code>.htaccess</code> file. If they are present <strong>BEFORE</strong> other caching rules of other plugins, move them to the bottom manually.","wp-cloudflare-page-cache"),{code:(0,l.createElement)("code",null),strong:(0,l.createElement)("strong",null)})}),(0,l.createElement)(k.A,{type:"info",title:`${(0,b.__)("Read here if you use Nginx","wp-cloudflare-page-cache")}:`,description:(0,S.createInterpolateElement)((0,b.__)("It is not possible for Super Page Cache to automatically change the settings to allow this option to work immediately. For it to work, update these settings and then follow the instructions <button>here</button>.","wp-cloudflare-page-cache"),{button:(0,l.createElement)(L,null)})})))))),V=()=>{const{isToggleOn:e}=(0,_.C)(),a=[{id:"cf_fallback_cache_curl",type:"toggle",label:(0,b.__)("Use cURL","wp-cloudflare-page-cache"),description:(0,b.__)("Use cURL instead of WordPress advanced-cache.php to generate the Page page. It can increase the time it takes to generate the Page cache but improves compatibility with other performance plugins.","wp-cloudflare-page-cache")},{id:"cf_fallback_cache_ttl",type:"number",min:0,label:`${(0,b.__)("Cache Lifespan","wp-cloudflare-page-cache")} (${(0,b.__)("seconds","wp-cloudflare-page-cache")})`,description:(0,b.__)("Enter 0 for no expiration.","wp-cloudflare-page-cache"),hide:!e("cf_fallback_cache")},{id:"cf_fallback_cache_save_headers",type:"toggle",label:(0,b.__)("Save response headers","wp-cloudflare-page-cache"),description:`${(0,b.__)("Save response headers together with HTML code.","wp-cloudflare-page-cache")} ${(0,b.__)("The following response header will never be saved:","wp-cloudflare-page-cache")}`,hide:!e("cf_fallback_cache"),children:(0,l.createElement)("pre",{className:"text-xs mt-1"},"cache-control, set-cookie, X-WP-CF-Super-Cache*")},{id:"cf_fallback_cache_prevent_cache_urls_without_trailing_slash",type:"toggle",label:(0,b.__)("Prevent to cache URLs without trailing slash","wp-cloudflare-page-cache"),hide:!e("cf_fallback_cache")},{id:"cf_auto_purge_on_comments",type:"toggle",label:(0,b.__)("Auto-Purge Cache on Comment Activity","wp-cloudflare-page-cache"),description:(0,b.__)("Automatically purge single post cache when a new comment is inserted into the database or when a comment is approved or deleted","wp-cloudflare-page-cache")},{id:"cf_auto_purge_on_upgrader_process_complete",type:"toggle",label:(0,b.__)("Auto-purge on Updates","wp-cloudflare-page-cache"),description:(0,b.__)("Automatically purge the cache when the upgrader process is complete","wp-cloudflare-page-cache")},{id:"cf_strip_cookies",type:"toggle",label:(0,b.__)("Strip response cookies","wp-cloudflare-page-cache"),description:(0,b.__)("Cloudflare will not cache when there are cookies in responses unless you strip out them to overwrite the behavior. If the cache does not work due to response cookies and you are sure that these cookies are not essential for the website to works, enable this option.","wp-cloudflare-page-cache")},{id:"cf_cache_control_htaccess",type:"toggle",label:(0,b.__)("Overwrite the cache-control header for WordPress's pages using web server rules","wp-cloudflare-page-cache"),description:(0,l.createElement)(j.A,{variant:"destructive"},(0,b.__)("Writes into .htaccess","wp-cloudflare-page-cache")),children:(0,l.createElement)("div",{className:"grid gap-2 mt-2"},(0,l.createElement)(k.A,{description:(0,b.__)("This option is useful if you use Super Page Cache together with other performance plugins that could affect the Cloudflare cache with their cache-control headers. It works automatically if you are using Apache as web server or as backend web server.","wp-cloudflare-page-cache")}),(0,l.createElement)($,null))},{id:"cf_purge_only_html",type:"toggle",label:(0,b.__)("Purge HTML pages only","wp-cloudflare-page-cache"),description:(0,b.__)("Purge only the cached HTML pages instead of the whole cache (assets & pages).","wp-cloudflare-page-cache")},{id:"cf_disable_cache_purging_queue",type:"toggle",label:(0,b.__)("Disable cache purging using queue","wp-cloudflare-page-cache"),description:(0,b.__)("By default this plugin purge the cache after 10 seconds from the purging action, to avoid a high number of purge requests in case of multiple events triggered by third party plugins. This is done using a classic WordPress scheduled event. If you notice any errors regarding the scheduled intervals, you can deactivate this mode by enabling this option.","wp-cloudflare-page-cache")},{id:"advanced_exclude_dynamic_content",type:"checkbox-group",label:(0,b.__)("Don't cache the following dynamic contents:","wp-cloudflare-page-cache"),controls:[{id:"cf_bypass_404",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("404 Page","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_404"))," ")},{id:"cf_bypass_single_post",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("Single posts","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_single"))," ")},{id:"cf_bypass_pages",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("Pages","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_page"))," ")},{id:"cf_bypass_front_page",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("Front Page","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_front_page"))," ")},{id:"cf_bypass_home",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("Home","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_home"))," ")},{id:"cf_bypass_archives",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("Archives","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_archive"))," ")},{id:"cf_bypass_tags",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("Tags","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_tag"))," ")},{id:"cf_bypass_category",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("Categories","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_category"))," ")},{id:"cf_bypass_feeds",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("Feeds","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_feed"))," ")},{id:"cf_bypass_search_pages",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("Search Pages","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_search"))," ")},{id:"cf_bypass_author_pages",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("Author Pages","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_author"))," ")},{id:"cf_bypass_amp",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("AMP pages","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_amp"))," ")},{id:"cf_bypass_ajax",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("Ajax requests","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_ajax"))," ")},{id:"cf_bypass_query_var",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("Pages with query args","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_query_var"))," ")},{id:"cf_bypass_wp_json_rest",type:"checkbox",label:(0,l.createElement)("div",{className:"flex items-center"},(0,b.__)("WP JSON endpoints","wp-cloudflare-page-cache")," ",(0,l.createElement)(I.A,null,(0,l.createElement)("code",null,"is_wp_json_rest"))," ")}]},{id:"advanced_exclude_dynamic_content",type:"checkbox-group",label:(0,b.__)("Don't cache the following static contents:","wp-cloudflare-page-cache"),stack:!0,description:(0,l.createElement)(l.Fragment,null,(0,S.createInterpolateElement)((0,b.__)("<strong>If you use Nginx:</strong> It is recommended to add the browser caching rules that you find in the instructions <button>here</button>.","wp-cloudflare-page-cache"),{strong:(0,l.createElement)("strong",null),button:(0,l.createElement)(L,null)}),(0,l.createElement)("br",null),(0,l.createElement)(j.A,{variant:"destructive",className:"mt-3"},(0,b.__)("Writes into .htaccess","wp-cloudflare-page-cache"))),controls:[{id:"cf_bypass_sitemap",type:"checkbox",label:(0,b.__)("XML sitemaps","wp-cloudflare-page-cache")},{id:"cf_bypass_file_robots",type:"checkbox",label:(0,b.__)("Robots.txt","wp-cloudflare-page-cache")}]},{id:"cf_post_per_page",type:"number",min:1,max:100,label:(0,b.__)("Posts per page","wp-cloudflare-page-cache"),description:(0,b.__)("Enter how many posts per page (or category) the theme shows to your users. It will be use to clean up the pagination on cache purge.","wp-cloudflare-page-cache")}],t=[{id:"cf_browser_caching_htaccess",type:"toggle",label:(0,b.__)("Add browser caching rules for static assets","wp-cloudflare-page-cache"),description:(0,l.createElement)(l.Fragment,null,(0,S.createInterpolateElement)((0,b.__)("<strong>If you use Nginx:</strong> it is not possible for Super Page Cache to automatically change the settings to allow this option to work immediately. For it to work, update these settings and then follow the instructions <button>here</button>."),{button:(0,l.createElement)(L,null),strong:(0,l.createElement)("strong",null)}),(0,l.createElement)("br",null),(0,l.createElement)(j.A,{variant:"destructive",className:"mt-3"},(0,b.__)("Writes into .htaccess","wp-cloudflare-page-cache"))),children:(0,l.createElement)(k.A,{type:"warning",className:"mt-5"},(0,b.__)('If you are using Plesk, make sure you have disabled the options "Smart static files processing" and "Serve static files directly by Nginx" on "Apache & Nginx Settings" page of your Plesk panel or ask your hosting provider to update browser caching rules for you.',"wp-cloudflare-page-cache"))}];return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(z.Ay,null,(0,l.createElement)(z.aR,{className:"bg-muted"},(0,l.createElement)("h3",{className:"font-semibold text-base flex items-center"},(0,b.__)("Cache","wp-cloudflare-page-cache"))),(0,l.createElement)(z.Wu,{className:"p-0"},(0,l.createElement)(M.A,{controls:a}))),(0,l.createElement)(z.Ay,null,(0,l.createElement)(z.aR,{className:"bg-muted"},(0,l.createElement)("h3",{className:"font-semibold text-base flex items-center"},(0,b.__)("Browser Caching","wp-cloudflare-page-cache"))),(0,l.createElement)(z.Wu,{className:"p-0"},(0,l.createElement)("div",{className:"p-4"},(0,l.createElement)(k.A,{description:(0,b.__)("This option is useful if you want to use Super Page Cache to enable browser caching rules for assets such like images, CSS, scripts, etc. It works automatically if you use Apache as web server or as backend web server.","wp-cloudflare-page-cache")})),(0,l.createElement)(M.A,{controls:t}))))},q=()=>{const{settings:e,isToggleOn:a}=(0,_.C)();e.cf_page_rule_id;const t=[{id:"group-cf-behavior",type:"checkbox-group",label:(0,b.__)("Automatically purge the Cloudflare's cache when something changes on the website","wp-cloudflare-page-cache"),stack:!0,description:(0,l.createElement)(l.Fragment,null,(0,b.__)("Example: update/publish a post/page","wp-cloudflare-page-cache"),(0,l.createElement)("br",null),(0,S.createInterpolateElement)((0,b.__)("It is recommended to add the browser caching rules that you find <button>here</button>.","wp-cloudflare-page-cache"),{button:(0,l.createElement)(L,null)})),controls:[{id:"cf_auto_purge",type:"checkbox",label:(0,b.__)("Purge cache for related pages only","wp-cloudflare-page-cache"),recommended:!0},{id:"cf_auto_purge_all",type:"checkbox",label:(0,b.__)("Purge whole cache","wp-cloudflare-page-cache")}]},{id:"cf_fallback_cache_auto_purge",type:"toggle",label:(0,b.__)("Automatically purge the Page cache when Cloudflare cache is purged","wp-cloudflare-page-cache"),hide:!a("cf_fallback_cache")},{id:"cf_bypass_backend_page_rule",type:"toggle",label:(0,b.__)("Force cache bypassing for backend with an additional Cloudflare page rule","wp-cloudflare-page-cache"),description:(0,S.createInterpolateElement)((0,b.__)("<strong>Read here:</strong> by default, all back-end URLs are not cached thanks to some response headers, but if for some circumstances your backend pages are still cached, you can enable this option which will add an <strong>additional page rule on Cloudflare</strong> to force cache bypassing for the whole WordPress backend directly from Cloudflare.","wp-cloudflare-page-cache"),{strong:(0,l.createElement)("strong",null)}),hide:a("cf_woker_enabled")}],c=[{id:"cf_maxage",type:"number",label:(0,b.__)("Cache-Control max-age","wp-cloudflare-page-cache"),description:(0,b.__)("Don't touch if you don't know what is it. Must be greater than zero. Recommended 31536000 (1 year)","wp-cloudflare-page-cache"),min:1,max:31536e4},{id:"cf_browser_maxage",type:"number",label:(0,b.__)("Browser Cache-Control max-age","wp-cloudflare-page-cache"),description:(0,b.__)("Don't touch if you don't know what is it. Must be greater than zero. Recommended a value between 60 and 600","wp-cloudflare-page-cache"),min:1,max:31536e4}];return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(z.Ay,null,(0,l.createElement)(z.aR,{className:"bg-muted"},(0,l.createElement)("h3",{className:"font-semibold text-base flex items-center"},(0,b.__)("Cache Lifetime Settings","wp-cloudflare-page-cache"))),(0,l.createElement)(z.Wu,{className:"p-0"},(0,l.createElement)(M.A,{controls:c}))),(0,l.createElement)(z.Ay,null,(0,l.createElement)(z.aR,{className:"bg-muted"},(0,l.createElement)("h3",{className:"font-semibold text-base flex items-center"},(0,b.__)("Cloudflare Cache Behavior","wp-cloudflare-page-cache"))),(0,l.createElement)(z.Wu,{className:"p-0"},(0,l.createElement)(M.A,{controls:t}))))};var H=t(8068),B=t(8309),K=t(3160),X=t(1839);const J=()=>{const{logDownloadURL:e,logViewURL:a}=window.SPCDash,{lockAsync:t,asyncLocked:c}=(0,f.C)(),[o,n]=(0,S.useState)(!1);return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(r.A,{variant:"ghost",target:"_blank",href:e,icon:B.A},(0,b.__)("Download Log File","wp-cloudflare-page-cache")),(0,l.createElement)(r.A,{variant:"ghost",target:"_blank",href:a,icon:K.A},(0,b.__)("View Log File","wp-cloudflare-page-cache")),(0,l.createElement)(r.A,{variant:"destructive",loader:o,disabled:c,onClick:async()=>{t(!0),n(!0);const e=await H.R.clearLogs();t(!1),n(!1),e.success?x.oR.success(e.message):x.oR.error(e.message)},icon:X.A},(0,b.__)("Clear logs now","wp-cloudflare-page-cache")))},Q=()=>{const{isToggleOn:e}=(0,_.C)(),a=[{id:"log_enabled",type:"toggle",label:(0,b.__)("Log mode","wp-cloudflare-page-cache"),description:(0,b.__)("Enable this option if you want log all communications between Cloudflare and this plugin.","wp-cloudflare-page-cache")},{id:"log_max_file_size",type:"number",label:(0,b.__)("Max log file size in MB","wp-cloudflare-page-cache"),description:(0,b.__)("Automatically reset the log file when it exceeded the max file size. Set 0 to never reset it.","wp-cloudflare-page-cache"),hide:!e("log_enabled")},{id:"log_verbosity",type:"select",label:(0,b.__)("Log verbosity","wp-cloudflare-page-cache"),options:[{value:"1",label:(0,b.__)("Standard","wp-cloudflare-page-cache")},{value:"2",label:(0,b.__)("High","wp-cloudflare-page-cache")}],hide:!e("log_enabled")}];return(0,l.createElement)(z.Ay,null,(0,l.createElement)(z.aR,{className:"bg-muted"},(0,l.createElement)("h3",{className:"font-semibold text-base flex items-center"},(0,b.__)("Logs Settings","wp-cloudflare-page-cache"))),(0,l.createElement)(z.Wu,{className:"p-0"},(0,l.createElement)(M.A,{controls:a})),e("log_enabled")&&(0,l.createElement)(z.wL,{className:"md:justify-end grid md:flex gap-4"},(0,l.createElement)(J,null)))};var Y=t(6284);const Z=({content:e})=>(0,l.createElement)("div",{className:"flex mt-5"},(0,l.createElement)(Y.p,{className:"rounded-r-none border-r-0 grow h-auto",disabled:!0,value:null!=e?e:""}),(0,l.createElement)(r.A,{icon:v.A,onClick:()=>{navigator.clipboard.writeText(e),x.oR.success((0,b.__)("Copied to clipboard!","wp-cloudflare-page-cache"))},className:"rounded-l-none",size:"icon"},(0,l.createElement)("span",{className:"sr-only"},(0,b.__)("Copy to clipboard","wp-cloudflare-page-cache"))));var G=t(4368);const ee=()=>{const{wordpressRoles:e}=window.SPCDash,{settings:a,updateSetting:t}=(0,_.C)(),{asyncLocked:c}=(0,f.C)();return(0,l.createElement)("div",{className:"grid gap-3 mt-5  md:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 w-full"},Object.entries(e).map((([e,r],o)=>(0,l.createElement)("div",{key:`${e}-${o}`,className:"grid gap-3"},0!==o&&1!==o&&(0,l.createElement)(N.A,null),(0,l.createElement)("div",{className:"flex items-center gap-2"},(0,l.createElement)(G.A,{value:a.cf_purge_roles.includes(e)||!1,id:e,label:r,onChange:l=>((e,l)=>{let c=[...a.cf_purge_roles||[]];l?c.push(e):c=c.filter((a=>a!=e)),t("cf_purge_roles",c)})(e,l),disabled:c}))))))},ae=()=>{const{settings:e}=(0,_.C)(),{cronjobPurgeURL:a}=window.SPCDash,t=a.replace("replace:cf_purge_url_secret_key",e.cf_purge_url_secret_key||""),c=[{id:"cf_opcache_purge_on_flush",type:"toggle",label:(0,b.__)("Automatically purge the OPcache cache is purged","wp-cloudflare-page-cache")},{id:"cf_object_cache_purge_on_flush",type:"toggle",label:(0,b.__)("Automatically purge the object cache when cache is purged","wp-cloudflare-page-cache")},{id:"cronjob_purge_url",type:"custom",label:(0,b.__)("Purge the whole cache via Cronjob","wp-cloudflare-page-cache"),description:(0,b.__)("If you want purge the whole cache at specific intervals decided by you, you can create a cronjob that hits the following URL:","wp-cloudflare-page-cache"),component:(0,l.createElement)(Z,{content:t})},{id:"cf_purge_url_secret_key",type:"text",label:(0,b.__)("Purge cache URL secret key","wp-cloudflare-page-cache"),description:(0,b.__)("Secret key to use to purge the whole Cloudflare cache via URL. Don't touch if you don't know how to use it.","wp-cloudflare-page-cache")},{id:"cf_remove_purge_option_toolbar",type:"toggle",label:(0,b.__)("Remove purge option from toolbar","wp-cloudflare-page-cache")},{id:"cf_disable_single_metabox",type:"toggle",label:(0,b.__)("\tHide Metaboxes","wp-cloudflare-page-cache"),description:(0,b.__)("Disable the metaboxes on single pages and posts to avoid conflicts with other plugins.","wp-cloudflare-page-cache")},{id:"cf_seo_redirect",type:"toggle",label:(0,b.__)("SEO redirect","wp-cloudflare-page-cache"),description:(0,b.__)("Enable this option if you want to redirect the user to the correct page when the page is not found.","wp-cloudflare-page-cache")},{id:"purge_roles_custom",label:(0,b.__)("Select user roles allowed to purge the cache","wp-cloudflare-page-cache"),description:(0,b.__)("Admins are always allowed.","wp-cloudflare-page-cache"),type:"custom",component:(0,l.createElement)(ee,null)},{id:"cf_prefetch_urls_viewport",type:"toggle",label:(0,b.__)("Auto prefetch URLs in viewport","wp-cloudflare-page-cache"),description:(0,b.__)("If enabled, the browser prefetches in background all the internal URLs found in the viewport.","wp-cloudflare-page-cache")},{id:"cf_prefetch_urls_mouseover",type:"toggle",label:(0,b.__)("Auto prefetch URLs on mouse hover","wp-cloudflare-page-cache"),description:(0,b.__)("If enabled, the browser prefetches in background all the internal URLs found in the viewport.","wp-cloudflare-page-cache")},{type:"toggle",id:"cf_remove_cache_buster",label:(0,b.__)("Remove Cache Buster Query Parameter","wp-cloudflare-page-cache"),description:(0,b.__)("Stop adding cache buster query parameter when using the default page rule mode.","wp-cloudflare-page-cache"),hide:window.SPCDash.settings?.cf_remove_cache_buster||1},{type:"toggle",id:"keep_settings_on_deactivation",label:(0,b.__)("Keep settings on deactivation","wp-cloudflare-page-cache"),description:(0,b.__)("Keep settings on plugin deactivation.","wp-cloudflare-page-cache")}];return(0,l.createElement)(z.Ay,null,(0,l.createElement)(z.aR,{className:"bg-muted"},(0,l.createElement)("h3",{className:"font-semibold text-base flex items-center"},(0,b.__)("Other Settings","wp-cloudflare-page-cache"))),(0,l.createElement)(z.Wu,{className:"p-0"},(0,l.createElement)(M.A,{controls:c})))},te=()=>{const[e,a]=(0,S.useState)(!1),{asyncLocked:t,lockAsync:c}=(0,f.C)();return(0,l.createElement)(r.A,{variant:"orange",onClick:async()=>{c(!0),a(!0);const e=await H.R.startPreloader();c(!1),a(!1),e.success?x.oR.success(e.message):x.oR.error(e.message)},disabled:e||t,loader:e},e?(0,b.__)("Starting Preloader","wp-cloudflare-page-cache")+"...":(0,b.__)("Start Preloader","wp-cloudflare-page-cache"))},le=()=>{const{wordpressMenus:e}=window.SPCDash,{settings:a,isToggleOn:t,updateSetting:c}=(0,_.C)(),{asyncLocked:r}=(0,f.C)(),o=a.cf_preloader_nav_menus||[];return(0,l.createElement)("div",{className:"grid gap-3 mt-5"},Object.entries(e).map((([e,t],n)=>[0!==n&&(0,l.createElement)(N.A,{key:`separator-${e}`}),(0,l.createElement)("div",{className:"flex items-center gap-2",key:e},(0,l.createElement)(G.A,{value:a.cf_preloader_nav_menus.includes(e)||!1,id:e,label:(0,l.createElement)("span",null," ",(0,S.createInterpolateElement)((0,b.sprintf)((0,b.__)("Preload all internal links in <strong>%s</strong> WP Menu","wp-cloudflare-page-cache"),t),{strong:(0,l.createElement)("strong",{className:"font-bold opacity-75"})})),onChange:a=>((e,a)=>{let t=[...o];a?t.push(e):t=t.filter((a=>a!=e)),c("cf_preloader_nav_menus",t)})(e,a),disabled:r}))])),Object.keys(e).length>0&&(0,l.createElement)(N.A,null),(0,l.createElement)("div",{className:"flex items-center gap-2"},(0,l.createElement)(G.A,{value:t("cf_preload_last_urls"),id:"cf_preload_last_urls",label:(0,b.__)("Preload last 20 published/updated posts, pages & CPTs combined","wp-cloudflare-page-cache"),disabled:r,onChange:e=>{c("cf_preload_last_urls",e?1:0)}})))},ce=()=>{const{settings:e,isToggleOn:a}=(0,_.C)(),{cronjobURL:t}=window.SPCDash,c=t.replace("replace:cf_preloader_url_secret_key",e.cf_preloader_url_secret_key||""),r=[{id:"cf_preloader",type:"toggle",label:(0,b.__)("Enable preloader","wp-cloudflare-page-cache")},{id:"cf_preloader_start_on_purge",type:"toggle",label:(0,b.__)("Automatically preload the pages you have purged from cache.","wp-cloudflare-page-cache"),hide:!a("cf_preloader")},{id:"preloader-custom-operation",type:"custom",label:(0,b.__)("Preloader operation","wp-cloudflare-page-cache"),description:(0,b.__)("Choose the URLs preloading logic that the preloader must use. If no option is chosen, the most recently published URLs and the home page will be preloaded.","wp-cloudflare-page-cache"),component:(0,l.createElement)(le,null),hide:!a("cf_preloader")},{id:"cf_preload_sitemap_urls",type:"textarea",label:(0,b.__)("Preload all URLs into the following sitemaps","wp-cloudflare-page-cache"),description:(0,l.createElement)(l.Fragment,null,(0,b.__)("One sitemap per line.","wp-cloudflare-page-cache"),(0,l.createElement)("br",null),(0,l.createElement)("br",null),(0,b.__)("Example","wp-cloudflare-page-cache")+":",(0,l.createElement)("br",null),(0,l.createElement)("pre",null,"/post-sitemap.xml",(0,l.createElement)("br",null),"/page-sitemap.xml",(0,l.createElement)("br",null))),hide:!a("cf_preloader")},{id:"preloader_cronjob_info",type:"custom",label:(0,b.__)("Start the preloader via Cronjob","wp-cloudflare-page-cache"),description:(0,b.__)("If you want start the preloader at specific intervals decided by you, you can create a cronjob that hits the following URL:","wp-cloudflare-page-cache"),component:(0,l.createElement)(Z,{content:c}),hide:!a("cf_preloader")},{id:"cf_preloader_url_secret_key",type:"text",label:(0,b.__)("Cronjob secret key","wp-cloudflare-page-cache"),description:(0,b.__)("Secret key to use to start the preloader via URL. Don't touch if you don't know how to use it.","wp-cloudflare-page-cache"),hide:!a("cf_preloader")}];return(0,l.createElement)(z.Ay,{className:(0,n.cn)({"pb-0":a("cf_preloader")})},(0,l.createElement)(z.aR,{className:"bg-muted"},(0,l.createElement)("h3",{className:"font-semibold text-base flex items-center"},(0,b.__)("Preloader","wp-cloudflare-page-cache"))),(0,l.createElement)(z.Wu,{className:"p-0"},(0,l.createElement)(M.A,{controls:r})),a("cf_preloader")&&(0,l.createElement)(z.wL,{className:"flex justify-end"},(0,l.createElement)(te,null)))},re=()=>{const{i18n:e}=window.SPCDash,{asyncLocked:a,lockAsync:t}=(0,f.C)(),[c,o]=(0,S.useState)(!1);return(0,l.createElement)(r.A,{variant:"destructive",onClick:async()=>{t(!0),o(!0);const a=await H.R.purgeCacheVarnish();t(!1),o(!1),a.success?x.oR.success(a.message):x.oR.error(a.message||e.genericError)},loader:c,disabled:c||a,className:"flex items-center gap-2"},c?(0,b.__)("Purging Varnish Cache","wp-cloudflare-page-cache")+"...":(0,b.__)("Purge Varnish Cache","wp-cloudflare-page-cache"))},oe=()=>{const{isToggleOn:e}=(0,_.C)(),a=[{id:"cf_varnish_support",type:"toggle",label:(0,b.__)("Varnish Support","wp-cloudflare-page-cache")},{id:"cf_varnish_hostname",type:"text",label:(0,b.__)("Hostname","wp-cloudflare-page-cache"),hide:!e("cf_varnish_support")},{id:"cf_varnish_port",type:"number",label:(0,b.__)("Port","wp-cloudflare-page-cache"),hide:!e("cf_varnish_support"),min:0,max:65535},{id:"cf_varnish_purge_method",type:"text",label:(0,b.__)("HTTP method for single page cache purge","wp-cloudflare-page-cache"),hide:!e("cf_varnish_support")},{id:"cf_varnish_purge_all_method",type:"text",label:(0,b.__)("HTTP method for whole page cache purge","wp-cloudflare-page-cache"),hide:!e("cf_varnish_support")},{id:"cf_varnish_cw",type:"text",label:(0,b.__)("Cloudways Varnish","wp-cloudflare-page-cache"),description:(0,b.__)("Enable this option if you are using Varnish on Cloudways.","wp-cloudflare-page-cache"),hide:!e("cf_varnish_support")},{id:"cf_varnish_auto_purge",type:"toggle",label:(0,b.__)("Automatically purge Varnish cache when the cache is purged.","wp-cloudflare-page-cache"),hide:!e("cf_varnish_support")}];return(0,l.createElement)(z.Ay,null,(0,l.createElement)(z.aR,{className:"bg-muted"},(0,l.createElement)("h3",{className:"font-semibold text-base flex items-center"},(0,b.__)("Varnish Settings","wp-cloudflare-page-cache"))),(0,l.createElement)(z.Wu,{className:"p-0"},(0,l.createElement)(M.A,{controls:a})),e("cf_varnish_support")&&(0,l.createElement)(z.wL,{className:"flex justify-end"},(0,l.createElement)(re,null)))},ne=()=>(0,l.createElement)(c.A,null,(0,l.createElement)(V,null),(0,l.createElement)(q,null),(0,l.createElement)(ce,null),(0,l.createElement)(oe,null),(0,l.createElement)(Q,null),(0,l.createElement)(ae,null))},7158:(e,a,t)=>{t.d(a,{A:()=>p});var l=t(1609),c=t(7213),r=t(6674),o=t(2748);function n({delayDuration:e=0,...a}){return(0,l.createElement)(r.Kq,{"data-slot":"tooltip-provider",delayDuration:e,...a})}function s({...e}){return(0,l.createElement)(n,null,(0,l.createElement)(r.bL,{"data-slot":"tooltip",...e}))}function i({...e}){return(0,l.createElement)(r.l9,{"data-slot":"tooltip-trigger",...e})}function d({className:e,sideOffset:a=0,children:t,...c}){return(0,l.createElement)(r.ZL,null,(0,l.createElement)(r.UC,{"data-slot":"tooltip-content",sideOffset:a,className:(0,o.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...c},t,(0,l.createElement)(r.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})))}const p=({children:e,className:a="",icon:t=null,text:r=""})=>{if(!e)return null;const n=t||c.A;return(0,l.createElement)(s,null,(0,l.createElement)(i,null,(0,l.createElement)(n,{size:16,className:(0,o.cn)("text-muted-foreground ml-1",a)}),r&&(0,l.createElement)("span",{className:"sr-only"},r)),(0,l.createElement)(d,null,e))}}}]);