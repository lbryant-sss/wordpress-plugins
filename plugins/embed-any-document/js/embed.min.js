jQuery(document).ready(function(m){var a,d=m("#awsm-url"),f=m("#shortcode"),o=m("#embed-message p"),t=(m(".mceActionPanel"),m(".ead-container")),b="",i=emebeder.msextension;function h(e){return-1==e.indexOf("%")?(e=e.replace(/[^0-9]/g,""),e+="px"):(e=e.replace(/[^0-9]/g,""),e+="%"),e}function n(){var e=m("#TB_window"),d=m(window).width(),a=m(window).height(),d=1080<d?1080:d;e.size()&&(e.width(d-50).height(a-45),m("#TB_ajaxContent").css({width:"100%",height:"100%",padding:"0"}),e.css({"margin-left":"-"+parseInt((d-50)/2,10)+"px"}),void 0!==document.body.style.maxWidth&&e.css({top:"20px","margin-top":"0"}),m("#TB_title").css({"background-color":"#fff",color:"#cfcfcf"}))}function v(e,d){var a=m("#ead-"+e).val();return a&&("ead-"+e==d||a!=emebeder[e])}function u(e){var d,a,o,t,i,n,u,l,F,r,s,c,p;e=void 0!==e&&e,b?f.text((d=b,e=e,a=h(m("#ead-height").val()),o=h(m("#ead-width").val()),t=m("#ead-download").val(),i=m("#ead-provider").val(),n=m("#ead-text").val(),u=m("#ead-cache").is(":checked"),p=c=s=r=F=l="",v("height",e)&&(l=' height="'+a+'"'),v("width",e)&&(F=' width="'+o+'"'),v("download",e)&&(r=' download="'+t+'"'),v("provider",e)&&(s=' viewer="'+i+'"'),v("text",e)&&"none"!=t&&(c=' text="'+n+'"'),"google"==i?(m("#eadcachemain").show(),u&&(p=' cache="off"')):m("#eadcachemain").hide(),"browser"===i?m(".ead-browser-viewer-note").show():m(".ead-browser-viewer-note").hide(),'[embeddoc url="'+d+'"'+F+l+r+s+p+c+"]")):f.text("")}function l(e){m(".uploaded-doccument").removeClass("ead-link ead-upload ead-dropbox ead-drive ead-box"),m(".uploaded-doccument").addClass("ead-"+e)}function F(){tb_remove(),setTimeout(function(){m("body").removeClass("ead-popup-on")},800)}function r(e,d){var a=i.split(","),o=e.filename,e="."+(o="link"==d?e.url:o).split(".").pop();m.each(["built-in","browser","microsoft"],function(e,d){m("#new-provider option[value='"+d+"']").attr({disabled:!1,hidden:!1})}),m(".ead-browser-viewer-note").hide(),-1!==m.inArray(d,["link","upload"])&&(-1===m.inArray(e,a)?(m("#new-provider option[value='google']").attr("selected","selected"),m("#new-provider option[value='microsoft']").attr({disabled:!0,hidden:!0})):m("#new-provider option[value='microsoft']").attr("selected","selected"),".pdf"!=e&&m("#new-provider option[value='browser']").attr({disabled:!0,hidden:!0}),".pdf"!=e||"link"===d&&-1===o.indexOf(emebeder.site_url))&&m("#new-provider option[value='built-in']").attr({disabled:!0,hidden:!0})}function s(){"none"==m("#ead-download").val()?m("#ead-download-text").hide():m("#ead-download-text").show()}m("body").on("click",".awsm-embed",function(e){t.show(),d.val(""),m(".ead-options").fadeIn(),m(".addurl-box").hide(),m(".upload-success").hide(),m("#embed-message").hide(),m("#insert-doc").attr("disabled","disabled"),m("#new-provider").show(),m("#ead-pseudo").hide(),m("#new-provider  option[value='microsoft']").attr("disabled",!1),m("#ead-downloadc").show(),s(),e.preventDefault(),m("body").addClass("ead-popup-on"),tb_show("Embed Any Document","#TB_inline?inlineId=embed-popup-wrap&amp;width=1030&amp;modal=true",null),n(),m("#upload-doc").focus()}),m(".ead-usc").change(function(){u(m(this).attr("id")),s()}),m(".embedval").keyup(function(){u(m(this).attr("id"))}),m("#upload-doc").click(function(){a||(a=wp.media({title:"Embed Any Document",multiple:!1,library:{type:emebeder.validtypes},button:{text:emebeder.select_button}})).on("select",function(){var e,d=a.state().get("selection").first().toJSON();e="upload",b=(d=d).url,r(d,e),u();m("#insert-doc").removeAttr("disabled"),m("#ead-filename").html(d.filename),d.filesizeHumanReadable?m("#ead-filesize").html(d.filesizeHumanReadable):m("#ead-filesize").html("&nbsp;"),m(".upload-success").fadeIn(),t.hide(),l(e)}),a.open()}),m("#ead-add-url").click(function(){var e=d.val();""!==e?(e=>{m("#embed-message").hide(),/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)?(e=(e=(b=e).split("/").pop())||emebeder.from_url,e={url:b,filename:e},m("#insert-doc").removeAttr("disabled"),m("#ead-filename").html(emebeder.from_url),m("#ead-filesize").html("&nbsp;"),m(".upload-success").fadeIn(),t.hide(),l("link"),r(e,"link"),u()):(e=emebeder.invalidurl,m("#embed-message").fadeIn(),o.text(e))})(e):(d.addClass("urlerror"),u())}),m("#insert-doc").click(function(){{var e;b?(e=!0,(e=void 0!==wp.blocks&&void 0!==wp.blocks.getBlockType("embed-any-document/document")?!1:e)&&wp.media.editor.insert(f.text()),F()):showmsg(emebeder.nocontent)}}),m("#add-ead-document").on("click",function(e){e.preventDefault(),m(".addurl-box").fadeIn(),m(".ead-options").hide()}),m(".go-back").on("click",function(e){e.preventDefault(),m(".addurl-box").hide(),m(".ead-options").fadeIn()}),m("#embed-popup").on("click",".cancel-embed,.ead-close",function(e){e.preventDefault(),F()}),m(window).resize(function(){n()})});