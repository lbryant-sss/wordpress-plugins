function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(l=>{var c,f,a,b,y,v,k,r,u,F,i,m,I;function x(e,n,i){"addEventListener"in window?e.addEventListener(n,i,!1):"attachEvent"in window&&e.attachEvent("on"+n,i)}function L(e,n,i){"removeEventListener"in window?e.removeEventListener(n,i,!1):"detachEvent"in window&&e.detachEvent("on"+n,i)}function p(e){return y+"["+(n="Host page: "+(e=e),n=window.top!==window.self?window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+e:"Nested host page: "+e:n)+"]";var n}function t(e){return F[e]?F[e].log:f}function M(e,n){o("log",e,n,t(e))}function z(e,n){o("info",e,n,t(e))}function R(e,n){o("warn",e,n,!0)}function o(e,n,i,t){!0===t&&"object"===_typeof(window.console)&&console[e](p(n),i)}function j(e){function i(){n("Height"),n("Width"),P(function(){W(w),T(h),c("resizedCallback",w)},w,"init")}function n(e){var n=Number(F[h]["max"+e]),i=Number(F[h]["min"+e]),e=e.toLowerCase(),t=Number(w[e]);M(h,"Checking "+e+" is in range "+i+"-"+n),t<i&&(t=i,M(h,"Set "+e+" to min value")),n<t&&(t=n,M(h,"Set "+e+" to max value")),w[e]=""+t}function t(){var t=e.origin,o=F[h]&&F[h].checkOrigin;if(o&&""+t!="null"&&!(()=>{if(o.constructor!==Array)return e=F[h]&&F[h].remoteHost,M(h,"Checking connection is from: "+e),t===e;var e,n=0,i=!1;for(M(h,"Checking connection is from allowed list of origins: "+o);n<o.length;n++)if(o[n]===t){i=!0;break}return i})())throw new Error("Unexpected message received from: "+t+" for "+w.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return 1}function a(e){return g.substr(g.indexOf(":")+b+e)}function s(i,t){var e,n,o;e=function(){var e,n;H("Send Page Info","pageInfo:"+(e=document.body.getBoundingClientRect(),n=w.iframe.getBoundingClientRect(),JSON.stringify({iframeHeight:n.height,iframeWidth:n.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(n.top-e.top,10),offsetLeft:parseInt(n.left-e.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})),i,t)},n=32,I[o=t]||(I[o]=setTimeout(function(){I[o]=null,e()},n))}function o(e){e=e.getBoundingClientRect();return O(h),{x:Math.floor(Number(e.left)+Number(k.x)),y:Math.floor(Number(e.top)+Number(k.y))}}function d(e){var n=e?o(w.iframe):{x:0,y:0},i={x:Number(w.width)+n.x,y:Number(w.height)+n.y};M(h,"Reposition requested from iFrame (offset x:"+n.x+" y:"+n.y+")"),window.top!==window.self?window.parentIFrame?window.parentIFrame["scrollTo"+(e?"Offset":"")](i.x,i.y):R(h,"Unable to scroll to requested position, window.parentIFrame not found"):(k=i,r(),M(h,"--"))}function r(){!1!==c("scrollCallback",k)?T(h):S()}function l(e){var e=e.split("#")[1]||"",n=decodeURIComponent(e),n=document.getElementById(n)||document.getElementsByName(n)[0];n?(n=o(n),M(h,"Moving to in page link (#"+e+") at x: "+n.x+" y: "+n.y),k={x:n.x,y:n.y},r(),M(h,"--")):window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(e):M(h,"In page link #"+e+" not found and window.parentIFrame not found"):M(h,"In page link #"+e+" not found")}function c(e,n){return C(h,e,n)}function f(){switch(F[h]&&F[h].firstRun&&F[h]&&(F[h].firstRun=!1),w.type){case"close":F[h].closeRequestCallback?C(h,"closeRequestCallback",F[h].iframe):E(w.iframe);break;case"message":n=a(6),M(h,"MessageCallback passed: {iframe: "+w.iframe.id+", message: "+n+"}"),c("messageCallback",{iframe:w.iframe,message:JSON.parse(n)}),M(h,"--");break;case"scrollTo":d(!1);break;case"scrollToOffset":d(!0);break;case"pageInfo":s(F[h]&&F[h].iframe,h),r=h,e("Add ",x),F[r]&&(F[r].stopPageInfo=o);break;case"pageInfoStop":F[h]&&F[h].stopPageInfo&&(F[h].stopPageInfo(),delete F[h].stopPageInfo);break;case"inPageLink":l(a(9));break;case"reset":N(w);break;case"init":i(),c("initCallback",w.iframe);break;default:i()}function e(n,i){function t(){F[r]?s(F[r].iframe,r):o()}["scroll","resize"].forEach(function(e){M(r,n+e+" listener for sendPageInfo"),i(window,e,t)})}function o(){e("Remove ",L)}var r,n}var u,m,g=e.data,w={},h=null;if("[iFrameResizerChild]Ready"===g)for(var p in F)H("iFrame requested init",A(p),document.getElementById(p),p);else y===(""+g).substr(0,v)&&g.substr(v).split(":")[0]in F?(m=g.substr(v).split(":"),w={iframe:F[m[0]]&&F[m[0]].iframe,id:m[0],height:m[1],width:m[2],type:m[3]},h=w.id,F[h]&&(F[h].loaded=!0),(m=w.type in{true:1,false:1,undefined:1})&&M(h,"Ignoring init message from meta parent page"),!m&&(m=!0,F[u=h]||(m=!1,R(w.type+" No settings for "+u+". Message was: "+g)),m)&&(M(h,"Received: "+g),u=!0,null===w.iframe&&(R(h,"IFrame ("+w.id+") not found"),u=!1),u&&t()&&f())):z(h,"Ignored: "+g)}function C(e,n,i){var t=null,o=null;if(F[e]){if("function"!=typeof(t=F[e][n]))throw new TypeError(n+" on iFrame["+e+"] is not a function");o=t(i)}return o}function g(e){e=e.id;delete F[e]}function E(e){var n=e.id;M(n,"Removing iFrame: "+n);try{e.parentNode&&e.parentNode.removeChild(e)}catch(e){}C(n,"closedCallback",n),M(n,"--"),g(e)}function O(e){null===k&&M(e,"Get page position: "+(k={x:window.pageXOffset!==l?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==l?window.pageYOffset:document.documentElement.scrollTop}).x+","+k.y)}function T(e){null!==k&&(window.scrollTo(k.x,k.y),M(e,"Set page position: "+k.x+","+k.y),S())}function S(){k=null}function N(e){M(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),O(e.id),P(function(){W(e),H("reset","reset",e.iframe,e.id)},e,"reset")}function W(o){function i(e){var n;function i(){for(var e in F)(n=>{function e(e){return"0px"===(F[n]&&F[n].iframe.style[e])}F[n]&&null!==F[n].iframe.offsetParent&&(e("height")||e("width"))&&H("Visibility change","resize",F[n].iframe,n)})(e)}function t(e){M("window","Mutation observed: "+e[0].target+" "+e[0].type),d(i,16)}!a&&"0"===o[e]&&(a=!0,M(r,"Hidden iFrame detected, creating visibility listener"),e=window.MutationObserver||window.WebKitMutationObserver)&&(n=document.querySelector("body"),new e(t).observe(n,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}))}function e(e){var n;n=e,o.id?(o.iframe.style[n]=o[n]+"px",M(o.id,"IFrame ("+r+") "+n+" set to "+o[n]+"px")):M("undefined","messageData id not set"),i(e)}var r=o.iframe.id;F[r]&&(F[r].sizeHeight&&e("height"),F[r].sizeWidth)&&e("width")}function P(e,n,i){i!==n.type&&r?(M(n.id,"Requesting animation frame"),r(e)):e()}function H(n,i,t,o,e){function r(){var e;t&&"contentWindow"in t&&null!==t.contentWindow?(e=F[o]&&F[o].targetOrigin,M(o,"["+n+"] Sending msg to iframe["+o+"] ("+i+") targetOrigin: "+e),t.contentWindow.postMessage(y+i,e)):R(o,"["+n+"] IFrame("+o+") not found")}function a(){e&&F[o]&&F[o].warningTimeout&&(F[o].msgTimeout=setTimeout(function(){!F[o]||F[o].loaded||s||(s=!0,R(o,"IFrame has not responded within "+F[o].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))},F[o].warningTimeout))}var s=!1;o=o||t.id,F[o]&&(r(),a())}function A(e){return e+":"+F[e].bodyMarginV1+":"+F[e].sizeWidth+":"+F[e].log+":"+F[e].interval+":"+F[e].enablePublicMethods+":"+F[e].autoResize+":"+F[e].bodyMargin+":"+F[e].heightCalculationMethod+":"+F[e].bodyBackground+":"+F[e].bodyPadding+":"+F[e].tolerance+":"+F[e].inPageLinks+":"+F[e].resizeFrom+":"+F[e].widthCalculationMethod}function s(t,e){function n(i){x(t,"load",function(){var e,n;H("iFrame.onload",i,t,l,!0),e=F[a]&&F[a].firstRun,n=F[a]&&F[a].heightCalculationMethod in u,!e&&n&&N({iframe:t,height:0,width:0,type:"init"})}),H("init",i,t,l,!0)}function i(e){if(e=e||{},F[a]={firstRun:!0,iframe:t,remoteHost:t.src.split("/").slice(0,3).join("/")},"object"!==_typeof(e))throw new TypeError("Options is not an object");var n,i=e;for(n in m)m.hasOwnProperty(n)&&(F[a][n]=(i.hasOwnProperty(n)?i:m)[n]);F[a]&&(F[a].targetOrigin=!0!==F[a].checkOrigin||""===(e=F[a].remoteHost)||"file://"===e?"*":e)}o=t.id,""===o&&(t.id=(r=e&&e.id||m.id+c++,null!==document.getElementById(r)&&(r+=c++),o=r),f=(e||{}).log,M(o,"Added missing iframe ID: "+o+" ("+t.src+")"));var o,r,a=o;if(a in F&&"iFrameResizer"in t)R(a,"Ignored iFrame, already setup.");else{switch(i(e),M(a,"IFrame scrolling "+(F[a]&&F[a].scrolling?"enabled":"disabled")+" for "+a),t.style.overflow=!1===(F[a]&&F[a].scrolling)?"hidden":"auto",F[a]&&F[a].scrolling){case"omit":break;case!0:t.scrolling="yes";break;case!1:t.scrolling="no";break;default:t.scrolling=F[a]?F[a].scrolling:"no"}d("Height"),d("Width"),s("maxHeight"),s("minHeight"),s("maxWidth"),s("minWidth"),"number"!=typeof(F[a]&&F[a].bodyMargin)&&"0"!==(F[a]&&F[a].bodyMargin)||(F[a].bodyMarginV1=F[a].bodyMargin,F[a].bodyMargin=F[a].bodyMargin+"px"),n(A(a)),Function.prototype.bind&&F[a]&&(F[a].iframe.iFrameResizer={close:E.bind(null,F[a].iframe),removeListeners:g.bind(null,F[a].iframe),resize:H.bind(null,"Window resize","resize",F[a].iframe),moveToAnchor:function(e){H("Move to anchor","moveToAnchor:"+e,F[a].iframe,a)},sendMessage:function(e){H("Send Message","message:"+(e=JSON.stringify(e)),F[a].iframe,a)}})}function s(e){1/0!==F[a][e]&&0!==F[a][e]&&(t.style[e]=F[a][e]+"px",M(a,"Set "+e+" = "+F[a][e]+"px"))}function d(e){if(F[a]["min"+e]>F[a]["max"+e])throw new Error("Value for min"+e+" can not be greater than max"+e)}}function d(e,n){null===i&&(i=setTimeout(function(){i=null,e()},n))}function w(e){M("window","Trigger event: "+e),d(function(){n("Window "+e,"resize")},16)}function h(){"hidden"!==document.visibilityState&&(M("document","Trigger event: Visiblity change"),d(function(){n("Tab Visable","resize")},16))}function n(e,n){for(var i in F)F[t=i]&&"parent"===F[t].resizeFrom&&F[t].autoResize&&!F[t].firstRun&&H(e,n,document.getElementById(i),i);var t}function e(){function t(e,n){if(n){if(!n.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==n.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+n.tagName+">");s(n,e),o.push(n)}}for(var o,e=["moz","webkit","o","ms"],n=0;n<e.length&&!r;n+=1)r=window[e[n]+"RequestAnimationFrame"];return r||M("setup","RequestAnimationFrame not supported"),x(window,"message",j),x(window,"resize",function(){w("resize")}),x(document,"visibilitychange",h),x(document,"-webkit-visibilitychange",h),x(window,"focusin",function(){w("focus")}),x(window,"focus",function(){w("focus")}),function(e,n){var i;switch(o=[],(i=e)&&i.enablePublicMethods&&R("enablePublicMethods option has been removed, public methods are now always available in the iFrame"),_typeof(n)){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(n||"iframe"),t.bind(l,e));break;case"object":t(e,n);break;default:throw new TypeError("Unexpected data type ("+_typeof(n)+")")}return o}}function q(e){e.fn?e.fn.iFrameResize||(e.fn.iFrameResize=function(i){return this.filter("iframe").each(function(e,n){s(n,i)}).end()}):z("","Unable to bind to jQuery, it is not fully loaded.")}"undefined"!=typeof window&&(c=0,a=f=!1,b="message".length,v=(y="[iFrameSizer]").length,k=null,r=window.requestAnimationFrame,m={autoResize:!(i=null),bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!"Host Page",enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!(F={}),maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!(u={max:1,scroll:1,bodyScroll:1,documentElementScroll:1}),sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){R("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}},I={},window.jQuery&&q(window.jQuery),"function"==typeof define&&define.amd?define([],e):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=e():window.iFrameResize=window.iFrameResize||e())})();