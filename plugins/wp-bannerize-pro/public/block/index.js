(()=>{"use strict";var e,n={129:()=>{const e=window.React,n=window.wp.blocks,t=JSON.parse('{"UU":"wp-bannerize/block"}'),r=window.wp.i18n,l=window.wp.blockEditor,a=window.wp.components,i=window.wp.coreData;function c({record:n,isSelected:t}){const[l,i]=(0,e.useState)(!1),{title:c,meta:o,campaigns:s,id:d}=n,{wp_bannerize_banner_width:p,wp_bannerize_banner_height:m,wp_bannerize_banner_url:b,wp_bannerize_banner_type:u}=o;if("local"===u)return console.log("!!!!! record",n),(0,e.createElement)("div",{className:"wp-bannerize-edit-container"},t&&(0,e.createElement)("div",{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),className:"wp-bannerize-edit-banner-info"},l&&(0,e.createElement)(a.Popover,{placement:"top",noArrow:!1},(0,e.createElement)("div",{className:"wp-bannerize-popover-info"},c.raw," (ID: ",d,") ",(0,r.__)("Campaigns","wp-bannerize"),": ",s))),(0,e.createElement)("img",{src:b,alt:c.rendered,width:p,height:m}))}function o({selectedIds:n,onChange:t}){const l=(0,i.useEntityRecords)("postType","wp_bannerize"),[c,o]=(0,e.useState)([]),[s,d]=(0,e.useState)([]);return(0,e.useEffect)((()=>{if(l&&l?.records?.length>0&&0===c.length){const{records:e}=l,n=e.map((e=>e.title.rendered));o(n)}n&&l&&l.records&&d(l.records.filter((e=>n.includes(e.id))).map((e=>e.title.rendered)))}),[l,n]),(0,e.createElement)(a.FormTokenField,{__experimentalShowHowTo:!1,placeholder:(0,r.__)("Type to search for banners","wp-bannerize"),suggestions:c,label:(0,r.__)("Banners","wp-bannerize"),onChange:e=>{d(e);const n=e.map((e=>l.records.find((n=>n.title.rendered===e)).id));t(n)},value:s})}function s({selectedIds:n,onChange:t}){const l=(0,i.useEntityRecords)("taxonomy","wp_bannerize_tax"),[c,o]=(0,e.useState)([]),[s,d]=(0,e.useState)([]);return(0,e.useEffect)((()=>{if(l&&l.records.length>0&&0===c.length){const{records:e}=l,n=e.map((e=>e.name));o(n)}n&&d(l.records.filter((e=>n.includes(e.id))).map((e=>e.name)))}),[l,n]),(0,e.createElement)(a.FormTokenField,{__experimentalShowHowTo:!1,placeholder:(0,r.__)("Type to search for campaigns","wp-bannerize"),suggestions:c,label:(0,r.__)("Campaigns","wp-bannerize"),onChange:e=>{d(e);const n=e.map((e=>l.records.find((n=>n.name===e)).id));t(n)},value:s})}const d=(0,e.createElement)("svg",{width:"100%",height:"100%",viewBox:"0 0 62 62",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2}},(0,e.createElement)("g",null,(0,e.createElement)("g",null,(0,e.createElement)("circle",{cx:"30.72",cy:"30.72",r:"30.72",style:{fill:"#5bb6dc"}}),(0,e.createElement)("clipPath",{id:"clip1"},(0,e.createElement)("circle",{cx:"30.72",cy:"30.72",r:"30.72"})),(0,e.createElement)("g",{clipPath:"url(#clip1)"},(0,e.createElement)("rect",{x:"10.8",y:"35.03",width:"42.24",height:"27.85",style:{fillOpacity:.22}}))),(0,e.createElement)("g",null,(0,e.createElement)("g",null,(0,e.createElement)("rect",{x:"10.8",y:"15.12",width:"32.64",height:"19.91",style:{fill:"#fff"}}),(0,e.createElement)("path",{d:"M41.155,30.461l-3.264,0.102c-14.454,-0.298 -6.508,-7.659 -25.133,-7.609l0,10.118l28.397,0l0,-2.611Z",style:{fill:"#5bb6dc"}}),(0,e.createElement)("circle",{cx:"37.565",cy:"20.995",r:"3.59",style:{fill:"#5bb6dc"}})),(0,e.createElement)("g",null,(0,e.createElement)("rect",{x:"15.6",y:"19.92",width:"32.64",height:"19.91",style:{fill:"#fff"}}),(0,e.createElement)("path",{d:"M45.955,35.261l-3.264,0.102c-14.454,-0.298 -6.508,-7.659 -25.133,-7.609l0,10.118l28.397,0l0,-2.611Z",style:{fill:"#5bb6dc"}}),(0,e.createElement)("circle",{cx:"42.365",cy:"25.795",r:"3.59",style:{fill:"#5bb6dc"}})),(0,e.createElement)("g",null,(0,e.createElement)("rect",{x:"20.4",y:"24.72",width:"32.64",height:"19.91",style:{fill:"#fff"}}),(0,e.createElement)("path",{d:"M50.755,40.061l-3.264,0.102c-14.454,-0.298 -6.508,-7.659 -25.133,-7.609l0,10.118l28.397,0l0,-2.611Z",style:{fill:"#5bb6dc"}}),(0,e.createElement)("circle",{cx:"47.165",cy:"30.595",r:"3.59",style:{fill:"#5bb6dc"}})))));(0,n.registerBlockType)(t.UU,{icon:d,edit:function({isSelected:n,className:t,attributes:d,setAttributes:p}){const m=(0,l.useBlockProps)(),{orderby:b,numbers:u,campaigns:w,banners:h}=d,f=(0,i.useEntityRecords)("postType","wp_bannerize",{order:"asc",tax_relation:"AND",wp_bannerize_tax:w,...h.length&&{include:h},orderby:b,per_page:u}),g=(0,i.useEntityRecords)("taxonomy","wp_bannerize_tax"),{isResolving:_,records:E}=f,{isResolving:y}=g;return console.log("!!!!!!",g?.records),!_&&!y&&f&&E&&g?.records?(0,e.createElement)("div",{...m},(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(a.PanelBody,{title:(0,r.__)("Filters","wp-bannerize")},(0,e.createElement)(o,{selectedIds:h,onChange:e=>p({banners:e})}),(0,e.createElement)(s,{selectedIds:w,onChange:e=>p({campaigns:e})}),(0,e.createElement)(a.SelectControl,{label:(0,r.__)("Order by","wp-bannerize"),value:b,onChange:e=>p({orderby:e}),options:[{label:"Menu Order",value:"menu_order"},{label:"Random",value:"rand"}]}),(0,e.createElement)(a.RangeControl,{help:(0,r.__)("Set the numbers of banners to show (-1 for all)","wp-bannerize"),initialPosition:u,label:(0,r.__)("Numbers","wp-bannerize"),onChange:e=>p({numbers:e}),max:50,min:-1}))),g&&f&&E&&E.length>0&&E.map((t=>(t.campaigns=t.wp_bannerize_tax.map((e=>{const n=g?.records.find((n=>n.id===e));return console.log("!!!!! campaign",n),n?n.name:""})).join(", "),(0,e.createElement)(c,{record:t,isSelected:n}))))):(0,e.createElement)("div",{...m},(0,e.createElement)(a.Spinner,null))},save:function(n){const t=l.useBlockProps.save({className:`block-toolbar-ab967f-align-${n.attributes.alignment}`});return(0,e.createElement)(l.RichText.Content,{...t,tagName:"p",value:n.attributes.content})}})}},t={};function r(e){var l=t[e];if(void 0!==l)return l.exports;var a=t[e]={exports:{}};return n[e](a,a.exports,r),a.exports}r.m=n,e=[],r.O=(n,t,l,a)=>{if(!t){var i=1/0;for(d=0;d<e.length;d++){t=e[d][0],l=e[d][1],a=e[d][2];for(var c=!0,o=0;o<t.length;o++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](t[o])))?t.splice(o--,1):(c=!1,a<i&&(i=a));if(c){e.splice(d--,1);var s=l();void 0!==s&&(n=s)}}return n}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[t,l,a]},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={57:0,350:0};r.O.j=n=>0===e[n];var n=(n,t)=>{var l,a,i=t[0],c=t[1],o=t[2],s=0;if(i.some((n=>0!==e[n]))){for(l in c)r.o(c,l)&&(r.m[l]=c[l]);if(o)var d=o(r)}for(n&&n(t);s<i.length;s++)a=i[s],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},t=self.webpackChunk_wpbones_wp_bannerize_pro=self.webpackChunk_wpbones_wp_bannerize_pro||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var l=r.O(void 0,[350],(()=>r(129)));l=r.O(l)})();