var sowb=window.sowb||{};jQuery((function(e){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches;e.fn.fixContainerHeight=function(){const t=e(this),i=t.find(".sow-carousel-item").sort((function(t,i){return e(i).outerHeight()-e(t).outerHeight()}))[0],s=e(i),o=parseFloat(s.css("margin-bottom"));t.css("height",s.outerHeight()+o)},e(".sow-carousel-wrapper").on("init",(function(t,i){const s=e(this);s.css("opacity",1);const o=s.data("carousel_settings");if(o.dynamic_navigation||"cards"!==o.theme||s.hasClass("fixed-navigation"))return;const a=s.find(".sow-carousel-items");s.addClass("fixed-navigation"),a.fixContainerHeight()})),e.fn.navigateToSlide=function(t){const i=e(this);null!==t&&("string"==typeof t?i.slick(t):i.slick("slickGoTo",t-1)),i.adaptiveHeight()},e.fn.adaptiveHeight=function(){const t=e(this);if(!t.data("adaptive_height"))return;const i=t.find(".slick-active");i.css("height","fit-content");let s=0;i.each((function(){const t=e(this).outerHeight();t>s&&(s=t)}));const o=parseFloat(i.first().css("margin-bottom"));t.find(".slick-list").animate({height:s+o},t.data("adaptive_height")),i.css("height",s)},sowb.setupCarousel=function(){e.fn.setSlideTo=function(t){$items=e(this);const i=$item.slick("slickGetOption","slidesToShow"),s=$item.slick("slickGetOption","slidesToScroll");$items.slick("slickSetOption","slidesToShow",1),$items.slick("slickSetOption","slidesToScroll",1),$items.navigateToSlide(t),$items.slick("slickSetOption","slidesToShow",i),$items.slick("slickSetOption","slidesToScroll",s)},e(".sow-carousel-wrapper").each((function(){var i=e(this),s=i.find(".sow-carousel-items"),o=i.data("responsive"),a=i.data("carousel_settings");t&&(a.animation_speed=0),s.data("adaptive_height",a.adaptive_height),s.data("animation_speed",a.animation_speed);const l=e("body").hasClass("block-editor-page"),n="continuous"===a.autoplay;if(s.not(".slick-initialized").slick({arrows:!1,dots:a.dots,appendDots:a.appendDots?i.find(".sow-carousel-nav"):i,rows:0,rtl:"rtl"==i.data("dir"),touchThreshold:20,infinite:a.loop&&(!i.data("ajax-url")||i.data("ajax-url")&&n),variableWidth:i.data("variable_width"),accessibility:!1,cssEase:a.animation,speed:a.animation_speed,slidesToScroll:o.desktop_slides_to_scroll,slidesToShow:void 0===o.desktop_slides_to_show?o.desktop_slides_to_scroll:o.desktop_slides_to_show,responsive:[{breakpoint:o.tablet_portrait_breakpoint,settings:{slidesToScroll:o.tablet_portrait_slides_to_scroll,slidesToShow:void 0===o.tablet_portrait_slides_to_show?o.tablet_portrait_slides_to_scroll:o.tablet_portrait_slides_to_show}},{breakpoint:o.mobile_breakpoint,settings:{slidesToScroll:o.mobile_slides_to_scroll,slidesToShow:void 0===o.mobile_slides_to_show?o.mobile_slides_to_scroll:o.mobile_slides_to_show}}],autoplay:!l&&n,autoplaySpeed:0}),a.item_overflow&&(s.css("width",""),s.css("opacity","")),s.on("swipe",(function(e,t,s){i.parent().parent().find(".sow-carousel-"+("left"==s?"next":"prev")).trigger("touchend")})),a.autoplay&&"off"!==a.autoplay){var d=!1;if(l||n)return;setInterval((function(){d||r(!0,!1)}),a.autoplaySpeed),a.pauseOnHover&&(s.on("mouseenter.slick",(function(){d=!0})),s.on("mouseleave.slick",(function(){d=!1})))}s.adaptiveHeight();var r=function(t,s){const o=i.find(".sow-carousel-items"),l=i.parent().parent(),n=o.slick("slickCurrentSlide"),d=o.find(".sow-carousel-item").length,r=d>=i.data("item_count"),c=Math.floor(o.outerWidth()/o.find(".sow-carousel-item").outerWidth(!0));let u=o.slick("slickGetOption","slidesToScroll"),p=d-c,h=i.data("fetching"),_=i.data("preloaded"),w=!1;if(r||_||!(n+c>=d-1||n+2*u>p)||(w=!0),!i.data("carousel_settings").loop){const e="ltr"==i.data("dir")?"previous":"next";0==n?l.find(".sow-carousel-"+e).removeClass("sow-carousel-disabled").removeAttr("aria-disabled"):t||n-u!=0||l.find(".sow-carousel-"+e).addClass("sow-carousel-disabled").attr("aria-disabled","true")}if(t){if(h&&!_)return;r&&n>=p?i.data("carousel_settings").loop&&o.navigateToSlide(0):"post"==i.data("widget")&&"undefined"==i.data("carousel_settings").theme&&u>=c?(o.slick("slickSetOption","slidesToShow",c),o.slick("slickSetOption","slidesToScroll",c),o.navigateToSlide("slickNext")):n+u>p?(o.setSlideTo(p),o.navigateToSlide(null)):n%u!=0?(o.slick("slickSetOption","slidesToScroll",u+1),o.navigateToSlide("slickNext"),o.slick("slickSetOption","slidesToScroll",u)):o.navigateToSlide("slickNext"),n!=p||i.data("carousel_settings").loop||l.find(".sow-carousel-next").addClass("sow-carousel-disabled").attr("aria-disabled","true")}else{let e=!1;if("post"===i.data("widget")?i.data("carousel_settings").loop&&0===n?(p=r?d:p,w=!r,o.navigateToSlide(p)):n<=u?o.navigateToSlide(0):e=!0:e=!0,e){o.navigateToSlide("slickPrev");const e=l.find(".sow-carousel-next");e.hasClass("sow-carousel-disabled")&&e.removeClass("sow-carousel-disabled").removeAttr("aria-disabled")}}a.dots&&"post"==i.data("widget")&&(i.find("li.slick-active").removeClass("slick-active"),i.find(".slick-dots li").eq(Math.ceil(i.find(".sow-carousel-items").slick("slickCurrentSlide")/u)).addClass("slick-active")),w&&e(sowb).trigger("carousel_load_new_items",[i,o,s])};if(!a.loop&&0==s.slick("slickCurrentSlide")){const e="ltr"==i.data("dir")?"previous":"next";i.parent().parent().find(".sow-carousel-"+e).addClass("sow-carousel-disabled").attr("aria-disabled","true")}if(i.parent().parent().find(".sow-carousel-previous, .sow-carousel-next").on("click touchend",(function(t,i){t.preventDefault(),e(this).hasClass("sow-carousel-disabled")||r(e(this).hasClass("sow-carousel-next"),i)})),a.dots&&(i.data("variable_width")||i.data("carousel_settings").theme)){i.find(".slick-dots li").off("click.slick");var c=function(){s=i.find(".sow-carousel-items");var t=e(this).index(),o=s.slick("slickGetOption","slidesToScroll"),a=s.find(".sow-carousel-item").length,l=Math.ceil(s.outerWidth()/s.find(".sow-carousel-item").outerWidth(!0)),n=a-l;(t+l>=a?(s.navigateToSlide(n),$dots=e(this).parent(),$dots.find(".slick-active").removeClass("slick-active"),$dots.children().eq(t).addClass("slick-active")):("post"==i.data("widget")&&(t=Math.ceil(t+1*o)),s.navigateToSlide(t)),"post"==i.data("widget"))&&(a>=i.data("item_count")||(s.slick("slickCurrentSlide")+l>=a-1||s.slick("slickCurrentSlide")+o>n)&&e(sowb).trigger("carousel_load_new_items",[i,s,!1]))};i.find(".slick-dots li").on("click touchend",c),e(sowb).on("carousel_posts_added",(function(){i.find(".slick-dots li").on("click touchend",c)}))}})),e(sowb).trigger("carousel_setup"),e(document).on("keydown",".sow-carousel-navigation a",(function(t){13!=t.keyCode&&32!=t.keyCode||(t.preventDefault(),e(this).trigger("click"))})),e(document).on("keyup",".sow-carousel-item",(function(t){if(13==t.keyCode&&e(this).find("h3 a")[0].click(),37==t.keyCode||39==t.keyCode){var i=e(this).parents(".sow-carousel-wrapper"),s=i.find(".sow-carousel-items"),o=s.find(".sow-carousel-item").length,a=e(this).data("slick-index"),l=o-(o===i.data("item_count")?0:1);if(37==t.keyCode)--a<0&&(a=l);else if(39==t.keyCode&&++a>=l){if(i.data("fetching"))return;i.parent().find(".sow-carousel-next").trigger("click",!0)}s.navigateToSlide(a),i.find(".sow-carousel-item").prop("tabindex",-1),i.find('.sow-carousel-item[data-slick-index="'+a+'"]').trigger("focus").prop("tabindex",0)}}));const i=function(){const t=e(this),i=t.find(".sow-carousel-items.slick-initialized");if(!i.length)return;const s=t.data("responsive"),o=t.data("carousel_settings");[{query:`(min-width: ${s.tablet_landscape_breakpoint}px)`,show:s.desktop_slides_to_show,scroll:s.desktop_slides_to_scroll},{query:`(min-width: ${s.tablet_portrait_breakpoint}px) and (max-width: ${s.tablet_landscape_breakpoint}px) and (orientation: landscape)`,show:s.tablet_landscape_slides_to_show,scroll:s.tablet_landscape_slides_to_scroll},{query:`(min-width: ${s.mobile_breakpoint}px) and (max-width: ${s.tablet_portrait_breakpoint}px)`,show:s.tablet_portrait_slides_to_show,scroll:s.tablet_portrait_slides_to_scroll},{query:`(max-width: ${s.mobile_breakpoint}px)`,show:s.mobile_slides_to_show,scroll:s.mobile_slides_to_scroll}].some(e=>!!window.matchMedia(e.query).matches&&(i.slick("slickSetOption","slidesToShow",e.show),i.slick("slickSetOption","slidesToScroll",e.scroll),!0)),i.data("adaptive_height")&&i.one("breakpoint",()=>{i.adaptiveHeight(),"cards"!==o.theme||o.dynamic_navigation||i.fixContainerHeight()})};let s;e(window).on("resize load",()=>{clearTimeout(s),s=setTimeout(()=>{e(".sow-carousel-wrapper").each(i)},100),e(".sow-carousel-item:first-of-type").prop("tabindex",0)}).trigger("resize")},sowb.setupCarousel(),e(sowb).on("setup_widgets",sowb.setupCarousel)})),window.sowb=sowb;