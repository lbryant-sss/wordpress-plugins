var sowb=window.sowb||{};jQuery((function(e){const i=window.matchMedia("(prefers-reduced-motion: reduce)").matches;e.fn.fixContainerHeight=function(){const i=e(this),s=i.find(".sow-carousel-item").sort((function(i,s){return e(s).outerHeight()-e(i).outerHeight()}))[0],t=e(s);i.css("height",t.outerHeight()+parseFloat(t.css("margin-bottom")))},e(".sow-carousel-wrapper").on("init",(function(i,s){const t=e(this);t.css("opacity",1);const o=t.data("carousel_settings");if(o.dynamic_navigation||"cards"!==o.theme||t.hasClass("fixed-navigation"))return;const a=t.find(".sow-carousel-items");t.addClass("fixed-navigation"),a.fixContainerHeight(),e(window).on("resize",()=>{a.fixContainerHeight()})})),sowb.setupCarousel=function(){e.fn.setSlideTo=function(i){$items=e(this);const s=$item.slick("slickGetOption","slidesToShow"),t=$item.slick("slickGetOption","slidesToScroll");$items.slick("slickSetOption","slidesToShow",1),$items.slick("slickSetOption","slidesToScroll",1),$items.navigateToSlide(i),$items.slick("slickSetOption","slidesToShow",s),$items.slick("slickSetOption","slidesToScroll",t)},e(".sow-carousel-wrapper").each((function(){var s=e(this),t=s.find(".sow-carousel-items"),o=s.data("responsive"),a=s.data("carousel_settings");i&&(a.animation_speed=0),t.data("adaptive_height",a.adaptive_height),t.data("animation_speed",a.animation_speed);const l=e("body").hasClass("block-editor-page"),n="continuous"===a.autoplay;if(t.not(".slick-initialized").slick({arrows:!1,dots:a.dots,appendDots:a.appendDots?s.find(".sow-carousel-nav"):s,rows:0,rtl:"rtl"==s.data("dir"),touchThreshold:20,infinite:a.loop&&(!s.data("ajax-url")||s.data("ajax-url")&&n),variableWidth:s.data("variable_width"),accessibility:!1,cssEase:a.animation,speed:a.animation_speed,slidesToScroll:o.desktop_slides_to_scroll,slidesToShow:void 0===o.desktop_slides_to_show?o.desktop_slides_to_scroll:o.desktop_slides_to_show,responsive:[{breakpoint:o.tablet_portrait_breakpoint,settings:{slidesToScroll:o.tablet_portrait_slides_to_scroll,slidesToShow:void 0===o.tablet_portrait_slides_to_show?o.tablet_portrait_slides_to_scroll:o.tablet_portrait_slides_to_show}},{breakpoint:o.mobile_breakpoint,settings:{slidesToScroll:o.mobile_slides_to_scroll,slidesToShow:void 0===o.mobile_slides_to_show?o.mobile_slides_to_scroll:o.mobile_slides_to_show}}],autoplay:!l&&n,autoplaySpeed:0}),a.item_overflow&&(t.css("width",""),t.css("opacity","")),t.on("swipe",(function(e,i,t){s.parent().parent().find(".sow-carousel-"+("left"==t?"next":"prev")).trigger("touchend")})),a.autoplay&&"off"!==a.autoplay){var d=!1;if(l||n)return;setInterval((function(){d||r(!0,!1)}),a.autoplaySpeed),a.pauseOnHover&&(t.on("mouseenter.slick",(function(){d=!0})),t.on("mouseleave.slick",(function(){d=!1})))}e.fn.navigateToSlide=function(i){const s=e(this);null!==i&&("string"==typeof i?s.slick(i):s.slick("slickGoTo",i-1)),c(s)};const c=function(i){if(!i.data("adaptive_height"))return;const s=i.find(".slick-active");s.css("height","fit-content");let t=0;s.each((function(){const i=e(this).outerHeight();i>t&&(t=i)}));const o=parseFloat(s.first().css("margin-bottom"));i.find(".slick-list").animate({height:t+o},i.data("adaptive_height")),s.css("height",t)};t.on("init",()=>{c(t)}).trigger("init");var r=function(i,t){const o=s.find(".sow-carousel-items"),l=s.parent().parent(),n=o.slick("slickCurrentSlide"),d=o.find(".sow-carousel-item").length,c=d>=s.data("item_count"),r=Math.floor(o.outerWidth()/o.find(".sow-carousel-item").outerWidth(!0));let u=o.slick("slickGetOption","slidesToScroll"),p=d-r,w=s.data("fetching"),f=s.data("preloaded"),h=!1;if(c||f||!(n+r>=d-1||n+2*u>p)||(h=!0),!s.data("carousel_settings").loop){const e="ltr"==s.data("dir")?"previous":"next";0==n?l.find(".sow-carousel-"+e).removeClass("sow-carousel-disabled").removeAttr("aria-disabled"):i||n-u!=0||l.find(".sow-carousel-"+e).addClass("sow-carousel-disabled").attr("aria-disabled","true")}if(i){if(w&&!f)return;c&&n>=p?s.data("carousel_settings").loop&&o.navigateToSlide(0):"post"==s.data("widget")&&"undefined"==s.data("carousel_settings").theme&&u>=r?(o.slick("slickSetOption","slidesToShow",r),o.slick("slickSetOption","slidesToScroll",r),o.navigateToSlide("slickNext")):n+u>p?(o.setSlideTo(p),o.navigateToSlide(null)):n%u!=0?(o.slick("slickSetOption","slidesToScroll",u+1),o.navigateToSlide("slickNext"),o.slick("slickSetOption","slidesToScroll",u)):o.navigateToSlide("slickNext"),n!=p||s.data("carousel_settings").loop||l.find(".sow-carousel-next").addClass("sow-carousel-disabled").attr("aria-disabled","true")}else{let e=!1;if("post"===s.data("widget")?s.data("carousel_settings").loop&&0===n?(p=c?d:p,h=!c,o.navigateToSlide(p)):n<=u?o.navigateToSlide(0):e=!0:e=!0,e){o.navigateToSlide("slickPrev");const e=l.find(".sow-carousel-next");e.hasClass("sow-carousel-disabled")&&e.removeClass("sow-carousel-disabled").removeAttr("aria-disabled")}}a.dots&&"post"==s.data("widget")&&(s.find("li.slick-active").removeClass("slick-active"),s.find(".slick-dots li").eq(Math.ceil(s.find(".sow-carousel-items").slick("slickCurrentSlide")/u)).addClass("slick-active")),h&&e(sowb).trigger("carousel_load_new_items",[s,o,t])};if(!a.loop&&0==t.slick("slickCurrentSlide")){const e="ltr"==s.data("dir")?"previous":"next";s.parent().parent().find(".sow-carousel-"+e).addClass("sow-carousel-disabled").attr("aria-disabled","true")}if(s.parent().parent().find(".sow-carousel-previous, .sow-carousel-next").on("click touchend",(function(i,s){i.preventDefault(),e(this).hasClass("sow-carousel-disabled")||r(e(this).hasClass("sow-carousel-next"),s)})),a.dots&&(s.data("variable_width")||s.data("carousel_settings").theme)){s.find(".slick-dots li").off("click.slick");var u=function(){t=s.find(".sow-carousel-items");var i=e(this).index(),o=t.slick("slickGetOption","slidesToScroll"),a=t.find(".sow-carousel-item").length,l=Math.ceil(t.outerWidth()/t.find(".sow-carousel-item").outerWidth(!0)),n=a-l;(i+l>=a?(t.navigateToSlide(n),$dots=e(this).parent(),$dots.find(".slick-active").removeClass("slick-active"),$dots.children().eq(i).addClass("slick-active")):("post"==s.data("widget")&&(i=Math.ceil(e(this).index()*o)),t.navigateToSlide(i)),"post"==s.data("widget"))&&(a>=s.data("item_count")||(t.slick("slickCurrentSlide")+l>=a-1||t.slick("slickCurrentSlide")+o>n)&&e(sowb).trigger("carousel_load_new_items",[s,t,!1]))};s.find(".slick-dots li").on("click touchend",u),e(sowb).on("carousel_posts_added",(function(){s.find(".slick-dots li").on("click touchend",u)}))}})),e(sowb).trigger("carousel_setup"),e(document).on("keydown",".sow-carousel-navigation a",(function(i){13!=i.keyCode&&32!=i.keyCode||(i.preventDefault(),e(this).trigger("click"))})),e(document).on("keyup",".sow-carousel-item",(function(i){if(13==i.keyCode&&e(this).find("h3 a")[0].click(),37==i.keyCode||39==i.keyCode){var s=e(this).parents(".sow-carousel-wrapper"),t=s.find(".sow-carousel-items"),o=t.find(".sow-carousel-item").length,a=e(this).data("slick-index"),l=o-(o===s.data("item_count")?0:1);if(37==i.keyCode)--a<0&&(a=l);else if(39==i.keyCode&&++a>=l){if(s.data("fetching"))return;s.parent().find(".sow-carousel-next").trigger("click",!0)}t.navigateToSlide(a),s.find(".sow-carousel-item").prop("tabindex",-1),s.find('.sow-carousel-item[data-slick-index="'+a+'"]').trigger("focus").prop("tabindex",0)}}));var s=function(){e(".sow-carousel-wrapper").each((function(){var i=e(this),s=i.find(".sow-carousel-items.slick-initialized"),t=i.data("responsive");window.matchMedia("(min-width: "+t.tablet_portrait_breakpoint+"px) and (max-width: "+t.tablet_landscape_breakpoint+"px) and (orientation: landscape)").matches&&(s.slick("slickSetOption","slidesToShow",t.tablet_landscape_slides_to_show),s.slick("slickSetOption","slidesToScroll",t.tablet_landscape_slides_to_scroll))})),e(".sow-carousel-item:first-of-type").prop("tabindex",0)};s(),e(window).on("resize load",s)},sowb.setupCarousel(),e(sowb).on("setup_widgets",sowb.setupCarousel)})),window.sowb=sowb;