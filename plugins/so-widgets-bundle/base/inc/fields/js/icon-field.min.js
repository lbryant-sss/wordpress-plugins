!function(i){void 0===window.top.soWidgets&&(window.top.soWidgets={}),window.top.soWidgets.icons=[];const e=function(e){var t=i(this),n=t.find(".siteorigin-widget-icon-selector"),o=n.find(".siteorigin-widget-icon-icon"),s=t.find(".siteorigin-widget-icon-selector-current"),d=t.find(".so-icon-remove"),a=t.find(".siteorigin-widget-icon-search"),r=n.find(".siteorigin-widget-icon-icons");if(t.attr("data-initialized"))return;t.attr("data-initialized",!0),s.find(".sow-icon-clear").remove(),s.on("click keyup",function(i){("keyup"!=i.type||window.top.sowbForms.isEnter(i))&&(n.slideToggle(),a.val(""),c())}),d.on("click keyup",function(i){i.preventDefault(),("keyup"!=i.type||window.top.sowbForms.isEnter(i))&&t.find(".siteorigin-widget-active").trigger("click")});var c=function(){var e=a.val().toLowerCase();""===e?n.find(".siteorigin-widget-icon-icons-icon").show():(r.addClass("loading"),n.find(".siteorigin-widget-icon-icons-icon").each(function(){var t=i(this),n=t.attr("data-value");-1===(n=n.replace(/-/," ")).indexOf(e)?t.hide():t.show()}),r.removeClass("loading"))};a.on("keyup change",c);const g=()=>{!function(){const e=n.find("select.siteorigin-widget-icon-family"),t=e.val(),o=n.find(".siteorigin-widget-icon-family-styles").val();if(void 0===window.top.soWidgets.icons[t])return;let s=n.find(".siteorigin-widget-icon-family-styles");const d=window.top.soWidgets.icons[t];if(!d.hasOwnProperty("styles")||!d.styles)return s.off("change",l),void s.remove();s.off("change",l),s.remove();let a="";for(const i in d.styles)a+='<option value="'+i+'">'+d.styles[i]+"</option>";a&&(s=i('<select class="siteorigin-widget-icon-family-styles"></select>').append(a),e.after(s),o&&d.styles.hasOwnProperty(o)&&s.val(o)),s.on("change",l)}(),l()},l=()=>{const e=n.find("select.siteorigin-widget-icon-family").val(),t=n.find(".siteorigin-widget-icon-icons");if(void 0===window.top.soWidgets.icons[e])return void f();t.empty();const a=window.top.soWidgets.icons[e],r=a.icons;let g;for(var l in a.hasOwnProperty("styles")&&a.styles&&(g=n.find(".siteorigin-widget-icon-family-styles").val()),r){var w=r[l],p=w.hasOwnProperty("unicode")?w.unicode:w;if(!w.hasOwnProperty("styles")||-1!==w.styles.indexOf(g)){var u="sow-icon-"+e+(g?" "+g:""),y=e+(g?"-"+g:"")+"-"+l,v=i('<div data-sow-icon="'+p+'"></div>').attr("data-value",y).addClass(u).addClass("siteorigin-widget-icon-icons-icon").on("click keyup",function(e){if("keyup"!=e.type||window.top.sowbForms.isEnter(e)){var a=i(this);a.hasClass("siteorigin-widget-active")?(a.removeClass("siteorigin-widget-active"),o.val(""),s.find("span").hide(),d.hide()):(t.find(".siteorigin-widget-icon-icons-icon").removeClass("siteorigin-widget-active"),a.addClass("siteorigin-widget-active"),o.val(a.data("value")),s.find("span").show().attr("data-sow-icon",a.attr("data-sow-icon")).attr("class","").addClass(u),d.show()),o.trigger("change",{isRendering:!0}),n.slideUp()}});t.append(v),o.val()===y&&(s.find("span").show().attr("data-sow-icon",v.attr("data-sow-icon")).attr("class","").addClass(u),v.addClass("siteorigin-widget-active"))}}t.prepend(t.find(".siteorigin-widget-active")),c()},w=(e,t)=>{i(`#siteorigin-widget-font-${e}`).length||i("<link rel='stylesheet' type='text/css' />").attr("id",`siteorigin-widget-font-${e}`).attr("href",encodeURI(t)).appendTo("head")},f=()=>{const e=n.find("select.siteorigin-widget-icon-family").val();if(void 0===e||""===e)return;if(void 0!==window.top.soWidgets.icons[e])return void g();const t=n.find('select.siteorigin-widget-icon-family option[value="'+e+'"]');if(t.attr("data-icons")){const i=JSON.parse(t.attr("data-icons"));return window.top.soWidgets.icons[e]=i,w(e,i.style_uri),void g()}r.addClass("loading"),i.getJSON(window.top.soWidgets.ajaxurl,{action:"siteorigin_widgets_get_icons",family:e},i=>{window.top.soWidgets.icons[e]=i,w(e,i.style_uri),g(),r.removeClass("loading")})};f(),n.find("select.siteorigin-widget-icon-family").on("change",function(){n.find(".siteorigin-widget-icon-icons").empty(),g()}),o.on("change",function(i,e){e&&e.isRendering||g()})};window.top===window.self&&"string"==typeof pagenow&&"site-editor"!==pagenow&&i(document).on("sowsetupformfield",".siteorigin-widget-field-type-icon",e),window.addEventListener("message",function(i){i.data&&"sowbBlockFormInit"===i.data.action&&n()});const t=()=>{let t=!1,n=!1;return i(".siteorigin-widget-field-type-icon").each(function(){t=!0,i(this).attr("data-initialized")||(n=!0,e.call(this))}),{found:t,pending:n}},n=(i=20)=>{const{found:e,pending:o}=t();if(i<=0)return;const s="function"==typeof window.requestAnimationFrame?window.requestAnimationFrame:i=>setTimeout(i,0);e&&!o||s(()=>n(i-1))},o=()=>n();if("loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o(),window.top!==window.self){const i=()=>n();"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()}if((window.top!==window.self||"string"==typeof pagenow&&"site-editor"===pagenow)&&"undefined"!=typeof MutationObserver){const t=new MutationObserver(t=>{const n=t=>{if(11===t.nodeType)return void Array.from(t.childNodes).forEach(n);if(1!==t.nodeType)return;const o=i(t);o.is(".siteorigin-widget-field-type-icon")&&e.call(t),o.find(".siteorigin-widget-field-type-icon").each(function(){e.call(this)})};t.forEach(i=>{i.addedNodes.forEach(n)})}),n=()=>{document.body&&t.observe(document.body,{childList:!0,subtree:!0})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}}(jQuery);