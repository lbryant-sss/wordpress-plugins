!function(t){const e=function(e){const n=t(this),i=n.find('input[type="hidden"][class="siteorigin-widget-input"]');if(!n.data("initialized")){if(n.find('[class*="sowb-specific-date"]').length>0){const t=function(t,e){const a=n.find("."+t+"-picker"),o=function(t,e){if(!isNaN(t.valueOf())){let e=t.getDate();e=e<10?"0"+e.toString():e.toString();let n=t.getMonth()+1;n=n<10?"0"+n.toString():n.toString();return t.getFullYear()+"-"+n+"-"+e}return""},s=function(t,e){const n=t.split("-"),i=parseInt(n[2]),a=parseInt(n[1])-1,o=parseInt(n[0]);return new Date(o,a,i)},l=function(e){const n=""===i.val()?{}:JSON.parse(i.val());n[t]=o(e),a.val(n[t]),i.val(JSON.stringify(n)),i.trigger("change",{silent:!0})},r=new Pikaday({field:a[0],blurFieldOnSelect:!1,toString:o,parse:s,onSelect:l});return a.on("change",function(t){const e=s(a.val());return l(e),t.preventDefault(),!1}),e&&a.val(e),r}.bind(this),e=""===i.val()||"null"===i.val()?{after:"",before:""}:JSON.parse(i.val()),a=t("after",e.after),o=t("before",e.before);i.on("change",function(t,e){if(!e||!e.silent){const t=""===i.val()||"null"===i.val()?{after:"",before:""}:JSON.parse(i.val());a.setDate(t.after),o.setDate(t.before)}})}else n.find(".sowb-relative-date").length>0&&n.find(".sowb-relative-date").each(function(){const e=t(this).data("name");t(this).on("change",function(){let n=""===i.val()?{}:JSON.parse(i.val());n.hasOwnProperty(e)||(n[e]={}),n[e].value=t(this).find("> input").val(),n[e].unit=t(this).find("> select").val(),i.val(JSON.stringify(n)),i.trigger("change",{silent:!0})}.bind(this)),i.on("change",function(n,a){if(!a||!a.silent){const n=""===i.val()?{from:{},to:{}}:JSON.parse(i.val());n.hasOwnProperty(e)&&(t(this).find("> input").val(n[e].value),t(this).find("> select").val(n[e].unit))}}.bind(this))});n.data("initialized",!0)}};window.top===window.self&&"string"==typeof pagenow&&"site-editor"!==pagenow&&t(document).on("sowsetupformfield",".siteorigin-widget-field-type-date-range",e),window.addEventListener("message",function(n){n.data&&"sowbBlockFormInit"===n.data.action&&t(".siteorigin-widget-field-type-date-range").each(function(){e.call(this)})})}(jQuery);