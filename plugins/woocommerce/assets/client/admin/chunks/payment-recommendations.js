"use strict";(globalThis.webpackChunk_wcAdmin_webpackJsonp=globalThis.webpackChunk_wcAdmin_webpackJsonp||[]).push([[4508],{3246:(e,t,n)=>{n.d(t,{d:()=>m});var a=n(14908),i=n(36849),s=n(98846),o=n(83306),r=n(27723),c=n(39793);const m=({textProps:e,message:t,eventName:n="",eventProperties:m={},targetUrl:d,linkType:l="wc-admin",target:_,onClickCallback:p})=>{const g=t.match(/{{Link}}(.*?){{\/Link}}/),w=g?g[1]:"",u="external"===l&&"_blank"===_;return(0,c.jsx)(a.Text,{...e,children:(0,i.A)({mixedString:t,components:{Link:(0,c.jsx)(s.Link,{onClick:()=>{if(p?p():(0,o.recordEvent)(n,m),"external"!==l)return window.location.href=d,!1},href:d,type:l,target:u?"_blank":void 0,"aria-label":u?`${w} (${(0,r.__)("opens in a new tab","woocommerce")})`:void 0})}})})}},99684:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var a=n(27723),i=n(47143),s=n(18537),o=n(56427),r=n(86087),c=n(98846),m=n(14908),d=n(40314),l=n(83306),_=n(15703),p=n(46772),g=n(24060),w=n(3246),u=n(39793);const y=document.querySelector('[data-gateway_id="pre_install_woocommerce_payments_promotion"]'),h=()=>{const[e,t]=(0,r.useState)(null),[n,h]=(0,r.useState)(!1),[x,v]=(0,r.useState)(!1),{installAndActivatePlugins:k,dismissRecommendedPlugins:f}=(0,i.useDispatch)(d.pluginsStore),{createNotice:b}=(0,i.useDispatch)("core/notices"),{installedPaymentGateway:j,installedPaymentGateways:S,paymentGatewaySuggestions:A,isResolving:E}=(0,i.useSelect)((t=>{const n=x&&(0,g.vK)(e);return{installedPaymentGateway:n&&t(d.PAYMENT_GATEWAYS_STORE_NAME).getPaymentGateway(n),installedPaymentGateways:t(d.PAYMENT_GATEWAYS_STORE_NAME).getPaymentGateways().reduce(((e,t)=>(n===t.id||(e[t.id]=!0),e)),{}),isResolving:t(d.onboardingStore).isResolving("getPaymentGatewaySuggestions",[]),paymentGatewaySuggestions:t(d.onboardingStore).getPaymentGatewaySuggestions()}}),[x]),T=(0,r.useRef)(!1),P=A&&A.length>0&&!(e=>e&&1===e.filter((e=>0===e.id.indexOf("woocommerce_payments"))).length)(A)&&!n;if((0,r.useEffect)((()=>{if((P||y&&!E)&&!T.current){T.current=!0;const e=(A||[]).reduce(((e,t)=>t.plugins&&t.plugins.length>0?{...e,[t.plugins[0].replace(/\-/g,"_")+"_displayed"]:!0}:e),{woocommerce_payments_displayed:!!y});(0,l.recordEvent)("settings_payments_recommendations_pageview",e)}}),[P,y,E]),(0,r.useEffect)((()=>{j&&(window.location.href=j.settings_url)}),[j]),!P)return null;const G=async()=>{h(!0),(0,l.recordEvent)("settings_payments_recommendations_dismiss",{}),await f("payments")||(h(!1),b("error",(0,a.__)('There was a problem hiding the "Additional ways to get paid" card.',"woocommerce")))},C=(A||[]).filter((e=>!S[e.id]&&e.plugins?.length&&(!window.wcAdminFeatures["wc-pay-promotion"]||!e.id.startsWith("woocommerce_payments")))).map((n=>({key:n.id,title:(0,u.jsxs)(u.Fragment,{children:[n.title,n.recommended&&(0,u.jsx)(c.Pill,{children:(0,a.__)("Recommended","woocommerce")})]}),content:(0,s.decodeEntities)(n.content),after:(0,u.jsx)(o.Button,{isSecondary:!0,onClick:()=>(n=>{e||(t(n.id),(0,l.recordEvent)("settings_payments_recommendations_setup",{extension_selected:n.plugins[0]}),k([n.plugins[0]]).then((()=>{v(!0)})).catch((e=>{(0,p.R)(e),t(null)})))})(n),isBusy:e===n.id,disabled:!!e,children:n.actionText||(0,a.__)("Get started","woocommerce")}),before:(0,u.jsx)("img",{src:n.square_image||n.image_72x72||n.image,alt:""})})));return 0===C.length?null:(0,u.jsxs)(o.Card,{size:"medium",className:"woocommerce-recommended-payments-card",children:[(0,u.jsxs)(o.CardHeader,{children:[(0,u.jsxs)("div",{className:"woocommerce-recommended-payments-card__header",children:[(0,u.jsx)(m.Text,{variant:"title.small",as:"p",size:"20",lineHeight:"28px",children:(0,a.__)("Recommended payment providers","woocommerce")}),(0,u.jsx)(m.Text,{className:"woocommerce-recommended-payments__header-heading",variant:"caption",as:"p",size:"12",lineHeight:"16px",children:(0,a.__)('We recommend adding one of the following payment extensions to your store. The extension will be installed and activated for you when you click "Get started".',"woocommerce")})]}),(0,u.jsx)("div",{className:"woocommerce-card__menu woocommerce-card__header-item",children:(0,u.jsx)(c.EllipsisMenu,{label:(0,a.__)("Task List Options","woocommerce"),renderContent:()=>(0,u.jsx)("div",{className:"woocommerce-review-activity-card__section-controls",children:(0,u.jsx)(o.Button,{onClick:G,children:(0,a.__)("Hide this","woocommerce")})})})})]}),(0,u.jsx)(c.List,{items:C}),(0,u.jsx)(o.CardFooter,{children:(0,u.jsx)(w.d,{message:(0,a.__)("Visit the {{Link}}Official WooCommerce Marketplace{{/Link}} to find additional payment providers.","woocommerce"),eventName:"settings_payment_recommendations_visit_marketplace_click",targetUrl:(0,_.getAdminLink)("admin.php?page=wc-admin&tab=extensions&path=/extensions&category=payment-gateways")})})]})}}}]);