"use strict";(globalThis.webpackChunk_wcAdmin_webpackJsonp=globalThis.webpackChunk_wcAdmin_webpackJsonp||[]).push([[8534],{5073:(e,t,a)=>{a.d(t,{l$:()=>g,My:()=>w,D2:()=>m,ls:()=>_}),a(5142);var n=a(65736),s=a(55609),i=a(69307),o=a(9818),c=a(67221),r=a(10431),l=a(81514);const m=({gatewayId:e,gatewayState:t,settingsHref:a,onboardingHref:m,isOffline:d,acceptIncentive:g=(()=>{}),gatewayHasRecommendedPaymentMethods:w,installingPlugin:_,buttonText:h=(0,n.__)("Enable","woocommerce"),incentive:y=null})=>{const[u,f]=(0,i.useState)(!1),{createErrorNotice:p}=(0,o.dispatch)("core/notices"),{togglePaymentGateway:x,invalidateResolutionForStoreSelector:v}=(0,o.useDispatch)(c.PAYMENT_SETTINGS_STORE_NAME),b=()=>{p((0,n.__)("An error occurred. You will be redirected to the settings page, try enabling the payment gateway there.","woocommerce"),{type:"snackbar",explicitDismiss:!0})};return(0,l.jsx)(s.Button,{variant:"primary",isBusy:u,disabled:u||!!_,onClick:s=>{if(s.preventDefault(),t.enabled)return;const i=window.woocommerce_admin.nonces?.gateway_toggle||"";if(!i)return b(),void(window.location.href=a);f(!0),y&&g(y.promo_id),x(e,window.woocommerce_admin.ajax_url,i).then((e=>{if("needs_setup"===e.data)if(t.account_connected)p((0,n.__)("The provider could not be enabled. Check the Manage page for details.","woocommerce"),{type:"snackbar",explicitDismiss:!0,actions:[{label:(0,n.__)("Manage","woocommerce"),url:a}]});else{if(!w)return void(window.location.href=m);(0,r.getHistory)().push((0,r.getNewPath)({},"/payment-methods"))}v(d?"getOfflinePaymentGateways":"getPaymentProviders"),f(!1)})).catch((()=>{f(!1),b(),window.location.href=a}))},href:a,children:h})};var d=a(44443);const g=({acceptIncentive:e,installingPlugin:t,buttonText:a=(0,n.__)("Activate payments","woocommerce"),incentive:o=null})=>{const[c,r]=(0,i.useState)(!1);return(0,l.jsx)(s.Button,{variant:"primary",isBusy:c,disabled:c||!!t,onClick:()=>{r(!0),o&&e(o.promo_id),window.location.href=(0,d.vA)()},children:a})},w=({gatewayId:e,gatewayState:t,onboardingState:a,settingsHref:o,onboardingHref:c,gatewayHasRecommendedPaymentMethods:m,installingPlugin:d,buttonText:g=(0,n.__)("Complete setup","woocommerce")})=>{const[w,_]=(0,i.useState)(!1),h=t.account_connected,y=a.started,u=a.completed;return(0,l.jsx)(s.Button,{variant:"primary",isBusy:w,disabled:w||!!d,onClick:()=>{if(_(!0),h&&y)return h&&y&&!u?void(window.location.href=c):void(window.location.href=o);m?((0,r.getHistory)().push((0,r.getNewPath)({},"/payment-methods")),_(!1)):window.location.href=c},children:g},e)},_=({settingsHref:e,installingPlugin:t,buttonText:a=(0,n.__)("Manage","woocommerce")})=>(0,l.jsx)(s.Button,{variant:"secondary",href:e,disabled:!!t,children:a})},17743:(e,t,a)=>{a.r(t),a.d(t,{SettingsPaymentsOffline:()=>y,default:()=>u});var n=a(9818),s=a(69307),i=a(67221),o=a(65736),c=a(22629),r=a(9845),l=a(47396),m=a(5073),d=a(81514);const g=({gateway:e,...t})=>(0,d.jsx)(l.TR,{id:e.id,className:"woocommerce-list__item woocommerce-list__item-enter-done",...t,children:(0,d.jsxs)("div",{className:"woocommerce-list__item-inner",children:[(0,d.jsxs)("div",{className:"woocommerce-list__item-before",children:[(0,d.jsx)(l.mR,{}),e.icon&&(0,d.jsx)("img",{className:"woocommerce-list__item-image",src:e.icon,alt:e.title+" logo"})]}),(0,d.jsxs)("div",{className:"woocommerce-list__item-text",children:[(0,d.jsx)("span",{className:"woocommerce-list__item-title",children:e.title}),(0,d.jsx)("span",{className:"woocommerce-list__item-content",dangerouslySetInnerHTML:(0,r.ZP)((0,c.decodeEntities)(e.description))})]}),(0,d.jsx)("div",{className:"woocommerce-list__item-after",children:(0,d.jsx)("div",{className:"woocommerce-list__item-after__actions",children:e.state.enabled?(0,d.jsx)(m.ls,{settingsHref:e.management._links.settings.href}):(0,d.jsx)(m.D2,{gatewayId:e.id,gatewayState:e.state,settingsHref:e.management._links.settings.href,onboardingHref:e.onboarding._links.onboard.href,isOffline:!0,gatewayHasRecommendedPaymentMethods:!1})})})]})},e.id),w=({gateways:e,setGateways:t})=>(0,d.jsx)(l.JN,{className:"woocommerce-list",items:e,setItems:t,children:e.map((e=>(0,d.jsx)(g,{gateway:e},e.id)))});var _=a(4622);const h=({isFetching:e,offlinePaymentGateways:t,updateOrdering:a})=>(0,d.jsxs)("div",{className:"settings-payment-gateways",children:[(0,d.jsx)("div",{className:"settings-payment-gateways__header",children:(0,d.jsx)("div",{className:"settings-payment-gateways__header-title",children:(0,o.__)("Payment methods","woocommerce")})}),e?(0,d.jsx)(_.a,{rows:3}):(0,d.jsx)(w,{gateways:t,setGateways:a})]}),y=()=>{const{offlinePaymentGateways:e,isFetching:t}=(0,n.useSelect)((e=>{const t=e(i.PAYMENT_SETTINGS_STORE_NAME);return{isFetching:t.isFetching(),offlinePaymentGateways:t.getOfflinePaymentGateways()}}),[]),{updateProviderOrdering:a}=(0,n.useDispatch)(i.PAYMENT_SETTINGS_STORE_NAME),[o,c]=(0,s.useState)(null);return(0,s.useEffect)((()=>{c(null)}),[e]),(0,d.jsx)("div",{className:"settings-payments-offline__container",children:(0,d.jsx)(h,{isFetching:t,updateOrdering:function(e){const t=e.map((e=>e._order)).sort(((e,t)=>e-t)),n={};e.forEach(((e,a)=>{n[e.id]=t[a]})),a(n),c(e)},offlinePaymentGateways:o||e})})},u=y}}]);