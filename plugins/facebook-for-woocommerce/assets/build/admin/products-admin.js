!function(e){var o={};function n(t){if(o[t])return o[t].exports;var c=o[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=o,n.d=function(e,o,t){n.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,o){if(1&o&&(e=n(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var c in e)n.d(t,c,function(o){return e[o]}.bind(null,c));return t},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},n.p="",n(n.s=9)}({9:function(e,o){jQuery(document).ready((function(e){var o=window.pagenow.length?window.pagenow:"";if(window.typenow.length&&window.typenow,"edit-product"===o){var n=!1;e("input#doaction, input#doaction2").on("click",(function(o){if(n)return!0;o.preventDefault();var t=e(this),c=t.prev("select").val();if("facebook_include"===c){var i=[];e.each(e('input[name="post[]"]:checked'),(function(){i.push(parseInt(e(this).val(),10))})),e.post(facebook_for_woocommerce_products_admin.ajax_url,{action:"facebook_for_woocommerce_set_product_sync_bulk_action_prompt",security:facebook_for_woocommerce_products_admin.set_product_sync_bulk_action_prompt_nonce,toggle:c,products:i},(function(o){o&&!o.success?(closeExistingModal(),new e.WCBackboneModal.View({target:"facebook-for-woocommerce-modal",string:o.data})):(n=!0,t.trigger("click"))}))}else n=!0,t.trigger("click")}))}if("product"===o){function t(e,o){o.find(".enable-if-sync-enabled").prop("disabled",!e)}function c(e,o){e?(o.find("option[value='sync_and_show']").show(),o.prop("original")&&o.val(o.prop("original"))):(o.find("option[value='sync_and_show']").hide(),"sync_and_show"===o.val()&&o.val("sync_and_hide"))}function i(e,o){var n=o.find("#wc_facebook_commerce_enabled"),t=n.prop("original");n.prop("checked",!!e&&t).prop("disabled",!e),n.trigger("change"),n.prop("original",t),o.find("#product-not-ready-notice, #variable-product-not-ready-notice").hide(),s()&&!r()?o.find("#variable-product-not-ready-notice").show():e||o.find("#product-not-ready-notice").show()}function a(){return!!(s()?r():"sync_disabled"!==_.val())&&!!(s()||(e("#_regular_price").val()||e("#fb_product_price").val()))&&!(!e("#_manage_stock").prop("checked")||!e("#_stock").val())}function r(){var o=e(".js-variable-fb-sync-toggle");return 0===o.length?!!facebook_for_woocommerce_products_admin.is_sync_enabled_for_product:!!o.map((function(o,n){return"sync_disabled"!==e(n).val()?n:null})).length}function s(){var o=e("select#product-type").val();return!(!o||!o.match(/variable/))}function d(e){e.attr("data-original-value",e.val())}function l(o){return _===o?e("input#post_ID").val():o.closest(".woocommerce_variation").find("input[name^=variable_post_id]").val()}function u(o){f=f.filter((function(e){return e!==o})),e(facebook_for_woocommerce_products_admin.product_removed_from_sync_field_id).val(f.join(","))}var f=[];e("#facebook_options #wc_facebook_commerce_enabled").on("change",(function(){var o=e(this).prop("checked");o?e(".wc_facebook_commerce_fields").show():e(".wc_facebook_commerce_fields").hide(),e(".product_attributes").find(".woocommerce_attribute").length?e(".show_if_has_attributes").show():e(".show_if_has_attributes").hide(),e(this).prop("original",o)})).trigger("change");var _=e("#wc_facebook_sync_mode"),p=_.closest(".woocommerce_options_panel");d(_),_.on("change",(function(){var e,o,n="sync_disabled"!==_.val();t(n,p),e=n,o=p.find(".wc-facebook-commerce-options-group"),e?o.show():o.hide(),n&&u(l(_)),_.prop("original",_.val())})).trigger("change"),e("#_virtual").on("change",(function(){c(!e(this).prop("checked"),_)})).trigger("change"),e("input[name=_visibility]").on("change",(function(){"hidden"!==e(this).val()&&"search"!==e(this).val()&&"sync_disabled"===_.val()&&_.val("sync_and_show").trigger("change")}));var m=e("#woocommerce-product-data");m.on("change","#_regular_price, #_manage_stock, #_stock, #wc_facebook_sync_mode, #fb_product_price",(function(o){setTimeout((function(){i(a(),e("#facebook_options"))}),1)})),e(".woocommerce_variations").on("change",".js-variable-fb-sync-toggle",(function(){var o=e(this),n="sync_disabled"!==o.val();t(n,o.closest(".wc-metabox-content")),i(a(),e("#facebook_options")),n&&u(l(o)),o.prop("original",o.val())})),m.on("woocommerce_variations_loaded",(function(){m.find(".js-variable-fb-sync-toggle").each((function(o,n){var c=e(n);t("sync_disabled"!==c.val(),c.closest(".wc-metabox-content")),c.prop("original",c.val()),d(c)})),e(".variable_is_virtual").on("change",(function(){var o=e(this).closest(".wc-metabox-content").find(".js-variable-fb-sync-toggle");c(!e(this).prop("checked"),o)})),i(a(),e("#facebook_options"))})),m.on("change",".js-fb-product-image-source",(function(){var o=e(this).closest(".woocommerce_options_panel, .wc-metabox-content"),n=e(this).val();o.find(".product-image-source-field").closest(".form-field").hide(),o.find(".show-if-product-image-source-".concat(n)).closest(".form-field").show()})),e(".js-fb-product-image-source:checked").trigger("change"),m.on("woocommerce_variations_loaded",(function(){e(".js-variable-fb-sync-toggle:visible").trigger("change"),e(".js-fb-product-image-source:checked").trigger("change"),e(".variable_is_virtual:visible").trigger("change")})),e("#facebook_options").on("click","#product-not-ready-notice-open-modal",(function(o){o.preventDefault(),closeExistingModal(),new e.WCBackboneModal.View({target:"facebook-for-woocommerce-modal",string:{message:facebook_for_woocommerce_products_admin.product_not_ready_modal_message,buttons:facebook_for_woocommerce_products_admin.product_not_ready_modal_buttons}})})),i(a(),p);var v,b=e("#open_media_library"),g=e("#fb_product_video_selected_thumbnails"),h=e("#fb_product_video"),w=h.val()?h.val().split(",").map(Number):[];function y(){h.val(w.join(","))}function k(e,o){w=w.filter((function(o){return o!==e})),y(),o.remove()}b.on("click",(function(o){o.preventDefault(),v||((v=wp.media({title:"Select videos",button:{text:"Save"},library:{type:"video"},multiple:!0})).on("open",(function(){var e=v.state().get("selection");w.forEach((function(o){var n=wp.media.attachment(o);n.fetch(),e.add(n?[n]:[])}))})),v.on("select",(function(){var o,n,t,c;o=v.state().get("selection"),n=o.map((function(e){return e.id})),t=w.filter((function(e){return!n.includes(e)})),c=n.filter((function(e){return!w.includes(e)})),g.find(".form-field").each((function(){var o=e(this),n=parseInt(o.find("span").data("attachment-id"),10);t.includes(n)&&k(n,o)})),o.each((function(o){if(o=o.toJSON(),c.includes(o.id)&&o.mime&&o.mime.startsWith("video/")){var n=function(o){var n=e("<p>",{class:"form-field video-thumbnail"}),t=e("<img>",{src:o.icon}),c=e("<span>",{text:o.url,"data-attachment-id":o.id}),i=e("<a>",{href:"#",text:"Remove",class:"remove-video"});return i.on("click",(function(e){e.preventDefault(),k(o.id,n)})),n.append(t,c,i),n}(o);g.append(n),w.push(o.id)}else o.mime.startsWith("video/")||alert("Please select a valid video file.")})),y()}))),v.open()})),g.on("click",".remove-video",(function(o){o.preventDefault();var n=e(this);k(n.data("attachment-id"),n.closest(".form-field"))}))}}))}});