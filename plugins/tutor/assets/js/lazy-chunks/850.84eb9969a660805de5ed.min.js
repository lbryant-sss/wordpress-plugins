"use strict";(self["webpackChunktutor"]=self["webpackChunktutor"]||[]).push([[850],{50850:(t,e,r)=>{r.r(e);r.d(e,{default:()=>md});var n=r(15871);var o=r(18831);var i=r(43627);var a=r(17437);var u=r(12470);var s=r(41594);var l=r.n(s);var c=r(75206);var d=r(47767);var f=r(38919);var p=r(4704);var h=r(942);var v=r(15298);var y=r(74979);var g=r(55787);var m=r(97665);var b=r(49785);var _=r(27793);var w=r(40874);var A=r(50707);var x=r(45538);var Y=r(41502);var O=r(52457);var I=r(62246);var E=r(94083);var k=r(47849);var S=null&&["onUpload","onError","acceptedTypes","multiple","disabled","children"];function q(){return q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},q.apply(null,arguments)}function P(t,e){if(null==t)return{};var r,n,o=j(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function j(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}function C(t){return z(t)||L(t)||D(t)||T()}function T(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D(t,e){if(t){if("string"==typeof t)return K(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(t,e):void 0}}function L(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function z(t){if(Array.isArray(t))return K(t)}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function H(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var N=function t(e){var r=e.acceptedTypes,n=e.onUpload,o=e.onError;var i=(0,s.useRef)(null);var a=function t(e){var i=e.target.files;if(!i){return}var a=[];var s=[];for(var l=0,c=C(i);l<c.length;l++){var d=c[l];if(!r.includes((0,k.dS)(d.name))){a.push((0,u.__)("Invalid file type","tutor"))}else if(d.size>Y.w3){a.push((0,u.__)("Maximum upload size exceeded","tutor"))}else{s.push(d)}}if(s.length){n(s)}if(a.length){o(a)}e.target.value=""};return{fileInputRef:i,handleChange:a}};var U=function t(e){var r=e.onUpload,n=e.onError,o=e.acceptedTypes,i=e.label,a=e.multiple,u=a===void 0?false:a,s=e.disabled,l=s===void 0?false:s;var c=N({acceptedTypes:o,onUpload:r,onError:n}),d=c.fileInputRef,f=c.handleChange;return ___EmotionJSX("button",{type:"button",css:R.uploadButton,onClick:function t(){var e;return(e=d.current)===null||e===void 0?void 0:e.click()},disabled:l},___EmotionJSX("input",{ref:d,type:"file",css:R.fileInput,accept:o.join(","),onChange:f,multiple:u,disabled:l}),___EmotionJSX(SVGIcon,{name:"storeImage",width:26,height:20}),___EmotionJSX("span",{css:R.text},i))};var R={uploadButton:(0,a.AH)(E.x.resetButton," background:",O.I6.background["default"],";border:1px dashed ",O.I6.stroke.border,";border-radius:",O.Vq[8],";display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1;gap:",O.YK[12],";"+(true?"":0),true?"":0),fileInput:true?{name:"eivff4",styles:"display:none"}:0,text:(0,a.AH)("color:",O.I6.text.subdued,";",I.I.body(),";"+(true?"":0),true?"":0)};var W=function t(e){var r=e.onUpload,n=e.onError,o=e.acceptedTypes,i=e.multiple,a=i===void 0?false:i,u=e.disabled,s=u===void 0?false:u,l=e.children,c=P(e,S);var d=N({acceptedTypes:o,onUpload:r,onError:n}),f=d.fileInputRef,p=d.handleChange;return ___EmotionJSX(Button,q({},c,{onClick:function t(){var e;return(e=f.current)===null||e===void 0?void 0:e.click()},disabled:s}),___EmotionJSX("input",{ref:f,type:"file",css:R.fileInput,accept:o.join(","),onChange:p,multiple:a,disabled:s}),l)};const B=null&&U;var M=r(47989);var F=r(3771);var G=r.n(F);var Q=r(85420);var V=["onClick","isOpen","disabled","closePopover","arrowPosition","children","animationType","dotsOrientation","maxWidth","isInverse","hideArrow","size","closeOnEscape"];function $(){return $=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$.apply(null,arguments)}function J(t,e){if(null==t)return{};var r,n,o=X(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function X(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}var Z=function t(e){var r=e.text,n=e.icon,o=e.onClick,i=e.onClosePopover,u=e.isTrash,s=u===void 0?false:u,l=e.size,c=l===void 0?"medium":l,d=e.css,f=e.disabled;return(0,a.Y)("button",{type:"button",css:[rt.option({isTrash:s,size:c}),d,true?"":0,true?"":0],onClick:function t(e){if(o){o(e)}if(i){i()}},disabled:f},n&&n,(0,a.Y)("span",null,r))};var tt=function t(e){var r=e.onClick,n=e.isOpen,o=e.disabled,i=o===void 0?false:o,u=e.closePopover,c=e.arrowPosition,d=c===void 0?"top":c,f=e.children,p=e.animationType,v=p===void 0?Q.J6.slideLeft:p,y=e.dotsOrientation,g=y===void 0?"horizontal":y,m=e.maxWidth,b=m===void 0?"148px":m,_=e.isInverse,w=_===void 0?false:_,A=e.hideArrow,x=A===void 0?false:A,Y=e.size,O=Y===void 0?"medium":Y,I=e.closeOnEscape,E=I===void 0?true:I,k=J(e,V);var S=(0,s.useRef)(null);return(0,a.Y)(l().Fragment,null,(0,a.Y)("button",$({type:"button",ref:S,onClick:r,css:rt.button({isOpen:n,isInverse:w,isDisabled:i}),disabled:i},k),(0,a.Y)(h.A,{name:g==="horizontal"?"threeDots":"threeDotsVertical",width:32,height:32})),(0,a.Y)(M.A,{gap:13,maxWidth:b,arrow:d,triggerRef:S,isOpen:n,closePopover:u,animationType:v,hideArrow:x,closeOnEscape:E},(0,a.Y)("div",{css:rt.wrapper({size:O})},l().Children.map(f,(function(t){if(l().isValidElement(t)){var e={size:O};return l().cloneElement(t,e)}return t})))))};tt.Option=Z;const et=tt;var rt={wrapper:function t(e){var r=e.size,n=r===void 0?"medium":r;return(0,a.AH)("padding-block:",O.YK[8],";position:relative;",n==="small"&&(0,a.AH)("padding-block:",O.YK[4],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},option:function t(e){var r=e.isTrash,n=r===void 0?false:r,o=e.size,i=o===void 0?"medium":o;return(0,a.AH)(E.x.resetButton,";",I.I.body(),";width:100%;padding:",O.YK[10]," ",O.YK[20],";transition:background-color 0.3s ease-in-out;cursor:pointer;display:flex;align-items:center;gap:",O.YK[8],";&:focus,&:active,&:hover{background:none;color:",O.I6.text.primary,";}svg{flex-shrink:0;color:",O.I6.icon["default"],";}",i==="small"&&(0,a.AH)("padding:",O.YK[8]," ",O.YK[16],";",I.I.small("medium"),";"+(true?"":0),true?"":0)," :hover:not(:disabled){background-color:",O.I6.background.hover,";color:",O.I6.text.title,";svg{color:",O.I6.icon.hover,";filter:grayscale(0%);}}:disabled{cursor:not-allowed;color:",O.I6.text.disable,";svg{color:",O.I6.icon.disable.background,";}}",n&&(0,a.AH)("color:",O.I6.text.error,";svg{color:",O.I6.icon.error,";}&:hover:not(:disabled){color:",O.I6.text.error,";background-color:",G()(O.I6.bg.error,.1),";svg{color:",O.I6.icon.error,";}}&:active{color:",O.I6.text.error,";background-color:",O.I6.color.danger[40],";svg{color:",O.I6.icon.error,";}}"+(true?"":0),true?"":0)," :focus-visible{outline:2px solid ",O.I6.stroke.brand,";outline-offset:-4px;border-radius:",O.Vq.input,";}"+(true?"":0),true?"":0)},button:function t(e){var r=e.isOpen,n=r===void 0?false:r,o=e.isInverse,i=o===void 0?false:o,u=e.isDisabled,s=u===void 0?false:u;return(0,a.AH)(E.x.resetButton,";width:32px;height:32px;border-radius:",O.Vq.circle,";display:flex;justify-content:center;align-items:center;transition:background-color 0.3s ease-in-out;svg{color:",O.I6.icon["default"],";}:hover{background-color:",O.I6.background.hover,";svg{color:",O.I6.icon["default"],";}}&:focus,&:active{background:none;}&:focus-visible{outline:2px solid ",O.I6.stroke.brand,";outline-offset:1px;}",n&&(0,a.AH)("background-color:",O.I6.background.hover,";svg{color:",O.I6.icon.brand,";}"+(true?"":0),true?"":0)," ",i&&(0,a.AH)("background-color:",O.I6.background.white,";:hover{background-color:",O.I6.background.white,";svg{color:",!s&&O.I6.icon.brand,";}}"+(true?"":0),true?"":0)," :disabled{cursor:not-allowed;}"+(true?"":0),true?"":0)}};var nt=r(81730);var ot=r(53804);var it=r(85271);var at=r(57215);var ut=r(97011);var st=r(83788);var lt=r(55435);var ct=r(98880);var dt=r(7443);var ft=r(30015);var pt=r(37567);var ht=r(8798);var vt=r(6502);function yt(t){"@babel/helpers - typeof";return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}var gt=["css"];function mt(t){return wt(t)||_t(t)||jt(t)||bt()}function bt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _t(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function wt(t){if(Array.isArray(t))return Ct(t)}function At(){return At=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},At.apply(null,arguments)}function xt(t,e){if(null==t)return{};var r,n,o=Yt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Yt(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}function Ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function It(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(r),!0).forEach((function(e){Et(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Et(t,e,r){return(e=kt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kt(t){var e=St(t,"string");return"symbol"==yt(e)?e:e+""}function St(t,e){if("object"!=yt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function qt(t,e){return Dt(t)||Tt(t,e)||jt(t,e)||Pt()}function Pt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jt(t,e){if(t){if("string"==typeof t)return Ct(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(t,e):void 0}}function Ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Tt(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Dt(t){if(Array.isArray(t))return t}function Lt(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var zt={lesson:{name:"lesson",color:O.I6.icon["default"]},tutor_quiz:{name:"quiz",color:O.I6.design.warning},tutor_assignments:{name:"assignment",color:O.I6.icon.processing},tutor_zoom_meeting:{name:"zoomColorize",color:""},"tutor-google-meet":{name:"googleMeetColorize",color:""},tutor_h5p_quiz:{name:"quiz",color:O.I6.icon.warning}};var Kt=function t(e){var r=e.field,n=e.fieldState,o=e.options,i=e.onChange,l=i===void 0?k.lQ:i,c=e.handleSearchOnChange,d=e.label,f=e.placeholder,y=f===void 0?"":f,g=e.disabled,m=e.readOnly,b=e.loading,_=e.isSearchable,w=_===void 0?false:_,A=e.helpText;var O=r.value||[];var E=O.map((function(t){return String(t)}));var S=o.reduce((function(t,e){return e.contents.reduce((function(t,e){if(E.includes(String(e.ID))){t.push(e)}return t}),t)}),[]);var q=(0,s.useState)(false),P=qt(q,2),j=P[0],C=P[1];var T=(0,s.useState)(""),D=qt(T,2),L=D[0],z=D[1];var K=(0,dt.d)(L);var H=o.reduce((function(t,e){var r=e.contents.filter((function(t){return t.post_type!=="tutor-google-meet"&&t.post_type!=="tutor_zoom_meeting"&&!E.includes(String(t.ID))}));if(r.length===0){return t}if(e.title.toLowerCase().includes(K.toLowerCase())){t.push(It(It({},e),{},{contents:r}))}else{var n=e.contents.filter((function(t){return t.post_title.toLowerCase().includes(K.toLowerCase())}));if(n.length===0){return t}t.push(It(It({},e),{},{contents:n}))}return t}),[]);(0,s.useEffect)((function(){if(c){c(K)}else{}}),[K,c]);var N=(0,ft.t)({isOpen:j,isDropdown:true,dependencies:[H.length]}),U=N.triggerRef,R=N.triggerWidth,W=N.position,B=N.popoverRef;var M=function t(e){if(Array.isArray(O)){var n=O.filter((function(t){return String(t)!==String(e)}));r.onChange(n);l(n)}};return(0,a.Y)(vt.A,{fieldState:n,field:r,label:d,disabled:g,readOnly:m,helpText:A},(function(t){var e=t.css,n=xt(t,gt);return(0,a.Y)("div",{css:Nt.mainWrapper},(0,a.Y)("div",{ref:U},(0,a.Y)("div",{css:Nt.inputWrapper},(0,a.Y)("div",{css:Nt.leftIcon},(0,a.Y)(h.A,{name:"search",width:24,height:24})),(0,a.Y)("input",At({},n,{onClick:function t(e){e.stopPropagation();C((function(t){return!t}))},onKeyDown:function t(e){if(e.key==="Enter"){e.preventDefault();C((function(t){return!t}))}if(e.key==="Tab"){C(false)}},className:"tutor-input-field",css:[e,Nt.input,true?"":0,true?"":0],autoComplete:"off",readOnly:m||!w,placeholder:y,value:L,onChange:function t(e){z(e.target.value)}})))),(0,a.Y)(x.A,{when:O.length>0,fallback:(0,a.Y)(x.A,{when:!b,fallback:(0,a.Y)(p.YE,null)},(0,a.Y)(v.A,{size:"small",emptyStateImage:ht.A,emptyStateImage2x:pt.A,imageAltText:(0,u.__)("Illustration of a no course selected","tutor"),title:(0,u.__)("No topic content selected","tutor"),description:(0,u.__)("Select a topic content to add as a prerequisite","tutor")}))},(0,a.Y)("div",{css:Nt.courseList},(0,a.Y)(ct.A,{each:S},(function(t){var e;return(0,a.Y)("div",{key:t.ID,css:Nt.groupItems({onPopover:false})},(0,a.Y)("div",{css:Nt.iconAndTitle({onPopover:false})},(0,a.Y)(h.A,{name:((e=zt[t.post_type])===null||e===void 0?void 0:e.name)||"lesson",width:24,height:24,style:(0,a.AH)("color:",zt[t.post_type].color,";"+(true?"":0),true?"":0)}),(0,a.Y)("span",{css:Nt.title,title:t.post_title},t.post_title),(0,a.Y)(x.A,{when:t.post_type==="tutor_quiz"&&t.total_question},(0,a.Y)("span",{"data-question-count":true,css:I.I.tiny()},(0,u.sprintf)((0,u.__)("(%d questions)","tutor"),t.total_question)))),(0,a.Y)("button",{type:"button",css:Nt.removeButton,"data-visually-hidden":true,onClick:function e(){return M(t.ID)}},(0,a.Y)(h.A,{name:"times",width:14,height:14})))})))),(0,a.Y)(ft.Z,{isOpen:j,onClickOutside:function t(){C(false);z("")},onEscape:function t(){C(false);z("")}},(0,a.Y)("div",{css:[Nt.optionsWrapper,Et(Et(Et({},Y.V8?"right":"left",W.left),"top",W.top),"maxWidth",R),true?"":0,true?"":0],ref:B},(0,a.Y)("ul",{css:[Nt.options,true?"":0,true?"":0]},(0,a.Y)(x.A,{when:H.length>0,fallback:(0,a.Y)("li",{css:Nt.emptyOption},(0,a.Y)("p",null,(0,u.__)("No topics content found","tutor")))},(0,a.Y)(ct.A,{each:H},(function(t){return(0,a.Y)("li",{key:t.id,css:Nt.group},(0,a.Y)("span",{css:Nt.groupTitle,title:t.title},t.title),(0,a.Y)(ct.A,{each:t.contents},(function(t){var e;return(0,a.Y)("button",{key:t.ID,type:"button",css:Nt.groupItems({onPopover:true}),onClick:function e(){var n=[].concat(mt(O),[t.ID]);r.onChange(n);l(n);C(false);z("")}},(0,a.Y)("div",{css:Nt.iconAndTitle({onPopover:true}),"data-content-icon":true},(0,a.Y)(h.A,{name:((e=zt[t.post_type])===null||e===void 0?void 0:e.name)||"lesson",width:24,height:24,style:(0,a.AH)("color:",zt[t.post_type].color,";"+(true?"":0),true?"":0)}),(0,a.Y)("span",{css:Nt.title,title:t.post_title},t.post_title),(0,a.Y)(x.A,{when:t.post_type==="tutor_quiz"&&t.total_question},(0,a.Y)("span",{"data-question-count":true,css:I.I.tiny()},(0,u.sprintf)((0,u.__)("(%d questions)","tutor"),t.total_question)))))})))})))))))}))};const Ht=Kt;var Nt={mainWrapper:true?{name:"1d3w5wq",styles:"width:100%"}:0,inputWrapper:true?{name:"1712kcx",styles:"width:100%;display:flex;justify-content:space-between;align-items:center;position:relative"}:0,leftIcon:(0,a.AH)("position:absolute;left:",O.YK[8],";top:",O.YK[8],";color:",O.I6.icon["default"],";display:flex;"+(true?"":0),true?"":0),input:(0,a.AH)(I.I.body(),";width:100%;padding-right:",O.YK[32],";padding-left:",O.YK[36],";",E.x.textEllipsis,";border:1px solid ",O.I6.stroke["default"],";&.tutor-input-field{padding-right:",O.YK[32],";padding-left:",O.YK[36],";}"+(true?"":0),true?"":0),courseList:(0,a.AH)(E.x.display.flex("column")," gap:",O.YK[8],";max-height:256px;height:100%;margin-top:",O.YK[8],";",E.x.overflowYAuto,";padding:1px;"+(true?"":0),true?"":0),optionsWrapper:true?{name:"1n0kzcr",styles:"position:absolute;width:100%"}:0,options:(0,a.AH)("z-index:",O.fE.dropdown,";background-color:",O.I6.background.white,";list-style-type:none;box-shadow:",O.r7.popover,";padding:",O.YK[4]," 0;margin:0;max-height:400px;border-radius:",O.Vq[6],";",E.x.overflowYAuto,";"+(true?"":0),true?"":0),removeButton:(0,a.AH)(E.x.resetButton,";position:absolute;top:50%;right:",O.YK[8],";transform:translateY(-50%);display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:",O.Vq.circle,";background:",O.I6.background.white,";&:focus,&:active,&:hover{background:",O.I6.background.white,";}svg{color:",O.I6.icon["default"],";transition:color 0.3s ease-in-out;}:hover{svg{color:",O.I6.icon.hover,";}}:focus{box-shadow:",O.r7.focus,";}"+(true?"":0),true?"":0),emptyOption:(0,a.AH)(I.I.caption("medium"),";padding:",O.YK[8],";text-align:center;"+(true?"":0),true?"":0),group:(0,a.AH)("padding:",O.YK[10]," 0;:not(:last-child){border-bottom:1px solid ",O.I6.stroke.divider,";}"+(true?"":0),true?"":0),groupTitle:(0,a.AH)(I.I.small("semiBold"),";",E.x.text.ellipsis(1),";padding-inline:",O.YK[10],";margin-bottom:",O.YK[8],";"+(true?"":0),true?"":0),groupItems:function t(e){var r=e.onPopover;return(0,a.AH)("position:relative;width:100%;padding:",O.YK[10]," ",O.YK[8],";border-radius:",O.Vq[6],";border:1px solid transparent;display:flex;justify-content:space-between;align-items:center;gap:",O.YK[8],";background-color:",O.I6.background.white,";cursor:",r?"pointer":"default",";[data-content-icon]{display:flex;height:",r?"20px":"24px",";}[data-visually-hidden]{opacity:0;}",!r&&(0,a.AH)("box-shadow:",O.r7.card,";"+(true?"":0),true?"":0)," &:hover,&:focus,&:active{background-color:",O.I6.background.hover,";",!r&&(0,a.AH)("background-color:",O.I6.background.white,";border-color:",O.I6.stroke["default"],";[data-visually-hidden]{opacity:1;}"+(true?"":0),true?"":0),";}",O.EA.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},title:(0,a.AH)(I.I.caption(),";color:",O.I6.text.title,";display:flex;align-items:center;gap:",O.YK[4],";"+(true?"":0),true?"":0),iconAndTitle:function t(e){var r=e.onPopover;return(0,a.AH)(E.x.text.ellipsis(1),";display:flex;align-items:center;gap:",O.YK[8],";",r&&(0,a.AH)("padding-left:",O.YK[16],";"+(true?"":0),true?"":0)," svg{flex-shrink:0;}span{text-align:left;",E.x.text.ellipsis(1),";}[data-question-count]{flex-shrink:0;text-decoration:none;}"+(true?"":0),true?"":0)}};var Ut=r(95037);var Rt=r(75382);var Wt=r(40804);var Bt=r(44091);var Mt=r(80953);var Ft=r(21708);var Gt=r(48465);var Qt=r(82179);var Vt=r(56499);var $t=r(41594);function Jt(t){"@babel/helpers - typeof";return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jt(t)}function Xt(){return Xt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xt.apply(null,arguments)}function Zt(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Zt=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(P([])));A&&A!==r&&n.call(A,a)&&(_=A);var x=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==Jt(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Jt(e)+" is not iterable")}return m.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(x),l(x,s,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:P(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function te(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function ee(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){te(i,n,o,a,u,"next",t)}function u(t){te(i,n,o,a,u,"throw",t)}a(void 0)}))}}function re(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ne(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?re(Object(r),!0).forEach((function(e){oe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oe(t,e,r){return(e=ie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ie(t){var e=ae(t,"string");return"symbol"==Jt(e)?e:e+""}function ae(t,e){if("object"!=Jt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var ue=(0,Ft.p9)();var se=[{label:(0,u.__)("Weeks","tutor"),value:"weeks"},{label:(0,u.__)("Days","tutor"),value:"days"},{label:(0,u.__)("Hours","tutor"),value:"hours"}];var le=function t(e){var r;var n=e.assignmentId,o=n===void 0?"":n,i=e.topicId,l=e.closeModal,c=e.icon,d=e.title,v=e.subtitle,y=e.contentDripType;var g=(0,Bt._)(),_=g.fields;var w=!!Gt.P.tutor_pro_url;var A=((r=Gt.P.settings)===null||r===void 0?void 0:r.chatgpt_enable)==="on";var O=(0,Mt.pR)(o,i);var I=(0,Mt.$2)(ue);var E=(0,m.jE)();var S=O.data;var q=E.getQueryData(["Topic",ue]);var P=(0,Qt.p)({defaultValues:{title:"",summary:"",attachments:[],time_duration:{value:"0",time:"weeks"},total_mark:10,pass_mark:5,upload_files_limit:1,upload_file_size_limit:2,content_drip_settings:{unlock_date:"",after_xdays_of_enroll:"",prerequisites:[]}},shouldFocusError:true,mode:"onChange"});var j=P.formState.dirtyFields&&Object.keys(P.formState.dirtyFields).length>0;(0,s.useEffect)((function(){if(S){var t,e,r;P.reset(ne({title:S.post_title||"",summary:(0,k.EW)(S.post_content)||"",attachments:S.attachments||[],time_duration:{value:S.assignment_option.time_duration.value||"0",time:S.assignment_option.time_duration.time||"weeks"},total_mark:S.assignment_option.total_mark||10,pass_mark:S.assignment_option.pass_mark||5,upload_files_limit:S.assignment_option.upload_files_limit||1,upload_file_size_limit:S.assignment_option.upload_file_size_limit||2,content_drip_settings:{unlock_date:(S===null||S===void 0||(t=S.content_drip_settings)===null||t===void 0?void 0:t.unlock_date)||"",after_xdays_of_enroll:(S===null||S===void 0||(e=S.content_drip_settings)===null||e===void 0?void 0:e.after_xdays_of_enroll)||"",prerequisites:(S===null||S===void 0||(r=S.content_drip_settings)===null||r===void 0?void 0:r.prerequisites)||[]}},Object.fromEntries((0,k.DE)({fields:_.Curriculum.Lesson}).map((function(t){return[t,S[t]]})))),{keepDirty:false})}var n=setTimeout((function(){P.setFocus("title")}),0);return function(){clearTimeout(n)}}),[S]);var C=function(){var t=ee(Zt().mark((function t(e){var r,n;return Zt().wrap((function t(a){while(1)switch(a.prev=a.next){case 0:r=(0,Mt.sC)(e,o,i,y,(0,k.DE)({fields:_.Curriculum.Assignment}));a.next=3;return I.mutateAsync(r);case 3:n=a.sent;if(n.status_code===200||n.status_code===201){l({action:"CONFIRM"})}case 5:case"end":return a.stop()}}),t)})));return function e(r){return t.apply(this,arguments)}}();return(0,a.Y)(Rt.A,{onClose:function t(){return l({action:"CLOSE"})},icon:j?(0,a.Y)(h.A,{name:"warning",width:24,height:24}):c,title:j?Y.vN.isAboveDesktop?(0,u.__)("Unsaved Changes","tutor"):"":d,subtitle:Y.vN.isAboveSmallMobile?v:"",maxWidth:1070,actions:j&&(0,a.Y)($t.Fragment,null,(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){if(o){P.reset()}else{l({action:"CLOSE"})}}},o?(0,u.__)("Discard Changes","tutor"):(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{"data-cy":"save-assignment",loading:I.isPending,variant:"primary",size:"small",onClick:P.handleSubmit(C)},o?(0,u.__)("Update","tutor"):(0,u.__)("Save","tutor")))},(0,a.Y)("div",{css:de.wrapper},(0,a.Y)(x.A,{when:!O.isLoading,fallback:(0,a.Y)(p.p8,null)},(0,a.Y)("div",null,(0,a.Y)("div",{css:de.assignmentInfo},(0,a.Y)(b.xI,{name:"title",control:P.control,rules:ne({required:(0,u.__)("Assignment title is required","tutor")},(0,Vt.wA)(255)),render:function t(e){return(0,a.Y)(ut.A,Xt({},e,{label:(0,u.__)("Title","tutor"),placeholder:(0,u.__)("Enter Assignment Title","tutor"),generateWithAi:!w||A,isClearable:true}))}}),(0,a.Y)(b.xI,{name:"summary",control:P.control,render:function t(e){return(0,a.Y)(Ut.A,Xt({},e,{label:(0,u.__)("Content","tutor"),placeholder:(0,u.__)("Enter Assignment Content","tutor"),generateWithAi:!w||A}))}}),(0,a.Y)(Wt.A,{section:"Curriculum.Assignment.after_description",form:P}))),(0,a.Y)("div",{css:de.rightPanel},(0,a.Y)(b.xI,{name:"attachments",control:P.control,render:function t(e){return(0,a.Y)(at.A,Xt({},e,{label:(0,u.__)("Attachments","tutor"),buttonText:(0,u.__)("Upload Attachment","tutor"),selectMultiple:true}))}}),(0,a.Y)(x.A,{when:(0,k.GR)(Y.oW.CONTENT_DRIP)},(0,a.Y)(x.A,{when:y==="specific_days"},(0,a.Y)(b.xI,{name:"content_drip_settings.after_xdays_of_enroll",control:P.control,render:function t(e){return(0,a.Y)(ut.A,Xt({},e,{type:"number",label:(0,a.Y)("div",{css:de.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Available after days","tutor")),helpText:(0,u.__)("This assignment will be available after the given number of days.","tutor"),placeholder:"0",selectOnFocus:true}))}})),(0,a.Y)(x.A,{when:y==="unlock_by_date"},(0,a.Y)(b.xI,{name:"content_drip_settings.unlock_date",control:P.control,render:function t(e){return(0,a.Y)(it.A,Xt({},e,{label:(0,a.Y)("div",{css:de.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Unlock Date","tutor")),placeholder:(0,u.__)("Select Unlock Date","tutor"),helpText:(0,u.__)("This assignment will be available from the given date. Leave empty to make it available immediately.","tutor")}))}})),(0,a.Y)(x.A,{when:y==="after_finishing_prerequisites"},(0,a.Y)(b.xI,{name:"content_drip_settings.prerequisites",control:P.control,render:function t(e){return(0,a.Y)(Ht,Xt({},e,{label:(0,a.Y)("div",{css:de.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Prerequisites","tutor")),placeholder:(0,u.__)("Select Prerequisite","tutor"),options:q.reduce((function(t,e){if(String(e.id)===String(i)){t.push(ne(ne({},e),{},{contents:e.contents.filter((function(t){return String(t.ID)!==String(o)}))}))}else{t.push(e)}return t}),[])||[],isSearchable:true,helpText:(0,u.__)("Select items that should be complete before this item","tutor")}))}}))),(0,a.Y)("div",{css:de.timeLimit},(0,a.Y)(b.xI,{name:"time_duration.value",control:P.control,render:function t(e){return(0,a.Y)(ut.A,Xt({},e,{type:"number",label:(0,u.__)("Time Limit","tutor"),placeholder:"0",dataAttribute:"data-time-limit",selectOnFocus:true}))}}),(0,a.Y)(b.xI,{name:"time_duration.time",control:P.control,render:function t(e){return(0,a.Y)(lt.A,Xt({},e,{options:se,removeOptionsMinWidth:true,dataAttribute:"data-time-limit-unit"}))}})),(0,a.Y)(b.xI,{name:"total_mark",control:P.control,render:function t(e){return(0,a.Y)(ut.A,Xt({},e,{type:"number",label:(0,u.__)("Total Points","tutor"),placeholder:"0",selectOnFocus:true}))}}),(0,a.Y)(b.xI,{name:"pass_mark",control:P.control,rules:{validate:function t(e){if(Number(e)>Number(P.getValues("total_mark"))){return(0,u.__)("Pass mark cannot be greater than total mark","tutor")}return true}},render:function t(e){return(0,a.Y)(ut.A,Xt({},e,{type:"number",label:(0,u.__)("Minimum Pass Points","tutor"),placeholder:"0",selectOnFocus:true}))}}),(0,a.Y)(b.xI,{name:"upload_files_limit",control:P.control,render:function t(e){return(0,a.Y)(ut.A,Xt({},e,{placeholder:"0",type:"number",label:(0,u.__)("File Upload Limit","tutor"),helpText:(0,u.__)("Define the number of files that a student can upload in this assignment. Input 0 to disable the option to upload.","tutor"),selectOnFocus:true}))}}),(0,a.Y)(b.xI,{name:"upload_file_size_limit",control:P.control,render:function t(e){return(0,a.Y)(st.A,Xt({},e,{type:"number",label:(0,u.__)("Maximum File Size Limit","tutor"),placeholder:"0",content:(0,u.__)("MB","tutor"),contentPosition:"right"}))}}),(0,a.Y)(Wt.A,{section:"Curriculum.Assignment.bottom_of_sidebar",form:P})))))};const ce=le;var de={wrapper:(0,a.AH)("margin:0 auto;display:grid;grid-template-columns:1fr 338px;width:100%;height:100%;padding-inline:",O.YK[32],";",O.EA.smallTablet,"{grid-template-columns:1fr;padding-inline:",O.YK[24],";}",O.EA.mobile,"{padding-inline:",O.YK[16],";}"+(true?"":0),true?"":0),assignmentInfo:(0,a.AH)("padding-block:",O.YK[24],";padding-right:",O.YK[32],";display:flex;flex-direction:column;gap:",O.YK[24],";position:sticky;top:0;z-index:",O.fE.positive,";",O.EA.smallTablet,"{position:unset;padding-right:0;}"+(true?"":0),true?"":0),rightPanel:(0,a.AH)("border-left:1px solid ",O.I6.stroke.divider,";display:flex;flex-direction:column;gap:",O.YK[16],";padding-block:",O.YK[24],";padding-left:",O.YK[32],";",O.EA.smallTablet,"{border-left:none;padding-left:0;}"+(true?"":0),true?"":0),timeLimit:(0,a.AH)("display:grid;align-items:end;grid-template-columns:1fr 100px;& input{border:1px solid ",O.I6.stroke["default"],";&[data-time-limit]{border-radius:",O.Vq[6]," 0 0 ",O.Vq[6],";border-right:none;&:focus{border-right:1px solid ",O.I6.stroke["default"],";z-index:",O.fE.positive,";}}&[data-time-limit-unit]{border-radius:0 ",O.Vq[6]," ",O.Vq[6]," 0;}}"+(true?"":0),true?"":0),uploadAttachment:(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[8],";"+(true?"":0),true?"":0),uploadLabel:(0,a.AH)(I.I.body()," color:",O.I6.text.title,";"+(true?"":0),true?"":0),contentDripLabel:(0,a.AH)("display:flex;align-items:center;svg{margin-right:",O.YK[4],";color:",O.I6.icon.success,";}"+(true?"":0),true?"":0)};var fe=r(1438);var pe=r(26434);var he=r(47275);var ve=r(31652);var ye=r(96645);var ge=r(72346);var me=r(86150);var be=r(95790);var _e=r(94747);var we=r(97286);var Ae=r(4862);var xe=r(21508);function Ye(t){"@babel/helpers - typeof";return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function Oe(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Ie(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function t(){};return{s:o,n:function e(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();return a=e.done,e},e:function t(e){u=!0,i=e},f:function t(){try{a||null==r["return"]||r["return"]()}finally{if(u)throw i}}}}function Ie(t,e){if(t){if("string"==typeof t)return Ee(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ee(t,e):void 0}}function Ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ke(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Se(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(r),!0).forEach((function(e){qe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qe(t,e,r){return(e=Pe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pe(t){var e=je(t,"string");return"symbol"==Ye(e)?e:e+""}function je(t,e){if("object"!=Ye(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Ce={NEW:"new",UPDATE:"update",NO_CHANGE:"no_change"};var Te=function t(e,r){var n,o,i,a,u,s,l,c,d,f,p;var h=function t(e){if(e.image_url){return e.answer_view_format==="text_image"?Ce.NO_CHANGE:Ce.UPDATE}return e.answer_view_format==="text"?Ce.NO_CHANGE:Ce.UPDATE};var v=function t(e){if(e.question_settings){e.question_settings.answer_required=!!Number(e.question_settings.answer_required);e.question_settings.show_question_mark=!!Number(e.question_settings.show_question_mark);e.question_settings.randomize_question=!!Number(e.question_settings.randomize_question)}e.question_answers=e.question_answers.map((function(t){return Se(Se({},t),{},{_data_status:h(t),is_saved:true,answer_view_format:t.image_url?"text_image":"text"})}));e.question_description=(0,k.EW)(e.question_description)||"";e.answer_explanation=e.answer_explanation==='<p><br data-mce-bogus="1"></p>'?"":(0,k.EW)(e.answer_explanation)||"";switch(e.question_type){case"single_choice":{return Se(Se({},e),{},{_data_status:Ce.UPDATE,question_type:"multiple_choice",question_answers:e.question_answers.map((function(t){return Se(Se({},t),{},{_data_status:Ce.UPDATE})})),question_settings:Se(Se({},e.question_settings),{},{question_type:"multiple_choice",has_multiple_correct_answer:false})})}case"multiple_choice":{return Se(Se({},e),{},{_data_status:e.question_settings.has_multiple_correct_answer?Ce.NO_CHANGE:Ce.UPDATE,question_settings:Se(Se({},e.question_settings),{},{has_multiple_correct_answer:e.question_settings.has_multiple_correct_answer?!!Number(e.question_settings.has_multiple_correct_answer):true})})}case"matching":{return Se(Se({},e),{},{_data_status:e.question_settings.is_image_matching?Ce.NO_CHANGE:Ce.UPDATE,question_settings:Se(Se({},e.question_settings),{},{is_image_matching:e.question_settings.is_image_matching?!!Number(e.question_settings.is_image_matching):false})})}case"image_matching":{return Se(Se({},e),{},{_data_status:Ce.UPDATE,question_type:"matching",question_answers:e.question_answers.map((function(t){return Se(Se({},t),{},{_data_status:Ce.UPDATE})})),question_settings:Se(Se({},e.question_settings),{},{question_type:"matching",is_image_matching:true})})}default:return Se(Se({},e),{},{_data_status:Ce.NO_CHANGE})}};return Se({ID:e.ID,_data_status:Ce.NO_CHANGE,quiz_title:(n=e.post_title)!==null&&n!==void 0?n:"",quiz_description:(o=e.post_content)!==null&&o!==void 0?o:"",quiz_option:{time_limit:{time_value:(i=e.quiz_option.time_limit.time_value)!==null&&i!==void 0?i:0,time_type:(a=e.quiz_option.time_limit.time_type)!==null&&a!==void 0?a:"minutes"},hide_quiz_time_display:e.quiz_option.hide_quiz_time_display==="1",feedback_mode:(u=e.quiz_option.feedback_mode)!==null&&u!==void 0?u:"retry",attempts_allowed:(s=e.quiz_option.attempts_allowed)!==null&&s!==void 0?s:10,pass_is_required:e.quiz_option.pass_is_required==="1",passing_grade:(l=e.quiz_option.passing_grade)!==null&&l!==void 0?l:80,max_questions_for_answer:(c=e.quiz_option.max_questions_for_answer)!==null&&c!==void 0?c:10,quiz_auto_start:e.quiz_option.quiz_auto_start==="1",question_layout_view:e.quiz_option.question_layout_view||"single_question",questions_order:(d=e.quiz_option.questions_order)!==null&&d!==void 0?d:"rand",hide_question_number_overview:e.quiz_option.hide_question_number_overview==="1",short_answer_characters_limit:(f=e.quiz_option.short_answer_characters_limit)!==null&&f!==void 0?f:200,open_ended_answer_characters_limit:(p=e.quiz_option.open_ended_answer_characters_limit)!==null&&p!==void 0?p:500,content_drip_settings:e.quiz_option.content_drip_settings||{unlock_date:"",after_xdays_of_enroll:0,prerequisites:[]}},questions:(e.questions||[]).map((function(t){return v(t)})),deleted_question_ids:[],deleted_answer_ids:[]},Object.fromEntries(r.map((function(t){return[t,e[t]]}))))};var De=function t(e,r,n,o,i,a){var u,s;return Se(Se(Se(Se({course_id:o,topic_id:r,payload:{ID:e.ID,_data_status:e._data_status,post_title:e.quiz_title,post_content:e.quiz_description,quiz_option:Se(Se(Se({attempts_allowed:e.quiz_option.attempts_allowed,feedback_mode:e.quiz_option.feedback_mode,hide_question_number_overview:e.quiz_option.hide_question_number_overview?"1":"0",hide_quiz_time_display:e.quiz_option.hide_quiz_time_display?"1":"0",max_questions_for_answer:(0,k.GR)(Y.oW.H5P_INTEGRATION)&&e.questions.every((function(t){return t.question_type==="h5p"}))?e.questions.length:e.quiz_option.max_questions_for_answer,open_ended_answer_characters_limit:e.quiz_option.open_ended_answer_characters_limit,pass_is_required:e.quiz_option.pass_is_required?"1":"0",passing_grade:e.quiz_option.passing_grade,question_layout_view:e.quiz_option.question_layout_view,questions_order:e.quiz_option.questions_order,quiz_auto_start:e.quiz_option.quiz_auto_start?"1":"0",short_answer_characters_limit:e.quiz_option.short_answer_characters_limit,time_limit:{time_type:e.quiz_option.time_limit.time_type,time_value:e.quiz_option.time_limit.time_value}},(0,k.GR)(Y.oW.CONTENT_DRIP)&&n==="unlock_sequentially"&&e.quiz_option.feedback_mode==="retry"&&{pass_is_required:e.quiz_option.pass_is_required?"1":"0"}),(0,k.GR)(Y.oW.CONTENT_DRIP)&&{content_drip_settings:Se(Se(Se({},n==="unlock_by_date"&&{unlock_date:e.quiz_option.content_drip_settings.unlock_date}),n==="specific_days"&&{after_xdays_of_enroll:e.quiz_option.content_drip_settings.after_xdays_of_enroll}),n==="after_finishing_prerequisites"&&{prerequisites:(u=e.quiz_option.content_drip_settings.prerequisites)!==null&&u!==void 0&&u.length?e.quiz_option.content_drip_settings.prerequisites:""})}),(0,k.GR)(Y.oW.H5P_INTEGRATION)&&e.questions.every((function(t){return t.question_type==="h5p"}))&&{quiz_type:"tutor_h5p_quiz"}),questions:e.questions.map((function(t){return Se(Se({_data_status:t._data_status,question_id:t.question_id,question_title:t.question_title,question_description:t.question_description,question_mark:t.question_settings.question_mark},!!Gt.P.tutor_pro_url&&{answer_explanation:t.answer_explanation}),{},{question_type:t.question_type,question_order:t.question_order,question_settings:Se(Se({answer_required:t.question_settings.answer_required?"1":"0",question_mark:t.question_settings.question_mark,question_type:t.question_type,randomize_question:t.question_settings.randomize_question?"1":"0",show_question_mark:t.question_settings.show_question_mark?"1":"0"},t.question_type==="multiple_choice"&&{has_multiple_correct_answer:t.question_settings.has_multiple_correct_answer?"1":"0"}),t.question_type==="matching"&&{is_image_matching:t.question_settings.is_image_matching?"1":"0"}),question_answers:t.question_answers.map((function(e){return{_data_status:e._data_status,answer_id:e.answer_id,belongs_question_id:t.question_id,belongs_question_type:t.question_type,answer_title:e.answer_title,is_correct:e.is_correct,image_id:t.question_type==="matching"&&!t.question_settings.is_image_matching?"":e.image_id,image_url:t.question_type==="matching"&&!t.question_settings.is_image_matching?"":e.image_url,answer_two_gap_match:e.answer_two_gap_match,answer_view_format:e.answer_view_format,answer_order:e.answer_order}}))},Object.fromEntries(i.map((function(e){return[e,t[e]]}))))}))},deleted_question_ids:e.deleted_question_ids,deleted_answer_ids:e.deleted_answer_ids},(0,k.GR)(Y.oW.CONTENT_DRIP)&&n==="unlock_by_date"&&{"content_drip_settings[unlock_date]":e.quiz_option.content_drip_settings.unlock_date}),(0,k.GR)(Y.oW.CONTENT_DRIP)&&n==="specific_days"&&{"content_drip_settings[after_xdays_of_enroll]":e.quiz_option.content_drip_settings.after_xdays_of_enroll}),(0,k.GR)(Y.oW.CONTENT_DRIP)&&n==="after_finishing_prerequisites"&&{"content_drip_settings[prerequisites]":(s=e.quiz_option.content_drip_settings.prerequisites)!==null&&s!==void 0&&s.length?e.quiz_option.content_drip_settings.prerequisites:""}),Object.fromEntries(a.map((function(t){return[t,e[t]]}))))};var Le=function t(e){return{question_id:e.question_id,question_title:e.question_title,question_description:e.question_description,question_type:e.question_type,question_mark:e.question_mark,answer_explanation:e.answer_explanation,"question_settings[question_type]":e.question_type,"question_settings[answer_required]":e.question_settings.answer_required?1:0,"question_settings[question_mark]":e.question_mark}};var ze=function t(e){return Ae.b.post(xe.A.QUIZ_IMPORT_DATA,e)};var Ke=function t(){var e=(0,m.jE)();var r=(0,w.d)(),n=r.showToast;return(0,_e.n)({mutationFn:ze,onSuccess:function t(r){if(r.success){e.invalidateQueries({queryKey:["Topic"]});n({message:(0,u.__)("Quiz imported successfully","tutor"),type:"success"})}else{n({message:r.data.message,type:"danger"})}},onError:function t(e){n({message:(0,k.EL)(e),type:"danger"})}})};var He=function t(e){return Ae.b.post(xe.A.QUIZ_EXPORT_DATA,{quiz_id:e})};var Ne=function t(){var e=(0,w.d)(),r=e.showToast;return(0,_e.n)({mutationFn:He,onSuccess:function t(e){if(!e.success){r({message:(0,u.__)("Something went wrong.","tutor"),type:"danger"});return}var n="";var o=Oe(e.data.output_quiz_data),i;try{for(o.s();!(i=o.n()).done;){var a=i.value;var s=a.join(",");n+="".concat(s,"\r\n")}}catch(t){o.e(t)}finally{o.f()}var l=new Blob([n],{type:"text/csv"});var c=window.webkitURL.createObjectURL(l);var d=document.createElement("a");d.setAttribute("href",c);d.setAttribute("download","tutor-quiz-".concat(e.data.title,".csv"));document.body.appendChild(d);d.click()},onError:function t(e){r({message:(0,k.EL)(e),type:"danger"})}})};var Ue=function t(e){return Ae.b.post(xe.A.SAVE_QUIZ,e)};var Re=function t(){var e=(0,m.jE)();var r=(0,w.d)(),n=r.showToast;return(0,_e.n)({mutationFn:Ue,onSuccess:function t(r){if(r.data){e.setQueryData(["Quiz",r.data.ID],r.data);e.invalidateQueries({queryKey:["Topic"]});n({message:(0,u.__)(r.message,"tutor"),type:"success"})}},onError:function t(e){n({message:(0,k.EL)(e),type:"danger"})}})};var We=function t(e){return Ae.b.get(xe.A.GET_QUIZ_DETAILS,{params:{quiz_id:e}})};var Be=function t(e){return(0,we.I)({queryKey:["Quiz",e],queryFn:function t(){return We(e).then((function(t){return t.data}))},enabled:!!e})};var Me=function t(e,r){if(r===e){return null}if(e===Ce.NEW){return Ce.NEW}if((e===Ce.UPDATE||e===Ce.NO_CHANGE)&&r===Ce.UPDATE){return Ce.UPDATE}return Ce.NO_CHANGE};var Fe=function t(e){return Ae.b.post(xe.A.GET_H5P_QUIZ_CONTENT,{search_filter:e})};var Ge=function t(e,r){return(0,we.I)({queryKey:["H5PQuizContents",e],queryFn:function t(){return Fe(e).then((function(t){return t.data}))},enabled:r==="tutor_h5p_quiz"})};var Qe=function t(e){return wpAjaxInstance.post(endpoints.GET_H5P_QUIZ_CONTENT_BY_ID,{content_id:e}).then((function(t){return t.data}))};var Ve=function t(e,r){return useQuery({queryKey:["H5PQuizContent",e],queryFn:function t(){return Qe(e)},enabled:!!e&&r==="tutor_h5p_quiz"})};var $e=function t(e){return Ae.b.post(xe.A.DELETE_QUIZ,{quiz_id:e})};var Je=function t(){var e=(0,m.jE)();var r=(0,w.d)(),n=r.showToast;return(0,_e.n)({mutationFn:$e,onSuccess:function t(r){if(r.status_code===200){n({message:(0,u.__)(r.message,"tutor"),type:"success"});e.invalidateQueries({queryKey:["Topic"]})}},onError:function t(e){n({message:(0,k.EL)(e),type:"danger"})}})};var Xe=r(29200);function Ze(){return Ze=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ze.apply(null,arguments)}function tr(t){return nr(t)||rr(t)||ar(t)||er()}function er(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rr(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function nr(t){if(Array.isArray(t))return ur(t)}function or(t,e){return lr(t)||sr(t,e)||ar(t,e)||ir()}function ir(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ar(t,e){if(t){if("string"==typeof t)return ur(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ur(t,e):void 0}}function ur(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function sr(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function lr(t){if(Array.isArray(t))return t}var cr=function t(e){var r=e.title,n=e.closeModal,o=e.onAddContent,i=e.contentType,l=e.addedContentIds,c=l===void 0?[]:l;var d=(0,Qt.p)({defaultValues:{search:""}});var p=(0,dt.d)(d.watch("search"),300);var v=Ge(p,i);var y=(0,Mt.Jc)(p,i);var g=(0,s.useState)([]),m=or(g,2),_=m[0],w=m[1];var A=i==="tutor_h5p_quiz"?v.data:y.data;var O=A===null||A===void 0?void 0:A.output.filter((function(t){return!c.includes(String(t.id))}));var E=[{Header:(0,a.Y)("div",{"data-index":true,css:fr.tableLabel},O!==null&&O!==void 0&&O.length?(0,a.Y)(Xe.A,{onChange:function t(e){if(e){w((O===null||O===void 0?void 0:O.filter((function(t){return!c.includes(String(t.id))})))||[])}else{w([])}},checked:_.length===((O===null||O===void 0?void 0:O.filter((function(t){return!c.includes(String(t.id))})))||[]).length,isIndeterminate:_.length>0&&_.length<((O===null||O===void 0?void 0:O.filter((function(t){return!c.includes(String(t.id))})))||[]).length}):"#"),Cell:function t(e){return(0,a.Y)("div",{css:I.I.caption()},(0,a.Y)(Xe.A,{onChange:function t(r){if(r){w([].concat(tr(_),[e]))}else{w(_.filter((function(t){return t.id!==e.id})))}},checked:_.map((function(t){return t.id})).includes(e.id)&&!c.includes(String(e.id))}))}},{Header:(0,a.Y)("div",{css:fr.tableLabel},(0,u.__)("Title","tutor")),Cell:function t(e){return(0,a.Y)("div",{css:fr.title},e.title)}},{Header:(0,a.Y)("div",{css:fr.tableLabel},(0,u.__)("Content Type","tutor")),Cell:function t(e){return(0,a.Y)("div",{css:I.I.caption()},e.content_type)}},{Header:(0,a.Y)("div",{css:fr.tableLabel},(0,u.__)("Created At","tutor")),Cell:function t(e){return(0,a.Y)("div",{css:I.I.caption()},(0,ge["default"])(new Date(e.updated_at),Y.Bd.yearMonthDayHourMinuteSecond))}}];(0,s.useEffect)((function(){document.body.style.overflow="hidden";return function(){document.body.style.overflow="auto"}}),[]);return(0,a.Y)(be.A,{title:_.length>0?(0,u.sprintf)((0,u.__)("%s  selected","tutor"),_.length):r,onClose:function t(){return n({action:"CLOSE"})},maxWidth:920},(0,a.Y)("div",{css:fr.searchWrapper},(0,a.Y)(b.xI,{control:d.control,name:"search",render:function t(e){return(0,a.Y)(st.A,Ze({},e,{placeholder:(0,u.__)("Search by title","tutor"),showVerticalBar:false,content:(0,a.Y)(h.A,{name:"search",width:24,height:24})}))}})),(0,a.Y)("div",{css:fr.tableWrapper},(0,a.Y)(me.A,{columns:E,data:O||[],loading:v.isLoading||y.isLoading})),(0,a.Y)(x.A,{when:O===null||O===void 0?void 0:O.length},(0,a.Y)("div",{css:fr.footer},(0,a.Y)(f.A,{size:"small",variant:"text",onClick:function t(){return n({action:"CLOSE"})}},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{type:"submit",size:"small",variant:"primary",onClick:function t(){o(_);n({action:"CONFIRM"})},disabled:!_.length},(0,u.__)("Add","tutor")))))};const dr=cr;var fr={searchWrapper:(0,a.AH)("display:flex;padding:",O.YK[20],";"+(true?"":0),true?"":0),tableWrapper:(0,a.AH)("max-height:calc(100vh - 350px);overflow:auto;tr{td:first-of-type{padding-left:",O.YK[20],";}td:last-of-type{padding-right:",O.YK[20],";}}"+(true?"":0),true?"":0),tableLabel:(0,a.AH)(I.I.body("medium"),";text-align:left;color:",O.I6.text.primary,";&[data-index]{padding-left:",O.YK[4],";}"+(true?"":0),true?"":0),title:(0,a.AH)(E.x.text.ellipsis(2)," width:100%;text-align:left;",I.I.caption(),";min-width:340px;max-width:400px;"+(true?"":0),true?"":0),footer:(0,a.AH)("box-shadow:",O.r7.dividerTop,";height:56px;display:flex;align-items:center;justify-content:end;gap:",O.YK[16],";padding-inline:",O.YK[16],";"+(true?"":0),true?"":0)};var pr=r(41594);function hr(t){"@babel/helpers - typeof";return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hr(t)}function vr(){return vr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vr.apply(null,arguments)}function yr(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */yr=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(P([])));A&&A!==r&&n.call(A,a)&&(_=A);var x=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==hr(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(hr(e)+" is not iterable")}return m.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(x),l(x,s,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:P(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function gr(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function mr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){gr(i,n,o,a,u,"next",t)}function u(t){gr(i,n,o,a,u,"throw",t)}a(void 0)}))}}function br(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?br(Object(r),!0).forEach((function(e){wr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wr(t,e,r){return(e=Ar(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ar(t){var e=xr(t,"string");return"symbol"==hr(e)?e:e+""}function xr(t,e){if("object"!=hr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Yr(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Or=(0,Ft.p9)();var Ir=function t(e){var r,n,o,i;var l=e.lessonId,c=l===void 0?"":l,d=e.topicId,v=e.closeModal,y=e.icon,g=e.title,w=e.subtitle,O=e.contentDripType;var I=!!Gt.P.tutor_pro_url;var E=((r=Gt.P.settings)===null||r===void 0?void 0:r.chatgpt_enable)==="on";var S=Gt.P.enable_lesson_classic_editor==="1";var q=((n=Gt.P.settings)===null||n===void 0?void 0:n.hide_admin_bar_for_users)==="off";var P=(o=Gt.P.current_user.roles)===null||o===void 0?void 0:o.includes(Y.gt.ADMINISTRATOR);var j=(i=Gt.P.current_user.roles)===null||i===void 0?void 0:i.includes(Y.gt.TUTOR_INSTRUCTOR);var C=S&&(P||j&&q);var T=(0,Mt.Cx)(c,d);var D=(0,Mt.K3)(Or);var L=(0,m.jE)();var z=(0,A.h)(),K=z.showModal;var H=T.data,N=T.isLoading;var U=L.getQueryData(["Topic",Or]);var R=(0,Bt._)(),W=R.fields;var B=(0,ye.A)(Y.qP.COURSE_BUILDER.CURRICULUM.LESSON.VIDEO_PLAYBACK_TIME);var M=(0,ye.A)(Y.qP.COURSE_BUILDER.CURRICULUM.LESSON.LESSON_PREVIEW);var F=(0,ye.A)(Y.qP.COURSE_BUILDER.CURRICULUM.LESSON.FEATURED_IMAGE);var G=(0,ye.A)(Y.qP.COURSE_BUILDER.CURRICULUM.LESSON.VIDEO);var Q=(0,ye.A)(Y.qP.COURSE_BUILDER.CURRICULUM.LESSON.EXERCISE_FILES);var V=(0,Qt.p)({defaultValues:{title:"",description:"",thumbnail:null,tutor_attachments:[],lesson_preview:false,video:null,duration:{hour:0,minute:0,second:0},content_drip_settings:{unlock_date:"",after_xdays_of_enroll:"",prerequisites:[]}},shouldFocusError:true,mode:"onChange"});var $=V.formState.dirtyFields&&Object.keys(V.formState.dirtyFields).length>0;var J=Boolean(O!==""||B||F||G||Q||(0,k.GR)(Y.oW.TUTOR_COURSE_PREVIEW)&&M);(0,s.useEffect)((function(){if(H&&!N){var t,e,r,n,o,i;V.reset(_r({title:H.post_title||"",description:(0,k.EW)(H.post_content)||"",thumbnail:{id:H.thumbnail_id?Number(H.thumbnail_id):0,title:"",url:H.thumbnail||""},tutor_attachments:H.attachments||[],lesson_preview:H.is_preview||false,video:H.video||null,duration:{hour:((t=H.video.runtime)===null||t===void 0?void 0:t.hours)||0,minute:((e=H.video.runtime)===null||e===void 0?void 0:e.minutes)||0,second:((r=H.video.runtime)===null||r===void 0?void 0:r.seconds)||0},content_drip_settings:{unlock_date:(H===null||H===void 0||(n=H.content_drip_settings)===null||n===void 0?void 0:n.unlock_date)||"",after_xdays_of_enroll:(H===null||H===void 0||(o=H.content_drip_settings)===null||o===void 0?void 0:o.after_xdays_of_enroll)||"",prerequisites:(H===null||H===void 0||(i=H.content_drip_settings)===null||i===void 0?void 0:i.prerequisites)||[]}},Object.fromEntries((0,k.DE)({fields:W.Curriculum.Lesson}).map((function(t){return[t,H[t]]})))))}var a=document.querySelector(".button.insert-media.add_media");var u=document.querySelector(".add-h5p-content-button");if(a&&u){a.after(u)}var s=setTimeout((function(){V.setFocus("title")}),0);return function(){clearTimeout(s)}}),[H,N]);var X=function(){var t=mr(yr().mark((function t(e){var r,n;return yr().wrap((function t(o){while(1)switch(o.prev=o.next){case 0:r=(0,Mt.R6)(e,c,d,O,(0,k.DE)({fields:W.Curriculum.Lesson}));o.next=3;return D.mutateAsync(r);case 3:n=o.sent;if(n.data){v({action:"CONFIRM"})}case 5:case"end":return o.stop()}}),t)})));return function e(r){return t.apply(this,arguments)}}();var Z=function t(){var e=V.getValues("description");var r=e.match(/\[h5p id="(\d+)"\]/g)||[];var n=r.map((function(t){var e;var r=((e=t.match(/\[h5p id="(\d+)"\]/))===null||e===void 0?void 0:e[1])||"";return String(r)}));var o=function t(r){var n=function t(e){return'[h5p id="'.concat(e.id,'"]')};var o=r.map(n);V.setValue("description","".concat(e,"\n").concat(o.join("\n")),{shouldDirty:true})};K({component:dr,props:{title:(0,u.__)("Select H5P Content","tutor"),onAddContent:o,contentType:"lesson",addedContentIds:n}})};return(0,a.Y)(Rt.A,{onClose:function t(){return v({action:"CLOSE"})},icon:$?(0,a.Y)(h.A,{name:"warning",width:24,height:24}):y,title:$?Y.vN.isAboveDesktop?(0,u.__)("Unsaved Changes","tutor"):"":g,subtitle:Y.vN.isAboveSmallMobile?w:"",maxWidth:1070,actions:$&&(0,a.Y)(pr.Fragment,null,(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){if(c){V.reset()}else{v({action:"CLOSE"})}}},c?(0,u.__)("Discard Changes","tutor"):(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{"data-cy":"save-lesson",loading:D.isPending,variant:"primary",size:"small",onClick:V.handleSubmit(X)},c?(0,u.__)("Update","tutor"):(0,u.__)("Save","tutor")))},(0,a.Y)("div",{css:kr.wrapper({hasRightSidebar:J})},(0,a.Y)(x.A,{when:!T.isLoading,fallback:(0,a.Y)(p.p8,null)},(0,a.Y)("div",null,(0,a.Y)("div",{css:kr.lessonInfo({hasRightSidebar:J})},(0,a.Y)(b.xI,{name:"title",control:V.control,rules:_r({required:(0,u.__)("Lesson title is required.","tutor")},(0,Vt.wA)(255)),render:function t(e){return(0,a.Y)(ut.A,vr({},e,{label:(0,u.__)("Name","tutor"),placeholder:(0,u.__)("Enter Lesson Name","tutor"),generateWithAi:!I||E,isClearable:true}))}}),(0,a.Y)("div",{css:kr.description},(0,a.Y)(b.xI,{name:"description",control:V.control,render:function t(e){return(0,a.Y)(Ut.A,vr({},e,{label:(0,a.Y)("div",{css:kr.descriptionLabel},(0,u.__)("Content","tutor"),(0,a.Y)(x.A,{when:C},(0,a.Y)(fe.A,{content:(0,u.__)("Save the lesson first to use the WP Editor.","tutor"),delay:200,disabled:!!c},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){window.open("".concat(Gt.P.site_url,"/wp-admin/post.php?post=").concat(c,"&action=edit"),"_blank","noopener")},icon:(0,a.Y)(h.A,{name:"edit",width:24,height:24}),buttonCss:kr.wpEditorButton,disabled:!c},(0,u.__)("WP Editor","tutor"))))),placeholder:(0,u.__)("Enter Lesson Description","tutor"),generateWithAi:!I||E}))}}),(0,a.Y)(x.A,{when:I&&(0,k.GR)(Y.oW.H5P_INTEGRATION),fallback:(0,a.Y)(x.A,{when:!I},(0,a.Y)("button",{css:kr.addH5PContentButton({isPro:false}),type:"reset",className:"add-h5p-content-button",disabled:true},(0,a.Y)(_.A,null,(0,a.Y)("div",{"data-button-text":true},(0,u.__)("Add H5P Content","tutor")))))},(0,a.Y)("button",{className:"add-h5p-content-button",css:kr.addH5PContentButton,type:"button",onClick:Z},(0,u.__)("Add H5P Content","tutor")))),(0,a.Y)(Wt.A,{section:"Curriculum.Lesson.after_description",form:V}))),(0,a.Y)("div",{css:kr.rightPanel},(0,a.Y)(b.xI,{name:"thumbnail",control:V.control,render:function t(e){return(0,a.Y)(pe.A,vr({},e,{label:(0,u.__)("Featured Image","tutor"),buttonText:(0,u.__)("Upload Image","tutor"),infoText:(0,u.sprintf)((0,u.__)("JPEG, PNG, GIF, and WebP formats, up to %s","tutor"),Gt.P.max_upload_size),visibilityKey:Y.qP.COURSE_BUILDER.CURRICULUM.LESSON.FEATURED_IMAGE}))}}),(0,a.Y)(b.xI,{name:"video",control:V.control,render:function t(e){return(0,a.Y)(ve.A,vr({},e,{label:(0,u.__)("Video","tutor"),buttonText:(0,u.__)("Upload Video","tutor"),infoText:(0,u.sprintf)((0,u.__)("MP4, and WebM formats, up to %s","tutor"),Gt.P.max_upload_size),onGetDuration:function t(e){V.setValue("duration.hour",e.hours);V.setValue("duration.minute",e.minutes);V.setValue("duration.second",e.seconds)},visibilityKey:Y.qP.COURSE_BUILDER.CURRICULUM.LESSON.VIDEO}))}}),(0,a.Y)(x.A,{when:B},(0,a.Y)("div",{css:kr.durationWrapper},(0,a.Y)("span",{css:kr.additionLabel},(0,u.__)("Video Playback Time","tutor")),(0,a.Y)("div",{css:kr.duration},(0,a.Y)(b.xI,{name:"duration.hour",control:V.control,render:function t(e){return(0,a.Y)(st.A,vr({},e,{type:"number",content:(0,a.Y)("span",{css:kr.durationContent},(0,u.__)("hour","tutor")),contentPosition:"right",placeholder:"0",showVerticalBar:false,visibilityKey:Y.qP.COURSE_BUILDER.CURRICULUM.LESSON.VIDEO_PLAYBACK_TIME}))}}),(0,a.Y)(b.xI,{name:"duration.minute",control:V.control,render:function t(e){return(0,a.Y)(st.A,vr({},e,{type:"number",content:(0,a.Y)("span",{css:kr.durationContent},(0,u.__)("min","tutor")),contentPosition:"right",placeholder:"0",showVerticalBar:false,visibilityKey:Y.qP.COURSE_BUILDER.CURRICULUM.LESSON.VIDEO_PLAYBACK_TIME}))}}),(0,a.Y)(b.xI,{name:"duration.second",control:V.control,render:function t(e){return(0,a.Y)(st.A,vr({},e,{type:"number",content:(0,a.Y)("span",{css:kr.durationContent},(0,u.__)("sec","tutor")),contentPosition:"right",placeholder:"0",showVerticalBar:false,visibilityKey:Y.qP.COURSE_BUILDER.CURRICULUM.LESSON.VIDEO_PLAYBACK_TIME}))}})))),(0,a.Y)(x.A,{when:(0,k.GR)(Y.oW.CONTENT_DRIP)},(0,a.Y)(x.A,{when:O==="specific_days"},(0,a.Y)(b.xI,{name:"content_drip_settings.after_xdays_of_enroll",control:V.control,render:function t(e){return(0,a.Y)(ut.A,vr({},e,{type:"number",label:(0,a.Y)("div",{css:kr.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Available after days","tutor")),helpText:(0,u.__)("This lesson will be available after the given number of days.","tutor"),placeholder:"0",selectOnFocus:true}))}})),(0,a.Y)(x.A,{when:O==="unlock_by_date"},(0,a.Y)(b.xI,{name:"content_drip_settings.unlock_date",control:V.control,render:function t(e){return(0,a.Y)(it.A,vr({},e,{label:(0,a.Y)("div",{css:kr.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Unlock Date","tutor")),placeholder:(0,u.__)("Select Unlock Date","tutor"),helpText:(0,u.__)("This lesson will be available from the given date. Leave empty to make it available immediately.","tutor")}))}})),(0,a.Y)(x.A,{when:O==="after_finishing_prerequisites"},(0,a.Y)(b.xI,{name:"content_drip_settings.prerequisites",control:V.control,render:function t(e){return(0,a.Y)(Ht,vr({},e,{label:(0,a.Y)("div",{css:kr.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Prerequisites","tutor")),placeholder:(0,u.__)("Select Prerequisite","tutor"),options:U.reduce((function(t,e){if(String(e.id)===String(d)){t.push(_r(_r({},e),{},{contents:e.contents.filter((function(t){return String(t.ID)!==String(c)}))}))}else{t.push(e)}return t}),[])||[],isSearchable:true,helpText:(0,u.__)("Select items that should be complete before this item","tutor")}))}}))),(0,a.Y)(b.xI,{name:"tutor_attachments",control:V.control,render:function t(e){return(0,a.Y)(at.A,vr({},e,{label:(0,u.__)("Exercise Files","tutor"),buttonText:(0,u.__)("Upload Attachment","tutor"),selectMultiple:true,visibilityKey:Y.qP.COURSE_BUILDER.CURRICULUM.LESSON.EXERCISE_FILES}))}}),(0,a.Y)(x.A,{when:!I||M&&(0,k.GR)(Y.oW.TUTOR_COURSE_PREVIEW)},(0,a.Y)("div",{css:kr.lessonPreview},(0,a.Y)(b.xI,{name:"lesson_preview",control:V.control,render:function t(e){return(0,a.Y)(he.A,vr({},e,{disabled:!I,label:(0,a.Y)("div",{css:kr.previewLabel},(0,u.__)("Lesson Preview","tutor"),!I&&(0,a.Y)(_.A,{size:"small",content:(0,u.__)("Pro","tutor")})),helpText:(0,u.__)("If checked, any user/guest can view this lesson without enrolling in the course.","tutor"),visibilityKey:Y.qP.COURSE_BUILDER.CURRICULUM.LESSON.LESSON_PREVIEW}))}}),(0,a.Y)(x.A,{when:V.watch("lesson_preview")},(0,a.Y)("div",{css:kr.previewInfo},(0,u.__)("This lesson is now available for preview. Users and guests can view it without enrolling in the course.","tutor"))))),(0,a.Y)(Wt.A,{section:"Curriculum.Lesson.bottom_of_sidebar",form:V})))))};const Er=Ir;var kr={wrapper:function t(e){var r=e.hasRightSidebar,n=r===void 0?true:r;return(0,a.AH)("margin:0 auto;display:grid;grid-template-columns:",n?"1fr 338px":"1fr",";height:100%;width:100%;padding-inline:",O.YK[32],";",O.EA.smallTablet,"{grid-template-columns:1fr;padding-inline:",O.YK[24],";}",O.EA.mobile,"{padding-inline:",O.YK[16],";}"+(true?"":0),true?"":0)},lessonInfo:function t(e){var r=e.hasRightSidebar,n=r===void 0?true:r;return(0,a.AH)("padding-block:",O.YK[20],";padding-right:",n&&O.YK[32],";display:flex;flex-direction:column;gap:",O.YK[24],";position:sticky;top:0;z-index:",O.fE.positive,";",O.EA.smallTablet,"{position:unset;padding-right:0;}"+(true?"":0),true?"":0)},description:true?{name:"bjn8wh",styles:"position:relative"}:0,descriptionLabel:true?{name:"188e2n4",styles:"display:flex;align-items:center;justify-content:space-between;height:32px"}:0,addH5PContentButton:function t(e){var r=e.isPro,n=r===void 0?true:r;return(0,a.AH)("text-decoration:none;font-size:13px;line-height:2.15384615;min-height:30px;margin:0;padding:",!n?"0px":"0 10px",";cursor:pointer;border:1px solid #3e64de;border-radius:3px;white-space:nowrap;box-sizing:border-box;color:#3e64de;border-color:#3e64de;background:transparent;[data-button-text]{",E.x.flexCenter(),";padding:0 10px;}:hover:not(:disabled){background:",O.I6.background.white,";color:#3e64de;}:disabled{cursor:not-allowed;position:relative;top:auto;left:auto;opacity:0.5;}"+(true?"":0),true?"":0)},rightPanel:(0,a.AH)("border-left:1px solid ",O.I6.stroke.divider,";display:flex;flex-direction:column;gap:",O.YK[16],";padding-block:",O.YK[20],";padding-left:",O.YK[32],";",O.EA.smallTablet,"{border-left:none;padding-left:0;}"+(true?"":0),true?"":0),durationWrapper:(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[8],";"+(true?"":0),true?"":0),duration:(0,a.AH)("display:flex;align-items:flex-end;gap:",O.YK[8],";"+(true?"":0),true?"":0),durationContent:(0,a.AH)(I.I.small(),";color:",O.I6.text.hints,";"+(true?"":0),true?"":0),additionLabel:(0,a.AH)(I.I.body()," color:",O.I6.text.title,";"+(true?"":0),true?"":0),lessonPreview:(0,a.AH)("background-color:",O.I6.background.white,";padding:",O.YK[12],";border:1px solid ",O.I6.stroke["default"],";border-radius:",O.Vq[8],";"+(true?"":0),true?"":0),previewLabel:(0,a.AH)("display:flex;align-items:center;gap:",O.YK[4],";"+(true?"":0),true?"":0),contentDripLabel:(0,a.AH)("display:flex;align-items:center;svg{margin-right:",O.YK[4],";color:",O.I6.icon.success,";}"+(true?"":0),true?"":0),previewInfo:(0,a.AH)(I.I.small(),";text-align:center;color:",O.I6.text.title,";padding:",O.YK[8]," ",O.YK[24],";background:",O.I6.background.status.success,";border-radius:",O.Vq[4],";margin-top:",O.YK[12],";"+(true?"":0),true?"":0),wpEditorButton:(0,a.AH)("margin-left:",O.YK[4],";color:",O.I6.text.brand,";svg{color:",O.I6.icon.brand,";}&:hover:not(:disabled){text-decoration:underline;}"+(true?"":0),true?"":0)};var Sr=r(46201);var qr=r(46068);var Pr=r(29832);function jr(t,e){return zr(t)||Lr(t,e)||Tr(t,e)||Cr()}function Cr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tr(t,e){if(t){if("string"==typeof t)return Dr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dr(t,e):void 0}}function Dr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Lr(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function zr(t){if(Array.isArray(t))return t}var Kr=(0,s.createContext)(null);var Hr=function t(){var e=(0,s.useContext)(Kr);if(!e){throw new Error("useQuizModalContext must be used within a QuizModalContextProvider")}return e};var Nr=function t(e){var r=e.children,n=e.quizId,o=e.contentType,i=e.validationError;var u=(0,s.useState)(""),l=jr(u,2),c=l[0],d=l[1];var f=(0,b.xW)();var p=f.watch("questions")||[];var h=(0,s.useRef)(p);var v=(0,s.useState)(i||null),y=jr(v,2),g=y[0],m=y[1];var _=p.findIndex((function(t){return t.question_id===c}));(0,s.useEffect)((function(){if(p.length===0){d("")}else if(h.current.length!==0&&h.current.length<p.length){var t=p.find((function(t){return!h.current.some((function(e){return String(e.question_id)===String(t.question_id)}))}));d((t===null||t===void 0?void 0:t.question_id)||"")}else if(_===-1){d(p[0].question_id)}h.current=p}),[p.length]);(0,s.useEffect)((function(){if(_===-1&&c){d("")}}),[_,c]);return(0,a.Y)(Kr.Provider,{value:{activeQuestionIndex:_,activeQuestionId:c,setActiveQuestionId:d,quizId:n,validationError:g,setValidationError:m,contentType:o}},typeof r==="function"?r({activeQuestionIndex:_,activeQuestionId:c,setActiveQuestionId:d,setValidationError:m}):r)};function Ur(t){"@babel/helpers - typeof";return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ur(t)}function Rr(){return Rr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rr.apply(null,arguments)}function Wr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Br(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Wr(Object(r),!0).forEach((function(e){Mr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mr(t,e,r){return(e=Fr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fr(t){var e=Gr(t,"string");return"symbol"==Ur(e)?e:e+""}function Gr(t,e){if("object"!=Ur(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Qr(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Vr={true_false:{label:(0,u.__)("True/False","tutor"),icon:"quizTrueFalse"},multiple_choice:{label:(0,u.__)("Multiple Choice","tutor"),icon:"quizMultiChoice"},open_ended:{label:(0,u.__)("Open Ended/Essay","tutor"),icon:"quizEssay"},fill_in_the_blank:{label:(0,u.__)("Fill in the Blanks","tutor"),icon:"quizFillInTheBlanks"},short_answer:{label:(0,u.__)("Short Answer","tutor"),icon:"quizShortAnswer"},matching:{label:(0,u.__)("Matching","tutor"),icon:"quizImageMatching"},image_answering:{label:(0,u.__)("Image Answering","tutor"),icon:"quizImageAnswer"},ordering:{label:(0,u.__)("Ordering","tutor"),icon:"quizOrdering"},h5p:{label:(0,u.__)("H5P","tutor"),icon:"quizTrueFalse"}};var $r=["multiple_choice","matching","image_answering"];var Jr=true?{name:"z33n32",styles:"max-width:80px"}:0;var Xr=function t(){var e=Hr(),r=e.activeQuestionIndex,n=e.activeQuestionId,o=e.validationError,i=e.setValidationError;var s=(0,b.xW)();var l=s.watch("questions.".concat(r,".question_type"));var c=s.watch("questions.".concat(r,"._data_status"));if(!n){return(0,a.Y)("p",{css:tn.emptyQuestions},(0,u.__)("Create/Select a question to view details","tutor"))}return(0,a.Y)("div",{key:"".concat(n,"-").concat(r)},(0,a.Y)("div",{css:tn.questionTypeWrapper},(0,a.Y)("div",{css:I.I.caption("medium")},(0,u.__)("Question Type","tutor")),(0,a.Y)("div",{css:tn.questionType},(0,a.Y)(h.A,{name:l?Vr[l].icon:"quizTrueFalse",width:32,height:32}),(0,a.Y)("span",null,l?Vr[l].label:""))),(0,a.Y)("div",{css:tn.conditions},(0,a.Y)("p",null,(0,u.__)("Conditions:","tutor")),(0,a.Y)("div",{css:tn.conditionControls},(0,a.Y)(x.A,{when:l==="multiple_choice"},(0,a.Y)(b.xI,{control:s.control,name:"questions.".concat(r,".question_settings.has_multiple_correct_answer"),render:function t(e){return(0,a.Y)(he.A,Rr({},e,{label:(0,u.__)("Multiple Correct Answer","tutor"),onChange:function t(e){if(Me(c,Ce.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Me(c,Ce.UPDATE))}if(!e){s.setValue("questions.".concat(r,".question_answers"),s.getValues("questions.".concat(r,".question_answers")).map((function(t){return Br(Br({},t),{},{is_correct:"0"})})))}}}))}})),(0,a.Y)(x.A,{when:l==="matching"},(0,a.Y)(b.xI,{control:s.control,name:"questions.".concat(r,".question_settings.is_image_matching"),render:function t(e){return(0,a.Y)(he.A,Rr({},e,{label:(0,u.__)("Image Matching","tutor"),onChange:function t(e){if(Me(c,Ce.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Me(c,Ce.UPDATE))}if((o===null||o===void 0?void 0:o.type)==="question"&&!e){i(null)}}}))}})),(0,a.Y)(b.xI,{control:s.control,name:"questions.".concat(r,".question_settings.answer_required"),render:function t(e){return(0,a.Y)(he.A,Rr({},e,{label:(0,u.__)("Answer Required","tutor"),onChange:function t(){if(Me(c,Ce.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Me(c,Ce.UPDATE))}}}))}}),(0,a.Y)(x.A,{when:$r.includes(l)},(0,a.Y)(b.xI,{control:s.control,name:"questions.".concat(r,".question_settings.randomize_question"),render:function t(e){return(0,a.Y)(he.A,Rr({},e,{label:(0,u.__)("Randomize Choice","tutor"),onChange:function t(){if(Me(c,Ce.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Me(c,Ce.UPDATE))}}}))}})),(0,a.Y)(b.xI,{control:s.control,name:"questions.".concat(r,".question_settings.question_mark"),rules:{min:0},render:function t(e){return(0,a.Y)(ut.A,Rr({},e,{label:(0,u.__)("Point For This Question","tutor"),type:"number",isInlineLabel:true,placeholder:"0",style:Jr,onChange:function t(){if(Me(c,Ce.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Me(c,Ce.UPDATE))}}}))}}),(0,a.Y)(b.xI,{control:s.control,name:"questions.".concat(r,".question_settings.show_question_mark"),render:function t(e){return(0,a.Y)(he.A,Rr({},e,{label:(0,u.__)("Display Points","tutor"),onChange:function t(){if(Me(c,Ce.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Me(c,Ce.UPDATE))}}}))}}),(0,a.Y)(Wt.A,{section:"Curriculum.Quiz.bottom_of_question_sidebar",namePrefix:"questions.".concat(r,"."),form:s}))))};const Zr=Xr;var tn={emptyQuestions:(0,a.AH)("padding:",O.YK[12]," ",O.YK[32]," ",O.YK[24]," ",O.YK[24],";",I.I.caption("medium"),";"+(true?"":0),true?"":0),questionTypeWrapper:(0,a.AH)(E.x.display.flex("column"),";padding:",O.YK[8]," ",O.YK[32]," ",O.YK[24]," ",O.YK[24],";gap:",O.YK[10],";border-bottom:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0),questionType:(0,a.AH)("display:flex;align-items:center;gap:",O.YK[10],";"+(true?"":0),true?"":0),conditions:(0,a.AH)("padding:",O.YK[8]," ",O.YK[32]," ",O.YK[24]," ",O.YK[24],";p{",I.I.body("medium"),";color:",O.I6.text.primary,";}"+(true?"":0),true?"":0),conditionControls:(0,a.AH)(E.x.display.flex("column"),";gap:",O.YK[16],";margin-top:",O.YK[16],";"+(true?"":0),true?"":0)};var en=r(1261);function rn(t,e){return sn(t)||un(t,e)||on(t,e)||nn()}function nn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function on(t,e){if(t){if("string"==typeof t)return an(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?an(t,e):void 0}}function an(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function un(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function sn(t){if(Array.isArray(t))return t}function ln(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var cn=function t(e){var r;var n=e.label,o=e.field,i=e.fieldState,l=e.disabled,c=e.loading,d=e.placeholder,p=e.helpText,h=e.onChange;var v=(r=o.value)!==null&&r!==void 0?r:"";var y=(0,s.useState)(false),g=rn(y,2),m=g[0],b=g[1];var _=(0,s.useState)(v),w=rn(_,2),A=w[0],Y=w[1];return(0,a.Y)("div",{css:gn.wrapper({hasValue:!!v&&!m})},(0,a.Y)(x.A,{when:m||v},(0,a.Y)("label",{css:gn.answerLabel},n)),(0,a.Y)("div",{css:gn.editorWrapper({isEdit:m})},(0,a.Y)("div",{css:gn.container({isEdit:m||!!v})},(0,a.Y)(x.A,{when:!v&&!m,fallback:(0,a.Y)(Ut.A,{field:o,fieldState:i,disabled:l,helpText:p,loading:c,readOnly:!m,onChange:h,placeholder:d,autoFocus:true,isMinimal:true})},(0,a.Y)("div",{css:gn.placeholder},d)),(0,a.Y)(x.A,{when:m},(0,a.Y)("div",{"data-action-buttons":true,css:gn.actionButtonWrapper({isEdit:m})},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){o.onChange(A);b(false)}},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{variant:"secondary",size:"small",onClick:function t(){var e;Y((e=o.value)!==null&&e!==void 0?e:"");b(false)},disabled:o.value===A},(0,u.__)("Ok","tutor")))),(0,a.Y)(x.A,{when:!m},(0,a.Y)("div",{onClick:function t(){if(!m&&!l){b(true)}},onKeyDown:function t(e){if((e.key==="Enter"||e.key===" ")&&!m){b(true)}},"data-overlay":true,tabIndex:0,role:"button"})))))};const dn=cn;var fn=true?{name:"3ix1vd",styles:"opacity:1"}:0;var pn=true?{name:"1dz94pb",styles:"resize:vertical"}:0;var hn=true?{name:"1peqg37",styles:"background-color:transparent"}:0;var vn=true?{name:"1hcx8jb",styles:"padding:0"}:0;var yn=true?{name:"11j83c5",styles:"padding-inline:0;max-height:unset;overflow:unset"}:0;var gn={wrapper:function t(e){var r=e.hasValue;return(0,a.AH)(E.x.display.flex("column")," gap:",O.YK[10],";border-radius:",O.Vq.card,";",r&&(0,a.AH)("background-color:",O.I6.color.success[30],";padding:",O.YK[12]," ",O.YK[24],";&:hover{background-color:",O.I6.color.success[40],";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},editorWrapper:function t(e){var r=e.isEdit;return(0,a.AH)("position:relative;max-height:400px;overflow-y:scroll;",r&&yn,";"+(true?"":0),true?"":0)},container:function t(e){var r=e.isEdit;return(0,a.AH)("position:relative;display:flex;flex-direction:column;gap:",O.YK[16],";min-height:48px;height:100%;width:100%;inset:0;border-radius:",O.Vq[6],";transition:background 0.15s ease-in-out;[data-overlay]{position:absolute;inset:0;opacity:1;:focus-visible{outline:2px solid ",O.I6.stroke.brand,";outline-offset:-2px;border-radius:",O.Vq.card,";}}& label{",I.I.caption()," margin-bottom:",O.YK[6],";color:",O.I6.text.title,";}",r&&vn," &:hover{background-color:",O.I6.background.white,";color:",O.I6.text.subdued,";cursor:text;",r&&hn,";[data-action-buttons]{opacity:1;}}"+(true?"":0),true?"":0)},inputContainer:function t(e){return(0,a.AH)("position:relative;display:flex;& textarea{",I.I.caption()," color:",O.I6.text.title,";height:auto;padding:",O.YK[8]," ",O.YK[12],";resize:none;",e&&pn,";}"+(true?"":0),true?"":0)},clearButton:(0,a.AH)("position:absolute;right:",O.YK[2],";top:",O.YK[2],";width:36px;height:36px;border-radius:",O.Vq[2],";background:transparent;button{padding:",O.YK[10],";}"+(true?"":0),true?"":0),placeholder:(0,a.AH)("padding:",O.YK[12]," ",O.YK[24],";",I.I.caption()," color:",O.I6.text.hints,";display:flex;align-items:center;height:100%;"+(true?"":0),true?"":0),actionButtonWrapper:function t(e){var r=e.isEdit;return(0,a.AH)("display:flex;justify-content:flex-end;gap:",O.YK[8],";opacity:0;transition:opacity 0.15s ease-in-out;",r&&fn,";"+(true?"":0),true?"":0)},answer:(0,a.AH)("padding:",O.YK[12]," ",O.YK[24],";border-radius:",O.Vq.card,";display:flex;flex-direction:column;gap:",O.YK[16],";background-color:",O.I6.background.success.fill30,";color:",O.I6.text.title,";transition:background 0.15s ease-in-out;&:hover{background-color:",O.I6.background.success.fill40,";}"+(true?"":0),true?"":0),answerLabel:(0,a.AH)(I.I.caption()," color:",O.I6.text.title,";"+(true?"":0),true?"":0),answerParagraph:(0,a.AH)("pre{",E.x.overflowXAuto,";}"+(true?"":0),true?"":0)};function mn(t,e){return xn(t)||An(t,e)||_n(t,e)||bn()}function bn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _n(t,e){if(t){if("string"==typeof t)return wn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wn(t,e):void 0}}function wn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function An(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function xn(t){if(Array.isArray(t))return t}function Yn(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var On=!!Gt.P.tutor_pro_url;var In=function t(e){var r;var n=e.label,o=e.field,i=e.fieldState,l=e.disabled,c=l===void 0?false:l,d=e.loading,p=e.placeholder,h=e.helpText,v=e.onChange;var y=(r=o.value)!==null&&r!==void 0?r:"";var g=(0,s.useState)(false),m=mn(g,2),b=m[0],_=m[1];var w=(0,s.useState)(y),A=mn(w,2),Y=A[0],O=A[1];var I=function t(){o.onChange(Y);_(false)};var E=function t(){_(false);O(o.value||"")};var k=function t(){if(!b&&!c){_(true)}};var S=function t(e){if((e.key==="Enter"||e.key===" ")&&!b){e.preventDefault();_(true)}};return(0,a.Y)("div",{css:Pn.editorWrapper({isEdit:b}),tabIndex:-1},(0,a.Y)("div",{css:Pn.container({isEdit:b,isDisabled:c})},(0,a.Y)(x.A,{when:!b&&(!On||!y),fallback:(0,a.Y)("div",{css:Pn.editorContainer,"aria-hidden":!b,inert:!b?"":undefined},(0,a.Y)(x.A,{when:On,fallback:(0,a.Y)(Sr.A,{field:o,fieldState:i,label:n,disabled:c,helpText:h,loading:d,readOnly:!b,onChange:v,placeholder:p,autoResize:true,maxHeight:400})},(0,a.Y)(Ut.A,{field:o,fieldState:i,label:n,disabled:c,helpText:h,loading:d,readOnly:!b,onChange:v,placeholder:p,min_height:100,max_height:400,autoFocus:true,toolbar1:"bold italic underline | bullist numlist | blockquote | alignleft aligncenter alignright | link unlink | ".concat(On?" codesample":""," | wp_adv"),toolbar2:"formatselect strikethrough hr wp_more forecolor pastetext removeformat charmap outdent indent undo redo wp_help fullscreen tutor_button undoRedoDropdown"})))},(0,a.Y)("div",{css:Pn.placeholder,dangerouslySetInnerHTML:{__html:y||p||""},tabIndex:-1,"aria-hidden":"true"})),(0,a.Y)(x.A,{when:b},(0,a.Y)("div",{"data-action-buttons":true,css:Pn.actionButtonWrapper({isEdit:b})},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:I},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{variant:"secondary",size:"small",onClick:E,disabled:y===Y},(0,u.__)("Ok","tutor")))),(0,a.Y)(x.A,{when:!b},(0,a.Y)("div",{onClick:k,onKeyDown:S,"data-overlay":true,tabIndex:0,role:"button","aria-label":y?(0,u.__)("Edit description","tutor"):(0,u.__)("Add description","tutor")}))))};const En=In;var kn=true?{name:"3ix1vd",styles:"opacity:1"}:0;var Sn=true?{name:"gv9h2n",styles:"padding-inline:0"}:0;var qn=true?{name:"11j83c5",styles:"padding-inline:0;max-height:unset;overflow:unset"}:0;var Pn={editorWrapper:function t(e){var r=e.isEdit;return(0,a.AH)("position:relative;max-height:400px;overflow-y:auto;border-radius:",O.Vq[6],";",r&&qn,";"+(true?"":0),true?"":0)},container:function t(e){var r=e.isEdit,n=e.isDisabled;return(0,a.AH)("position:relative;display:flex;flex-direction:column;gap:",O.YK[16],";min-height:64px;height:100%;width:100%;inset:0;padding-inline:",O.YK[8]," ",O.YK[16],";border-radius:",O.Vq[6],";transition:background-color 0.15s ease-in-out;[data-overlay]{position:absolute;inset:0;opacity:1;cursor:pointer;&:focus-visible{outline:2px solid ",O.I6.stroke.brand,";outline-offset:-2px;border-radius:",O.Vq.card,";}}& label{",I.I.caption(),";margin-bottom:",O.YK[6],";color:",O.I6.text.title,";}",!n&&(0,a.AH)("&:hover,&:has([data-overlay]:focus-visible){background-color:",!r&&O.I6.background.white,";color:",O.I6.text.subdued,";[data-action-buttons]{opacity:1;}}"+(true?"":0),true?"":0)," ",r&&Sn,";"+(true?"":0),true?"":0)},editorContainer:true?{name:"pw7jst",styles:"position:relative;width:100%"}:0,placeholder:(0,a.AH)(I.I.caption()," color:",O.I6.text.hints,";height:100%;inset:0;padding-block:",O.YK[8],";overflow-x:hidden;pointer-events:none;"+(true?"":0),true?"":0),actionButtonWrapper:function t(e){var r=e.isEdit;return(0,a.AH)("display:flex;justify-content:flex-end;gap:",O.YK[8],";opacity:0;transition:opacity 0.15s ease-in-out;",r&&kn,";"+(true?"":0),true?"":0)}};var jn=r(34419);var Cn=r(41594);function Tn(t){"@babel/helpers - typeof";return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tn(t)}function Dn(){return Dn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dn.apply(null,arguments)}function Ln(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function zn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ln(Object(r),!0).forEach((function(e){Kn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ln(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Kn(t,e,r){return(e=Hn(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hn(t){var e=Nn(t,"string");return"symbol"==Tn(e)?e:e+""}function Nn(t,e){if("object"!=Tn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Un(t,e){return Fn(t)||Mn(t,e)||Wn(t,e)||Rn()}function Rn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wn(t,e){if(t){if("string"==typeof t)return Bn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bn(t,e):void 0}}function Bn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Mn(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Fn(t){if(Array.isArray(t))return t}function Gn(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Qn=function t(e){var r;var n=e.maxLimit,o=e.field,i=e.fieldState,l=e.disabled,c=e.readOnly,d=e.loading,p=e.placeholder,v=e.helpText,y=e.onChange,g=e.onKeyDown,m=e.isHidden,b=e.isSecondary,_=b===void 0?false:b,w=e.removeBorder,A=e.dataAttribute,Y=e.isInlineLabel,O=Y===void 0?false:Y,I=e.style,E=e.selectOnFocus,k=E===void 0?false:E,S=e.size,q=S===void 0?"regular":S,P=e.isEdit,j=e.onToggleEdit;var C=(r=o.value)!==null&&r!==void 0?r:"";var T=(0,s.useRef)(null);var D=(0,jn.O9)(P);var L=(0,s.useState)(false),z=Un(L,2),K=z[0],H=z[1];var N=D?P:K;var U=(0,s.useState)(C),R=Un(U,2),W=R[0],B=R[1];var M=undefined;if(n){M={maxLimit:n,inputCharacter:C.toString().length}}var F=zn({},(0,jn.O9)(A)&&Kn({},A,true));(0,s.useEffect)((function(){if(N&&T.current){T.current.focus();B(C)}}),[N]);var G=function t(e){if(!D){H(e)}j===null||j===void 0||j(e)};var Q=function t(){G(false)};var V=function t(){o.onChange(W);G(false)};return(0,a.Y)("div",{role:"button",css:Jn.container({isEdit:N,isDisabled:l||false,size:q}),"aria-label":"Question title field"},(0,a.Y)(x.A,{when:!N},(0,a.Y)("div",{css:Jn.placeholder({size:q}),onClick:function t(){return!l&&G(true)},onKeyDown:function t(e){if(e.key==="Enter"||e.key===" "){G(true)}}},o.value||p)),(0,a.Y)(x.A,{when:N},(0,a.Y)(vt.A,{field:o,fieldState:i,disabled:l,readOnly:c,loading:d,helpText:v,isHidden:m,characterCount:M,isSecondary:_,removeBorder:w,isInlineLabel:O,inputStyle:I},(function(t){return(0,a.Y)(Cn.Fragment,null,(0,a.Y)("div",{css:Jn.inputContainer({isClearable:false,size:q})},(0,a.Y)("input",Dn({},o,t,F,{className:"tutor-input-field",type:"text",ref:T,value:C,placeholder:p,onChange:function t(e){var r=e.target.value;o.onChange(r);if(y){y(r)}},onKeyDown:function t(e){if(e.key==="Enter"){Q()}if(e.key==="Escape"){V()}g===null||g===void 0||g(e.key)},onFocus:function t(e){if(k){e.target.select()}},autoComplete:"off"}))))}))),(0,a.Y)("div",{"data-action-buttons":true,css:Jn.actionButtonWrapper({isEdit:N})},(0,a.Y)(x.A,{when:N,fallback:(0,a.Y)(f.A,{buttonCss:Jn.actionButton,variant:"text",size:"small",onClick:function t(){return G(true)},"aria-label":(0,u.__)("Edit question title","tutor")},(0,a.Y)(h.A,{name:"edit",height:24,width:24}))},(0,a.Y)(Cn.Fragment,null,(0,a.Y)(x.A,{when:o.value!==W&&o.value},(0,a.Y)(f.A,{buttonCss:Jn.actionButton,variant:"text",size:"small",onClick:Q,disabled:o.value===W,"aria-label":(0,u.__)("Save question title","tutor")},(0,a.Y)(h.A,{name:"checkMark",height:24,width:24}))),(0,a.Y)(f.A,{buttonCss:Jn.actionButton,variant:"text",size:"small",onClick:V,"aria-label":(0,u.__)("Cancel question title","tutor")},(0,a.Y)(h.A,{name:"lineCross",height:24,width:24}))))))};const Vn=Qn;var $n=true?{name:"3ix1vd",styles:"opacity:1"}:0;var Jn={container:function t(e){var r=e.isEdit,n=e.isDisabled,o=e.size;return(0,a.AH)("position:relative;display:grid;grid-template-columns:1fr auto;align-items:center;gap:",O.YK[8],";min-height:50px;height:100%;width:100%;cursor:text;padding-inline:",O.YK[8]," ",O.YK[16],";padding-block:",O.YK[8],";border-radius:",O.Vq[6],";transition:box-shadow 0.15s ease-in-out;border:1px solid transparent;",o==="small"&&(0,a.AH)("min-height:40px;padding-inline:",O.YK[8]," ",O.YK[12],";gap:",O.YK[4],";border-radius:",O.Vq[4],";height:100%;width:100%;padding-block:0;"+(true?"":0),true?"":0)," ",!n&&(0,a.AH)("&:hover{background-color:",O.I6.background.white,";color:",O.I6.text.subdued,";[data-action-buttons]{opacity:",!n?1:0,";}}&:focus-within{",r&&E.x.inputFocus," background-color:",O.I6.background.white,";color:",O.I6.text.subdued,";[data-action-buttons]{opacity:1;}}"+(true?"":0),true?"":0)," ",r&&(0,a.AH)("background-color:",O.I6.background.white,";color:",O.I6.text.subdued,";padding-inline:",o==="small"&&O.YK[16],";padding-block:",o==="small"?0:O.YK[4],";border:1px solid ",O.I6.stroke["default"],";cursor:default;"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-action-buttons]{opacity:1;}}"+(true?"":0),true?"":0)},inputContainer:function t(e){var r=e.isClearable,n=e.size;return(0,a.AH)("position:relative;display:flex;transition:background 0.15s ease-in-out;& input{",I.I.heading6()," color:",O.I6.text.primary,";border:none;background:none;padding:0;",r&&"padding-right: ".concat(O.YK[36],";"),";width:100%;",n==="small"&&(0,a.AH)(I.I.caption(),";"+(true?"":0),true?"":0),";&.tutor-input-field{border:none;box-shadow:none;padding-inline:0;&:focus{border:none;box-shadow:none;outline:none;}}}"+(true?"":0),true?"":0)},clearButton:(0,a.AH)("position:absolute;right:",O.YK[2],";top:",O.YK[2],";width:36px;height:36px;border-radius:",O.Vq[2],";background:transparent;button{padding:",O.YK[10],";}"+(true?"":0),true?"":0),placeholder:function t(e){var r=e.size;return(0,a.AH)(I.I.heading6()," color:",O.I6.text.hints,";border-radius:",O.Vq[6],";",r==="small"&&(0,a.AH)(I.I.caption()," padding:",O.YK[4]," ",O.YK[8],";border-radius:",O.Vq[4],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},actionButtonWrapper:function t(e){var r=e.isEdit;return(0,a.AH)("display:flex;align-items:center;gap:",O.YK[8],";opacity:0;transition:opacity 0.15s ease-in-out;",r&&$n,";"+(true?"":0),true?"":0)},actionButton:(0,a.AH)("padding:0;color:",O.I6.icon.subdued,";"+(true?"":0),true?"":0)};function Xn(t){"@babel/helpers - typeof";return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xn(t)}function Zn(){return Zn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zn.apply(null,arguments)}function to(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */to=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(P([])));A&&A!==r&&n.call(A,a)&&(_=A);var x=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==Xn(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Xn(e)+" is not iterable")}return m.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(x),l(x,s,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:P(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function eo(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function ro(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){eo(i,n,o,a,u,"next",t)}function u(t){eo(i,n,o,a,u,"throw",t)}a(void 0)}))}}function no(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function oo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?no(Object(r),!0).forEach((function(e){io(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):no(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function io(t,e,r){return(e=ao(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ao(t){var e=uo(t,"string");return"symbol"==Xn(e)?e:e+""}function uo(t,e){if("object"!=Xn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function so(t,e){return ho(t)||po(t,e)||co(t,e)||lo()}function lo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function co(t,e){if(t){if("string"==typeof t)return fo(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fo(t,e):void 0}}function fo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function po(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function ho(t){if(Array.isArray(t))return t}function vo(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var yo=function t(e){var r,n,o,i;var l=e.field;var c=Hr(),d=c.activeQuestionId,p=c.validationError,v=c.setValidationError;var y=(r=l.value)!==null&&r!==void 0?r:{_data_status:Ce.NEW,is_saved:false,answer_id:(0,k.Ak)(),answer_title:"",belongs_question_id:d,belongs_question_type:"fill_in_the_blank",answer_two_gap_match:"",answer_view_format:"text",answer_order:0,is_correct:"0"};var g=(0,s.useRef)(null);var m=(n=y.answer_two_gap_match)===null||n===void 0?void 0:n.split("|");var b=(0,s.useState)(!y.answer_title||!y.answer_two_gap_match),_=so(b,2),w=_[0],A=_[1];var Y=(0,s.useState)(y),O=so(Y,2),I=O[0],S=O[1];var q=((o=y.answer_title)===null||o===void 0||(o=o.match(/{dash}/g))===null||o===void 0?void 0:o.length)||0;var P=((i=y.answer_two_gap_match)===null||i===void 0?void 0:i.split("|").length)||0;var j=!!(y.answer_title&&y.answer_two_gap_match&&q!==P);(0,s.useEffect)((function(){if((0,jn.O9)(g.current)&&w){g.current.focus()}}),[w]);return(0,a.Y)("div",{css:mo.option},(0,a.Y)("div",{css:mo.optionLabel({isEditing:w})},(0,a.Y)("div",{css:mo.optionHeader},(0,a.Y)("div",{css:mo.optionTitle},(0,u.__)("Fill in the blanks","tutor")),(0,a.Y)(x.A,{when:y.is_saved&&!w},(0,a.Y)("div",{css:mo.optionActions},(0,a.Y)(fe.A,{content:(0,u.__)("Edit","tutor")},(0,a.Y)("button",{type:"button",css:E.x.actionButton,"data-edit-button":true,onClick:function t(e){e.stopPropagation();A(true)},"data-visually-hidden":true},(0,a.Y)(h.A,{name:"edit",width:24,height:24})))))),(0,a.Y)("div",{css:mo.optionBody},(0,a.Y)(x.A,{when:!y.is_saved||w,fallback:(0,a.Y)("div",{css:mo.placeholderWrapper},(0,a.Y)("div",{css:mo.optionPlaceholder({isTitle:!!y.answer_title})},y.answer_title?y.answer_title.replace(/{dash}/g,"_____"):(0,u.__)("Question title...","tutor")),(0,a.Y)("div",{css:mo.optionPlaceholder({isCorrectAnswer:m===null||m===void 0?void 0:m.length})},m&&m.length>0?(0,a.Y)(ct.A,{each:m},(function(t,e){return(0,a.Y)(s.Fragment,{key:e},t,(0,a.Y)(x.A,{when:e<(m?m.length-1:0)},(0,a.Y)("span",null,"|")))})):(0,u.__)("Correct Answer(s)...","tutor")))},(0,a.Y)("div",{css:mo.optionInputWrapper},(0,a.Y)("div",{css:mo.inputWithHints},(0,a.Y)("input",Zn({},l,{ref:g,type:"text",placeholder:(0,u.__)("Question title...","tutor"),value:y.answer_title,onClick:function t(e){e.stopPropagation()},onChange:function t(e){l.onChange(oo(oo(oo({},y),Me(y._data_status,Ce.UPDATE)&&{_data_status:Me(y._data_status,Ce.UPDATE)}),{},{answer_title:e.target.value}))},onKeyDown:function(){var t=ro(to().mark((function t(e){return to().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&y.answer_title){l.onChange(oo(oo({},y),Me(y._data_status,Ce.UPDATE)&&{_data_status:Me(y._data_status,Ce.UPDATE)}));A(false)}case 2:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.Y)("div",{css:mo.inputHints},(0,a.Y)(h.A,{name:"info",height:20,width:20}),(0,a.Y)("p",null,(0,u.__)("Please make sure to use the variable {dash} in your question title to show the blanks in your question. You can use multiple {dash} variables in one question.","tutor")))),(0,a.Y)("div",{css:mo.inputWithHints},(0,a.Y)("input",Zn({},l,{type:"text",placeholder:(0,u.__)("Correct Answer(s)..."),value:m===null||m===void 0?void 0:m.join("|"),onClick:function t(e){e.stopPropagation()},onChange:function t(e){l.onChange(oo(oo(oo({},y),Me(y._data_status,Ce.UPDATE)&&{_data_status:Me(y._data_status,Ce.UPDATE)}),{},{answer_two_gap_match:e.target.value}))},onKeyDown:function(){var t=ro(to().mark((function t(e){return to().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&y.answer_two_gap_match){l.onChange(oo(oo({},y),Me(y._data_status,Ce.UPDATE)&&{_data_status:Me(y._data_status,Ce.UPDATE),is_saved:true}));if((p===null||p===void 0?void 0:p.type)==="save_option"){v(null)}A(false)}case 1:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.Y)(x.A,{when:j},(0,a.Y)("div",{css:mo.errorMessage},(0,a.Y)(h.A,{name:"info",height:20,width:20}),(0,a.Y)("p",null,(0,u.__)("Match the number of answers to the number of blanks {dash} in your question.","tutor")))),(0,a.Y)("div",{css:mo.inputHints},(0,a.Y)(h.A,{name:"info",height:20,width:20}),(0,a.Y)("p",null,(0,u.__)("Separate multiple answers by a vertical bar |. 1 answer per {dash} variable is defined in the question. Example: Apple | Banana | Orange","tutor")))),(0,a.Y)("div",{css:mo.optionInputButtons},(0,a.Y)(x.A,{when:y.is_saved},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(e){e.stopPropagation();A(false);l.onChange(I)}},(0,u.__)("Cancel","tutor"))),(0,a.Y)(f.A,{variant:"secondary",size:"small",onClick:function(){var t=ro(to().mark((function t(e){return to().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if(!j){r.next=3;break}return r.abrupt("return");case 3:l.onChange(oo(oo({},y),Me(y._data_status,Ce.UPDATE)&&{_data_status:Me(y._data_status,Ce.UPDATE),is_saved:true}));S(oo(oo({},y),Me(y._data_status,Ce.UPDATE)&&{_data_status:Me(y._data_status,Ce.UPDATE),is_saved:true}));if((p===null||p===void 0?void 0:p.type)==="save_option"){v(null)}A(false);case 7:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),disabled:!y.answer_title||!y.answer_two_gap_match||j},(0,u.__)("Ok","tutor"))))))))};const go=yo;var mo={option:(0,a.AH)(E.x.display.flex(),";",I.I.caption("medium"),";align-items:center;color:",O.I6.text.subdued,";gap:",O.YK[10],";align-items:center;"+(true?"":0),true?"":0),optionLabel:function t(e){var r=e.isEditing;return(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[12],";width:100%;border-radius:",O.Vq.card,";padding:",O.YK[12]," ",O.YK[16],";transition:box-shadow 0.15s ease-in-out;background-color:",O.I6.background.white,";[data-visually-hidden]{opacity:0;}&:hover{box-shadow:0 0 0 1px ",O.I6.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.AH)("background-color:",O.I6.background.white,";box-shadow:0 0 0 1px ",O.I6.stroke.brand,";&:hover{box-shadow:0 0 0 1px ",O.I6.stroke.brand,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionHeader:true?{name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"}:0,optionTitle:(0,a.AH)(I.I.caption("medium"),";color:",O.I6.text.subdued,";"+(true?"":0),true?"":0),optionActions:(0,a.AH)("display:flex;gap:",O.YK[8],";align-items:center;"+(true?"":0),true?"":0),actionButton:(0,a.AH)(E.x.resetButton,";color:",O.I6.icon["default"],";display:flex;cursor:pointer;"+(true?"":0),true?"":0),optionBody:true?{name:"zjik7",styles:"display:flex"}:0,optionInputWrapper:(0,a.AH)(E.x.optionInputWrapper,";gap:",O.YK[16],";"+(true?"":0),true?"":0),placeholderWrapper:true?{name:"1fttcpj",styles:"display:flex;flex-direction:column"}:0,optionPlaceholder:function t(e){var r=e.isTitle,n=e.isCorrectAnswer;return(0,a.AH)(I.I.body(),";color:",O.I6.text.subdued,";padding-block:",O.YK[4],";display:flex;align-items:center;gap:",O.YK[4],";",r&&(0,a.AH)("color:",O.I6.text.hints,";"+(true?"":0),true?"":0)," ",n&&(0,a.AH)("color:",O.I6.text.success,";span{color:",O.I6.stroke.border,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},inputWithHints:(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[8],";"+(true?"":0),true?"":0),inputHints:(0,a.AH)("display:flex;gap:",O.YK[4],";",I.I.small(),";color:",O.I6.text.hints,";align-items:flex-start;svg{flex-shrink:0;}"+(true?"":0),true?"":0),errorMessage:(0,a.AH)("display:flex;gap:",O.YK[4],";",I.I.small(),";color:",O.I6.text.error,";align-items:flex-start;color:",O.I6.text.error,";svg{flex-shrink:0;color:",O.I6.icon.error,";}"+(true?"":0),true?"":0),optionInputButtons:(0,a.AH)("display:flex;justify-content:flex-end;gap:",O.YK[8],";"+(true?"":0),true?"":0)};var bo=function t(){var e=(0,b.xW)();var r=Hr(),n=r.activeQuestionIndex;var o=(0,b.jz)({control:e.control,name:"questions.".concat(n,".question_answers")}),i=o.fields;return(0,a.Y)("div",{css:wo.optionWrapper},(0,a.Y)(b.xI,{key:i.length?JSON.stringify(i[0]):"",control:e.control,name:"questions.".concat(n,".question_answers.0"),render:function t(e){return(0,a.Y)(go,e)}}))};const _o=bo;var wo={optionWrapper:(0,a.AH)(E.x.display.flex("column"),";padding-left:",O.YK[40],";"+(true?"":0),true?"":0)};var Ao=r(12262);var xo=r(96755);var Yo=r(93490);function Oo(t){"@babel/helpers - typeof";return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oo(t)}function Io(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Io=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(P([])));A&&A!==r&&n.call(A,a)&&(_=A);var x=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==Oo(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Oo(e)+" is not iterable")}return m.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(x),l(x,s,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:P(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function Eo(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function ko(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Eo(i,n,o,a,u,"next",t)}function u(t){Eo(i,n,o,a,u,"throw",t)}a(void 0)}))}}function So(){return So=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},So.apply(null,arguments)}function qo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Po(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qo(Object(r),!0).forEach((function(e){jo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jo(t,e,r){return(e=Co(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Co(t){var e=To(t,"string");return"symbol"==Oo(e)?e:e+""}function To(t,e){if("object"!=Oo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Do(t,e){return No(t)||Ho(t,e)||zo(t,e)||Lo()}function Lo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zo(t,e){if(t){if("string"==typeof t)return Ko(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ko(t,e):void 0}}function Ko(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Ho(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function No(t){if(Array.isArray(t))return t}function Uo(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Ro=!!Gt.P.tutor_pro_url;var Wo=function t(e){var r;var n=e.index,o=e.onDuplicateOption,l=e.onRemoveOption,c=e.field,d=e.isOverlay,p=d===void 0?false:d;var v=Hr(),g=v.activeQuestionId,m=v.validationError,b=v.setValidationError;var w=(r=c.value)!==null&&r!==void 0?r:{answer_id:(0,k.Ak)(),answer_title:"",is_correct:"0",belongs_question_id:g,belongs_question_type:"image_answering"};var A=(0,s.useRef)(null);var Y=(0,s.useState)(!w.answer_title&&!w.image_id&&!w.image_url),I=Do(Y,2),S=I[0],q=I[1];var P=(0,s.useState)(w),j=Do(P,2),C=j[0],T=j[1];var D=(0,i.gl)({id:c.value.answer_id||0,animateLayoutChanges:Yo.J}),L=D.attributes,z=D.listeners,K=D.setNodeRef,H=D.transform,N=D.transition,U=D.isDragging;var R=(0,xo.A)({options:{type:"image"},onChange:function t(e){if(e&&!Array.isArray(e)){var r=e.id,n=e.url;c.onChange(Po(Po(Po({},w),Me(w._data_status,Ce.UPDATE)&&{_data_status:Me(w._data_status,Ce.UPDATE)}),{},{image_id:r,image_url:n}))}},initialFiles:c.value.image_id?{id:Number(w.image_id),url:w.image_url||"",title:w.image_url||""}:null}),W=R.openMediaLibrary,B=R.resetFiles;var M={transform:y.Ks.Transform.toString(H),transition:N,opacity:U?.3:undefined};var F=function t(){c.onChange(Po(Po(Po({},w),Me(w._data_status,Ce.UPDATE)&&{_data_status:Me(w._data_status,Ce.UPDATE)}),{},{image_id:"",image_url:""}));B()};(0,s.useEffect)((function(){if((0,jn.O9)(A.current)&&S){A.current.focus()}}),[S]);return(0,a.Y)("div",So({},L,{css:Mo.option,ref:K,style:M,tabIndex:-1}),(0,a.Y)("div",{css:Mo.optionLabel({isEditing:S,isOverlay:p,isDragging:U}),onClick:function t(){q(true)},onKeyDown:function t(e){e.stopPropagation();if(e.key==="Enter"||e.key===" "){q(true)}}},(0,a.Y)("div",{css:Mo.optionHeader},(0,a.Y)("div",{css:E.x.optionCounter({isEditing:S})},String.fromCharCode(65+n)),(0,a.Y)(x.A,{when:!S&&w.is_saved},(0,a.Y)("button",So({},z,{type:"button",css:E.x.optionDragButton({isOverlay:p}),"data-visually-hidden":true}),(0,a.Y)(h.A,{name:"dragVertical",height:24,width:24})),(0,a.Y)("div",{css:Mo.optionActions,"data-visually-hidden":true},(0,a.Y)(fe.A,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:E.x.actionButton,onClick:function t(e){e.stopPropagation();q(true)}},(0,a.Y)(h.A,{name:"edit",width:24,height:24}))),(0,a.Y)(fe.A,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.Y)(x.A,{when:!Ro,fallback:(0,a.Y)("button",{type:"button",css:E.x.actionButton,onClick:function t(e){e.stopPropagation();o(w)}},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))},(0,a.Y)(_.A,{size:"tiny"},(0,a.Y)("button",{disabled:true,type:"button",css:E.x.actionButton,onClick:k.lQ},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))))),(0,a.Y)(fe.A,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:E.x.actionButton,onClick:function t(e){e.stopPropagation();l()}},(0,a.Y)(h.A,{name:"delete",width:24,height:24})))))),(0,a.Y)("div",{css:Mo.optionBody},(0,a.Y)(x.A,{when:S,fallback:(0,a.Y)("div",{css:Mo.placeholderWrapper},(0,a.Y)(x.A,{when:w.image_url,fallback:(0,a.Y)("div",{css:Mo.imagePlaceholder},(0,a.Y)(h.A,{name:"imagePreview",height:48,width:48}))},(function(){return(0,a.Y)("div",{css:Mo.imagePlaceholder},(0,a.Y)("img",{src:w.image_url,alt:w.image_url}))})),(0,a.Y)("div",{css:Mo.optionPlaceholder},w.answer_title||(0,u.__)("Write answer option...","tutor")))},(0,a.Y)("div",{css:E.x.optionInputWrapper},(0,a.Y)(Ao.A,{value:{id:Number(w.image_id),url:w.image_url||"",title:w.image_url||""},buttonText:(0,u.__)("Upload Image","tutor"),infoText:(0,u.__)("Standard Size: 700x430 pixels","tutor"),uploadHandler:W,clearHandler:F,emptyImageCss:Mo.emptyImageInput,previewImageCss:Mo.previewImageInput}),(0,a.Y)("div",{css:Mo.inputWithHints},(0,a.Y)("input",So({},c,{ref:A,type:"text",placeholder:(0,u.__)("Input answer here","tutor"),value:w.answer_title,onClick:function t(e){e.stopPropagation()},onChange:function t(e){c.onChange(Po(Po(Po({},w),Me(w._data_status,Ce.UPDATE)&&{_data_status:Me(w._data_status,Ce.UPDATE)}),{},{answer_title:e.target.value}))},onKeyDown:function(){var t=ko(Io().mark((function t(e){return Io().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&w.answer_title){c.onChange(Po(Po({},w),Me(w._data_status,Ce.UPDATE)&&{_data_status:Me(w._data_status,Ce.UPDATE),is_saved:true}));if((m===null||m===void 0?void 0:m.type)==="save_option"){b(null)}q(false)}case 2:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.Y)("div",{css:Mo.inputHints},(0,a.Y)(h.A,{name:"info",height:20,width:20}),(0,a.Y)("p",null,(0,u.__)("Students need to type their answers exactly as you write them here. Use ","tutor"),(0,a.Y)("span",{css:(0,a.AH)({fontWeight:O.Wy.semiBold},true?"":0,true?"":0)},(0,u.__)("small caps","tutor")),(0,u.__)(" when writing the answer.","tutor")))),(0,a.Y)("div",{css:Mo.optionInputButtons},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(e){e.stopPropagation();q(false);c.onChange(C);if(!w.is_saved){l();if((m===null||m===void 0?void 0:m.type)==="save_option"){b(null)}}}},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{variant:"secondary",size:"small",onClick:function(){var t=ko(Io().mark((function t(e){return Io().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();c.onChange(Po(Po(Po({},w),Me(w._data_status,Ce.UPDATE)&&{_data_status:Me(w._data_status,Ce.UPDATE)}),{},{is_saved:true}));T(Po(Po(Po({},w),Me(w._data_status,Ce.UPDATE)&&{_data_status:Me(w._data_status,Ce.UPDATE)}),{},{is_saved:true}));if((m===null||m===void 0?void 0:m.type)==="save_option"){b(null)}q(false);case 5:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),disabled:!w.answer_title||!w.image_id},(0,u.__)("Ok","tutor"))))))))};const Bo=Wo;var Mo={option:(0,a.AH)(E.x.display.flex(),";",I.I.caption("medium"),";align-items:center;color:",O.I6.text.subdued,";gap:",O.YK[10],";align-items:center;"+(true?"":0),true?"":0),optionLabel:function t(e){var r=e.isEditing,n=e.isOverlay,o=e.isDragging;return(0,a.AH)(E.x.display.flex("column")," gap:",O.YK[20],";width:100%;border-radius:",O.Vq.card,";padding:",O.YK[12]," ",O.YK[16],";background-color:",O.I6.background.white,";[data-visually-hidden]{opacity:0;}&:hover{outline:1px solid ",O.I6.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.AH)("background-color:",O.I6.background.white,";outline:1px solid ",O.I6.stroke.brand,";&:hover{outline:1px solid ",O.I6.stroke.brand,";}"+(true?"":0),true?"":0)," ",o&&(0,a.AH)("background-color:",O.I6.stroke.hover,";"+(true?"":0),true?"":0)," ",n&&(0,a.AH)("box-shadow:",O.r7.drag,";"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},optionHeader:true?{name:"ilv1kv",styles:"display:grid;grid-template-columns:1fr auto 1fr;align-items:center;:focus-within{[data-visually-hidden]{opacity:1;}}"}:0,optionActions:(0,a.AH)(E.x.display.flex()," gap:",O.YK[8],";place-self:center end;"+(true?"":0),true?"":0),optionBody:(0,a.AH)(E.x.display.flex(),";"+(true?"":0),true?"":0),placeholderWrapper:(0,a.AH)(E.x.display.flex("column")," gap:",O.YK[12],";width:100%;"+(true?"":0),true?"":0),imagePlaceholder:(0,a.AH)(E.x.flexCenter(),";height:210px;width:100%;background-color:",O.I6.background["default"],";border-radius:",O.Vq.card,";overflow:hidden;svg{color:",O.I6.icon.hints,";}img{width:100%;height:100%;object-fit:cover;object-position:center;}"+(true?"":0),true?"":0),emptyImageInput:(0,a.AH)("background-color:",O.I6.background["default"],";height:210px;"+(true?"":0),true?"":0),previewImageInput:true?{name:"be4gwm",styles:"height:210px"}:0,optionPlaceholder:(0,a.AH)(I.I.body(),";color:",O.I6.text.subdued,";padding-block:",O.YK[4],";"+(true?"":0),true?"":0),inputWithHints:(0,a.AH)(E.x.display.flex("column")," gap:",O.YK[8],";"+(true?"":0),true?"":0),inputHints:(0,a.AH)(E.x.display.flex()," gap:",O.YK[4],";",I.I.small(),";color:",O.I6.text.hints,";align-items:flex-start;svg{flex-shrink:0;}"+(true?"":0),true?"":0),optionInputButtons:(0,a.AH)(E.x.display.flex()," justify-content:flex-end;gap:",O.YK[8],";"+(true?"":0),true?"":0)};function Fo(t){"@babel/helpers - typeof";return Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fo(t)}function Go(){return Go=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Go.apply(null,arguments)}function Qo(t){return Jo(t)||$o(t)||ii(t)||Vo()}function Vo(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $o(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Jo(t){if(Array.isArray(t))return ai(t)}function Xo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Zo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xo(Object(r),!0).forEach((function(e){ti(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ti(t,e,r){return(e=ei(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ei(t){var e=ri(t,"string");return"symbol"==Fo(e)?e:e+""}function ri(t,e){if("object"!=Fo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function ni(t,e){return si(t)||ui(t,e)||ii(t,e)||oi()}function oi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ii(t,e){if(t){if("string"==typeof t)return ai(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ai(t,e):void 0}}function ai(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ui(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function si(t){if(Array.isArray(t))return t}var li=function t(){var e=(0,s.useState)(null),r=ni(e,2),l=r[0],d=r[1];var p=(0,b.xW)();var v=Hr(),y=v.activeQuestionIndex,g=v.activeQuestionId,m=v.validationError,_=v.setValidationError;var w=(0,b.jz)({control:p.control,name:"questions.".concat(y,".question_answers")}),A=w.fields,Y=w.append,O=w.insert,I=w.remove,E=w.move;var S=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:10}}),(0,n.MS)(n.uN,{coordinateGetter:i.JR}));var q=(0,s.useMemo)((function(){if(!l){return null}return A.find((function(t){return t.answer_id===l}))}),[l,A]);var P=function t(){Y({_data_status:Ce.NEW,is_saved:false,answer_id:(0,k.Ak)(),answer_title:"",is_correct:"0",belongs_question_id:g,belongs_question_type:"image_answering",answer_order:A.length,answer_two_gap_match:"",answer_view_format:""},{shouldFocus:true,focusName:"questions.".concat(y,".question_answers.").concat(A.length,".answer_title")});if((m===null||m===void 0?void 0:m.type)==="add_option"){_(null)}};var j=function t(e,r){var n=Zo(Zo({},r),{},{_data_status:Ce.NEW,is_saved:true,answer_id:(0,k.Ak)(),answer_title:"".concat(r.answer_title," (copy)"),is_correct:"0"});var o=e+1;O(o,n)};var C=function t(e,r){I(e);if(r._data_status!==Ce.NEW){p.setValue("deleted_answer_ids",[].concat(Qo(p.getValues("deleted_answer_ids")),[r.answer_id]))}};return(0,a.Y)("div",{css:di.optionWrapper},(0,a.Y)(n.Mp,{sensors:S,collisionDetection:n.fp,modifiers:[o.Q_],onDragStart:function t(e){d(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var o=A.findIndex((function(t){return t.answer_id===r.id}));var i=A.findIndex((function(t){return t.answer_id===n.id}));E(o,i)}d(null)}},(0,a.Y)(i.gB,{items:A.map((function(t){return Zo(Zo({},t),{},{id:t.answer_id})})),strategy:i._G},(0,a.Y)(ct.A,{each:A},(function(t,e){return(0,a.Y)(b.xI,{key:"".concat(t.answer_id,"-").concat(e),control:p.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function r(n){return(0,a.Y)(Bo,Go({},n,{onDuplicateOption:function t(r){return j(e,r)},onRemoveOption:function r(){return C(e,t)},index:e}))}})}))),(0,c.createPortal)((0,a.Y)(n.Hd,null,(0,a.Y)(x.A,{when:q},(function(t){var e=A.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.Y)(b.xI,{key:l,control:p.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function t(r){return(0,a.Y)(Bo,Go({},r,{onDuplicateOption:k.lQ,onRemoveOption:k.lQ,index:e,isOverlay:true}))}})}))),document.body)),(0,a.Y)("div",null,(0,a.Y)(f.A,{variant:"text",onClick:P,buttonContentCss:di.addOptionButton,icon:(0,a.Y)(h.A,{name:"plus",height:24,width:24})},(0,u.__)("Add Option","tutor"))))};const ci=li;var di={optionWrapper:(0,a.AH)(E.x.display.flex("column"),";gap:",O.YK[12],";padding-left:",O.YK[40],";",O.EA.smallMobile,"{padding-left:",O.YK[8],";}"+(true?"":0),true?"":0),addOptionButton:(0,a.AH)("color:",O.I6.text.brand,";svg{color:",O.I6.icon.brand,";}"+(true?"":0),true?"":0)};function fi(t){"@babel/helpers - typeof";return fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fi(t)}function pi(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */pi=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(P([])));A&&A!==r&&n.call(A,a)&&(_=A);var x=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==fi(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(fi(e)+" is not iterable")}return m.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(x),l(x,s,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:P(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function hi(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function vi(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){hi(i,n,o,a,u,"next",t)}function u(t){hi(i,n,o,a,u,"throw",t)}a(void 0)}))}}function yi(){return yi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yi.apply(null,arguments)}function gi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function mi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gi(Object(r),!0).forEach((function(e){bi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bi(t,e,r){return(e=_i(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _i(t){var e=wi(t,"string");return"symbol"==fi(e)?e:e+""}function wi(t,e){if("object"!=fi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Ai(t,e){return Ei(t)||Ii(t,e)||Yi(t,e)||xi()}function xi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yi(t,e){if(t){if("string"==typeof t)return Oi(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Oi(t,e):void 0}}function Oi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Ii(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Ei(t){if(Array.isArray(t))return t}function ki(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Si=!!Gt.P.tutor_pro_url;var qi=function t(e){var r,n;var o=e.index,l=e.onDuplicateOption,c=e.onRemoveOption,d=e.field,p=e.isOverlay,v=p===void 0?false:p;var g=Hr(),m=g.activeQuestionId,w=g.activeQuestionIndex,A=g.validationError,Y=g.setValidationError;var O=(0,b.xW)();var I=(r=d.value)!==null&&r!==void 0?r:{answer_id:"",answer_title:"",answer_two_gap_match:"",is_correct:"0",belongs_question_id:m,belongs_question_type:"matching"};var S=(0,s.useRef)(null);var q=(0,b.FH)({control:O.control,name:"questions.".concat(w,".question_settings.is_image_matching"),defaultValue:false});var P=(0,s.useState)(!I.answer_title||q?!I.image_url:!I.answer_two_gap_match),j=Ai(P,2),C=j[0],T=j[1];var D=(0,s.useState)(I),L=Ai(D,2),z=L[0],K=L[1];var H=(0,i.gl)({id:d.value.answer_id||0,animateLayoutChanges:Yo.J}),N=H.attributes,U=H.listeners,R=H.setNodeRef,W=H.transform,B=H.transition,M=H.isDragging;var F=(0,xo.A)({options:{type:"image"},onChange:function t(e){if(e&&!Array.isArray(e)){var r=e.id,n=e.url;d.onChange(mi(mi(mi({},I),Me(I._data_status,Ce.UPDATE)&&{_data_status:Me(I._data_status,Ce.UPDATE)}),{},{image_id:r,image_url:n}))}},initialFiles:(n=d.value)!==null&&n!==void 0&&n.image_id?{id:Number(d.value.image_id),url:d.value.image_url||"",title:""}:null}),G=F.openMediaLibrary,Q=F.resetFiles;var V={transform:y.Ks.Transform.toString(W),transition:B,opacity:M?.3:undefined};var $=function t(){d.onChange(mi(mi(mi({},I),Me(I._data_status,Ce.UPDATE)&&{_data_status:Me(I._data_status,Ce.UPDATE)}),{},{image_id:"",image_url:""}));Q()};(0,s.useEffect)((function(){if((0,jn.O9)(S.current)&&C){S.current.focus()}}),[C]);return(0,a.Y)("div",yi({},N,{css:ji.option,ref:R,tabIndex:-1,style:V}),(0,a.Y)("div",{css:ji.optionLabel({isEditing:C,isDragging:M,isOverlay:v}),onClick:function t(){T(true)},onKeyDown:function t(e){e.stopPropagation();if(e.key==="Enter"||e.key===" "){T(true)}}},(0,a.Y)("div",{css:ji.optionHeader},(0,a.Y)("div",{css:E.x.optionCounter({isEditing:C})},String.fromCharCode(65+o)),(0,a.Y)(x.A,{when:!C&&I.is_saved},(0,a.Y)("button",yi({},U,{type:"button",css:E.x.optionDragButton({isOverlay:v}),"data-visually-hidden":true}),(0,a.Y)(h.A,{name:"dragVertical",height:24,width:24})),(0,a.Y)("div",{css:ji.optionActions,"data-visually-hidden":true},(0,a.Y)(fe.A,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:E.x.actionButton,"data-edit-button":true,onClick:function t(e){e.stopPropagation();T(true)}},(0,a.Y)(h.A,{name:"edit",width:24,height:24}))),(0,a.Y)(fe.A,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.Y)(x.A,{when:!Si,fallback:(0,a.Y)("button",{type:"button",css:E.x.actionButton,onClick:function t(e){e.stopPropagation();l(I)}},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))},(0,a.Y)(_.A,{size:"tiny"},(0,a.Y)("button",{disabled:true,type:"button",css:E.x.actionButton,onClick:k.lQ},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))))),(0,a.Y)(fe.A,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:E.x.actionButton,"data-visually-hidden":true,onClick:function t(e){e.stopPropagation();c()}},(0,a.Y)(h.A,{name:"delete",width:24,height:24})))))),(0,a.Y)("div",{css:ji.optionBody},(0,a.Y)(x.A,{when:C,fallback:(0,a.Y)("div",{css:ji.placeholderWrapper({isImageMatching:q})},(0,a.Y)(x.A,{when:q,fallback:(0,a.Y)("div",{css:ji.optionPlaceholder},I.answer_title||(0,u.__)("Answer title...","tutor"))},(0,a.Y)(x.A,{when:I.image_url,fallback:(0,a.Y)("div",{css:ji.imagePlaceholder},(0,a.Y)(h.A,{name:"imagePreview",height:48,width:48}))},(function(){return(0,a.Y)("div",{css:ji.imagePlaceholder},(0,a.Y)("img",{src:I.image_url,alt:I.image_url}))}))),(0,a.Y)("div",{css:ji.optionPlaceholder},!q?I.answer_two_gap_match:I.answer_title))},(0,a.Y)("div",{css:E.x.optionInputWrapper},(0,a.Y)(x.A,{when:q},(0,a.Y)(Ao.A,{value:{id:Number(I.image_id),url:I.image_url||"",title:I.image_url||""},infoText:(0,u.__)("Standard Size: 700x430 pixels","tutor"),uploadHandler:G,clearHandler:$,emptyImageCss:ji.emptyImageInput,previewImageCss:ji.previewImageInput})),(0,a.Y)("input",yi({},d,{type:"text",ref:S,placeholder:!q?(0,u.__)("Question","tutor"):(0,u.__)("Image matched text..","tutor"),value:I.answer_title,onClick:function t(e){e.stopPropagation()},onChange:function t(e){d.onChange(mi(mi(mi({},I),Me(I._data_status,Ce.UPDATE)&&{_data_status:Me(I._data_status,Ce.UPDATE)}),{},{answer_title:e.target.value}))},onKeyDown:function(){var t=vi(pi().mark((function t(e){return pi().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&I.answer_title&&I.answer_two_gap_match){d.onChange(mi(mi({},I),Me(I._data_status,Ce.UPDATE)&&{_data_status:Me(I._data_status,Ce.UPDATE)}));T(false)}case 2:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.Y)(x.A,{when:!q},(0,a.Y)("input",yi({},d,{type:"text",placeholder:(0,u.__)("Matched option..","tutor"),value:I.answer_two_gap_match,onClick:function t(e){e.stopPropagation()},onChange:function t(e){d.onChange(mi(mi(mi({},I),Me(I._data_status,Ce.UPDATE)&&{_data_status:Me(I._data_status,Ce.UPDATE)}),{},{answer_two_gap_match:e.target.value}))},onKeyDown:function t(e){e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&I.answer_title&&I.answer_two_gap_match){d.onChange(mi(mi({},I),Me(I._data_status,Ce.UPDATE)&&{_data_status:Me(I._data_status,Ce.UPDATE),is_saved:true}));if((A===null||A===void 0?void 0:A.type)==="save_option"){Y(null)}T(false)}}}))),(0,a.Y)("div",{css:ji.optionInputButtons},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(e){e.stopPropagation();T(false);d.onChange(z);if(!I.is_saved){if((A===null||A===void 0?void 0:A.type)==="save_option"){Y(null)}c()}}},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{variant:"secondary",size:"small",onClick:function t(e){e.stopPropagation();d.onChange(mi(mi(mi({},I),Me(I._data_status,Ce.UPDATE)&&{_data_status:Me(I._data_status,Ce.UPDATE)}),{},{is_saved:true}));K(mi(mi(mi({},I),Me(I._data_status,Ce.UPDATE)&&{_data_status:Me(I._data_status,Ce.UPDATE)}),{},{is_saved:true}));if((A===null||A===void 0?void 0:A.type)==="save_option"){Y(null)}T(false)},disabled:!I.answer_title||(q?!I.image_id:!I.answer_two_gap_match)},(0,u.__)("Ok","tutor"))))))))};const Pi=qi;var ji={option:(0,a.AH)(E.x.display.flex(),";",I.I.caption("medium"),";align-items:center;color:",O.I6.text.subdued,";gap:",O.YK[10],";align-items:center;"+(true?"":0),true?"":0),optionLabel:function t(e){var r=e.isEditing,n=e.isDragging,o=e.isOverlay;return(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[12],";width:100%;border-radius:",O.Vq.card,";padding:",O.YK[12]," ",O.YK[16],";background-color:",O.I6.background.white,";[data-visually-hidden]{opacity:0;}&:hover{outline:1px solid ",O.I6.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.AH)("background-color:",O.I6.background.white,";outline:1px solid ",O.I6.stroke.brand,";&:hover{outline:1px solid ",O.I6.stroke.brand,";}"+(true?"":0),true?"":0)," ",n&&(0,a.AH)("background-color:",O.I6.stroke.hover,";"+(true?"":0),true?"":0)," ",o&&(0,a.AH)("box-shadow:",O.r7.drag,";"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},optionHeader:true?{name:"1b8dd6m",styles:"display:grid;grid-template-columns:1fr auto 1fr;align-items:center;&:focus-within{[data-visually-hidden]{opacity:1;}}"}:0,optionActions:(0,a.AH)(E.x.display.flex()," gap:",O.YK[8],";place-self:center end;"+(true?"":0),true?"":0),actionButton:(0,a.AH)(E.x.resetButton,";",E.x.display.flex()," color:",O.I6.icon["default"],";cursor:pointer;&:disabled{cursor:not-allowed;color:",O.I6.icon.disable.background,";}"+(true?"":0),true?"":0),optionBody:(0,a.AH)(E.x.display.flex(),";"+(true?"":0),true?"":0),placeholderWrapper:function t(e){var r=e.isImageMatching;return(0,a.AH)(E.x.display.flex("column")," width:100%;",r&&(0,a.AH)("gap:",O.YK[12],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},imagePlaceholder:(0,a.AH)(E.x.flexCenter(),";height:210px;width:100%;background-color:",O.I6.background["default"],";border-radius:",O.Vq.card,";overflow:hidden;svg{color:",O.I6.icon.hints,";}img{width:100%;height:100%;object-fit:cover;object-position:center;}"+(true?"":0),true?"":0),emptyImageInput:(0,a.AH)("background-color:",O.I6.background["default"],";height:210px;"+(true?"":0),true?"":0),previewImageInput:true?{name:"be4gwm",styles:"height:210px"}:0,optionPlaceholder:(0,a.AH)(I.I.body(),";color:",O.I6.text.subdued,";padding-block:",O.YK[4],";"+(true?"":0),true?"":0),optionInputWrapper:(0,a.AH)(E.x.display.flex("column")," width:100%;gap:",O.YK[12],";"+(true?"":0),true?"":0),optionInputButtons:(0,a.AH)(E.x.display.flex()," justify-content:flex-end;gap:",O.YK[8],";"+(true?"":0),true?"":0)};function Ci(t){"@babel/helpers - typeof";return Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ci(t)}function Ti(){return Ti=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ti.apply(null,arguments)}function Di(t){return Ki(t)||zi(t)||Fi(t)||Li()}function Li(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zi(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Ki(t){if(Array.isArray(t))return Gi(t)}function Hi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ni(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Hi(Object(r),!0).forEach((function(e){Ui(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ui(t,e,r){return(e=Ri(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ri(t){var e=Wi(t,"string");return"symbol"==Ci(e)?e:e+""}function Wi(t,e){if("object"!=Ci(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ci(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Bi(t,e){return Vi(t)||Qi(t,e)||Fi(t,e)||Mi()}function Mi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fi(t,e){if(t){if("string"==typeof t)return Gi(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gi(t,e):void 0}}function Gi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Qi(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Vi(t){if(Array.isArray(t))return t}var $i=function t(){var e=(0,s.useState)(null),r=Bi(e,2),l=r[0],d=r[1];var p=(0,b.xW)();var v=Hr(),y=v.activeQuestionIndex,g=v.activeQuestionId,m=v.validationError,_=v.setValidationError;var w=(0,b.jz)({control:p.control,name:"questions.".concat(y,".question_answers")}),A=w.fields,Y=w.append,O=w.insert,I=w.remove,E=w.move;var S=(0,b.FH)({control:p.control,name:"questions.".concat(y,".question_settings.is_image_matching"),defaultValue:false});var q=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:10}}),(0,n.MS)(n.uN,{coordinateGetter:i.JR}));var P=(0,s.useMemo)((function(){if(!l){return null}return A.find((function(t){return t.answer_id===l}))}),[l,A]);var j=function t(){Y({_data_status:Ce.NEW,is_saved:false,answer_id:(0,k.Ak)(),answer_title:"",is_correct:"0",belongs_question_id:g,belongs_question_type:S?"image_matching":"matching",answer_order:A.length,answer_two_gap_match:"",answer_view_format:""},{shouldFocus:true,focusName:"questions.".concat(y,".question_answers.").concat(A.length,".answer_title")});if((m===null||m===void 0?void 0:m.type)==="add_option"){_(null)}};var C=function t(e,r){var n=Ni(Ni({},r),{},{_data_status:Ce.NEW,is_saved:true,answer_id:(0,k.Ak)(),answer_title:"".concat(r.answer_title," (copy)"),is_correct:"0"});var o=e+1;O(o,n)};var T=function t(e,r){I(e);if(r._data_status!==Ce.NEW){p.setValue("deleted_answer_ids",[].concat(Di(p.getValues("deleted_answer_ids")),[r.answer_id]))}};return(0,a.Y)("div",{css:Xi.optionWrapper},(0,a.Y)(n.Mp,{sensors:q,collisionDetection:n.fp,modifiers:[o.Q_],onDragStart:function t(e){d(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var o=A.findIndex((function(t){return t.answer_id===r.id}));var i=A.findIndex((function(t){return t.answer_id===n.id}));E(o,i)}d(null)}},(0,a.Y)(i.gB,{items:A.map((function(t){return Ni(Ni({},t),{},{id:t.answer_id})})),strategy:i._G},(0,a.Y)(ct.A,{each:A},(function(t,e){return(0,a.Y)(b.xI,{key:"".concat(t.answer_id,"-").concat(e),control:p.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function r(n){return(0,a.Y)(Pi,Ti({},n,{index:e,onDuplicateOption:function t(r){return C(e,r)},onRemoveOption:function r(){return T(e,t)}}))}})}))),(0,c.createPortal)((0,a.Y)(n.Hd,null,(0,a.Y)(x.A,{when:P},(function(t){var e=A.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.Y)(b.xI,{key:l,control:p.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function t(r){return(0,a.Y)(Pi,Ti({},r,{index:e,onDuplicateOption:k.lQ,onRemoveOption:k.lQ,isOverlay:true}))}})}))),document.body)),(0,a.Y)("div",null,(0,a.Y)(f.A,{variant:"text",onClick:j,buttonContentCss:Xi.addOptionButton,icon:(0,a.Y)(h.A,{name:"plus",height:24,width:24})},(0,u.__)("Add Option","tutor"))))};const Ji=$i;var Xi={optionWrapper:(0,a.AH)(E.x.display.flex("column"),";gap:",O.YK[12],";padding-left:",O.YK[40],";",O.EA.smallMobile,"{padding-left:",O.YK[8],";}"+(true?"":0),true?"":0),addOptionButton:(0,a.AH)("color:",O.I6.text.brand,";svg{color:",O.I6.icon.brand,";}"+(true?"":0),true?"":0)};function Zi(t){"@babel/helpers - typeof";return Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zi(t)}function ta(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ta=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(P([])));A&&A!==r&&n.call(A,a)&&(_=A);var x=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==Zi(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Zi(e)+" is not iterable")}return m.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(x),l(x,s,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:P(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function ea(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function ra(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ea(i,n,o,a,u,"next",t)}function u(t){ea(i,n,o,a,u,"throw",t)}a(void 0)}))}}function na(){return na=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},na.apply(null,arguments)}function oa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ia(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?oa(Object(r),!0).forEach((function(e){aa(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oa(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function aa(t,e,r){return(e=ua(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ua(t){var e=sa(t,"string");return"symbol"==Zi(e)?e:e+""}function sa(t,e){if("object"!=Zi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function la(t,e){return ha(t)||pa(t,e)||da(t,e)||ca()}function ca(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function da(t,e){if(t){if("string"==typeof t)return fa(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fa(t,e):void 0}}function fa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function pa(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function ha(t){if(Array.isArray(t))return t}function va(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var ya=!!Gt.P.tutor_pro_url;var ga=function t(e){var r,n,o;var l=e.field,c=e.onDuplicateOption,d=e.onRemoveOption,p=e.onCheckCorrectAnswer,v=e.index,g=e.isOverlay,m=g===void 0?false:g;var w=(0,b.xW)();var A=Hr(),Y=A.activeQuestionId,O=A.activeQuestionIndex,I=A.validationError,S=A.setValidationError;var q=(r=l.value)!==null&&r!==void 0?r:{answer_id:(0,k.Ak)(),answer_title:"",is_correct:"0",belongs_question_id:Y,belongs_question_type:"multiple_choice"};var P=(0,s.useRef)(null);var j=(0,b.FH)({control:w.control,name:"questions.".concat(O,".question_settings.has_multiple_correct_answer"),defaultValue:false});var C=w.watch("questions.".concat(O,".question_type"));var T=(0,s.useState)(!q.is_saved||!q.answer_title&&!q.image_url),D=la(T,2),L=D[0],z=D[1];var K=(0,s.useState)((0,jn.O9)(q.image_id)&&(0,jn.O9)(q.image_url)),H=la(K,2),N=H[0],U=H[1];var R=(0,s.useState)(q),W=la(R,2),B=W[0],M=W[1];var F=(0,i.gl)({id:((n=l.value)===null||n===void 0?void 0:n.answer_id)||0,animateLayoutChanges:Yo.J}),G=F.attributes,Q=F.listeners,V=F.setNodeRef,$=F.transform,J=F.transition,X=F.isDragging;var Z=(0,xo.A)({options:{type:"image"},onChange:function t(e){if(e&&!Array.isArray(e)){var r=e.id,n=e.url;l.onChange(ia(ia(ia({},q),Me(q._data_status,Ce.UPDATE)&&{_data_status:Me(q._data_status,Ce.UPDATE)}),{},{image_id:r,image_url:n,answer_view_format:"text_image"}));U(true)}},initialFiles:(o=l.value)!==null&&o!==void 0&&o.image_id?{id:Number(l.value.image_id),url:l.value.image_url||"",title:""}:null}),tt=Z.openMediaLibrary,et=Z.resetFiles;var rt={transform:y.Ks.Transform.toString($),transition:J,opacity:X?.3:undefined};var nt=function t(){et();l.onChange(ia(ia(ia({},q),Me(q._data_status,Ce.UPDATE)&&{_data_status:Me(q._data_status,Ce.UPDATE)}),{},{image_id:"",image_url:"",answer_view_format:"text"}));U(false)};(0,s.useEffect)((function(){if((0,jn.O9)(P.current)&&L){P.current.focus()}}),[L]);return(0,a.Y)("div",na({},G,{css:_a.option({isSelected:!!Number(q.is_correct),isMultipleChoice:j}),tabIndex:-1,ref:V,style:rt}),(0,a.Y)(x.A,{when:C==="multiple_choice"},(0,a.Y)("button",{key:q.is_correct,css:E.x.optionCheckButton,"data-check-button":true,type:"button",onClick:p},(0,a.Y)(x.A,{when:j,fallback:(0,a.Y)(h.A,{name:Number(q.is_correct)?"checkFilled":"check",height:32,width:32})},(0,a.Y)(h.A,{name:Number(q.is_correct)?"checkSquareFilled":"checkSquare",height:32,width:32})))),(0,a.Y)("div",{css:_a.optionLabel({isSelected:!!Number(q.is_correct),isEditing:L,isDragging:X,isOverlay:m}),onClick:function t(){z(true)},onKeyDown:function t(e){e.stopPropagation();if(e.key==="Enter"||e.key===" "){z(true)}}},(0,a.Y)("div",{css:_a.optionHeader({isEditing:L})},(0,a.Y)("div",{css:_a.optionCounterAndButton},(0,a.Y)("div",{css:E.x.optionCounter({isSelected:!!Number(q.is_correct),isEditing:L})},String.fromCharCode(65+v)),(0,a.Y)(x.A,{when:L},(0,a.Y)(x.A,{when:!N,fallback:(0,a.Y)(f.A,{variant:"text",icon:(0,a.Y)(h.A,{name:"removeImage",width:24,height:24}),onClick:function t(e){e.stopPropagation();nt()}},(0,u.__)("Remove Image","tutor"))},(0,a.Y)(f.A,{variant:"text",icon:(0,a.Y)(h.A,{name:"addImage",width:24,height:24}),onClick:function t(e){e.stopPropagation();tt()}},(0,u.__)("Add Image","tutor"))))),(0,a.Y)(x.A,{when:!L&&q.is_saved},(0,a.Y)("button",na({},Q,{type:"button",css:E.x.optionDragButton({isOverlay:m}),"data-visually-hidden":true}),(0,a.Y)(h.A,{name:"dragVertical",height:24,width:24})),(0,a.Y)("div",{css:_a.optionActions,"data-visually-hidden":true},(0,a.Y)(fe.A,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:E.x.actionButton,onClick:function t(e){e.stopPropagation();z(true)}},(0,a.Y)(h.A,{name:"edit",width:24,height:24}))),(0,a.Y)(fe.A,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.Y)(x.A,{when:!ya,fallback:(0,a.Y)("button",{type:"button",css:E.x.actionButton,onClick:function t(e){e.stopPropagation();c(q)}},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))},(0,a.Y)(_.A,{size:"tiny"},(0,a.Y)("button",{disabled:true,type:"button",css:E.x.actionButton,onClick:k.lQ},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))))),(0,a.Y)(fe.A,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:E.x.actionButton,onClick:function t(e){e.stopPropagation();d()}},(0,a.Y)(h.A,{name:"delete",width:24,height:24})))))),(0,a.Y)("div",{css:_a.optionBody},(0,a.Y)(x.A,{when:L,fallback:(0,a.Y)("div",{css:_a.placeholderWrapper},(0,a.Y)(x.A,{when:q.image_url},(0,a.Y)("div",{css:_a.imagePlaceholder},(0,a.Y)("img",{src:q.image_url,alt:q.image_url}))),(0,a.Y)("div",{css:_a.optionPlaceholder},q.answer_title||(0,u.__)("Write answer option...","tutor")))},(0,a.Y)("div",{css:E.x.optionInputWrapper},(0,a.Y)(x.A,{when:N},(0,a.Y)(Ao.A,{value:{id:Number(q.image_id),url:q.image_url||"",title:(0,u.__)("Image","tutor")},buttonText:(0,u.__)("Upload Image","tutor"),infoText:(0,u.__)("Size: 700x430 pixels","tutor"),uploadHandler:tt,clearHandler:nt,emptyImageCss:_a.emptyImageInput,previewImageCss:_a.previewImageInput})),(0,a.Y)("textarea",na({},l,{ref:P,placeholder:(0,u.__)("Write option...","tutor"),value:q.answer_title,onClick:function t(e){e.stopPropagation()},onChange:function t(e){var r=e.target.value;l.onChange(ia(ia(ia({},q),Me(q._data_status,Ce.UPDATE)&&{_data_status:Me(q._data_status,Ce.UPDATE)}),{},{answer_title:r}))},onKeyDown:function(){var t=ra(ta().mark((function t(e){return ta().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&q.answer_title){l.onChange(ia(ia({},q),Me(q._data_status,Ce.UPDATE)&&{_data_status:Me(q._data_status,Ce.UPDATE),is_saved:true}));if((I===null||I===void 0?void 0:I.type)==="save_option"){S(null)}z(false)}case 2:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.Y)("div",{css:_a.optionInputButtons},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(e){e.stopPropagation();z(false);l.onChange(B);if(!q.is_saved){if((I===null||I===void 0?void 0:I.type)==="save_option"){S(null)}d()}}},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{variant:"secondary",size:"small",onClick:function(){var t=ra(ta().mark((function t(e){return ta().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();l.onChange(ia(ia(ia({},q),Me(q._data_status,Ce.UPDATE)&&{_data_status:Me(q._data_status,Ce.UPDATE)}),{},{is_saved:true}));M(ia(ia(ia({},q),Me(q._data_status,Ce.UPDATE)&&{_data_status:Me(q._data_status,Ce.UPDATE)}),{},{is_saved:true}));if((I===null||I===void 0?void 0:I.type)==="save_option"){S(null)}z(false);case 5:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),disabled:!q.answer_title&&!q.image_url},(0,u.__)("Ok","tutor"))))))))};const ma=ga;var ba=true?{name:"697o47",styles:"fill:none"}:0;var _a={option:function t(e){var r=e.isSelected,n=e.isMultipleChoice;return(0,a.AH)(E.x.display.flex(),";",I.I.caption("medium"),";align-items:center;color:",O.I6.text.subdued,";gap:",O.YK[10],";align-items:center;[data-check-button]{color:",O.I6.icon["default"],";",!n&&ba," &:focus-visible{opacity:1;}}&:hover{[data-check-button]{opacity:1;}}&:focus-within{[data-check-button]{opacity:1;}}",r&&(0,a.AH)("[data-check-button]{opacity:1;color:",O.I6.bg.success,";",!n&&(0,a.AH)("fill:",O.I6.bg.success,";"+(true?"":0),true?"":0),";}"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-check-button]{opacity:1;}}"+(true?"":0),true?"":0)},optionLabel:function t(e){var r=e.isSelected,n=e.isEditing,o=e.isDragging,i=e.isOverlay;return(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[12],";width:100%;border-radius:",O.Vq.card,";padding:",O.YK[12]," ",O.YK[16],";background-color:",O.I6.background.white,";[data-visually-hidden]{opacity:0;}&:hover{outline:1px solid ",O.I6.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.AH)("background-color:",O.I6.background.success.fill40,";color:",O.I6.text.primary,";&:hover{outline:1px solid ",O.I6.stroke.success.fill70,";}"+(true?"":0),true?"":0)," ",n&&(0,a.AH)("background-color:",O.I6.background.white,";outline:1px solid ",r?O.I6.stroke.success.fill70:O.I6.stroke.brand,";&:hover{outline:1px solid ",r?O.I6.stroke.success.fill70:O.I6.stroke.brand,";}"+(true?"":0),true?"":0)," ",o&&(0,a.AH)("background-color:",O.I6.stroke.hover,";"+(true?"":0),true?"":0)," ",i&&(0,a.AH)("box-shadow:",O.r7.drag,";"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},optionHeader:function t(e){var r=e.isEditing,n=r===void 0?false:r;return(0,a.AH)("display:grid;grid-template-columns:",!n?"1fr auto 1fr":"1fr",";align-items:center;&:focus-within{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},optionCounterAndButton:(0,a.AH)(E.x.display.flex()," gap:",O.YK[8],";place-self:center start;button{padding:0;}"+(true?"":0),true?"":0),optionActions:(0,a.AH)(E.x.display.flex()," gap:",O.YK[8],";place-self:center end;"+(true?"":0),true?"":0),optionBody:(0,a.AH)(E.x.display.flex(),";"+(true?"":0),true?"":0),placeholderWrapper:(0,a.AH)(E.x.display.flex("column")," gap:",O.YK[12],";width:100%;"+(true?"":0),true?"":0),imagePlaceholder:(0,a.AH)(E.x.flexCenter(),";height:210px;width:100%;background-color:",O.I6.background["default"],";border-radius:",O.Vq.card,";overflow:hidden;svg{color:",O.I6.icon.hints,";}img{width:100%;height:100%;object-fit:cover;object-position:center;}"+(true?"":0),true?"":0),emptyImageInput:(0,a.AH)("background-color:",O.I6.background["default"],";height:210px;"+(true?"":0),true?"":0),previewImageInput:true?{name:"be4gwm",styles:"height:210px"}:0,optionPlaceholder:(0,a.AH)(I.I.body(),";color:",O.I6.text.subdued,";padding-block:",O.YK[4],";"+(true?"":0),true?"":0),optionInputButtons:(0,a.AH)(E.x.display.flex()," justify-content:flex-end;gap:",O.YK[8],";"+(true?"":0),true?"":0)};function wa(t){"@babel/helpers - typeof";return wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wa(t)}function Aa(){return Aa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Aa.apply(null,arguments)}function xa(t){return Ia(t)||Oa(t)||Ta(t)||Ya()}function Ya(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Oa(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Ia(t){if(Array.isArray(t))return Da(t)}function Ea(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ka(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ea(Object(r),!0).forEach((function(e){Sa(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ea(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sa(t,e,r){return(e=qa(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qa(t){var e=Pa(t,"string");return"symbol"==wa(e)?e:e+""}function Pa(t,e){if("object"!=wa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function ja(t,e){return za(t)||La(t,e)||Ta(t,e)||Ca()}function Ca(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ta(t,e){if(t){if("string"==typeof t)return Da(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Da(t,e):void 0}}function Da(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function La(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function za(t){if(Array.isArray(t))return t}var Ka=function t(){var e=(0,s.useState)(null),r=ja(e,2),l=r[0],d=r[1];var p=(0,b.xW)();var v=Hr(),y=v.activeQuestionIndex,g=v.activeQuestionId,m=v.validationError,_=v.setValidationError;var w=(0,b.FH)({control:p.control,name:"questions.".concat(y,".question_settings.has_multiple_correct_answer"),defaultValue:false});var A=p.watch("questions.".concat(y,".question_type"));var Y=(0,b.jz)({control:p.control,name:"questions.".concat(y,".question_answers")}),O=Y.fields,I=Y.append,E=Y.insert,S=Y.remove,q=Y.update,P=Y.replace,j=Y.move;var C=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:10}}),(0,n.MS)(n.uN,{coordinateGetter:i.JR}));var T=(0,b.FH)({control:p.control,name:"questions.".concat(y,".question_answers"),defaultValue:[]});var D=(0,s.useMemo)((function(){if(!l){return null}return O.find((function(t){return t.answer_id===l}))}),[l,O]);var L=function t(e,r){if(w){q(e,ka(ka(ka({},r),Me(r._data_status,Ce.UPDATE)&&{_data_status:Me(r._data_status,Ce.UPDATE)}),{},{is_correct:r.is_correct==="1"?"0":"1"}))}else{var n=T.map((function(t){return ka(ka(ka({},t),Me(t._data_status,Ce.UPDATE)&&{_data_status:Me(t._data_status,Ce.UPDATE)}),{},{is_correct:t.answer_id===r.answer_id?"1":"0"})}));P(n)}if((m===null||m===void 0?void 0:m.type)==="correct_option"){_(null)}};var z=function t(){I({_data_status:Ce.NEW,is_saved:false,answer_id:(0,k.Ak)(),answer_title:"",is_correct:"0",belongs_question_id:g,belongs_question_type:A,answer_order:O.length,answer_two_gap_match:"",answer_view_format:"text"},{shouldFocus:true,focusName:"questions.".concat(y,".question_answers.").concat(O.length,".answer_title")});if((m===null||m===void 0?void 0:m.type)==="add_option"){_(null)}};var K=function t(e,r){var n=ka(ka({},r),{},{_data_status:Ce.NEW,is_saved:true,answer_id:(0,k.Ak)(),answer_title:"".concat(r.answer_title," (copy)"),is_correct:"0"});var o=e+1;E(o,n)};var H=function t(e,r){S(e);if(r._data_status!==Ce.NEW){p.setValue("deleted_answer_ids",[].concat(xa(p.getValues("deleted_answer_ids")),[r.answer_id]))}};return(0,a.Y)("div",{css:Na.optionWrapper({isOrdering:A==="ordering"})},(0,a.Y)(n.Mp,{sensors:C,collisionDetection:n.fp,modifiers:[o.Q_],onDragStart:function t(e){d(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var o=O.findIndex((function(t){return t.answer_id===r.id}));var i=O.findIndex((function(t){return t.answer_id===n.id}));j(o,i)}d(null)}},(0,a.Y)(i.gB,{items:O.map((function(t){return ka(ka({},t),{},{id:t.answer_id})})),strategy:i._G},(0,a.Y)(ct.A,{each:O},(function(t,e){return(0,a.Y)(b.xI,{key:"".concat(t.answer_id,"-").concat(t.is_correct),control:p.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function r(n){return(0,a.Y)(ma,Aa({},n,{onDuplicateOption:function t(r){return K(e,r)},onRemoveOption:function r(){return H(e,t)},onCheckCorrectAnswer:function r(){return L(e,t)},index:e}))}})}))),(0,c.createPortal)((0,a.Y)(n.Hd,null,(0,a.Y)(x.A,{when:D},(function(t){var e=T.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.Y)(b.xI,{key:l,control:p.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function t(r){return(0,a.Y)(ma,Aa({},r,{onDuplicateOption:k.lQ,onRemoveOption:k.lQ,onCheckCorrectAnswer:k.lQ,index:e,isOverlay:true}))}})}))),document.body)),(0,a.Y)("div",{css:Na.addOptionButtonWrapper({isOrdering:A==="ordering"})},(0,a.Y)(f.A,{variant:"text",onClick:z,buttonContentCss:Na.addOptionButton,icon:(0,a.Y)(h.A,{name:"plus",height:24,width:24})},(0,u.__)("Add Option","tutor"))))};const Ha=Ka;var Na={optionWrapper:function t(e){var r=e.isOrdering;return(0,a.AH)(E.x.display.flex("column"),";gap:",O.YK[12],";",r&&(0,a.AH)("padding-left:",O.YK[40],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},addOptionButtonWrapper:function t(e){var r=e.isOrdering;return(0,a.AH)("margin-left:",O.YK[48],";",r&&(0,a.AH)("margin-left:",O.YK[8],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},addOptionButton:(0,a.AH)("color:",O.I6.text.brand,";svg{color:",O.I6.icon.brand,";}"+(true?"":0),true?"":0)};var Ua=function t(){return(0,a.Y)("div",{css:Wa.optionWrapper},(0,a.Y)(en.A,{icon:"bulb"},(0,u.__)("No options are necessary for this question type","tutor")))};const Ra=Ua;var Wa={optionWrapper:(0,a.AH)("padding-left:",O.YK[40],";",O.EA.smallMobile,"{padding-left:",O.YK[8],";}"+(true?"":0),true?"":0)};function Ba(){return Ba=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ba.apply(null,arguments)}var Ma=function t(e){var r;var n=e.field,o=e.onCheckCorrectAnswer,u=e.isOverlay,s=u===void 0?false:u;var l=Hr(),c=l.activeQuestionId;var d=(r=n.value)!==null&&r!==void 0?r:{answer_id:(0,k.Ak)(),answer_title:"",is_correct:"0",belongs_question_id:c,belongs_question_type:"true_false"};var f=(0,i.gl)({id:n.value.answer_id||0,animateLayoutChanges:Yo.J}),p=f.attributes,v=f.listeners,g=f.setNodeRef,m=f.transform,b=f.transition,_=f.isDragging;var w={transform:y.Ks.Transform.toString(m),transition:b,opacity:_?.3:undefined};return(0,a.Y)("div",Ba({},p,{css:Ga.option({isSelected:!!Number(n.value.is_correct),isOverlay:s}),tabIndex:-1,ref:g,style:w}),(0,a.Y)("button",{"data-check-button":true,type:"button",css:E.x.optionCheckButton,onClick:o},(0,a.Y)(h.A,{name:Number(n.value.is_correct)?"checkFilled":"check",height:32,width:32})),(0,a.Y)("div",{css:Ga.optionLabel({isSelected:!!Number(n.value.is_correct),isDragging:_,isOverlay:s})},(0,a.Y)("span",null,d.answer_title),(0,a.Y)("button",Ba({},v,{type:"button",css:E.x.optionDragButton({isOverlay:s}),"data-visually-hidden":true}),(0,a.Y)(h.A,{name:"dragVertical",height:24,width:24}))))};const Fa=Ma;var Ga={option:function t(e){var r=e.isSelected,n=e.isOverlay;return(0,a.AH)(E.x.display.flex(),";",I.I.caption("medium"),";align-items:center;color:",O.I6.text.subdued,";gap:",O.YK[10],";height:48px;align-items:center;[data-check-button]{color:",O.I6.icon["default"],";opacity:0;fill:none;flex-shrink:0;&:focus-visible{opacity:1;}}&:focus-within{[data-check-button]{opacity:1;}}&:hover{[data-check-button]{opacity:",n?0:1,";}}",r&&(0,a.AH)("[data-check-button]{opacity:1;color:",O.I6.bg.success,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionLabel:function t(e){var r=e.isSelected,n=e.isDragging,o=e.isOverlay;return(0,a.AH)("display:grid;grid-template-columns:1fr auto 1fr;align-items:center;width:100%;border-radius:",O.Vq.card,";padding:",O.YK[12]," ",O.YK[16],";background-color:",O.I6.background.white,";text-transform:capitalize;[data-visually-hidden]{opacity:0;}&:hover{outline:1px solid ",O.I6.stroke.hover,";[data-visually-hidden]{opacity:1;}}&:focus-within{[data-visually-hidden]{opacity:1;}}",r&&(0,a.AH)("background-color:",O.I6.background.success.fill40,";color:",O.I6.text.primary,";&:hover{outline:1px solid ",O.I6.stroke.success.fill70,";}"+(true?"":0),true?"":0)," ",n&&(0,a.AH)("background-color:",O.I6.stroke.hover,";"+(true?"":0),true?"":0)," ",o&&(0,a.AH)("box-shadow:",O.r7.drag,";"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)}};function Qa(t){"@babel/helpers - typeof";return Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qa(t)}function Va(){return Va=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Va.apply(null,arguments)}function $a(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=su(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function t(){};return{s:o,n:function e(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();return a=e.done,e},e:function t(e){u=!0,i=e},f:function t(){try{a||null==r["return"]||r["return"]()}finally{if(u)throw i}}}}function Ja(t){return tu(t)||Za(t)||su(t)||Xa()}function Xa(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Za(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function tu(t){if(Array.isArray(t))return lu(t)}function eu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ru(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?eu(Object(r),!0).forEach((function(e){nu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function nu(t,e,r){return(e=ou(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ou(t){var e=iu(t,"string");return"symbol"==Qa(e)?e:e+""}function iu(t,e){if("object"!=Qa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function au(t,e){return du(t)||cu(t,e)||su(t,e)||uu()}function uu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function su(t,e){if(t){if("string"==typeof t)return lu(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lu(t,e):void 0}}function lu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function cu(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function du(t){if(Array.isArray(t))return t}var fu=function t(){var e=(0,s.useState)(null),r=au(e,2),u=r[0],l=r[1];var d=(0,b.xW)();var f=Hr(),p=f.activeQuestionIndex;var h=(0,b.jz)({control:d.control,name:"questions.".concat(p,".question_answers")}),v=h.fields,y=h.move,g=h.replace;var m=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:10}}),(0,n.MS)(n.uN,{coordinateGetter:i.JR}));var _=(0,b.FH)({control:d.control,name:"questions.".concat(p,".question_answers"),defaultValue:[]});var w=(0,s.useMemo)((function(){if(!u){return null}return v.find((function(t){return t.answer_id===u}))}),[u,v]);var A=function t(e,r){var n=_.map((function(t){return ru(ru(ru({},t),Me(t._data_status,Ce.UPDATE)&&{_data_status:Me(t._data_status,Ce.UPDATE)}),{},{is_correct:t.answer_id===r.answer_id?"1":"0"})}));g(n)};(0,s.useEffect)((function(){var t=_.filter((function(t){var e=v.findIndex((function(e){return e.answer_id===t.answer_id}));var r=v[e]||{};return t.is_correct!==r.is_correct}));if(t.length===0){return}var e=v.findIndex((function(e){return e.answer_id===t[0].answer_id}));var r=Ja(_);r[e]=Object.assign({},r[e],{is_correct:"1"});var n=$a(r.entries()),o;try{for(n.s();!(o=n.n()).done;){var i=au(o.value,2),a=i[0],u=i[1];if(a!==e){r[a]=ru(ru(ru({},u),Me(u._data_status,Ce.UPDATE)&&{_data_status:Me(u._data_status,Ce.UPDATE)}),{},{is_correct:"0"})}}}catch(t){n.e(t)}finally{n.f()}d.setValue("questions.".concat(p,".question_answers"),r)}),[_]);return(0,a.Y)("div",{css:hu.optionWrapper},(0,a.Y)(n.Mp,{sensors:m,collisionDetection:n.fp,modifiers:[o.Q_],onDragStart:function t(e){l(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var o=v.findIndex((function(t){return t.answer_id===r.id}));var i=v.findIndex((function(t){return t.answer_id===n.id}));y(o,i)}l(null)}},(0,a.Y)(i.gB,{items:v.map((function(t){return ru(ru({},t),{},{id:t.answer_id})})),strategy:i._G},(0,a.Y)(ct.A,{each:v},(function(t,e){return(0,a.Y)(b.xI,{key:"".concat(t.answer_id,"-").concat(t.is_correct),control:d.control,name:"questions.".concat(p,".question_answers.").concat(e),render:function r(n){return(0,a.Y)(Fa,Va({},n,{index:e,onCheckCorrectAnswer:function r(){return A(e,t)}}))}})}))),(0,c.createPortal)((0,a.Y)(n.Hd,null,(0,a.Y)(x.A,{when:w},(function(t){var e=v.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.Y)(b.xI,{key:u,control:d.control,name:"questions.".concat(p,".question_answers.").concat(e),render:function t(r){return(0,a.Y)(Fa,Va({},r,{index:e,onCheckCorrectAnswer:k.lQ,isOverlay:true}))}})}))),document.body)))};const pu=fu;var hu={optionWrapper:(0,a.AH)(E.x.display.flex("column"),";gap:",O.YK[12],";"+(true?"":0),true?"":0),option:function t(e){var r=e.isSelected;return(0,a.AH)(E.x.display.flex(),";",I.I.caption("medium"),";align-items:center;color:",O.I6.text.subdued,";gap:",O.YK[10],";height:48px;align-items:center;[data-check-icon]{opacity:0;transition:opacity 0.15s ease-in-out;fill:none;flex-shrink:0;}&:hover{[data-check-icon]{opacity:1;}}",r&&(0,a.AH)("[data-check-icon]{opacity:1;color:",O.I6.bg.success,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionLabel:function t(e){var r=e.isSelected;return(0,a.AH)("display:grid;grid-template-columns:1fr auto 1fr;align-items:center;width:100%;border-radius:",O.Vq.card,";padding:",O.YK[12]," ",O.YK[16],";background-color:",O.I6.background.white,";cursor:pointer;[data-visually-hidden]{opacity:0;}&:hover{box-shadow:0 0 0 1px ",O.I6.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.AH)("background-color:",O.I6.background.success.fill40,";color:",O.I6.text.primary,";&:hover{box-shadow:0 0 0 1px ",O.I6.stroke.success.fill70,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionDragButton:(0,a.AH)(E.x.resetButton," ",E.x.flexCenter()," transform:rotate(90deg);color:",O.I6.icon["default"],";cursor:grab;place-self:center center;&:focus,&:active,&:hover{background:none;color:",O.I6.icon["default"],";}"+(true?"":0),true?"":0)};var vu=function t(e){var r=(0,s.useRef)();(0,s.useEffect)((function(){r.current=e}),[e]);return r.current};const yu=r.p+"images/9e5f8c5e5307063e90cc7f2a55e50d8c-quiz-empty-state-2x.webp";const gu=r.p+"images/bdb31b4692f8bb5ee2633ce7abb0356d-quiz-empty-state.webp";function mu(){return mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mu.apply(null,arguments)}function bu(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var _u=!!Gt.P.tutor_pro_url;var wu=function t(){var e=Hr(),r=e.activeQuestionIndex,n=e.activeQuestionId,o=e.validationError,i=e.contentType;var l=vu(n);var c=(0,b.xW)();var d=(0,s.useRef)(null);var f=c.watch("questions.".concat(r,".question_type"));var p=c.watch("questions")||[];var h=c.watch("questions.".concat(r,"._data_status"));var v={true_false:(0,a.Y)(pu,{key:n}),multiple_choice:(0,a.Y)(Ha,{key:n}),open_ended:(0,a.Y)(Ra,{key:n}),fill_in_the_blank:(0,a.Y)(_o,{key:n}),short_answer:(0,a.Y)(Ra,{key:n}),matching:(0,a.Y)(Ji,{key:n}),image_answering:(0,a.Y)(ci,{key:n}),ordering:(0,a.Y)(Ha,{key:n})};(0,s.useEffect)((function(){if(o&&d.current){d.current.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}),[o]);if(!n&&!c.formState.isLoading&&p.length===0){return(0,a.Y)("div",{css:xu.emptyState},(0,a.Y)("img",{css:xu.emptyStateImage,src:gu,srcSet:"".concat(gu," 1x, ").concat(yu," 2x"),alt:""}),(0,a.Y)("p",{css:xu.emptyStateText},(0,u.__)("Enter a quiz title to begin. Choose from a variety of question types to keep things interesting!","tutor")))}return(0,a.Y)("div",{key:r,css:xu.questionForm(n===l)},(0,a.Y)("div",{css:xu.questionWithIndex},(0,a.Y)("div",{css:xu.questionIndex},r+1,"."),(0,a.Y)("div",{css:xu.questionTitleAndDesc},(0,a.Y)(b.xI,{control:c.control,rules:{required:(0,u.__)("Question title is required","tutor")},name:"questions.".concat(r,".question_title"),render:function t(e){var n;return(0,a.Y)(Vn,mu({},e,{placeholder:(0,u.__)("Write your question here..","tutor"),disabled:i==="tutor_h5p_quiz",onChange:function t(){if(Me(h,Ce.UPDATE)){c.setValue("questions.".concat(r,"._data_status"),Me(h,Ce.UPDATE))}},selectOnFocus:((n=p[r])===null||n===void 0?void 0:n._data_status)===Ce.NEW}))}}),(0,a.Y)(x.A,{when:i!=="tutor_h5p_quiz",fallback:(0,a.Y)("div",null,(0,a.Y)("div",{css:xu.h5pShortCode},'[h5p id: "'.concat(c.watch("questions.".concat(r,".question_description")),'"]')))},(0,a.Y)(b.xI,{control:c.control,name:"questions.".concat(r,".question_description"),render:function t(e){return(0,a.Y)(En,mu({},e,{placeholder:(0,u.__)("Description (optional)","tutor"),disabled:i==="tutor_h5p_quiz",onChange:function t(){if(Me(h,Ce.UPDATE)){c.setValue("questions.".concat(r,"._data_status"),Me(h,Ce.UPDATE))}}}))}})),(0,a.Y)(Wt.A,{section:"Curriculum.Quiz.after_question_description",namePrefix:"questions.".concat(r,"."),form:c}))),(0,a.Y)(x.A,{when:o},(0,a.Y)("div",{key:Math.random(),ref:d,css:xu.alertWrapper},(0,a.Y)(en.A,{type:"danger",icon:"warning"},o===null||o===void 0?void 0:o.message))),v[f],(0,a.Y)(x.A,{when:_u&&f!=="h5p"},(0,a.Y)("div",{css:xu.questionAnswer},(0,a.Y)(b.xI,{control:c.control,name:"questions.".concat(r,".answer_explanation"),render:function t(e){return(0,a.Y)(dn,mu({},e,{label:(0,u.__)("Answer Explanation","tutor"),placeholder:(0,u.__)("Write answer explanation...","tutor"),onChange:function t(){if(Me(h,Ce.UPDATE)){c.setValue("questions.".concat(r,"._data_status"),Me(h,Ce.UPDATE))}}}))}}))))};const Au=wu;var xu={questionForm:function t(e){return(0,a.AH)(E.x.display.flex("column"),";padding-right:",O.YK[48],";gap:",O.YK[16],";animation:",e?undefined:"fadeIn 0.25s ease-in-out",";@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}",O.EA.smallMobile,"{padding-right:",O.YK[8],";}"+(true?"":0),true?"":0)},questionWithIndex:(0,a.AH)(E.x.display.flex("row"),";align-items:flex-start;padding-left:",O.YK[40],";gap:",O.YK[4],";",O.EA.smallMobile,"{padding-left:",O.YK[8],";}"+(true?"":0),true?"":0),questionIndex:(0,a.AH)("margin-top:",O.YK[10],";",I.I.heading6(),";color:",O.I6.text.hints,";"+(true?"":0),true?"":0),questionTitleAndDesc:(0,a.AH)(E.x.display.flex("column"),";gap:",O.YK[8],";width:100%;"+(true?"":0),true?"":0),h5pShortCode:(0,a.AH)("margin-left:",O.YK[8],";padding:",O.YK[4]," ",O.YK[8],";",I.I.caption(),";color:",O.I6.text.white,";background-color:#2575be;border-radius:",O.Vq.card,";width:fit-content;font-family:'Fire Code',monospace;"+(true?"":0),true?"":0),questionAnswer:(0,a.AH)("padding-left:",O.YK[40],";",O.EA.smallMobile,"{padding-left:",O.YK[8],";}"+(true?"":0),true?"":0),emptyState:(0,a.AH)(E.x.flexCenter("column"),";padding-left:",O.YK[40],";padding-right:",O.YK[48],";gap:",O.YK[16],";"+(true?"":0),true?"":0),emptyStateImage:true?{name:"vdj5lp",styles:"width:220px;height:auto"}:0,emptyStateText:(0,a.AH)(I.I.small(),";color:",O.I6.text.subdued,";text-align:center;max-width:330px;"+(true?"":0),true?"":0),alertWrapper:(0,a.AH)("padding-left:",O.YK[40],";animation:shake 0.3s linear;@keyframes shake{0%{transform:translateX(0);}25%{transform:translateX(-5px);}50%{transform:translateX(5px);}75%{transform:translateX(-5px);}100%{transform:translateX(0);}}"+(true?"":0),true?"":0)};function Yu(){return Yu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yu.apply(null,arguments)}function Ou(t,e){return qu(t)||Su(t,e)||Eu(t,e)||Iu()}function Iu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Eu(t,e){if(t){if("string"==typeof t)return ku(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ku(t,e):void 0}}function ku(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Su(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function qu(t){if(Array.isArray(t))return t}function Pu(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var ju={true_false:"quizTrueFalse",multiple_choice:"quizMultiChoice",open_ended:"quizEssay",fill_in_the_blank:"quizFillInTheBlanks",short_answer:"quizShortAnswer",matching:"quizImageMatching",image_answering:"quizImageAnswer",ordering:"quizOrdering",h5p:"quizH5p"};var Cu=!!Gt.P.tutor_pro_url;var Tu=function t(e){var r=e.question,n=e.index,o=e.onDuplicateQuestion,l=e.onRemoveQuestion,c=e.isOverlay,d=c===void 0?false:c;var f=Hr(),p=f.activeQuestionIndex,v=f.activeQuestionId,g=f.validationError,m=f.setActiveQuestionId,w=f.setValidationError,A=f.contentType;var x=(0,b.xW)();var Y=(0,s.useState)(false),I=Ou(Y,2),E=I[0],k=I[1];var S=(0,s.useRef)(null);var q=(0,i.gl)({id:r.question_id,animateLayoutChanges:Yo.J}),P=q.attributes,j=q.listeners,C=q.setNodeRef,T=q.transform,D=q.transition,L=q.isDragging;var z={transform:y.Ks.Transform.toString(T),transition:D,opacity:L?.3:undefined,background:L?O.I6.stroke.hover:undefined};(0,s.useEffect)((function(){if(v===r.question_id){var t;(t=S.current)===null||t===void 0||t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}),[v,r.question_id]);return(0,a.Y)("div",Yu({},P,{key:r.question_id,css:zu.questionItem({isActive:String(v)===String(r.question_id),isDragging:d,isThreeDotsOpen:E}),ref:function t(e){C(e);S.current=e},style:z,onClick:function t(){if(v===r.question_id){return}var e=(0,Ft.Op)(p,x);if(e!==true){w(e);return}w(null);m(r.question_id)},onKeyDown:function t(e){if(e.key==="Enter"||e.key===" "){if(v===r.question_id){return}var n=(0,Ft.Op)(p,x);if(n!==true){w(n);return}w(null);m(r.question_id)}}}),(0,a.Y)("div",{css:zu.iconAndSerial({isDragging:d}),"data-icon-serial":true},(0,a.Y)("span",{"data-serial":true},n+1),(0,a.Y)("button",Yu({"data-drag-icon":true},j,{type:"button",css:zu.dragButton}),(0,a.Y)(h.A,{"data-drag-icon":true,name:"dragVertical",width:24,height:24})),(0,a.Y)(h.A,{name:ju[r.question_type],width:24,height:24,"data-question-icon":true})),(0,a.Y)("span",{css:zu.questionTitle({isActive:String(v)===String(r.question_id)})},r.question_title),(0,a.Y)(et,{isOpen:E,onClick:function t(e){e.stopPropagation();var r=(0,Ft.Op)(p,x);k(true);if(r!==true){w(r)}},animationType:Q.J6.slideDown,closePopover:function t(){return k(false)},dotsOrientation:"vertical",maxWidth:Cu?"150px":"160px",isInverse:true,arrowPosition:"auto",size:"small",hideArrow:true,"data-three-dots":true},!g&&A!=="tutor_h5p_quiz"&&(0,a.Y)(et.Option,{text:(0,a.Y)("div",{css:zu.duplicate},(0,u.__)("Duplicate","tutor"),!Cu&&(0,a.Y)(_.A,{size:"small",content:(0,u.__)("Pro","tutor")})),icon:(0,a.Y)(h.A,{name:"duplicate",width:24,height:24}),disabled:!Cu,onClick:function t(e){e.stopPropagation();o(r);k(false)}}),(0,a.Y)(et.Option,{isTrash:true,text:(0,u.__)("Delete","tutor"),icon:(0,a.Y)(h.A,{name:"delete",width:24,height:24}),onClick:function t(e){e.stopPropagation();l();k(false)}})))};const Du=Tu;var Lu=true?{name:"1c7c6p3",styles:"[data-three-dots]{opacity:1;}"}:0;var zu={questionItem:function t(e){var r=e.isActive,n=r===void 0?false:r,o=e.isDragging,i=o===void 0?false:o,u=e.isThreeDotsOpen,s=u===void 0?false:u;return(0,a.AH)("padding:",O.YK[10]," ",O.YK[8]," ",O.YK[10]," ",O.YK[28],";display:flex;align-items:center;justify-content:space-between;gap:",O.YK[12],";border-bottom:1px solid ",O.I6.stroke.divider,";cursor:pointer;transition:border 0.3s ease-in-out,background-color 0.3s ease-in-out;[data-three-dots]{opacity:0;background:transparent;svg{color:",O.I6.icon["default"],";}:focus-visible{opacity:1;}}",n&&(0,a.AH)("color:",O.I6.text.brand,";background-color:",O.I6.background.white,";[data-icon-serial]{border-top-right-radius:3px;border-bottom-right-radius:3px;border-color:transparent;}"+(true?"":0),true?"":0)," ",s&&Lu," :hover{background-color:",O.I6.background.hover,";[data-serial]{display:none;}[data-drag-icon]{display:block;}[data-icon-serial]{border-top-right-radius:3px;border-bottom-right-radius:3px;border-color:transparent;}[data-three-dots]{opacity:1;}}:focus-visible{outline:2px solid ",O.I6.stroke.brand,";outline-offset:-2px;border-radius:",O.Vq.card,";[data-three-dots]{opacity:1;}}",i&&(0,a.AH)("box-shadow:",O.r7.drag,";background-color:",O.I6.background.white,";border-radius:",O.Vq.card,";:hover{background-color:",O.I6.background.white,";}"+(true?"":0),true?"":0)," ",O.EA.smallMobile,"{padding:",O.YK[8]," ",O.YK[8]," ",O.YK[8]," ",O.YK[8],";[data-three-dots]{opacity:1;}}"+(true?"":0),true?"":0)},iconAndSerial:function t(e){var r=e.isDragging,n=r===void 0?false:r;return(0,a.AH)("display:grid;grid-template-columns:1fr 1fr;align-items:center;border-radius:3px 0 0 3px;width:64px;padding:",O.YK[4]," ",O.YK[8]," ",O.YK[4]," ",O.YK[4],";flex-shrink:0;column-gap:",O.YK[12],";place-items:center center;[data-drag-icon]{display:none;color:",O.I6.icon.hints,";cursor:",n?"grabbing":"grab",";}[data-question-icon]{flex-shrink:0;}svg{flex-shrink:0;}[data-serial]{width:24px;display:block;",I.I.caption("medium")," text-align:center;flex-grow:1;}"+(true?"":0),true?"":0)},questionTitle:function t(e){var r=e.isActive,n=r===void 0?false:r;return(0,a.AH)(I.I.small(n?"medium":"regular"),";color:",n?O.I6.text.brand:O.I6.text.subdued,";flex-grow:1;"+(true?"":0),true?"":0)},duplicate:(0,a.AH)("display:flex;align-items:center;gap:",O.YK[4],";"+(true?"":0),true?"":0),dragButton:(0,a.AH)(E.x.resetButton,";&:focus,&:active,&:hover{background:none;}"+(true?"":0),true?"":0)};function Ku(t){"@babel/helpers - typeof";return Ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(t)}function Hu(t){return Ru(t)||Uu(t)||Ju(t)||Nu()}function Nu(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Uu(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Ru(t){if(Array.isArray(t))return Xu(t)}function Wu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Bu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Wu(Object(r),!0).forEach((function(e){Mu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mu(t,e,r){return(e=Fu(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fu(t){var e=Gu(t,"string");return"symbol"==Ku(e)?e:e+""}function Gu(t,e){if("object"!=Ku(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ku(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Qu(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Ju(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function t(){};return{s:o,n:function e(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();return a=e.done,e},e:function t(e){u=!0,i=e},f:function t(){try{a||null==r["return"]||r["return"]()}finally{if(u)throw i}}}}function Vu(t,e){return ts(t)||Zu(t,e)||Ju(t,e)||$u()}function $u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ju(t,e){if(t){if("string"==typeof t)return Xu(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xu(t,e):void 0}}function Xu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Zu(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function ts(t){if(Array.isArray(t))return t}var es=[{label:(0,u.__)("True/False","tutor"),value:"true_false",icon:"quizTrueFalse",isPro:false},{label:(0,u.__)("Multiple Choice","tutor"),value:"multiple_choice",icon:"quizMultiChoice",isPro:false},{label:(0,u.__)("Open Ended/Essay","tutor"),value:"open_ended",icon:"quizEssay",isPro:false},{label:(0,u.__)("Fill in the Blanks","tutor"),value:"fill_in_the_blank",icon:"quizFillInTheBlanks",isPro:false},{label:(0,u.__)("Short Answer","tutor"),value:"short_answer",icon:"quizShortAnswer",isPro:true},{label:(0,u.__)("Matching","tutor"),value:"matching",icon:"quizImageMatching",isPro:true},{label:(0,u.__)("Image Answering","tutor"),value:"image_answering",icon:"quizImageAnswer",isPro:true},{label:(0,u.__)("Ordering","tutor"),value:"ordering",icon:"quizOrdering",isPro:true}];var rs=!!Gt.P.tutor_pro_url;var ns=function t(e){var r=e.isEditing;var l=(0,s.useState)(null),d=Vu(l,2),f=d[0],p=d[1];var v=(0,s.useState)(false),y=Vu(v,2),g=y[0],m=y[1];var w=(0,s.useRef)(null);var O=(0,s.useRef)(null);var I=(0,b.xW)();var E=Hr(),S=E.contentType,q=E.activeQuestionIndex,P=E.validationError,j=E.setActiveQuestionId,C=E.setValidationError;var T=(0,b.jz)({control:I.control,name:"questions"}),D=T.remove,L=T.append,z=T.insert,K=T.move,H=T.fields;var N=(0,A.h)(),U=N.showModal;var R=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:10}}),(0,n.MS)(n.uN,{coordinateGetter:i.JR}));var W=(0,s.useMemo)((function(){if(!f){return null}return H.find((function(t){return t.question_id===f}))}),[f,H]);var B=I.watch("questions")||[];var F=function t(e,r){var n=(0,Ft.Op)(q,I);if(n!==true){C(n);m(false);return}var o=(0,k.Ak)();L({_data_status:Ce.NEW,question_id:o,question_title:e==="h5p"?r===null||r===void 0?void 0:r.title:(0,u.sprintf)((0,u.__)("Question %d","tutor"),H.length+1),question_description:e==="h5p"?r===null||r===void 0?void 0:r.id:"",question_type:e,question_answers:e==="true_false"?[{answer_id:(0,k.Ak)(),_data_status:Ce.NEW,is_saved:true,answer_title:(0,u.__)("True","tutor"),is_correct:"1",answer_order:1,answer_two_gap_match:"",answer_view_format:"text",belongs_question_id:o,belongs_question_type:"true_false"},{answer_id:(0,k.Ak)(),is_saved:true,_data_status:Ce.NEW,answer_title:(0,u.__)("False","tutor"),is_correct:"0",answer_order:2,answer_two_gap_match:"",answer_view_format:"text",belongs_question_id:o,belongs_question_type:"true_false"}]:e==="fill_in_the_blank"?[{_data_status:Ce.NEW,is_saved:false,answer_id:(0,k.Ak)(),answer_title:"",belongs_question_id:o,belongs_question_type:"fill_in_the_blank",answer_two_gap_match:"",answer_view_format:"",answer_order:0,is_correct:"0"}]:[],answer_explanation:"",question_mark:1,question_order:H.length+1,question_settings:{answer_required:false,question_mark:S==="tutor_h5p_quiz"?0:1,question_type:e,randomize_question:false,show_question_mark:false}});C(null);j(o);m(false)};var G=function t(e){var r=Qu(e),n;try{for(r.s();!(n=r.n()).done;){var o=n.value;F("h5p",o)}}catch(t){r.e(t)}finally{r.f()}};var V=function t(e,r){var n=I.watch("questions.".concat(r));if(!n||P){return}var o=Bu(Bu({},e),{},{question_id:(0,k.Ak)(),_data_status:Ce.NEW,question_title:"".concat(n.question_title," (copy)"),question_answers:n.question_answers.map((function(t){return Bu(Bu({},t),{},{answer_id:(0,k.Ak)(),_data_status:Ce.NEW})}))});var i=r+1;z(i,o)};var $=function t(e,r){D(e);if(q===e){j("");C(null)}if(r._data_status!==Ce.NEW){I.setValue("deleted_question_ids",[].concat(Hu(I.getValues("deleted_question_ids")),[r.question_id]))}};var J=function t(e){var r=e.active,n=e.over;if(!n||r.id===n.id){return}var o=H.findIndex((function(t){return t.question_id===r.id}));var i=H.findIndex((function(t){return t.question_id===n.id}));K(o,i)};(0,s.useEffect)((function(){if(w.current){w.current.style.maxHeight="".concat(window.innerHeight-w.current.getBoundingClientRect().top,"px")}}),[w.current,r]);if(!I.getValues("quiz_title")){return null}return(0,a.Y)("div",null,(0,a.Y)("div",{css:is.questionsLabel},(0,a.Y)("span",null,(0,u.__)("Questions","tutor")),(0,a.Y)("button",{"data-cy":"add-question",ref:O,type:"button",onClick:function t(){if(S==="tutor_h5p_quiz"){U({component:dr,props:{title:(0,u.__)("Select H5P Content","tutor"),onAddContent:function t(e){G(e)},contentType:"tutor_h5p_quiz",addedContentIds:B.map((function(t){return t.question_description}))}})}else{m(true)}}},(0,a.Y)(h.A,{name:"plusSquareBrand",width:32,height:32}))),(0,a.Y)("div",{ref:w,css:is.questionList},(0,a.Y)(x.A,{when:B.length>0,fallback:(0,a.Y)("div",{css:is.emptyQuestionText},(0,u.__)("No questions added yet.","tutor"))},(0,a.Y)(n.Mp,{sensors:R,collisionDetection:n.fp,modifiers:[o.Q_],onDragStart:function t(e){p(e.active.id)},onDragEnd:function t(e){return J(e)}},(0,a.Y)(i.gB,{items:B.map((function(t){return Bu(Bu({},t),{},{id:t.question_id})})),strategy:i._G},(0,a.Y)(ct.A,{each:B},(function(t,e){return(0,a.Y)(Du,{key:t.question_id,question:t,index:e,onDuplicateQuestion:function t(r){V(r,e)},onRemoveQuestion:function r(){return $(e,t)}})}))),(0,c.createPortal)((0,a.Y)(n.Hd,null,(0,a.Y)(x.A,{when:W},(function(t){var e=H.findIndex((function(e){return e.question_id===t.question_id}));return(0,a.Y)(Du,{key:t.question_id,question:t,index:e,onDuplicateQuestion:k.lQ,onRemoveQuestion:k.lQ,isOverlay:true})}))),document.body))),(0,a.Y)(M.A,{gap:4,maxWidth:"240px",arrow:Y.vN.isAboveTablet?"top":Y.vN.isAboveMobile?"right":"absoluteCenter",triggerRef:O,isOpen:g,closePopover:function t(){return m(false)},animationType:Q.J6.slideUp},(0,a.Y)("div",{css:is.questionOptionsWrapper},(0,a.Y)("span",{css:is.questionTypeOptionsTitle},(0,u.__)("Select Question Type","tutor")),es.map((function(t){return(0,a.Y)(x.A,{key:t.value,when:t.isPro&&!rs,fallback:(0,a.Y)("button",{key:t.value,type:"button",css:is.questionTypeOption,onClick:function e(){F(t.value)}},(0,a.Y)(h.A,{name:t.icon,width:24,height:24}),(0,a.Y)("span",null,t.label))},(0,a.Y)("button",{key:t.value,type:"button",css:is.questionTypeOption,disabled:true,onClick:k.lQ},(0,a.Y)(h.A,{"data-question-icon":true,name:t.icon,width:24,height:24}),(0,a.Y)("div",null,(0,a.Y)("span",null,t.label),(0,a.Y)(_.A,{size:"small",content:(0,u.__)("Pro","tutor")}))))}))))))};const os=ns;var is={questionsLabel:(0,a.AH)("display:flex;gap:",O.YK[4],";align-items:center;justify-content:space-between;border-bottom:1px solid ",O.I6.stroke.divider,";padding:",O.YK[16]," ",O.YK[16]," ",O.YK[16]," ",O.YK[28],";",I.I.caption("medium"),";color:",O.I6.text.subdued,";button{",E.x.resetButton,";width:32px;height:32px;border-radius:",O.Vq[6],";&:focus,&:active,&:hover{background:none;}svg{color:",O.I6.action.primary["default"],";width:100%;height:100%;}:focus-visible{outline:2px solid ",O.I6.stroke.brand,";}}",O.EA.smallMobile,"{padding:",O.YK[16],";}"+(true?"":0),true?"":0),questionList:(0,a.AH)(E.x.overflowYAuto,";scrollbar-gutter:auto;padding:",O.YK[8]," 0 ",O.YK[8]," 0;"+(true?"":0),true?"":0),questionTypeOptionsTitle:(0,a.AH)(I.I.caption("medium"),";color:",O.I6.text.subdued,";padding:",O.YK[8]," ",O.YK[16]," ",O.YK[8]," ",O.YK[20],";border-bottom:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0),questionOptionsWrapper:(0,a.AH)("display:flex;flex-direction:column;padding-block:",O.YK[6],";"+(true?"":0),true?"":0),questionTypeOption:(0,a.AH)(E.x.resetButton,";color:",O.I6.text.title,";width:100%;padding:",O.YK[8]," ",O.YK[16]," ",O.YK[8]," ",O.YK[20],";transition:background-color 0.3s ease-in-out;display:flex;align-items:center;gap:",O.YK[10],";border:2px solid transparent;div{",E.x.display.flex(),";align-items:center;gap:",O.YK[4],";}&:focus,&:active,&:hover{background:none;color:",O.I6.text.title,";}:disabled{cursor:not-allowed;color:",O.I6.text.primary,";[data-question-icon]{filter:grayscale(100%);}}:hover:enabled{background-color:",O.I6.background.hover,";color:",O.I6.text.title,";}:focus:enabled,:active:enabled{border-color:",O.I6.stroke.brand,";}"+(true?"":0),true?"":0),emptyQuestionText:(0,a.AH)(I.I.small(),";color:",O.I6.text.subdued,";padding:",O.YK[8]," ",O.YK[16]," ",O.YK[8]," ",O.YK[28],";"+(true?"":0),true?"":0)};function as(t){"@babel/helpers - typeof";return as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},as(t)}function us(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ss(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?us(Object(r),!0).forEach((function(e){ls(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):us(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ls(t,e,r){return(e=cs(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cs(t){var e=ds(t,"string");return"symbol"==as(e)?e:e+""}function ds(t,e){if("object"!=as(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=as(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function fs(t){return vs(t)||hs(t)||ms(t)||ps()}function ps(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hs(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function vs(t){if(Array.isArray(t))return bs(t)}function ys(t,e){return ws(t)||_s(t,e)||ms(t,e)||gs()}function gs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ms(t,e){if(t){if("string"==typeof t)return bs(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bs(t,e):void 0}}function bs(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _s(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function ws(t){if(Array.isArray(t))return t}function As(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var xs=function t(e){var r;var n=e.children,o=e.hasBorder,i=o===void 0?false:o,u=e.title,l=e.subtitle,c=e.actionTray,d=e.collapsed,f=d===void 0?false:d,p=e.noSeparator,v=p===void 0?false:p,y=e.hideArrow,m=y===void 0?false:y,b=e.isAlternative,_=b===void 0?false:b,w=e.collapsedAnimationDependencies;var A=(0,s.useState)(f),Y=ys(A,2),O=Y[0],I=Y[1];var E=(0,s.useRef)(null);var k=(0,g.zh)({height:!O?(r=E.current)===null||r===void 0?void 0:r.scrollHeight:0,opacity:!O?1:0,overflow:"hidden",config:{duration:300,easing:function t(e){return e*(2-e)}}},[O].concat(fs(w||[]))),S=ys(k,2),q=S[0],P=S[1];(0,s.useEffect)((function(){if((0,jn.O9)(E.current)){P.start({height:!O?E.current.scrollHeight:0,opacity:!O?1:0})}}),[O].concat(fs(w||[])));return(0,a.Y)("div",{css:Is.wrapper(i)},(0,a.Y)("div",{css:Is.headerWrapper(O||v,_)},(0,a.Y)("div",{css:Is.headerAndAction},(0,a.Y)("div",{css:Is.header},(0,a.Y)("h5",{css:Is.title},u),(0,a.Y)(x.A,{when:l},(0,a.Y)("p",{css:Is.subtitle},l))),(0,a.Y)("div",{css:Is.actions},(0,a.Y)(x.A,{when:c},c),(0,a.Y)(x.A,{when:!m},(0,a.Y)("button",{type:"button",css:Is.collapseButton({isCollapsed:O}),onClick:function t(){return I(!O)}},(0,a.Y)(h.A,{name:"chevronDown",width:24,height:24,style:Is.arrowUpDown})))))),(0,a.Y)(g.CS.div,{style:ss({},q)},(0,a.Y)("div",{ref:E,css:Is.cardBody},n)))};const Ys=xs;var Os=true?{name:"21xn5r",styles:"transform:rotate(180deg)"}:0;var Is={wrapper:function t(e){return(0,a.AH)("width:100%;border-radius:",O.Vq.card,";background-color:",O.I6.background.white,";box-shadow:",O.r7.card,";",e&&(0,a.AH)("box-shadow:none;border:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},headerWrapper:function t(e,r){return(0,a.AH)("padding:",O.YK[8],";display:flex;flex-direction:column;justify-content:center;gap:",O.YK[4],";",!e&&(0,a.AH)("border-bottom:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0)," ",r&&(0,a.AH)("padding:",O.YK[12]," ",O.YK[16]," ",O.YK[12]," ",O.YK[24],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},headerAndAction:true?{name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"}:0,header:(0,a.AH)("display:flex;flex-direction:column;padding:",O.YK[4]," ",O.YK[16],";"+(true?"":0),true?"":0),subtitle:(0,a.AH)(I.I.caption(),";color:",O.I6.text.subdued,";"+(true?"":0),true?"":0),title:(0,a.AH)(I.I.body("medium"),";color:",O.I6.text.primary,";display:flex;align-items:center;"+(true?"":0),true?"":0),collapseButton:function t(e){var r=e.isCollapsed;return(0,a.AH)(E.x.resetButton,";display:flex;align-items:center;transition:transform 0.3s ease-in-out;",r&&Os," &:focus,&:active,&:hover{background:none;color:",O.I6.icon["default"],";}"+(true?"":0),true?"":0)},arrowUpDown:(0,a.AH)("color:",O.I6.icon["default"],";display:flex;justify-content:center;align-items:center;"+(true?"":0),true?"":0),cardBody:(0,a.AH)("padding:",O.YK[16]," ",O.YK[24]," ",O.YK[32]," ",O.YK[24],";"+(true?"":0),true?"":0),actions:(0,a.AH)("display:flex;align-items:center;gap:",O.YK[8],";"+(true?"":0),true?"":0)};var Es=r(41594);function ks(t){"@babel/helpers - typeof";return ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ks(t)}function Ss(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ss(Object(r),!0).forEach((function(e){Ps(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ss(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ps(t,e,r){return(e=js(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function js(t){var e=Cs(t,"string");return"symbol"==ks(e)?e:e+""}function Cs(t,e){if("object"!=ks(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ks(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Ts(){return Ts=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ts.apply(null,arguments)}var Ds=(0,Ft.p9)();var Ls=function t(e){var r=e.contentDripType;var n=Hr(),o=n.quizId,i=n.contentType;var s=(0,b.xW)();var l=s.watch("quiz_option.feedback_mode");var c=(0,k.GR)(Y.oW.CONTENT_DRIP)&&r==="unlock_sequentially"&&l==="retry";var d=s.watch("quiz_option.content_drip_settings.prerequisites");var f=(0,m.jE)();var p=f.getQueryData(["Topic",Ds]);var v=Object.keys(s.formState.errors).length;return(0,a.Y)("div",{css:Ks.settings},(0,a.Y)(Ys,{title:(0,u.__)("Basic Settings","tutor"),collapsedAnimationDependencies:[l,d===null||d===void 0?void 0:d.length,v]},(0,a.Y)("div",{css:Ks.formWrapper},(0,a.Y)(x.A,{when:i!=="tutor_h5p_quiz"},(0,a.Y)("div",{css:Ks.timeWrapper},(0,a.Y)(b.xI,{name:"quiz_option.time_limit.time_value",control:s.control,rules:(0,Vt.WN)(),render:function t(e){return(0,a.Y)(ut.A,Ts({},e,{type:"number",label:(0,u.__)("Time Limit","tutor"),helpText:(0,u.__)("Set a time limit for this quiz. A value of 0 indicates no time limit","tutor"),selectOnFocus:true}))}}),(0,a.Y)(b.xI,{name:"quiz_option.time_limit.time_type",control:s.control,render:function t(e){return(0,a.Y)(lt.A,Ts({},e,{label:(0,a.Y)(Es.Fragment,null,""),options:[{label:(0,u.__)("Seconds","tutor"),value:"seconds"},{label:(0,u.__)("Minutes","tutor"),value:"minutes"},{label:(0,u.__)("Hours","tutor"),value:"hours"},{label:(0,u.__)("Days","tutor"),value:"days"},{label:(0,u.__)("Weeks","tutor"),value:"weeks"}]}))}}))),(0,a.Y)(x.A,{when:i!=="tutor_h5p_quiz"},(0,a.Y)(b.xI,{name:"quiz_option.hide_quiz_time_display",control:s.control,render:function t(e){return(0,a.Y)(he.A,Ts({},e,{label:(0,u.__)("Hide Quiz Time","tutor")}))}}),(0,a.Y)(b.xI,{name:"quiz_option.feedback_mode",control:s.control,render:function t(e){return(0,a.Y)(lt.A,Ts({},e,{label:(0,u.__)("Feedback Mode","tutor"),leftIcon:(0,a.Y)(h.A,{name:"eye",width:32,height:32}),options:[{label:(0,u.__)("Default","tutor"),value:"default",description:(0,u.__)("Answers are shown after finishing the quiz.","tutor")},{label:(0,u.__)("Reveal Mode","tutor"),value:"reveal",description:(0,u.__)("Show answer after attempting the question.","tutor")},{label:(0,u.__)("Retry","tutor"),value:"retry",description:(0,u.__)("Allows students to retake the quiz after their first attempt.","tutor")}]}))}})),(0,a.Y)(x.A,{when:l==="retry"},(0,a.Y)(b.xI,{name:"quiz_option.attempts_allowed",control:s.control,rules:qs(qs({},(0,Vt.WN)()),{},{validate:function t(e){if(e>=0&&e<=20){return true}return(0,u.__)("Allowed attempts must be between 0 and 20","tutor")}}),render:function t(e){return(0,a.Y)(ut.A,Ts({},e,{type:"number",label:(0,u.__)("Attempts Allowed","tutor"),helpText:(0,u.__)('Define how many times a student can retake this quiz. Setting it to "0" allows unlimited attempts',"tutor"),selectOnFocus:true}))}})),(0,a.Y)(x.A,{when:c&&i!=="tutor_h5p_quiz"},(0,a.Y)(b.xI,{name:"quiz_option.pass_is_required",control:s.control,rules:(0,Vt.WN)(),render:function t(e){return(0,a.Y)(he.A,Ts({},e,{label:(0,u.__)("Passing is Required","tutor"),helpText:(0,u.__)("By enabling this option, the student must have to pass it to access the next quiz","tutor")}))}})),(0,a.Y)(b.xI,{name:"quiz_option.passing_grade",control:s.control,rules:(0,Vt.WN)(),render:function t(e){return(0,a.Y)(st.A,Ts({},e,{type:"number",label:(0,u.__)("Passing Grade","tutor"),helpText:(0,u.__)("Set the minimum score percentage required to pass this quiz","tutor"),content:"%",contentPosition:"right",contentCss:E.x.inputCurrencyStyle}))}}),(0,a.Y)(x.A,{when:i!=="tutor_h5p_quiz"},(0,a.Y)(b.xI,{name:"quiz_option.max_questions_for_answer",rules:(0,Vt.WN)(),control:s.control,render:function t(e){return(0,a.Y)(ut.A,Ts({},e,{type:"number",label:(0,u.__)("Max Question Allowed to Answer","tutor"),helpText:(0,u.__)("Set the number of quiz questions randomly from your question pool. If the set number exceeds available questions, all questions will be included","tutor"),selectOnFocus:true}))}})),(0,a.Y)(x.A,{when:(0,k.GR)(Y.oW.CONTENT_DRIP)&&i!=="tutor_h5p_quiz"},(0,a.Y)(x.A,{when:r==="specific_days"},(0,a.Y)(b.xI,{name:"quiz_option.content_drip_settings.after_xdays_of_enroll",control:s.control,render:function t(e){return(0,a.Y)(ut.A,Ts({},e,{type:"number",label:(0,a.Y)("div",{css:Ks.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Available after days","tutor")),helpText:(0,u.__)("This quiz will be available after the given number of days.","tutor"),placeholder:"0",selectOnFocus:true}))}})),(0,a.Y)(x.A,{when:r==="unlock_by_date"},(0,a.Y)(b.xI,{name:"quiz_option.content_drip_settings.unlock_date",control:s.control,render:function t(e){return(0,a.Y)(it.A,Ts({},e,{label:(0,a.Y)("div",{css:Ks.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Unlock Date","tutor")),placeholder:(0,u.__)("Select Unlock Date","tutor"),helpText:(0,u.__)("This quiz will be available from the given date. Leave empty to make it available immediately.","tutor")}))}})),(0,a.Y)(x.A,{when:r==="after_finishing_prerequisites"},(0,a.Y)(b.xI,{name:"quiz_option.content_drip_settings.prerequisites",control:s.control,render:function t(e){return(0,a.Y)(Ht,Ts({},e,{label:(0,a.Y)("div",{css:Ks.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Prerequisites","tutor")),placeholder:(0,u.__)("Select Prerequisite","tutor"),options:p.reduce((function(t,e){t.push(qs(qs({},e),{},{contents:e.contents.filter((function(t){return String(t.ID)!==String(o)}))}));return t}),[])||[],isSearchable:true,helpText:(0,u.__)("Select items that should be complete before this item","tutor")}))}}))))),(0,a.Y)(Ys,{title:(0,u.__)("Advanced Settings","tutor"),collapsedAnimationDependencies:[v]},(0,a.Y)("div",{css:Ks.formWrapper},(0,a.Y)(b.xI,{name:"quiz_option.quiz_auto_start",control:s.control,render:function t(e){return(0,a.Y)(he.A,Ts({},e,{label:(0,u.__)("Quiz Auto Start","tutor"),helpText:(0,u.__)("When enabled, the quiz begins immediately as soon as the page loads","tutor")}))}}),(0,a.Y)("div",{css:Ks.questionLayoutAndOrder},(0,a.Y)(x.A,{when:i!=="tutor_h5p_quiz"},(0,a.Y)(b.xI,{name:"quiz_option.question_layout_view",control:s.control,render:function t(e){return(0,a.Y)(lt.A,Ts({},e,{label:(0,u.__)("Question Layout","tutor"),placeholder:(0,u.__)("Select an option","tutor"),options:[{label:(0,u.__)("Single question","tutor"),value:"single_question"},{label:(0,u.__)("Question pagination","tutor"),value:"question_pagination"},{label:(0,u.__)("Question below each other","tutor"),value:"question_below_each_other"}]}))}})),(0,a.Y)(b.xI,{name:"quiz_option.questions_order",control:s.control,render:function t(e){return(0,a.Y)(lt.A,Ts({},e,{label:(0,u.__)("Question Order","tutor"),placeholder:(0,u.__)("Select an option","tutor"),options:[{label:(0,u.__)("Random","tutor"),value:"rand"},{label:(0,u.__)("Sorting","tutor"),value:"sorting"},{label:(0,u.__)("Ascending","tutor"),value:"asc"},{label:(0,u.__)("Descending","tutor"),value:"desc"}]}))}})),(0,a.Y)(x.A,{when:i!=="tutor_h5p_quiz"},(0,a.Y)(b.xI,{name:"quiz_option.hide_question_number_overview",control:s.control,render:function t(e){return(0,a.Y)(he.A,Ts({},e,{label:(0,u.__)("Hide Question Number","tutor")}))}}),(0,a.Y)(b.xI,{name:"quiz_option.short_answer_characters_limit",control:s.control,render:function t(e){return(0,a.Y)(ut.A,Ts({},e,{type:"number",label:(0,u.__)("Set Character Limit for Short Answers","tutor"),selectOnFocus:true}))}}),(0,a.Y)(b.xI,{name:"quiz_option.open_ended_answer_characters_limit",control:s.control,render:function t(e){return(0,a.Y)(ut.A,Ts({},e,{type:"number",label:(0,u.__)("Set Character Limit for Open-Ended/Essay Answers","tutor"),selectOnFocus:true}))}})))),(0,a.Y)(Wt.A,{section:"Curriculum.Quiz.bottom_of_settings",form:s}))};const zs=Ls;var Ks={settings:(0,a.AH)(E.x.display.flex("column")," gap:",O.YK[24],";"+(true?"":0),true?"":0),formWrapper:(0,a.AH)(E.x.display.flex("column")," gap:",O.YK[20],";"+(true?"":0),true?"":0),timeWrapper:(0,a.AH)(E.x.display.flex()," align-items:flex-start;gap:",O.YK[8],";"+(true?"":0),true?"":0),questionLayoutAndOrder:(0,a.AH)(E.x.display.flex()," gap:",O.YK[20],";",O.EA.smallMobile,"{flex-direction:column;}"+(true?"":0),true?"":0),contentDripLabel:(0,a.AH)("display:flex;align-items:center;svg{margin-right:",O.YK[4],";color:",O.I6.icon.success,";}"+(true?"":0),true?"":0)};var Hs=r(41594);function Ns(t){"@babel/helpers - typeof";return Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ns(t)}function Us(){return Us=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Us.apply(null,arguments)}function Rs(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Rs=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(P([])));A&&A!==r&&n.call(A,a)&&(_=A);var x=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==Ns(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ns(e)+" is not iterable")}return m.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(x),l(x,s,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:P(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function Ws(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Bs(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ws(i,n,o,a,u,"next",t)}function u(t){Ws(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Ms(t,e){return $s(t)||Vs(t,e)||Gs(t,e)||Fs()}function Fs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gs(t,e){if(t){if("string"==typeof t)return Qs(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qs(t,e):void 0}}function Qs(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Vs(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function $s(t){if(Array.isArray(t))return t}var Js=(0,Ft.p9)();var Xs=function t(e){var r=e.closeModal,n=e.icon,o=e.title,i=e.subtitle,l=e.quizId,c=e.topicId,d=e.contentDripType,v=e.contentType;var y=(0,Bt._)(),g=y.fields;var m=(0,s.useState)(false),_=Ms(m,2),A=_[0],O=_[1];var I=(0,s.useState)("details"),E=Ms(I,2),S=E[0],q=E[1];var P=(0,s.useState)(!(0,jn.O9)(l)),j=Ms(P,2),C=j[0],T=j[1];var D=(0,s.useRef)(null);var L=Re();var z=Be(l||"");var K=(0,w.d)(),H=K.showToast;var N=(0,Qt.p)({defaultValues:{quiz_option:{time_limit:{time_value:0,time_type:"minutes"},hide_quiz_time_display:false,feedback_mode:"retry",attempts_allowed:10,passing_grade:80,max_questions_for_answer:v==="tutor_h5p_quiz"?0:10,quiz_auto_start:false,question_layout_view:v==="tutor_h5p_quiz"?"question_below_each_other":"single_question",questions_order:"rand",hide_question_number_overview:false,short_answer_characters_limit:200,open_ended_answer_characters_limit:500,content_drip_settings:{unlock_date:"",after_xdays_of_enroll:0,prerequisites:[]}},questions:[]},shouldFocusError:true});var U=N.formState.dirtyFields&&Object.keys(N.formState.dirtyFields).length>0;(0,s.useEffect)((function(){var t=function t(e){if(U){e.preventDefault();return}N.reset()};window.addEventListener("beforeunload",t);return function(){window.removeEventListener("beforeunload",t)}}),[U]);(0,s.useEffect)((function(){if(!z.data){return}var t=Te(z.data,(0,k.DE)({fields:g.Curriculum.Quiz}));N.reset(t)}),[z.data]);var R=function(){var t=Bs(Rs().mark((function t(e,n,o){var i,a,s;return Rs().wrap((function t(l){while(1)switch(l.prev=l.next){case 0:if(e.quiz_title){l.next=4;break}q("details");Promise.resolve().then((function(){N.trigger("quiz_title",{shouldFocus:true})}));return l.abrupt("return");case 4:if(!(e.questions.length===0)){l.next=8;break}q("details");H({message:(0,u.__)("Please add a question","tutor"),type:"danger"});return l.abrupt("return");case 8:i=(0,Ft.Op)(n,N);if(!(i!==true)){l.next=13;break}o(i);q("details");return l.abrupt("return");case 13:T(false);a=De(e,c,d,Js,(0,k.DE)({fields:g.Curriculum.Quiz,slotKey:"after_question_description"},{fields:g.Curriculum.Quiz,slotKey:"bottom_of_question_sidebar"}),(0,k.DE)({fields:g.Curriculum.Quiz,slotKey:"bottom_of_settings"}));l.next=17;return L.mutateAsync(a);case 17:s=l.sent;if(s.data){T(false);r({action:"CONFIRM"});N.reset()}case 19:case"end":return l.stop()}}),t)})));return function e(r,n,o){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){if(C){N.setFocus("quiz_title")}}),[C]);return(0,a.Y)(b.Op,N,(0,a.Y)(Nr,{quizId:l||"",contentType:v||"tutor_quiz"},(function(t){var e=t.activeQuestionIndex,s=t.activeQuestionId,c=t.setActiveQuestionId,y=t.setValidationError;return(0,a.Y)(Rt.A,{onClose:function t(){return r({action:"CLOSE"})},icon:U?(0,a.Y)(h.A,{name:"warning",width:24,height:24}):n,title:U?Y.vN.isAboveDesktop?(0,u.__)("Unsaved Changes","tutor"):"":o,subtitle:Y.vN.isAboveSmallMobile?i:"",maxWidth:1218,headerChildren:(0,a.Y)(Pr.A,{wrapperCss:tl.tabsWrapper,activeTab:S,tabList:[{label:Y.vN.isAboveMobile?(0,u.__)("Question Details","tutor"):"",value:"details",icon:!Y.vN.isAboveMobile?(0,a.Y)(h.A,{name:"text",width:24,height:24}):null},{label:Y.vN.isAboveMobile?(0,u.__)("Settings","tutor"):"",value:"settings",icon:!Y.vN.isAboveMobile?(0,a.Y)(h.A,{name:"settings",width:24,height:24}):null}],onChange:function t(e){return q(e)}}),actions:U&&(0,a.Y)(Hs.Fragment,null,(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){if(U){O(true);return}r()},ref:D},l?Y.vN.isAboveSmallMobile?(0,u.__)("Discard Changes","tutor"):(0,u.__)("Discard","tutor"):(0,u.__)("Cancel","tutor")),(0,a.Y)(x.A,{when:S==="settings"||l,fallback:(0,a.Y)(f.A,{"data-cy":"quiz-next",variant:"primary",size:"small",onClick:function t(){return q("settings")}},(0,u.__)("Next","tutor"))},(0,a.Y)(f.A,{"data-cy":"save-quiz",loading:L.isPending,variant:"primary",size:"small",onClick:N.handleSubmit((function(t){return R(t,e,y)}))},(0,u.__)("Save","tutor"))))},(0,a.Y)("div",{css:tl.wrapper({activeTab:S,isH5pQuiz:v==="tutor_h5p_quiz"})},(0,a.Y)(x.A,{when:!z.isLoading,fallback:(0,a.Y)(p.p8,null)},(0,a.Y)(x.A,{when:S==="details"},(0,a.Y)("div",{css:tl.left},(0,a.Y)(x.A,{when:S==="details"},(0,a.Y)("div",{css:tl.quizTitleWrapper},(0,a.Y)("div",{css:tl.quizForm},(0,a.Y)(b.xI,{control:N.control,name:"quiz_title",rules:{required:(0,u.__)("Quiz title is required","tutor")},render:function t(e){return(0,a.Y)(Vn,Us({},e,{placeholder:(0,u.__)("Add quiz title","tutor"),size:"small",isEdit:C,onToggleEdit:function t(e){T(e)}}))}}),(0,a.Y)(x.A,{when:C},(0,a.Y)(b.xI,{control:N.control,name:"quiz_description",render:function t(e){return(0,a.Y)(Sr.A,Us({},e,{placeholder:(0,u.__)("Add a summary","tutor"),enableResize:false,rows:2}))}}),(0,a.Y)("div",{css:tl.quizFormButtonWrapper},(0,a.Y)(f.A,{variant:"text",type:"button",onClick:function t(){if(!N.watch("quiz_title")){r()}T(false)},size:"small"},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{"data-cy":"save-quiz-title",loading:L.isPending,variant:"secondary",type:"submit",size:"small",onClick:function t(){if(!N.getValues("quiz_title")){N.trigger("quiz_title");return}T(false)}},(0,u.__)("Ok","tutor")))))),(0,a.Y)(os,{isEditing:C})))),(0,a.Y)("div",{css:tl.content({activeTab:S})},(0,a.Y)(x.A,{when:S==="settings",fallback:(0,a.Y)(Au,null)},(0,a.Y)(zs,{contentDripType:d}))),(0,a.Y)(x.A,{when:S==="details"&&v!=="tutor_h5p_quiz"},(0,a.Y)("div",{css:tl.right},(0,a.Y)(Zr,null))))),(0,a.Y)(qr.A,{isOpen:A,triggerRef:D,closePopover:function t(){return O(false)},maxWidth:"258px",title:(0,u.__)("Your quiz has unsaved changes. If you cancel, you will lose your progress.","tutor"),message:(0,u.__)("Are you sure you want to continue?","tutor"),animationType:Q.J6.slideUp,arrow:Y.vN.isAboveMobile?"top":"absoluteCenter",positionModifier:{top:-50,left:l?88:S==="settings"?30:26},hideArrow:true,confirmButton:{text:(0,u.__)("Yes","tutor"),variant:"primary"},cancelButton:{text:(0,u.__)("No","tutor"),variant:"text"},onConfirmation:function t(){var e;N.reset();y(null);if(!((e=z.data)!==null&&e!==void 0&&e.questions.find((function(t){return t.question_id===s})))){c("")}if(!l){r()}}}))})))};const Zs=Xs;var tl={wrapper:function t(e){var r=e.activeTab,n=e.isH5pQuiz;return(0,a.AH)("width:100%;display:grid;grid-template-columns:",r==="details"?n?"513px 1fr":"352px 1fr 280px":"1fr",";height:100%;",O.EA.smallTablet,"{width:100%;grid-template-columns:1fr;height:max-content;}"+(true?"":0),true?"":0)},tabsWrapper:(0,a.AH)("height:",Y.yl.HEADER_HEIGHT,"px;",O.EA.smallMobile,"{button{min-width:auto;}}"+(true?"":0),true?"":0),left:(0,a.AH)("border-right:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0),content:function t(e){var r=e.activeTab;return(0,a.AH)(E.x.overflowYAuto,";padding:",O.YK[32]," 0 ",O.YK[48]," ",O.YK[6],";",r==="settings"&&(0,a.AH)("padding-top:",O.YK[24],";padding-inline:352px 352px;",O.EA.smallTablet,"{padding:",O.YK[16]," ",O.YK[8]," ",O.YK[24]," ",O.YK[8],";margin:0 auto;}",O.EA.smallMobile,"{padding-top:",O.YK[8],";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},right:(0,a.AH)(E.x.overflowYAuto,";",E.x.display.flex("column"),";gap:",O.YK[16],";border-left:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0),quizTitleWrapper:(0,a.AH)(I.I.caption(),";color:",O.I6.text.subdued,";padding:",O.YK[16]," ",O.YK[32]," ",O.YK[16]," ",O.YK[28],";border-bottom:1px solid ",O.I6.stroke.divider,";",O.EA.smallTablet,"{padding:",O.YK[8],";}"+(true?"":0),true?"":0),quizNameWithButton:(0,a.AH)("display:inline-flex;width:100%;transition:all 0.3s ease-in-out;button{display:none;}:hover,:focus-within{button{display:block;}}:focus-visible{outline:2px solid ",O.I6.stroke.brand,";border-radius:",O.Vq[6],";button{display:block;}}",O.EA.smallTablet,"{button{display:block;}}"+(true?"":0),true?"":0),quizTitle:(0,a.AH)("flex:1;padding:",O.YK[8]," ",O.YK[16]," ",O.YK[8]," ",O.YK[8],";background-color:",O.I6.background.white,";border-radius:",O.Vq[6],";"+(true?"":0),true?"":0),quizForm:(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[12],";"+(true?"":0),true?"":0),quizFormButtonWrapper:(0,a.AH)("display:flex;justify-content:end;margin-top:",O.YK[4],";gap:",O.YK[8],";"+(true?"":0),true?"":0)};var el=r(41594);function rl(t){"@babel/helpers - typeof";return rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rl(t)}function nl(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ll(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function t(){};return{s:o,n:function e(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();return a=e.done,e},e:function t(e){u=!0,i=e},f:function t(){try{a||null==r["return"]||r["return"]()}finally{if(u)throw i}}}}function ol(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ol=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(P([])));A&&A!==r&&n.call(A,a)&&(_=A);var x=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==rl(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(rl(e)+" is not iterable")}return m.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(x),l(x,s,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:P(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function il(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function al(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){il(i,n,o,a,u,"next",t)}function u(t){il(i,n,o,a,u,"throw",t)}a(void 0)}))}}function ul(t,e){return fl(t)||dl(t,e)||ll(t,e)||sl()}function sl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ll(t,e){if(t){if("string"==typeof t)return cl(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cl(t,e):void 0}}function cl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function dl(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function fl(t){if(Array.isArray(t))return t}function pl(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var hl=(0,Ft.p9)();var vl=!!Gt.P.tutor_pro_url;var yl=(0,k.GR)(Y.oW.TUTOR_GOOGLE_MEET_INTEGRATION)||(0,k.GR)(Y.oW.TUTOR_ZOOM_INTEGRATION);var gl=function t(e){var r=e.topic;var n=(0,Ft.E6)("topic-",r.id);var o=(0,w.d)(),i=o.showToast;var l=(0,A.h)(),c=l.showModal;var d=(0,b.xW)();var p=(0,s.useState)(null),v=ul(p,2),y=v[0],g=v[1];var O=(0,s.useState)(false),I=ul(O,2),E=I[0],S=I[1];var q=(0,s.useRef)(null);var P=(0,s.useRef)(null);var j=Ke();var C=(0,m.jE)();var T=C.getQueryData(["CourseDetails",Number(hl)]);var D=N({acceptedTypes:[".csv"],onUpload:function(){var t=al(ol().mark((function t(e){return ol().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return j.mutateAsync({topic_id:n,csv_file:e[0]});case 2:S(false);case 3:case"end":return r.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),onError:function t(e){var r=nl(e),n;try{for(r.s();!(n=r.n()).done;){var o=n.value;i({message:o,type:"danger"})}}catch(t){r.e(t)}finally{r.f()}S(false)}}),L=D.fileInputRef,z=D.handleChange;return(0,a.Y)(el.Fragment,null,(0,a.Y)("div",{css:bl.contentButtons},(0,a.Y)("div",{css:bl.leftButtons},(0,a.Y)(f.A,{"data-cy":"add-lesson",variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:bl.contentButton,onClick:function t(){c({component:Er,props:{contentDripType:d.watch("contentDripType"),topicId:n,title:(0,u.__)("Lesson","tutor"),icon:(0,a.Y)(h.A,{name:"lesson",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title)}})}},(0,u.__)("Lesson","tutor")),(0,a.Y)(f.A,{"data-cy":"add-quiz",variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:bl.contentButton,onClick:function t(){c({component:Zs,props:{topicId:n,contentDripType:d.watch("contentDripType"),title:(0,u.__)("Quiz","tutor"),icon:(0,a.Y)(h.A,{name:"quiz",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title)},closeOnEscape:false})}},(0,u.__)("Quiz","tutor")),(0,a.Y)(x.A,{when:!vl,fallback:(0,a.Y)(x.A,{when:(0,k.GR)(Y.oW.H5P_INTEGRATION)},(0,a.Y)(f.A,{"data-cy":"add-interactive-quiz",variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:bl.contentButton,onClick:function t(){c({component:Zs,props:{topicId:n,contentDripType:d.watch("contentDripType"),title:(0,u.__)("Interactive Quiz","tutor"),icon:(0,a.Y)(h.A,{name:"interactiveQuiz",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title),contentType:"tutor_h5p_quiz"},closeOnEscape:false})}},(0,u.__)("Interactive Quiz","tutor")))},(0,a.Y)(_.A,null,(0,a.Y)(f.A,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"plus",width:24,height:24}),disabled:true,onClick:k.lQ},(0,u.__)("Interactive Quiz","tutor")))),(0,a.Y)(x.A,{when:!vl,fallback:(0,a.Y)(x.A,{when:(0,k.GR)(Y.oW.TUTOR_ASSIGNMENTS)},(0,a.Y)(f.A,{"data-cy":"add-assignment",variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:bl.contentButton,onClick:function t(){c({component:ce,props:{topicId:n,contentDripType:d.watch("contentDripType"),title:(0,u.__)("Assignment","tutor"),icon:(0,a.Y)(h.A,{name:"assignment",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title)}})}},(0,u.__)("Assignment","tutor")))},(0,a.Y)(_.A,null,(0,a.Y)(f.A,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"plus",width:24,height:24}),disabled:true,onClick:k.lQ},(0,u.__)("Assignment","tutor"))))),(0,a.Y)("div",{css:bl.rightButtons},(0,a.Y)(x.A,{when:!vl||yl,fallback:(0,a.Y)(x.A,{when:vl,fallback:(0,a.Y)(_.A,null,(0,a.Y)(f.A,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"import",width:24,height:24}),disabled:true,onClick:k.lQ},(0,u.__)("Import Quiz","tutor")))},(0,a.Y)(x.A,{when:(0,k.GR)(Y.oW.QUIZ_EXPORT_IMPORT)},(0,a.Y)(f.A,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"import",width:24,height:24}),disabled:!r.isSaved,buttonCss:bl.contentButton,onClick:function t(){var e;L===null||L===void 0||(e=L.current)===null||e===void 0||e.click()}},(0,u.__)("Import Quiz","tutor"))))},(0,a.Y)(et,{isOpen:E,onClick:function t(){return S(true)},closePopover:function t(){return S(false)},disabled:!r.isSaved,dotsOrientation:"vertical",maxWidth:vl?"220px":"240px",isInverse:true,arrowPosition:"auto",hideArrow:true,closeOnEscape:false,size:Y.vN.isAboveMobile?"medium":"small"},(0,a.Y)(x.A,{when:!vl||(0,k.GR)(Y.oW.TUTOR_GOOGLE_MEET_INTEGRATION)},(0,a.Y)(et.Option,{text:(0,a.Y)("span",{ref:q,css:bl.threeDotButton},(0,u.__)("Meet live lesson","tutor"),(0,a.Y)(x.A,{when:!vl},(0,a.Y)(_.A,{size:"small",content:(0,u.__)("Pro","tutor")}))),disabled:!vl,icon:(0,a.Y)(h.A,{width:24,height:24,name:"googleMeetColorize",isColorIcon:true}),onClick:function t(){return g("tutor-google-meet")}})),(0,a.Y)(x.A,{when:!vl||(0,k.GR)(Y.oW.TUTOR_ZOOM_INTEGRATION)},(0,a.Y)(et.Option,{text:(0,a.Y)("span",{ref:P,css:bl.threeDotButton},(0,u.__)("Zoom live lesson","tutor"),(0,a.Y)(x.A,{when:!vl},(0,a.Y)(_.A,{size:"small",content:(0,u.__)("Pro","tutor")}))),disabled:!vl,icon:(0,a.Y)(h.A,{width:24,height:24,name:"zoomColorize",isColorIcon:true}),onClick:function t(){return g("tutor_zoom_meeting")}})),(0,a.Y)(x.A,{when:!vl||(0,k.GR)(Y.oW.QUIZ_EXPORT_IMPORT)},(0,a.Y)(et.Option,{text:(0,a.Y)("span",{css:bl.threeDotButton},(0,u.__)("Import Quiz","tutor"),(0,a.Y)(x.A,{when:!vl},(0,a.Y)(_.A,{size:"small",content:(0,u.__)("Pro","tutor")}))),disabled:!vl,onClick:function t(){var e;L===null||L===void 0||(e=L.current)===null||e===void 0||e.click()},icon:(0,a.Y)(h.A,{name:"importColorized",width:24,height:24,isColorIcon:true})})))))),(0,a.Y)("input",{css:bl.input,type:"file",ref:L,onChange:z,multiple:false,accept:".csv"}),(0,a.Y)(M.A,{triggerRef:q,isOpen:y==="tutor-google-meet",closePopover:k.lQ,maxWidth:"306px",closeOnEscape:false,arrow:Y.vN.isAboveMobile?"auto":"absoluteCenter",hideArrow:true},(0,a.Y)(nt.A,{topicId:n,data:null,onCancel:function t(){g(null);S(false)}})),(0,a.Y)(M.A,{triggerRef:P,isOpen:y==="tutor_zoom_meeting",closePopover:k.lQ,maxWidth:"306px",closeOnEscape:false,arrow:Y.vN.isAboveMobile?"auto":"absoluteCenter",hideArrow:true},(0,a.Y)(ot.A,{topicId:n,meetingHost:(T===null||T===void 0?void 0:T.zoom_users)||{},data:null,onCancel:function t(){g(null);S(false)}})))};const ml=gl;var bl={contentButtons:(0,a.AH)(E.x.display.flex(),";justify-content:space-between;"+(true?"":0),true?"":0),leftButtons:(0,a.AH)(E.x.display.flex(),";gap:",O.YK[12],";",O.EA.smallMobile,"{flex-wrap:wrap;}"+(true?"":0),true?"":0),rightButtons:true?{name:"s5xdrg",styles:"display:flex;align-items:center"}:0,threeDotButton:(0,a.AH)("display:flex;align-items:center;gap:",O.YK[4],";"+(true?"":0),true?"":0),contentButton:(0,a.AH)(":hover:not(:disabled){background-color:",O.I6.background.white,";color:",O.I6.text.brand,";outline:1px solid ",O.I6.stroke.brand,";}"+(true?"":0),true?"":0),input:true?{name:"14y6t8x",styles:"display:none!important"}:0};function _l(t,e){return Ol(t)||Yl(t,e)||Al(t,e)||wl()}function wl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Al(t,e){if(t){if("string"==typeof t)return xl(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xl(t,e):void 0}}function xl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Yl(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Ol(t){if(Array.isArray(t))return t}var Il=function t(e){var r,n;var o=e.ref,i=e.isOpen,a=e.heightCalculator,u=a===void 0?"scroll":a;var l=(0,s.useState)(u==="scroll"?(r=o.current)===null||r===void 0?void 0:r.scrollHeight:(n=o.current)===null||n===void 0?void 0:n.clientHeight),c=_l(l,2),d=c[0],f=c[1];(0,s.useEffect)((function(){if(o.current){var t=u==="scroll"?o.current.scrollHeight:o.current.clientHeight;f(t)}}),[o.current,u]);var p=(0,g.zh)({height:i?d:0,opacity:i?1:0,overflow:"hidden",config:{duration:300,easing:function t(e){return e*(2-e)}}});return p};var El=r(41594);function kl(t){"@babel/helpers - typeof";return kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(t)}function Sl(){return Sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sl.apply(null,arguments)}function ql(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ql=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(P([])));A&&A!==r&&n.call(A,a)&&(_=A);var x=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==kl(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(kl(e)+" is not iterable")}return m.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(x),l(x,s,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:P(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function Pl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pl(Object(r),!0).forEach((function(e){Cl(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Cl(t,e,r){return(e=Tl(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tl(t){var e=Dl(t,"string");return"symbol"==kl(e)?e:e+""}function Dl(t,e){if("object"!=kl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Ll(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function zl(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ll(i,n,o,a,u,"next",t)}function u(t){Ll(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Kl(t,e){return Wl(t)||Rl(t,e)||Nl(t,e)||Hl()}function Hl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nl(t,e){if(t){if("string"==typeof t)return Ul(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ul(t,e):void 0}}function Ul(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Rl(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Wl(t){if(Array.isArray(t))return t}function Bl(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Ml=(0,Ft.p9)();var Fl=!!Gt.P.tutor_pro_url;var Gl=function t(e){var r=e.topic,n=e.isEdit,o=e.listeners,i=e.isDragging,l=e.onCollapse,c=e.onEdit,d=e.onCopy,v=e.onDelete,y=e.setIsEdit;var m=(0,Ft.E6)("topic-",r.id);var w=(0,Qt.p)({defaultValues:{title:r.title,summary:r.summary},shouldFocusError:true});var A=(0,s.useState)(false),Y=Kl(A,2),O=Y[0],I=Y[1];var S=(0,s.useRef)(null);var q=(0,s.useRef)(null);var P=(0,Mt.V1)();var j=(0,Mt.V_)();var C=(0,Mt.$n)(Ml);var T=Il({ref:S,isOpen:!r.isCollapsed,heightCalculator:"client"});var D=function(){var t=zl(ql().mark((function t(e){var n;return ql().wrap((function t(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return P.mutateAsync(jl(jl({},r.isSaved&&{topic_id:m}),{},{course_id:Ml,title:e.title,summary:e.summary}));case 2:n=o.sent;if(n.data){y(false)}if(n.status_code===201){c===null||c===void 0||c("topic-".concat(n.data))}case 5:case"end":return o.stop()}}),t)})));return function e(r){return t.apply(this,arguments)}}();var L=function(){var t=zl(ql().mark((function t(){var e;return ql().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return j.mutateAsync({course_id:Ml,content_id:m,content_type:"topic"});case 2:e=r.sent;if(e.data){d===null||d===void 0||d("topic-".concat(e.data))}case 4:case"end":return r.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){if(n){w.setFocus("title")}}),[n]);return(0,a.Y)(El.Fragment,null,(0,a.Y)("div",{css:Xl.header({isCollapsed:r.isCollapsed,isEdit:n,isDeletePopoverOpen:O,isDragging:i})},(0,a.Y)("div",{css:Xl.headerContent({isSaved:r.isSaved})},(0,a.Y)("div",{css:Xl.grabberInput,onClick:function t(){return l(r.id)},onKeyDown:function t(e){if(e.key==="Enter"){l(r.id)}}},(0,a.Y)("button",Sl({},r.isSaved?o:{},{css:Xl.grabButton({isDragging:i}),type:"button",disabled:!r.isSaved}),(0,a.Y)(h.A,{name:"dragVertical",width:24,height:24})),(0,a.Y)(x.A,{when:n,fallback:(0,a.Y)("div",{css:Xl.title({isEdit:n}),onDoubleClick:function t(){return y(true)}},w.watch("title"))},(0,a.Y)("div",{css:Xl.title({isEdit:n})},(0,a.Y)(b.xI,{control:w.control,name:"title",rules:{required:(0,u.__)("Title is required","tutor")},render:function t(e){return(0,a.Y)(ut.A,Sl({},e,{placeholder:(0,u.__)("Add a title","tutor"),isSecondary:true}))}})))),(0,a.Y)("div",{css:Xl.actions,"data-visually-hidden":true},(0,a.Y)(x.A,{when:!n},(0,a.Y)(fe.A,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.Y)("button",{"data-cy":"edit-topic",type:"button",css:E.x.actionButton,disabled:!r.isSaved,onClick:function t(){y(true);if(r.isCollapsed){l===null||l===void 0||l(r.id)}}},(0,a.Y)(h.A,{name:"edit",width:24,height:24})))),(0,a.Y)(x.A,{when:r.isSaved},(0,a.Y)(x.A,{when:!j.isPending,fallback:(0,a.Y)(p.Ay,{size:24})},(0,a.Y)(fe.A,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.Y)(x.A,{when:!Fl,fallback:(0,a.Y)("button",{"data-cy":"duplicate-topic",type:"button",css:E.x.actionButton,disabled:!r.isSaved,onClick:L},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))},(0,a.Y)(_.A,{size:"tiny"},(0,a.Y)("button",{type:"button",css:E.x.actionButton,disabled:true,onClick:k.lQ},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))))))),(0,a.Y)(x.A,{when:r.isSaved},(0,a.Y)(fe.A,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.Y)("button",{"data-cy":"delete-topic",type:"button",css:E.x.actionButton,disabled:!r.isSaved,"data-visually-hidden":true,ref:q,onClick:function t(){I(true)}},(0,a.Y)(h.A,{name:"delete",width:24,height:24})))),(0,a.Y)(x.A,{when:r.isSaved},(0,a.Y)("button",{type:"button",css:E.x.actionButton,disabled:!r.isSaved,onClick:function t(){l===null||l===void 0||l(r.id)},"data-toggle-collapse":true},(0,a.Y)(h.A,{name:"chevronDown",width:24,height:24}))))),(0,a.Y)(x.A,{when:n,fallback:(0,a.Y)(x.A,{when:r.summary.length>0},(0,a.Y)(g.CS.div,{style:jl({},T)},(0,a.Y)("div",{css:Xl.description({isEdit:n}),ref:S,onDoubleClick:function t(){return y(true)}},w.watch("summary"))))},(0,a.Y)("div",{css:Xl.description({isEdit:n})},(0,a.Y)(b.xI,{control:w.control,name:"summary",render:function t(e){return(0,a.Y)(Sr.A,Sl({},e,{placeholder:(0,u.__)("Add a summary","tutor"),isSecondary:true,rows:2,enableResize:true}))}}))),(0,a.Y)(x.A,{when:n},(0,a.Y)("div",{css:Xl.footer},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){if(!w.formState.isValid&&!r.isSaved){v===null||v===void 0||v()}w.reset();y(false)}},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{"data-cy":"save-topic",loading:P.isPending,variant:"secondary",size:"small",onClick:w.handleSubmit(D)},(0,u.__)("Ok","tutor"))))),(0,a.Y)(qr.A,{isOpen:O,triggerRef:q,isLoading:C.isPending,closePopover:k.lQ,maxWidth:"258px",title:(0,u.sprintf)((0,u.__)('Delete topic "%s"',"tutor"),r.title),message:(0,u.__)("Are you sure you want to delete this content from your course? This cannot be undone.","tutor"),animationType:Q.J6.slideUp,arrow:"auto",hideArrow:true,confirmButton:{text:(0,u.__)("Delete","tutor"),variant:"text",isDelete:true},cancelButton:{text:(0,u.__)("Cancel","tutor"),variant:"text"},onConfirmation:zl(ql().mark((function t(){return ql().wrap((function t(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return C.mutateAsync(m);case 2:I(false);v===null||v===void 0||v();case 4:case"end":return e.stop()}}),t)}))),onCancel:function t(){return I(false)}}))};const Ql=Gl;var Vl=true?{name:"jjyo93",styles:"padding-right:0"}:0;var $l=true?{name:"18g08sj",styles:"padding-bottom:0"}:0;var Jl=true?{name:"21xn5r",styles:"transform:rotate(180deg)"}:0;var Xl={header:function t(e){var r=e.isCollapsed,n=e.isEdit,o=e.isDeletePopoverOpen,i=e.isDragging;return(0,a.AH)("padding:",O.YK[12]," ",O.YK[16],";",E.x.display.flex("column"),";[data-toggle-collapse]{transition:transform 0.3s ease-in-out;",!r&&Jl,";}",!r&&(0,a.AH)("border-bottom:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0)," ",!n&&$l," ",!n&&!o&&(0,a.AH)("[data-visually-hidden]{opacity:0;transition:",!i?"opacity 0.3s ease-in-out":"none",";}:hover,:focus-within{[data-visually-hidden]{opacity:",i?0:1,";}}"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},headerContent:function t(e){var r=e.isSaved,n=r===void 0?true:r;return(0,a.AH)("display:grid;grid-template-columns:",n?"1fr auto":"1fr",";gap:",O.YK[12],";width:100%;padding-bottom:",O.YK[12],";"+(true?"":0),true?"":0)},grabberInput:(0,a.AH)(E.x.display.flex(),";align-items:center;gap:",O.YK[8],";svg{color:",O.I6.color.black[40],";flex-shrink:0;}"+(true?"":0),true?"":0),grabButton:function t(e){var r=e.isDragging,n=r===void 0?false:r;return(0,a.AH)(E.x.resetButton,";",E.x.flexCenter(),";cursor:",n?"grabbing":"grab",";:disabled{cursor:not-allowed;}&:focus,&:active,&:hover{background:none;}&:focus-visible{outline:2px solid ",O.I6.stroke.brand,";outline-offset:1px;border-radius:",O.Vq[2],";}"+(true?"":0),true?"":0)},title:function t(e){var r=e.isEdit;return(0,a.AH)(I.I.body(),";color:",O.I6.text.hints,";width:100%;",!r&&(0,a.AH)(E.x.text.ellipsis(1),";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},description:function t(e){var r=e.isEdit;return(0,a.AH)(I.I.caption(),";color:",O.I6.text.hints,";padding-inline:",O.YK[8],";margin-left:",O.YK[24],";padding-bottom:",O.YK[12],";",!r&&(0,a.AH)(E.x.text.ellipsis(2),";"+(true?"":0),true?"":0)," ",r&&Vl,";"+(true?"":0),true?"":0)},footer:(0,a.AH)("width:100%;text-align:right;",E.x.display.flex(),";gap:",O.YK[8],";justify-content:end;"+(true?"":0),true?"":0),actions:(0,a.AH)(E.x.display.flex(),";align-items:start;gap:",O.YK[8],";justify-content:end;"+(true?"":0),true?"":0)};var Zl=r(41594);function tc(t){"@babel/helpers - typeof";return tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(t)}function ec(){return ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ec.apply(null,arguments)}function rc(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */rc=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(P([])));A&&A!==r&&n.call(A,a)&&(_=A);var x=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==tc(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(tc(e)+" is not iterable")}return m.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(x),l(x,s,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:P(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function nc(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function oc(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){nc(i,n,o,a,u,"next",t)}function u(t){nc(i,n,o,a,u,"throw",t)}a(void 0)}))}}function ic(t,e){return cc(t)||lc(t,e)||uc(t,e)||ac()}function ac(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uc(t,e){if(t){if("string"==typeof t)return sc(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sc(t,e):void 0}}function sc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function lc(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function cc(t){if(Array.isArray(t))return t}function dc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dc(Object(r),!0).forEach((function(e){pc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pc(t,e,r){return(e=hc(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hc(t){var e=vc(t,"string");return"symbol"==tc(e)?e:e+""}function vc(t,e){if("object"!=tc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function yc(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var gc={lesson:{name:"lesson",color:O.I6.icon["default"]},tutor_quiz:{name:"quiz",color:O.I6.design.warning},tutor_assignments:{name:"assignment",color:O.I6.icon.processing},tutor_zoom_meeting:{name:"zoomColorize",color:""},"tutor-google-meet":{name:"googleMeetColorize",color:""},tutor_h5p_quiz:{name:"interactiveQuiz",color:"#C984FE"}};var mc={tutor_assignments:(0,u.__)("Are you sure you want to delete this assignment? All existing assignment submissions will be permanently deleted.","tutor"),tutor_quiz:(0,u.__)("Are you sure you want to delete this quiz? All existing quiz attempts will be permanently deleted.","tutor"),tutor_h5p_quiz:(0,u.__)("Are you sure you want to delete this interactive quiz? All existing quiz attempts will be permanently deleted.","tutor")};var bc={lesson:Er,tutor_quiz:Zs,tutor_assignments:ce,tutor_h5p_quiz:Zs};var _c={lesson:(0,u.__)("Lesson","tutor"),tutor_quiz:(0,u.__)("Quiz","tutor"),tutor_assignments:(0,u.__)("Assignment","tutor"),tutor_h5p_quiz:(0,u.__)("Interactive Quiz","tutor")};var wc={lesson:"lesson",tutor_quiz:"quiz",tutor_assignments:"assignment",tutor_h5p_quiz:"interactiveQuiz"};var Ac=function t(e){return(0,i.uU)(fc(fc({},e),{},{wasDragging:true}))};var xc=!!Gt.P.tutor_pro_url;var Yc=(0,Ft.p9)();var Oc=function t(e){var r=e.type,n=e.topic,o=e.content,l=e.onCopy,c=e.onDelete,d=e.isOverlay,f=d===void 0?false:d;var v=(0,Ft.E6)("topic-",n.id);var g=(0,Ft.E6)("content-",o.id);var w=(0,m.jE)();var I=w.getQueryData(["CourseDetails",Number(Yc)]);var S=(0,b.xW)();var q=(0,s.useState)(null),P=ic(q,2),j=P[0],C=P[1];var T=(0,s.useState)(false),D=ic(T,2),L=D[0],z=D[1];var K=(0,s.useRef)(null);var H=(0,s.useRef)(null);var N=gc[r];var U=(0,i.gl)({id:o.id,data:{type:"content"},animateLayoutChanges:Ac}),R=U.attributes,W=U.listeners,B=U.setNodeRef,F=U.transform,G=U.transition,V=U.isDragging;var $={transform:y.Ks.Transform.toString(F),transition:G,opacity:V?.3:undefined,background:V?O.I6.stroke.hover:undefined};var J=(0,A.h)(),X=J.showModal;var Z=(0,Mt.V_)();var tt=(0,Mt.VT)();var et=Je();var rt=(0,Mt.VT)();var it=(0,Mt.VT)();var at=Ne();var ut=function t(){var e=r;if(bc[e]){X({component:bc[e],props:fc({contentDripType:S.watch("contentDripType"),topicId:v,lessonId:g,assignmentId:g,quizId:g,title:_c[e],subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),n.title),icon:(0,a.Y)(h.A,{name:wc[e],height:24,width:24})},r==="tutor_h5p_quiz"&&{contentType:"tutor_h5p_quiz"}),closeOnEscape:!["tutor_quiz","tutor_h5p_quiz"].includes(r)})}if(r==="tutor_zoom_meeting"){C("tutor_zoom_meeting")}if(r==="tutor-google-meet"){C("tutor-google-meet")}};var st=function(){var t=oc(rc().mark((function t(){return rc().wrap((function t(e){while(1)switch(e.prev=e.next){case 0:if(!["lesson","tutor_assignments"].includes(r)){e.next=5;break}e.next=3;return tt.mutateAsync(g);case 3:e.next=18;break;case 5:if(!["tutor_quiz","tutor_h5p_quiz"].includes(r)){e.next=10;break}e.next=8;return et.mutateAsync(g);case 8:e.next=18;break;case 10:if(!(r==="tutor-google-meet")){e.next=15;break}e.next=13;return rt.mutateAsync(g);case 13:e.next=18;break;case 15:if(!(r==="tutor_zoom_meeting")){e.next=18;break}e.next=18;return it.mutateAsync(g);case 18:z(false);c===null||c===void 0||c();case 20:case"end":return e.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();var lt=function t(){var e={lesson:"lesson",tutor_assignments:"assignment",tutor_quiz:"quiz",tutor_h5p_quiz:"quiz"};Z.mutateAsync({course_id:Yc,content_id:g,content_type:e[r]});l===null||l===void 0||l()};return(0,a.Y)(Zl.Fragment,null,(0,a.Y)("div",ec({},R,{css:kc.wrapper({isDragging:V,isOverlay:f,isActive:j===r||L||Z.isPending}),ref:B,style:$}),(0,a.Y)("div",ec({css:kc.iconAndTitle({isDragging:f})},W),(0,a.Y)("div",{"data-content-icon":true},(0,a.Y)(h.A,{name:N.name,width:24,height:24,style:(0,a.AH)("color:",N.color,";"+(true?"":0),true?"":0)})),(0,a.Y)("div",{"data-bar-icon":true},(0,a.Y)(h.A,{name:"bars",width:24,height:24})),(0,a.Y)("p",{css:kc.title,onClick:ut,onKeyDown:k.lQ},(0,a.Y)("span",{dangerouslySetInnerHTML:{__html:o.title}}),(0,a.Y)(x.A,{when:(r==="tutor_quiz"||r==="tutor_h5p_quiz")&&!!o.total_question},(0,a.Y)("span",{"data-question-count":true},"(",(0,u.sprintf)((0,u.__)("%s Questions","tutor"),o.total_question),")")))),(0,a.Y)("div",{css:kc.actions,"data-actions":true},(0,a.Y)(x.A,{when:r==="tutor_quiz"},(0,a.Y)(fe.A,{content:(0,u.__)("Export Quiz","tutor"),delay:200},(0,a.Y)(x.A,{when:!xc,fallback:(0,a.Y)(x.A,{when:(0,k.GR)(Y.oW.QUIZ_EXPORT_IMPORT)},(0,a.Y)("button",{type:"button",css:E.x.actionButton,onClick:function t(){at.mutate(g)}},(0,a.Y)(h.A,{name:"export",width:24,height:24})))},(0,a.Y)(_.A,{size:"tiny"},(0,a.Y)("button",{type:"button",css:E.x.actionButton,disabled:true,onClick:k.lQ},(0,a.Y)(h.A,{name:"export",width:24,height:24})))))),(0,a.Y)(fe.A,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.Y)("button",{"data-cy":"edit-".concat(r),ref:K,type:"button",css:E.x.actionButton,onClick:ut},(0,a.Y)(h.A,{name:"edit",width:24,height:24}))),(0,a.Y)(x.A,{when:!["tutor_zoom_meeting","tutor_zoom_meeting"].includes(r)},(0,a.Y)(x.A,{when:!Z.isPending,fallback:(0,a.Y)(p.Ay,{size:24})},(0,a.Y)(fe.A,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.Y)(x.A,{when:!xc,fallback:(0,a.Y)("button",{"data-cy":"duplicate-".concat(r),type:"button",css:E.x.actionButton,onClick:lt},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))},(0,a.Y)(_.A,{size:"tiny"},(0,a.Y)("button",{disabled:true,type:"button",css:E.x.actionButton,onClick:k.lQ},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))))))),(0,a.Y)(fe.A,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.Y)("button",{"data-cy":"delete-".concat(r),ref:H,type:"button",css:E.x.actionButton,onClick:function t(){z(true)}},(0,a.Y)(h.A,{name:"delete",width:24,height:24}))))),(0,a.Y)(M.A,{triggerRef:K,isOpen:j!==null,closePopover:k.lQ,maxWidth:"306px",closeOnEscape:false,arrow:Y.vN.isAboveMobile?"auto":"absoluteCenter",hideArrow:true},(0,a.Y)(x.A,{when:j==="tutor_zoom_meeting"},(0,a.Y)(ot.A,{data:null,topicId:v,meetingHost:(I===null||I===void 0?void 0:I.zoom_users)||{},onCancel:function t(){return C(null)},meetingId:g})),(0,a.Y)(x.A,{when:j==="tutor-google-meet"},(0,a.Y)(nt.A,{data:null,topicId:v,onCancel:function t(){return C(null)},meetingId:g}))),(0,a.Y)(qr.A,{isOpen:L,isLoading:tt.isPending||et.isPending||rt.isPending||it.isPending,triggerRef:H,closePopover:k.lQ,maxWidth:"258px",title:(0,u.sprintf)((0,u.__)('Delete "%s"',"tutor"),o.title),message:mc[r]||(0,u.__)("Are you sure you want to delete this content from your course? This cannot be undone.","tutor"),animationType:Q.J6.slideUp,arrow:"auto",hideArrow:true,confirmButton:{text:(0,u.__)("Delete","tutor"),variant:"text",isDelete:true},cancelButton:{text:(0,u.__)("Cancel","tutor"),variant:"text"},onConfirmation:st,onCancel:function t(){return z(false)}}))};const Ic=Oc;var Ec=true?{name:"1jfpmb0",styles:"[data-content-icon]{display:none;}[data-bar-icon]{display:block;}cursor:grabbing"}:0;var kc={wrapper:function t(e){var r=e.isDragging,n=r===void 0?false:r,o=e.isOverlay,i=o===void 0?false:o,u=e.isActive,s=u===void 0?false:u;return(0,a.AH)("width:100%;padding:",O.YK[10]," ",O.YK[8],";border:1px solid transparent;border-radius:",O.Vq[6],";display:flex;justify-content:space-between;align-items:center;[data-content-icon],[data-bar-icon]{display:flex;height:24px;}:hover,:focus-within{border-color:",O.I6.stroke.border,";background-color:",O.I6.background.white,";[data-content-icon]{display:none;}[data-bar-icon]{display:block;}[data-actions]{opacity:",n?0:1,";}}",s&&(0,a.AH)("border-color:",O.I6.stroke.border,";background-color:",O.I6.background.white,";[data-content-icon]{display:flex;}[data-bar-icon]{display:none;}[data-actions]{opacity:1;}"+(true?"":0),true?"":0)," ",i&&(0,a.AH)("box-shadow:",O.r7.drag,";border-color:",O.I6.stroke.border,";background-color:",O.I6.background.white,";[data-actions]{opacity:1;}"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-actions]{opacity:1;}}"+(true?"":0),true?"":0)},title:(0,a.AH)(I.I.caption(),";color:",O.I6.text.title,";display:flex;align-items:center;gap:",O.YK[4],";cursor:pointer;span{&:first-of-type{",E.x.text.ellipsis(2),";}}[data-question-count]{color:",O.I6.text.hints,";}"+(true?"":0),true?"":0),iconAndTitle:function t(e){var r=e.isDragging,n=r===void 0?false:r;return(0,a.AH)("display:flex;align-items:center;gap:",O.YK[8],";cursor:grab;flex-grow:1;[data-bar-icon]{display:none;}",n&&Ec,";"+(true?"":0),true?"":0)},actions:(0,a.AH)("display:flex;opacity:0;align-items:start;gap:",O.YK[8],";justify-content:end;"+(true?"":0),true?"":0)};function Sc(t){"@babel/helpers - typeof";return Sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sc(t)}function qc(){return qc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qc.apply(null,arguments)}function Pc(t,e){return Lc(t)||Dc(t,e)||Cc(t,e)||jc()}function jc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cc(t,e){if(t){if("string"==typeof t)return Tc(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tc(t,e):void 0}}function Tc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Dc(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Lc(t){if(Array.isArray(t))return t}function zc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Kc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zc(Object(r),!0).forEach((function(e){Hc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Hc(t,e,r){return(e=Nc(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nc(t){var e=Uc(t,"string");return"symbol"==Sc(e)?e:e+""}function Uc(t,e){if("object"!=Sc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Sc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Rc=function t(e){return(0,i.uU)(Kc(Kc({},e),{},{wasDragging:true}))};var Wc=function t(e){var r;var n=e.topic,o=e.onDelete,u=e.onCopy,l=e.onCollapse,c=e.onEdit,d=e.isOverlay,f=d===void 0?false:d;var p=(0,s.useState)(false),h=Pc(p,2),v=h[0],m=h[1];var b=(0,s.useState)(!n.isSaved),_=Pc(b,2),w=_[0],A=_[1];var Y=(0,s.useRef)(null);var I=(0,s.useRef)(null);var E=(0,g.zh)({height:!n.isCollapsed?(r=Y.current)===null||r===void 0?void 0:r.scrollHeight:0,opacity:!n.isCollapsed?1:0,overflow:"hidden",config:{duration:300,easing:function t(e){return e*(2-e)}}},[n.contents.length]),S=Pc(E,2),q=S[0],P=S[1];(0,s.useEffect)((function(){var t=function t(e){if((0,jn.O9)(I.current)&&!I.current.contains(e.target)){m(false)}};document.addEventListener("click",t);return function(){return document.removeEventListener("click",t)}}),[w]);var j=(0,i.gl)({id:n.id,data:{type:"topic"},animateLayoutChanges:Rc}),C=j.attributes,T=j.listeners,D=j.setNodeRef,L=j.transform,z=j.transition,K=j.isDragging;var H=(0,s.useCallback)((function(t){if(t){D(t);I.current=t}}),[D]);var N={transform:y.Ks.Transform.toString(L),transition:z,opacity:K?.3:undefined,background:K?O.I6.stroke.hover:undefined};(0,s.useEffect)((function(){if((0,jn.O9)(Y.current)){P.start({height:!n.isCollapsed?Y.current.scrollHeight:0,opacity:!n.isCollapsed?1:0})}}),[n.isCollapsed,n.contents.length]);return(0,a.Y)("div",qc({},n.isSaved?C:{},{css:Mc.wrapper({isActive:v||w,isOverlay:f}),onClick:function t(){return m(true)},onKeyDown:k.lQ,tabIndex:-1,ref:H,style:N}),(0,a.Y)(Ql,{isActive:v,isDragging:K,isEdit:w,listeners:T,onCollapse:function t(e){l===null||l===void 0||l(e)},onDelete:o,onEdit:function t(e){c===null||c===void 0||c(e)},onCopy:function t(e){u===null||u===void 0||u(e)},topic:n,setIsEdit:A}),(0,a.Y)(g.CS.div,{style:Kc({},q)},(0,a.Y)("div",{css:Mc.content,ref:Y},(0,a.Y)(x.A,{when:n.contents.length>0},(0,a.Y)(i.gB,{items:n.contents.map((function(t){return Kc(Kc({},t),{},{id:t.ID})})),strategy:i._G},(0,a.Y)("div",null,(0,a.Y)(ct.A,{each:n.contents},(function(t){return(0,a.Y)(Ic,{key:t.ID,type:t.post_type,topic:n,content:{id:t.ID,title:t.post_title,total_question:t.total_question||0}})}))))),(0,a.Y)(ml,{topic:n}))))};const Bc=Wc;var Mc={wrapper:function t(e){var r=e.isActive,n=r===void 0?false:r,o=e.isOverlay,i=o===void 0?false:o;return(0,a.AH)("border:1px solid ",O.I6.stroke["default"],";border-radius:",O.Vq[8],";transition:background-color 0.3s ease-in-out,border-color 0.3s ease-in-out;background-color:",O.I6.bg.white,";width:100%;",n&&(0,a.AH)("border-color:",O.I6.stroke.brand,";background-color:",O.I6.background.hover,";"+(true?"":0),true?"":0)," :hover{background-color:",O.I6.background.hover,";}",i&&(0,a.AH)("box-shadow:",O.r7.drag,";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},content:(0,a.AH)("padding:",O.YK[16],";",E.x.display.flex("column"),";gap:",O.YK[12],";"+(true?"":0),true?"":0)};var Fc=function t(e){var r=e.title;return(0,a.Y)("div",{css:Qc.wrapper},(0,a.Y)(h.A,{name:"dragVertical",width:24,height:24}),(0,a.Y)("span",null,r))};const Gc=Fc;var Qc={wrapper:(0,a.AH)("display:flex;align-items:center;gap:",O.YK[8],";border:1px solid ",O.I6.stroke["default"],";border-radius:",O.Vq[8],";background-color:",O.I6.background.hover,";padding:",O.YK[12]," ",O.YK[16],";box-shadow:",O.r7.drag,";",I.I.body(),";color:",O.I6.text.hints,";cursor:grabbing;svg{color:",O.I6.color.black[40],";flex-shrink:0;}"+(true?"":0),true?"":0)};var Vc=r(70956);var $c=r(47839);var Jc=r(70396);const Xc=r.p+"images/7a3f20a77fdf442a94bc38151eadcfcd-curriculum-empty-state-2x.webp";const Zc=r.p+"images/986ea3637213dd5da688bb6f1e1319a6-curriculum-empty-state.webp";function td(t){"@babel/helpers - typeof";return td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(t)}function ed(t){return od(t)||nd(t)||fd(t)||rd()}function rd(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nd(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function od(t){if(Array.isArray(t))return pd(t)}function id(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ad(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?id(Object(r),!0).forEach((function(e){ud(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):id(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ud(t,e,r){return(e=sd(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sd(t){var e=ld(t,"string");return"symbol"==td(e)?e:e+""}function ld(t,e){if("object"!=td(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=td(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function cd(t,e){return vd(t)||hd(t,e)||fd(t,e)||dd()}function dd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fd(t,e){if(t){if("string"==typeof t)return pd(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pd(t,e):void 0}}function pd(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function hd(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function vd(t){if(Array.isArray(t))return t}var yd=(0,Ft.p9)();var gd=function t(){var e=(0,d.Zp)();(0,s.useEffect)((function(){if(!yd){e(Jc.P.Home.buildLink(),{replace:true})}}),[e]);var r=(0,s.useState)(true),l=cd(r,2),y=l[0],g=l[1];var m=(0,s.useState)(null),b=cd(m,2),_=b[0],w=b[1];var A=(0,s.useState)([]),Y=cd(A,2),O=Y[0],I=Y[1];var E=(0,s.useRef)([]);var S=(0,Mt.me)(yd);var q=(0,Mt.Id)();(0,s.useEffect)((function(){if(O.length===0){return}I((function(t){if(y){E.current=[]}if(!y){E.current=t.reduce((function(t,e){if(e.isSaved){t.push(e.id)}return t}),[])}return t.map((function(t){if(!t.isSaved){return t}return ad(ad({},t),{},{isCollapsed:y})}))}))}),[y]);(0,s.useEffect)((function(){var t;if(!((t=S.data)!==null&&t!==void 0&&t.length)){return}var e=function t(e){return S.data.map((function(t,r){var n="topic-".concat(t.id);var o=r===0;var i=E.current.includes(n);var a=e.length?!i:!o;if(o&&!e.length){E.current=[n]}return ad(ad({},t),{},{id:n,isCollapsed:a,isSaved:true,contents:t.contents.map((function(t){return ad(ad({},t),{},{ID:"content-".concat(t.ID)})}))})}))};I(e)}),[S.data]);var P=(0,s.useMemo)((function(){if(!_){return null}var t=_.toString().includes("topic")?"topic":"content";var e=O.flatMap((function(t){return t.contents}));var r=t==="topic"?O.find((function(t){return t.id===_})):e.find((function(t){return t.ID===_}));return r}),[_,O]);var j=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:10}}),(0,n.MS)(n.uN,{coordinateGetter:i.JR}));if(!yd){return null}if(S.isLoading){return(0,a.Y)(p.p8,null)}var C=function t(e,r){if(r==="topic"){return O.find((function(t){return t.id===e}))}if(r==="content"){return O.find((function(t){return t.contents.find((function(t){return t.ID===e}))}))}};var T=function t(e){var r=e.active,n=e.over;if(!n||!r){return}if(r.id.toString().includes("content")&&n.id.toString().includes("content")&&r.id!==n.id){var o=C(r.id,"content");var i=C(n.id,"content");if(!o||!i)return;var a=O.findIndex((function(t){return t.id===o.id}));var u=O.findIndex((function(t){return t.id===i.id}));if(i.isCollapsed||a===u){return}var s=o.contents.findIndex((function(t){return t.ID===r.id}));var l=i.contents.findIndex((function(t){return t.ID===n.id}));var c=ed(O);var d=c[a].contents.splice(s,1),f=cd(d,1),p=f[0];c[u].contents.splice(l,0,p);I(c)}if(r.id.toString().includes("content")&&n!==null&&n!==void 0&&n.id.toString().includes("topic")&&r.id!==n.id){var h=C(r.id,"content");var v=C(n.id,"topic");if(!h||!v||v.contents.length>0||v.isCollapsed){return}var y=O.findIndex((function(t){return t.id===h.id}));var g=O.findIndex((function(t){return t.id===v.id}));if(y===g){return}var m=h.contents.findIndex((function(t){return t.ID===r.id}));var b=ed(O);var _=b[y].contents.splice(m,1),w=cd(_,1),A=w[0];b[g].contents.push(A);I(b)}};var D=function t(e){var r;var n=e.active,o=e.over;if(!o){w(null);return}var i=ed(O);if(n.id.toString().includes("topic")&&o!==null&&o!==void 0&&o.id.toString().includes("topic")&&n&&n.id!==o.id){var a=O.findIndex((function(t){return t.id===n.id}));var u=O.findIndex((function(t){return t.id===o.id}));i=(0,k.tw)(i,a,u);I(i)}if(n.id.toString().includes("content")&&o!==null&&o!==void 0&&o.id.toString().includes("content")&&n&&n.id!==o.id){var s=C(n.id,"content");var l=C(o.id,"content");if(!s||!l||l.isCollapsed){return}var c=O.findIndex((function(t){return t.id===s.id}));var d=O.findIndex((function(t){return t.id===l.id}));var f=s.contents.findIndex((function(t){return t.ID===n.id}));var p=l.contents.findIndex((function(t){return t.ID===o.id}));if(c===d){i[c].contents=(0,k.tw)(i[c].contents,f,p);I(i)}else{var h=i[c].contents.splice(f,1),v=cd(h,1),y=v[0];i[d].contents.splice(p,0,y);I(i)}}if(n.id.toString().includes("content")&&o.id.toString().includes("topic")&&n&&n.id!==o.id){var g=C(n.id,"content");var m=C(o.id,"topic");if(!g||!m||m.isCollapsed){return}var b=O.findIndex((function(t){return t.id===g.id}));var _=O.findIndex((function(t){return t.id===m.id}));var A=g.contents.findIndex((function(t){return t.ID===n.id}));var x=i[b].contents.splice(A,1),Y=cd(x,1),E=Y[0];i[_].contents.push(E);I(i)}var P=i.reduce((function(t,e,r){var n=0;t[r]={topic_id:(0,Ft.E6)("topic-",e.id),lesson_ids:e.contents.reduce((function(t,e){t[n]=(0,Ft.E6)("content-",e.ID);n++;return t}),{})};return t}),{});q.mutate(ad({tutor_topics_lessons_sorting:P},n.id.toString().includes("content")&&{"content_parent[parent_topic_id]":(r=S.data)===null||r===void 0||(r=r.find((function(t){return t.contents.find((function(t){return String(t.ID)===(0,Ft.E6)("content-",o.id)}))})))===null||r===void 0?void 0:r.id,"content_parent[content_id]":(0,Ft.E6)("content-",n.id)}));w(null)};var L=function t(e,r){I((function(t){return t.filter((function(t,r){return r!==e}))}));E.current=E.current.filter((function(t){return t!==r}))};var z=function t(e){I((function(t){return t.map((function(t){if(t.id===e){return ad(ad({},t),{},{isCollapsed:!t.isCollapsed})}return t}))}));if(!E.current.includes(e)){E.current=[].concat(ed(E.current),[e])}else{E.current=E.current.filter((function(t){return t!==e}))}};return(0,a.Y)("div",{css:bd.container},(0,a.Y)("div",{css:bd.wrapper},(0,a.Y)(Vc.A,{title:(0,u.__)("Curriculum","tutor"),backUrl:"/basics",rightButton:(0,a.Y)(x.A,{when:O.some((function(t){return t.isSaved}))},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){return g((function(t){return!t}))}},y?(0,u.__)("Expand All","tutor"):(0,u.__)("Collapse All","tutor")))}),(0,a.Y)("div",{css:bd.content},(0,a.Y)(x.A,{when:!S.isLoading&&S.data&&(S.data.length>0||O.length>0),fallback:(0,a.Y)(v.A,{emptyStateImage:Zc,emptyStateImage2x:Xc,imageAltText:(0,u.__)("Empty State Illustration","tutor"),title:(0,u.__)("Start building your course!","tutor"),description:(0,u.__)("Add Topics, Lessons, and Quizzes to get started.","tutor"),actions:(0,a.Y)(f.A,{"data-cy":"add-topic",variant:"secondary",icon:(0,a.Y)(h.A,{name:"plusSquareBrand",width:24,height:25}),onClick:function t(){I((function(){return[{id:(0,k.Ak)(),title:"",summary:"",contents:[],isCollapsed:false,isSaved:false}]}))}},(0,u.__)("Add Topic","tutor"))})},(0,a.Y)("div",{css:bd.topicWrapper},(0,a.Y)(n.Mp,{sensors:j,collisionDetection:n.y$,measuring:Yo.s,modifiers:[o.Q_],onDragStart:function t(e){w(e.active.id)},onDragOver:function t(e){return T(e)},onDragEnd:function t(e){return D(e)}},(0,a.Y)(i.gB,{items:O.map((function(t){return ad(ad({},t),{},{id:t.id})})),strategy:i._G},(0,a.Y)(ct.A,{each:O},(function(t,e){return t.isSaved&&(0,a.Y)(Bc,{key:t.id,topic:ad(ad({},t),{},{isCollapsed:_!==null&&_!==void 0&&_.toString().includes("topic")?true:t.isCollapsed}),onDelete:function r(){return L(e,t.id)},onCollapse:function t(e){return z(e)},onCopy:function t(e){E.current=[e]},onEdit:function t(e){E.current=[e]}})}))),(0,c.createPortal)((0,a.Y)(n.Hd,null,(0,a.Y)(x.A,{when:P},(function(t){return(0,a.Y)(Gc,{title:_!==null&&_!==void 0&&_.toString().includes("topic")?t.title:t.post_title})}))),document.body)),(0,a.Y)(ct.A,{each:O},(function(t,e){return!t.isSaved&&(0,a.Y)(Bc,{key:t.id,topic:ad(ad({},t),{},{isCollapsed:false}),onDelete:function r(){return L(e,t.id)},onCollapse:function t(e){return z(e)},onCopy:function t(e){E.current=[e]},onEdit:function t(e){E.current=[e]}})}))))),(0,a.Y)(x.A,{when:O.length>0},(0,a.Y)("div",{css:bd.addButtonWrapper},(0,a.Y)(f.A,{"data-cy":"add-topic",variant:"secondary",icon:(0,a.Y)(h.A,{name:"plusSquareBrand",width:24,height:24}),onClick:function t(){I((function(t){return[].concat(ed(t.map((function(t){return ad(ad({},t),{},{isCollapsed:true})}))),[{id:(0,k.Ak)(),title:"",summary:"",contents:[],isCollapsed:false,isSaved:false}])}));E.current=[]}},(0,u.__)("Add Topic","tutor"))))),(0,a.Y)($c.A,{styleModifier:bd.navigator}))};const md=gd;var bd={container:(0,a.AH)("margin-top:",O.YK[32],";width:100%;",O.EA.smallTablet,"{margin-top:",O.YK[16],";}"+(true?"":0),true?"":0),wrapper:(0,a.AH)("width:100%;",E.x.display.flex("column"),";gap:",O.YK[16],";margin:0 auto;"+(true?"":0),true?"":0),content:(0,a.AH)("margin-top:",O.YK[16],";",O.EA.smallMobile,"{margin-top:0;}"+(true?"":0),true?"":0),topicWrapper:(0,a.AH)(E.x.display.flex("column"),";gap:",O.YK[16],";align-items:center;"+(true?"":0),true?"":0),addButtonWrapper:(0,a.AH)("path{stroke:",O.I6.icon.brand,";}"+(true?"":0),true?"":0),navigator:(0,a.AH)("margin:",O.YK[40]," auto;"+(true?"":0),true?"":0)}}}]);