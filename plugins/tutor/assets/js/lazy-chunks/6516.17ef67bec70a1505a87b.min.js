"use strict";(self["webpackChunktutor"]=self["webpackChunktutor"]||[]).push([[6516],{16516:(t,e,r)=>{r.r(e);r.d(e,{default:()=>yd});var n=r(57537);var o=r(76181);var i=r(25164);var a=r(65742);var u=r(12470);var s=r(41594);var l=r.n(s);var c=r(75206);var d=r(29550);var f=r(35787);var p=r(476);var h=r(21826);var v=r(44926);var y=r(37893);var g=r(62553);var m=r(39650);var b=r(65198);var _=r(78285);var w=r(44614);var x=r(1087);var A=r(59110);var Y=r(44914);var O=r(82965);var I=r(12034);var k=r(90007);var E=r(46218);var S=null&&["onUpload","onError","acceptedTypes","multiple","disabled","children"];function q(){return q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},q.apply(null,arguments)}function j(t,e){if(null==t)return{};var r,n,o=P(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function P(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}function C(t){return z(t)||L(t)||D(t)||T()}function T(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D(t,e){if(t){if("string"==typeof t)return H(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(t,e):void 0}}function L(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function z(t){if(Array.isArray(t))return H(t)}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function K(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var N=function t(e){var r=e.acceptedTypes,n=e.onUpload,o=e.onError;var i=(0,s.useRef)(null);var a=function t(e){var i=e.target.files;if(!i){return}var a=[];var s=[];for(var l=0,c=C(i);l<c.length;l++){var d=c[l];if(!r.includes((0,E.dS)(d.name))){a.push((0,u.__)("Invalid file type","tutor"))}else if(d.size>Y.w3){a.push((0,u.__)("Maximum upload size exceeded","tutor"))}else{s.push(d)}}if(s.length){n(s)}if(a.length){o(a)}e.target.value=""};return{fileInputRef:i,handleChange:a}};var W=function t(e){var r=e.onUpload,n=e.onError,o=e.acceptedTypes,i=e.label,a=e.multiple,u=a===void 0?false:a,s=e.disabled,l=s===void 0?false:s;var c=N({acceptedTypes:o,onUpload:r,onError:n}),d=c.fileInputRef,f=c.handleChange;return ___EmotionJSX("button",{type:"button",css:U.uploadButton,onClick:function t(){var e;return(e=d.current)===null||e===void 0?void 0:e.click()},disabled:l},___EmotionJSX("input",{ref:d,type:"file",css:U.fileInput,accept:o.join(","),onChange:f,multiple:u,disabled:l}),___EmotionJSX(SVGIcon,{name:"storeImage",width:26,height:20}),___EmotionJSX("span",{css:U.text},i))};var U={uploadButton:(0,a.AH)(k.x.resetButton," background:",O.I6.background["default"],";border:1px dashed ",O.I6.stroke.border,";border-radius:",O.Vq[8],";display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1;gap:",O.YK[12],";"+(true?"":0),true?"":0),fileInput:true?{name:"eivff4",styles:"display:none"}:0,text:(0,a.AH)("color:",O.I6.text.subdued,";",I.I.body(),";"+(true?"":0),true?"":0)};var B=function t(e){var r=e.onUpload,n=e.onError,o=e.acceptedTypes,i=e.multiple,a=i===void 0?false:i,u=e.disabled,s=u===void 0?false:u,l=e.children,c=j(e,S);var d=N({acceptedTypes:o,onUpload:r,onError:n}),f=d.fileInputRef,p=d.handleChange;return ___EmotionJSX(Button,q({},c,{onClick:function t(){var e;return(e=f.current)===null||e===void 0?void 0:e.click()},disabled:s}),___EmotionJSX("input",{ref:f,type:"file",css:U.fileInput,accept:o.join(","),onChange:p,multiple:a,disabled:s}),l)};const F=null&&W;var M=r(93657);var R=r(18853);var Q=r.n(R);var G=r(40088);var V=["onClick","isOpen","disabled","closePopover","arrowPosition","children","animationType","dotsOrientation","maxWidth","isInverse","hideArrow","size","closeOnEscape"];function $(){return $=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$.apply(null,arguments)}function J(t,e){if(null==t)return{};var r,n,o=X(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function X(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}var Z=function t(e){var r=e.text,n=e.icon,o=e.onClick,i=e.onClosePopover,u=e.isTrash,s=u===void 0?false:u,l=e.size,c=l===void 0?"medium":l,d=e.css,f=e.disabled;return(0,a.Y)("button",{type:"button",css:[rt.option({isTrash:s,size:c}),d,true?"":0,true?"":0],onClick:function t(e){if(o){o(e)}if(i){i()}},disabled:f},n&&n,(0,a.Y)("span",null,r))};var tt=function t(e){var r=e.onClick,n=e.isOpen,o=e.disabled,i=o===void 0?false:o,u=e.closePopover,c=e.arrowPosition,d=c===void 0?"top":c,f=e.children,p=e.animationType,v=p===void 0?G.J6.slideLeft:p,y=e.dotsOrientation,g=y===void 0?"horizontal":y,m=e.maxWidth,b=m===void 0?"148px":m,_=e.isInverse,w=_===void 0?false:_,x=e.hideArrow,A=x===void 0?false:x,Y=e.size,O=Y===void 0?"medium":Y,I=e.closeOnEscape,k=I===void 0?true:I,E=J(e,V);var S=(0,s.useRef)(null);return(0,a.Y)(l().Fragment,null,(0,a.Y)("button",$({type:"button",ref:S,onClick:r,css:rt.button({isOpen:n,isInverse:w,isDisabled:i}),disabled:i},E),(0,a.Y)(h.A,{name:g==="horizontal"?"threeDots":"threeDotsVertical",width:32,height:32})),(0,a.Y)(M.A,{gap:13,maxWidth:b,arrow:d,triggerRef:S,isOpen:n,closePopover:u,animationType:v,hideArrow:A,closeOnEscape:k},(0,a.Y)("div",{css:rt.wrapper({size:O})},l().Children.map(f,(function(t){if(l().isValidElement(t)){var e={size:O};return l().cloneElement(t,e)}return t})))))};tt.Option=Z;const et=tt;var rt={wrapper:function t(e){var r=e.size,n=r===void 0?"medium":r;return(0,a.AH)("padding-block:",O.YK[8],";position:relative;",n==="small"&&(0,a.AH)("padding-block:",O.YK[4],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},option:function t(e){var r=e.isTrash,n=r===void 0?false:r,o=e.size,i=o===void 0?"medium":o;return(0,a.AH)(k.x.resetButton,";",I.I.body(),";width:100%;padding:",O.YK[10]," ",O.YK[20],";transition:background-color 0.3s ease-in-out;cursor:pointer;display:flex;align-items:center;gap:",O.YK[8],";&:focus,&:active,&:hover{background:none;color:",O.I6.text.primary,";}svg{flex-shrink:0;color:",O.I6.icon["default"],";}",i==="small"&&(0,a.AH)("padding:",O.YK[8]," ",O.YK[16],";",I.I.small("medium"),";"+(true?"":0),true?"":0)," :hover:not(:disabled){background-color:",O.I6.background.hover,";color:",O.I6.text.title,";svg{color:",O.I6.icon.hover,";filter:grayscale(0%);}}:disabled{cursor:not-allowed;color:",O.I6.text.disable,";svg{color:",O.I6.icon.disable.background,";}}",n&&(0,a.AH)("color:",O.I6.text.error,";svg{color:",O.I6.icon.error,";}&:hover:not(:disabled){color:",O.I6.text.error,";background-color:",Q()(O.I6.bg.error,.1),";svg{color:",O.I6.icon.error,";}}&:active{color:",O.I6.text.error,";background-color:",O.I6.color.danger[40],";svg{color:",O.I6.icon.error,";}}"+(true?"":0),true?"":0)," :focus-visible{outline:2px solid ",O.I6.stroke.brand,";outline-offset:-4px;border-radius:",O.Vq.input,";}"+(true?"":0),true?"":0)},button:function t(e){var r=e.isOpen,n=r===void 0?false:r,o=e.isInverse,i=o===void 0?false:o,u=e.isDisabled,s=u===void 0?false:u;return(0,a.AH)(k.x.resetButton,";width:32px;height:32px;border-radius:",O.Vq.circle,";display:flex;justify-content:center;align-items:center;transition:background-color 0.3s ease-in-out;svg{color:",O.I6.icon["default"],";}:hover{background-color:",O.I6.background.hover,";svg{color:",O.I6.icon["default"],";}}&:focus,&:active{background:none;}&:focus-visible{outline:2px solid ",O.I6.stroke.brand,";outline-offset:1px;}",n&&(0,a.AH)("background-color:",O.I6.background.hover,";svg{color:",O.I6.icon.brand,";}"+(true?"":0),true?"":0)," ",i&&(0,a.AH)("background-color:",O.I6.background.white,";:hover{background-color:",O.I6.background.white,";svg{color:",!s&&O.I6.icon.brand,";}}"+(true?"":0),true?"":0)," :disabled{cursor:not-allowed;}"+(true?"":0),true?"":0)}};var nt=r(76222);var ot=r(62456);var it=r(63691);var at=r(87723);var ut=r(53823);var st=r(73843);var lt=r(5783);var ct=r(67452);var dt=r(91927);var ft=r(11979);var pt=r(85541);var ht=r(62020);var vt=r(48658);function yt(t){"@babel/helpers - typeof";return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}var gt=["css"];function mt(t){return wt(t)||_t(t)||Pt(t)||bt()}function bt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _t(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function wt(t){if(Array.isArray(t))return Ct(t)}function xt(){return xt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xt.apply(null,arguments)}function At(t,e){if(null==t)return{};var r,n,o=Yt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Yt(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}function Ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function It(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(r),!0).forEach((function(e){kt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function kt(t,e,r){return(e=Et(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Et(t){var e=St(t,"string");return"symbol"==yt(e)?e:e+""}function St(t,e){if("object"!=yt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function qt(t,e){return Dt(t)||Tt(t,e)||Pt(t,e)||jt()}function jt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pt(t,e){if(t){if("string"==typeof t)return Ct(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(t,e):void 0}}function Ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Tt(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Dt(t){if(Array.isArray(t))return t}function Lt(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var zt={lesson:{name:"lesson",color:O.I6.icon["default"]},tutor_quiz:{name:"quiz",color:O.I6.design.warning},tutor_assignments:{name:"assignment",color:O.I6.icon.processing},tutor_zoom_meeting:{name:"zoomColorize",color:""},"tutor-google-meet":{name:"googleMeetColorize",color:""},tutor_h5p_quiz:{name:"quiz",color:O.I6.icon.warning}};var Ht=function t(e){var r=e.field,n=e.fieldState,o=e.options,i=e.onChange,l=i===void 0?E.lQ:i,c=e.handleSearchOnChange,d=e.label,f=e.placeholder,y=f===void 0?"":f,g=e.disabled,m=e.readOnly,b=e.loading,_=e.isSearchable,w=_===void 0?false:_,x=e.helpText;var O=r.value||[];var k=O.map((function(t){return String(t)}));var S=o.reduce((function(t,e){return e.contents.reduce((function(t,e){if(k.includes(String(e.ID))){t.push(e)}return t}),t)}),[]);var q=(0,s.useState)(false),j=qt(q,2),P=j[0],C=j[1];var T=(0,s.useState)(""),D=qt(T,2),L=D[0],z=D[1];var H=(0,dt.d)(L);var K=o.reduce((function(t,e){var r=e.contents.filter((function(t){return t.post_type!=="tutor-google-meet"&&t.post_type!=="tutor_zoom_meeting"&&!k.includes(String(t.ID))}));if(r.length===0){return t}if(e.title.toLowerCase().includes(H.toLowerCase())){t.push(It(It({},e),{},{contents:r}))}else{var n=e.contents.filter((function(t){return t.post_title.toLowerCase().includes(H.toLowerCase())}));if(n.length===0){return t}t.push(It(It({},e),{},{contents:n}))}return t}),[]);(0,s.useEffect)((function(){if(c){c(H)}else{}}),[H,c]);var N=(0,ft.t)({isOpen:P,isDropdown:true,dependencies:[K.length]}),W=N.triggerRef,U=N.triggerWidth,B=N.position,F=N.popoverRef;var M=function t(e){if(Array.isArray(O)){var n=O.filter((function(t){return String(t)!==String(e)}));r.onChange(n);l(n)}};return(0,a.Y)(vt.A,{fieldState:n,field:r,label:d,disabled:g,readOnly:m,helpText:x},(function(t){var e=t.css,n=At(t,gt);return(0,a.Y)("div",{css:Nt.mainWrapper},(0,a.Y)("div",{ref:W},(0,a.Y)("div",{css:Nt.inputWrapper},(0,a.Y)("div",{css:Nt.leftIcon},(0,a.Y)(h.A,{name:"search",width:24,height:24})),(0,a.Y)("input",xt({},n,{onClick:function t(e){e.stopPropagation();C((function(t){return!t}))},onKeyDown:function t(e){if(e.key==="Enter"){e.preventDefault();C((function(t){return!t}))}if(e.key==="Tab"){C(false)}},className:"tutor-input-field",css:[e,Nt.input,true?"":0,true?"":0],autoComplete:"off",readOnly:m||!w,placeholder:y,value:L,onChange:function t(e){z(e.target.value)}})))),(0,a.Y)(A.A,{when:O.length>0,fallback:(0,a.Y)(A.A,{when:!b,fallback:(0,a.Y)(p.YE,null)},(0,a.Y)(v.A,{size:"small",emptyStateImage:ht.A,emptyStateImage2x:pt.A,imageAltText:(0,u.__)("Illustration of a no course selected","tutor"),title:(0,u.__)("No topic content selected","tutor"),description:(0,u.__)("Select a topic content to add as a prerequisite","tutor")}))},(0,a.Y)("div",{css:Nt.courseList},(0,a.Y)(ct.A,{each:S},(function(t){var e;return(0,a.Y)("div",{key:t.ID,css:Nt.groupItems({onPopover:false})},(0,a.Y)("div",{css:Nt.iconAndTitle({onPopover:false})},(0,a.Y)(h.A,{name:((e=zt[t.post_type])===null||e===void 0?void 0:e.name)||"lesson",width:24,height:24,style:(0,a.AH)("color:",zt[t.post_type].color,";"+(true?"":0),true?"":0)}),(0,a.Y)("span",{css:Nt.title,title:t.post_title},t.post_title),(0,a.Y)(A.A,{when:t.post_type==="tutor_quiz"&&t.total_question},(0,a.Y)("span",{"data-question-count":true,css:I.I.tiny()},(0,u.sprintf)((0,u.__)("(%d questions)","tutor"),t.total_question)))),(0,a.Y)("button",{type:"button",css:Nt.removeButton,"data-visually-hidden":true,onClick:function e(){return M(t.ID)}},(0,a.Y)(h.A,{name:"times",width:14,height:14})))})))),(0,a.Y)(ft.Z,{isOpen:P,onClickOutside:function t(){C(false);z("")},onEscape:function t(){C(false);z("")}},(0,a.Y)("div",{css:[Nt.optionsWrapper,kt(kt(kt({},Y.V8?"right":"left",B.left),"top",B.top),"maxWidth",U),true?"":0,true?"":0],ref:F},(0,a.Y)("ul",{css:[Nt.options,true?"":0,true?"":0]},(0,a.Y)(A.A,{when:K.length>0,fallback:(0,a.Y)("li",{css:Nt.emptyOption},(0,a.Y)("p",null,(0,u.__)("No topics content found","tutor")))},(0,a.Y)(ct.A,{each:K},(function(t){return(0,a.Y)("li",{key:t.id,css:Nt.group},(0,a.Y)("span",{css:Nt.groupTitle,title:t.title},t.title),(0,a.Y)(ct.A,{each:t.contents},(function(t){var e;return(0,a.Y)("button",{key:t.ID,type:"button",css:Nt.groupItems({onPopover:true}),onClick:function e(){var n=[].concat(mt(O),[t.ID]);r.onChange(n);l(n);C(false);z("")}},(0,a.Y)("div",{css:Nt.iconAndTitle({onPopover:true}),"data-content-icon":true},(0,a.Y)(h.A,{name:((e=zt[t.post_type])===null||e===void 0?void 0:e.name)||"lesson",width:24,height:24,style:(0,a.AH)("color:",zt[t.post_type].color,";"+(true?"":0),true?"":0)}),(0,a.Y)("span",{css:Nt.title,title:t.post_title},t.post_title),(0,a.Y)(A.A,{when:t.post_type==="tutor_quiz"&&t.total_question},(0,a.Y)("span",{"data-question-count":true,css:I.I.tiny()},(0,u.sprintf)((0,u.__)("(%d questions)","tutor"),t.total_question)))))})))})))))))}))};const Kt=Ht;var Nt={mainWrapper:true?{name:"1d3w5wq",styles:"width:100%"}:0,inputWrapper:true?{name:"1712kcx",styles:"width:100%;display:flex;justify-content:space-between;align-items:center;position:relative"}:0,leftIcon:(0,a.AH)("position:absolute;left:",O.YK[8],";top:",O.YK[8],";color:",O.I6.icon["default"],";display:flex;"+(true?"":0),true?"":0),input:(0,a.AH)(I.I.body(),";width:100%;padding-right:",O.YK[32],";padding-left:",O.YK[36],";",k.x.textEllipsis,";border:1px solid ",O.I6.stroke["default"],";&.tutor-input-field{padding-right:",O.YK[32],";padding-left:",O.YK[36],";}"+(true?"":0),true?"":0),courseList:(0,a.AH)(k.x.display.flex("column")," gap:",O.YK[8],";max-height:256px;height:100%;margin-top:",O.YK[8],";",k.x.overflowYAuto,";padding:1px;"+(true?"":0),true?"":0),optionsWrapper:true?{name:"1n0kzcr",styles:"position:absolute;width:100%"}:0,options:(0,a.AH)("z-index:",O.fE.dropdown,";background-color:",O.I6.background.white,";list-style-type:none;box-shadow:",O.r7.popover,";padding:",O.YK[4]," 0;margin:0;max-height:400px;border-radius:",O.Vq[6],";",k.x.overflowYAuto,";"+(true?"":0),true?"":0),removeButton:(0,a.AH)(k.x.resetButton,";position:absolute;top:50%;right:",O.YK[8],";transform:translateY(-50%);display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:",O.Vq.circle,";background:",O.I6.background.white,";&:focus,&:active,&:hover{background:",O.I6.background.white,";}svg{color:",O.I6.icon["default"],";transition:color 0.3s ease-in-out;}:hover{svg{color:",O.I6.icon.hover,";}}:focus{box-shadow:",O.r7.focus,";}"+(true?"":0),true?"":0),emptyOption:(0,a.AH)(I.I.caption("medium"),";padding:",O.YK[8],";text-align:center;"+(true?"":0),true?"":0),group:(0,a.AH)("padding:",O.YK[10]," 0;:not(:last-child){border-bottom:1px solid ",O.I6.stroke.divider,";}"+(true?"":0),true?"":0),groupTitle:(0,a.AH)(I.I.small("semiBold"),";",k.x.text.ellipsis(1),";padding-inline:",O.YK[10],";margin-bottom:",O.YK[8],";"+(true?"":0),true?"":0),groupItems:function t(e){var r=e.onPopover;return(0,a.AH)("position:relative;width:100%;padding:",O.YK[10]," ",O.YK[8],";border-radius:",O.Vq[6],";border:1px solid transparent;display:flex;justify-content:space-between;align-items:center;gap:",O.YK[8],";background-color:",O.I6.background.white,";cursor:",r?"pointer":"default",";[data-content-icon]{display:flex;height:",r?"20px":"24px",";}[data-visually-hidden]{opacity:0;}",!r&&(0,a.AH)("box-shadow:",O.r7.card,";"+(true?"":0),true?"":0)," &:hover,&:focus,&:active{background-color:",O.I6.background.hover,";",!r&&(0,a.AH)("background-color:",O.I6.background.white,";border-color:",O.I6.stroke["default"],";[data-visually-hidden]{opacity:1;}"+(true?"":0),true?"":0),";}",O.EA.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},title:(0,a.AH)(I.I.caption(),";color:",O.I6.text.title,";display:flex;align-items:center;gap:",O.YK[4],";"+(true?"":0),true?"":0),iconAndTitle:function t(e){var r=e.onPopover;return(0,a.AH)(k.x.text.ellipsis(1),";display:flex;align-items:center;gap:",O.YK[8],";",r&&(0,a.AH)("padding-left:",O.YK[16],";"+(true?"":0),true?"":0)," svg{flex-shrink:0;}span{text-align:left;",k.x.text.ellipsis(1),";}[data-question-count]{flex-shrink:0;text-decoration:none;}"+(true?"":0),true?"":0)}};var Wt=r(48814);var Ut=r(15946);var Bt=r(17329);var Ft=r(38303);var Mt=r(11189);var Rt=r(79672);var Qt=r(30997);var Gt=r(40343);var Vt=r(13799);var $t=r(41594);function Jt(t){"@babel/helpers - typeof";return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jt(t)}function Xt(){return Xt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xt.apply(null,arguments)}function Zt(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Zt=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,a)&&(_=x);var A=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==Jt(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=k(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Jt(e)+" is not iterable")}return m.prototype=b,o(A,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(A),l(A,s,"Generator"),l(A,a,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:j(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function te(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function ee(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){te(i,n,o,a,u,"next",t)}function u(t){te(i,n,o,a,u,"throw",t)}a(void 0)}))}}function re(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ne(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?re(Object(r),!0).forEach((function(e){oe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oe(t,e,r){return(e=ie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ie(t){var e=ae(t,"string");return"symbol"==Jt(e)?e:e+""}function ae(t,e){if("object"!=Jt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var ue=(0,Rt.p9)();var se=[{label:(0,u.__)("Weeks","tutor"),value:"weeks"},{label:(0,u.__)("Days","tutor"),value:"days"},{label:(0,u.__)("Hours","tutor"),value:"hours"}];var le=function t(e){var r;var n=e.assignmentId,o=n===void 0?"":n,i=e.topicId,l=e.closeModal,c=e.icon,d=e.title,v=e.subtitle,y=e.contentDripType;var g=(0,Ft._)(),_=g.fields;var w=!!Qt.P.tutor_pro_url;var x=((r=Qt.P.settings)===null||r===void 0?void 0:r.chatgpt_enable)==="on";var O=(0,Mt.pR)(o,i);var I=(0,Mt.$2)(ue);var k=(0,m.jE)();var S=O.data;var q=k.getQueryData(["Topic",ue]);var j=(0,Gt.p)({defaultValues:{title:"",summary:"",attachments:[],time_duration:{value:"0",time:"weeks"},total_mark:10,pass_mark:5,upload_files_limit:1,upload_file_size_limit:2,content_drip_settings:{unlock_date:"",after_xdays_of_enroll:"",prerequisites:[]}},shouldFocusError:true,mode:"onChange"});var P=j.formState.dirtyFields&&Object.keys(j.formState.dirtyFields).length>0;(0,s.useEffect)((function(){if(S){var t,e,r;j.reset(ne({title:S.post_title||"",summary:(0,E.EW)(S.post_content)||"",attachments:S.attachments||[],time_duration:{value:S.assignment_option.time_duration.value||"0",time:S.assignment_option.time_duration.time||"weeks"},total_mark:S.assignment_option.total_mark||10,pass_mark:S.assignment_option.pass_mark||5,upload_files_limit:S.assignment_option.upload_files_limit||1,upload_file_size_limit:S.assignment_option.upload_file_size_limit||2,content_drip_settings:{unlock_date:(S===null||S===void 0||(t=S.content_drip_settings)===null||t===void 0?void 0:t.unlock_date)||"",after_xdays_of_enroll:(S===null||S===void 0||(e=S.content_drip_settings)===null||e===void 0?void 0:e.after_xdays_of_enroll)||"",prerequisites:(S===null||S===void 0||(r=S.content_drip_settings)===null||r===void 0?void 0:r.prerequisites)||[]}},Object.fromEntries((0,E.DE)({fields:_.Curriculum.Lesson}).map((function(t){return[t,S[t]]})))),{keepDirty:false})}var n=setTimeout((function(){j.setFocus("title")}),0);return function(){clearTimeout(n)}}),[S]);var C=function(){var t=ee(Zt().mark((function t(e){var r,n;return Zt().wrap((function t(a){while(1)switch(a.prev=a.next){case 0:r=(0,Mt.sC)(e,o,i,y,(0,E.DE)({fields:_.Curriculum.Assignment}));a.next=3;return I.mutateAsync(r);case 3:n=a.sent;if(n.status_code===200||n.status_code===201){l({action:"CONFIRM"})}case 5:case"end":return a.stop()}}),t)})));return function e(r){return t.apply(this,arguments)}}();return(0,a.Y)(Ut.A,{onClose:function t(){return l({action:"CLOSE"})},icon:P?(0,a.Y)(h.A,{name:"warning",width:24,height:24}):c,title:P?Y.vN.isAboveDesktop?(0,u.__)("Unsaved Changes","tutor"):"":d,subtitle:Y.vN.isAboveSmallMobile?v:"",maxWidth:1070,actions:P&&(0,a.Y)($t.Fragment,null,(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){if(o){j.reset()}else{l({action:"CLOSE"})}}},o?(0,u.__)("Discard Changes","tutor"):(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{loading:I.isPending,variant:"primary",size:"small",onClick:j.handleSubmit(C)},o?(0,u.__)("Update","tutor"):(0,u.__)("Save","tutor")))},(0,a.Y)("div",{css:de.wrapper},(0,a.Y)(A.A,{when:!O.isLoading,fallback:(0,a.Y)(p.p8,null)},(0,a.Y)("div",null,(0,a.Y)("div",{css:de.assignmentInfo},(0,a.Y)(b.xI,{name:"title",control:j.control,rules:ne({required:(0,u.__)("Assignment title is required","tutor")},(0,Vt.wA)(255)),render:function t(e){return(0,a.Y)(ut.A,Xt({},e,{label:(0,u.__)("Title","tutor"),placeholder:(0,u.__)("Enter Assignment Title","tutor"),generateWithAi:!w||x,isClearable:true}))}}),(0,a.Y)(b.xI,{name:"summary",control:j.control,render:function t(e){return(0,a.Y)(Wt.A,Xt({},e,{label:(0,u.__)("Content","tutor"),placeholder:(0,u.__)("Enter Assignment Content","tutor"),generateWithAi:!w||x}))}}),(0,a.Y)(Bt.A,{section:"Curriculum.Assignment.after_description",form:j}))),(0,a.Y)("div",{css:de.rightPanel},(0,a.Y)(b.xI,{name:"attachments",control:j.control,render:function t(e){return(0,a.Y)(at.A,Xt({},e,{label:(0,u.__)("Attachments","tutor"),buttonText:(0,u.__)("Upload Attachment","tutor"),selectMultiple:true}))}}),(0,a.Y)(A.A,{when:(0,E.GR)(Y.oW.CONTENT_DRIP)},(0,a.Y)(A.A,{when:y==="specific_days"},(0,a.Y)(b.xI,{name:"content_drip_settings.after_xdays_of_enroll",control:j.control,render:function t(e){return(0,a.Y)(ut.A,Xt({},e,{type:"number",label:(0,a.Y)("div",{css:de.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Available after days","tutor")),helpText:(0,u.__)("This assignment will be available after the given number of days.","tutor"),placeholder:"0",selectOnFocus:true}))}})),(0,a.Y)(A.A,{when:y==="unlock_by_date"},(0,a.Y)(b.xI,{name:"content_drip_settings.unlock_date",control:j.control,render:function t(e){return(0,a.Y)(it.A,Xt({},e,{label:(0,a.Y)("div",{css:de.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Unlock Date","tutor")),placeholder:(0,u.__)("Select Unlock Date","tutor"),helpText:(0,u.__)("This assignment will be available from the given date. Leave empty to make it available immediately.","tutor")}))}})),(0,a.Y)(A.A,{when:y==="after_finishing_prerequisites"},(0,a.Y)(b.xI,{name:"content_drip_settings.prerequisites",control:j.control,render:function t(e){return(0,a.Y)(Kt,Xt({},e,{label:(0,a.Y)("div",{css:de.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Prerequisites","tutor")),placeholder:(0,u.__)("Select Prerequisite","tutor"),options:q.reduce((function(t,e){if(String(e.id)===String(i)){t.push(ne(ne({},e),{},{contents:e.contents.filter((function(t){return String(t.ID)!==String(o)}))}))}else{t.push(e)}return t}),[])||[],isSearchable:true,helpText:(0,u.__)("Select items that should be complete before this item","tutor")}))}}))),(0,a.Y)("div",{css:de.timeLimit},(0,a.Y)(b.xI,{name:"time_duration.value",control:j.control,render:function t(e){return(0,a.Y)(ut.A,Xt({},e,{type:"number",label:(0,u.__)("Time Limit","tutor"),placeholder:"0",dataAttribute:"data-time-limit",selectOnFocus:true}))}}),(0,a.Y)(b.xI,{name:"time_duration.time",control:j.control,render:function t(e){return(0,a.Y)(lt.A,Xt({},e,{options:se,removeOptionsMinWidth:true,dataAttribute:"data-time-limit-unit"}))}})),(0,a.Y)(b.xI,{name:"total_mark",control:j.control,render:function t(e){return(0,a.Y)(ut.A,Xt({},e,{type:"number",label:(0,u.__)("Total Points","tutor"),placeholder:"0",selectOnFocus:true}))}}),(0,a.Y)(b.xI,{name:"pass_mark",control:j.control,rules:{validate:function t(e){if(Number(e)>Number(j.getValues("total_mark"))){return(0,u.__)("Pass mark cannot be greater than total mark","tutor")}return true}},render:function t(e){return(0,a.Y)(ut.A,Xt({},e,{type:"number",label:(0,u.__)("Minimum Pass Points","tutor"),placeholder:"0",selectOnFocus:true}))}}),(0,a.Y)(b.xI,{name:"upload_files_limit",control:j.control,render:function t(e){return(0,a.Y)(ut.A,Xt({},e,{placeholder:"0",type:"number",label:(0,u.__)("File Upload Limit","tutor"),helpText:(0,u.__)("Define the number of files that a student can upload in this assignment. Input 0 to disable the option to upload.","tutor"),selectOnFocus:true}))}}),(0,a.Y)(b.xI,{name:"upload_file_size_limit",control:j.control,render:function t(e){return(0,a.Y)(st.A,Xt({},e,{type:"number",label:(0,u.__)("Maximum File Size Limit","tutor"),placeholder:"0",content:(0,u.__)("MB","tutor"),contentPosition:"right"}))}}),(0,a.Y)(Bt.A,{section:"Curriculum.Assignment.bottom_of_sidebar",form:j})))))};const ce=le;var de={wrapper:(0,a.AH)("margin:0 auto;display:grid;grid-template-columns:1fr 338px;width:100%;height:100%;padding-inline:",O.YK[32],";",O.EA.smallTablet,"{grid-template-columns:1fr;padding-inline:",O.YK[24],";}",O.EA.mobile,"{padding-inline:",O.YK[16],";}"+(true?"":0),true?"":0),assignmentInfo:(0,a.AH)("padding-block:",O.YK[24],";padding-right:",O.YK[32],";display:flex;flex-direction:column;gap:",O.YK[24],";position:sticky;top:0;z-index:",O.fE.positive,";",O.EA.smallTablet,"{position:unset;padding-right:0;}"+(true?"":0),true?"":0),rightPanel:(0,a.AH)("border-left:1px solid ",O.I6.stroke.divider,";display:flex;flex-direction:column;gap:",O.YK[16],";padding-block:",O.YK[24],";padding-left:",O.YK[32],";",O.EA.smallTablet,"{border-left:none;padding-left:0;}"+(true?"":0),true?"":0),timeLimit:(0,a.AH)("display:grid;align-items:end;grid-template-columns:1fr 100px;& input{border:1px solid ",O.I6.stroke["default"],";&[data-time-limit]{border-radius:",O.Vq[6]," 0 0 ",O.Vq[6],";border-right:none;&:focus{border-right:1px solid ",O.I6.stroke["default"],";z-index:",O.fE.positive,";}}&[data-time-limit-unit]{border-radius:0 ",O.Vq[6]," ",O.Vq[6]," 0;}}"+(true?"":0),true?"":0),uploadAttachment:(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[8],";"+(true?"":0),true?"":0),uploadLabel:(0,a.AH)(I.I.body()," color:",O.I6.text.title,";"+(true?"":0),true?"":0),contentDripLabel:(0,a.AH)("display:flex;align-items:center;svg{margin-right:",O.YK[4],";color:",O.I6.icon.success,";}"+(true?"":0),true?"":0)};var fe=r(55834);var pe=r(49950);var he=r(44423);var ve=r(51832);var ye=r(59341);var ge=r(10802);var me=r(23930);var be=r(74808);var _e=r(85311);var we=r(60058);var xe=r(84048);function Ae(t){"@babel/helpers - typeof";return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function Ye(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Oe(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function t(){};return{s:o,n:function e(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();return a=e.done,e},e:function t(e){u=!0,i=e},f:function t(){try{a||null==r["return"]||r["return"]()}finally{if(u)throw i}}}}function Oe(t,e){if(t){if("string"==typeof t)return Ie(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ie(t,e):void 0}}function Ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ke(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ee(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(r),!0).forEach((function(e){Se(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Se(t,e,r){return(e=qe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qe(t){var e=je(t,"string");return"symbol"==Ae(e)?e:e+""}function je(t,e){if("object"!=Ae(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Pe={NEW:"new",UPDATE:"update",NO_CHANGE:"no_change"};var Ce=function t(e,r){var n=function t(e){if(e.image_url){return e.answer_view_format==="text_image"?Pe.NO_CHANGE:Pe.UPDATE}return e.answer_view_format==="text"?Pe.NO_CHANGE:Pe.UPDATE};var o=function t(e){if(e.question_settings){e.question_settings.answer_required=!!Number(e.question_settings.answer_required);e.question_settings.show_question_mark=!!Number(e.question_settings.show_question_mark);e.question_settings.randomize_question=!!Number(e.question_settings.randomize_question)}e.question_answers=e.question_answers.map((function(t){return Ee(Ee({},t),{},{_data_status:n(t),is_saved:true,answer_view_format:t.image_url?"text_image":"text"})}));e.question_description=(0,E.EW)(e.question_description)||"";e.answer_explanation=e.answer_explanation==='<p><br data-mce-bogus="1"></p>'?"":(0,E.EW)(e.answer_explanation)||"";switch(e.question_type){case"single_choice":{return Ee(Ee({},e),{},{_data_status:Pe.UPDATE,question_type:"multiple_choice",question_answers:e.question_answers.map((function(t){return Ee(Ee({},t),{},{_data_status:Pe.UPDATE})})),question_settings:Ee(Ee({},e.question_settings),{},{question_type:"multiple_choice",has_multiple_correct_answer:false})})}case"multiple_choice":{return Ee(Ee({},e),{},{_data_status:e.question_settings.has_multiple_correct_answer?Pe.NO_CHANGE:Pe.UPDATE,question_settings:Ee(Ee({},e.question_settings),{},{has_multiple_correct_answer:e.question_settings.has_multiple_correct_answer?!!Number(e.question_settings.has_multiple_correct_answer):true})})}case"matching":{return Ee(Ee({},e),{},{_data_status:e.question_settings.is_image_matching?Pe.NO_CHANGE:Pe.UPDATE,question_settings:Ee(Ee({},e.question_settings),{},{is_image_matching:e.question_settings.is_image_matching?!!Number(e.question_settings.is_image_matching):false})})}case"image_matching":{return Ee(Ee({},e),{},{_data_status:Pe.UPDATE,question_type:"matching",question_answers:e.question_answers.map((function(t){return Ee(Ee({},t),{},{_data_status:Pe.UPDATE})})),question_settings:Ee(Ee({},e.question_settings),{},{question_type:"matching",is_image_matching:true})})}default:return Ee(Ee({},e),{},{_data_status:Pe.NO_CHANGE})}};return Ee({ID:e.ID,_data_status:Pe.NO_CHANGE,quiz_title:e.post_title||"",quiz_description:e.post_content||"",quiz_option:{time_limit:{time_value:e.quiz_option.time_limit.time_value||0,time_type:e.quiz_option.time_limit.time_type||"minutes"},hide_quiz_time_display:e.quiz_option.hide_quiz_time_display==="1",feedback_mode:e.quiz_option.feedback_mode||"retry",attempts_allowed:e.quiz_option.attempts_allowed||10,pass_is_required:e.quiz_option.pass_is_required==="1",passing_grade:e.quiz_option.passing_grade||80,max_questions_for_answer:e.quiz_option.max_questions_for_answer||10,quiz_auto_start:e.quiz_option.quiz_auto_start==="1",question_layout_view:e.quiz_option.question_layout_view||"",questions_order:e.quiz_option.questions_order||"rand",hide_question_number_overview:e.quiz_option.hide_question_number_overview==="1",short_answer_characters_limit:e.quiz_option.short_answer_characters_limit||200,open_ended_answer_characters_limit:e.quiz_option.open_ended_answer_characters_limit||500,content_drip_settings:e.quiz_option.content_drip_settings||{unlock_date:"",after_xdays_of_enroll:0,prerequisites:[]}},questions:(e.questions||[]).map((function(t){return o(t)})),deleted_question_ids:[],deleted_answer_ids:[]},Object.fromEntries(r.map((function(t){return[t,e[t]]}))))};var Te=function t(e,r,n,o,i,a){var u,s;return Ee(Ee(Ee(Ee({course_id:o,topic_id:r,payload:{ID:e.ID,_data_status:e._data_status,post_title:e.quiz_title,post_content:e.quiz_description,quiz_option:Ee(Ee(Ee({attempts_allowed:e.quiz_option.attempts_allowed,feedback_mode:e.quiz_option.feedback_mode,hide_question_number_overview:e.quiz_option.hide_question_number_overview?"1":"0",hide_quiz_time_display:e.quiz_option.hide_quiz_time_display?"1":"0",max_questions_for_answer:(0,E.GR)(Y.oW.H5P_INTEGRATION)&&e.questions.every((function(t){return t.question_type==="h5p"}))?e.questions.length:e.quiz_option.max_questions_for_answer,open_ended_answer_characters_limit:e.quiz_option.open_ended_answer_characters_limit,pass_is_required:e.quiz_option.pass_is_required?"1":"0",passing_grade:e.quiz_option.passing_grade,question_layout_view:e.quiz_option.question_layout_view,questions_order:e.quiz_option.questions_order,quiz_auto_start:e.quiz_option.quiz_auto_start?"1":"0",short_answer_characters_limit:e.quiz_option.short_answer_characters_limit,time_limit:{time_type:e.quiz_option.time_limit.time_type,time_value:e.quiz_option.time_limit.time_value}},(0,E.GR)(Y.oW.CONTENT_DRIP)&&n==="unlock_sequentially"&&e.quiz_option.feedback_mode==="retry"&&{pass_is_required:e.quiz_option.pass_is_required?"1":"0"}),(0,E.GR)(Y.oW.CONTENT_DRIP)&&{content_drip_settings:Ee(Ee(Ee({},n==="unlock_by_date"&&{unlock_date:e.quiz_option.content_drip_settings.unlock_date}),n==="specific_days"&&{after_xdays_of_enroll:e.quiz_option.content_drip_settings.after_xdays_of_enroll}),n==="after_finishing_prerequisites"&&{prerequisites:(u=e.quiz_option.content_drip_settings.prerequisites)!==null&&u!==void 0&&u.length?e.quiz_option.content_drip_settings.prerequisites:""})}),(0,E.GR)(Y.oW.H5P_INTEGRATION)&&e.questions.every((function(t){return t.question_type==="h5p"}))&&{quiz_type:"tutor_h5p_quiz"}),questions:e.questions.map((function(t){return Ee(Ee({_data_status:t._data_status,question_id:t.question_id,question_title:t.question_title,question_description:t.question_description,question_mark:t.question_settings.question_mark},!!Qt.P.tutor_pro_url&&{answer_explanation:t.answer_explanation}),{},{question_type:t.question_type,question_order:t.question_order,question_settings:Ee(Ee({answer_required:t.question_settings.answer_required?"1":"0",question_mark:t.question_settings.question_mark,question_type:t.question_type,randomize_question:t.question_settings.randomize_question?"1":"0",show_question_mark:t.question_settings.show_question_mark?"1":"0"},t.question_type==="multiple_choice"&&{has_multiple_correct_answer:t.question_settings.has_multiple_correct_answer?"1":"0"}),t.question_type==="matching"&&{is_image_matching:t.question_settings.is_image_matching?"1":"0"}),question_answers:t.question_answers.map((function(e){return{_data_status:e._data_status,answer_id:e.answer_id,belongs_question_id:t.question_id,belongs_question_type:t.question_type,answer_title:e.answer_title,is_correct:e.is_correct,image_id:t.question_type==="matching"&&!t.question_settings.is_image_matching?"":e.image_id,image_url:t.question_type==="matching"&&!t.question_settings.is_image_matching?"":e.image_url,answer_two_gap_match:e.answer_two_gap_match,answer_view_format:e.answer_view_format,answer_order:e.answer_order}}))},Object.fromEntries(i.map((function(e){return[e,t[e]]}))))}))},deleted_question_ids:e.deleted_question_ids,deleted_answer_ids:e.deleted_answer_ids},(0,E.GR)(Y.oW.CONTENT_DRIP)&&n==="unlock_by_date"&&{"content_drip_settings[unlock_date]":e.quiz_option.content_drip_settings.unlock_date}),(0,E.GR)(Y.oW.CONTENT_DRIP)&&n==="specific_days"&&{"content_drip_settings[after_xdays_of_enroll]":e.quiz_option.content_drip_settings.after_xdays_of_enroll}),(0,E.GR)(Y.oW.CONTENT_DRIP)&&n==="after_finishing_prerequisites"&&{"content_drip_settings[prerequisites]":(s=e.quiz_option.content_drip_settings.prerequisites)!==null&&s!==void 0&&s.length?e.quiz_option.content_drip_settings.prerequisites:""}),Object.fromEntries(a.map((function(t){return[t,e[t]]}))))};var De=function t(e){return{question_id:e.question_id,question_title:e.question_title,question_description:e.question_description,question_type:e.question_type,question_mark:e.question_mark,answer_explanation:e.answer_explanation,"question_settings[question_type]":e.question_type,"question_settings[answer_required]":e.question_settings.answer_required?1:0,"question_settings[question_mark]":e.question_mark}};var Le=function t(e){return we.b.post(xe.A.QUIZ_IMPORT_DATA,e)};var ze=function t(){var e=(0,m.jE)();var r=(0,w.d)(),n=r.showToast;return(0,be.n)({mutationFn:Le,onSuccess:function t(r){if(r.success){e.invalidateQueries({queryKey:["Topic"]});n({message:(0,u.__)("Quiz imported successfully","tutor"),type:"success"})}else{n({message:r.data.message,type:"danger"})}},onError:function t(e){n({message:(0,E.EL)(e),type:"danger"})}})};var He=function t(e){return we.b.post(xe.A.QUIZ_EXPORT_DATA,{quiz_id:e})};var Ke=function t(){var e=(0,w.d)(),r=e.showToast;return(0,be.n)({mutationFn:He,onSuccess:function t(e){if(!e.success){r({message:(0,u.__)("Something went wrong.","tutor"),type:"danger"});return}var n="";var o=Ye(e.data.output_quiz_data),i;try{for(o.s();!(i=o.n()).done;){var a=i.value;var s=a.join(",");n+="".concat(s,"\r\n")}}catch(t){o.e(t)}finally{o.f()}var l=new Blob([n],{type:"text/csv"});var c=window.webkitURL.createObjectURL(l);var d=document.createElement("a");d.setAttribute("href",c);d.setAttribute("download","tutor-quiz-".concat(e.data.title,".csv"));document.body.appendChild(d);d.click()},onError:function t(e){r({message:(0,E.EL)(e),type:"danger"})}})};var Ne=function t(e){return we.b.post(xe.A.SAVE_QUIZ,e)};var We=function t(){var e=(0,m.jE)();var r=(0,w.d)(),n=r.showToast;return(0,be.n)({mutationFn:Ne,onSuccess:function t(r){if(r.data){e.setQueryData(["Quiz",r.data.ID],r.data);e.invalidateQueries({queryKey:["Topic"]});n({message:(0,u.__)(r.message,"tutor"),type:"success"})}},onError:function t(e){n({message:(0,E.EL)(e),type:"danger"})}})};var Ue=function t(e){return we.b.get(xe.A.GET_QUIZ_DETAILS,{params:{quiz_id:e}})};var Be=function t(e){return(0,_e.I)({queryKey:["Quiz",e],queryFn:function t(){return Ue(e).then((function(t){return t.data}))},enabled:!!e})};var Fe=function t(e,r){if(r===e){return null}if(e===Pe.NEW){return Pe.NEW}if((e===Pe.UPDATE||e===Pe.NO_CHANGE)&&r===Pe.UPDATE){return Pe.UPDATE}return Pe.NO_CHANGE};var Me=function t(e){return we.b.post(xe.A.GET_H5P_QUIZ_CONTENT,{search_filter:e})};var Re=function t(e,r){return(0,_e.I)({queryKey:["H5PQuizContents",e],queryFn:function t(){return Me(e).then((function(t){return t.data}))},enabled:r==="tutor_h5p_quiz"})};var Qe=function t(e){return wpAjaxInstance.post(endpoints.GET_H5P_QUIZ_CONTENT_BY_ID,{content_id:e}).then((function(t){return t.data}))};var Ge=function t(e,r){return useQuery({queryKey:["H5PQuizContent",e],queryFn:function t(){return Qe(e)},enabled:!!e&&r==="tutor_h5p_quiz"})};var Ve=function t(e){return we.b.post(xe.A.DELETE_QUIZ,{quiz_id:e})};var $e=function t(){var e=(0,m.jE)();var r=(0,w.d)(),n=r.showToast;return(0,be.n)({mutationFn:Ve,onSuccess:function t(r){if(r.status_code===200){n({message:(0,u.__)(r.message,"tutor"),type:"success"});e.invalidateQueries({queryKey:["Topic"]})}},onError:function t(e){n({message:(0,E.EL)(e),type:"danger"})}})};var Je=r(54812);function Xe(){return Xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xe.apply(null,arguments)}function Ze(t){return rr(t)||er(t)||ir(t)||tr()}function tr(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function er(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function rr(t){if(Array.isArray(t))return ar(t)}function nr(t,e){return sr(t)||ur(t,e)||ir(t,e)||or()}function or(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ir(t,e){if(t){if("string"==typeof t)return ar(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ar(t,e):void 0}}function ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ur(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function sr(t){if(Array.isArray(t))return t}var lr=function t(e){var r=e.title,n=e.closeModal,o=e.onAddContent,i=e.contentType,l=e.addedContentIds,c=l===void 0?[]:l;var d=(0,Gt.p)({defaultValues:{search:""}});var p=(0,dt.d)(d.watch("search"),300);var v=Re(p,i);var y=(0,Mt.Jc)(p,i);var g=(0,s.useState)([]),m=nr(g,2),_=m[0],w=m[1];var x=i==="tutor_h5p_quiz"?v.data:y.data;var O=x===null||x===void 0?void 0:x.output.filter((function(t){return!c.includes(String(t.id))}));var k=[{Header:(0,a.Y)("div",{"data-index":true,css:dr.tableLabel},O!==null&&O!==void 0&&O.length?(0,a.Y)(Je.A,{onChange:function t(e){if(e){w((O===null||O===void 0?void 0:O.filter((function(t){return!c.includes(String(t.id))})))||[])}else{w([])}},checked:_.length===((O===null||O===void 0?void 0:O.filter((function(t){return!c.includes(String(t.id))})))||[]).length,isIndeterminate:_.length>0&&_.length<((O===null||O===void 0?void 0:O.filter((function(t){return!c.includes(String(t.id))})))||[]).length}):"#"),Cell:function t(e){return(0,a.Y)("div",{css:I.I.caption()},(0,a.Y)(Je.A,{onChange:function t(r){if(r){w([].concat(Ze(_),[e]))}else{w(_.filter((function(t){return t.id!==e.id})))}},checked:_.map((function(t){return t.id})).includes(e.id)&&!c.includes(String(e.id))}))}},{Header:(0,a.Y)("div",{css:dr.tableLabel},(0,u.__)("Title","tutor")),Cell:function t(e){return(0,a.Y)("div",{css:dr.title},e.title)}},{Header:(0,a.Y)("div",{css:dr.tableLabel},(0,u.__)("Content Type","tutor")),Cell:function t(e){return(0,a.Y)("div",{css:I.I.caption()},e.content_type)}},{Header:(0,a.Y)("div",{css:dr.tableLabel},(0,u.__)("Created At","tutor")),Cell:function t(e){return(0,a.Y)("div",{css:I.I.caption()},(0,ye["default"])(new Date(e.updated_at),Y.Bd.yearMonthDayHourMinuteSecond))}}];(0,s.useEffect)((function(){document.body.style.overflow="hidden";return function(){document.body.style.overflow="auto"}}),[]);return(0,a.Y)(me.A,{title:_.length>0?(0,u.sprintf)((0,u.__)("%s  selected","tutor"),_.length):r,onClose:function t(){return n({action:"CLOSE"})},maxWidth:920},(0,a.Y)("div",{css:dr.searchWrapper},(0,a.Y)(b.xI,{control:d.control,name:"search",render:function t(e){return(0,a.Y)(st.A,Xe({},e,{placeholder:(0,u.__)("Search by title","tutor"),showVerticalBar:false,content:(0,a.Y)(h.A,{name:"search",width:24,height:24})}))}})),(0,a.Y)("div",{css:dr.tableWrapper},(0,a.Y)(ge.A,{columns:k,data:O||[],loading:v.isLoading||y.isLoading})),(0,a.Y)(A.A,{when:O===null||O===void 0?void 0:O.length},(0,a.Y)("div",{css:dr.footer},(0,a.Y)(f.A,{size:"small",variant:"text",onClick:function t(){return n({action:"CLOSE"})}},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{type:"submit",size:"small",variant:"primary",onClick:function t(){o(_);n({action:"CONFIRM"})},disabled:!_.length},(0,u.__)("Add","tutor")))))};const cr=lr;var dr={searchWrapper:(0,a.AH)("display:flex;padding:",O.YK[20],";"+(true?"":0),true?"":0),tableWrapper:(0,a.AH)("max-height:calc(100vh - 350px);overflow:auto;tr{td:first-of-type{padding-left:",O.YK[20],";}td:last-of-type{padding-right:",O.YK[20],";}}"+(true?"":0),true?"":0),tableLabel:(0,a.AH)(I.I.body("medium"),";text-align:left;color:",O.I6.text.primary,";&[data-index]{padding-left:",O.YK[4],";}"+(true?"":0),true?"":0),title:(0,a.AH)(k.x.text.ellipsis(2)," width:100%;text-align:left;",I.I.caption(),";min-width:340px;max-width:400px;"+(true?"":0),true?"":0),footer:(0,a.AH)("box-shadow:",O.r7.dividerTop,";height:56px;display:flex;align-items:center;justify-content:end;gap:",O.YK[16],";padding-inline:",O.YK[16],";"+(true?"":0),true?"":0)};var fr=r(41594);function pr(t){"@babel/helpers - typeof";return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pr(t)}function hr(){return hr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hr.apply(null,arguments)}function vr(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */vr=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,a)&&(_=x);var A=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==pr(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=k(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(pr(e)+" is not iterable")}return m.prototype=b,o(A,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(A),l(A,s,"Generator"),l(A,a,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:j(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function yr(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function gr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){yr(i,n,o,a,u,"next",t)}function u(t){yr(i,n,o,a,u,"throw",t)}a(void 0)}))}}function mr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function br(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mr(Object(r),!0).forEach((function(e){_r(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _r(t,e,r){return(e=wr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wr(t){var e=xr(t,"string");return"symbol"==pr(e)?e:e+""}function xr(t,e){if("object"!=pr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Ar(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Yr=(0,Rt.p9)();var Or=function t(e){var r,n,o,i;var l=e.lessonId,c=l===void 0?"":l,d=e.topicId,v=e.closeModal,y=e.icon,g=e.title,w=e.subtitle,O=e.contentDripType;var I=!!Qt.P.tutor_pro_url;var k=((r=Qt.P.settings)===null||r===void 0?void 0:r.chatgpt_enable)==="on";var S=Qt.P.enable_lesson_classic_editor==="1";var q=((n=Qt.P.settings)===null||n===void 0?void 0:n.hide_admin_bar_for_users)==="off";var j=(o=Qt.P.current_user.roles)===null||o===void 0?void 0:o.includes(Y.gt.ADMINISTRATOR);var P=(i=Qt.P.current_user.roles)===null||i===void 0?void 0:i.includes(Y.gt.TUTOR_INSTRUCTOR);var C=S&&(j||P&&q);var T=(0,Mt.Cx)(c,d);var D=(0,Mt.K3)(Yr);var L=(0,m.jE)();var z=(0,x.h)(),H=z.showModal;var K=T.data,N=T.isLoading;var W=L.getQueryData(["Topic",Yr]);var U=(0,Ft._)(),B=U.fields;var F=(0,Gt.p)({defaultValues:{title:"",description:"",thumbnail:null,tutor_attachments:[],lesson_preview:false,video:null,duration:{hour:0,minute:0,second:0},content_drip_settings:{unlock_date:"",after_xdays_of_enroll:"",prerequisites:[]}},shouldFocusError:true,mode:"onChange"});var M=F.formState.dirtyFields&&Object.keys(F.formState.dirtyFields).length>0;(0,s.useEffect)((function(){if(K&&!N){var t,e,r,n,o,i;F.reset(br({title:K.post_title||"",description:(0,E.EW)(K.post_content)||"",thumbnail:{id:K.thumbnail_id?Number(K.thumbnail_id):0,title:"",url:K.thumbnail||""},tutor_attachments:K.attachments||[],lesson_preview:K.is_preview||false,video:K.video||null,duration:{hour:((t=K.video.runtime)===null||t===void 0?void 0:t.hours)||0,minute:((e=K.video.runtime)===null||e===void 0?void 0:e.minutes)||0,second:((r=K.video.runtime)===null||r===void 0?void 0:r.seconds)||0},content_drip_settings:{unlock_date:(K===null||K===void 0||(n=K.content_drip_settings)===null||n===void 0?void 0:n.unlock_date)||"",after_xdays_of_enroll:(K===null||K===void 0||(o=K.content_drip_settings)===null||o===void 0?void 0:o.after_xdays_of_enroll)||"",prerequisites:(K===null||K===void 0||(i=K.content_drip_settings)===null||i===void 0?void 0:i.prerequisites)||[]}},Object.fromEntries((0,E.DE)({fields:B.Curriculum.Lesson}).map((function(t){return[t,K[t]]})))))}var a=document.querySelector(".button.insert-media.add_media");var u=document.querySelector(".add-h5p-content-button");if(a&&u){a.after(u)}var s=setTimeout((function(){F.setFocus("title")}),0);return function(){clearTimeout(s)}}),[K,N]);var R=function(){var t=gr(vr().mark((function t(e){var r,n;return vr().wrap((function t(o){while(1)switch(o.prev=o.next){case 0:r=(0,Mt.R6)(e,c,d,O,(0,E.DE)({fields:B.Curriculum.Lesson}));o.next=3;return D.mutateAsync(r);case 3:n=o.sent;if(n.data){v({action:"CONFIRM"})}case 5:case"end":return o.stop()}}),t)})));return function e(r){return t.apply(this,arguments)}}();var Q=function t(){var e=F.getValues("description");var r=e.match(/\[h5p id="(\d+)"\]/g)||[];var n=r.map((function(t){var e;var r=((e=t.match(/\[h5p id="(\d+)"\]/))===null||e===void 0?void 0:e[1])||"";return String(r)}));var o=function t(r){var n=function t(e){return'[h5p id="'.concat(e.id,'"]')};var o=r.map(n);F.setValue("description","".concat(e,"\n").concat(o.join("\n")),{shouldDirty:true})};H({component:cr,props:{title:(0,u.__)("Select H5P Content","tutor"),onAddContent:o,contentType:"lesson",addedContentIds:n}})};return(0,a.Y)(Ut.A,{onClose:function t(){return v({action:"CLOSE"})},icon:M?(0,a.Y)(h.A,{name:"warning",width:24,height:24}):y,title:M?Y.vN.isAboveDesktop?(0,u.__)("Unsaved Changes","tutor"):"":g,subtitle:Y.vN.isAboveSmallMobile?w:"",maxWidth:1070,actions:M&&(0,a.Y)(fr.Fragment,null,(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){if(c){F.reset()}else{v({action:"CLOSE"})}}},c?(0,u.__)("Discard Changes","tutor"):(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{loading:D.isPending,variant:"primary",size:"small",onClick:F.handleSubmit(R)},c?(0,u.__)("Update","tutor"):(0,u.__)("Save","tutor")))},(0,a.Y)("div",{css:kr.wrapper},(0,a.Y)(A.A,{when:!T.isLoading,fallback:(0,a.Y)(p.p8,null)},(0,a.Y)("div",null,(0,a.Y)("div",{css:kr.lessonInfo},(0,a.Y)(b.xI,{name:"title",control:F.control,rules:br({required:(0,u.__)("Lesson title is required.","tutor")},(0,Vt.wA)(255)),render:function t(e){return(0,a.Y)(ut.A,hr({},e,{label:(0,u.__)("Name","tutor"),placeholder:(0,u.__)("Enter Lesson Name","tutor"),generateWithAi:!I||k,isClearable:true}))}}),(0,a.Y)("div",{css:kr.description},(0,a.Y)(b.xI,{name:"description",control:F.control,render:function t(e){return(0,a.Y)(Wt.A,hr({},e,{label:(0,a.Y)("div",{css:kr.descriptionLabel},(0,u.__)("Content","tutor"),(0,a.Y)(A.A,{when:C},(0,a.Y)(fe.A,{content:(0,u.__)("Save the lesson first to use the WP Editor.","tutor"),delay:200,disabled:!!c},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){window.open("".concat(Qt.P.site_url,"/wp-admin/post.php?post=").concat(c,"&action=edit"),"_blank","noopener")},icon:(0,a.Y)(h.A,{name:"edit",width:24,height:24}),buttonCss:kr.wpEditorButton,disabled:!c},(0,u.__)("WP Editor","tutor"))))),placeholder:(0,u.__)("Enter Lesson Description","tutor"),generateWithAi:!I||k}))}}),(0,a.Y)(A.A,{when:I&&(0,E.GR)(Y.oW.H5P_INTEGRATION),fallback:(0,a.Y)(A.A,{when:!I},(0,a.Y)("button",{css:kr.addH5PContentButton({isPro:false}),type:"reset",className:"add-h5p-content-button",disabled:true},(0,a.Y)(_.A,null,(0,a.Y)("div",{"data-button-text":true},(0,u.__)("Add H5P Content","tutor")))))},(0,a.Y)("button",{className:"add-h5p-content-button",css:kr.addH5PContentButton,type:"button",onClick:Q},(0,u.__)("Add H5P Content","tutor")))),(0,a.Y)(Bt.A,{section:"Curriculum.Lesson.after_description",form:F}))),(0,a.Y)("div",{css:kr.rightPanel},(0,a.Y)(b.xI,{name:"thumbnail",control:F.control,render:function t(e){return(0,a.Y)(pe.A,hr({},e,{label:(0,u.__)("Featured Image","tutor"),buttonText:(0,u.__)("Upload Image","tutor"),infoText:(0,u.sprintf)((0,u.__)("JPEG, PNG, GIF, and WebP formats, up to %s","tutor"),Qt.P.max_upload_size)}))}}),(0,a.Y)(b.xI,{name:"video",control:F.control,render:function t(e){return(0,a.Y)(ve.A,hr({},e,{label:(0,u.__)("Video","tutor"),buttonText:(0,u.__)("Upload Video","tutor"),infoText:(0,u.sprintf)((0,u.__)("MP4, and WebM formats, up to %s","tutor"),Qt.P.max_upload_size),onGetDuration:function t(e){F.setValue("duration.hour",e.hours);F.setValue("duration.minute",e.minutes);F.setValue("duration.second",e.seconds)}}))}}),(0,a.Y)("div",{css:kr.durationWrapper},(0,a.Y)("span",{css:kr.additionLabel},(0,u.__)("Video Playback Time","tutor")),(0,a.Y)("div",{css:kr.duration},(0,a.Y)(b.xI,{name:"duration.hour",control:F.control,render:function t(e){return(0,a.Y)(st.A,hr({},e,{type:"number",content:(0,a.Y)("span",{css:kr.durationContent},(0,u.__)("hour","tutor")),contentPosition:"right",placeholder:"0",showVerticalBar:false}))}}),(0,a.Y)(b.xI,{name:"duration.minute",control:F.control,render:function t(e){return(0,a.Y)(st.A,hr({},e,{type:"number",content:(0,a.Y)("span",{css:kr.durationContent},(0,u.__)("min","tutor")),contentPosition:"right",placeholder:"0",showVerticalBar:false}))}}),(0,a.Y)(b.xI,{name:"duration.second",control:F.control,render:function t(e){return(0,a.Y)(st.A,hr({},e,{type:"number",content:(0,a.Y)("span",{css:kr.durationContent},(0,u.__)("sec","tutor")),contentPosition:"right",placeholder:"0",showVerticalBar:false}))}}))),(0,a.Y)(A.A,{when:(0,E.GR)(Y.oW.CONTENT_DRIP)},(0,a.Y)(A.A,{when:O==="specific_days"},(0,a.Y)(b.xI,{name:"content_drip_settings.after_xdays_of_enroll",control:F.control,render:function t(e){return(0,a.Y)(ut.A,hr({},e,{type:"number",label:(0,a.Y)("div",{css:kr.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Available after days","tutor")),helpText:(0,u.__)("This lesson will be available after the given number of days.","tutor"),placeholder:"0",selectOnFocus:true}))}})),(0,a.Y)(A.A,{when:O==="unlock_by_date"},(0,a.Y)(b.xI,{name:"content_drip_settings.unlock_date",control:F.control,render:function t(e){return(0,a.Y)(it.A,hr({},e,{label:(0,a.Y)("div",{css:kr.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Unlock Date","tutor")),placeholder:(0,u.__)("Select Unlock Date","tutor"),helpText:(0,u.__)("This lesson will be available from the given date. Leave empty to make it available immediately.","tutor")}))}})),(0,a.Y)(A.A,{when:O==="after_finishing_prerequisites"},(0,a.Y)(b.xI,{name:"content_drip_settings.prerequisites",control:F.control,render:function t(e){return(0,a.Y)(Kt,hr({},e,{label:(0,a.Y)("div",{css:kr.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Prerequisites","tutor")),placeholder:(0,u.__)("Select Prerequisite","tutor"),options:W.reduce((function(t,e){if(String(e.id)===String(d)){t.push(br(br({},e),{},{contents:e.contents.filter((function(t){return String(t.ID)!==String(c)}))}))}else{t.push(e)}return t}),[])||[],isSearchable:true,helpText:(0,u.__)("Select items that should be complete before this item","tutor")}))}}))),(0,a.Y)(b.xI,{name:"tutor_attachments",control:F.control,render:function t(e){return(0,a.Y)(at.A,hr({},e,{label:(0,u.__)("Exercise Files","tutor"),buttonText:(0,u.__)("Upload Attachment","tutor"),selectMultiple:true}))}}),(0,a.Y)(A.A,{when:!I||(0,E.GR)(Y.oW.TUTOR_COURSE_PREVIEW)},(0,a.Y)("div",{css:kr.lessonPreview},(0,a.Y)(b.xI,{name:"lesson_preview",control:F.control,render:function t(e){return(0,a.Y)(he.A,hr({},e,{disabled:!I,label:(0,a.Y)("div",{css:kr.previewLabel},(0,u.__)("Lesson Preview","tutor"),!I&&(0,a.Y)(_.A,{size:"small",content:(0,u.__)("Pro","tutor")})),helpText:(0,u.__)("If checked, any user/guest can view this lesson without enrolling in the course.","tutor")}))}}),(0,a.Y)(A.A,{when:F.watch("lesson_preview")},(0,a.Y)("div",{css:kr.previewInfo},(0,u.__)("This lesson is now available for preview. Users and guests can view it without enrolling in the course.","tutor"))))),(0,a.Y)(Bt.A,{section:"Curriculum.Lesson.bottom_of_sidebar",form:F})))))};const Ir=Or;var kr={wrapper:(0,a.AH)("margin:0 auto;display:grid;grid-template-columns:1fr 338px;height:100%;width:100%;padding-inline:",O.YK[32],";",O.EA.smallTablet,"{grid-template-columns:1fr;padding-inline:",O.YK[24],";}",O.EA.mobile,"{padding-inline:",O.YK[16],";}"+(true?"":0),true?"":0),lessonInfo:(0,a.AH)("padding-block:",O.YK[20],";padding-right:",O.YK[32],";display:flex;flex-direction:column;gap:",O.YK[24],";position:sticky;top:0;z-index:",O.fE.positive,";",O.EA.smallTablet,"{position:unset;padding-right:0;}"+(true?"":0),true?"":0),description:true?{name:"bjn8wh",styles:"position:relative"}:0,descriptionLabel:true?{name:"188e2n4",styles:"display:flex;align-items:center;justify-content:space-between;height:32px"}:0,addH5PContentButton:function t(e){var r=e.isPro,n=r===void 0?true:r;return(0,a.AH)("text-decoration:none;font-size:13px;line-height:2.15384615;min-height:30px;margin:0;padding:",!n?"0px":"0 10px",";cursor:pointer;border:1px solid #3e64de;border-radius:3px;white-space:nowrap;box-sizing:border-box;color:#3e64de;border-color:#3e64de;background:transparent;[data-button-text]{",k.x.flexCenter(),";padding:0 10px;}:hover:not(:disabled){background:",O.I6.background.white,";color:#3e64de;}:disabled{cursor:not-allowed;position:relative;top:auto;left:auto;opacity:0.5;}"+(true?"":0),true?"":0)},rightPanel:(0,a.AH)("border-left:1px solid ",O.I6.stroke.divider,";display:flex;flex-direction:column;gap:",O.YK[16],";padding-block:",O.YK[20],";padding-left:",O.YK[32],";",O.EA.smallTablet,"{border-left:none;padding-left:0;}"+(true?"":0),true?"":0),durationWrapper:(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[8],";"+(true?"":0),true?"":0),duration:(0,a.AH)("display:flex;align-items:flex-end;gap:",O.YK[8],";"+(true?"":0),true?"":0),durationContent:(0,a.AH)(I.I.small(),";color:",O.I6.text.hints,";"+(true?"":0),true?"":0),additionLabel:(0,a.AH)(I.I.body()," color:",O.I6.text.title,";"+(true?"":0),true?"":0),lessonPreview:(0,a.AH)("background-color:",O.I6.background.white,";padding:",O.YK[12],";border:1px solid ",O.I6.stroke["default"],";border-radius:",O.Vq[8],";"+(true?"":0),true?"":0),previewLabel:(0,a.AH)("display:flex;align-items:center;gap:",O.YK[4],";"+(true?"":0),true?"":0),contentDripLabel:(0,a.AH)("display:flex;align-items:center;svg{margin-right:",O.YK[4],";color:",O.I6.icon.success,";}"+(true?"":0),true?"":0),previewInfo:(0,a.AH)(I.I.small(),";text-align:center;color:",O.I6.text.title,";padding:",O.YK[8]," ",O.YK[24],";background:",O.I6.background.status.success,";border-radius:",O.Vq[4],";margin-top:",O.YK[12],";"+(true?"":0),true?"":0),wpEditorButton:(0,a.AH)("margin-left:",O.YK[4],";color:",O.I6.text.brand,";svg{color:",O.I6.icon.brand,";}&:hover:not(:disabled){text-decoration:underline;}"+(true?"":0),true?"":0)};var Er=r(61285);var Sr=r(38864);var qr=r(71948);function jr(t,e){return Lr(t)||Dr(t,e)||Cr(t,e)||Pr()}function Pr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cr(t,e){if(t){if("string"==typeof t)return Tr(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tr(t,e):void 0}}function Tr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Dr(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Lr(t){if(Array.isArray(t))return t}var zr=(0,s.createContext)(null);var Hr=function t(){var e=(0,s.useContext)(zr);if(!e){throw new Error("useQuizModalContext must be used within a QuizModalContextProvider")}return e};var Kr=function t(e){var r=e.children,n=e.quizId,o=e.contentType,i=e.validationError;var u=(0,s.useState)(""),l=jr(u,2),c=l[0],d=l[1];var f=(0,b.xW)();var p=f.watch("questions")||[];var h=(0,s.useRef)(p);var v=(0,s.useState)(i||null),y=jr(v,2),g=y[0],m=y[1];var _=p.findIndex((function(t){return t.question_id===c}));(0,s.useEffect)((function(){if(p.length===0){d("")}else if(h.current.length!==0&&h.current.length<p.length){var t=p.find((function(t){return!h.current.some((function(e){return String(e.question_id)===String(t.question_id)}))}));d((t===null||t===void 0?void 0:t.question_id)||"")}else if(_===-1){d(p[0].question_id)}h.current=p}),[p.length]);(0,s.useEffect)((function(){if(_===-1&&c){d("")}}),[_,c]);return(0,a.Y)(zr.Provider,{value:{activeQuestionIndex:_,activeQuestionId:c,setActiveQuestionId:d,quizId:n,validationError:g,setValidationError:m,contentType:o}},typeof r==="function"?r({activeQuestionIndex:_,activeQuestionId:c,setActiveQuestionId:d,setValidationError:m}):r)};function Nr(t){"@babel/helpers - typeof";return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nr(t)}function Wr(){return Wr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wr.apply(null,arguments)}function Ur(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Br(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ur(Object(r),!0).forEach((function(e){Fr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ur(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Fr(t,e,r){return(e=Mr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mr(t){var e=Rr(t,"string");return"symbol"==Nr(e)?e:e+""}function Rr(t,e){if("object"!=Nr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Qr(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Gr={true_false:{label:(0,u.__)("True/False","tutor"),icon:"quizTrueFalse"},multiple_choice:{label:(0,u.__)("Multiple Choice","tutor"),icon:"quizMultiChoice"},open_ended:{label:(0,u.__)("Open Ended/ Essay","tutor"),icon:"quizEssay"},fill_in_the_blank:{label:(0,u.__)("Fill in the Blanks","tutor"),icon:"quizFillInTheBlanks"},short_answer:{label:(0,u.__)("Short Answer","tutor"),icon:"quizShortAnswer"},matching:{label:(0,u.__)("Matching","tutor"),icon:"quizImageMatching"},image_answering:{label:(0,u.__)("Image Answering","tutor"),icon:"quizImageAnswer"},ordering:{label:(0,u.__)("Ordering","tutor"),icon:"quizOrdering"},h5p:{label:(0,u.__)("H5P","tutor"),icon:"quizTrueFalse"}};var Vr=["multiple_choice","matching","image_answering","ordering"];var $r=true?{name:"z33n32",styles:"max-width:80px"}:0;var Jr=function t(){var e=Hr(),r=e.activeQuestionIndex,n=e.activeQuestionId,o=e.validationError,i=e.setValidationError;var s=(0,b.xW)();var l=s.watch("questions.".concat(r,".question_type"));var c=s.watch("questions.".concat(r,"._data_status"));if(!n){return(0,a.Y)("p",{css:Zr.emptyQuestions},(0,u.__)("Create/Select a question to view details","tutor"))}return(0,a.Y)("div",{key:"".concat(n,"-").concat(r)},(0,a.Y)("div",{css:Zr.questionTypeWrapper},(0,a.Y)("div",{css:I.I.caption("medium")},(0,u.__)("Question Type","tutor")),(0,a.Y)("div",{css:Zr.questionType},(0,a.Y)(h.A,{name:l?Gr[l].icon:"quizTrueFalse",width:32,height:32}),(0,a.Y)("span",null,l?Gr[l].label:""))),(0,a.Y)("div",{css:Zr.conditions},(0,a.Y)("p",null,(0,u.__)("Conditions:","tutor")),(0,a.Y)("div",{css:Zr.conditionControls},(0,a.Y)(A.A,{when:l==="multiple_choice"},(0,a.Y)(b.xI,{control:s.control,name:"questions.".concat(r,".question_settings.has_multiple_correct_answer"),render:function t(e){return(0,a.Y)(he.A,Wr({},e,{label:(0,u.__)("Multiple Correct Answer","tutor"),onChange:function t(e){if(Fe(c,Pe.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Fe(c,Pe.UPDATE))}if(!e){s.setValue("questions.".concat(r,".question_answers"),s.getValues("questions.".concat(r,".question_answers")).map((function(t){return Br(Br({},t),{},{is_correct:"0"})})))}}}))}})),(0,a.Y)(A.A,{when:l==="matching"},(0,a.Y)(b.xI,{control:s.control,name:"questions.".concat(r,".question_settings.is_image_matching"),render:function t(e){return(0,a.Y)(he.A,Wr({},e,{label:(0,u.__)("Image Matching","tutor"),onChange:function t(e){if(Fe(c,Pe.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Fe(c,Pe.UPDATE))}if((o===null||o===void 0?void 0:o.type)==="question"&&!e){i(null)}}}))}})),(0,a.Y)(b.xI,{control:s.control,name:"questions.".concat(r,".question_settings.answer_required"),render:function t(e){return(0,a.Y)(he.A,Wr({},e,{label:(0,u.__)("Answer Required","tutor"),onChange:function t(){if(Fe(c,Pe.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Fe(c,Pe.UPDATE))}}}))}}),(0,a.Y)(A.A,{when:Vr.includes(l)},(0,a.Y)(b.xI,{control:s.control,name:"questions.".concat(r,".question_settings.randomize_question"),render:function t(e){return(0,a.Y)(he.A,Wr({},e,{label:(0,u.__)("Randomize Choice","tutor"),onChange:function t(){if(Fe(c,Pe.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Fe(c,Pe.UPDATE))}}}))}})),(0,a.Y)(b.xI,{control:s.control,name:"questions.".concat(r,".question_settings.question_mark"),rules:{min:0},render:function t(e){return(0,a.Y)(ut.A,Wr({},e,{label:(0,u.__)("Point For This Question","tutor"),type:"number",isInlineLabel:true,placeholder:"0",style:$r,onChange:function t(){if(Fe(c,Pe.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Fe(c,Pe.UPDATE))}}}))}}),(0,a.Y)(b.xI,{control:s.control,name:"questions.".concat(r,".question_settings.show_question_mark"),render:function t(e){return(0,a.Y)(he.A,Wr({},e,{label:(0,u.__)("Display Points","tutor"),onChange:function t(){if(Fe(c,Pe.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),Fe(c,Pe.UPDATE))}}}))}}),(0,a.Y)(Bt.A,{section:"Curriculum.Quiz.bottom_of_question_sidebar",namePrefix:"questions.".concat(r,"."),form:s}))))};const Xr=Jr;var Zr={emptyQuestions:(0,a.AH)("padding:",O.YK[12]," ",O.YK[32]," ",O.YK[24]," ",O.YK[24],";",I.I.caption("medium"),";"+(true?"":0),true?"":0),questionTypeWrapper:(0,a.AH)(k.x.display.flex("column"),";padding:",O.YK[8]," ",O.YK[32]," ",O.YK[24]," ",O.YK[24],";gap:",O.YK[10],";border-bottom:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0),questionType:(0,a.AH)("display:flex;align-items:center;gap:",O.YK[10],";"+(true?"":0),true?"":0),conditions:(0,a.AH)("padding:",O.YK[8]," ",O.YK[32]," ",O.YK[24]," ",O.YK[24],";p{",I.I.body("medium"),";color:",O.I6.text.primary,";}"+(true?"":0),true?"":0),conditionControls:(0,a.AH)(k.x.display.flex("column"),";gap:",O.YK[16],";margin-top:",O.YK[16],";"+(true?"":0),true?"":0)};var tn=r(43785);function en(t,e){return un(t)||an(t,e)||nn(t,e)||rn()}function rn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nn(t,e){if(t){if("string"==typeof t)return on(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?on(t,e):void 0}}function on(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function an(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function un(t){if(Array.isArray(t))return t}function sn(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var ln=function t(e){var r;var n=e.label,o=e.field,i=e.fieldState,l=e.disabled,c=e.loading,d=e.placeholder,p=e.helpText,h=e.onChange;var v=(r=o.value)!==null&&r!==void 0?r:"";var y=(0,s.useState)(false),g=en(y,2),m=g[0],b=g[1];var _=(0,s.useState)(v),w=en(_,2),x=w[0],Y=w[1];return(0,a.Y)("div",{css:yn.wrapper({hasValue:!!v&&!m})},(0,a.Y)(A.A,{when:m||v},(0,a.Y)("label",{css:yn.answerLabel},n)),(0,a.Y)("div",{css:yn.editorWrapper({isEdit:m})},(0,a.Y)("div",{css:yn.container({isEdit:m||!!v})},(0,a.Y)(A.A,{when:!v&&!m,fallback:(0,a.Y)(Wt.A,{field:o,fieldState:i,disabled:l,helpText:p,loading:c,readOnly:!m,onChange:h,placeholder:d,autoFocus:true,isMinimal:true})},(0,a.Y)("div",{css:yn.placeholder},d)),(0,a.Y)(A.A,{when:m},(0,a.Y)("div",{"data-action-buttons":true,css:yn.actionButtonWrapper({isEdit:m})},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){o.onChange(x);b(false)}},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{variant:"secondary",size:"small",onClick:function t(){var e;Y((e=o.value)!==null&&e!==void 0?e:"");b(false)},disabled:o.value===x},(0,u.__)("Ok","tutor")))),(0,a.Y)(A.A,{when:!m},(0,a.Y)("div",{onClick:function t(){if(!m&&!l){b(true)}},onKeyDown:function t(e){if((e.key==="Enter"||e.key===" ")&&!m){b(true)}},"data-overlay":true,tabIndex:0,role:"button"})))))};const cn=ln;var dn=true?{name:"3ix1vd",styles:"opacity:1"}:0;var fn=true?{name:"1dz94pb",styles:"resize:vertical"}:0;var pn=true?{name:"1peqg37",styles:"background-color:transparent"}:0;var hn=true?{name:"1hcx8jb",styles:"padding:0"}:0;var vn=true?{name:"11j83c5",styles:"padding-inline:0;max-height:unset;overflow:unset"}:0;var yn={wrapper:function t(e){var r=e.hasValue;return(0,a.AH)(k.x.display.flex("column")," gap:",O.YK[10],";border-radius:",O.Vq.card,";",r&&(0,a.AH)("background-color:",O.I6.color.success[30],";padding:",O.YK[12]," ",O.YK[24],";&:hover{background-color:",O.I6.color.success[40],";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},editorWrapper:function t(e){var r=e.isEdit;return(0,a.AH)("position:relative;max-height:400px;overflow-y:scroll;",r&&vn,";"+(true?"":0),true?"":0)},container:function t(e){var r=e.isEdit;return(0,a.AH)("position:relative;display:flex;flex-direction:column;gap:",O.YK[16],";min-height:48px;height:100%;width:100%;inset:0;border-radius:",O.Vq[6],";transition:background 0.15s ease-in-out;[data-overlay]{position:absolute;inset:0;opacity:1;:focus-visible{outline:2px solid ",O.I6.stroke.brand,";outline-offset:-2px;border-radius:",O.Vq.card,";}}& label{",I.I.caption()," margin-bottom:",O.YK[6],";color:",O.I6.text.title,";}",r&&hn," &:hover{background-color:",O.I6.background.white,";color:",O.I6.text.subdued,";cursor:text;",r&&pn,";[data-action-buttons]{opacity:1;}}"+(true?"":0),true?"":0)},inputContainer:function t(e){return(0,a.AH)("position:relative;display:flex;& textarea{",I.I.caption()," color:",O.I6.text.title,";height:auto;padding:",O.YK[8]," ",O.YK[12],";resize:none;",e&&fn,";}"+(true?"":0),true?"":0)},clearButton:(0,a.AH)("position:absolute;right:",O.YK[2],";top:",O.YK[2],";width:36px;height:36px;border-radius:",O.Vq[2],";background:transparent;button{padding:",O.YK[10],";}"+(true?"":0),true?"":0),placeholder:(0,a.AH)("padding:",O.YK[12]," ",O.YK[24],";",I.I.caption()," color:",O.I6.text.hints,";display:flex;align-items:center;height:100%;"+(true?"":0),true?"":0),actionButtonWrapper:function t(e){var r=e.isEdit;return(0,a.AH)("display:flex;justify-content:flex-end;gap:",O.YK[8],";opacity:0;transition:opacity 0.15s ease-in-out;",r&&dn,";"+(true?"":0),true?"":0)},answer:(0,a.AH)("padding:",O.YK[12]," ",O.YK[24],";border-radius:",O.Vq.card,";display:flex;flex-direction:column;gap:",O.YK[16],";background-color:",O.I6.background.success.fill30,";color:",O.I6.text.title,";transition:background 0.15s ease-in-out;&:hover{background-color:",O.I6.background.success.fill40,";}"+(true?"":0),true?"":0),answerLabel:(0,a.AH)(I.I.caption()," color:",O.I6.text.title,";"+(true?"":0),true?"":0),answerParagraph:(0,a.AH)("pre{",k.x.overflowXAuto,";}"+(true?"":0),true?"":0)};function gn(t,e){return xn(t)||wn(t,e)||bn(t,e)||mn()}function mn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bn(t,e){if(t){if("string"==typeof t)return _n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_n(t,e):void 0}}function _n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function wn(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function xn(t){if(Array.isArray(t))return t}function An(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Yn=!!Qt.P.tutor_pro_url;var On=function t(e){var r;var n=e.label,o=e.field,i=e.fieldState,l=e.disabled,c=l===void 0?false:l,d=e.loading,p=e.placeholder,h=e.helpText,v=e.onChange;var y=(r=o.value)!==null&&r!==void 0?r:"";var g=(0,s.useState)(false),m=gn(g,2),b=m[0],_=m[1];var w=(0,s.useState)(y),x=gn(w,2),Y=x[0],O=x[1];return(0,a.Y)("div",{css:qn.editorWrapper({isEdit:b})},(0,a.Y)("div",{css:qn.container({isEdit:b,isDisabled:c})},(0,a.Y)(A.A,{when:!b&&(!Yn||!y),fallback:(0,a.Y)(A.A,{when:Yn,fallback:(0,a.Y)(Er.A,{field:o,fieldState:i,label:n,disabled:c,helpText:h,loading:d,readOnly:!b,onChange:v,placeholder:p,autoResize:true,maxHeight:400})},(0,a.Y)(Wt.A,{field:o,fieldState:i,label:n,disabled:c,helpText:h,loading:d,readOnly:!b,onChange:v,placeholder:p,min_height:100,max_height:400,toolbar1:"bold italic underline | bullist numlist | blockquote | alignleft aligncenter alignright | link unlink | ".concat(Yn?" codesample":""," | wp_adv"),toolbar2:"formatselect strikethrough hr wp_more forecolor pastetext removeformat charmap outdent indent undo redo wp_help fullscreen tutor_button undoRedoDropdown"}))},(0,a.Y)("div",{css:qn.placeholder,dangerouslySetInnerHTML:{__html:y||p||""}})),(0,a.Y)(A.A,{when:b},(0,a.Y)("div",{"data-action-buttons":true,css:qn.actionButtonWrapper({isEdit:b})},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){o.onChange(Y);_(false)}},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{variant:"secondary",size:"small",onClick:function t(){_(false);O(o.value||"")},disabled:y===Y},(0,u.__)("Ok","tutor")))),(0,a.Y)(A.A,{when:!b},(0,a.Y)("div",{onClick:function t(){if(!b&&!c){_(true)}},onKeyDown:function t(e){if((e.key==="Enter"||e.key===" ")&&!b){_(true)}},"data-overlay":true,tabIndex:0,role:"button"}))))};const In=On;var kn=true?{name:"3ix1vd",styles:"opacity:1"}:0;var En=true?{name:"gv9h2n",styles:"padding-inline:0"}:0;var Sn=true?{name:"11j83c5",styles:"padding-inline:0;max-height:unset;overflow:unset"}:0;var qn={editorWrapper:function t(e){var r=e.isEdit;return(0,a.AH)("position:relative;max-height:400px;overflow-y:auto;border-radius:",O.Vq[6],";",r&&Sn,";"+(true?"":0),true?"":0)},container:function t(e){var r=e.isEdit,n=e.isDisabled;return(0,a.AH)("position:relative;display:flex;flex-direction:column;gap:",O.YK[16],";min-height:64px;height:100%;width:100%;inset:0;padding-inline:",O.YK[8]," ",O.YK[16],";border-radius:",O.Vq[6],";transition:background-color 0.15s ease-in-out;[data-overlay]{position:absolute;inset:0;opacity:1;&:focus-visible{outline:2px solid ",O.I6.stroke.brand,";outline-offset:-2px;border-radius:",O.Vq.card,";}}& label{",I.I.caption(),";margin-bottom:",O.YK[6],";color:",O.I6.text.title,";}",!n&&(0,a.AH)("&:hover{background-color:",!r&&O.I6.background.white,";color:",O.I6.text.subdued,";[data-action-buttons]{opacity:1;}}"+(true?"":0),true?"":0)," ",r&&En,";"+(true?"":0),true?"":0)},placeholder:(0,a.AH)(I.I.caption()," color:",O.I6.text.hints,";height:100%;inset:0;padding-block:",O.YK[8],";overflow-x:hidden;"+(true?"":0),true?"":0),actionButtonWrapper:function t(e){var r=e.isEdit;return(0,a.AH)("display:flex;justify-content:flex-end;gap:",O.YK[8],";opacity:0;transition:opacity 0.15s ease-in-out;",r&&kn,";"+(true?"":0),true?"":0)},overlay:true?{name:"b98nv4",styles:"position:absolute;inset:0"}:0};var jn=r(40575);var Pn=r(41594);function Cn(t){"@babel/helpers - typeof";return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cn(t)}function Tn(){return Tn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tn.apply(null,arguments)}function Dn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ln(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dn(Object(r),!0).forEach((function(e){zn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function zn(t,e,r){return(e=Hn(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hn(t){var e=Kn(t,"string");return"symbol"==Cn(e)?e:e+""}function Kn(t,e){if("object"!=Cn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Cn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Nn(t,e){return Mn(t)||Fn(t,e)||Un(t,e)||Wn()}function Wn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Un(t,e){if(t){if("string"==typeof t)return Bn(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bn(t,e):void 0}}function Bn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Fn(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Mn(t){if(Array.isArray(t))return t}function Rn(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Qn=function t(e){var r;var n=e.maxLimit,o=e.field,i=e.fieldState,u=e.disabled,l=e.readOnly,c=e.loading,d=e.placeholder,p=e.helpText,v=e.onChange,y=e.onKeyDown,g=e.isHidden,m=e.isSecondary,b=m===void 0?false:m,_=e.removeBorder,w=e.dataAttribute,x=e.isInlineLabel,Y=x===void 0?false:x,O=e.style,I=e.selectOnFocus,k=I===void 0?false:I;var E=(r=o.value)!==null&&r!==void 0?r:"";var S=(0,s.useRef)(null);var q=(0,s.useState)(false),j=Nn(q,2),P=j[0],C=j[1];var T=(0,s.useState)(E),D=Nn(T,2),L=D[0],z=D[1];var H=undefined;if(n){H={maxLimit:n,inputCharacter:E.toString().length}}var K=Ln({},(0,jn.O9)(w)&&zn({},w,true));(0,s.useEffect)((function(){if((0,jn.O9)(S.current)){S.current.focus();z(E)}}),[P,S.current]);return(0,a.Y)("div",{role:"button",tabIndex:0,css:$n.container({isEdit:P,isDisabled:u||false})},(0,a.Y)(A.A,{when:!P},(0,a.Y)("div",{css:$n.placeholder,onClick:function t(){return!u&&C(true)},onKeyDown:function t(e){if(e.key==="Enter"||e.key===" "){C(true)}}},o.value||d)),(0,a.Y)(A.A,{when:P},(0,a.Y)(vt.A,{field:o,fieldState:i,disabled:u,readOnly:l,loading:c,helpText:p,isHidden:g,characterCount:H,isSecondary:b,removeBorder:_,isInlineLabel:Y,inputStyle:O},(function(t){return(0,a.Y)(Pn.Fragment,null,(0,a.Y)("div",{css:$n.inputContainer(false)},(0,a.Y)("input",Tn({},o,t,K,{className:"tutor-input-field",type:"text",ref:S,value:E,onChange:function t(e){var r=e.target.value;o.onChange(r);if(v){v(r)}},onKeyDown:function t(e){if(e.key==="Enter"){C(false)}if(e.key==="Escape"){o.onChange(L);C(false)}y===null||y===void 0||y(e.key)},onFocus:function t(e){if(k){e.target.select()}},autoComplete:"off"}))))}))),(0,a.Y)("div",{"data-action-buttons":true,css:$n.actionButtonWrapper({isEdit:P})},(0,a.Y)(A.A,{when:P,fallback:(0,a.Y)(f.A,{buttonCss:$n.actionButton,variant:"text",size:"small",onClick:function t(){return C(true)}},(0,a.Y)(h.A,{name:"edit",height:24,width:24}))},(0,a.Y)(Pn.Fragment,null,(0,a.Y)(A.A,{when:o.value!==L},(0,a.Y)(f.A,{buttonCss:$n.actionButton,variant:"text",size:"small",onClick:function t(){C(false)},disabled:o.value===L},(0,a.Y)(h.A,{name:"checkMark",height:24,width:24}))),(0,a.Y)(f.A,{buttonCss:$n.actionButton,variant:"text",size:"small",onClick:function t(){o.onChange(L);C(false)}},(0,a.Y)(h.A,{name:"lineCross",height:24,width:24}))))))};const Gn=Qn;var Vn=true?{name:"3ix1vd",styles:"opacity:1"}:0;var $n={container:function t(e){var r=e.isEdit,n=e.isDisabled;return(0,a.AH)("position:relative;display:grid;grid-template-columns:1fr auto;align-items:center;gap:",O.YK[8],";min-height:50px;height:100%;width:100%;cursor:text;padding-inline:",O.YK[8]," ",O.YK[16],";padding-block:",O.YK[8],";border-radius:",O.Vq[6],";transition:box-shadow 0.15s ease-in-out;border:1px solid transparent;",!n&&(0,a.AH)("&:hover{background-color:",O.I6.background.white,";color:",O.I6.text.subdued,";[data-action-buttons]{opacity:",!n?1:0,";}}&:focus-within{",r&&k.x.inputFocus," [data-action-buttons]{opacity:1;}}&:focus-visible{outline:2px solid ",O.I6.stroke.brand,";}"+(true?"":0),true?"":0)," ",r&&(0,a.AH)("background-color:",O.I6.background.white,";color:",O.I6.text.subdued,";padding-block:",O.YK[4],";border:1px solid ",O.I6.stroke["default"],";cursor:default;"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-action-buttons]{opacity:1;}}"+(true?"":0),true?"":0)},inputContainer:function t(e){return(0,a.AH)("position:relative;display:flex;transition:background 0.15s ease-in-out;& input{",I.I.heading6()," color:",O.I6.text.primary,";border:none;background:none;padding:0;",e&&"padding-right: ".concat(O.YK[36],";"),";width:100%;&.tutor-input-field{border:none;box-shadow:none;padding-inline:0;&:focus{border:none;box-shadow:none;outline:none;}}}"+(true?"":0),true?"":0)},clearButton:(0,a.AH)("position:absolute;right:",O.YK[2],";top:",O.YK[2],";width:36px;height:36px;border-radius:",O.Vq[2],";background:transparent;button{padding:",O.YK[10],";}"+(true?"":0),true?"":0),placeholder:(0,a.AH)(I.I.heading6()," color:",O.I6.text.hints,";border-radius:",O.Vq[6],";"+(true?"":0),true?"":0),actionButtonWrapper:function t(e){var r=e.isEdit;return(0,a.AH)("display:flex;align-items:center;gap:",O.YK[8],";opacity:0;transition:opacity 0.15s ease-in-out;",r&&Vn,";"+(true?"":0),true?"":0)},actionButton:(0,a.AH)("padding:0;color:",O.I6.icon.subdued,";"+(true?"":0),true?"":0)};function Jn(t){"@babel/helpers - typeof";return Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jn(t)}function Xn(){return Xn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xn.apply(null,arguments)}function Zn(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Zn=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,a)&&(_=x);var A=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==Jn(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=k(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Jn(e)+" is not iterable")}return m.prototype=b,o(A,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(A),l(A,s,"Generator"),l(A,a,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:j(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function to(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function eo(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){to(i,n,o,a,u,"next",t)}function u(t){to(i,n,o,a,u,"throw",t)}a(void 0)}))}}function ro(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function no(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ro(Object(r),!0).forEach((function(e){oo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oo(t,e,r){return(e=io(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function io(t){var e=ao(t,"string");return"symbol"==Jn(e)?e:e+""}function ao(t,e){if("object"!=Jn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function uo(t,e){return po(t)||fo(t,e)||lo(t,e)||so()}function so(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lo(t,e){if(t){if("string"==typeof t)return co(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?co(t,e):void 0}}function co(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function fo(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function po(t){if(Array.isArray(t))return t}function ho(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var vo=function t(e){var r,n,o,i;var l=e.field;var c=Hr(),d=c.activeQuestionId,p=c.validationError,v=c.setValidationError;var y=(r=l.value)!==null&&r!==void 0?r:{_data_status:Pe.NEW,is_saved:false,answer_id:(0,E.Ak)(),answer_title:"",belongs_question_id:d,belongs_question_type:"fill_in_the_blank",answer_two_gap_match:"",answer_view_format:"text",answer_order:0,is_correct:"0"};var g=(0,s.useRef)(null);var m=(n=y.answer_two_gap_match)===null||n===void 0?void 0:n.split("|");var b=(0,s.useState)(!y.answer_title||!y.answer_two_gap_match),_=uo(b,2),w=_[0],x=_[1];var Y=(0,s.useState)(y),O=uo(Y,2),I=O[0],S=O[1];var q=((o=y.answer_title)===null||o===void 0||(o=o.match(/{dash}/g))===null||o===void 0?void 0:o.length)||0;var j=((i=y.answer_two_gap_match)===null||i===void 0?void 0:i.split("|").length)||0;var P=!!(y.answer_title&&y.answer_two_gap_match&&q!==j);(0,s.useEffect)((function(){if((0,jn.O9)(g.current)&&w){g.current.focus()}}),[w]);return(0,a.Y)("div",{css:go.option},(0,a.Y)("div",{css:go.optionLabel({isEditing:w})},(0,a.Y)("div",{css:go.optionHeader},(0,a.Y)("div",{css:go.optionTitle},(0,u.__)("Fill in the blanks","tutor")),(0,a.Y)(A.A,{when:y.is_saved&&!w},(0,a.Y)("div",{css:go.optionActions},(0,a.Y)(fe.A,{content:(0,u.__)("Edit","tutor")},(0,a.Y)("button",{type:"button",css:k.x.actionButton,"data-edit-button":true,onClick:function t(e){e.stopPropagation();x(true)},"data-visually-hidden":true},(0,a.Y)(h.A,{name:"edit",width:24,height:24})))))),(0,a.Y)("div",{css:go.optionBody},(0,a.Y)(A.A,{when:!y.is_saved||w,fallback:(0,a.Y)("div",{css:go.placeholderWrapper},(0,a.Y)("div",{css:go.optionPlaceholder({isTitle:!!y.answer_title})},y.answer_title?y.answer_title.replace(/{dash}/g,"_____"):(0,u.__)("Question title...","tutor")),(0,a.Y)("div",{css:go.optionPlaceholder({isCorrectAnswer:m===null||m===void 0?void 0:m.length})},m&&m.length>0?(0,a.Y)(ct.A,{each:m},(function(t,e){return(0,a.Y)(s.Fragment,{key:e},t,(0,a.Y)(A.A,{when:e<(m?m.length-1:0)},(0,a.Y)("span",null,"|")))})):(0,u.__)("Correct Answer(s)...","tutor")))},(0,a.Y)("div",{css:go.optionInputWrapper},(0,a.Y)("div",{css:go.inputWithHints},(0,a.Y)("input",Xn({},l,{ref:g,type:"text",placeholder:(0,u.__)("Question title...","tutor"),value:y.answer_title,onClick:function t(e){e.stopPropagation()},onChange:function t(e){l.onChange(no(no(no({},y),Fe(y._data_status,Pe.UPDATE)&&{_data_status:Fe(y._data_status,Pe.UPDATE)}),{},{answer_title:e.target.value}))},onKeyDown:function(){var t=eo(Zn().mark((function t(e){return Zn().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&y.answer_title){l.onChange(no(no({},y),Fe(y._data_status,Pe.UPDATE)&&{_data_status:Fe(y._data_status,Pe.UPDATE)}));x(false)}case 2:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.Y)("div",{css:go.inputHints},(0,a.Y)(h.A,{name:"info",height:20,width:20}),(0,a.Y)("p",null,(0,u.__)("Please make sure to use the variable {dash} in your question title to show the blanks in your question. You can use multiple {dash} variables in one question.","tutor")))),(0,a.Y)("div",{css:go.inputWithHints},(0,a.Y)("input",Xn({},l,{type:"text",placeholder:(0,u.__)("Correct Answer(s)..."),value:m===null||m===void 0?void 0:m.join("|"),onClick:function t(e){e.stopPropagation()},onChange:function t(e){l.onChange(no(no(no({},y),Fe(y._data_status,Pe.UPDATE)&&{_data_status:Fe(y._data_status,Pe.UPDATE)}),{},{answer_two_gap_match:e.target.value}))},onKeyDown:function(){var t=eo(Zn().mark((function t(e){return Zn().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&y.answer_two_gap_match){l.onChange(no(no({},y),Fe(y._data_status,Pe.UPDATE)&&{_data_status:Fe(y._data_status,Pe.UPDATE),is_saved:true}));if((p===null||p===void 0?void 0:p.type)==="save_option"){v(null)}x(false)}case 1:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.Y)(A.A,{when:P},(0,a.Y)("div",{css:go.errorMessage},(0,a.Y)(h.A,{name:"info",height:20,width:20}),(0,a.Y)("p",null,(0,u.__)("Match the number of answers to the number of blanks {dash} in your question.","tutor")))),(0,a.Y)("div",{css:go.inputHints},(0,a.Y)(h.A,{name:"info",height:20,width:20}),(0,a.Y)("p",null,(0,u.__)("Separate multiple answers by a vertical bar |. 1 answer per {dash} variable is defined in the question. Example: Apple | Banana | Orange","tutor")))),(0,a.Y)("div",{css:go.optionInputButtons},(0,a.Y)(A.A,{when:y.is_saved},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(e){e.stopPropagation();x(false);l.onChange(I)}},(0,u.__)("Cancel","tutor"))),(0,a.Y)(f.A,{variant:"secondary",size:"small",onClick:function(){var t=eo(Zn().mark((function t(e){return Zn().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if(!P){r.next=3;break}return r.abrupt("return");case 3:l.onChange(no(no({},y),Fe(y._data_status,Pe.UPDATE)&&{_data_status:Fe(y._data_status,Pe.UPDATE),is_saved:true}));S(no(no({},y),Fe(y._data_status,Pe.UPDATE)&&{_data_status:Fe(y._data_status,Pe.UPDATE),is_saved:true}));if((p===null||p===void 0?void 0:p.type)==="save_option"){v(null)}x(false);case 7:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),disabled:!y.answer_title||!y.answer_two_gap_match||P},(0,u.__)("Ok","tutor"))))))))};const yo=vo;var go={option:(0,a.AH)(k.x.display.flex(),";",I.I.caption("medium"),";align-items:center;color:",O.I6.text.subdued,";gap:",O.YK[10],";align-items:center;"+(true?"":0),true?"":0),optionLabel:function t(e){var r=e.isEditing;return(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[12],";width:100%;border-radius:",O.Vq.card,";padding:",O.YK[12]," ",O.YK[16],";transition:box-shadow 0.15s ease-in-out;background-color:",O.I6.background.white,";[data-visually-hidden]{opacity:0;}&:hover{box-shadow:0 0 0 1px ",O.I6.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.AH)("background-color:",O.I6.background.white,";box-shadow:0 0 0 1px ",O.I6.stroke.brand,";&:hover{box-shadow:0 0 0 1px ",O.I6.stroke.brand,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionHeader:true?{name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"}:0,optionTitle:(0,a.AH)(I.I.caption("medium"),";color:",O.I6.text.subdued,";"+(true?"":0),true?"":0),optionActions:(0,a.AH)("display:flex;gap:",O.YK[8],";align-items:center;"+(true?"":0),true?"":0),actionButton:(0,a.AH)(k.x.resetButton,";color:",O.I6.icon["default"],";display:flex;cursor:pointer;"+(true?"":0),true?"":0),optionBody:true?{name:"zjik7",styles:"display:flex"}:0,optionInputWrapper:(0,a.AH)(k.x.optionInputWrapper,";gap:",O.YK[16],";"+(true?"":0),true?"":0),placeholderWrapper:true?{name:"1fttcpj",styles:"display:flex;flex-direction:column"}:0,optionPlaceholder:function t(e){var r=e.isTitle,n=e.isCorrectAnswer;return(0,a.AH)(I.I.body(),";color:",O.I6.text.subdued,";padding-block:",O.YK[4],";display:flex;align-items:center;gap:",O.YK[4],";",r&&(0,a.AH)("color:",O.I6.text.hints,";"+(true?"":0),true?"":0)," ",n&&(0,a.AH)("color:",O.I6.text.success,";span{color:",O.I6.stroke.border,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},inputWithHints:(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[8],";"+(true?"":0),true?"":0),inputHints:(0,a.AH)("display:flex;gap:",O.YK[4],";",I.I.small(),";color:",O.I6.text.hints,";align-items:flex-start;svg{flex-shrink:0;}"+(true?"":0),true?"":0),errorMessage:(0,a.AH)("display:flex;gap:",O.YK[4],";",I.I.small(),";color:",O.I6.text.error,";align-items:flex-start;color:",O.I6.text.error,";svg{flex-shrink:0;color:",O.I6.icon.error,";}"+(true?"":0),true?"":0),optionInputButtons:(0,a.AH)("display:flex;justify-content:flex-end;gap:",O.YK[8],";"+(true?"":0),true?"":0)};var mo=function t(){var e=(0,b.xW)();var r=Hr(),n=r.activeQuestionIndex;var o=(0,b.jz)({control:e.control,name:"questions.".concat(n,".question_answers")}),i=o.fields;return(0,a.Y)("div",{css:_o.optionWrapper},(0,a.Y)(b.xI,{key:i.length?JSON.stringify(i[0]):"",control:e.control,name:"questions.".concat(n,".question_answers.0"),render:function t(e){return(0,a.Y)(yo,e)}}))};const bo=mo;var _o={optionWrapper:(0,a.AH)(k.x.display.flex("column"),";padding-left:",O.YK[40],";"+(true?"":0),true?"":0)};var wo=r(10226);var xo=r(40351);var Ao=r(97894);function Yo(t){"@babel/helpers - typeof";return Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yo(t)}function Oo(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Oo=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,a)&&(_=x);var A=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==Yo(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=k(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Yo(e)+" is not iterable")}return m.prototype=b,o(A,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(A),l(A,s,"Generator"),l(A,a,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:j(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function Io(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function ko(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Io(i,n,o,a,u,"next",t)}function u(t){Io(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Eo(){return Eo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Eo.apply(null,arguments)}function So(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?So(Object(r),!0).forEach((function(e){jo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):So(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jo(t,e,r){return(e=Po(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Po(t){var e=Co(t,"string");return"symbol"==Yo(e)?e:e+""}function Co(t,e){if("object"!=Yo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function To(t,e){return Ko(t)||Ho(t,e)||Lo(t,e)||Do()}function Do(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lo(t,e){if(t){if("string"==typeof t)return zo(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zo(t,e):void 0}}function zo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Ho(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Ko(t){if(Array.isArray(t))return t}function No(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Wo=!!Qt.P.tutor_pro_url;var Uo=function t(e){var r;var n=e.index,o=e.onDuplicateOption,l=e.onRemoveOption,c=e.field,d=e.isOverlay,p=d===void 0?false:d;var v=Hr(),g=v.activeQuestionId,m=v.validationError,b=v.setValidationError;var w=(r=c.value)!==null&&r!==void 0?r:{answer_id:(0,E.Ak)(),answer_title:"",is_correct:"0",belongs_question_id:g,belongs_question_type:"image_answering"};var x=(0,s.useRef)(null);var Y=(0,s.useState)(!w.answer_title&&!w.image_id&&!w.image_url),I=To(Y,2),S=I[0],q=I[1];var j=(0,s.useState)(w),P=To(j,2),C=P[0],T=P[1];var D=(0,i.gl)({id:c.value.answer_id||0,animateLayoutChanges:Ao.J}),L=D.attributes,z=D.listeners,H=D.setNodeRef,K=D.transform,N=D.transition,W=D.isDragging;var U=(0,xo.A)({options:{type:"image"},onChange:function t(e){if(e&&!Array.isArray(e)){var r=e.id,n=e.url;c.onChange(qo(qo(qo({},w),Fe(w._data_status,Pe.UPDATE)&&{_data_status:Fe(w._data_status,Pe.UPDATE)}),{},{image_id:r,image_url:n}))}},initialFiles:c.value.image_id?{id:Number(w.image_id),url:w.image_url||"",title:w.image_url||""}:null}),B=U.openMediaLibrary,F=U.resetFiles;var M={transform:y.Ks.Transform.toString(K),transition:N,opacity:W?.3:undefined};var R=function t(){c.onChange(qo(qo(qo({},w),Fe(w._data_status,Pe.UPDATE)&&{_data_status:Fe(w._data_status,Pe.UPDATE)}),{},{image_id:"",image_url:""}));F()};(0,s.useEffect)((function(){if((0,jn.O9)(x.current)&&S){x.current.focus()}}),[S]);return(0,a.Y)("div",Eo({},L,{css:Fo.option,ref:H,style:M,tabIndex:-1}),(0,a.Y)("div",{css:Fo.optionLabel({isEditing:S,isOverlay:p,isDragging:W}),onClick:function t(){q(true)},onKeyDown:function t(e){e.stopPropagation();if(e.key==="Enter"||e.key===" "){q(true)}}},(0,a.Y)("div",{css:Fo.optionHeader},(0,a.Y)("div",{css:k.x.optionCounter({isEditing:S})},String.fromCharCode(65+n)),(0,a.Y)(A.A,{when:!S&&w.is_saved},(0,a.Y)("button",Eo({},z,{type:"button",css:k.x.optionDragButton({isOverlay:p}),"data-visually-hidden":true}),(0,a.Y)(h.A,{name:"dragVertical",height:24,width:24})),(0,a.Y)("div",{css:Fo.optionActions,"data-visually-hidden":true},(0,a.Y)(fe.A,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:k.x.actionButton,onClick:function t(e){e.stopPropagation();q(true)}},(0,a.Y)(h.A,{name:"edit",width:24,height:24}))),(0,a.Y)(fe.A,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.Y)(A.A,{when:!Wo,fallback:(0,a.Y)("button",{type:"button",css:k.x.actionButton,onClick:function t(e){e.stopPropagation();o(w)}},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))},(0,a.Y)(_.A,{size:"tiny"},(0,a.Y)("button",{disabled:true,type:"button",css:k.x.actionButton,onClick:E.lQ},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))))),(0,a.Y)(fe.A,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:k.x.actionButton,onClick:function t(e){e.stopPropagation();l()}},(0,a.Y)(h.A,{name:"delete",width:24,height:24})))))),(0,a.Y)("div",{css:Fo.optionBody},(0,a.Y)(A.A,{when:S,fallback:(0,a.Y)("div",{css:Fo.placeholderWrapper},(0,a.Y)(A.A,{when:w.image_url,fallback:(0,a.Y)("div",{css:Fo.imagePlaceholder},(0,a.Y)(h.A,{name:"imagePreview",height:48,width:48}))},(function(){return(0,a.Y)("div",{css:Fo.imagePlaceholder},(0,a.Y)("img",{src:w.image_url,alt:w.image_url}))})),(0,a.Y)("div",{css:Fo.optionPlaceholder},w.answer_title||(0,u.__)("Write answer option...","tutor")))},(0,a.Y)("div",{css:k.x.optionInputWrapper},(0,a.Y)(wo.A,{value:{id:Number(w.image_id),url:w.image_url||"",title:w.image_url||""},buttonText:(0,u.__)("Upload Image","tutor"),infoText:(0,u.__)("Standard Size: 700x430 pixels","tutor"),uploadHandler:B,clearHandler:R,emptyImageCss:Fo.emptyImageInput,previewImageCss:Fo.previewImageInput}),(0,a.Y)("div",{css:Fo.inputWithHints},(0,a.Y)("input",Eo({},c,{ref:x,type:"text",placeholder:(0,u.__)("Input answer here","tutor"),value:w.answer_title,onClick:function t(e){e.stopPropagation()},onChange:function t(e){c.onChange(qo(qo(qo({},w),Fe(w._data_status,Pe.UPDATE)&&{_data_status:Fe(w._data_status,Pe.UPDATE)}),{},{answer_title:e.target.value}))},onKeyDown:function(){var t=ko(Oo().mark((function t(e){return Oo().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&w.answer_title){c.onChange(qo(qo({},w),Fe(w._data_status,Pe.UPDATE)&&{_data_status:Fe(w._data_status,Pe.UPDATE),is_saved:true}));if((m===null||m===void 0?void 0:m.type)==="save_option"){b(null)}q(false)}case 2:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.Y)("div",{css:Fo.inputHints},(0,a.Y)(h.A,{name:"info",height:20,width:20}),(0,a.Y)("p",null,(0,u.__)("Students need to type their answers exactly as you write them here. Use ","tutor"),(0,a.Y)("span",{css:(0,a.AH)({fontWeight:O.Wy.semiBold},true?"":0,true?"":0)},(0,u.__)("small caps","tutor")),(0,u.__)(" when writing the answer.","tutor")))),(0,a.Y)("div",{css:Fo.optionInputButtons},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(e){e.stopPropagation();q(false);c.onChange(C);if(!w.is_saved){l();if((m===null||m===void 0?void 0:m.type)==="save_option"){b(null)}}}},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{variant:"secondary",size:"small",onClick:function(){var t=ko(Oo().mark((function t(e){return Oo().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();c.onChange(qo(qo(qo({},w),Fe(w._data_status,Pe.UPDATE)&&{_data_status:Fe(w._data_status,Pe.UPDATE)}),{},{is_saved:true}));T(qo(qo(qo({},w),Fe(w._data_status,Pe.UPDATE)&&{_data_status:Fe(w._data_status,Pe.UPDATE)}),{},{is_saved:true}));if((m===null||m===void 0?void 0:m.type)==="save_option"){b(null)}q(false);case 5:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),disabled:!w.answer_title||!w.image_id},(0,u.__)("Ok","tutor"))))))))};const Bo=Uo;var Fo={option:(0,a.AH)(k.x.display.flex(),";",I.I.caption("medium"),";align-items:center;color:",O.I6.text.subdued,";gap:",O.YK[10],";align-items:center;"+(true?"":0),true?"":0),optionLabel:function t(e){var r=e.isEditing,n=e.isOverlay,o=e.isDragging;return(0,a.AH)(k.x.display.flex("column")," gap:",O.YK[20],";width:100%;border-radius:",O.Vq.card,";padding:",O.YK[12]," ",O.YK[16],";background-color:",O.I6.background.white,";[data-visually-hidden]{opacity:0;}&:hover{outline:1px solid ",O.I6.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.AH)("background-color:",O.I6.background.white,";outline:1px solid ",O.I6.stroke.brand,";&:hover{outline:1px solid ",O.I6.stroke.brand,";}"+(true?"":0),true?"":0)," ",o&&(0,a.AH)("background-color:",O.I6.stroke.hover,";"+(true?"":0),true?"":0)," ",n&&(0,a.AH)("box-shadow:",O.r7.drag,";"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},optionHeader:true?{name:"ilv1kv",styles:"display:grid;grid-template-columns:1fr auto 1fr;align-items:center;:focus-within{[data-visually-hidden]{opacity:1;}}"}:0,optionActions:(0,a.AH)(k.x.display.flex()," gap:",O.YK[8],";place-self:center end;"+(true?"":0),true?"":0),optionBody:(0,a.AH)(k.x.display.flex(),";"+(true?"":0),true?"":0),placeholderWrapper:(0,a.AH)(k.x.display.flex("column")," gap:",O.YK[12],";width:100%;"+(true?"":0),true?"":0),imagePlaceholder:(0,a.AH)(k.x.flexCenter(),";height:210px;width:100%;background-color:",O.I6.background["default"],";border-radius:",O.Vq.card,";overflow:hidden;svg{color:",O.I6.icon.hints,";}img{width:100%;height:100%;object-fit:cover;object-position:center;}"+(true?"":0),true?"":0),emptyImageInput:(0,a.AH)("background-color:",O.I6.background["default"],";height:210px;"+(true?"":0),true?"":0),previewImageInput:true?{name:"be4gwm",styles:"height:210px"}:0,optionPlaceholder:(0,a.AH)(I.I.body(),";color:",O.I6.text.subdued,";padding-block:",O.YK[4],";"+(true?"":0),true?"":0),inputWithHints:(0,a.AH)(k.x.display.flex("column")," gap:",O.YK[8],";"+(true?"":0),true?"":0),inputHints:(0,a.AH)(k.x.display.flex()," gap:",O.YK[4],";",I.I.small(),";color:",O.I6.text.hints,";align-items:flex-start;svg{flex-shrink:0;}"+(true?"":0),true?"":0),optionInputButtons:(0,a.AH)(k.x.display.flex()," justify-content:flex-end;gap:",O.YK[8],";"+(true?"":0),true?"":0)};function Mo(t){"@babel/helpers - typeof";return Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mo(t)}function Ro(){return Ro=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ro.apply(null,arguments)}function Qo(t){return $o(t)||Vo(t)||oi(t)||Go()}function Go(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vo(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function $o(t){if(Array.isArray(t))return ii(t)}function Jo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Xo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jo(Object(r),!0).forEach((function(e){Zo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Zo(t,e,r){return(e=ti(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ti(t){var e=ei(t,"string");return"symbol"==Mo(e)?e:e+""}function ei(t,e){if("object"!=Mo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function ri(t,e){return ui(t)||ai(t,e)||oi(t,e)||ni()}function ni(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oi(t,e){if(t){if("string"==typeof t)return ii(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ii(t,e):void 0}}function ii(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ai(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function ui(t){if(Array.isArray(t))return t}var si=function t(){var e=(0,s.useState)(null),r=ri(e,2),l=r[0],d=r[1];var p=(0,b.xW)();var v=Hr(),y=v.activeQuestionIndex,g=v.activeQuestionId,m=v.validationError,_=v.setValidationError;var w=(0,b.jz)({control:p.control,name:"questions.".concat(y,".question_answers")}),x=w.fields,Y=w.append,O=w.insert,I=w.remove,k=w.move;var S=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:10}}),(0,n.MS)(n.uN,{coordinateGetter:i.JR}));var q=(0,s.useMemo)((function(){if(!l){return null}return x.find((function(t){return t.answer_id===l}))}),[l,x]);var j=function t(){Y({_data_status:Pe.NEW,is_saved:false,answer_id:(0,E.Ak)(),answer_title:"",is_correct:"0",belongs_question_id:g,belongs_question_type:"image_answering",answer_order:x.length,answer_two_gap_match:"",answer_view_format:""},{shouldFocus:true,focusName:"questions.".concat(y,".question_answers.").concat(x.length,".answer_title")});if((m===null||m===void 0?void 0:m.type)==="add_option"){_(null)}};var P=function t(e,r){var n=Xo(Xo({},r),{},{_data_status:Pe.NEW,is_saved:true,answer_id:(0,E.Ak)(),answer_title:"".concat(r.answer_title," (copy)"),is_correct:"0"});var o=e+1;O(o,n)};var C=function t(e,r){I(e);if(r._data_status!==Pe.NEW){p.setValue("deleted_answer_ids",[].concat(Qo(p.getValues("deleted_answer_ids")),[r.answer_id]))}};return(0,a.Y)("div",{css:ci.optionWrapper},(0,a.Y)(n.Mp,{sensors:S,collisionDetection:n.fp,modifiers:[o.Q_],onDragStart:function t(e){d(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var o=x.findIndex((function(t){return t.answer_id===r.id}));var i=x.findIndex((function(t){return t.answer_id===n.id}));k(o,i)}d(null)}},(0,a.Y)(i.gB,{items:x.map((function(t){return Xo(Xo({},t),{},{id:t.answer_id})})),strategy:i._G},(0,a.Y)(ct.A,{each:x},(function(t,e){return(0,a.Y)(b.xI,{key:"".concat(t.answer_id,"-").concat(e),control:p.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function r(n){return(0,a.Y)(Bo,Ro({},n,{onDuplicateOption:function t(r){return P(e,r)},onRemoveOption:function r(){return C(e,t)},index:e}))}})}))),(0,c.createPortal)((0,a.Y)(n.Hd,null,(0,a.Y)(A.A,{when:q},(function(t){var e=x.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.Y)(b.xI,{key:l,control:p.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function t(r){return(0,a.Y)(Bo,Ro({},r,{onDuplicateOption:E.lQ,onRemoveOption:E.lQ,index:e,isOverlay:true}))}})}))),document.body)),(0,a.Y)("div",null,(0,a.Y)(f.A,{variant:"text",onClick:j,buttonContentCss:ci.addOptionButton,icon:(0,a.Y)(h.A,{name:"plus",height:24,width:24})},(0,u.__)("Add Option","tutor"))))};const li=si;var ci={optionWrapper:(0,a.AH)(k.x.display.flex("column"),";gap:",O.YK[12],";padding-left:",O.YK[40],";",O.EA.smallMobile,"{padding-left:",O.YK[8],";}"+(true?"":0),true?"":0),addOptionButton:(0,a.AH)("color:",O.I6.text.brand,";svg{color:",O.I6.icon.brand,";}"+(true?"":0),true?"":0)};function di(t){"@babel/helpers - typeof";return di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},di(t)}function fi(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */fi=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,a)&&(_=x);var A=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==di(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=k(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(di(e)+" is not iterable")}return m.prototype=b,o(A,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(A),l(A,s,"Generator"),l(A,a,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:j(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function pi(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function hi(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){pi(i,n,o,a,u,"next",t)}function u(t){pi(i,n,o,a,u,"throw",t)}a(void 0)}))}}function vi(){return vi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vi.apply(null,arguments)}function yi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yi(Object(r),!0).forEach((function(e){mi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mi(t,e,r){return(e=bi(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bi(t){var e=_i(t,"string");return"symbol"==di(e)?e:e+""}function _i(t,e){if("object"!=di(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=di(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function wi(t,e){return Ii(t)||Oi(t,e)||Ai(t,e)||xi()}function xi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ai(t,e){if(t){if("string"==typeof t)return Yi(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yi(t,e):void 0}}function Yi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Oi(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Ii(t){if(Array.isArray(t))return t}function ki(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Ei=!!Qt.P.tutor_pro_url;var Si=function t(e){var r,n;var o=e.index,l=e.onDuplicateOption,c=e.onRemoveOption,d=e.field,p=e.isOverlay,v=p===void 0?false:p;var g=Hr(),m=g.activeQuestionId,w=g.activeQuestionIndex,x=g.validationError,Y=g.setValidationError;var O=(0,b.xW)();var I=(r=d.value)!==null&&r!==void 0?r:{answer_id:"",answer_title:"",answer_two_gap_match:"",is_correct:"0",belongs_question_id:m,belongs_question_type:"matching"};var S=(0,s.useRef)(null);var q=(0,b.FH)({control:O.control,name:"questions.".concat(w,".question_settings.is_image_matching"),defaultValue:false});var j=(0,s.useState)(!I.answer_title||q?!I.image_url:!I.answer_two_gap_match),P=wi(j,2),C=P[0],T=P[1];var D=(0,s.useState)(I),L=wi(D,2),z=L[0],H=L[1];var K=(0,i.gl)({id:d.value.answer_id||0,animateLayoutChanges:Ao.J}),N=K.attributes,W=K.listeners,U=K.setNodeRef,B=K.transform,F=K.transition,M=K.isDragging;var R=(0,xo.A)({options:{type:"image"},onChange:function t(e){if(e&&!Array.isArray(e)){var r=e.id,n=e.url;d.onChange(gi(gi(gi({},I),Fe(I._data_status,Pe.UPDATE)&&{_data_status:Fe(I._data_status,Pe.UPDATE)}),{},{image_id:r,image_url:n}))}},initialFiles:(n=d.value)!==null&&n!==void 0&&n.image_id?{id:Number(d.value.image_id),url:d.value.image_url||"",title:""}:null}),Q=R.openMediaLibrary,G=R.resetFiles;var V={transform:y.Ks.Transform.toString(B),transition:F,opacity:M?.3:undefined};var $=function t(){d.onChange(gi(gi(gi({},I),Fe(I._data_status,Pe.UPDATE)&&{_data_status:Fe(I._data_status,Pe.UPDATE)}),{},{image_id:"",image_url:""}));G()};(0,s.useEffect)((function(){if((0,jn.O9)(S.current)&&C){S.current.focus()}}),[C]);return(0,a.Y)("div",vi({},N,{css:ji.option,ref:U,tabIndex:-1,style:V}),(0,a.Y)("div",{css:ji.optionLabel({isEditing:C,isDragging:M,isOverlay:v}),onClick:function t(){T(true)},onKeyDown:function t(e){e.stopPropagation();if(e.key==="Enter"||e.key===" "){T(true)}}},(0,a.Y)("div",{css:ji.optionHeader},(0,a.Y)("div",{css:k.x.optionCounter({isEditing:C})},String.fromCharCode(65+o)),(0,a.Y)(A.A,{when:!C&&I.is_saved},(0,a.Y)("button",vi({},W,{type:"button",css:k.x.optionDragButton({isOverlay:v}),"data-visually-hidden":true}),(0,a.Y)(h.A,{name:"dragVertical",height:24,width:24})),(0,a.Y)("div",{css:ji.optionActions,"data-visually-hidden":true},(0,a.Y)(fe.A,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:k.x.actionButton,"data-edit-button":true,onClick:function t(e){e.stopPropagation();T(true)}},(0,a.Y)(h.A,{name:"edit",width:24,height:24}))),(0,a.Y)(fe.A,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.Y)(A.A,{when:!Ei,fallback:(0,a.Y)("button",{type:"button",css:k.x.actionButton,onClick:function t(e){e.stopPropagation();l(I)}},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))},(0,a.Y)(_.A,{size:"tiny"},(0,a.Y)("button",{disabled:true,type:"button",css:k.x.actionButton,onClick:E.lQ},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))))),(0,a.Y)(fe.A,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:k.x.actionButton,"data-visually-hidden":true,onClick:function t(e){e.stopPropagation();c()}},(0,a.Y)(h.A,{name:"delete",width:24,height:24})))))),(0,a.Y)("div",{css:ji.optionBody},(0,a.Y)(A.A,{when:C,fallback:(0,a.Y)("div",{css:ji.placeholderWrapper({isImageMatching:q})},(0,a.Y)(A.A,{when:q,fallback:(0,a.Y)("div",{css:ji.optionPlaceholder},I.answer_title||(0,u.__)("Answer title...","tutor"))},(0,a.Y)(A.A,{when:I.image_url,fallback:(0,a.Y)("div",{css:ji.imagePlaceholder},(0,a.Y)(h.A,{name:"imagePreview",height:48,width:48}))},(function(){return(0,a.Y)("div",{css:ji.imagePlaceholder},(0,a.Y)("img",{src:I.image_url,alt:I.image_url}))}))),(0,a.Y)("div",{css:ji.optionPlaceholder},!q?I.answer_two_gap_match:I.answer_title))},(0,a.Y)("div",{css:k.x.optionInputWrapper},(0,a.Y)(A.A,{when:q},(0,a.Y)(wo.A,{value:{id:Number(I.image_id),url:I.image_url||"",title:I.image_url||""},infoText:(0,u.__)("Standard Size: 700x430 pixels","tutor"),uploadHandler:Q,clearHandler:$,emptyImageCss:ji.emptyImageInput,previewImageCss:ji.previewImageInput})),(0,a.Y)("input",vi({},d,{type:"text",ref:S,placeholder:!q?(0,u.__)("Question","tutor"):(0,u.__)("Image matched text..","tutor"),value:I.answer_title,onClick:function t(e){e.stopPropagation()},onChange:function t(e){d.onChange(gi(gi(gi({},I),Fe(I._data_status,Pe.UPDATE)&&{_data_status:Fe(I._data_status,Pe.UPDATE)}),{},{answer_title:e.target.value}))},onKeyDown:function(){var t=hi(fi().mark((function t(e){return fi().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&I.answer_title&&I.answer_two_gap_match){d.onChange(gi(gi({},I),Fe(I._data_status,Pe.UPDATE)&&{_data_status:Fe(I._data_status,Pe.UPDATE)}));T(false)}case 2:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.Y)(A.A,{when:!q},(0,a.Y)("input",vi({},d,{type:"text",placeholder:(0,u.__)("Matched option..","tutor"),value:I.answer_two_gap_match,onClick:function t(e){e.stopPropagation()},onChange:function t(e){d.onChange(gi(gi(gi({},I),Fe(I._data_status,Pe.UPDATE)&&{_data_status:Fe(I._data_status,Pe.UPDATE)}),{},{answer_two_gap_match:e.target.value}))},onKeyDown:function t(e){e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&I.answer_title&&I.answer_two_gap_match){d.onChange(gi(gi({},I),Fe(I._data_status,Pe.UPDATE)&&{_data_status:Fe(I._data_status,Pe.UPDATE),is_saved:true}));if((x===null||x===void 0?void 0:x.type)==="save_option"){Y(null)}T(false)}}}))),(0,a.Y)("div",{css:ji.optionInputButtons},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(e){e.stopPropagation();T(false);d.onChange(z);if(!I.is_saved){if((x===null||x===void 0?void 0:x.type)==="save_option"){Y(null)}c()}}},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{variant:"secondary",size:"small",onClick:function t(e){e.stopPropagation();d.onChange(gi(gi(gi({},I),Fe(I._data_status,Pe.UPDATE)&&{_data_status:Fe(I._data_status,Pe.UPDATE)}),{},{is_saved:true}));H(gi(gi(gi({},I),Fe(I._data_status,Pe.UPDATE)&&{_data_status:Fe(I._data_status,Pe.UPDATE)}),{},{is_saved:true}));if((x===null||x===void 0?void 0:x.type)==="save_option"){Y(null)}T(false)},disabled:!I.answer_title||(q?!I.image_id:!I.answer_two_gap_match)},(0,u.__)("Ok","tutor"))))))))};const qi=Si;var ji={option:(0,a.AH)(k.x.display.flex(),";",I.I.caption("medium"),";align-items:center;color:",O.I6.text.subdued,";gap:",O.YK[10],";align-items:center;"+(true?"":0),true?"":0),optionLabel:function t(e){var r=e.isEditing,n=e.isDragging,o=e.isOverlay;return(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[12],";width:100%;border-radius:",O.Vq.card,";padding:",O.YK[12]," ",O.YK[16],";background-color:",O.I6.background.white,";[data-visually-hidden]{opacity:0;}&:hover{outline:1px solid ",O.I6.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.AH)("background-color:",O.I6.background.white,";outline:1px solid ",O.I6.stroke.brand,";&:hover{outline:1px solid ",O.I6.stroke.brand,";}"+(true?"":0),true?"":0)," ",n&&(0,a.AH)("background-color:",O.I6.stroke.hover,";"+(true?"":0),true?"":0)," ",o&&(0,a.AH)("box-shadow:",O.r7.drag,";"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},optionHeader:true?{name:"1b8dd6m",styles:"display:grid;grid-template-columns:1fr auto 1fr;align-items:center;&:focus-within{[data-visually-hidden]{opacity:1;}}"}:0,optionActions:(0,a.AH)(k.x.display.flex()," gap:",O.YK[8],";place-self:center end;"+(true?"":0),true?"":0),actionButton:(0,a.AH)(k.x.resetButton,";",k.x.display.flex()," color:",O.I6.icon["default"],";cursor:pointer;&:disabled{cursor:not-allowed;color:",O.I6.icon.disable.background,";}"+(true?"":0),true?"":0),optionBody:(0,a.AH)(k.x.display.flex(),";"+(true?"":0),true?"":0),placeholderWrapper:function t(e){var r=e.isImageMatching;return(0,a.AH)(k.x.display.flex("column")," width:100%;",r&&(0,a.AH)("gap:",O.YK[12],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},imagePlaceholder:(0,a.AH)(k.x.flexCenter(),";height:210px;width:100%;background-color:",O.I6.background["default"],";border-radius:",O.Vq.card,";overflow:hidden;svg{color:",O.I6.icon.hints,";}img{width:100%;height:100%;object-fit:cover;object-position:center;}"+(true?"":0),true?"":0),emptyImageInput:(0,a.AH)("background-color:",O.I6.background["default"],";height:210px;"+(true?"":0),true?"":0),previewImageInput:true?{name:"be4gwm",styles:"height:210px"}:0,optionPlaceholder:(0,a.AH)(I.I.body(),";color:",O.I6.text.subdued,";padding-block:",O.YK[4],";"+(true?"":0),true?"":0),optionInputWrapper:(0,a.AH)(k.x.display.flex("column")," width:100%;gap:",O.YK[12],";"+(true?"":0),true?"":0),optionInputButtons:(0,a.AH)(k.x.display.flex()," justify-content:flex-end;gap:",O.YK[8],";"+(true?"":0),true?"":0)};function Pi(t){"@babel/helpers - typeof";return Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pi(t)}function Ci(){return Ci=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ci.apply(null,arguments)}function Ti(t){return zi(t)||Li(t)||Mi(t)||Di()}function Di(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Li(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function zi(t){if(Array.isArray(t))return Ri(t)}function Hi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ki(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Hi(Object(r),!0).forEach((function(e){Ni(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ni(t,e,r){return(e=Wi(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wi(t){var e=Ui(t,"string");return"symbol"==Pi(e)?e:e+""}function Ui(t,e){if("object"!=Pi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Bi(t,e){return Gi(t)||Qi(t,e)||Mi(t,e)||Fi()}function Fi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mi(t,e){if(t){if("string"==typeof t)return Ri(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ri(t,e):void 0}}function Ri(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Qi(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Gi(t){if(Array.isArray(t))return t}var Vi=function t(){var e=(0,s.useState)(null),r=Bi(e,2),l=r[0],d=r[1];var p=(0,b.xW)();var v=Hr(),y=v.activeQuestionIndex,g=v.activeQuestionId,m=v.validationError,_=v.setValidationError;var w=(0,b.jz)({control:p.control,name:"questions.".concat(y,".question_answers")}),x=w.fields,Y=w.append,O=w.insert,I=w.remove,k=w.move;var S=(0,b.FH)({control:p.control,name:"questions.".concat(y,".question_settings.is_image_matching"),defaultValue:false});var q=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:10}}),(0,n.MS)(n.uN,{coordinateGetter:i.JR}));var j=(0,s.useMemo)((function(){if(!l){return null}return x.find((function(t){return t.answer_id===l}))}),[l,x]);var P=function t(){Y({_data_status:Pe.NEW,is_saved:false,answer_id:(0,E.Ak)(),answer_title:"",is_correct:"0",belongs_question_id:g,belongs_question_type:S?"image_matching":"matching",answer_order:x.length,answer_two_gap_match:"",answer_view_format:""},{shouldFocus:true,focusName:"questions.".concat(y,".question_answers.").concat(x.length,".answer_title")});if((m===null||m===void 0?void 0:m.type)==="add_option"){_(null)}};var C=function t(e,r){var n=Ki(Ki({},r),{},{_data_status:Pe.NEW,is_saved:true,answer_id:(0,E.Ak)(),answer_title:"".concat(r.answer_title," (copy)"),is_correct:"0"});var o=e+1;O(o,n)};var T=function t(e,r){I(e);if(r._data_status!==Pe.NEW){p.setValue("deleted_answer_ids",[].concat(Ti(p.getValues("deleted_answer_ids")),[r.answer_id]))}};return(0,a.Y)("div",{css:Ji.optionWrapper},(0,a.Y)(n.Mp,{sensors:q,collisionDetection:n.fp,modifiers:[o.Q_],onDragStart:function t(e){d(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var o=x.findIndex((function(t){return t.answer_id===r.id}));var i=x.findIndex((function(t){return t.answer_id===n.id}));k(o,i)}d(null)}},(0,a.Y)(i.gB,{items:x.map((function(t){return Ki(Ki({},t),{},{id:t.answer_id})})),strategy:i._G},(0,a.Y)(ct.A,{each:x},(function(t,e){return(0,a.Y)(b.xI,{key:"".concat(t.answer_id,"-").concat(e),control:p.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function r(n){return(0,a.Y)(qi,Ci({},n,{index:e,onDuplicateOption:function t(r){return C(e,r)},onRemoveOption:function r(){return T(e,t)}}))}})}))),(0,c.createPortal)((0,a.Y)(n.Hd,null,(0,a.Y)(A.A,{when:j},(function(t){var e=x.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.Y)(b.xI,{key:l,control:p.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function t(r){return(0,a.Y)(qi,Ci({},r,{index:e,onDuplicateOption:E.lQ,onRemoveOption:E.lQ,isOverlay:true}))}})}))),document.body)),(0,a.Y)("div",null,(0,a.Y)(f.A,{variant:"text",onClick:P,buttonContentCss:Ji.addOptionButton,icon:(0,a.Y)(h.A,{name:"plus",height:24,width:24})},(0,u.__)("Add Option","tutor"))))};const $i=Vi;var Ji={optionWrapper:(0,a.AH)(k.x.display.flex("column"),";gap:",O.YK[12],";padding-left:",O.YK[40],";",O.EA.smallMobile,"{padding-left:",O.YK[8],";}"+(true?"":0),true?"":0),addOptionButton:(0,a.AH)("color:",O.I6.text.brand,";svg{color:",O.I6.icon.brand,";}"+(true?"":0),true?"":0)};function Xi(t){"@babel/helpers - typeof";return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xi(t)}function Zi(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Zi=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,a)&&(_=x);var A=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==Xi(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=k(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Xi(e)+" is not iterable")}return m.prototype=b,o(A,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(A),l(A,s,"Generator"),l(A,a,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:j(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function ta(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function ea(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ta(i,n,o,a,u,"next",t)}function u(t){ta(i,n,o,a,u,"throw",t)}a(void 0)}))}}function ra(){return ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ra.apply(null,arguments)}function na(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function oa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?na(Object(r),!0).forEach((function(e){ia(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):na(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ia(t,e,r){return(e=aa(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aa(t){var e=ua(t,"string");return"symbol"==Xi(e)?e:e+""}function ua(t,e){if("object"!=Xi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function sa(t,e){return pa(t)||fa(t,e)||ca(t,e)||la()}function la(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ca(t,e){if(t){if("string"==typeof t)return da(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?da(t,e):void 0}}function da(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function fa(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function pa(t){if(Array.isArray(t))return t}function ha(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var va=!!Qt.P.tutor_pro_url;var ya=function t(e){var r,n,o;var l=e.field,c=e.onDuplicateOption,d=e.onRemoveOption,p=e.onCheckCorrectAnswer,v=e.index,g=e.isOverlay,m=g===void 0?false:g;var w=(0,b.xW)();var x=Hr(),Y=x.activeQuestionId,O=x.activeQuestionIndex,I=x.validationError,S=x.setValidationError;var q=(r=l.value)!==null&&r!==void 0?r:{answer_id:(0,E.Ak)(),answer_title:"",is_correct:"0",belongs_question_id:Y,belongs_question_type:"multiple_choice"};var j=(0,s.useRef)(null);var P=(0,b.FH)({control:w.control,name:"questions.".concat(O,".question_settings.has_multiple_correct_answer"),defaultValue:false});var C=w.watch("questions.".concat(O,".question_type"));var T=(0,s.useState)(!q.is_saved||!q.answer_title&&!q.image_url),D=sa(T,2),L=D[0],z=D[1];var H=(0,s.useState)((0,jn.O9)(q.image_id)&&(0,jn.O9)(q.image_url)),K=sa(H,2),N=K[0],W=K[1];var U=(0,s.useState)(q),B=sa(U,2),F=B[0],M=B[1];var R=(0,i.gl)({id:((n=l.value)===null||n===void 0?void 0:n.answer_id)||0,animateLayoutChanges:Ao.J}),Q=R.attributes,G=R.listeners,V=R.setNodeRef,$=R.transform,J=R.transition,X=R.isDragging;var Z=(0,xo.A)({options:{type:"image"},onChange:function t(e){if(e&&!Array.isArray(e)){var r=e.id,n=e.url;l.onChange(oa(oa(oa({},q),Fe(q._data_status,Pe.UPDATE)&&{_data_status:Fe(q._data_status,Pe.UPDATE)}),{},{image_id:r,image_url:n,answer_view_format:"text_image"}));W(true)}},initialFiles:(o=l.value)!==null&&o!==void 0&&o.image_id?{id:Number(l.value.image_id),url:l.value.image_url||"",title:""}:null}),tt=Z.openMediaLibrary,et=Z.resetFiles;var rt={transform:y.Ks.Transform.toString($),transition:J,opacity:X?.3:undefined};var nt=function t(){et();l.onChange(oa(oa(oa({},q),Fe(q._data_status,Pe.UPDATE)&&{_data_status:Fe(q._data_status,Pe.UPDATE)}),{},{image_id:"",image_url:"",answer_view_format:"text"}));W(false)};(0,s.useEffect)((function(){if((0,jn.O9)(j.current)&&L){j.current.focus()}}),[L]);return(0,a.Y)("div",ra({},Q,{css:ba.option({isSelected:!!Number(q.is_correct),isMultipleChoice:P}),tabIndex:-1,ref:V,style:rt}),(0,a.Y)(A.A,{when:C==="multiple_choice"},(0,a.Y)("button",{key:q.is_correct,css:k.x.optionCheckButton,"data-check-button":true,type:"button",onClick:p},(0,a.Y)(A.A,{when:P,fallback:(0,a.Y)(h.A,{name:Number(q.is_correct)?"checkFilled":"check",height:32,width:32})},(0,a.Y)(h.A,{name:Number(q.is_correct)?"checkSquareFilled":"checkSquare",height:32,width:32})))),(0,a.Y)("div",{css:ba.optionLabel({isSelected:!!Number(q.is_correct),isEditing:L,isDragging:X,isOverlay:m}),onClick:function t(){z(true)},onKeyDown:function t(e){e.stopPropagation();if(e.key==="Enter"||e.key===" "){z(true)}}},(0,a.Y)("div",{css:ba.optionHeader({isEditing:L})},(0,a.Y)("div",{css:ba.optionCounterAndButton},(0,a.Y)("div",{css:k.x.optionCounter({isSelected:!!Number(q.is_correct),isEditing:L})},String.fromCharCode(65+v)),(0,a.Y)(A.A,{when:L},(0,a.Y)(A.A,{when:!N,fallback:(0,a.Y)(f.A,{variant:"text",icon:(0,a.Y)(h.A,{name:"removeImage",width:24,height:24}),onClick:function t(e){e.stopPropagation();nt()}},(0,u.__)("Remove Image","tutor"))},(0,a.Y)(f.A,{variant:"text",icon:(0,a.Y)(h.A,{name:"addImage",width:24,height:24}),onClick:function t(e){e.stopPropagation();tt()}},(0,u.__)("Add Image","tutor"))))),(0,a.Y)(A.A,{when:!L&&q.is_saved},(0,a.Y)("button",ra({},G,{type:"button",css:k.x.optionDragButton({isOverlay:m}),"data-visually-hidden":true}),(0,a.Y)(h.A,{name:"dragVertical",height:24,width:24})),(0,a.Y)("div",{css:ba.optionActions,"data-visually-hidden":true},(0,a.Y)(fe.A,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:k.x.actionButton,onClick:function t(e){e.stopPropagation();z(true)}},(0,a.Y)(h.A,{name:"edit",width:24,height:24}))),(0,a.Y)(fe.A,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.Y)(A.A,{when:!va,fallback:(0,a.Y)("button",{type:"button",css:k.x.actionButton,onClick:function t(e){e.stopPropagation();c(q)}},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))},(0,a.Y)(_.A,{size:"tiny"},(0,a.Y)("button",{disabled:true,type:"button",css:k.x.actionButton,onClick:E.lQ},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))))),(0,a.Y)(fe.A,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:k.x.actionButton,onClick:function t(e){e.stopPropagation();d()}},(0,a.Y)(h.A,{name:"delete",width:24,height:24})))))),(0,a.Y)("div",{css:ba.optionBody},(0,a.Y)(A.A,{when:L,fallback:(0,a.Y)("div",{css:ba.placeholderWrapper},(0,a.Y)(A.A,{when:q.image_url},(0,a.Y)("div",{css:ba.imagePlaceholder},(0,a.Y)("img",{src:q.image_url,alt:q.image_url}))),(0,a.Y)("div",{css:ba.optionPlaceholder},q.answer_title||(0,u.__)("Write answer option...","tutor")))},(0,a.Y)("div",{css:k.x.optionInputWrapper},(0,a.Y)(A.A,{when:N},(0,a.Y)(wo.A,{value:{id:Number(q.image_id),url:q.image_url||"",title:(0,u.__)("Image","tutor")},buttonText:(0,u.__)("Upload Image","tutor"),infoText:(0,u.__)("Size: 700x430 pixels","tutor"),uploadHandler:tt,clearHandler:nt,emptyImageCss:ba.emptyImageInput,previewImageCss:ba.previewImageInput})),(0,a.Y)("textarea",ra({},l,{ref:j,placeholder:(0,u.__)("Write option...","tutor"),value:q.answer_title,onClick:function t(e){e.stopPropagation()},onChange:function t(e){var r=e.target.value;l.onChange(oa(oa(oa({},q),Fe(q._data_status,Pe.UPDATE)&&{_data_status:Fe(q._data_status,Pe.UPDATE)}),{},{answer_title:r}))},onKeyDown:function(){var t=ea(Zi().mark((function t(e){return Zi().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();if((e.metaKey||e.ctrlKey)&&e.key==="Enter"&&q.answer_title){l.onChange(oa(oa({},q),Fe(q._data_status,Pe.UPDATE)&&{_data_status:Fe(q._data_status,Pe.UPDATE),is_saved:true}));if((I===null||I===void 0?void 0:I.type)==="save_option"){S(null)}z(false)}case 2:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),(0,a.Y)("div",{css:ba.optionInputButtons},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(e){e.stopPropagation();z(false);l.onChange(F);if(!q.is_saved){if((I===null||I===void 0?void 0:I.type)==="save_option"){S(null)}d()}}},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{variant:"secondary",size:"small",onClick:function(){var t=ea(Zi().mark((function t(e){return Zi().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:e.stopPropagation();l.onChange(oa(oa(oa({},q),Fe(q._data_status,Pe.UPDATE)&&{_data_status:Fe(q._data_status,Pe.UPDATE)}),{},{is_saved:true}));M(oa(oa(oa({},q),Fe(q._data_status,Pe.UPDATE)&&{_data_status:Fe(q._data_status,Pe.UPDATE)}),{},{is_saved:true}));if((I===null||I===void 0?void 0:I.type)==="save_option"){S(null)}z(false);case 5:case"end":return r.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),disabled:!q.answer_title&&!q.image_url},(0,u.__)("Ok","tutor"))))))))};const ga=ya;var ma=true?{name:"697o47",styles:"fill:none"}:0;var ba={option:function t(e){var r=e.isSelected,n=e.isMultipleChoice;return(0,a.AH)(k.x.display.flex(),";",I.I.caption("medium"),";align-items:center;color:",O.I6.text.subdued,";gap:",O.YK[10],";align-items:center;[data-check-button]{color:",O.I6.icon["default"],";",!n&&ma," &:focus-visible{opacity:1;}}&:hover{[data-check-button]{opacity:1;}}&:focus-within{[data-check-button]{opacity:1;}}",r&&(0,a.AH)("[data-check-button]{opacity:1;color:",O.I6.bg.success,";",!n&&(0,a.AH)("fill:",O.I6.bg.success,";"+(true?"":0),true?"":0),";}"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-check-button]{opacity:1;}}"+(true?"":0),true?"":0)},optionLabel:function t(e){var r=e.isSelected,n=e.isEditing,o=e.isDragging,i=e.isOverlay;return(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[12],";width:100%;border-radius:",O.Vq.card,";padding:",O.YK[12]," ",O.YK[16],";background-color:",O.I6.background.white,";[data-visually-hidden]{opacity:0;}&:hover{outline:1px solid ",O.I6.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.AH)("background-color:",O.I6.background.success.fill40,";color:",O.I6.text.primary,";&:hover{outline:1px solid ",O.I6.stroke.success.fill70,";}"+(true?"":0),true?"":0)," ",n&&(0,a.AH)("background-color:",O.I6.background.white,";outline:1px solid ",r?O.I6.stroke.success.fill70:O.I6.stroke.brand,";&:hover{outline:1px solid ",r?O.I6.stroke.success.fill70:O.I6.stroke.brand,";}"+(true?"":0),true?"":0)," ",o&&(0,a.AH)("background-color:",O.I6.stroke.hover,";"+(true?"":0),true?"":0)," ",i&&(0,a.AH)("box-shadow:",O.r7.drag,";"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},optionHeader:function t(e){var r=e.isEditing,n=r===void 0?false:r;return(0,a.AH)("display:grid;grid-template-columns:",!n?"1fr auto 1fr":"1fr",";align-items:center;&:focus-within{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},optionCounterAndButton:(0,a.AH)(k.x.display.flex()," gap:",O.YK[8],";place-self:center start;button{padding:0;}"+(true?"":0),true?"":0),optionActions:(0,a.AH)(k.x.display.flex()," gap:",O.YK[8],";place-self:center end;"+(true?"":0),true?"":0),optionBody:(0,a.AH)(k.x.display.flex(),";"+(true?"":0),true?"":0),placeholderWrapper:(0,a.AH)(k.x.display.flex("column")," gap:",O.YK[12],";width:100%;"+(true?"":0),true?"":0),imagePlaceholder:(0,a.AH)(k.x.flexCenter(),";height:210px;width:100%;background-color:",O.I6.background["default"],";border-radius:",O.Vq.card,";overflow:hidden;svg{color:",O.I6.icon.hints,";}img{width:100%;height:100%;object-fit:cover;object-position:center;}"+(true?"":0),true?"":0),emptyImageInput:(0,a.AH)("background-color:",O.I6.background["default"],";height:210px;"+(true?"":0),true?"":0),previewImageInput:true?{name:"be4gwm",styles:"height:210px"}:0,optionPlaceholder:(0,a.AH)(I.I.body(),";color:",O.I6.text.subdued,";padding-block:",O.YK[4],";"+(true?"":0),true?"":0),optionInputButtons:(0,a.AH)(k.x.display.flex()," justify-content:flex-end;gap:",O.YK[8],";"+(true?"":0),true?"":0)};function _a(t){"@babel/helpers - typeof";return _a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_a(t)}function wa(){return wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wa.apply(null,arguments)}function xa(t){return Oa(t)||Ya(t)||Ca(t)||Aa()}function Aa(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ya(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Oa(t){if(Array.isArray(t))return Ta(t)}function Ia(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ka(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ia(Object(r),!0).forEach((function(e){Ea(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ia(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ea(t,e,r){return(e=Sa(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sa(t){var e=qa(t,"string");return"symbol"==_a(e)?e:e+""}function qa(t,e){if("object"!=_a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function ja(t,e){return La(t)||Da(t,e)||Ca(t,e)||Pa()}function Pa(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ca(t,e){if(t){if("string"==typeof t)return Ta(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ta(t,e):void 0}}function Ta(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Da(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function La(t){if(Array.isArray(t))return t}var za=function t(){var e=(0,s.useState)(null),r=ja(e,2),l=r[0],d=r[1];var p=(0,b.xW)();var v=Hr(),y=v.activeQuestionIndex,g=v.activeQuestionId,m=v.validationError,_=v.setValidationError;var w=(0,b.FH)({control:p.control,name:"questions.".concat(y,".question_settings.has_multiple_correct_answer"),defaultValue:false});var x=p.watch("questions.".concat(y,".question_type"));var Y=(0,b.jz)({control:p.control,name:"questions.".concat(y,".question_answers")}),O=Y.fields,I=Y.append,k=Y.insert,S=Y.remove,q=Y.update,j=Y.replace,P=Y.move;var C=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:10}}),(0,n.MS)(n.uN,{coordinateGetter:i.JR}));var T=(0,b.FH)({control:p.control,name:"questions.".concat(y,".question_answers"),defaultValue:[]});var D=(0,s.useMemo)((function(){if(!l){return null}return O.find((function(t){return t.answer_id===l}))}),[l,O]);var L=function t(e,r){if(w){q(e,ka(ka(ka({},r),Fe(r._data_status,Pe.UPDATE)&&{_data_status:Fe(r._data_status,Pe.UPDATE)}),{},{is_correct:r.is_correct==="1"?"0":"1"}))}else{var n=T.map((function(t){return ka(ka(ka({},t),Fe(t._data_status,Pe.UPDATE)&&{_data_status:Fe(t._data_status,Pe.UPDATE)}),{},{is_correct:t.answer_id===r.answer_id?"1":"0"})}));j(n)}if((m===null||m===void 0?void 0:m.type)==="correct_option"){_(null)}};var z=function t(){I({_data_status:Pe.NEW,is_saved:false,answer_id:(0,E.Ak)(),answer_title:"",is_correct:"0",belongs_question_id:g,belongs_question_type:x,answer_order:O.length,answer_two_gap_match:"",answer_view_format:"text"},{shouldFocus:true,focusName:"questions.".concat(y,".question_answers.").concat(O.length,".answer_title")});if((m===null||m===void 0?void 0:m.type)==="add_option"){_(null)}};var H=function t(e,r){var n=ka(ka({},r),{},{_data_status:Pe.NEW,is_saved:true,answer_id:(0,E.Ak)(),answer_title:"".concat(r.answer_title," (copy)"),is_correct:"0"});var o=e+1;k(o,n)};var K=function t(e,r){S(e);if(r._data_status!==Pe.NEW){p.setValue("deleted_answer_ids",[].concat(xa(p.getValues("deleted_answer_ids")),[r.answer_id]))}};return(0,a.Y)("div",{css:Ka.optionWrapper({isOrdering:x==="ordering"})},(0,a.Y)(n.Mp,{sensors:C,collisionDetection:n.fp,modifiers:[o.Q_],onDragStart:function t(e){d(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var o=O.findIndex((function(t){return t.answer_id===r.id}));var i=O.findIndex((function(t){return t.answer_id===n.id}));P(o,i)}d(null)}},(0,a.Y)(i.gB,{items:O.map((function(t){return ka(ka({},t),{},{id:t.answer_id})})),strategy:i._G},(0,a.Y)(ct.A,{each:O},(function(t,e){return(0,a.Y)(b.xI,{key:"".concat(t.answer_id,"-").concat(t.is_correct),control:p.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function r(n){return(0,a.Y)(ga,wa({},n,{onDuplicateOption:function t(r){return H(e,r)},onRemoveOption:function r(){return K(e,t)},onCheckCorrectAnswer:function r(){return L(e,t)},index:e}))}})}))),(0,c.createPortal)((0,a.Y)(n.Hd,null,(0,a.Y)(A.A,{when:D},(function(t){var e=T.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.Y)(b.xI,{key:l,control:p.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function t(r){return(0,a.Y)(ga,wa({},r,{onDuplicateOption:E.lQ,onRemoveOption:E.lQ,onCheckCorrectAnswer:E.lQ,index:e,isOverlay:true}))}})}))),document.body)),(0,a.Y)("div",{css:Ka.addOptionButtonWrapper({isOrdering:x==="ordering"})},(0,a.Y)(f.A,{variant:"text",onClick:z,buttonContentCss:Ka.addOptionButton,icon:(0,a.Y)(h.A,{name:"plus",height:24,width:24})},(0,u.__)("Add Option","tutor"))))};const Ha=za;var Ka={optionWrapper:function t(e){var r=e.isOrdering;return(0,a.AH)(k.x.display.flex("column"),";gap:",O.YK[12],";",r&&(0,a.AH)("padding-left:",O.YK[40],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},addOptionButtonWrapper:function t(e){var r=e.isOrdering;return(0,a.AH)("margin-left:",O.YK[48],";",r&&(0,a.AH)("margin-left:",O.YK[8],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},addOptionButton:(0,a.AH)("color:",O.I6.text.brand,";svg{color:",O.I6.icon.brand,";}"+(true?"":0),true?"":0)};var Na=function t(){return(0,a.Y)("div",{css:Ua.optionWrapper},(0,a.Y)(tn.A,{icon:"bulb"},(0,u.__)("No options are necessary for this question type","tutor")))};const Wa=Na;var Ua={optionWrapper:(0,a.AH)("padding-left:",O.YK[40],";",O.EA.smallMobile,"{padding-left:",O.YK[8],";}"+(true?"":0),true?"":0)};function Ba(){return Ba=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ba.apply(null,arguments)}var Fa=function t(e){var r;var n=e.field,o=e.onCheckCorrectAnswer,u=e.isOverlay,s=u===void 0?false:u;var l=Hr(),c=l.activeQuestionId;var d=(r=n.value)!==null&&r!==void 0?r:{answer_id:(0,E.Ak)(),answer_title:"",is_correct:"0",belongs_question_id:c,belongs_question_type:"true_false"};var f=(0,i.gl)({id:n.value.answer_id||0,animateLayoutChanges:Ao.J}),p=f.attributes,v=f.listeners,g=f.setNodeRef,m=f.transform,b=f.transition,_=f.isDragging;var w={transform:y.Ks.Transform.toString(m),transition:b,opacity:_?.3:undefined};return(0,a.Y)("div",Ba({},p,{css:Ra.option({isSelected:!!Number(n.value.is_correct),isOverlay:s}),tabIndex:-1,ref:g,style:w}),(0,a.Y)("button",{"data-check-button":true,type:"button",css:k.x.optionCheckButton,onClick:o},(0,a.Y)(h.A,{name:Number(n.value.is_correct)?"checkFilled":"check",height:32,width:32})),(0,a.Y)("div",{css:Ra.optionLabel({isSelected:!!Number(n.value.is_correct),isDragging:_,isOverlay:s})},(0,a.Y)("span",null,d.answer_title),(0,a.Y)("button",Ba({},v,{type:"button",css:k.x.optionDragButton({isOverlay:s}),"data-visually-hidden":true}),(0,a.Y)(h.A,{name:"dragVertical",height:24,width:24}))))};const Ma=Fa;var Ra={option:function t(e){var r=e.isSelected,n=e.isOverlay;return(0,a.AH)(k.x.display.flex(),";",I.I.caption("medium"),";align-items:center;color:",O.I6.text.subdued,";gap:",O.YK[10],";height:48px;align-items:center;[data-check-button]{color:",O.I6.icon["default"],";opacity:0;fill:none;flex-shrink:0;&:focus-visible{opacity:1;}}&:focus-within{[data-check-button]{opacity:1;}}&:hover{[data-check-button]{opacity:",n?0:1,";}}",r&&(0,a.AH)("[data-check-button]{opacity:1;color:",O.I6.bg.success,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionLabel:function t(e){var r=e.isSelected,n=e.isDragging,o=e.isOverlay;return(0,a.AH)("display:grid;grid-template-columns:1fr auto 1fr;align-items:center;width:100%;border-radius:",O.Vq.card,";padding:",O.YK[12]," ",O.YK[16],";background-color:",O.I6.background.white,";text-transform:capitalize;[data-visually-hidden]{opacity:0;}&:hover{outline:1px solid ",O.I6.stroke.hover,";[data-visually-hidden]{opacity:1;}}&:focus-within{[data-visually-hidden]{opacity:1;}}",r&&(0,a.AH)("background-color:",O.I6.background.success.fill40,";color:",O.I6.text.primary,";&:hover{outline:1px solid ",O.I6.stroke.success.fill70,";}"+(true?"":0),true?"":0)," ",n&&(0,a.AH)("background-color:",O.I6.stroke.hover,";"+(true?"":0),true?"":0)," ",o&&(0,a.AH)("box-shadow:",O.r7.drag,";"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)}};function Qa(t){"@babel/helpers - typeof";return Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qa(t)}function Ga(){return Ga=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ga.apply(null,arguments)}function Va(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=uu(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function t(){};return{s:o,n:function e(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();return a=e.done,e},e:function t(e){u=!0,i=e},f:function t(){try{a||null==r["return"]||r["return"]()}finally{if(u)throw i}}}}function $a(t){return Za(t)||Xa(t)||uu(t)||Ja()}function Ja(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xa(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Za(t){if(Array.isArray(t))return su(t)}function tu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function eu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tu(Object(r),!0).forEach((function(e){ru(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ru(t,e,r){return(e=nu(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nu(t){var e=ou(t,"string");return"symbol"==Qa(e)?e:e+""}function ou(t,e){if("object"!=Qa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function iu(t,e){return cu(t)||lu(t,e)||uu(t,e)||au()}function au(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uu(t,e){if(t){if("string"==typeof t)return su(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?su(t,e):void 0}}function su(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function lu(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function cu(t){if(Array.isArray(t))return t}var du=function t(){var e=(0,s.useState)(null),r=iu(e,2),u=r[0],l=r[1];var d=(0,b.xW)();var f=Hr(),p=f.activeQuestionIndex;var h=(0,b.jz)({control:d.control,name:"questions.".concat(p,".question_answers")}),v=h.fields,y=h.move,g=h.replace;var m=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:10}}),(0,n.MS)(n.uN,{coordinateGetter:i.JR}));var _=(0,b.FH)({control:d.control,name:"questions.".concat(p,".question_answers"),defaultValue:[]});var w=(0,s.useMemo)((function(){if(!u){return null}return v.find((function(t){return t.answer_id===u}))}),[u,v]);var x=function t(e,r){var n=_.map((function(t){return eu(eu(eu({},t),Fe(t._data_status,Pe.UPDATE)&&{_data_status:Fe(t._data_status,Pe.UPDATE)}),{},{is_correct:t.answer_id===r.answer_id?"1":"0"})}));g(n)};(0,s.useEffect)((function(){var t=_.filter((function(t){var e=v.findIndex((function(e){return e.answer_id===t.answer_id}));var r=v[e]||{};return t.is_correct!==r.is_correct}));if(t.length===0){return}var e=v.findIndex((function(e){return e.answer_id===t[0].answer_id}));var r=$a(_);r[e]=Object.assign({},r[e],{is_correct:"1"});var n=Va(r.entries()),o;try{for(n.s();!(o=n.n()).done;){var i=iu(o.value,2),a=i[0],u=i[1];if(a!==e){r[a]=eu(eu(eu({},u),Fe(u._data_status,Pe.UPDATE)&&{_data_status:Fe(u._data_status,Pe.UPDATE)}),{},{is_correct:"0"})}}}catch(t){n.e(t)}finally{n.f()}d.setValue("questions.".concat(p,".question_answers"),r)}),[_]);return(0,a.Y)("div",{css:pu.optionWrapper},(0,a.Y)(n.Mp,{sensors:m,collisionDetection:n.fp,modifiers:[o.Q_],onDragStart:function t(e){l(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var o=v.findIndex((function(t){return t.answer_id===r.id}));var i=v.findIndex((function(t){return t.answer_id===n.id}));y(o,i)}l(null)}},(0,a.Y)(i.gB,{items:v.map((function(t){return eu(eu({},t),{},{id:t.answer_id})})),strategy:i._G},(0,a.Y)(ct.A,{each:v},(function(t,e){return(0,a.Y)(b.xI,{key:"".concat(t.answer_id,"-").concat(t.is_correct),control:d.control,name:"questions.".concat(p,".question_answers.").concat(e),render:function r(n){return(0,a.Y)(Ma,Ga({},n,{index:e,onCheckCorrectAnswer:function r(){return x(e,t)}}))}})}))),(0,c.createPortal)((0,a.Y)(n.Hd,null,(0,a.Y)(A.A,{when:w},(function(t){var e=v.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.Y)(b.xI,{key:u,control:d.control,name:"questions.".concat(p,".question_answers.").concat(e),render:function t(r){return(0,a.Y)(Ma,Ga({},r,{index:e,onCheckCorrectAnswer:E.lQ,isOverlay:true}))}})}))),document.body)))};const fu=du;var pu={optionWrapper:(0,a.AH)(k.x.display.flex("column"),";gap:",O.YK[12],";"+(true?"":0),true?"":0),option:function t(e){var r=e.isSelected;return(0,a.AH)(k.x.display.flex(),";",I.I.caption("medium"),";align-items:center;color:",O.I6.text.subdued,";gap:",O.YK[10],";height:48px;align-items:center;[data-check-icon]{opacity:0;transition:opacity 0.15s ease-in-out;fill:none;flex-shrink:0;}&:hover{[data-check-icon]{opacity:1;}}",r&&(0,a.AH)("[data-check-icon]{opacity:1;color:",O.I6.bg.success,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionLabel:function t(e){var r=e.isSelected;return(0,a.AH)("display:grid;grid-template-columns:1fr auto 1fr;align-items:center;width:100%;border-radius:",O.Vq.card,";padding:",O.YK[12]," ",O.YK[16],";background-color:",O.I6.background.white,";cursor:pointer;[data-visually-hidden]{opacity:0;}&:hover{box-shadow:0 0 0 1px ",O.I6.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.AH)("background-color:",O.I6.background.success.fill40,";color:",O.I6.text.primary,";&:hover{box-shadow:0 0 0 1px ",O.I6.stroke.success.fill70,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionDragButton:(0,a.AH)(k.x.resetButton," ",k.x.flexCenter()," transform:rotate(90deg);color:",O.I6.icon["default"],";cursor:grab;place-self:center center;&:focus,&:active,&:hover{background:none;color:",O.I6.icon["default"],";}"+(true?"":0),true?"":0)};var hu=function t(e){var r=(0,s.useRef)();(0,s.useEffect)((function(){r.current=e}),[e]);return r.current};const vu=r.p+"images/9e5f8c5e5307063e90cc7f2a55e50d8c-quiz-empty-state-2x.webp";const yu=r.p+"images/bdb31b4692f8bb5ee2633ce7abb0356d-quiz-empty-state.webp";function gu(){return gu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gu.apply(null,arguments)}function mu(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var bu=!!Qt.P.tutor_pro_url;var _u=function t(){var e=Hr(),r=e.activeQuestionIndex,n=e.activeQuestionId,o=e.validationError,i=e.contentType;var l=hu(n);var c=(0,b.xW)();var d=(0,s.useRef)(null);var f=c.watch("questions.".concat(r,".question_type"));var p=c.watch("questions")||[];var h=c.watch("questions.".concat(r,"._data_status"));var v={true_false:(0,a.Y)(fu,{key:n}),multiple_choice:(0,a.Y)(Ha,{key:n}),open_ended:(0,a.Y)(Wa,{key:n}),fill_in_the_blank:(0,a.Y)(bo,{key:n}),short_answer:(0,a.Y)(Wa,{key:n}),matching:(0,a.Y)($i,{key:n}),image_answering:(0,a.Y)(li,{key:n}),ordering:(0,a.Y)(Ha,{key:n})};(0,s.useEffect)((function(){if(o&&d.current){d.current.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}),[o]);if(!n&&!c.formState.isLoading&&p.length===0){return(0,a.Y)("div",{css:xu.emptyState},(0,a.Y)("img",{css:xu.emptyStateImage,src:yu,srcSet:"".concat(yu," 1x, ").concat(vu," 2x"),alt:""}),(0,a.Y)("p",{css:xu.emptyStateText},(0,u.__)("Enter a quiz title to begin. Choose from a variety of question types to keep things interesting!","tutor")))}return(0,a.Y)("div",{key:r,css:xu.questionForm(n===l)},(0,a.Y)("div",{css:xu.questionWithIndex},(0,a.Y)("div",{css:xu.questionIndex},r+1,"."),(0,a.Y)("div",{css:xu.questionTitleAndDesc},(0,a.Y)(b.xI,{control:c.control,rules:{required:(0,u.__)("Question title is required","tutor")},name:"questions.".concat(r,".question_title"),render:function t(e){var n;return(0,a.Y)(Gn,gu({},e,{placeholder:(0,u.__)("Write your question here..","tutor"),disabled:i==="tutor_h5p_quiz",onChange:function t(){if(Fe(h,Pe.UPDATE)){c.setValue("questions.".concat(r,"._data_status"),Fe(h,Pe.UPDATE))}},selectOnFocus:((n=p[r])===null||n===void 0?void 0:n._data_status)===Pe.NEW}))}}),(0,a.Y)(A.A,{when:i!=="tutor_h5p_quiz",fallback:(0,a.Y)("div",null,(0,a.Y)("div",{css:xu.h5pShortCode},'[h5p id: "'.concat(c.watch("questions.".concat(r,".question_description")),'"]')))},(0,a.Y)(b.xI,{control:c.control,name:"questions.".concat(r,".question_description"),render:function t(e){return(0,a.Y)(In,gu({},e,{placeholder:(0,u.__)("Description (optional)","tutor"),disabled:i==="tutor_h5p_quiz",onChange:function t(){if(Fe(h,Pe.UPDATE)){c.setValue("questions.".concat(r,"._data_status"),Fe(h,Pe.UPDATE))}}}))}})),(0,a.Y)(Bt.A,{section:"Curriculum.Quiz.after_question_description",namePrefix:"questions.".concat(r,"."),form:c}))),(0,a.Y)(A.A,{when:o},(0,a.Y)("div",{key:Math.random(),ref:d,css:xu.alertWrapper},(0,a.Y)(tn.A,{type:"danger",icon:"warning"},o===null||o===void 0?void 0:o.message))),v[f],(0,a.Y)(A.A,{when:bu&&f!=="h5p"},(0,a.Y)("div",{css:xu.questionAnswer},(0,a.Y)(b.xI,{control:c.control,name:"questions.".concat(r,".answer_explanation"),render:function t(e){return(0,a.Y)(cn,gu({},e,{label:(0,u.__)("Answer Explanation","tutor"),placeholder:(0,u.__)("Write answer explanation...","tutor"),onChange:function t(){if(Fe(h,Pe.UPDATE)){c.setValue("questions.".concat(r,"._data_status"),Fe(h,Pe.UPDATE))}}}))}}))))};const wu=_u;var xu={questionForm:function t(e){return(0,a.AH)(k.x.display.flex("column"),";padding-right:",O.YK[48],";gap:",O.YK[16],";animation:",e?undefined:"fadeIn 0.25s ease-in-out",";@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}",O.EA.smallMobile,"{padding-right:",O.YK[8],";}"+(true?"":0),true?"":0)},questionWithIndex:(0,a.AH)(k.x.display.flex("row"),";align-items:flex-start;padding-left:",O.YK[40],";gap:",O.YK[4],";",O.EA.smallMobile,"{padding-left:",O.YK[8],";}"+(true?"":0),true?"":0),questionIndex:(0,a.AH)("margin-top:",O.YK[10],";",I.I.heading6(),";color:",O.I6.text.hints,";"+(true?"":0),true?"":0),questionTitleAndDesc:(0,a.AH)(k.x.display.flex("column"),";gap:",O.YK[8],";width:100%;"+(true?"":0),true?"":0),h5pShortCode:(0,a.AH)("margin-left:",O.YK[8],";padding:",O.YK[4]," ",O.YK[8],";",I.I.caption(),";color:",O.I6.text.white,";background-color:#2575be;border-radius:",O.Vq.card,";width:fit-content;font-family:'Fire Code',monospace;"+(true?"":0),true?"":0),questionAnswer:(0,a.AH)("padding-left:",O.YK[40],";",O.EA.smallMobile,"{padding-left:",O.YK[8],";}"+(true?"":0),true?"":0),emptyState:(0,a.AH)(k.x.flexCenter("column"),";padding-left:",O.YK[40],";padding-right:",O.YK[48],";gap:",O.YK[16],";"+(true?"":0),true?"":0),emptyStateImage:true?{name:"vdj5lp",styles:"width:220px;height:auto"}:0,emptyStateText:(0,a.AH)(I.I.small(),";color:",O.I6.text.subdued,";text-align:center;max-width:330px;"+(true?"":0),true?"":0),alertWrapper:(0,a.AH)("padding-left:",O.YK[40],";animation:shake 0.3s linear;@keyframes shake{0%{transform:translateX(0);}25%{transform:translateX(-5px);}50%{transform:translateX(5px);}75%{transform:translateX(-5px);}100%{transform:translateX(0);}}"+(true?"":0),true?"":0)};function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Au.apply(null,arguments)}function Yu(t,e){return Su(t)||Eu(t,e)||Iu(t,e)||Ou()}function Ou(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Iu(t,e){if(t){if("string"==typeof t)return ku(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ku(t,e):void 0}}function ku(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Eu(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Su(t){if(Array.isArray(t))return t}function qu(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var ju={true_false:"quizTrueFalse",multiple_choice:"quizMultiChoice",open_ended:"quizEssay",fill_in_the_blank:"quizFillInTheBlanks",short_answer:"quizShortAnswer",matching:"quizImageMatching",image_answering:"quizImageAnswer",ordering:"quizOrdering",h5p:"quizH5p"};var Pu=!!Qt.P.tutor_pro_url;var Cu=function t(e){var r=e.question,n=e.index,o=e.onDuplicateQuestion,l=e.onRemoveQuestion,c=e.isOverlay,d=c===void 0?false:c;var f=Hr(),p=f.activeQuestionIndex,v=f.activeQuestionId,g=f.validationError,m=f.setActiveQuestionId,w=f.setValidationError,x=f.contentType;var A=(0,b.xW)();var Y=(0,s.useState)(false),I=Yu(Y,2),k=I[0],E=I[1];var S=(0,s.useRef)(null);var q=(0,i.gl)({id:r.question_id,animateLayoutChanges:Ao.J}),j=q.attributes,P=q.listeners,C=q.setNodeRef,T=q.transform,D=q.transition,L=q.isDragging;var z={transform:y.Ks.Transform.toString(T),transition:D,opacity:L?.3:undefined,background:L?O.I6.stroke.hover:undefined};(0,s.useEffect)((function(){if(v===r.question_id){var t;(t=S.current)===null||t===void 0||t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}),[v,r.question_id]);return(0,a.Y)("div",Au({},j,{key:r.question_id,css:Lu.questionItem({isActive:String(v)===String(r.question_id),isDragging:d,isThreeDotsOpen:k}),ref:function t(e){C(e);S.current=e},style:z,onClick:function t(){if(v===r.question_id){return}var e=(0,Rt.Op)(p,A);if(e!==true){w(e);return}w(null);m(r.question_id)},onKeyDown:function t(e){if(e.key==="Enter"||e.key===" "){if(v===r.question_id){return}var n=(0,Rt.Op)(p,A);if(n!==true){w(n);return}w(null);m(r.question_id)}}}),(0,a.Y)("div",{css:Lu.iconAndSerial({isDragging:d}),"data-icon-serial":true},(0,a.Y)("span",{"data-serial":true},n+1),(0,a.Y)("button",Au({"data-drag-icon":true},P,{type:"button",css:Lu.dragButton}),(0,a.Y)(h.A,{"data-drag-icon":true,name:"dragVertical",width:24,height:24})),(0,a.Y)(h.A,{name:ju[r.question_type],width:24,height:24,"data-question-icon":true})),(0,a.Y)("span",{css:Lu.questionTitle({isActive:String(v)===String(r.question_id)})},r.question_title),(0,a.Y)(et,{isOpen:k,onClick:function t(e){e.stopPropagation();var r=(0,Rt.Op)(p,A);E(true);if(r!==true){w(r)}},animationType:G.J6.slideDown,closePopover:function t(){return E(false)},dotsOrientation:"vertical",maxWidth:Pu?"150px":"160px",isInverse:true,arrowPosition:"auto",size:"small",hideArrow:true,"data-three-dots":true},!g&&x!=="tutor_h5p_quiz"&&(0,a.Y)(et.Option,{text:(0,a.Y)("div",{css:Lu.duplicate},(0,u.__)("Duplicate","tutor"),!Pu&&(0,a.Y)(_.A,{size:"small",content:(0,u.__)("Pro","tutor")})),icon:(0,a.Y)(h.A,{name:"duplicate",width:24,height:24}),disabled:!Pu,onClick:function t(e){e.stopPropagation();o(r);E(false)}}),(0,a.Y)(et.Option,{isTrash:true,text:(0,u.__)("Delete","tutor"),icon:(0,a.Y)(h.A,{name:"delete",width:24,height:24}),onClick:function t(e){e.stopPropagation();l();E(false)}})))};const Tu=Cu;var Du=true?{name:"1c7c6p3",styles:"[data-three-dots]{opacity:1;}"}:0;var Lu={questionItem:function t(e){var r=e.isActive,n=r===void 0?false:r,o=e.isDragging,i=o===void 0?false:o,u=e.isThreeDotsOpen,s=u===void 0?false:u;return(0,a.AH)("padding:",O.YK[10]," ",O.YK[8]," ",O.YK[10]," ",O.YK[28],";display:flex;align-items:center;justify-content:space-between;gap:",O.YK[12],";border-bottom:1px solid ",O.I6.stroke.divider,";cursor:pointer;transition:border 0.3s ease-in-out,background-color 0.3s ease-in-out;[data-three-dots]{opacity:0;background:transparent;svg{color:",O.I6.icon["default"],";}:focus-visible{opacity:1;}}",n&&(0,a.AH)("color:",O.I6.text.brand,";background-color:",O.I6.background.white,";[data-icon-serial]{border-top-right-radius:3px;border-bottom-right-radius:3px;border-color:transparent;}"+(true?"":0),true?"":0)," ",s&&Du," :hover{background-color:",O.I6.background.hover,";[data-serial]{display:none;}[data-drag-icon]{display:block;}[data-icon-serial]{border-top-right-radius:3px;border-bottom-right-radius:3px;border-color:transparent;}[data-three-dots]{opacity:1;}}:focus-visible{outline:2px solid ",O.I6.stroke.brand,";outline-offset:-2px;border-radius:",O.Vq.card,";[data-three-dots]{opacity:1;}}",i&&(0,a.AH)("box-shadow:",O.r7.drag,";background-color:",O.I6.background.white,";border-radius:",O.Vq.card,";:hover{background-color:",O.I6.background.white,";}"+(true?"":0),true?"":0)," ",O.EA.smallMobile,"{padding:",O.YK[8]," ",O.YK[8]," ",O.YK[8]," ",O.YK[8],";[data-three-dots]{opacity:1;}}"+(true?"":0),true?"":0)},iconAndSerial:function t(e){var r=e.isDragging,n=r===void 0?false:r;return(0,a.AH)("display:grid;grid-template-columns:1fr 1fr;align-items:center;border-radius:3px 0 0 3px;width:64px;padding:",O.YK[4]," ",O.YK[8]," ",O.YK[4]," ",O.YK[4],";flex-shrink:0;column-gap:",O.YK[12],";place-items:center center;[data-drag-icon]{display:none;color:",O.I6.icon.hints,";cursor:",n?"grabbing":"grab",";}[data-question-icon]{flex-shrink:0;}svg{flex-shrink:0;}[data-serial]{width:24px;display:block;",I.I.caption("medium")," text-align:center;flex-grow:1;}"+(true?"":0),true?"":0)},questionTitle:function t(e){var r=e.isActive,n=r===void 0?false:r;return(0,a.AH)(I.I.small(n?"medium":"regular"),";color:",n?O.I6.text.brand:O.I6.text.subdued,";flex-grow:1;"+(true?"":0),true?"":0)},duplicate:(0,a.AH)("display:flex;align-items:center;gap:",O.YK[4],";"+(true?"":0),true?"":0),dragButton:(0,a.AH)(k.x.resetButton,";&:focus,&:active,&:hover{background:none;}"+(true?"":0),true?"":0)};function zu(t){"@babel/helpers - typeof";return zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zu(t)}function Hu(t){return Wu(t)||Nu(t)||$u(t)||Ku()}function Ku(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nu(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Wu(t){if(Array.isArray(t))return Ju(t)}function Uu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Bu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Uu(Object(r),!0).forEach((function(e){Fu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Fu(t,e,r){return(e=Mu(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mu(t){var e=Ru(t,"string");return"symbol"==zu(e)?e:e+""}function Ru(t,e){if("object"!=zu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Qu(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=$u(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function t(){};return{s:o,n:function e(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();return a=e.done,e},e:function t(e){u=!0,i=e},f:function t(){try{a||null==r["return"]||r["return"]()}finally{if(u)throw i}}}}function Gu(t,e){return Zu(t)||Xu(t,e)||$u(t,e)||Vu()}function Vu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $u(t,e){if(t){if("string"==typeof t)return Ju(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ju(t,e):void 0}}function Ju(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Xu(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Zu(t){if(Array.isArray(t))return t}var ts=[{label:(0,u.__)("True/False","tutor"),value:"true_false",icon:"quizTrueFalse",isPro:false},{label:(0,u.__)("Multiple Choice","tutor"),value:"multiple_choice",icon:"quizMultiChoice",isPro:false},{label:(0,u.__)("Open Ended/ Essay","tutor"),value:"open_ended",icon:"quizEssay",isPro:false},{label:(0,u.__)("Fill in the Blanks","tutor"),value:"fill_in_the_blank",icon:"quizFillInTheBlanks",isPro:false},{label:(0,u.__)("Short Answer","tutor"),value:"short_answer",icon:"quizShortAnswer",isPro:true},{label:(0,u.__)("Matching","tutor"),value:"matching",icon:"quizImageMatching",isPro:true},{label:(0,u.__)("Image Answering","tutor"),value:"image_answering",icon:"quizImageAnswer",isPro:true},{label:(0,u.__)("Ordering","tutor"),value:"ordering",icon:"quizOrdering",isPro:true}];var es=!!Qt.P.tutor_pro_url;var rs=function t(e){var r=e.isEditing;var l=(0,s.useState)(null),d=Gu(l,2),f=d[0],p=d[1];var v=(0,s.useState)(false),y=Gu(v,2),g=y[0],m=y[1];var w=(0,s.useRef)(null);var O=(0,s.useRef)(null);var I=(0,b.xW)();var k=Hr(),S=k.contentType,q=k.activeQuestionIndex,j=k.validationError,P=k.setActiveQuestionId,C=k.setValidationError;var T=(0,b.jz)({control:I.control,name:"questions"}),D=T.remove,L=T.append,z=T.insert,H=T.move,K=T.fields;var N=(0,x.h)(),W=N.showModal;var U=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:10}}),(0,n.MS)(n.uN,{coordinateGetter:i.JR}));var B=(0,s.useMemo)((function(){if(!f){return null}return K.find((function(t){return t.question_id===f}))}),[f,K]);var F=I.watch("questions")||[];var R=function t(e,r){var n=(0,Rt.Op)(q,I);if(n!==true){C(n);m(false);return}var o=(0,E.Ak)();L({_data_status:Pe.NEW,question_id:o,question_title:e==="h5p"?r===null||r===void 0?void 0:r.title:(0,u.sprintf)((0,u.__)("Question %d","tutor"),K.length+1),question_description:e==="h5p"?r===null||r===void 0?void 0:r.id:"",question_type:e,question_answers:e==="true_false"?[{answer_id:(0,E.Ak)(),_data_status:Pe.NEW,is_saved:true,answer_title:(0,u.__)("True","tutor"),is_correct:"1",answer_order:1,answer_two_gap_match:"",answer_view_format:"text",belongs_question_id:o,belongs_question_type:"true_false"},{answer_id:(0,E.Ak)(),is_saved:true,_data_status:Pe.NEW,answer_title:(0,u.__)("False","tutor"),is_correct:"0",answer_order:2,answer_two_gap_match:"",answer_view_format:"text",belongs_question_id:o,belongs_question_type:"true_false"}]:e==="fill_in_the_blank"?[{_data_status:Pe.NEW,is_saved:false,answer_id:(0,E.Ak)(),answer_title:"",belongs_question_id:o,belongs_question_type:"fill_in_the_blank",answer_two_gap_match:"",answer_view_format:"",answer_order:0,is_correct:"0"}]:[],answer_explanation:"",question_mark:1,question_order:K.length+1,question_settings:{answer_required:false,question_mark:S==="tutor_h5p_quiz"?0:1,question_type:e,randomize_question:false,show_question_mark:false}});C(null);P(o);m(false)};var Q=function t(e){var r=Qu(e),n;try{for(r.s();!(n=r.n()).done;){var o=n.value;R("h5p",o)}}catch(t){r.e(t)}finally{r.f()}};var V=function t(e,r){var n=I.watch("questions.".concat(r));if(!n||j){return}var o=Bu(Bu({},e),{},{question_id:(0,E.Ak)(),_data_status:Pe.NEW,question_title:"".concat(n.question_title," (copy)"),question_answers:n.question_answers.map((function(t){return Bu(Bu({},t),{},{answer_id:(0,E.Ak)(),_data_status:Pe.NEW})}))});var i=r+1;z(i,o)};var $=function t(e,r){D(e);if(q===e){P("");C(null)}if(r._data_status!==Pe.NEW){I.setValue("deleted_question_ids",[].concat(Hu(I.getValues("deleted_question_ids")),[r.question_id]))}};var J=function t(e){var r=e.active,n=e.over;if(!n||r.id===n.id){return}var o=K.findIndex((function(t){return t.question_id===r.id}));var i=K.findIndex((function(t){return t.question_id===n.id}));H(o,i)};(0,s.useEffect)((function(){if(w.current){w.current.style.maxHeight="".concat(window.innerHeight-w.current.getBoundingClientRect().top,"px")}}),[w.current,r]);if(!I.getValues("quiz_title")){return null}return(0,a.Y)("div",null,(0,a.Y)("div",{css:os.questionsLabel},(0,a.Y)("span",null,(0,u.__)("Questions","tutor")),(0,a.Y)("button",{ref:O,type:"button",onClick:function t(){if(S==="tutor_h5p_quiz"){W({component:cr,props:{title:(0,u.__)("Select H5P Content","tutor"),onAddContent:function t(e){Q(e)},contentType:"tutor_h5p_quiz",addedContentIds:F.map((function(t){return t.question_description}))}})}else{m(true)}}},(0,a.Y)(h.A,{name:"plusSquareBrand",width:32,height:32}))),(0,a.Y)("div",{ref:w,css:os.questionList},(0,a.Y)(A.A,{when:F.length>0,fallback:(0,a.Y)("div",{css:os.emptyQuestionText},(0,u.__)("No questions added yet.","tutor"))},(0,a.Y)(n.Mp,{sensors:U,collisionDetection:n.fp,modifiers:[o.Q_],onDragStart:function t(e){p(e.active.id)},onDragEnd:function t(e){return J(e)}},(0,a.Y)(i.gB,{items:F.map((function(t){return Bu(Bu({},t),{},{id:t.question_id})})),strategy:i._G},(0,a.Y)(ct.A,{each:F},(function(t,e){return(0,a.Y)(Tu,{key:t.question_id,question:t,index:e,onDuplicateQuestion:function t(r){V(r,e)},onRemoveQuestion:function r(){return $(e,t)}})}))),(0,c.createPortal)((0,a.Y)(n.Hd,null,(0,a.Y)(A.A,{when:B},(function(t){var e=K.findIndex((function(e){return e.question_id===t.question_id}));return(0,a.Y)(Tu,{key:t.question_id,question:t,index:e,onDuplicateQuestion:E.lQ,onRemoveQuestion:E.lQ,isOverlay:true})}))),document.body))),(0,a.Y)(M.A,{gap:4,maxWidth:"240px",arrow:Y.vN.isAboveTablet?"top":Y.vN.isAboveMobile?"right":"absoluteCenter",triggerRef:O,isOpen:g,closePopover:function t(){return m(false)},animationType:G.J6.slideUp},(0,a.Y)("div",{css:os.questionOptionsWrapper},(0,a.Y)("span",{css:os.questionTypeOptionsTitle},(0,u.__)("Select Question Type","tutor")),ts.map((function(t){return(0,a.Y)(A.A,{key:t.value,when:t.isPro&&!es,fallback:(0,a.Y)("button",{key:t.value,type:"button",css:os.questionTypeOption,onClick:function e(){R(t.value)}},(0,a.Y)(h.A,{name:t.icon,width:24,height:24}),(0,a.Y)("span",null,t.label))},(0,a.Y)("button",{key:t.value,type:"button",css:os.questionTypeOption,disabled:true,onClick:E.lQ},(0,a.Y)(h.A,{"data-question-icon":true,name:t.icon,width:24,height:24}),(0,a.Y)("span",null,t.label),(0,a.Y)(_.A,{size:"small",content:(0,u.__)("Pro","tutor")})))}))))))};const ns=rs;var os={questionsLabel:(0,a.AH)("display:flex;gap:",O.YK[4],";align-items:center;justify-content:space-between;border-bottom:1px solid ",O.I6.stroke.divider,";padding:",O.YK[16]," ",O.YK[16]," ",O.YK[16]," ",O.YK[28],";",I.I.caption("medium"),";color:",O.I6.text.subdued,";button{",k.x.resetButton,";width:32px;height:32px;border-radius:",O.Vq[6],";&:focus,&:active,&:hover{background:none;}svg{color:",O.I6.action.primary["default"],";width:100%;height:100%;}:focus-visible{outline:2px solid ",O.I6.stroke.brand,";}}",O.EA.smallMobile,"{padding:",O.YK[16],";}"+(true?"":0),true?"":0),questionList:(0,a.AH)(k.x.overflowYAuto,";scrollbar-gutter:auto;padding:",O.YK[8]," 0 ",O.YK[8]," 0;"+(true?"":0),true?"":0),questionTypeOptionsTitle:(0,a.AH)(I.I.caption("medium"),";color:",O.I6.text.subdued,";padding:",O.YK[8]," ",O.YK[16]," ",O.YK[8]," ",O.YK[20],";border-bottom:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0),questionOptionsWrapper:(0,a.AH)("display:flex;flex-direction:column;padding-block:",O.YK[6],";"+(true?"":0),true?"":0),questionTypeOption:(0,a.AH)(k.x.resetButton,";color:",O.I6.text.title,";width:100%;padding:",O.YK[8]," ",O.YK[16]," ",O.YK[8]," ",O.YK[20],";transition:background-color 0.3s ease-in-out;display:flex;align-items:center;gap:",O.YK[4],";border:2px solid transparent;&:focus,&:active,&:hover{background:none;color:",O.I6.text.title,";}:disabled{cursor:not-allowed;color:",O.I6.text.primary,";[data-question-icon]{filter:grayscale(100%);}}:hover:enabled{background-color:",O.I6.background.hover,";color:",O.I6.text.title,";}:focus:enabled,:active:enabled{border-color:",O.I6.stroke.brand,";}"+(true?"":0),true?"":0),emptyQuestionText:(0,a.AH)(I.I.small(),";color:",O.I6.text.subdued,";padding:",O.YK[8]," ",O.YK[16]," ",O.YK[8]," ",O.YK[28],";"+(true?"":0),true?"":0)};function is(t){"@babel/helpers - typeof";return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},is(t)}function as(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function us(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?as(Object(r),!0).forEach((function(e){ss(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):as(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ss(t,e,r){return(e=ls(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ls(t){var e=cs(t,"string");return"symbol"==is(e)?e:e+""}function cs(t,e){if("object"!=is(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=is(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function ds(t){return hs(t)||ps(t)||gs(t)||fs()}function fs(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ps(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function hs(t){if(Array.isArray(t))return ms(t)}function vs(t,e){return _s(t)||bs(t,e)||gs(t,e)||ys()}function ys(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gs(t,e){if(t){if("string"==typeof t)return ms(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ms(t,e):void 0}}function ms(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function bs(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function _s(t){if(Array.isArray(t))return t}function ws(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var xs=function t(e){var r;var n=e.children,o=e.hasBorder,i=o===void 0?false:o,u=e.title,l=e.subtitle,c=e.actionTray,d=e.collapsed,f=d===void 0?false:d,p=e.noSeparator,v=p===void 0?false:p,y=e.hideArrow,m=y===void 0?false:y,b=e.isAlternative,_=b===void 0?false:b,w=e.collapsedAnimationDependencies;var x=(0,s.useState)(f),Y=vs(x,2),O=Y[0],I=Y[1];var k=(0,s.useRef)(null);var E=(0,g.zh)({height:!O?(r=k.current)===null||r===void 0?void 0:r.scrollHeight:0,opacity:!O?1:0,overflow:"hidden",config:{duration:300,easing:function t(e){return e*(2-e)}}},[O].concat(ds(w||[]))),S=vs(E,2),q=S[0],j=S[1];(0,s.useEffect)((function(){if((0,jn.O9)(k.current)){j.start({height:!O?k.current.scrollHeight:0,opacity:!O?1:0})}}),[O].concat(ds(w||[])));return(0,a.Y)("div",{css:Os.wrapper(i)},(0,a.Y)("div",{css:Os.headerWrapper(O||v,_)},(0,a.Y)("div",{css:Os.headerAndAction},(0,a.Y)("div",{css:Os.header},(0,a.Y)("h5",{css:Os.title},u),(0,a.Y)(A.A,{when:l},(0,a.Y)("p",{css:Os.subtitle},l))),(0,a.Y)("div",{css:Os.actions},(0,a.Y)(A.A,{when:c},c),(0,a.Y)(A.A,{when:!m},(0,a.Y)("button",{type:"button",css:Os.collapseButton({isCollapsed:O}),onClick:function t(){return I(!O)}},(0,a.Y)(h.A,{name:"chevronDown",width:24,height:24,style:Os.arrowUpDown})))))),(0,a.Y)(g.CS.div,{style:us({},q)},(0,a.Y)("div",{ref:k,css:Os.cardBody},n)))};const As=xs;var Ys=true?{name:"21xn5r",styles:"transform:rotate(180deg)"}:0;var Os={wrapper:function t(e){return(0,a.AH)("width:100%;border-radius:",O.Vq.card,";background-color:",O.I6.background.white,";box-shadow:",O.r7.card,";",e&&(0,a.AH)("box-shadow:none;border:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},headerWrapper:function t(e,r){return(0,a.AH)("padding:",O.YK[8],";display:flex;flex-direction:column;justify-content:center;gap:",O.YK[4],";",!e&&(0,a.AH)("border-bottom:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0)," ",r&&(0,a.AH)("padding:",O.YK[12]," ",O.YK[16]," ",O.YK[12]," ",O.YK[24],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},headerAndAction:true?{name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"}:0,header:(0,a.AH)("display:flex;flex-direction:column;padding:",O.YK[4]," ",O.YK[16],";"+(true?"":0),true?"":0),subtitle:(0,a.AH)(I.I.caption(),";color:",O.I6.text.subdued,";"+(true?"":0),true?"":0),title:(0,a.AH)(I.I.body("medium"),";color:",O.I6.text.primary,";display:flex;align-items:center;"+(true?"":0),true?"":0),collapseButton:function t(e){var r=e.isCollapsed;return(0,a.AH)(k.x.resetButton,";display:flex;align-items:center;transition:transform 0.3s ease-in-out;",r&&Ys," &:focus,&:active,&:hover{background:none;color:",O.I6.icon["default"],";}"+(true?"":0),true?"":0)},arrowUpDown:(0,a.AH)("color:",O.I6.icon["default"],";display:flex;justify-content:center;align-items:center;"+(true?"":0),true?"":0),cardBody:(0,a.AH)("padding:",O.YK[16]," ",O.YK[24]," ",O.YK[32]," ",O.YK[24],";"+(true?"":0),true?"":0),actions:(0,a.AH)("display:flex;align-items:center;gap:",O.YK[8],";"+(true?"":0),true?"":0)};function Is(t){"@babel/helpers - typeof";return Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Is(t)}function ks(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Es(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ks(Object(r),!0).forEach((function(e){Ss(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ks(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ss(t,e,r){return(e=qs(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qs(t){var e=js(t,"string");return"symbol"==Is(e)?e:e+""}function js(t,e){if("object"!=Is(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Is(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Ps(){return Ps=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ps.apply(null,arguments)}var Cs=(0,Rt.p9)();var Ts=function t(e){var r=e.contentDripType;var n=Hr(),o=n.quizId,i=n.contentType;var s=(0,b.xW)();var l=s.watch("quiz_option.feedback_mode");var c=(0,E.GR)(Y.oW.CONTENT_DRIP)&&r==="unlock_sequentially"&&l==="retry";var d=s.watch("quiz_option.content_drip_settings.prerequisites");var f=(0,m.jE)();var p=f.getQueryData(["Topic",Cs]);return(0,a.Y)("div",{css:Ls.settings},(0,a.Y)(As,{title:(0,u.__)("Basic Settings","tutor"),collapsedAnimationDependencies:[l,d===null||d===void 0?void 0:d.length]},(0,a.Y)("div",{css:Ls.formWrapper},(0,a.Y)(A.A,{when:i!=="tutor_h5p_quiz"},(0,a.Y)("div",{css:Ls.timeWrapper},(0,a.Y)(b.xI,{name:"quiz_option.time_limit.time_value",control:s.control,render:function t(e){return(0,a.Y)(ut.A,Ps({},e,{type:"number",label:(0,u.__)("Time Limit","tutor"),helpText:(0,u.__)("Set a time limit for this quiz. A value of 0 indicates no time limit","tutor"),selectOnFocus:true}))}}),(0,a.Y)(b.xI,{name:"quiz_option.time_limit.time_type",control:s.control,render:function t(e){return(0,a.Y)(lt.A,Ps({},e,{options:[{label:(0,u.__)("Seconds","tutor"),value:"seconds"},{label:(0,u.__)("Minutes","tutor"),value:"minutes"},{label:(0,u.__)("Hours","tutor"),value:"hours"},{label:(0,u.__)("Days","tutor"),value:"days"},{label:(0,u.__)("Weeks","tutor"),value:"weeks"}]}))}}))),(0,a.Y)(A.A,{when:i!=="tutor_h5p_quiz"},(0,a.Y)(b.xI,{name:"quiz_option.hide_quiz_time_display",control:s.control,render:function t(e){return(0,a.Y)(he.A,Ps({},e,{label:(0,u.__)("Hide Quiz Time","tutor")}))}}),(0,a.Y)(b.xI,{name:"quiz_option.feedback_mode",control:s.control,render:function t(e){return(0,a.Y)(lt.A,Ps({},e,{label:(0,u.__)("Feedback Mode","tutor"),leftIcon:(0,a.Y)(h.A,{name:"eye",width:32,height:32}),options:[{label:(0,u.__)("Default","tutor"),value:"default",description:(0,u.__)("Answers are shown after finishing the quiz.","tutor")},{label:(0,u.__)("Reveal Mode","tutor"),value:"reveal",description:(0,u.__)("Show answer after attempting the question.","tutor")},{label:(0,u.__)("Retry","tutor"),value:"retry",description:(0,u.__)("Allows students to retake the quiz after their first attempt.","tutor")}]}))}})),(0,a.Y)(A.A,{when:l==="retry"},(0,a.Y)(b.xI,{name:"quiz_option.attempts_allowed",control:s.control,rules:{max:20,min:0},render:function t(e){return(0,a.Y)(ut.A,Ps({},e,{type:"number",label:(0,u.__)("Attempts Allowed","tutor"),helpText:(0,u.__)('Define how many times a student can retake this quiz. Setting it to "0" allows unlimited attempts',"tutor"),selectOnFocus:true}))}})),(0,a.Y)(A.A,{when:c&&i!=="tutor_h5p_quiz"},(0,a.Y)(b.xI,{name:"quiz_option.pass_is_required",control:s.control,render:function t(e){return(0,a.Y)(he.A,Ps({},e,{label:(0,u.__)("Passing is Required","tutor"),helpText:(0,u.__)("By enabling this option, the student must have to pass it to access the next quiz","tutor")}))}})),(0,a.Y)(b.xI,{name:"quiz_option.passing_grade",control:s.control,render:function t(e){return(0,a.Y)(st.A,Ps({},e,{label:(0,u.__)("Passing Grade","tutor"),helpText:(0,u.__)("Set the minimum score percentage required to pass this quiz","tutor"),content:"%",contentPosition:"right",contentCss:k.x.inputCurrencyStyle}))}}),(0,a.Y)(A.A,{when:i!=="tutor_h5p_quiz"},(0,a.Y)(b.xI,{name:"quiz_option.max_questions_for_answer",control:s.control,render:function t(e){return(0,a.Y)(ut.A,Ps({},e,{type:"number",label:(0,u.__)("Max Question Allowed to Answer","tutor"),helpText:(0,u.__)("Set the number of quiz questions randomly from your question pool. If the set number exceeds available questions, all questions will be included","tutor"),selectOnFocus:true}))}})),(0,a.Y)(A.A,{when:(0,E.GR)(Y.oW.CONTENT_DRIP)&&i!=="tutor_h5p_quiz"},(0,a.Y)(A.A,{when:r==="specific_days"},(0,a.Y)(b.xI,{name:"quiz_option.content_drip_settings.after_xdays_of_enroll",control:s.control,render:function t(e){return(0,a.Y)(ut.A,Ps({},e,{type:"number",label:(0,a.Y)("div",{css:Ls.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Available after days","tutor")),helpText:(0,u.__)("This quiz will be available after the given number of days.","tutor"),placeholder:"0",selectOnFocus:true}))}})),(0,a.Y)(A.A,{when:r==="unlock_by_date"},(0,a.Y)(b.xI,{name:"quiz_option.content_drip_settings.unlock_date",control:s.control,render:function t(e){return(0,a.Y)(it.A,Ps({},e,{label:(0,a.Y)("div",{css:Ls.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Unlock Date","tutor")),placeholder:(0,u.__)("Select Unlock Date","tutor"),helpText:(0,u.__)("This quiz will be available from the given date. Leave empty to make it available immediately.","tutor")}))}})),(0,a.Y)(A.A,{when:r==="after_finishing_prerequisites"},(0,a.Y)(b.xI,{name:"quiz_option.content_drip_settings.prerequisites",control:s.control,render:function t(e){return(0,a.Y)(Kt,Ps({},e,{label:(0,a.Y)("div",{css:Ls.contentDripLabel},(0,a.Y)(h.A,{name:"contentDrip",height:24,width:24}),(0,u.__)("Prerequisites","tutor")),placeholder:(0,u.__)("Select Prerequisite","tutor"),options:p.reduce((function(t,e){t.push(Es(Es({},e),{},{contents:e.contents.filter((function(t){return String(t.ID)!==String(o)}))}));return t}),[])||[],isSearchable:true,helpText:(0,u.__)("Select items that should be complete before this item","tutor")}))}}))))),(0,a.Y)(As,{title:(0,u.__)("Advanced Settings","tutor")},(0,a.Y)("div",{css:Ls.formWrapper},(0,a.Y)(b.xI,{name:"quiz_option.quiz_auto_start",control:s.control,render:function t(e){return(0,a.Y)(he.A,Ps({},e,{label:(0,u.__)("Quiz Auto Start","tutor"),helpText:(0,u.__)("When enabled, the quiz begins immediately as soon as the page loads","tutor")}))}}),(0,a.Y)("div",{css:Ls.questionLayoutAndOrder},(0,a.Y)(A.A,{when:i!=="tutor_h5p_quiz"},(0,a.Y)(b.xI,{name:"quiz_option.question_layout_view",control:s.control,render:function t(e){return(0,a.Y)(lt.A,Ps({},e,{label:(0,u.__)("Question Layout","tutor"),placeholder:(0,u.__)("Select an option","tutor"),options:[{label:(0,u.__)("Single question","tutor"),value:"single_question"},{label:(0,u.__)("Question pagination","tutor"),value:"question_pagination"},{label:(0,u.__)("Question below each other","tutor"),value:"question_below_each_other"}]}))}})),(0,a.Y)(b.xI,{name:"quiz_option.questions_order",control:s.control,render:function t(e){return(0,a.Y)(lt.A,Ps({},e,{label:(0,u.__)("Question Order","tutor"),placeholder:(0,u.__)("Select an option","tutor"),options:[{label:(0,u.__)("Random","tutor"),value:"rand"},{label:(0,u.__)("Sorting","tutor"),value:"sorting"},{label:(0,u.__)("Ascending","tutor"),value:"asc"},{label:(0,u.__)("Descending","tutor"),value:"desc"}]}))}})),(0,a.Y)(A.A,{when:i!=="tutor_h5p_quiz"},(0,a.Y)(b.xI,{name:"quiz_option.hide_question_number_overview",control:s.control,render:function t(e){return(0,a.Y)(he.A,Ps({},e,{label:(0,u.__)("Hide Question Number","tutor")}))}}),(0,a.Y)(b.xI,{name:"quiz_option.short_answer_characters_limit",control:s.control,render:function t(e){return(0,a.Y)(ut.A,Ps({},e,{type:"number",label:(0,u.__)("Set Character Limit for Short Answers","tutor"),selectOnFocus:true}))}}),(0,a.Y)(b.xI,{name:"quiz_option.open_ended_answer_characters_limit",control:s.control,render:function t(e){return(0,a.Y)(ut.A,Ps({},e,{label:(0,u.__)("Set Character Limit for Open-Ended/Essay Answers","tutor"),selectOnFocus:true}))}})))),(0,a.Y)(Bt.A,{section:"Curriculum.Quiz.bottom_of_settings",form:s}))};const Ds=Ts;var Ls={settings:(0,a.AH)(k.x.display.flex("column")," gap:",O.YK[24],";"+(true?"":0),true?"":0),formWrapper:(0,a.AH)(k.x.display.flex("column")," gap:",O.YK[20],";"+(true?"":0),true?"":0),timeWrapper:(0,a.AH)(k.x.display.flex()," align-items:flex-end;gap:",O.YK[8],";"+(true?"":0),true?"":0),questionLayoutAndOrder:(0,a.AH)(k.x.display.flex()," gap:",O.YK[20],";",O.EA.smallMobile,"{flex-direction:column;}"+(true?"":0),true?"":0),contentDripLabel:(0,a.AH)("display:flex;align-items:center;svg{margin-right:",O.YK[4],";color:",O.I6.icon.success,";}"+(true?"":0),true?"":0)};var zs=r(41594);function Hs(t){"@babel/helpers - typeof";return Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hs(t)}function Ks(){return Ks=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ks.apply(null,arguments)}function Ns(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ns=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,a)&&(_=x);var A=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==Hs(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=k(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Hs(e)+" is not iterable")}return m.prototype=b,o(A,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(A),l(A,s,"Generator"),l(A,a,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:j(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function Ws(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Us(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ws(i,n,o,a,u,"next",t)}function u(t){Ws(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Bs(t,e){return Gs(t)||Qs(t,e)||Ms(t,e)||Fs()}function Fs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ms(t,e){if(t){if("string"==typeof t)return Rs(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rs(t,e):void 0}}function Rs(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Qs(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Gs(t){if(Array.isArray(t))return t}var Vs=(0,Rt.p9)();var $s=function t(e){var r=e.closeModal,n=e.icon,o=e.title,i=e.subtitle,l=e.quizId,c=e.topicId,d=e.contentDripType,v=e.contentType;var y=(0,Ft._)(),g=y.fields;var m=(0,s.useState)(false),_=Bs(m,2),x=_[0],O=_[1];var I=(0,s.useState)("details"),k=Bs(I,2),S=k[0],q=k[1];var j=(0,s.useState)(!(0,jn.O9)(l)),P=Bs(j,2),C=P[0],T=P[1];var D=(0,s.useRef)(null);var L=We();var z=Be(l||"");var H=(0,w.d)(),K=H.showToast;var N=(0,Gt.p)({defaultValues:{quiz_option:{time_limit:{time_value:0,time_type:"minutes"},hide_quiz_time_display:false,feedback_mode:"retry",attempts_allowed:10,passing_grade:80,max_questions_for_answer:v==="tutor_h5p_quiz"?0:10,quiz_auto_start:false,question_layout_view:v==="tutor_h5p_quiz"?"question_below_each_other":"single_question",questions_order:"rand",hide_question_number_overview:false,short_answer_characters_limit:200,open_ended_answer_characters_limit:500,content_drip_settings:{unlock_date:"",after_xdays_of_enroll:0,prerequisites:[]}},questions:[]},shouldFocusError:true});var W=N.formState.dirtyFields&&Object.keys(N.formState.dirtyFields).length>0;(0,s.useEffect)((function(){var t=function t(e){if(W){e.preventDefault();return}N.reset()};window.addEventListener("beforeunload",t);return function(){window.removeEventListener("beforeunload",t)}}),[W]);(0,s.useEffect)((function(){if(!z.data){return}var t=Ce(z.data,(0,E.DE)({fields:g.Curriculum.Quiz}));N.reset(t)}),[z.data]);var U=function(){var t=Us(Ns().mark((function t(e,n,o){var i,a,s;return Ns().wrap((function t(l){while(1)switch(l.prev=l.next){case 0:if(e.quiz_title){l.next=4;break}q("details");Promise.resolve().then((function(){N.trigger("quiz_title",{shouldFocus:true})}));return l.abrupt("return");case 4:if(!(e.questions.length===0)){l.next=8;break}q("details");K({message:(0,u.__)("Please add a question","tutor"),type:"danger"});return l.abrupt("return");case 8:i=(0,Rt.Op)(n,N);if(!(i!==true)){l.next=13;break}o(i);q("details");return l.abrupt("return");case 13:T(false);a=Te(e,c,d,Vs,(0,E.DE)({fields:g.Curriculum.Quiz,slotKey:"after_question_description"},{fields:g.Curriculum.Quiz,slotKey:"bottom_of_question_sidebar"}),(0,E.DE)({fields:g.Curriculum.Quiz,slotKey:"bottom_of_settings"}));l.next=17;return L.mutateAsync(a);case 17:s=l.sent;if(s.data){T(false);r({action:"CONFIRM"});N.reset()}case 19:case"end":return l.stop()}}),t)})));return function e(r,n,o){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){if(C){N.setFocus("quiz_title")}}),[C]);return(0,a.Y)(b.Op,N,(0,a.Y)(Kr,{quizId:l||"",contentType:v||"tutor_quiz"},(function(t){var e=t.activeQuestionIndex,s=t.activeQuestionId,c=t.setActiveQuestionId,y=t.setValidationError;return(0,a.Y)(Ut.A,{onClose:function t(){return r({action:"CLOSE"})},icon:W?(0,a.Y)(h.A,{name:"warning",width:24,height:24}):n,title:W?Y.vN.isAboveDesktop?(0,u.__)("Unsaved Changes","tutor"):"":o,subtitle:Y.vN.isAboveSmallMobile?i:"",maxWidth:1218,headerChildren:(0,a.Y)(qr.A,{wrapperCss:Xs.tabsWrapper,activeTab:S,tabList:[{label:Y.vN.isAboveMobile?(0,u.__)("Question Details","tutor"):"",value:"details",icon:!Y.vN.isAboveMobile?(0,a.Y)(h.A,{name:"text",width:24,height:24}):null},{label:Y.vN.isAboveMobile?(0,u.__)("Settings","tutor"):"",value:"settings",icon:!Y.vN.isAboveMobile?(0,a.Y)(h.A,{name:"settings",width:24,height:24}):null}],onChange:function t(e){return q(e)}}),actions:W&&(0,a.Y)(zs.Fragment,null,(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){if(W){O(true);return}r()},ref:D},l?Y.vN.isAboveSmallMobile?(0,u.__)("Discard Changes","tutor"):(0,u.__)("Discard","tutor"):(0,u.__)("Cancel","tutor")),(0,a.Y)(A.A,{when:S==="settings"||l,fallback:(0,a.Y)(f.A,{variant:"primary",size:"small",onClick:function t(){return q("settings")}},(0,u.__)("Next","tutor"))},(0,a.Y)(f.A,{loading:L.isPending,variant:"primary",size:"small",onClick:N.handleSubmit((function(t){return U(t,e,y)}))},(0,u.__)("Save","tutor"))))},(0,a.Y)("div",{css:Xs.wrapper({activeTab:S,isH5pQuiz:v==="tutor_h5p_quiz"})},(0,a.Y)(A.A,{when:!z.isLoading,fallback:(0,a.Y)(p.p8,null)},(0,a.Y)(A.A,{when:S==="details"},(0,a.Y)("div",{css:Xs.left},(0,a.Y)(A.A,{when:S==="details"},(0,a.Y)("div",{css:Xs.quizTitleWrapper},(0,a.Y)(A.A,{when:C,fallback:(0,a.Y)("div",{role:"button",tabIndex:0,css:Xs.quizNameWithButton},(0,a.Y)("span",{css:Xs.quizTitle},N.getValues("quiz_title")),(0,a.Y)(f.A,{variant:"text",type:"button",onClick:function t(){return T(true)}},(0,a.Y)(h.A,{name:"edit",width:24,height:24})))},(0,a.Y)("div",{css:Xs.quizForm},(0,a.Y)(b.xI,{control:N.control,name:"quiz_title",rules:{required:(0,u.__)("Quiz title is required","tutor")},render:function t(e){return(0,a.Y)(ut.A,Ks({},e,{placeholder:(0,u.__)("Add quiz title","tutor")}))}}),(0,a.Y)(b.xI,{control:N.control,name:"quiz_description",render:function t(e){return(0,a.Y)(Er.A,Ks({},e,{placeholder:(0,u.__)("Add a summary","tutor"),enableResize:false,rows:2}))}}),(0,a.Y)("div",{css:Xs.quizFormButtonWrapper},(0,a.Y)(f.A,{variant:"text",type:"button",onClick:function t(){if(!N.watch("quiz_title")){r()}T(false)},size:"small"},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{loading:L.isPending,variant:"secondary",type:"submit",size:"small",onClick:function t(){if(!N.getValues("quiz_title")){N.trigger("quiz_title");return}T(false)}},(0,u.__)("Ok","tutor")))))),(0,a.Y)(ns,{isEditing:C})))),(0,a.Y)("div",{css:Xs.content({activeTab:S})},(0,a.Y)(A.A,{when:S==="settings",fallback:(0,a.Y)(wu,null)},(0,a.Y)(Ds,{contentDripType:d}))),(0,a.Y)(A.A,{when:S==="details"&&v!=="tutor_h5p_quiz"},(0,a.Y)("div",{css:Xs.right},(0,a.Y)(Xr,null))))),(0,a.Y)(Sr.A,{isOpen:x,triggerRef:D,closePopover:function t(){return O(false)},maxWidth:"258px",title:(0,u.__)("Your quiz has unsaved changes. If you cancel, you will lose your progress.","tutor"),message:(0,u.__)("Are you sure you want to continue?","tutor"),animationType:G.J6.slideUp,arrow:Y.vN.isAboveMobile?"top":"absoluteCenter",positionModifier:{top:-50,left:l?88:S==="settings"?30:26},hideArrow:true,confirmButton:{text:(0,u.__)("Yes","tutor"),variant:"primary"},cancelButton:{text:(0,u.__)("No","tutor"),variant:"text"},onConfirmation:function t(){var e;N.reset();y(null);if(!((e=z.data)!==null&&e!==void 0&&e.questions.find((function(t){return t.question_id===s})))){c("")}if(!l){r()}}}))})))};const Js=$s;var Xs={wrapper:function t(e){var r=e.activeTab,n=e.isH5pQuiz;return(0,a.AH)("width:100%;display:grid;grid-template-columns:",r==="details"?n?"513px 1fr":"352px 1fr 280px":"1fr",";height:100%;",O.EA.smallTablet,"{width:100%;grid-template-columns:1fr;height:max-content;}"+(true?"":0),true?"":0)},tabsWrapper:(0,a.AH)("height:",Y.yl.HEADER_HEIGHT,"px;",O.EA.smallMobile,"{button{min-width:auto;}}"+(true?"":0),true?"":0),left:(0,a.AH)("border-right:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0),content:function t(e){var r=e.activeTab;return(0,a.AH)(k.x.overflowYAuto,";padding:",O.YK[32]," 0 ",O.YK[48]," ",O.YK[6],";",r==="settings"&&(0,a.AH)("padding-top:",O.YK[24],";padding-inline:352px 352px;",O.EA.smallTablet,"{padding:",O.YK[16]," ",O.YK[8]," ",O.YK[24]," ",O.YK[8],";margin:0 auto;}",O.EA.smallMobile,"{padding-top:",O.YK[8],";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},right:(0,a.AH)(k.x.overflowYAuto,";",k.x.display.flex("column"),";gap:",O.YK[16],";border-left:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0),quizTitleWrapper:(0,a.AH)(I.I.caption(),";color:",O.I6.text.subdued,";padding:",O.YK[16]," ",O.YK[32]," ",O.YK[16]," ",O.YK[28],";border-bottom:1px solid ",O.I6.stroke.divider,";",O.EA.smallTablet,"{padding:",O.YK[8],";}"+(true?"":0),true?"":0),quizNameWithButton:(0,a.AH)("display:inline-flex;width:100%;transition:all 0.3s ease-in-out;button{display:none;}:hover,:focus-within{button{display:block;}}:focus-visible{outline:2px solid ",O.I6.stroke.brand,";border-radius:",O.Vq[6],";button{display:block;}}",O.EA.smallTablet,"{button{display:block;}}"+(true?"":0),true?"":0),quizTitle:(0,a.AH)("flex:1;padding:",O.YK[8]," ",O.YK[16]," ",O.YK[8]," ",O.YK[8],";background-color:",O.I6.background.white,";border-radius:",O.Vq[6],";"+(true?"":0),true?"":0),quizForm:(0,a.AH)("display:flex;flex-direction:column;gap:",O.YK[12],";"+(true?"":0),true?"":0),quizFormButtonWrapper:(0,a.AH)("display:flex;justify-content:end;margin-top:",O.YK[4],";gap:",O.YK[8],";"+(true?"":0),true?"":0)};var Zs=r(41594);function tl(t){"@babel/helpers - typeof";return tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tl(t)}function el(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ul(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function t(){};return{s:o,n:function e(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();return a=e.done,e},e:function t(e){u=!0,i=e},f:function t(){try{a||null==r["return"]||r["return"]()}finally{if(u)throw i}}}}function rl(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */rl=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,a)&&(_=x);var A=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==tl(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=k(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(tl(e)+" is not iterable")}return m.prototype=b,o(A,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(A),l(A,s,"Generator"),l(A,a,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:j(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function nl(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function ol(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){nl(i,n,o,a,u,"next",t)}function u(t){nl(i,n,o,a,u,"throw",t)}a(void 0)}))}}function il(t,e){return cl(t)||ll(t,e)||ul(t,e)||al()}function al(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ul(t,e){if(t){if("string"==typeof t)return sl(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sl(t,e):void 0}}function sl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ll(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function cl(t){if(Array.isArray(t))return t}function dl(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var fl=(0,Rt.p9)();var pl=!!Qt.P.tutor_pro_url;var hl=(0,E.GR)(Y.oW.TUTOR_GOOGLE_MEET_INTEGRATION)||(0,E.GR)(Y.oW.TUTOR_ZOOM_INTEGRATION);var vl=function t(e){var r=e.topic;var n=(0,Rt.E6)("topic-",r.id);var o=(0,w.d)(),i=o.showToast;var l=(0,x.h)(),c=l.showModal;var d=(0,b.xW)();var p=(0,s.useState)(null),v=il(p,2),y=v[0],g=v[1];var O=(0,s.useState)(false),I=il(O,2),k=I[0],S=I[1];var q=(0,s.useRef)(null);var j=(0,s.useRef)(null);var P=ze();var C=(0,m.jE)();var T=C.getQueryData(["CourseDetails",Number(fl)]);var D=N({acceptedTypes:[".csv"],onUpload:function(){var t=ol(rl().mark((function t(e){return rl().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return P.mutateAsync({topic_id:n,csv_file:e[0]});case 2:S(false);case 3:case"end":return r.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),onError:function t(e){var r=el(e),n;try{for(r.s();!(n=r.n()).done;){var o=n.value;i({message:o,type:"danger"})}}catch(t){r.e(t)}finally{r.f()}S(false)}}),L=D.fileInputRef,z=D.handleChange;return(0,a.Y)(Zs.Fragment,null,(0,a.Y)("div",{css:gl.contentButtons},(0,a.Y)("div",{css:gl.leftButtons},(0,a.Y)(f.A,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:gl.contentButton,onClick:function t(){c({component:Ir,props:{contentDripType:d.watch("contentDripType"),topicId:n,title:(0,u.__)("Lesson","tutor"),icon:(0,a.Y)(h.A,{name:"lesson",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title)}})}},(0,u.__)("Lesson","tutor")),(0,a.Y)(f.A,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:gl.contentButton,onClick:function t(){c({component:Js,props:{topicId:n,contentDripType:d.watch("contentDripType"),title:(0,u.__)("Quiz","tutor"),icon:(0,a.Y)(h.A,{name:"quiz",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title)},closeOnEscape:false})}},(0,u.__)("Quiz","tutor")),(0,a.Y)(A.A,{when:!pl,fallback:(0,a.Y)(A.A,{when:(0,E.GR)(Y.oW.H5P_INTEGRATION)},(0,a.Y)(f.A,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:gl.contentButton,onClick:function t(){c({component:Js,props:{topicId:n,contentDripType:d.watch("contentDripType"),title:(0,u.__)("Interactive Quiz","tutor"),icon:(0,a.Y)(h.A,{name:"interactiveQuiz",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title),contentType:"tutor_h5p_quiz"},closeOnEscape:false})}},(0,u.__)("Interactive Quiz","tutor")))},(0,a.Y)(_.A,null,(0,a.Y)(f.A,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"plus",width:24,height:24}),disabled:true,onClick:E.lQ},(0,u.__)("Interactive Quiz","tutor")))),(0,a.Y)(A.A,{when:!pl,fallback:(0,a.Y)(A.A,{when:(0,E.GR)(Y.oW.TUTOR_ASSIGNMENTS)},(0,a.Y)(f.A,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:gl.contentButton,onClick:function t(){c({component:ce,props:{topicId:n,contentDripType:d.watch("contentDripType"),title:(0,u.__)("Assignment","tutor"),icon:(0,a.Y)(h.A,{name:"assignment",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title)}})}},(0,u.__)("Assignment","tutor")))},(0,a.Y)(_.A,null,(0,a.Y)(f.A,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"plus",width:24,height:24}),disabled:true,onClick:E.lQ},(0,u.__)("Assignment","tutor"))))),(0,a.Y)("div",{css:gl.rightButtons},(0,a.Y)(A.A,{when:!pl||hl,fallback:(0,a.Y)(A.A,{when:pl,fallback:(0,a.Y)(_.A,null,(0,a.Y)(f.A,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"import",width:24,height:24}),disabled:true,onClick:E.lQ},(0,u.__)("Import Quiz","tutor")))},(0,a.Y)(A.A,{when:(0,E.GR)(Y.oW.QUIZ_EXPORT_IMPORT)},(0,a.Y)(f.A,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.Y)(h.A,{name:"import",width:24,height:24}),disabled:!r.isSaved,buttonCss:gl.contentButton,onClick:function t(){var e;L===null||L===void 0||(e=L.current)===null||e===void 0||e.click()}},(0,u.__)("Import Quiz","tutor"))))},(0,a.Y)(et,{isOpen:k,onClick:function t(){return S(true)},closePopover:function t(){return S(false)},disabled:!r.isSaved,dotsOrientation:"vertical",maxWidth:pl?"220px":"240px",isInverse:true,arrowPosition:"auto",hideArrow:true,closeOnEscape:false,size:Y.vN.isAboveMobile?"medium":"small"},(0,a.Y)(A.A,{when:!pl||(0,E.GR)(Y.oW.TUTOR_GOOGLE_MEET_INTEGRATION)},(0,a.Y)(et.Option,{text:(0,a.Y)("span",{ref:q,css:gl.threeDotButton},(0,u.__)("Meet live lesson","tutor"),(0,a.Y)(A.A,{when:!pl},(0,a.Y)(_.A,{size:"small",content:(0,u.__)("Pro","tutor")}))),disabled:!pl,icon:(0,a.Y)(h.A,{width:24,height:24,name:"googleMeetColorize",isColorIcon:true}),onClick:function t(){return g("tutor-google-meet")}})),(0,a.Y)(A.A,{when:!pl||(0,E.GR)(Y.oW.TUTOR_ZOOM_INTEGRATION)},(0,a.Y)(et.Option,{text:(0,a.Y)("span",{ref:j,css:gl.threeDotButton},(0,u.__)("Zoom live lesson","tutor"),(0,a.Y)(A.A,{when:!pl},(0,a.Y)(_.A,{size:"small",content:(0,u.__)("Pro","tutor")}))),disabled:!pl,icon:(0,a.Y)(h.A,{width:24,height:24,name:"zoomColorize",isColorIcon:true}),onClick:function t(){return g("tutor_zoom_meeting")}})),(0,a.Y)(A.A,{when:!pl||(0,E.GR)(Y.oW.QUIZ_EXPORT_IMPORT)},(0,a.Y)(et.Option,{text:(0,a.Y)("span",{css:gl.threeDotButton},(0,u.__)("Import Quiz","tutor"),(0,a.Y)(A.A,{when:!pl},(0,a.Y)(_.A,{size:"small",content:(0,u.__)("Pro","tutor")}))),disabled:!pl,onClick:function t(){var e;L===null||L===void 0||(e=L.current)===null||e===void 0||e.click()},icon:(0,a.Y)(h.A,{name:"importColorized",width:24,height:24,isColorIcon:true})})))))),(0,a.Y)("input",{css:gl.input,type:"file",ref:L,onChange:z,multiple:false,accept:".csv"}),(0,a.Y)(M.A,{triggerRef:q,isOpen:y==="tutor-google-meet",closePopover:E.lQ,maxWidth:"306px",closeOnEscape:false,arrow:Y.vN.isAboveMobile?"auto":"absoluteCenter",hideArrow:true},(0,a.Y)(nt.A,{topicId:n,data:null,onCancel:function t(){g(null);S(false)}})),(0,a.Y)(M.A,{triggerRef:j,isOpen:y==="tutor_zoom_meeting",closePopover:E.lQ,maxWidth:"306px",closeOnEscape:false,arrow:Y.vN.isAboveMobile?"auto":"absoluteCenter",hideArrow:true},(0,a.Y)(ot.A,{topicId:n,meetingHost:(T===null||T===void 0?void 0:T.zoom_users)||{},data:null,onCancel:function t(){g(null);S(false)}})))};const yl=vl;var gl={contentButtons:(0,a.AH)(k.x.display.flex(),";justify-content:space-between;"+(true?"":0),true?"":0),leftButtons:(0,a.AH)(k.x.display.flex(),";gap:",O.YK[12],";",O.EA.smallMobile,"{flex-wrap:wrap;}"+(true?"":0),true?"":0),rightButtons:true?{name:"s5xdrg",styles:"display:flex;align-items:center"}:0,threeDotButton:(0,a.AH)("display:flex;align-items:center;gap:",O.YK[4],";"+(true?"":0),true?"":0),contentButton:(0,a.AH)(":hover:not(:disabled){background-color:",O.I6.background.white,";color:",O.I6.text.brand,";outline:1px solid ",O.I6.stroke.brand,";}"+(true?"":0),true?"":0),input:true?{name:"14y6t8x",styles:"display:none!important"}:0};function ml(t,e){return Al(t)||xl(t,e)||_l(t,e)||bl()}function bl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _l(t,e){if(t){if("string"==typeof t)return wl(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wl(t,e):void 0}}function wl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function xl(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Al(t){if(Array.isArray(t))return t}var Yl=function t(e){var r,n;var o=e.ref,i=e.isOpen,a=e.heightCalculator,u=a===void 0?"scroll":a;var l=(0,s.useState)(u==="scroll"?(r=o.current)===null||r===void 0?void 0:r.scrollHeight:(n=o.current)===null||n===void 0?void 0:n.clientHeight),c=ml(l,2),d=c[0],f=c[1];(0,s.useEffect)((function(){if(o.current){var t=u==="scroll"?o.current.scrollHeight:o.current.clientHeight;f(t)}}),[o.current,u]);var p=(0,g.zh)({height:i?d:0,opacity:i?1:0,overflow:"hidden",config:{duration:300,easing:function t(e){return e*(2-e)}}});return p};var Ol=r(41594);function Il(t){"@babel/helpers - typeof";return Il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il(t)}function kl(){return kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kl.apply(null,arguments)}function El(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */El=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,a)&&(_=x);var A=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==Il(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=k(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Il(e)+" is not iterable")}return m.prototype=b,o(A,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(A),l(A,s,"Generator"),l(A,a,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:j(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function Sl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ql(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sl(Object(r),!0).forEach((function(e){jl(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jl(t,e,r){return(e=Pl(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pl(t){var e=Cl(t,"string");return"symbol"==Il(e)?e:e+""}function Cl(t,e){if("object"!=Il(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Il(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Tl(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Dl(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Tl(i,n,o,a,u,"next",t)}function u(t){Tl(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Ll(t,e){return Wl(t)||Nl(t,e)||Hl(t,e)||zl()}function zl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hl(t,e){if(t){if("string"==typeof t)return Kl(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kl(t,e):void 0}}function Kl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Nl(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Wl(t){if(Array.isArray(t))return t}function Ul(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Bl=(0,Rt.p9)();var Fl=!!Qt.P.tutor_pro_url;var Ml=function t(e){var r=e.topic,n=e.isEdit,o=e.listeners,i=e.isDragging,l=e.onCollapse,c=e.onEdit,d=e.onCopy,v=e.onDelete,y=e.setIsEdit;var m=(0,Rt.E6)("topic-",r.id);var w=(0,Gt.p)({defaultValues:{title:r.title,summary:r.summary},shouldFocusError:true});var x=(0,s.useState)(false),Y=Ll(x,2),O=Y[0],I=Y[1];var S=(0,s.useRef)(null);var q=(0,s.useRef)(null);var j=(0,Mt.V1)();var P=(0,Mt.V_)();var C=(0,Mt.$n)(Bl);var T=Yl({ref:S,isOpen:!r.isCollapsed,heightCalculator:"client"});var D=function(){var t=Dl(El().mark((function t(e){var n;return El().wrap((function t(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return j.mutateAsync(ql(ql({},r.isSaved&&{topic_id:m}),{},{course_id:Bl,title:e.title,summary:e.summary}));case 2:n=o.sent;if(n.data){y(false)}if(n.status_code===201){c===null||c===void 0||c("topic-".concat(n.data))}case 5:case"end":return o.stop()}}),t)})));return function e(r){return t.apply(this,arguments)}}();var L=function(){var t=Dl(El().mark((function t(){var e;return El().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return P.mutateAsync({course_id:Bl,content_id:m,content_type:"topic"});case 2:e=r.sent;if(e.data){d===null||d===void 0||d("topic-".concat(e.data))}case 4:case"end":return r.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){if(n){w.setFocus("title")}}),[n]);return(0,a.Y)(Ol.Fragment,null,(0,a.Y)("div",{css:$l.header({isCollapsed:r.isCollapsed,isEdit:n,isDeletePopoverOpen:O,isDragging:i})},(0,a.Y)("div",{css:$l.headerContent({isSaved:r.isSaved})},(0,a.Y)("div",{css:$l.grabberInput,onClick:function t(){return l(r.id)},onKeyDown:function t(e){if(e.key==="Enter"){l(r.id)}}},(0,a.Y)("button",kl({},r.isSaved?o:{},{css:$l.grabButton({isDragging:i}),type:"button",disabled:!r.isSaved}),(0,a.Y)(h.A,{name:"dragVertical",width:24,height:24})),(0,a.Y)(A.A,{when:n,fallback:(0,a.Y)("div",{css:$l.title({isEdit:n}),onDoubleClick:function t(){return y(true)}},w.watch("title"))},(0,a.Y)("div",{css:$l.title({isEdit:n})},(0,a.Y)(b.xI,{control:w.control,name:"title",rules:{required:(0,u.__)("Title is required","tutor")},render:function t(e){return(0,a.Y)(ut.A,kl({},e,{placeholder:(0,u.__)("Add a title","tutor"),isSecondary:true}))}})))),(0,a.Y)("div",{css:$l.actions,"data-visually-hidden":true},(0,a.Y)(A.A,{when:!n},(0,a.Y)(fe.A,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:k.x.actionButton,disabled:!r.isSaved,onClick:function t(){y(true);if(r.isCollapsed){l===null||l===void 0||l(r.id)}}},(0,a.Y)(h.A,{name:"edit",width:24,height:24})))),(0,a.Y)(A.A,{when:r.isSaved},(0,a.Y)(A.A,{when:!P.isPending,fallback:(0,a.Y)(p.Ay,{size:24})},(0,a.Y)(fe.A,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.Y)(A.A,{when:!Fl,fallback:(0,a.Y)("button",{type:"button",css:k.x.actionButton,disabled:!r.isSaved,onClick:L},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))},(0,a.Y)(_.A,{size:"tiny"},(0,a.Y)("button",{type:"button",css:k.x.actionButton,disabled:true,onClick:E.lQ},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))))))),(0,a.Y)(A.A,{when:r.isSaved},(0,a.Y)(fe.A,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.Y)("button",{type:"button",css:k.x.actionButton,disabled:!r.isSaved,"data-visually-hidden":true,ref:q,onClick:function t(){I(true)}},(0,a.Y)(h.A,{name:"delete",width:24,height:24})))),(0,a.Y)(A.A,{when:r.isSaved},(0,a.Y)("button",{type:"button",css:k.x.actionButton,disabled:!r.isSaved,onClick:function t(){l===null||l===void 0||l(r.id)},"data-toggle-collapse":true},(0,a.Y)(h.A,{name:"chevronDown",width:24,height:24}))))),(0,a.Y)(A.A,{when:n,fallback:(0,a.Y)(A.A,{when:r.summary.length>0},(0,a.Y)(g.CS.div,{style:ql({},T)},(0,a.Y)("div",{css:$l.description({isEdit:n}),ref:S,onDoubleClick:function t(){return y(true)}},w.watch("summary"))))},(0,a.Y)("div",{css:$l.description({isEdit:n})},(0,a.Y)(b.xI,{control:w.control,name:"summary",render:function t(e){return(0,a.Y)(Er.A,kl({},e,{placeholder:(0,u.__)("Add a summary","tutor"),isSecondary:true,rows:2,enableResize:true}))}}))),(0,a.Y)(A.A,{when:n},(0,a.Y)("div",{css:$l.footer},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){if(!w.formState.isValid&&!r.isSaved){v===null||v===void 0||v()}w.reset();y(false)}},(0,u.__)("Cancel","tutor")),(0,a.Y)(f.A,{loading:j.isPending,variant:"secondary",size:"small",onClick:w.handleSubmit(D)},(0,u.__)("Ok","tutor"))))),(0,a.Y)(Sr.A,{isOpen:O,triggerRef:q,isLoading:C.isPending,closePopover:E.lQ,maxWidth:"258px",title:(0,u.sprintf)((0,u.__)('Delete topic "%s"',"tutor"),r.title),message:(0,u.__)("Are you sure you want to delete this content from your course? This cannot be undone.","tutor"),animationType:G.J6.slideUp,arrow:"auto",hideArrow:true,confirmButton:{text:(0,u.__)("Delete","tutor"),variant:"text",isDelete:true},cancelButton:{text:(0,u.__)("Cancel","tutor"),variant:"text"},onConfirmation:Dl(El().mark((function t(){return El().wrap((function t(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return C.mutateAsync(m);case 2:I(false);v===null||v===void 0||v();case 4:case"end":return e.stop()}}),t)}))),onCancel:function t(){return I(false)}}))};const Rl=Ml;var Ql=true?{name:"jjyo93",styles:"padding-right:0"}:0;var Gl=true?{name:"18g08sj",styles:"padding-bottom:0"}:0;var Vl=true?{name:"21xn5r",styles:"transform:rotate(180deg)"}:0;var $l={header:function t(e){var r=e.isCollapsed,n=e.isEdit,o=e.isDeletePopoverOpen,i=e.isDragging;return(0,a.AH)("padding:",O.YK[12]," ",O.YK[16],";",k.x.display.flex("column"),";[data-toggle-collapse]{transition:transform 0.3s ease-in-out;",!r&&Vl,";}",!r&&(0,a.AH)("border-bottom:1px solid ",O.I6.stroke.divider,";"+(true?"":0),true?"":0)," ",!n&&Gl," ",!n&&!o&&(0,a.AH)("[data-visually-hidden]{opacity:0;transition:",!i?"opacity 0.3s ease-in-out":"none",";}:hover,:focus-within{[data-visually-hidden]{opacity:",i?0:1,";}}"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-visually-hidden]{opacity:1;}}"+(true?"":0),true?"":0)},headerContent:function t(e){var r=e.isSaved,n=r===void 0?true:r;return(0,a.AH)("display:grid;grid-template-columns:",n?"1fr auto":"1fr",";gap:",O.YK[12],";width:100%;padding-bottom:",O.YK[12],";"+(true?"":0),true?"":0)},grabberInput:(0,a.AH)(k.x.display.flex(),";align-items:center;gap:",O.YK[8],";svg{color:",O.I6.color.black[40],";flex-shrink:0;}"+(true?"":0),true?"":0),grabButton:function t(e){var r=e.isDragging,n=r===void 0?false:r;return(0,a.AH)(k.x.resetButton,";",k.x.flexCenter(),";cursor:",n?"grabbing":"grab",";:disabled{cursor:not-allowed;}&:focus,&:active,&:hover{background:none;}&:focus-visible{outline:2px solid ",O.I6.stroke.brand,";outline-offset:1px;border-radius:",O.Vq[2],";}"+(true?"":0),true?"":0)},title:function t(e){var r=e.isEdit;return(0,a.AH)(I.I.body(),";color:",O.I6.text.hints,";width:100%;",!r&&(0,a.AH)(k.x.text.ellipsis(1),";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},description:function t(e){var r=e.isEdit;return(0,a.AH)(I.I.caption(),";color:",O.I6.text.hints,";padding-inline:",O.YK[8],";margin-left:",O.YK[24],";padding-bottom:",O.YK[12],";",!r&&(0,a.AH)(k.x.text.ellipsis(2),";"+(true?"":0),true?"":0)," ",r&&Ql,";"+(true?"":0),true?"":0)},footer:(0,a.AH)("width:100%;text-align:right;",k.x.display.flex(),";gap:",O.YK[8],";justify-content:end;"+(true?"":0),true?"":0),actions:(0,a.AH)(k.x.display.flex(),";align-items:start;gap:",O.YK[8],";justify-content:end;"+(true?"":0),true?"":0)};var Jl=r(41594);function Xl(t){"@babel/helpers - typeof";return Xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xl(t)}function Zl(){return Zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zl.apply(null,arguments)}function tc(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */tc=function t(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),u=new q(n||[]);return o(a,"_invoke",{value:I(t,r,u)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==r&&n.call(x,a)&&(_=x);var A=b.prototype=g.prototype=Object.create(_);function Y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,u){var s=d(t[o],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==Xl(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function t(n,o){function a(){return new e((function(t,e){r(n,o,t,e)}))}return i=i?i.then(a,a):a()}})}function I(e,r,n){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=k(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Xl(e)+" is not iterable")}return m.prototype=b,o(A,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},Y(O.prototype),l(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Y(A),l(A,s,"Generator"),l(A,a,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,q.prototype={constructor:q,reset:function e(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!r)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var o=this;function i(e,n){return s.type="throw",s.arg=r,o.next=e,n&&(o.method="next",o.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var l=n.call(u,"catchLoc"),c=n.call(u,"finallyLoc");if(l&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;S(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function e(r,n,o){return this.delegate={iterator:j(r),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function ec(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function rc(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ec(i,n,o,a,u,"next",t)}function u(t){ec(i,n,o,a,u,"throw",t)}a(void 0)}))}}function nc(t,e){return sc(t)||uc(t,e)||ic(t,e)||oc()}function oc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ic(t,e){if(t){if("string"==typeof t)return ac(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ac(t,e):void 0}}function ac(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function uc(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function sc(t){if(Array.isArray(t))return t}function lc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function cc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lc(Object(r),!0).forEach((function(e){dc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function dc(t,e,r){return(e=fc(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fc(t){var e=pc(t,"string");return"symbol"==Xl(e)?e:e+""}function pc(t,e){if("object"!=Xl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function hc(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var vc={lesson:{name:"lesson",color:O.I6.icon["default"]},tutor_quiz:{name:"quiz",color:O.I6.design.warning},tutor_assignments:{name:"assignment",color:O.I6.icon.processing},tutor_zoom_meeting:{name:"zoomColorize",color:""},"tutor-google-meet":{name:"googleMeetColorize",color:""},tutor_h5p_quiz:{name:"interactiveQuiz",color:"#C984FE"}};var yc={tutor_assignments:(0,u.__)("Are you sure you want to delete this assignment? All existing assignment submissions will be permanently deleted.","tutor"),tutor_quiz:(0,u.__)("Are you sure you want to delete this quiz? All existing quiz attempts will be permanently deleted.","tutor"),tutor_h5p_quiz:(0,u.__)("Are you sure you want to delete this interactive quiz? All existing quiz attempts will be permanently deleted.","tutor")};var gc={lesson:Ir,tutor_quiz:Js,tutor_assignments:ce,tutor_h5p_quiz:Js};var mc={lesson:(0,u.__)("Lesson","tutor"),tutor_quiz:(0,u.__)("Quiz","tutor"),tutor_assignments:(0,u.__)("Assignment","tutor"),tutor_h5p_quiz:(0,u.__)("Interactive Quiz","tutor")};var bc={lesson:"lesson",tutor_quiz:"quiz",tutor_assignments:"assignment",tutor_h5p_quiz:"interactiveQuiz"};var _c=function t(e){return(0,i.uU)(cc(cc({},e),{},{wasDragging:true}))};var wc=!!Qt.P.tutor_pro_url;var xc=(0,Rt.p9)();var Ac=function t(e){var r=e.type,n=e.topic,o=e.content,l=e.onCopy,c=e.onDelete,d=e.isOverlay,f=d===void 0?false:d;var v=(0,Rt.E6)("topic-",n.id);var g=(0,Rt.E6)("content-",o.id);var w=(0,m.jE)();var I=w.getQueryData(["CourseDetails",Number(xc)]);var S=(0,b.xW)();var q=(0,s.useState)(null),j=nc(q,2),P=j[0],C=j[1];var T=(0,s.useState)(false),D=nc(T,2),L=D[0],z=D[1];var H=(0,s.useRef)(null);var K=(0,s.useRef)(null);var N=vc[r];var W=(0,i.gl)({id:o.id,data:{type:"content"},animateLayoutChanges:_c}),U=W.attributes,B=W.listeners,F=W.setNodeRef,R=W.transform,Q=W.transition,V=W.isDragging;var $={transform:y.Ks.Transform.toString(R),transition:Q,opacity:V?.3:undefined,background:V?O.I6.stroke.hover:undefined};var J=(0,x.h)(),X=J.showModal;var Z=(0,Mt.V_)();var tt=(0,Mt.VT)();var et=$e();var rt=(0,Mt.VT)();var it=(0,Mt.VT)();var at=Ke();var ut=function t(){var e=r;if(gc[e]){X({component:gc[e],props:cc({contentDripType:S.watch("contentDripType"),topicId:v,lessonId:g,assignmentId:g,quizId:g,title:mc[e],subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),n.title),icon:(0,a.Y)(h.A,{name:bc[e],height:24,width:24})},r==="tutor_h5p_quiz"&&{contentType:"tutor_h5p_quiz"}),closeOnEscape:!["tutor_quiz","tutor_h5p_quiz"].includes(r)})}if(r==="tutor_zoom_meeting"){C("tutor_zoom_meeting")}if(r==="tutor-google-meet"){C("tutor-google-meet")}};var st=function(){var t=rc(tc().mark((function t(){return tc().wrap((function t(e){while(1)switch(e.prev=e.next){case 0:if(!["lesson","tutor_assignments"].includes(r)){e.next=5;break}e.next=3;return tt.mutateAsync(g);case 3:e.next=18;break;case 5:if(!["tutor_quiz","tutor_h5p_quiz"].includes(r)){e.next=10;break}e.next=8;return et.mutateAsync(g);case 8:e.next=18;break;case 10:if(!(r==="tutor-google-meet")){e.next=15;break}e.next=13;return rt.mutateAsync(g);case 13:e.next=18;break;case 15:if(!(r==="tutor_zoom_meeting")){e.next=18;break}e.next=18;return it.mutateAsync(g);case 18:z(false);c===null||c===void 0||c();case 20:case"end":return e.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();var lt=function t(){var e={lesson:"lesson",tutor_assignments:"assignment",tutor_quiz:"quiz",tutor_h5p_quiz:"quiz"};Z.mutateAsync({course_id:xc,content_id:g,content_type:e[r]});l===null||l===void 0||l()};return(0,a.Y)(Jl.Fragment,null,(0,a.Y)("div",Zl({},U,{css:Ic.wrapper({isDragging:V,isOverlay:f,isActive:P===r||L||Z.isPending}),ref:F,style:$}),(0,a.Y)("div",Zl({css:Ic.iconAndTitle({isDragging:f})},B),(0,a.Y)("div",{"data-content-icon":true},(0,a.Y)(h.A,{name:N.name,width:24,height:24,style:(0,a.AH)("color:",N.color,";"+(true?"":0),true?"":0)})),(0,a.Y)("div",{"data-bar-icon":true},(0,a.Y)(h.A,{name:"bars",width:24,height:24})),(0,a.Y)("p",{css:Ic.title,onClick:ut,onKeyDown:E.lQ},(0,a.Y)("span",{dangerouslySetInnerHTML:{__html:o.title}}),(0,a.Y)(A.A,{when:(r==="tutor_quiz"||r==="tutor_h5p_quiz")&&!!o.total_question},(0,a.Y)("span",{"data-question-count":true},"(",(0,u.sprintf)((0,u.__)("%s Questions","tutor"),o.total_question),")")))),(0,a.Y)("div",{css:Ic.actions,"data-actions":true},(0,a.Y)(A.A,{when:r==="tutor_quiz"},(0,a.Y)(fe.A,{content:(0,u.__)("Export Quiz","tutor"),delay:200},(0,a.Y)(A.A,{when:!wc,fallback:(0,a.Y)(A.A,{when:(0,E.GR)(Y.oW.QUIZ_EXPORT_IMPORT)},(0,a.Y)("button",{type:"button",css:k.x.actionButton,onClick:function t(){at.mutate(g)}},(0,a.Y)(h.A,{name:"export",width:24,height:24})))},(0,a.Y)(_.A,{size:"tiny"},(0,a.Y)("button",{type:"button",css:k.x.actionButton,disabled:true,onClick:E.lQ},(0,a.Y)(h.A,{name:"export",width:24,height:24})))))),(0,a.Y)(fe.A,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.Y)("button",{ref:H,type:"button",css:k.x.actionButton,onClick:ut},(0,a.Y)(h.A,{name:"edit",width:24,height:24}))),(0,a.Y)(A.A,{when:!["tutor_zoom_meeting","tutor_zoom_meeting"].includes(r)},(0,a.Y)(A.A,{when:!Z.isPending,fallback:(0,a.Y)(p.Ay,{size:24})},(0,a.Y)(fe.A,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.Y)(A.A,{when:!wc,fallback:(0,a.Y)("button",{type:"button",css:k.x.actionButton,onClick:lt},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))},(0,a.Y)(_.A,{size:"tiny"},(0,a.Y)("button",{disabled:true,type:"button",css:k.x.actionButton,onClick:E.lQ},(0,a.Y)(h.A,{name:"copyPaste",width:24,height:24}))))))),(0,a.Y)(fe.A,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.Y)("button",{ref:K,type:"button",css:k.x.actionButton,onClick:function t(){z(true)}},(0,a.Y)(h.A,{name:"delete",width:24,height:24}))))),(0,a.Y)(M.A,{triggerRef:H,isOpen:P!==null,closePopover:E.lQ,maxWidth:"306px",closeOnEscape:false,arrow:Y.vN.isAboveMobile?"auto":"absoluteCenter",hideArrow:true},(0,a.Y)(A.A,{when:P==="tutor_zoom_meeting"},(0,a.Y)(ot.A,{data:null,topicId:v,meetingHost:(I===null||I===void 0?void 0:I.zoom_users)||{},onCancel:function t(){return C(null)},meetingId:g})),(0,a.Y)(A.A,{when:P==="tutor-google-meet"},(0,a.Y)(nt.A,{data:null,topicId:v,onCancel:function t(){return C(null)},meetingId:g}))),(0,a.Y)(Sr.A,{isOpen:L,isLoading:tt.isPending||et.isPending||rt.isPending||it.isPending,triggerRef:K,closePopover:E.lQ,maxWidth:"258px",title:(0,u.sprintf)((0,u.__)('Delete "%s"',"tutor"),o.title),message:yc[r]||(0,u.__)("Are you sure you want to delete this content from your course? This cannot be undone.","tutor"),animationType:G.J6.slideUp,arrow:"auto",hideArrow:true,confirmButton:{text:(0,u.__)("Delete","tutor"),variant:"text",isDelete:true},cancelButton:{text:(0,u.__)("Cancel","tutor"),variant:"text"},onConfirmation:st,onCancel:function t(){return z(false)}}))};const Yc=Ac;var Oc=true?{name:"1jfpmb0",styles:"[data-content-icon]{display:none;}[data-bar-icon]{display:block;}cursor:grabbing"}:0;var Ic={wrapper:function t(e){var r=e.isDragging,n=r===void 0?false:r,o=e.isOverlay,i=o===void 0?false:o,u=e.isActive,s=u===void 0?false:u;return(0,a.AH)("width:100%;padding:",O.YK[10]," ",O.YK[8],";border:1px solid transparent;border-radius:",O.Vq[6],";display:flex;justify-content:space-between;align-items:center;[data-content-icon],[data-bar-icon]{display:flex;height:24px;}:hover,:focus-within{border-color:",O.I6.stroke.border,";background-color:",O.I6.background.white,";[data-content-icon]{display:none;}[data-bar-icon]{display:block;}[data-actions]{opacity:",n?0:1,";}}",s&&(0,a.AH)("border-color:",O.I6.stroke.border,";background-color:",O.I6.background.white,";[data-content-icon]{display:flex;}[data-bar-icon]{display:none;}[data-actions]{opacity:1;}"+(true?"":0),true?"":0)," ",i&&(0,a.AH)("box-shadow:",O.r7.drag,";border-color:",O.I6.stroke.border,";background-color:",O.I6.background.white,";[data-actions]{opacity:1;}"+(true?"":0),true?"":0)," ",O.EA.smallTablet,"{[data-actions]{opacity:1;}}"+(true?"":0),true?"":0)},title:(0,a.AH)(I.I.caption(),";color:",O.I6.text.title,";display:flex;align-items:center;gap:",O.YK[4],";cursor:pointer;span{&:first-of-type{",k.x.text.ellipsis(2),";}}[data-question-count]{color:",O.I6.text.hints,";}"+(true?"":0),true?"":0),iconAndTitle:function t(e){var r=e.isDragging,n=r===void 0?false:r;return(0,a.AH)("display:flex;align-items:center;gap:",O.YK[8],";cursor:grab;flex-grow:1;[data-bar-icon]{display:none;}",n&&Oc,";"+(true?"":0),true?"":0)},actions:(0,a.AH)("display:flex;opacity:0;align-items:start;gap:",O.YK[8],";justify-content:end;"+(true?"":0),true?"":0)};function kc(t){"@babel/helpers - typeof";return kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kc(t)}function Ec(){return Ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ec.apply(null,arguments)}function Sc(t,e){return Tc(t)||Cc(t,e)||jc(t,e)||qc()}function qc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jc(t,e){if(t){if("string"==typeof t)return Pc(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pc(t,e):void 0}}function Pc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Cc(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function Tc(t){if(Array.isArray(t))return t}function Dc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dc(Object(r),!0).forEach((function(e){zc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function zc(t,e,r){return(e=Hc(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hc(t){var e=Kc(t,"string");return"symbol"==kc(e)?e:e+""}function Kc(t,e){if("object"!=kc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Nc=function t(e){return(0,i.uU)(Lc(Lc({},e),{},{wasDragging:true}))};var Wc=function t(e){var r;var n=e.topic,o=e.onDelete,u=e.onCopy,l=e.onCollapse,c=e.onEdit,d=e.isOverlay,f=d===void 0?false:d;var p=(0,s.useState)(false),h=Sc(p,2),v=h[0],m=h[1];var b=(0,s.useState)(!n.isSaved),_=Sc(b,2),w=_[0],x=_[1];var Y=(0,s.useRef)(null);var I=(0,s.useRef)(null);var k=(0,g.zh)({height:!n.isCollapsed?(r=Y.current)===null||r===void 0?void 0:r.scrollHeight:0,opacity:!n.isCollapsed?1:0,overflow:"hidden",config:{duration:300,easing:function t(e){return e*(2-e)}}},[n.contents.length]),S=Sc(k,2),q=S[0],j=S[1];(0,s.useEffect)((function(){var t=function t(e){if((0,jn.O9)(I.current)&&!I.current.contains(e.target)){m(false)}};document.addEventListener("click",t);return function(){return document.removeEventListener("click",t)}}),[w]);var P=(0,i.gl)({id:n.id,data:{type:"topic"},animateLayoutChanges:Nc}),C=P.attributes,T=P.listeners,D=P.setNodeRef,L=P.transform,z=P.transition,H=P.isDragging;var K=(0,s.useCallback)((function(t){if(t){D(t);I.current=t}}),[D]);var N={transform:y.Ks.Transform.toString(L),transition:z,opacity:H?.3:undefined,background:H?O.I6.stroke.hover:undefined};(0,s.useEffect)((function(){if((0,jn.O9)(Y.current)){j.start({height:!n.isCollapsed?Y.current.scrollHeight:0,opacity:!n.isCollapsed?1:0})}}),[n.isCollapsed,n.contents.length]);return(0,a.Y)("div",Ec({},n.isSaved?C:{},{css:Bc.wrapper({isActive:v||w,isOverlay:f}),onClick:function t(){return m(true)},onKeyDown:E.lQ,tabIndex:-1,ref:K,style:N}),(0,a.Y)(Rl,{isActive:v,isDragging:H,isEdit:w,listeners:T,onCollapse:function t(e){l===null||l===void 0||l(e)},onDelete:o,onEdit:function t(e){c===null||c===void 0||c(e)},onCopy:function t(e){u===null||u===void 0||u(e)},topic:n,setIsEdit:x}),(0,a.Y)(g.CS.div,{style:Lc({},q)},(0,a.Y)("div",{css:Bc.content,ref:Y},(0,a.Y)(A.A,{when:n.contents.length>0},(0,a.Y)(i.gB,{items:n.contents.map((function(t){return Lc(Lc({},t),{},{id:t.ID})})),strategy:i._G},(0,a.Y)("div",null,(0,a.Y)(ct.A,{each:n.contents},(function(t){return(0,a.Y)(Yc,{key:t.ID,type:t.post_type,topic:n,content:{id:t.ID,title:t.post_title,total_question:t.total_question||0}})}))))),(0,a.Y)(yl,{topic:n}))))};const Uc=Wc;var Bc={wrapper:function t(e){var r=e.isActive,n=r===void 0?false:r,o=e.isOverlay,i=o===void 0?false:o;return(0,a.AH)("border:1px solid ",O.I6.stroke["default"],";border-radius:",O.Vq[8],";transition:background-color 0.3s ease-in-out,border-color 0.3s ease-in-out;background-color:",O.I6.bg.white,";width:100%;",n&&(0,a.AH)("border-color:",O.I6.stroke.brand,";background-color:",O.I6.background.hover,";"+(true?"":0),true?"":0)," :hover{background-color:",O.I6.background.hover,";}",i&&(0,a.AH)("box-shadow:",O.r7.drag,";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},content:(0,a.AH)("padding:",O.YK[16],";",k.x.display.flex("column"),";gap:",O.YK[12],";"+(true?"":0),true?"":0)};var Fc=function t(e){var r=e.title;return(0,a.Y)("div",{css:Rc.wrapper},(0,a.Y)(h.A,{name:"dragVertical",width:24,height:24}),(0,a.Y)("span",null,r))};const Mc=Fc;var Rc={wrapper:(0,a.AH)("display:flex;align-items:center;gap:",O.YK[8],";border:1px solid ",O.I6.stroke["default"],";border-radius:",O.Vq[8],";background-color:",O.I6.background.hover,";padding:",O.YK[12]," ",O.YK[16],";box-shadow:",O.r7.drag,";",I.I.body(),";color:",O.I6.text.hints,";cursor:grabbing;svg{color:",O.I6.color.black[40],";flex-shrink:0;}"+(true?"":0),true?"":0)};var Qc=r(87152);var Gc=r(55699);var Vc=r(15730);const $c=r.p+"images/7a3f20a77fdf442a94bc38151eadcfcd-curriculum-empty-state-2x.webp";const Jc=r.p+"images/986ea3637213dd5da688bb6f1e1319a6-curriculum-empty-state.webp";function Xc(t){"@babel/helpers - typeof";return Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xc(t)}function Zc(t){return rd(t)||ed(t)||cd(t)||td()}function td(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ed(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function rd(t){if(Array.isArray(t))return dd(t)}function nd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function od(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nd(Object(r),!0).forEach((function(e){id(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function id(t,e,r){return(e=ad(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ad(t){var e=ud(t,"string");return"symbol"==Xc(e)?e:e+""}function ud(t,e){if("object"!=Xc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function sd(t,e){return pd(t)||fd(t,e)||cd(t,e)||ld()}function ld(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cd(t,e){if(t){if("string"==typeof t)return dd(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dd(t,e):void 0}}function dd(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function fd(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(l)throw o}}return u}}function pd(t){if(Array.isArray(t))return t}var hd=(0,Rt.p9)();var vd=function t(){var e=(0,d.Zp)();(0,s.useEffect)((function(){if(!hd){e(Vc.P.Home.buildLink(),{replace:true})}}),[e]);var r=(0,s.useState)(true),l=sd(r,2),y=l[0],g=l[1];var m=(0,s.useState)(null),b=sd(m,2),_=b[0],w=b[1];var x=(0,s.useState)([]),Y=sd(x,2),O=Y[0],I=Y[1];var k=(0,s.useRef)([]);var S=(0,Mt.me)(hd);var q=(0,Mt.Id)();(0,s.useEffect)((function(){if(O.length===0){return}I((function(t){if(y){k.current=[]}if(!y){k.current=t.reduce((function(t,e){if(e.isSaved){t.push(e.id)}return t}),[])}return t.map((function(t){if(!t.isSaved){return t}return od(od({},t),{},{isCollapsed:y})}))}))}),[y]);(0,s.useEffect)((function(){var t;if(!((t=S.data)!==null&&t!==void 0&&t.length)){return}var e=function t(e){return S.data.map((function(t,r){var n="topic-".concat(t.id);var o=r===0;var i=k.current.includes(n);var a=e.length?!i:!o;if(o&&!e.length){k.current=[n]}return od(od({},t),{},{id:n,isCollapsed:a,isSaved:true,contents:t.contents.map((function(t){return od(od({},t),{},{ID:"content-".concat(t.ID)})}))})}))};I(e)}),[S.data]);var j=(0,s.useMemo)((function(){if(!_){return null}var t=_.toString().includes("topic")?"topic":"content";var e=O.flatMap((function(t){return t.contents}));var r=t==="topic"?O.find((function(t){return t.id===_})):e.find((function(t){return t.ID===_}));return r}),[_,O]);var P=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:10}}),(0,n.MS)(n.uN,{coordinateGetter:i.JR}));if(!hd){return null}if(S.isLoading){return(0,a.Y)(p.p8,null)}var C=function t(e,r){if(r==="topic"){return O.find((function(t){return t.id===e}))}if(r==="content"){return O.find((function(t){return t.contents.find((function(t){return t.ID===e}))}))}};var T=function t(e){var r=e.active,n=e.over;if(!n||!r){return}if(r.id.toString().includes("content")&&n.id.toString().includes("content")&&r.id!==n.id){var o=C(r.id,"content");var i=C(n.id,"content");if(!o||!i)return;var a=O.findIndex((function(t){return t.id===o.id}));var u=O.findIndex((function(t){return t.id===i.id}));if(i.isCollapsed||a===u){return}var s=o.contents.findIndex((function(t){return t.ID===r.id}));var l=i.contents.findIndex((function(t){return t.ID===n.id}));var c=Zc(O);var d=c[a].contents.splice(s,1),f=sd(d,1),p=f[0];c[u].contents.splice(l,0,p);I(c)}if(r.id.toString().includes("content")&&n!==null&&n!==void 0&&n.id.toString().includes("topic")&&r.id!==n.id){var h=C(r.id,"content");var v=C(n.id,"topic");if(!h||!v||v.contents.length>0||v.isCollapsed){return}var y=O.findIndex((function(t){return t.id===h.id}));var g=O.findIndex((function(t){return t.id===v.id}));if(y===g){return}var m=h.contents.findIndex((function(t){return t.ID===r.id}));var b=Zc(O);var _=b[y].contents.splice(m,1),w=sd(_,1),x=w[0];b[g].contents.push(x);I(b)}};var D=function t(e){var r;var n=e.active,o=e.over;if(!o){w(null);return}var i=Zc(O);if(n.id.toString().includes("topic")&&o!==null&&o!==void 0&&o.id.toString().includes("topic")&&n&&n.id!==o.id){var a=O.findIndex((function(t){return t.id===n.id}));var u=O.findIndex((function(t){return t.id===o.id}));i=(0,E.tw)(i,a,u);I(i)}if(n.id.toString().includes("content")&&o!==null&&o!==void 0&&o.id.toString().includes("content")&&n&&n.id!==o.id){var s=C(n.id,"content");var l=C(o.id,"content");if(!s||!l||l.isCollapsed){return}var c=O.findIndex((function(t){return t.id===s.id}));var d=O.findIndex((function(t){return t.id===l.id}));var f=s.contents.findIndex((function(t){return t.ID===n.id}));var p=l.contents.findIndex((function(t){return t.ID===o.id}));if(c===d){i[c].contents=(0,E.tw)(i[c].contents,f,p);I(i)}else{var h=i[c].contents.splice(f,1),v=sd(h,1),y=v[0];i[d].contents.splice(p,0,y);I(i)}}if(n.id.toString().includes("content")&&o.id.toString().includes("topic")&&n&&n.id!==o.id){var g=C(n.id,"content");var m=C(o.id,"topic");if(!g||!m||m.isCollapsed){return}var b=O.findIndex((function(t){return t.id===g.id}));var _=O.findIndex((function(t){return t.id===m.id}));var x=g.contents.findIndex((function(t){return t.ID===n.id}));var A=i[b].contents.splice(x,1),Y=sd(A,1),k=Y[0];i[_].contents.push(k);I(i)}var j=i.reduce((function(t,e,r){var n=0;t[r]={topic_id:(0,Rt.E6)("topic-",e.id),lesson_ids:e.contents.reduce((function(t,e){t[n]=(0,Rt.E6)("content-",e.ID);n++;return t}),{})};return t}),{});q.mutate(od({tutor_topics_lessons_sorting:j},n.id.toString().includes("content")&&{"content_parent[parent_topic_id]":(r=S.data)===null||r===void 0||(r=r.find((function(t){return t.contents.find((function(t){return String(t.ID)===(0,Rt.E6)("content-",o.id)}))})))===null||r===void 0?void 0:r.id,"content_parent[content_id]":(0,Rt.E6)("content-",n.id)}));w(null)};var L=function t(e,r){I((function(t){return t.filter((function(t,r){return r!==e}))}));k.current=k.current.filter((function(t){return t!==r}))};var z=function t(e){I((function(t){return t.map((function(t){if(t.id===e){return od(od({},t),{},{isCollapsed:!t.isCollapsed})}return t}))}));if(!k.current.includes(e)){k.current=[].concat(Zc(k.current),[e])}else{k.current=k.current.filter((function(t){return t!==e}))}};return(0,a.Y)("div",{css:gd.container},(0,a.Y)("div",{css:gd.wrapper},(0,a.Y)(Qc.A,{title:(0,u.__)("Curriculum","tutor"),backUrl:"/basics",rightButton:(0,a.Y)(A.A,{when:O.some((function(t){return t.isSaved}))},(0,a.Y)(f.A,{variant:"text",size:"small",onClick:function t(){return g((function(t){return!t}))}},y?(0,u.__)("Expand All","tutor"):(0,u.__)("Collapse All","tutor")))}),(0,a.Y)("div",{css:gd.content},(0,a.Y)(A.A,{when:!S.isLoading&&S.data&&(S.data.length>0||O.length>0),fallback:(0,a.Y)(v.A,{emptyStateImage:Jc,emptyStateImage2x:$c,imageAltText:(0,u.__)("Empty State Illustration","tutor"),title:(0,u.__)("Start building your course!","tutor"),description:(0,u.__)("Add Topics, Lessons, and Quizzes to get started.","tutor"),actions:(0,a.Y)(f.A,{variant:"secondary",icon:(0,a.Y)(h.A,{name:"plusSquareBrand",width:24,height:25}),onClick:function t(){I((function(){return[{id:(0,E.Ak)(),title:"",summary:"",contents:[],isCollapsed:false,isSaved:false}]}))}},(0,u.__)("Add Topic","tutor"))})},(0,a.Y)("div",{css:gd.topicWrapper},(0,a.Y)(n.Mp,{sensors:P,collisionDetection:n.y$,measuring:Ao.s,modifiers:[o.Q_],onDragStart:function t(e){w(e.active.id)},onDragOver:function t(e){return T(e)},onDragEnd:function t(e){return D(e)}},(0,a.Y)(i.gB,{items:O.map((function(t){return od(od({},t),{},{id:t.id})})),strategy:i._G},(0,a.Y)(ct.A,{each:O},(function(t,e){return t.isSaved&&(0,a.Y)(Uc,{key:t.id,topic:od(od({},t),{},{isCollapsed:_!==null&&_!==void 0&&_.toString().includes("topic")?true:t.isCollapsed}),onDelete:function r(){return L(e,t.id)},onCollapse:function t(e){return z(e)},onCopy:function t(e){k.current=[e]},onEdit:function t(e){k.current=[e]}})}))),(0,c.createPortal)((0,a.Y)(n.Hd,null,(0,a.Y)(A.A,{when:j},(function(t){return(0,a.Y)(Mc,{title:_!==null&&_!==void 0&&_.toString().includes("topic")?t.title:t.post_title})}))),document.body)),(0,a.Y)(ct.A,{each:O},(function(t,e){return!t.isSaved&&(0,a.Y)(Uc,{key:t.id,topic:od(od({},t),{},{isCollapsed:false}),onDelete:function r(){return L(e,t.id)},onCollapse:function t(e){return z(e)},onCopy:function t(e){k.current=[e]},onEdit:function t(e){k.current=[e]}})}))))),(0,a.Y)(A.A,{when:O.length>0},(0,a.Y)("div",{css:gd.addButtonWrapper},(0,a.Y)(f.A,{variant:"secondary",icon:(0,a.Y)(h.A,{name:"plusSquareBrand",width:24,height:24}),onClick:function t(){I((function(t){return[].concat(Zc(t.map((function(t){return od(od({},t),{},{isCollapsed:true})}))),[{id:(0,E.Ak)(),title:"",summary:"",contents:[],isCollapsed:false,isSaved:false}])}));k.current=[]}},(0,u.__)("Add Topic","tutor"))))),(0,a.Y)(Gc.A,{styleModifier:gd.navigator}))};const yd=vd;var gd={container:(0,a.AH)("margin-top:",O.YK[32],";width:100%;",O.EA.smallTablet,"{margin-top:",O.YK[16],";}"+(true?"":0),true?"":0),wrapper:(0,a.AH)("width:100%;",k.x.display.flex("column"),";gap:",O.YK[16],";margin:0 auto;"+(true?"":0),true?"":0),content:(0,a.AH)("margin-top:",O.YK[16],";",O.EA.smallMobile,"{margin-top:0;}"+(true?"":0),true?"":0),topicWrapper:(0,a.AH)(k.x.display.flex("column"),";gap:",O.YK[16],";align-items:center;"+(true?"":0),true?"":0),addButtonWrapper:(0,a.AH)("path{stroke:",O.I6.icon.brand,";}"+(true?"":0),true?"":0),navigator:(0,a.AH)("margin:",O.YK[40]," auto;"+(true?"":0),true?"":0)}}}]);