var he=Object.defineProperty,pe=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var ae=(c,s,t)=>s in c?he(c,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[s]=t,P=(c,s)=>{for(var t in s||(s={}))je.call(s,t)&&ae(c,t,s[t]);if(se)for(var t of se(s))ge.call(s,t)&&ae(c,t,s[t]);return c},E=(c,s)=>pe(c,xe(s));import{f as F,j as e,_ as n,r as M,ar as B,aL as Y,cb as S,E as X,bo as te,X as ve,A as fe,a as ne,S as Z,T as G,b as H,g as be,I as T,u as ie,e as Ne,p as _e,L as we,c as ke,V as ye,K as Fe,O as Se}from"./main-250.js";import{E as ce,f as de,R as Me,a as Re,p as Pe}from"./bf-435-330.js";import{t as le}from"./bf-997-82.js";import{u as Q}from"./bf-135-78.js";import{C as W}from"./bf-966-106.js";import{C as O}from"./bf-865-86.js";import{M as me}from"./bf-821-114.js";import"./bf-138-79.js";const re=(c,s,t,i,l,r)=>{r(u=>F(u,m=>{m[c][s][i][t.target.name]=t.target.value}))};function D({i:c,type:s,formFields:t,field:i,dataConf:l,setDataConf:r,customFields:u}){const m={login:{propName:"login_map",fldName:"loginField"},reset:{propName:"reset_map",fldName:"resetField"},forgot:{propName:"forgot_map",fldName:"forgotField"}},{propName:j,fldName:x}=m[s],w=!!u.find(d=>d.key===i[x]&&d.required),v=(d,b)=>{const g=P({},l);g[s][j][b].customValue=d.target.value,r(g)};return e.jsx("div",{className:"flx mt-2 mr-1",children:e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp w-5 mr-2",name:"formField",value:i.formField||"",onChange:d=>re(s,j,d,c,l,r),children:[e.jsx("option",{value:"",children:n("Select Field")}),t.map(d=>d.type!=="file-up33"&&e.jsx("option",{value:d.key,children:d.name},`ff-zhcrm-${d.key}`)),e.jsx("option",{value:"custom",children:n("Custom...")})]}),i.formField==="custom"&&e.jsx(me,{onChange:d=>v(d,c),label:n("Custom Value"),className:"mr-2",type:"text",value:i.customValue,placeholder:n("Custom Value")}),e.jsxs("select",{className:"btcd-paper-inp w-5",name:x,value:i[x]||"",onChange:d=>re(s,j,d,c,l,r),disabled:w,children:[e.jsx("option",{value:"",children:n("Select Field")}),u==null?void 0:u.map(d=>e.jsx("option",{value:d.key,children:`${d.name}`},`${d.key}-1`))]})]})})}function qe({fields:c,dataConf:s,setDataConf:t,pages:i,type:l,status:r}){var d,b,g,o,a;const[u,m]=M.useState(!1),j=B(Y),x=[{key:"login",name:"Username or Email Address",required:!0}];M.useEffect(()=>{t(p=>F(p,h=>{var N,y,A;(A=(y=(N=h[l])==null?void 0:N.forgot_map)==null?void 0:y[0])!=null&&A.forgotField||(h[l].forgot_map=x.filter($=>$.required).map($=>({formField:"",forgotField:$.key,required:$.required})))}))},[]);const w=p=>{t(h=>F(h,N=>{const{name:y,value:A}=p.target;N[l][y]=A})),j(h=>E(P({},h),{unsaved:!0}))},v=p=>{t(h=>F(h,N=>{N[l].redirect_url=p.target.value})),j(h=>E(P({},h),{unsaved:!0}))};return e.jsxs("div",{style:{width:800,opacity:r===0&&.6,pointerEvents:r===0&&"none"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Forget Password Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Forgot Password Fields")})})]})]})}),(b=(d=s[l])==null?void 0:d.forgot_map)==null?void 0:b.map((p,h)=>e.jsx(D,{i:h,type:"forgot",field:p,formFields:c,dataConf:s,setDataConf:t,customFields:x},`analytics-m-${h+9}`)),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsxs("div",{className:"f-m fw-500",children:[S("Redirect Page:"),e.jsx(O,{width:250,icnSize:17,className:"ml-1 mt-4 p-0",children:e.jsxs("div",{className:"txt-body",children:["This redirect page will be redirected to the reset form when the email is verified.",e.jsx("br",{})]})})]}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(g=s[l])==null?void 0:g.redirect_url,onChange:p=>v(p),children:[e.jsx("option",{value:"",children:S("Custom Link")}),i&&i.map((p,h)=>e.jsx("option",{value:p.url,children:p.title},`r-url-${h+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2 mt-5 fw-500",children:[e.jsxs("div",{className:"f-m",children:["Link"," ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{onChange:w,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:(o=s[l])==null?void 0:o.redirect_url})]})]}),e.jsx("br",{}),e.jsxs("div",{className:"flx w-5  mt-4",children:[e.jsx("span",{role:"button",tabIndex:"-1",className:"cp",onClick:()=>m(!0),onKeyDown:()=>m(!0),children:e.jsx(X,{size:21})}),e.jsx("div",{className:"f-m ml-1",children:S("Password reset email template")})]}),e.jsx(ce,{dataConf:s,setDataConf:t,type:l,showMdl:u,setshowMdl:m,tamplate:de,title:"Password reset email template"}),e.jsx("br",{}),e.jsxs("div",{className:"w-5",children:[e.jsx("div",{className:"f-m fw-500",children:S("Success Message:")}),e.jsx("input",{className:"btcd-paper-inp mt-1",onChange:p=>w(p),name:"succ_msg",value:(a=s[l])==null?void 0:a.succ_msg,type:"text",placeholder:S("Success Message")})]})]})}function Le({fields:c,dataConf:s,setDataConf:t,pages:i,type:l,status:r}){var w,v,d,b,g;const u=B(Y),m=[{key:"user_login",name:"User Name or Email",required:!0},{key:"password",name:"Password",required:!0},{key:"remember",name:"Remember Me",required:!0}],j=o=>{t(a=>F(a,p=>{const{name:h,value:N}=o.target;p[l][h]=N})),u(a=>E(P({},a),{unsaved:!0}))},x=o=>{t(a=>F(a,p=>{p[l].redirect_url=o.target.value})),u(a=>E(P({},a),{unsaved:!0}))};return M.useEffect(()=>{t(o=>F(o,a=>{var p,h,N;(N=(h=(p=a[l])==null?void 0:p.login_map)==null?void 0:h[0])!=null&&N.loginField||(a[l].login_map=m.filter(y=>y.required).map(y=>({formField:"",loginField:y.key,required:y.required})))}))},[]),e.jsxs("div",{style:{width:800,opacity:r===0&&.6,pointerEvents:r===0&&"none"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Login Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Login Fields")})})]})]})}),(v=(w=s[l])==null?void 0:w.login_map)==null?void 0:v.map((o,a)=>e.jsx(D,{i:a,type:"login",field:o,formFields:c,dataConf:s,setDataConf:t,customFields:m},`analytics-m-${a+9}`)),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m",children:S("Redirect Page:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(d=s[l])==null?void 0:d.redirect_url,onChange:x,children:[e.jsx("option",{value:"",children:S("Custom Link")}),i&&i.map((o,a)=>e.jsx("option",{value:o.url,children:o.title},`r-url-${a+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:"Link:"}),e.jsx("input",{onChange:j,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:(b=s[l])==null?void 0:b.redirect_url})]})]}),e.jsx("br",{}),e.jsx("div",{className:"f-m",children:"Login Success Message "}),e.jsx("input",{onChange:j,name:"succ_msg",className:"btcd-paper-inp mt-1 w-5",type:"text",value:(g=s[l])==null?void 0:g.succ_msg})]})}const oe=[{key:"user_email",name:"Email",required:!0},{key:"user_login",name:"Username"},{key:"nickname",name:"Nickname"},{key:"display_name",name:"Display Name"},{key:"first_name",name:"First Name"},{key:"last_name",name:"Last Name"},{key:"user_pass",name:"Password"},{key:"user_url",name:"Website"},{key:"description",name:"Biographical Info"}],ee=(c,s,t,i,l)=>{l(r=>F(r,u=>{u[c][s].splice(t,0,{})}))},Ee=(c,s,t,i,l)=>{l(r=>F(r,u=>{u[c][s].length>1&&u[c][s].splice(t,1)}))},J=(c,s,t,i,l,r,u,m)=>{const j=P({},l),x=u==null?void 0:u.find(w=>w.key===t.target.value);if(j[c][s][i].userField==="user_email"&&(x==null?void 0:x.typ)!=="email"){m({show:!0,msg:"should be selected email field.."});return}r(w=>F(w,v=>{v[c][s][i][t.target.name]=t.target.value}))},C=(c,s,t)=>!((c[s]?c[s].filter(l=>!l.formField&&l[t]&&l.required):[]).length>0);function ue({i:c,type:s,formFields:t,field:i,userConf:l,setUserConf:r,customFields:u,setSnackbar:m,fieldType:j,authType:x}){const w=B(Y),v={user:{propName:"user_map",fldName:"userField"},meta:{propName:"meta_map",fldName:"metaField"}},{propName:d,fldName:b}=v[s],g=(a,p)=>{const h=fe(l);h[x][d][p].customValue=a.target.value,r(h),w(N=>E(P({},N),{unsaved:!0}))},o=!!u.find(a=>a.key===i[b]&&a.required);return e.jsxs("div",{className:"flx mt-2 mr-1",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:i.formField||"",onChange:a=>J(x,d,a,c,l,r,t,m),children:[e.jsx("option",{value:"",children:n("Select Field")}),j==="file"?t.map(a=>te.includes(a.type)&&e.jsx("option",{value:a.key,children:a.name},`ff-zhcrm-${a.key}`)):t==null?void 0:t.map(a=>!te.includes(a.type)&&e.jsx("option",{value:a.key,children:a.name},`ff-zhcrm-${a.key}`)),j!=="file"&&e.jsx("option",{value:"custom",children:n("Custom...")})]}),i.formField==="custom"&&e.jsx(me,{onChange:a=>g(a,c),label:n("Custom Value"),className:"mr-2",type:"text",value:i.customValue,placeholder:n("Custom Value")}),s!=="meta"?e.jsxs("select",{className:"btcd-paper-inp",name:b,value:i[b]||"",onChange:a=>J(x,d,a,c,l,r,t,m),disabled:o,children:[e.jsx("option",{children:n("Select Field")}),u==null?void 0:u.map(a=>e.jsx("option",{value:a.key,children:`${a.name}`},`${a.key}-1`))]}):e.jsx("input",{className:"btcd-paper-inp",name:b,value:i[b]||"",onChange:a=>J(x,d,a,c,l,r,t,m),type:"text"})]}),!o&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ee(x,d,c,l,r),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>Ee(x,d,c,l,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(ve,{})})]})]})}function Ae({formFields:c,userConf:s,setUserConf:t,pages:i,roles:l,type:r}){var p,h,N,y,A,$,_,q,L,I,R,U;const[u,m]=M.useState({show:!1}),[j,x]=M.useState(!1),[w,v]=M.useState(!1),d=B(Y),{css:b}=ne(),g=f=>{t(k=>F(k,V=>{const{name:z,value:K}=f.target;V[r][z]=K})),d(k=>E(P({},k),{unsaved:!0}))},o=f=>{t(k=>F(k,V=>{const{name:z,checked:K}=f.target;K?V[r][z]=!0:delete V[r][z]})),d(k=>E(P({},k),{unsaved:!0}))},a=f=>{t(k=>F(k,V=>{const{value:z}=f.target;V[r].redirect_url=z})),d(k=>E(P({},k),{unsaved:!0}))};return e.jsxs(e.Fragment,{children:[e.jsx(Z,{snack:u,setSnackbar:m}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:n("Field Mappping")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("User Fields")})})]})]}),(h=(p=s[r])==null?void 0:p.user_map)==null?void 0:h.map((f,k)=>e.jsx(ue,{i:k,type:"user",field:f,formFields:c,userConf:s,setUserConf:t,customFields:oe,setSnackbar:m,fieldType:"all",authType:"register"},`analytics-m-${k+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>{var f,k;return ee(r,"user_map",(k=(f=s[r])==null?void 0:f.user_map)==null?void 0:k.length,s,t)},className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsxs("div",{className:"flx",children:[e.jsxs("div",{className:"w-5 mt-5 flx",children:[e.jsx(G,{name:"user_notify",onChange:o,title:n("User Email Notification"),checked:!!((N=s[r])!=null&&N.user_notify),value:!1}),e.jsx(O,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["When this option is enabled, a welcome email will be sent from WordPress after registration.",e.jsx("br",{})]})})]}),e.jsxs("div",{className:"w-5 mt-5 flx",children:[e.jsx(G,{name:"admin_notify",onChange:o,title:n("Admin Email Notification"),checked:!!((y=s[r])!=null&&y.admin_notify),value:!1}),e.jsx(O,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["If this option is enabled, e-mail will be sent from WordPress to admin.",e.jsx("br",{})]})})]})]}),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m",children:n("Redirect Page:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(A=s[r])==null?void 0:A.redirect_url,onChange:a,children:[e.jsx("option",{value:"",children:n("Custom Link")}),i&&i.map((f,k)=>e.jsx("option",{value:f.url,children:f.title},`r-url-${k+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:"Link"}),e.jsx("input",{onChange:g,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:($=s[r])==null?void 0:$.redirect_url})]})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m fw-500",children:n("WP User Role")}),e.jsxs("select",{name:"user_role",onChange:g,value:(_=s[r])==null?void 0:_.user_role,className:"btcd-paper-inp mt-1",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select User Role"}),l.map((f,k)=>e.jsx("option",{value:f==null?void 0:f.key,children:f==null?void 0:f.name},`acf-${k*2}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:n("Success Messages")}),e.jsx("input",{className:"btcd-paper-inp mt-1",onChange:f=>g(f),name:"succ_msg",value:(q=s[r])==null?void 0:q.succ_msg,type:"text",placeholder:n("Success Message")})]})]}),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5",children:[e.jsx("div",{className:"f-m fw-500",children:n("User Approval  Method:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",name:"activation",value:(L=s[r])==null?void 0:L.activation,onChange:g,children:[e.jsx("option",{disabled:!0,selected:!0,value:"",children:n("select approval method")}),e.jsx("option",{value:"auto_approve",children:"Auto Approve"}),e.jsx("option",{value:"admin_review",children:"Require Admin Review"}),e.jsx("option",{value:"email_verify",children:"Require Email Activation"})]})]}),((I=s[r])==null?void 0:I.activation)==="auto_approve"&&e.jsxs("div",{className:"w-5 ml-2 flx",children:[e.jsx(G,{name:"auto_login",onChange:o,title:n("Auto Login After Registration"),checked:!!((R=s[r])!=null&&R.auto_login),value:!1}),e.jsx(O,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["if checked Auto Login, the user login automatically after registration.",e.jsx("br",{})]})})]})]}),((U=s[r])==null?void 0:U.activation)!=="auto_approve"&&e.jsxs("div",{className:"flx  integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 mt-4",children:[e.jsxs("button",{type:"button",className:b(H.btn),onClick:()=>x(!0),children:[e.jsx(X,{size:18})," ",n("Customize Email templates")]}),e.jsx(ce,{dataConf:s,setDataConf:t,type:r,showMdl:j,setshowMdl:x,title:"Customize Email templates"})]}),e.jsxs("div",{className:"ml-2 mt-4",children:[e.jsxs("button",{type:"button",className:b(H.btn),onClick:()=>v(!0),children:[e.jsx(X,{size:18})," ",n("Edit verification Messages/Redirect URL")]}),e.jsx(Me,{dataConf:s,setDataConf:t,showMdl:w,setCustomRedirectMdl:v,pages:i,type:r,title:"Edit verification messages"})]})]})]})]})}function $e({formFields:c,userConf:s,setUserConf:t,type:i}){var u,m;const[l,r]=M.useState([]);return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:n("User Meta Field Mappping")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("Meta Value")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("Meta Key")})})]})]}),(m=(u=s[i])==null?void 0:u.meta_map)==null?void 0:m.map((j,x)=>e.jsx(ue,{i:x,type:"meta",field:j,formFields:c,userConf:s,setUserConf:t,customFields:l,fieldType:"meta",authType:"register"},`analytics-m-${x+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>{var j;return ee(i,"meta_map",(j=s==null?void 0:s.meta_map)==null?void 0:j.length,s,t)},className:"icn-btn sh-sm",type:"button",children:"+"})})]})}function Ie({formFields:c,dataConf:s,setDataConf:t,pages:i,type:l,status:r}){const{formID:u}=be(),[m,j]=M.useState({show:!1}),[x,w]=M.useState([]);return Q("bitforms_get_wp_roles",{},{fetchCondition:T,onSuccess:v=>w(Object.values(v))}),M.useEffect(()=>{t(v=>F(v,d=>{var b,g,o;(o=(g=(b=d[l])==null?void 0:b.user_map)==null?void 0:g[0])!=null&&o.userField||(d[l].user_map=oe.filter(a=>a.required).map(a=>({formField:"",userField:a.key,required:a.required})))}))},[]),e.jsxs("div",{style:{width:900,opacity:r===0&&.6,pointerEvents:r===0&&"none"},children:[e.jsx(Z,{snack:m,setSnackbar:j}),e.jsx("div",{children:e.jsx(Ae,{formFields:c,formID:u,userConf:s,setUserConf:t,pages:i,roles:x,type:l})}),e.jsxs("div",{children:[e.jsx($e,{formFields:c,formID:u,userConf:s,setUserConf:t,type:l}),e.jsx("br",{})]}),e.jsxs("p",{className:"p-1 f-m",children:[e.jsx("strong",{children:"Note"})," ",": If the Username and Password fields are blank then the user will take the value of the email field as the field and the password will be auto-generated."]})]})}function Ue({fields:c,dataConf:s,setDataConf:t,type:i,pages:l,status:r}){var w,v,d,b,g;const u=B(Y),m=[{key:"new_password",name:"New Password",required:!0},{key:"conf_password",name:"Confirm Password",required:!0}],j=o=>{t(a=>F(a,p=>{const{name:h,value:N}=o.target;p[i][h]=N})),u(a=>E(P({},a),{unsaved:!0}))};M.useEffect(()=>{t(o=>F(o,a=>{var p,h,N;(N=(h=(p=a[i])==null?void 0:p.reset_map)==null?void 0:h[0])!=null&&N.resetField||(a[i].reset_map=m.filter(y=>y.required).map(y=>({formField:"",resetField:y.key,required:y.required})))}))},[]);const x=o=>{t(a=>F(a,p=>{p[i].redirect_url=o.target.value})),u(a=>E(P({},a),{unsaved:!0}))};return e.jsxs("div",{style:{width:800,opacity:r===0&&.6,pointerEvents:r===0&&"none"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Login Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Reset Password Fields")})})]})]})}),(v=(w=s[i])==null?void 0:w.reset_map)==null?void 0:v.map((o,a)=>e.jsx(D,{i:a,type:"reset",field:o,formFields:c,dataConf:s,setDataConf:t,customFields:m},`analytics-m-${a+9}`)),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m fw-500",children:S("Redirect Page:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(d=s[i])==null?void 0:d.redirect_url,onChange:o=>x(o),children:[e.jsx("option",{value:"",children:S("Custom Link")}),l&&l.map((o,a)=>e.jsx("option",{value:o.url,children:o.title},`r-url-${a+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:"Link:"}),e.jsx("input",{onChange:j,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:(b=s[i])==null?void 0:b.redirect_url})]})]}),e.jsx("br",{}),e.jsx("div",{className:"flx integ-fld-wrp",children:e.jsxs("div",{className:"w-5",children:[e.jsx("div",{className:"f-m fw-500",children:S("Success Message:")}),e.jsx("input",{className:"btcd-paper-inp mt-1",onChange:o=>j(o),name:"succ_msg",value:(g=s[i])==null?void 0:g.succ_msg,type:"text",placeholder:S("Success Message")})]})}),e.jsx("br",{})]})}function Ke(){const[c,s]=M.useState(!1),t=ie(Fe),[i,l]=M.useState("register"),r=ie(Se),{css:u}=ne(),[m,j]=M.useState({register:{user_map:[{}],succ_msg:n("Registration successfully done."),meta_map:[{}],sub:n("Activate Your Account"),body:Re,acti_succ_msg:n("Your account has been activated successfully.&nbsp;You can now login."),already_activated_msg:n("Your account is already activated!"),invalid_key_msg:n("Sorry! Your URL Is Invalid!!"),reject_success_msg:n("This Requested account has been rejected successfully."),pendingUserSub:n("Your account is pending for admin approval."),pendingUserBody:n("Your account is pending for admin approval. Please wait for admin approval."),adminApprovalSub:n("New User Registration Request"),adminApprovalBody:Pe,userRejectionSub:n("Your account has been rejected."),userRejectionBody:n("<p>Your account has been rejected by admin.</p>")},login:{login_map:[{}],succ_msg:n("You have been successfully logged in.")},forgot:{forgot_map:[{}],succ_msg:n("We have e-mailed your password reset link!"),sub:"Email Subject",body:de},reset:{reset_map:[{}],succ_msg:"Your password has been reset!."}}),[x,w]=M.useState([]),[v,d]=M.useState(0),[b,g]=M.useState({show:!1}),o=B(Y),{isLoading:a,mutate:p}=Q("bitforms_get_auth_set",{formID:r},{fetchCondition:T,onSuccess:_=>{var q,L;j(I=>F(I,R=>{var U,f;R[(U=_[0])==null?void 0:U.integration_name]=JSON.parse((f=_[0])==null?void 0:f.integration_details)})),l((q=_[0])==null?void 0:q.integration_name),d(Number((L=_[0])==null?void 0:L.status))}});Q("bitforms_get_all_wp_pages",{},{fetchCondition:T,onSuccess:_=>w(_)});const h=_=>{if(!T)return;const{name:q,value:L}=_.target;l(L);const I=P({},m);I[q]=L,j(I),o(R=>E(P({},R),{unsaved:!0}))},N=_=>{T&&(_.target.checked?d(1):d(0))},y=()=>{var q,L;let _=!0;return i==="register"&&!C(m[i],"user_map","userField")&&(g({show:!0,msg:"Please mapped required fields."}),_=!1),i==="register"&&!((q=m[i])!=null&&q.user_role)&&(g({show:!0,msg:"User Role field is required."}),_=!1),i==="forgot"&&!C(m[i],"forgot_map","forgotField")&&(g({show:!0,msg:"Please mapped required fields."}),_=!1),i==="forgot"&&!((L=m[i])!=null&&L.redirect_url)&&(g({show:!0,msg:"redirect page link is required."}),_=!1),i==="reset"&&!C(m[i],"reset_map","resetField")&&(g({show:!0,msg:"Please mapped required fields."}),_=!1),i==="login"&&!C(m[i],"login_map","loginField")&&(g({show:!0,msg:"Please mapped required fields."}),_=!1),_},A=_=>{if(_.preventDefault(),!T)return;s(!0);const q=F(m,R=>{Object.keys(R).forEach(U=>i!==U&&delete R[U]),R.formId=r,R.type=i,R.status=v});if(!y()){s(!1);return}const I=ke(q,"bitforms_save_auth_settings").then(R=>{R!==void 0&&R.success&&(p(q),s(!1))});ye.promise(I,{success:n("Saved successfully."),loading:n("Saving..."),error:n("Something went wrong, Try again.")})},$=()=>{switch(i){case"login":return e.jsx(Le,{fields:t,dataConf:m,setDataConf:j,pages:x,type:i,status:v});case"forgot":return e.jsx(qe,{fields:t,dataConf:m,setDataConf:j,pages:x,type:i,status:v});case"reset":return e.jsx(Ue,{fields:t,dataConf:m,setDataConf:j,pages:x,type:i,status:v});case"register":return e.jsx(Ie,{formFields:t,dataConf:m,setDataConf:j,pages:x,type:i,status:v})}};return e.jsxs("div",{className:"pos-rel",children:[e.jsx(Z,{snack:b,setSnackbar:g}),e.jsx("h2",{className:"",children:n("WP Authentication")}),e.jsxs("h5",{children:["How to setup WP Authentication:  ",e.jsx("a",{href:le.authSettings.link,target:"_blank",rel:"noreferrer",className:"yt-txt ml-1 mr-1",children:"YouTube"}),e.jsx("a",{href:le.authSettingsDoc.link,target:"_blank",rel:"noreferrer",className:"doc-txt",children:"Documentation"})]}),!T&&e.jsx("div",{className:"pro-blur flx",style:{height:"111%",left:-53,width:"104%"},children:e.jsxs("div",{className:"pro",children:[n("Available On"),e.jsx("a",{href:"https://www.bitapps.pro/bit-form",target:"_blank",rel:"noreferrer",children:e.jsx("span",{className:"txt-pro",children:n("Premium")})})]})}),a?e.jsx(Ne,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):e.jsxs("div",{children:[e.jsx("div",{className:"mt-2",children:e.jsxs("label",{htmlFor:"status",children:[e.jsx("b",{children:n("")}),e.jsx(W,{radio:!0,name:"type",onChange:h,checked:i==="register",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Registration"})}),value:"register"}),e.jsx(W,{radio:!0,name:"type",onChange:h,checked:i==="login",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Log In"})}),value:"login"}),e.jsx(W,{radio:!0,name:"type",onChange:h,checked:i==="forgot",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Forgot Password"})}),value:"forgot"}),e.jsx(W,{radio:!0,name:"type",onChange:h,checked:i==="reset",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Reset Password"})}),value:"reset"})]})}),e.jsxs("div",{className:"mt-2 ml-1 flx",children:[e.jsx("label",{htmlFor:"status",children:e.jsx("b",{children:n("Enable")})}),e.jsx(_e,{action:N,checked:v===1,className:"ml-4 flx"})]}),$(),e.jsxs("button",{type:"button",id:"secondary-update-btn",onClick:A,className:u(H.btn,H.blueGrd,{px:20}),disabled:c,children:[n("Save "),c&&e.jsx(we,{size:20,clr:"#fff",className:"ml-2"})]}),e.jsx("div",{children:i!=="register"&&e.jsxs("p",{className:"p-1 f-m",children:[e.jsx("strong",{children:"Note : "})," ","When the login, forgot password or reset password any of these feature enabled in the form, the entries will not be saved in the WP database."]})})]})]})}export{Ke as default};
