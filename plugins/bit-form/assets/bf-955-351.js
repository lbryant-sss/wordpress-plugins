var H=Object.defineProperty;var q=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var I=(c,o,d)=>o in c?H(c,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[o]=d,u=(c,o)=>{for(var d in o||(o={}))J.call(o,d)&&I(c,d,o[d]);if(q)for(var d of q(o))K.call(o,d)&&I(c,d,o[d]);return c};import{r as x,G as Q,c as $,j as e,S as V,_ as i}from"./main-250.js";import{p as B,S as X}from"./bf-15-209.js";import{t as R}from"./bf-997-82.js";import{C as f}from"./bf-865-86.js";import{a5 as Y,a7 as Z}from"./bf-348-81.js";import{r as ee,F as v,a as g,b as L,c as te,d as se}from"./bf-276-211.js";import"./bf-138-79.js";import"./bf-821-114.js";import"./bf-932-173.js";function pe({formFields:c,setIntegration:o,integrations:d,allIntegURL:A}){const[_,N]=x.useState([]),[D,U]=x.useState([]),[z,p]=x.useState({show:!1}),E=Q(),[O,b]=x.useState([]),[T,j]=x.useState([]),[l,m]=x.useState({name:"CPT/Post Creation with MetaBox",type:"MetaBox",post_map:[{post_author:"logged_in_user"}],metabox_map:[{}],metabox_file_map:[{}]}),h=(t,s,n)=>{const a=u({},l);n?a[t]=Number(s):a[t]=s,m(a)},G=(t,s)=>{const n=u({},l);n[t]=s,$({post_type:s},"bitforms_get_metabox_fields").then(a=>{var y,F,C,S,M,k,w,P;a!=null&&a.success&&a!==void 0&&(b((y=a==null?void 0:a.data)==null?void 0:y.metaboxFields),j((F=a==null?void 0:a.data)==null?void 0:F.metaboxFile),(C=a==null?void 0:a.data)!=null&&C.metaboxFields&&(n.metabox_map=(S=a==null?void 0:a.data)==null?void 0:S.metaboxFields.filter(r=>r.required).map(r=>({formField:"",metaboxField:r.key,required:r.required})),((M=n==null?void 0:n.metabox_map)==null?void 0:M.length)<1&&(n.metabox_map=[{}])),(k=a==null?void 0:a.data)!=null&&k.metaboxFile&&(n.metabox_file_map=(w=a==null?void 0:a.data)==null?void 0:w.metaboxFile.filter(r=>r.required).map(r=>({formField:"",metaboxFileUpload:r.key,required:r.required})),((P=n==null?void 0:n.metabox_file_map)==null?void 0:P.length)<1&&(n.metabox_file_map=[{}])),m(n))})};x.useEffect(()=>{$({},"bitforms_get_post_type").then(s=>{var n,a;s!=null&&s.success&&(N(Object.values((n=s==null?void 0:s.data)==null?void 0:n.post_types)),U((a=s==null?void 0:s.data)==null?void 0:a.users))});const t=u({},l);t.post_map=B.filter(s=>s.required).map(s=>({formField:"",postField:s.key,required:s.required})),m(t)},[]);const W=()=>{if(!l.post_type){p({show:!0,msg:i("Post Type cann't be empty")});return}if(!l.post_status){p({show:!0,msg:i("Post Status cann't be empty")});return}if(!te(l)){p({show:!0,msg:i("Please map mandatory fields")});return}if(!se(l)){p({show:!0,msg:i("Please map mandatory fields")});return}Z(d,o,A,l,E)};return e.jsxs("div",{style:{width:900},children:[e.jsx(V,{snack:z,setSnackbar:p}),e.jsx(Y,{title:R.metaBox.title,youTubeLink:R.metaBox.link}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:i("Integration Name")})}),e.jsx("input",{className:"btcd-paper-inp w-5 mt-1",onChange:t=>h(t.target.name,t.target.value),name:"name",value:l.name,type:"text",placeholder:i("Integration Name...")}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{children:i("Post Type")}),e.jsx(f,{width:250,icnSize:17,className:"ml-2",children:e.jsxs("div",{className:"txt-body",children:["Select one of the defined WordPress post types Or custom post types for the post.",e.jsx("br",{})]})})]}),e.jsxs("div",{children:[e.jsxs("select",{name:"post_type",onChange:t=>G(t.target.name,t.target.value),className:"btcd-paper-inp w-5 mt-1",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select Post Type"}),_.map((t,s)=>e.jsx("option",{value:t==null?void 0:t.name,children:t==null?void 0:t.label},`pt-${s*7}`))]}),e.jsx("button",{onClick:()=>ee(_,N),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh Post Types")}'`},type:"button",children:"↻"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("b",{children:i("Post Status")}),e.jsx(f,{width:250,icnSize:17,className:"ml-2",children:e.jsxs("div",{className:"txt-body",children:["Select the status for the post. If published status is selected and the post date is in the future, it will automatically be changed to scheduled",e.jsx("br",{})]})})]}),e.jsxs("select",{name:"post_status",onChange:t=>h(t.target.name,t.target.value),className:"btcd-paper-inp w-5 mt-2",children:[e.jsx("option",{disabled:!0,selected:!0,children:i("Select Status")}),e.jsx("option",{value:"publish",children:"Publish"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"auto-draft",children:"Auto-Draft"}),e.jsx("option",{value:"private",children:"Private"}),e.jsx("option",{value:"pending",children:"Pending"})]}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{children:i("Author")}),e.jsx(f,{width:250,icnSize:17,className:"ml-2",children:e.jsxs("div",{className:"txt-body",children:["Select the user to be assigned to the post.",e.jsx("br",{})]})})]}),e.jsx("div",{children:e.jsxs("select",{name:"post_author",onChange:t=>h(t.target.name,t.target.value),className:"btcd-paper-inp w-5 mt-2",children:[e.jsx("option",{disabled:!0,selected:!0,children:i("Select Author")}),e.jsx("option",{value:"logged_in_user",children:"Logged In User"}),D.map((t,s)=>e.jsx("option",{value:t.ID,children:t.display_name},`pauth-${s+4}`))]})}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:i("Comment Status")})}),e.jsxs("select",{name:"comment_status",onChange:t=>h(t.target.name,t.target.value),className:"btcd-paper-inp w-5 mt-2",children:[e.jsx("option",{disabled:!0,selected:!0,children:i("Select Status")}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:i("Field Mapping")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Post Fields")})})]})]}),l.post_map.map((t,s)=>e.jsx(v,{i:s,type:"post",field:t,formFields:c,dataConf:l,setDataConf:m,customFields:B},`analytics-m-${s+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>g("post_map",l.post_map.length,l,m),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("div",{children:e.jsxs("p",{className:"p-1 f-m",children:[e.jsx("strong",{children:"Note"})," ",": All your taxonomies will be mapped automatically from your form fields."]})}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mt-3 mb-1",children:[e.jsx("b",{children:i("Metabox Fields Mapping")}),e.jsx("button",{onClick:()=>L(l,b,j),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh MetaBox List")}'`},type:"button",children:"↻"})]}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Metaxbox Fields")})})]})]}),l.metabox_map.map((t,s)=>e.jsx(v,{i:s,type:"metabox",field:t,formFields:c,dataConf:l,setDataConf:m,customFields:O,fieldType:"field"},`analytics-m-${s+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>g("metabox_map",l.metabox_map.length,l,m),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mt-3 mb-1",children:[e.jsx("b",{children:i("Metabox File Upload Fields Map")}),e.jsx("button",{onClick:()=>L(l,b,j),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh MetaBox List")}'`},type:"button",children:"↻"})]}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Metaxbox Fields")})})]})]}),l.metabox_file_map.map((t,s)=>e.jsx(v,{i:s,type:"metaboxFile",field:t,formFields:c,dataConf:l,setDataConf:m,customFields:T,fieldType:"file"},`analytics-m-${s+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>g("metabox_file_map",l.metabox_file_map.length,l,m),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsx(X,{onClick:()=>W()})]})}export{pe as default};
