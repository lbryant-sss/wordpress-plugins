import{u as w,j as e,_ as d,X as S,$ as k,e as M}from"./main-917.js";import{i as P,P as q}from"./bf-99-79.js";import{ac as L,aa as R}from"./bf-111-81.js";import{f as _,r as V}from"./bf-431-178.js";import{M as O}from"./bf-137-113.js";import{a as $,b as z,c as T,e as E}from"./bf-380-202.js";function G({i:n,formFields:a,field:l,acumbamailConf:t,setAcumbamailConf:r}){var i,c,u,F,b,v,N,g,y,A,I;const h=w(k),{isPro:j}=h,p=(c=(i=t.default.allFields[t.listId])==null?void 0:i.required)==null?void 0:c.includes(l.acumbamailFormField),o=((F=(u=t.default.allFields)==null?void 0:u[t.listId])==null?void 0:F.fields)&&(Object.entries((v=(b=t.default.allFields)==null?void 0:b[t.listId])==null?void 0:v.fields).filter(s=>s[1].required===!0)||[]),x=((g=(N=t.default.allFields)==null?void 0:N[t.listId])==null?void 0:g.fields)&&(Object.entries((A=(y=t.default.allFields)==null?void 0:y[t.listId])==null?void 0:A.fields).filter(s=>s[1].required===!1)||[]);return e.jsxs("div",{className:"flx mt-2 mr-1",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:s=>$(s,n,t,r),children:[e.jsx("option",{value:"",children:d("Select Field")}),e.jsx("optgroup",{label:"Form Fields",children:a.map(s=>s.type!=="file-up"&&e.jsx("option",{value:s.key,children:s.name},`ff-zhcrm-${s.key}`))}),e.jsx("option",{value:"custom",children:d("Custom...")}),e.jsx("optgroup",{label:`General Smart Codes ${j?"":"(PRO)"}`,children:j&&((I=P)==null?void 0:I.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`)))})]}),l.formField==="custom"&&e.jsx(O,{onChange:s=>z(s,n,t,r),label:d("Custom Value"),className:"mr-2",type:"text",value:l.customValue,placeholder:d("Custom Value")}),e.jsxs("select",{className:"btcd-paper-inp",name:"acumbamailFormField",disabled:n<1,value:l.acumbamailFormField||"",onChange:s=>$(s,n,t,r),children:[e.jsx("option",{value:"",children:d("Select Field")}),p&&o&&o.map((s,m)=>e.jsx("option",{value:s[0],children:s[0]},`mchimp-${m*2}`)),!p&&x&&x.map((s,m)=>e.jsx("option",{value:s[0],children:s[0]},`mchimp-${m*2}`))]})]}),!p&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>T(n,t,r),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>E(n,t,r),className:"icn-btn sh-sm",type:"button","aria-label":"btn",children:e.jsx(S,{})})]})]})}function Q({formFields:n,handleInput:a,acumbamailConf:l,setAcumbamailConf:t,isLoading:r,setIsLoading:h,setSnackbar:j,setShowMdl:p}){var o,x;return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:d("Connected API List:")}),e.jsxs("select",{onChange:a,name:"parentAppId",value:l.parentAppId,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:d("Select API")}),L([l.type]).map(i=>e.jsx("option",{value:i.id,children:i.integration_name},i.id))]}),e.jsx("button",{"aria-label":"Add New",onClick:()=>p(!0),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Add New API"'},type:"button",disabled:r,children:e.jsx(q,{size:18})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:d("Actions:")}),e.jsxs("select",{onChange:a,name:"mainAction",value:l.mainAction,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:d("Select Actions")}),l.allActions&&l.allActions.map(({key:i,label:c})=>e.jsx("option",{value:i,children:c},i))]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:d("All List:")}),e.jsxs("select",{onChange:a,name:"listId",value:l.listId,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:d("Select List")}),((o=l==null?void 0:l.default)==null?void 0:o.allLists)&&Object.entries(l.default.allLists).map(i=>e.jsx("option",{value:i[0],children:i[1].name},i[0]))]}),e.jsx("button",{onClick:()=>_(l,t,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Fetch Subscriber List")}'`},type:"button",disabled:r,children:"↻"}),e.jsx("br",{}),r&&e.jsx(M,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsxs("div",{className:"mt-5",children:[e.jsx("b",{className:"wdt-100",children:d("Field Map")}),e.jsx("button",{onClick:()=>V(null,l,t,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Refresh Acumbamail Fields")}'`},type:"button",disabled:r,children:"↻"})]}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Acumbamail Fields")})})]}),((x=l.default)==null?void 0:x.allFields)&&e.jsxs(e.Fragment,{children:[l.field_map.map((i,c)=>e.jsx(G,{i:c,field:i,acumbamailConf:l,formFields:n,setAcumbamailConf:t},`acumba-m-${c+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>R(l.field_map.length,l,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("br",{})]})}export{Q as A};
