var S=Object.defineProperty;var _=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var P=(t,r,i)=>r in t?S(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,w=(t,r)=>{for(var i in r||(r={}))z.call(r,i)&&P(t,i,r[i]);if(_)for(var i of _(r))V.call(r,i)&&P(t,i,r[i]);return t};import{r as A,j as e,T as g,_ as a,d as y,e as F,bj as q,u as L,J as B,$ as E}from"./main-381.js";import{a8 as R,a9 as G,aa as Z,ab as H}from"./bf-433-81.js";import{u as J}from"./bf-540-79.js";import{r as $,a as f,b as U,d as K,e as Q}from"./bf-859-96.js";import{S as W}from"./bf-878-172.js";import{M as X}from"./bf-445-114.js";function Y({deskConf:t,setDeskConf:r,formID:i,formFields:l,setSnackbar:n}){var o,c,M,O,I,T;const[m,d]=A.useState(!1),[p,u]=A.useState({show:!1}),x=(s,j)=>{const v=w({},t);j==="ticket_owner"?s!==""?v.actions.ticket_owner=s:delete v.actions.ticket_owner:j==="product"?s!==""?v.actions.product=s:delete v.actions.product:j==="attachments"&&(s!==""?v.actions.attachments=s:delete v.actions.attachments),r(w({},v))},b=()=>{var s,j;(j=(s=t.default)==null?void 0:s.owners)!=null&&j[t.orgId]||$(i,t,r,d,n),u({show:"ticket_owner"})},N=()=>{var s,j;(j=(s=t.default)==null?void 0:s.products)!=null&&j[t.department]||f(i,t,r,d,n),u({show:"product"})},h=()=>{u({show:!1})};return e.jsxs("div",{className:"pos-rel",children:[e.jsxs("div",{className:"d-flx flx-wrp",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx(g,{onChange:b,checked:"ticket_owner"in t.actions,className:"wdt-200 mt-4 mr-2",value:"Ticket_Owner",title:a("Ticket Owner"),subTitle:a("Add a owner to ticket pushed to Zoho Desk.")}),!t.actions.ticket_owner&&e.jsx("small",{style:{marginLeft:30,marginTop:10,color:"red"},children:a("ticket owner is required")})]}),e.jsx(g,{onChange:N,checked:"product"in t.actions,className:"wdt-200 mt-4 mr-2",value:"Product_Name",title:a("Product Name"),subTitle:a("Add a product to ticket pushed to Zoho Desk.")}),e.jsx(g,{onChange:()=>u({show:"attachments"}),checked:"attachments"in t.actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:a("Attachments"),subTitle:a("Add attachments from BitForm to ticket pushed to Zoho Desk.")})]}),e.jsxs(y,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:a("Ok"),show:p.show==="ticket_owner",close:h,action:h,title:a("Ticket Owner"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),m?e.jsx(F,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsxs("select",{value:t.actions.ticket_owner,className:"btcd-paper-inp",onChange:s=>x(s.target.value,"ticket_owner"),children:[e.jsx("option",{value:"",children:a("Select Owner")}),(M=(c=(o=t.default)==null?void 0:o.owners)==null?void 0:c[t.orgId])==null?void 0:M.map(s=>e.jsx("option",{value:s.ownerId,children:s.ownerName},s.ownerId))]}),e.jsx("button",{onClick:()=>$(i,t,r,d,n),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Ticket Owners"'},type:"button",disabled:m,children:"↻"})]})]}),e.jsxs(y,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:a("Ok"),show:p.show==="product",close:h,action:h,title:a("Product Name"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),m?e.jsx(F,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsxs("select",{value:t.actions.product,className:"btcd-paper-inp",onChange:s=>x(s.target.value,"product"),children:[e.jsx("option",{value:"",children:a("Select Product")}),(T=(I=(O=t.default)==null?void 0:O.products)==null?void 0:I[t.department])==null?void 0:T.map(s=>e.jsx("option",{value:s.productId,children:s.productName},s.productId))]}),e.jsx("button",{onClick:()=>f(i,t,r,d,n),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Products"'},type:"button",disabled:m,children:"↻"})]})]}),e.jsxs(y,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:a("Ok"),show:p.show==="attachments",close:h,action:h,title:a("Select Attachment"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2",children:a("Select file upload fields")}),e.jsx(J,{defaultValue:t.actions.attachments,className:"mt-2 w-9",onChange:s=>x(s,"attachments"),options:l.filter(s=>q.includes(s.type)).map(s=>({label:s.name,value:s.key}))})]})]})}function D({i:t,formFields:r,field:i,deskConf:l,setDeskConf:n}){var x,b,N,h,o;const{orgId:m}=l,d=i.zohoFormField===""||((x=l.default.fields[m].required)==null?void 0:x.indexOf(i.zohoFormField))===-1,p=L(E),{isPro:u}=p;return e.jsxs("div",{className:"flx mt-2 mr-1",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:i.formField||"",onChange:c=>R(c,t,l,n),children:[e.jsx("option",{value:"",children:a("Select Field")}),e.jsx("optgroup",{label:"Form Fields",children:r.map(c=>c.type!=="file-up"&&e.jsx("option",{value:c.key,children:c.name},`ff-zhcrm-${c.key}`))}),e.jsx("option",{value:"custom",children:a("Custom...")}),e.jsx("optgroup",{label:`General Smart Codes ${u?"":"(PRO)"}`,children:u&&((b=W)==null?void 0:b.map(c=>e.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`)))})]}),i.formField==="custom"&&e.jsx(X,{onChange:c=>G(c,t,l,n),label:a("Custom Value"),className:"mr-2",type:"text",value:i.customValue,placeholder:a("Custom Value")}),e.jsxs("select",{className:"btcd-paper-inp",name:"zohoFormField",value:i.zohoFormField||"",disabled:!d,onChange:c=>R(c,t,l,n),children:[e.jsx("option",{value:"",children:a("Select Field")}),((o=(h=(N=l.default)==null?void 0:N.fields)==null?void 0:h[m])==null?void 0:o.fields)&&Object.values(l.default.fields[m].fields).map(c=>d?c.required===!1&&e.jsx("option",{value:c.apiName,children:c.displayLabel},c.displayLabel):e.jsx("option",{value:c.apiName,children:c.displayLabel},c.displayLabel))]})]}),d&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Z(t,l,n),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>H(t,l,n),className:"icn-btn sh-sm",type:"button","aria-label":"btn",children:e.jsx(B,{})})]})]})}function ce({formID:t,formFields:r,handleInput:i,deskConf:l,setDeskConf:n,isLoading:m,setisLoading:d,setSnackbar:p}){var u,x,b,N,h;return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-100 d-in-b",children:a("Portal:")}),e.jsxs("select",{onChange:i,name:"orgId",value:l.orgId,className:"btcd-paper-inp w-7",children:[e.jsx("option",{value:"",children:a("Select Portal")}),((u=l==null?void 0:l.default)==null?void 0:u.organizations)&&Object.values(l.default.organizations).map(o=>e.jsx("option",{value:o.orgId,children:o.portalName},o.orgId))]}),e.jsx("button",{onClick:()=>U(t,l,n,d,p),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh Desk Portals")}'`},type:"button",disabled:m,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-100 d-in-b",children:a("Department:")}),e.jsxs("select",{onChange:i,name:"department",value:l.department,className:"btcd-paper-inp w-7",children:[e.jsx("option",{value:"",children:a("Select Department")}),((b=(x=l==null?void 0:l.default)==null?void 0:x.departments)==null?void 0:b[l.orgId])&&Object.values(l.default.departments[l.orgId]).map(o=>e.jsx("option",{value:o.departmentId,children:o.departmentName},o.departmentId))]}),e.jsx("button",{onClick:()=>K(t,l,n,d,p),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh Desk Departments")}'`},type:"button",disabled:m,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),m&&e.jsx(F,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),l.department&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:a("Map Fields")}),e.jsx("button",{onClick:()=>Q(t,l,n,d,p),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh Desk Fields")}'`},type:"button",disabled:m,children:"↻"})]}),e.jsx("div",{className:"btcd-hr mt-1"}),((h=(N=l.default)==null?void 0:N.fields)==null?void 0:h[l==null?void 0:l.orgId])&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Zoho Fields")})})]}),l.field_map.map((o,c)=>e.jsx(D,{i:c,field:o,deskConf:l,formFields:r,setDeskConf:n},`desk-m-${c+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>Z(l.field_map.length,l,n),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Actions")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(Y,{deskConf:l,setDeskConf:n,formID:t,formFields:r,setSnackbar:p})]})]})]})}export{ce as Z};
