var bit_phone_number_field=function(){"use strict";return class{#t="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>";#e="www.cloudflare.com/cdn-cgi/trace";#s="api.geonames.org/countryCodeJSON?username=bitcodezoho1";#i=null;#n=null;#o=null;#h=null;#r=null;#l=null;#a=null;#u=null;#c=null;#d=null;#p=null;#m=null;#g=null;#f=30;#y=[];#C={};#b={};#E=!1;#I=null;#v=!1;#w=[];#S={maxHeight:370,detectCountryByIp:!1,detectCountryByGeo:!1,optionFlagImage:!0,searchCountryPlaceholder:"Search Country",noCountryFoundText:"No Country Found",searchClearable:!0,defaultCountryKey:"",attributes:{},classNames:{}};#N="";#x=null;#P="";#F=null;#k=null;constructor(t,e){Object.assign(this.#S,e),this.#F=e.document||document,this.#k=e.window||window,this.#N=e.assetsURL||"",this.#i="string"==typeof t?this.#F.querySelector(t):t,"string"==typeof this.#S.options&&(this.#S.options=this.#L(this.#S.options)),this.#S.options=this.#S.options.filter(t=>!t.hide),this.#y=[...this.#S.options],this.#C=this.#O(),this.#b=this.#A(),this.fieldKey=this.#S.fieldKey,this.#I=this.#S.contentId,this.init()}init(){this.#d=this.#$(`.${this.fieldKey}-phone-inner-wrp`),this.#p=this.#$(`.${this.fieldKey}-phone-number-input`),this.#n=this.#$(`.${this.fieldKey}-phone-hidden-input`),this.#o=this.#$(`.${this.fieldKey}-input-clear-btn`),this.#l=this.#$(`.${this.fieldKey}-selected-country-img`),this.#u=this.#$(`.${this.fieldKey}-option-search-wrp`),this.#c=this.#$(`.${this.fieldKey}-opt-search-input`),this.#h=this.#$(`.${this.fieldKey}-dpd-wrp`),this.#r=this.#$(`.${this.fieldKey}-option-wrp`),this.#m=this.#$(`.${this.fieldKey}-search-clear-btn`),this.#g=this.#$(`.${this.fieldKey}-option-list`),this.setMenu({open:!1}),this.#B(this.#i,"keydown",t=>{this.#V(t)}),this.#B(this.#h,"click",t=>{this.#W(t)}),this.#B(this.#h,"keyup",t=>{this.#W(t)}),this.#T(),this.#S.defaultCountryKey&&this.setSelectedCountryItem(this.#S.defaultCountryKey),this.#B(this.#p,"blur",t=>{this.#H(t)}),this.#B(this.#p,"input",t=>{this.#K(t)}),this.#B(this.#p,"keydown",t=>{this.#D(t)}),this.#B(this.#p,"focusout",t=>{this.#M(t)}),this.#S.selectedCountryClearable&&this.#B(this.#o,"click",t=>{this.#R(t)}),this.#S.detectCountryByIp&&this.#U(),this.#S.detectCountryByGeo&&this.#_(),this.#S.searchClearable&&(this.#G(this.#c,"padding-right","35px"),this.#G(this.#m,"display","none"),this.#B(this.#m,"click",()=>{this.searchOptions("")})),this.#c&&(this.#c.value=""),this.#B(this.#c,"keyup",t=>{this.#z(t)}),this.#t=this.#S.placeholderImage?this.#S.placeholderImage:this.#t,this.#k.observeElm(this.#n,"value",(t,e)=>{this.#q(t,e)})}#L(t){const e=t.split("->");let s=this.#k;return e.forEach(t=>{s=s[t]}),s}#$(t){return this.#i.querySelector(t)}#B(t,e,s){t&&(t.addEventListener(e,s),this.#w.push({selector:t,eventType:e,cb:s}))}#T(){this.#n.value&&(this.#q("",this.#n.value),this.#S.selectedCountryClearable&&this.#G(this.#o,"display","grid"))}#U(){const{protocol:t}=this.#k.location;fetch(`${t}//${this.#e}`).then(t=>t.text()).then(t=>{const e=t.trim().split("\n").reduce((t,e)=>(t[(e=e.split("="))[0]]=e[1],t),{});this.setSelectedCountryItem(e.loc)})}#_(){navigator.geolocation.getCurrentPosition(t=>{const{latitude:e,longitude:s}=t.coords,{protocol:i}=this.#k.location;fetch(`${"https:"===i?`${i}//secure`:`${i}//api`}.geonames.org/countryCodeJSON?username=bitcodezoho1&lat=${e}&lng=${s}`).then(t=>t.json()).then(t=>{this.setSelectedCountryItem(t.countryCode)})})}#V(t){const e=this.#F.activeElement;let s=null;const i=this.#j();if(t.target!==this.#p){if(i){const i=Number(e.dataset.index||-1);if("ArrowDown"===t.key||!t.shiftKey&&"Tab"===t.key){if(t.preventDefault(),e===this.#c)s=this.#$(".option:not(.disabled-opt)");else if(e.classList.contains("option")){const t=this.#J(i,"next"),e=this.#Q(t);e?s=e:t+1<this.#y.length&&(this.virtualOptionList?.scrollToIndex(t),setTimeout(()=>{const e=this.#Q(t);e&&e.focus()},50))}}else if("ArrowUp"===t.key||t.shiftKey&&"Tab"===t.key){if(t.preventDefault(),e===this.#c)s=this.#p,this.#j()&&this.setMenu({open:!1});else if(e.classList.contains("option")){const t=this.#J(i,"previous"),e=this.#Q(t);e?s=e:t>0?(this.virtualOptionList?.scrollToIndex(t),setTimeout(()=>{const e=this.#Q(t);e&&e.focus()},50)):e||(s=this.#c)}}else"Escape"===t.key&&this.setMenu({open:!1})}else if(t.key>="a"&&t.key<="z"){clearTimeout(this.#x),this.#P+=t.key,this.#x=setTimeout(()=>{this.#P=""},300);const e=this.#S.options.find(t=>!t.disabled&&t.lbl.toLowerCase().startsWith(this.#P));e&&this.setSelectedCountryItem(e.i)}else if("ArrowDown"===t.key||"ArrowUp"===t.key){t.preventDefault();const e=this.#X(),s="ArrowDown"===t.key?"next":"previous",i=this.#J(e,s);i>-1&&i<this.#S.options.length&&(this.value=this.#S.options[i].val)}s&&s.focus()}}#Y(t,e){const s=new Event(e);t.dispatchEvent(s)}#R(){this.#p.value="",this.setSelectedCountryItem(""),this.#Y(this.#p,"input"),this.#Y(this.#n,"blur")}#Q(t){return this.#$(`.${this.fieldKey}-option-list .option[data-index="${t}"]`)}#J(t=-1,e){if("next"===e){const e=this.#S.options.length;for(let s=t+1;s<e;s+=1)if(!this.#S.options[s].disabled)return s}else if("previous"===e)for(let e=t-1;e>=0;e-=1)if(!this.#S.options[e].disabled)return e}#Z(t){this.#i.contains(t.target)||this.setMenu({open:!1})}#O(){return this.#S.options.reduce((t,e)=>{if(!t[e.code]){let{code:s}=e;"+"===s[0]&&(s=s.substring(1)),!(s in t)&&e.ptrn&&(t[s]=e.i)}return t},{})}#A(){const t=this.#S.options,e={},s={};return t.forEach(t=>{const s=t.code;e[s]||(e[s]=[]),e[s].push(t)}),Object.keys(e).forEach(t=>{e[t].length>1&&(s[t]=e[t])}),s}#tt(t){let e=this.#et(t);"+"===e[0]&&(e=e.substring(1,4));let s="";for(let t=3;t>0;t-=1)if(s=e.substring(0,t),s in this.#C)return s;return""}#st(t){let e=this.#tt(t);return e&&"+"!==e[0]&&(e=`+${e}`),e}#et(t){return t.replace(/[^\d+]/g,"")}#it(t){return t.replace(/[^\d]/g,"")}#q(t,e){this.#st(e)&&t!==e&&this.#nt(this.#et(e)),"undefined"!=typeof bit_conditionals&&bit_conditionals({target:this.#n})}#H(){if(this.value.length>3){const t=this.#et(this.value),e=this.#tt(t);this.#p.value=this.#ot(e,t,this.#S.inputFormat)}this.#Y(this.#n,"blur")}#K(t){const{value:e}=t.target;e&&this.#S.selectedCountryClearable?this.#G(this.#o,"display","grid"):this.#S.selectedCountryClearable&&this.#G(this.#o,"display","none"),this.#nt(e)}#D(t){"Backspace"!==t.key&&"Delete"!==t.key||(this.#E=!0)}#nt(t){let e=this.#ht(),s="";s=this.#v?e.code:this.#st(t);const i=this.#rt(t,e);if(s===t||this.#v&&i||i===e?.i||(this.setSelectedCountryItem(i),e=this.#ht()),s&&e){let i=e.frmt;const n=this.#S.valueFormat||"";i||(i=this.#S.inputFormat||"");const o=this.#ot(s,t,i);if(n){const e=this.#ot(s,t,n);this.value=e}else this.value=t;this.#p.value=o}else""===this.#lt(this.#it(t))&&this.value!==t&&(this.value=t)}#at=t=>/[0-9]/.test(t);#ot(t,e,s=""){const i=this.#et(e);let n="",o=0;const h="+"===i[0]?i.substring(1):i;for(let e=0;e<s.length&&!(o>=h.length);e+=1){const i=s[e];if("c"===i){const i="+"===t[0]?t.substring(1):t;n+=i,o+=i.length,n+=/[ \-().+/*[\]{}~|\\x]/.test(s[e+1]||"")&&i.length===h.length&&!this.#E?s[e+1]:""}else if("#"===i){if(!this.#at(h[o]))break;n+=h[o],o+=1}else h[o]===i?(n+=i,o+=1):n+=i}return o<h.length&&(n+=h.substring(o)),this.#E=!1,n}#M(t){const e=this.#it(t.target.value);this.#ut();let s="required";const i=this.#ht();if(i){const t=e.substring(this.#it(i.code).length);if(i.ptrn&&t){const e=i.ptrn.replace(/\$_bf_\$/g,"\\");s=new RegExp(`^(${e})$`).test(t)?"":"invalid"}t||(s="required")}return s&&(s=this.#lt(this.#it(e))??s),s}#lt(t){const e=this.#ut();return e.valid.regexr&&"undefined"!=typeof regexPatternValidation?regexPatternValidation(t,e):""}#rt(t,e){let s=this.#tt(t);s&&"+"!==s[0]&&(s=`+${s}`);let i=this.#C[s.substring(1)]||"";if(e&&e.code===s&&(i=e.i),this.#b[s]){const e=this.#b[s],n=this.#et(t).substring(s.length);e.forEach(t=>{if(t.ptrn&&n){const e=t.ptrn.replace(/\$_bf_\$/g,"\\").trim();if(new RegExp(`^(${e})$`).test(n))return i=t.i,i}})}return i}isValidated(){return this.#M({target:this.#n})}#X(){const t=this.#y.findIndex(t=>t.i===this.#a);return-1===t?0:t}#ht(){return this.#S.options.find(t=>t.i===this.#a)}#ut(){return this.#k.bf_globals[this.#I]?.fields[this.fieldKey]}#ct(t){return this.#F.createElement(t)}#dt(t,e){t.classList.add(e)}#pt(t,e){t.textContent=e}#mt(t,e,s){t?.setAttribute?.(e,s)}#gt(t,e){e.trim().split(/\b\s+\b/g).forEach(e=>this.#dt(t,e))}#ft(t,e){const s=e.length;if(s)for(let i=0;i<s;i+=1)this.#mt(t,e[i].key,e[i].value)}#G(t,e,s){t?.style?.setProperty(e,s,"important")}#yt(){const t=this.#$(".option");if(!t)return;const e=this.#k.getComputedStyle(t),s=parseFloat(e.marginTop)+parseFloat(e.marginBottom),i=t.offsetHeight+s||0;i!==this.#f&&(this.#f=i,this.#g.innerHTML="",this.#Ct())}#Ct(){if(!this.#g)return;this.#g.innerHTML="";const t=this.#y.map((t,e)=>{const s=this.#ct("li");if(this.#mt(s,"data-key",t.i),this.#mt(s,"data-index",e),"option"in this.#S.attributes){const t=this.#S.attributes.option;this.#ft(s,t)}if(!t.i)return this.#pt(s,t.lbl),this.#dt(s,"opt-not-found"),s;if(this.#dt(s,"option"),"option"in this.#S.classNames){const t=this.#S.classNames.option;t&&this.#gt(s,t)}const i=this.#ct("span");if(this.#dt(i,"opt-lbl-wrp"),"opt-lbl-wrp"in this.#S.classNames){const t=this.#S.classNames["opt-lbl-wrp"];t&&this.#gt(i,t)}if("opt-lbl-wrp"in this.#S.attributes){const t=this.#S.attributes["opt-lbl-wrp"];this.#ft(i,t)}if(this.#S.optionFlagImage){const e=this.#ct("img");if(this.#dt(e,"opt-icn"),"opt-icn"in this.#S.classNames){const t=this.#S.classNames["opt-icn"];t&&this.#gt(e,t)}if("opt-icn"in this.#S.attributes){const t=this.#S.attributes["opt-icn"];this.#ft(e,t)}e.src=`${this.#N}/${t.img}`,e.alt=`${t.lbl} flag image`,e.loading="lazy",this.#mt(e,"aria-hidden",!0),i.append(e)}const n=this.#ct("span");if(this.#dt(n,"opt-lbl"),"opt-lbl"in this.#S.classNames){const t=this.#S.classNames["opt-lbl"];t&&this.#gt(n,t)}if("opt-lbl"in this.#S.attributes){const t=this.#S.attributes["opt-lbl"];this.#ft(n,t)}this.#pt(n,t.lbl),i.append(n);const o=this.#ct("span");if(this.#dt(o,"opt-suffix"),"opt-suffix"in this.#S.classNames){const t=this.#S.classNames["opt-suffix"];t&&this.#gt(o,t)}if(this.#pt(o,t.code),this.#mt(o,"data-dev-opt-suffix",this.fieldKey),"opt-suffix"in this.#S.attributes){const t=this.#S.attributes["opt-suffix"];this.#ft(o,t)}return this.#mt(s,"tabindex",this.#j()?"0":"-1"),this.#mt(s,"role","option"),this.#mt(s,"aria-posinset",e+1),this.#mt(s,"aria-setsize",this.#y.length),this.#B(s,"click",t=>{this.#v=!0,this.setSelectedCountryItem(t.currentTarget.dataset.key)}),this.#B(s,"keyup",t=>{"Enter"===t.key&&(this.#v=!0,this.setSelectedCountryItem(t.currentTarget.dataset.key))}),t.disabled&&this.#dt(s,"disabled-opt"),s.append(i,o),this.#a===t.i?(this.#dt(s,"selected-opt"),this.#mt(s,"aria-selected",!0)):this.#mt(s,"aria-selected",!1),s});return this.#g?.append(...t),!0}#bt(t){const e=this.#et(this.#p.value);if(e){let s=this.#ht().frmt;s||(s=this.#S.inputFormat||""),this.#p.value=this.#ot(t,e,s)}else this.#p.value=t;if(e){const e=this.#S.valueFormat||"";this.value=e?this.#ot(t,this.#p.value,e):this.#p.value}else this.value=t}#Et(){this.#a="",this.#S.selectedFlagImage&&(this.#l.src=this.#t),this.#v=!1,this.setMenu({open:!1}),this.value="",this.#S.selectedCountryClearable&&this.#G(this.#o,"display","none")}setSelectedCountryItem(t){if(this.value="",this.#a=t,!this.#a)return void this.#Et();const e=this.#ht();e&&(this.#S.selectedFlagImage&&(this.#l.src=`${this.#N}/${e.img}`),this.#bt(e.code),this.setMenu({open:!1}),this.#v&&this.#p.focus())}#It(){if(!this.#j())return;this.#Ct();const t=this.#X(),e=this.#$(`.option[data-index="${t}"]`);return e&&e.scrollIntoView({block:"nearest",inline:"nearest"}),!0}#vt(t){this.#c&&(this.#c.value=t)}#z(t){if("Enter"===t.key&&this.#y.length){const t=this.#$(".option")?.dataset.key;this.setSelectedCountryItem(t),this.searchOptions("")}else this.searchOptions(t.target.value)}searchOptions(t){this.#vt(t);let e=[];t?(e=this.#S.options.filter(e=>{const s=t.toLowerCase(),i=(e.lbl||"").toLowerCase(),n=(e.val||"").toLowerCase(),o=e.code||"";return!!i.includes(s)||!!n.includes(s)||!!o.includes(s)||void 0}),e.length||(e=[{i:0,lbl:this.#S.noCountryFoundText}]),this.#y=e,this.#S.searchClearable&&this.#G(this.#m,"display","grid")):(this.#y=this.#S.options,this.#S.searchClearable&&this.#G(this.#m,"display","none")),this.#It()}#j(){return this.#i.classList.contains("menu-open")}#wt(){const t=this.#d.getBoundingClientRect(),e=t.top,s=this.#k.innerHeight-t.bottom;s<e&&s<this.#S.maxHeight?(this.#G(this.#i,"flex-direction","column-reverse"),this.#G(this.#i,"bottom","0%")):(this.#G(this.#i,"flex-direction","column"),this.#G(this.#i,"bottom","auto"))}setMenu({open:t}){this.#G(this.#r,"max-height",`${t?this.#S.maxHeight:0}px`),t?(this.#wt(),this.#dt(this.#i,"menu-open"),this.#B(this.#F,"click",t=>this.#Z(t)),this.#mt(this.#c,"tabindex",0),this.#mt(this.#m,"tabindex",0),this.#mt(this.#h,"aria-expanded",!0),this.#It()):(this.#i.classList.remove("menu-open"),this.#F.removeEventListener("click",this.#Z),setTimeout(()=>{this.searchOptions("")},100),this.#mt(this.#c,"tabindex",-1),this.#mt(this.#m,"tabindex",-1),this.#mt(this.#h,"aria-expanded",!1))}#W(t){"Space"===t.code&&(this.#c?.focus(),this.setMenu({open:!0})),"click"===t.type&&(this.#j()?this.setMenu({open:!1}):(this.#c?.focus(),this.setMenu({open:!0})))}set value(t){this.#n.value=t||"",this.#mt(this.#n,"value",t||"")}get value(){return this.#n.value}#St(){this.#w.forEach(({selector:t,eventType:e,cb:s})=>{t.removeEventListener(e,s)})}destroy(){this.#g&&(this.#g.innerHTML=""),this.value="",this.#v=!1,this.#St()}reset(t){this.#Et(),this.destroy(),this.value=t,this.init()}}}();
