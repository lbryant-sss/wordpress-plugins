var Q=Object.defineProperty;var D=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var B=(c,d,o)=>d in c?Q(c,d,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[d]=o,b=(c,d)=>{for(var o in d||(d={}))V.call(d,o)&&B(c,o,d[o]);if(D)for(var o of D(d))X.call(d,o)&&B(c,o,d[o]);return c};import{v as Y,w as Z,r,c as f,j as e,S as T,_ as l}from"./main-381.js";import{p as ee,S as te}from"./bf-605-210.js";import{C as v}from"./bf-691-85.js";import{a7 as se}from"./bf-433-81.js";import{r as ae,F as g,a as _,b as E,c as ie,d as le}from"./bf-162-212.js";import"./bf-540-79.js";import"./bf-35-88.js";import"./bf-878-172.js";import"./bf-445-114.js";import"./bf-370-174.js";function je({formFields:c,setIntegration:d,integrations:o,allIntegURL:U}){var C,S,M;const z=Y(),{id:N}=Z(),[F,y]=r.useState([]),[L,p]=r.useState([]),[O,u]=r.useState([]),[W,G]=r.useState([]),[s,x]=r.useState(b({},o[N])),[H,j]=r.useState({show:!1});r.useEffect(()=>{f({},"bitforms_get_post_type").then(t=>{var a,n;t!=null&&t.success&&(y(Object.values((a=t==null?void 0:t.data)==null?void 0:a.post_types)),G((n=t==null?void 0:t.data)==null?void 0:n.users))}),f({post_type:s==null?void 0:s.post_type},"bitforms_get_metabox_fields").then(t=>{var a,n;t!=null&&t.success&&t!==void 0&&(p((a=t==null?void 0:t.data)==null?void 0:a.metaboxFields),u((n=t==null?void 0:t.data)==null?void 0:n.metaboxFile))})},[]);const h=(t,a,n)=>{const i=b({},s);n?i[t]=Number(a):i[t]=a,x(i)},J=(t,a)=>{const n=b({},s);n[t]=a,f({post_type:a},"bitforms_get_metabox_fields").then(i=>{var w,P,k,I,$,R,q,A;i!=null&&i.success&&i!==void 0&&(p((w=i==null?void 0:i.data)==null?void 0:w.metaboxFields),(P=i==null?void 0:i.data)!=null&&P.metaboxFields&&(n.metabox_map=(I=(k=i==null?void 0:i.data)==null?void 0:k.metaboxFields)==null?void 0:I.filter(m=>m.required).map(m=>({formField:"",metaboxField:m.key,required:m.required})),(($=n==null?void 0:n.metabox_map)==null?void 0:$.length)<1&&(n.acf_map=[{}])),(R=i==null?void 0:i.data)!=null&&R.metaboxFile&&(n.metabox_file_map=(q=i==null?void 0:i.data)==null?void 0:q.metaboxFile.filter(m=>m.required).map(m=>({formField:"",metaboxFileUpload:m.key,required:m.required})),((A=n==null?void 0:n.metabox_file_map)==null?void 0:A.length)<1&&(n.metabox_file_map=[{}])),x(n))})},K=()=>{if(!ie(s)){j({show:!0,msg:l("Please map mandatory fields")});return}if(!le(s)){j({show:!0,msg:l("Please map mandatory fields")});return}se(o,d,U,s,z,N,"edit")};return e.jsxs("div",{style:{width:900},children:[e.jsx(T,{snack:H,setSnackbar:j}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:l("Integration Name ")})}),e.jsx("input",{className:"btcd-paper-inp w-5 mt-1",onChange:t=>h(t.target.name,t.target.value),name:"name",value:s.name,type:"text",placeholder:l("Integration Name...")}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{children:l("Post Type")}),e.jsx(v,{width:250,icnSize:17,className:"ml-2",children:e.jsxs("div",{className:"txt-body",children:["Select one of the defined WordPress post types Or custom post types for the post.",e.jsx("br",{})]})})]}),e.jsxs("div",{children:[e.jsxs("select",{name:"post_type",onChange:t=>J(t.target.name,t.target.value),value:s.post_type,className:"btcd-paper-inp w-5 mt-1",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select Post Type"}),F.map((t,a)=>e.jsx("option",{value:t==null?void 0:t.name,children:t==null?void 0:t.label},`pos-t-${a*9}`))]}),e.jsx("button",{onClick:()=>ae(F,y),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Refresh Post Types")}'`},type:"button",children:"↻"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("b",{children:l("Post Status")}),e.jsx(v,{width:250,icnSize:17,className:"ml-2",children:e.jsxs("div",{className:"txt-body",children:["Select the status for the post. If published status is selected and the post date is in the future, it will automatically be changed to scheduled",e.jsx("br",{})]})})]}),e.jsxs("select",{name:"post_status",onChange:t=>h(t.target.name,t.target.value),value:s.post_status,className:"btcd-paper-inp w-5 mt-1",children:[e.jsx("option",{value:"publish",children:"Publish"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"auto-draft",children:"Auto-Draft"}),e.jsx("option",{value:"private",children:"Private"}),e.jsx("option",{value:"pending",children:"Pending"})]}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{children:l("Author")}),e.jsx(v,{width:250,icnSize:17,className:"ml-2",children:e.jsxs("div",{className:"txt-body",children:["Select the user to be assigned to the post.",e.jsx("br",{})]})})]}),e.jsx("div",{children:e.jsxs("select",{name:"post_author",onChange:t=>h(t.target.name,t.target.value),value:s.post_author,className:"btcd-paper-inp w-5 mt-2",children:[e.jsx("option",{disabled:!0,selected:!0,children:l("Select Author")}),e.jsx("option",{value:"logged_in_user",children:"Logged In User"}),W.map((t,a)=>e.jsx("option",{value:t.ID,children:t.display_name},`pa-${a*2}`))]})}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:l("Comment Status")})}),e.jsxs("select",{name:"comment_status",onChange:t=>h(t.target.name,t.target.value),value:s.comment_status,className:"btcd-paper-inp w-5 mt-1",children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:l("Field Mapping")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Post Fields")})})]})]}),(C=s==null?void 0:s.post_map)==null?void 0:C.map((t,a)=>e.jsx(g,{i:a,type:"post",field:t,formFields:c,dataConf:s,setDataConf:x,customFields:ee},`analytics-m-${a+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>{var t;return _("post_map",(t=s==null?void 0:s.post_map)==null?void 0:t.length,s,x)},className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("div",{children:e.jsxs("p",{className:"p-1 f-m",children:[e.jsx("strong",{children:"Note"})," ",": All your taxonomies will be mapped automatically from your form fields."]})}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mt-3 mb-1",children:[e.jsx("b",{children:l("MetaBox Fields Mapping")}),e.jsx("button",{onClick:()=>E(s,p,u),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Refresh MetaBox List")}'`},type:"button",children:"↻"})]}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Metabox Fields")})})]})]}),(S=s==null?void 0:s.metabox_map)==null?void 0:S.map((t,a)=>e.jsx(g,{i:a,type:"metabox",field:t,formFields:c,dataConf:s,setDataConf:x,customFields:L},`analytics-m-${a+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>_("metabox_map",s.metabox_map.length,s,x),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mt-3 mb-1",children:[e.jsx("b",{children:l("Metabox File Upload Fields Map")}),e.jsx("button",{onClick:()=>E(s,p,u),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${l("Refresh MetaBox List")}'`},type:"button",children:"↻"})]}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Metaxbox Fields")})})]})]}),(M=s==null?void 0:s.metabox_file_map)==null?void 0:M.map((t,a)=>e.jsx(g,{i:a,type:"metaboxFile",field:t,formFields:c,dataConf:s,setDataConf:x,customFields:O,fieldType:"file"},`analytics-m-${a+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>_("metabox_file_map",s.metabox_file_map.length,s,x),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsx(te,{onClick:()=>K()})]})}export{je as default};
