var Y=Object.defineProperty,Z=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var P=(n,o,a)=>o in n?Y(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a,j=(n,o)=>{for(var a in o||(o={}))se.call(o,a)&&P(n,a,o[a]);if(D)for(var a of D(o))te.call(o,a)&&P(n,a,o[a]);return n},F=(n,o)=>Z(n,ee(o));import{r as u,bi as ae,bj as W,j as e,g as M,u as C,t as oe,v as ie,a as A,ac as le,c as v,_ as d,l as L,C as ne,e4 as re,E as ce,x as de,aj as y,S as me,d as ue,b6 as he,b as be,e5 as pe,bh as xe,$ as z,e6 as fe,a$ as O,z as B,I as U,f as we,F as je,aF as ge,q as _e,s as R}from"./main-763.js";import{P as Te}from"./bf-174-73.js";import{u as S}from"./bf-814-69.js";import{A as Ee}from"./bf-201-306.js";import{L as ve}from"./bf-973-75.js";import{L as ye}from"./bf-802-309.js";import{t as Ce}from"./bf-895-185.js";import"./bf-563-72.js";import"./bf-432-79.js";import"./bf-649-82.js";import"./bf-213-81.js";const Ae=ae(()=>W(()=>import("./bf-155-312.js"),["./bf-155-312.js","./main-763.js","./main-763.css"],import.meta.url),{fallback:e.jsx("div",{children:"Loading..."})});function Ve(){const[n,o]=u.useState(!1),[a,m]=u.useState({show:!1}),[p,f]=M(pe),[t,g]=u.useState({show:!1,btnTxt:""}),c=C(xe),h=C(z),{formID:b,formType:r}=oe(),_=ie(),{css:w}=A(),T=le(fe);u.useEffect(()=>{T(),v({formID:b},"bitforms_get_views").then(s=>{if(s===void 0||!s.success)f([]),m({show:!0,msg:s.data});else if(s.success){const i=s.data.map(x=>F(j({},x),{shortcode:`[bitform-view id='${x.id}']`}));f(i)}})},[b]);const q=s=>e.jsxs("div",{style:{lineHeight:.7,fontWeight:500},children:[O(s,h.dateFormat),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:O(s,h.timeFormat)})]}),V=()=>{var s;if(!B((s=h==null?void 0:h.proInfo)==null?void 0:s.installedVersion,"2.9.0")){m({show:!0,msg:"To use this feature you need Bit Form Pro(Version: 2.9.0)"});return}_(`/form/settings/${r}/${b}/data-views/new`)},[$,N]=u.useState([{width:250,minWidth:80,Header:d("View Name"),accessor:"table_name",Cell:s=>e.jsx(L,{to:`/form/settings/${r}/${b}/data-views/${s.row.original.id}`,type:"button",className:"btcd-tabl-lnk",children:s.row.original.table_name})},{width:220,minWidth:200,Header:d("Short Code"),accessor:"shortcode",Cell:s=>e.jsx(ne,{value:s.row.values.shortcode,className:`cpyTxt ${w({w:230})}`})},{width:160,minWidth:60,Header:d("Created"),accessor:"created_at",Cell:s=>q(s.row.original.created_at)}]);u.useEffect(()=>{const s=$.filter(i=>i.accessor!=="t_action");s.push({sticky:"right",width:100,minWidth:60,Header:"Actions",accessor:"t_action",Cell:i=>e.jsxs(re,{title:"Actions",w:165,h:107,children:[e.jsxs(L,{to:`/form/settings/${r}/${b}/data-views/${i.row.original.id}`,type:"button",className:"flx","aria-label":"actions",children:[e.jsx(ce,{size:18}),d("Edit Table")]}),e.jsxs("button",{type:"button",onClick:()=>Q(i.row.original.id,i.row.index),children:[e.jsx(de,{size:16}),"Â ",d("Delete")]})]})}),N([...s])},[c]);const G=u.useCallback(s=>{const i=[],x=[];for(let l=0;l<s.length;l+=1)i.push(s[l].id),x.push(s[l].original.id);const E=[...p],I=[...p];for(let l=i.length-1;l>=0;l-=1)I.splice(Number(i[l]),1);f(l=>y(l,{data:I,type:"set"})),v({tblId:x},"bitforms_bulk_table_delete_form").then(l=>{l===void 0||!l.success?f(X=>y(X,{data:E,type:"set"})):l.success&&m({show:!0,msg:l.data})})},[]),J=(s,i)=>{v({id:s},"bitforms_delete_atable").then(x=>{x.success&&(f(E=>y(E,{type:"remove",data:i})),m({show:!0,msg:d("Table Deleted Successfully")}))})},K=u.useCallback(s=>{N(s)},[]),k=()=>{t.show=!1,g(j({},t))},Q=(s,i)=>{t.action=()=>{J(s,i),k()},t.btnTxt=d("Delete"),t.btn2Txt=null,t.btnClass="",t.body=d("Are you sure to delete this table?"),t.show=!0,g(j({},t))};return e.jsxs("div",{id:"all-forms",children:[e.jsx(me,{snack:a,setSnackbar:m}),e.jsx(ue,{show:t.show,body:t.body,action:t.action,close:k,btnTxt:t.btnTxt,btn2Txt:t.btn2Txt,btn2Action:t.btn2Action,btnClass:t.btnClass}),p.length?e.jsx("div",{children:e.jsx(he,{className:"f-table btcd-all-frm",leftHeaderClasses:w(Ne.leftHeader),height:525,columns:$,data:p,rowSeletable:!0,newTableId:c,resizable:!0,setBulkDelete:G,setTableCols:K,centerHeader:e.jsx("h3",{children:"Data View List (Beta)"}),rightHeader:e.jsx("button",{onClick:()=>V(),type:"button","data-testid":"create-table-btn",className:`round btcd-btn-lg blue blue-sh ${w(be.btn)}`,children:d("Create View")})})}):e.jsx(Ae,{setModal:o,createNewView:V})]})}var $e=u.memo(Ve);const Ne={leftHeader:{width:"auto !important"}};function ke(){var b;const[n,o]=M(ge),a=C(z),{css:m}=A(),{userRoles:p,user:f}=a,t=Object.keys(p).map(r=>({label:p[r].name,value:r})),g=[{label:"All Logged In Users",value:"all_logged_in_users"},...t],{entryEditAccess:c}=n||{},h=(r,_)=>{U&&o(w=>we(w,T=>{je(T,r,_)}))};return e.jsxs("div",{children:[e.jsx("h3",{children:"Views And Edit Access (Beta)"}),!B((b=a==null?void 0:a.proInfo)==null?void 0:b.installedVersion,"2.9.0")&&e.jsxs("p",{children:[e.jsx("strong",{style:{color:"red"},children:" Note:"})," ","To use this feature you need Bit Form Pro(Version: 2.9.0)"," "]}),e.jsx(Ee,{customTitle:e.jsxs("span",{className:m({dy:"flex"}),children:[e.jsxs("b",{children:[e.jsx("span",{className:"mr-2",children:e.jsx(ye,{size:20})}),d("Allow Users to Edit Form Entries")]}),e.jsx(ve,j({},Ce.allowUserToEdit))]}),toggle:!0,action:r=>h("entryEditAccess->allowEntriesEdit",r.target.checked),checked:c==null?void 0:c.allowEntriesEdit,cls:"w-10 mt-3",isPro:!0,proProperty:"is_login",children:e.jsxs("div",{className:m({p:"5px 10px"}),children:[e.jsxs("div",{className:m(H.inputWrp),children:[e.jsx("span",{children:d("Allow Roles to edit won entries")}),e.jsx(S,{defaultValue:(c==null?void 0:c.allowEditOwnEntries)||[],className:"btcd-paper-drpdwn w-6",options:g,onChange:r=>h("entryEditAccess->allowEditOwnEntries",r)})]}),e.jsxs("div",{className:m(H.inputWrp),children:[e.jsx("span",{children:d("Allow Roles to edit Other's entries")}),e.jsx(S,{defaultValue:(c==null?void 0:c.allowEditOtherEntries)||[],className:"btcd-paper-drpdwn w-6",options:t,onChange:r=>h("entryEditAccess->allowEditOtherEntries",r)})]})]})})]})}const H={inputWrp:{dy:"flex",jc:"space-between",ai:"center",mb:10}};function Ie(){const{css:n}=A();return e.jsxs("div",{className:n({pr:75}),children:[!U&&e.jsx(Te,{style:{height:"90%",left:"30px",width:"95%","margin-top":"40px"}}),e.jsx(ke,{}),e.jsx("hr",{}),e.jsx($e,{})]})}const De=u.lazy(()=>W(()=>import("./bf-676-313.js"),["./bf-676-313.js","./main-763.js","./main-763.css","./bf-563-72.js","./bf-620-410.css","./bf-814-69.js","./bf-623-409.css","./bf-57-142.js","./bf-623-179.js","./bf-917-110.js","./bf-432-79.js","./bf-213-81.js","./bf-649-82.js","./bf-479-311.js","./bf-445-109.js","./bf-930-108.js","./bf-244-412.css","./bf-568-112.js","./bf-325-111.js","./bf-311-80.js","./bf-521-148.js","./bf-126-310.js","./bf-899-149.js","./bf-465-71.js","./bf-163-307.js","./bf-126-413.css","./bf-644-103.js","./bf-465-304.js","./bf-192-305.js","./bf-892-136.js","./bf-390-137.js","./bf-174-73.js","./bf-573-107.js"],import.meta.url));function Ge(){return e.jsxs(_e,{children:[e.jsx(R,{index:!0,element:e.jsx(Ie,{})}),e.jsx(R,{path:"/:viewId",element:e.jsx(De,{})})]})}export{Ge as default};
