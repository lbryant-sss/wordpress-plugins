var he=Object.defineProperty,xe=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var ae=(n,s,i)=>s in n?he(n,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[s]=i,q=(n,s)=>{for(var i in s||(s={}))je.call(s,i)&&ae(n,i,s[i]);if(se)for(var i of se(s))ge.call(s,i)&&ae(n,i,s[i]);return n},L=(n,s)=>xe(n,pe(s));import{f as F,j as e,_ as u,r as M,ab as W,av as B,dJ as S,E as Q,bf as ie,x as ve,p as fe,a as ne,S as Z,T as K,b as H,t as be,I as z,u as te,e as Ne,i as _e,L as we,c as ke,V as ye,a_ as Fe,b1 as Se}from"./main-579.js";import{E as ce,f as de,R as Me,a as Pe}from"./bf-399-188.js";import{u as X}from"./bf-934-71.js";import{C}from"./bf-244-83.js";import{C as O}from"./bf-652-81.js";import{M as me}from"./bf-559-69.js";import{t as le}from"./bf-603-185.js";import"./bf-762-72.js";const re=(n,s,i,t,l,r)=>{r(o=>F(o,d=>{d[n][s][t][i.target.name]=i.target.value}))};function D({i:n,type:s,formFields:i,field:t,dataConf:l,setDataConf:r,customFields:o}){const d={login:{propName:"login_map",fldName:"loginField"},reset:{propName:"reset_map",fldName:"resetField"},forgot:{propName:"forgot_map",fldName:"forgotField"}},{propName:j,fldName:p}=d[s],w=!!o.find(c=>c.key===t[p]&&c.required),v=(c,b)=>{const g=q({},l);g[s][j][b].customValue=c.target.value,r(g)};return e.jsx("div",{className:"flx mt-2 mr-1",children:e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp w-5 mr-2",name:"formField",value:t.formField||"",onChange:c=>re(s,j,c,n,l,r),children:[e.jsx("option",{value:"",children:u("Select Field")}),i.map(c=>c.type!=="file-up33"&&e.jsx("option",{value:c.key,children:c.name},`ff-zhcrm-${c.key}`)),e.jsx("option",{value:"custom",children:u("Custom...")})]}),t.formField==="custom"&&e.jsx(me,{onChange:c=>v(c,n),label:u("Custom Value"),className:"mr-2",type:"text",value:t.customValue,placeholder:u("Custom Value")}),e.jsxs("select",{className:"btcd-paper-inp w-5",name:p,value:t[p]||"",onChange:c=>re(s,j,c,n,l,r),disabled:w,children:[e.jsx("option",{value:"",children:u("Select Field")}),o==null?void 0:o.map(c=>e.jsx("option",{value:c.key,children:`${c.name}`},`${c.key}-1`))]})]})})}function qe({fields:n,dataConf:s,setDataConf:i,pages:t,type:l,status:r}){var c,b,g,m,a;const[o,d]=M.useState(!1),j=W(B),p=[{key:"login",name:"Username or Email Address",required:!0}];M.useEffect(()=>{i(x=>F(x,h=>{var N,y,$;($=(y=(N=h[l])==null?void 0:N.forgot_map)==null?void 0:y[0])!=null&&$.forgotField||(h[l].forgot_map=p.filter(A=>A.required).map(A=>({formField:"",forgotField:A.key,required:A.required})))}))},[]);const w=x=>{i(h=>F(h,N=>{const{name:y,value:$}=x.target;N[l][y]=$})),j(h=>L(q({},h),{unsaved:!0}))},v=x=>{i(h=>F(h,N=>{N[l].redirect_url=x.target.value})),j(h=>L(q({},h),{unsaved:!0}))};return e.jsxs("div",{style:{width:800,opacity:r===0&&.6,pointerEvents:r===0&&"none"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Forget Password Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Forgot Password Fields")})})]})]})}),(b=(c=s[l])==null?void 0:c.forgot_map)==null?void 0:b.map((x,h)=>e.jsx(D,{i:h,type:"forgot",field:x,formFields:n,dataConf:s,setDataConf:i,customFields:p},`analytics-m-${h+9}`)),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsxs("div",{className:"f-m fw-500",children:[S("Redirect Page:"),e.jsx(O,{width:250,icnSize:17,className:"ml-1 mt-4 p-0",children:e.jsxs("div",{className:"txt-body",children:["This redirect page will be redirected to the reset form when the email is verified.",e.jsx("br",{})]})})]}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(g=s[l])==null?void 0:g.redirect_url,onChange:x=>v(x),children:[e.jsx("option",{value:"",children:S("Custom Link")}),t&&t.map((x,h)=>e.jsx("option",{value:x.url,children:x.title},`r-url-${h+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2 mt-5 fw-500",children:[e.jsxs("div",{className:"f-m",children:["Link"," ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{onChange:w,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:(m=s[l])==null?void 0:m.redirect_url})]})]}),e.jsx("br",{}),e.jsxs("div",{className:"flx w-5  mt-4",children:[e.jsx("span",{role:"button",tabIndex:"-1",className:"cp",onClick:()=>d(!0),onKeyDown:()=>d(!0),children:e.jsx(Q,{size:21})}),e.jsx("div",{className:"f-m ml-1",children:S("Password reset email template")})]}),e.jsx(ce,{dataConf:s,setDataConf:i,type:l,showMdl:o,setshowMdl:d,tamplate:de,title:"Password reset email template"}),e.jsx("br",{}),e.jsxs("div",{className:"w-5",children:[e.jsx("div",{className:"f-m fw-500",children:S("Success Message:")}),e.jsx("input",{className:"btcd-paper-inp mt-1",onChange:x=>w(x),name:"succ_msg",value:(a=s[l])==null?void 0:a.succ_msg,type:"text",placeholder:S("Success Message")})]})]})}function Re({fields:n,dataConf:s,setDataConf:i,pages:t,type:l,status:r}){var w,v,c,b,g;const o=W(B),d=[{key:"user_login",name:"User Name or Email",required:!0},{key:"password",name:"Password",required:!0},{key:"remember",name:"Remember Me",required:!0}],j=m=>{i(a=>F(a,x=>{const{name:h,value:N}=m.target;x[l][h]=N})),o(a=>L(q({},a),{unsaved:!0}))},p=m=>{i(a=>F(a,x=>{x[l].redirect_url=m.target.value})),o(a=>L(q({},a),{unsaved:!0}))};return M.useEffect(()=>{i(m=>F(m,a=>{var x,h,N;(N=(h=(x=a[l])==null?void 0:x.login_map)==null?void 0:h[0])!=null&&N.loginField||(a[l].login_map=d.filter(y=>y.required).map(y=>({formField:"",loginField:y.key,required:y.required})))}))},[]),e.jsxs("div",{style:{width:800,opacity:r===0&&.6,pointerEvents:r===0&&"none"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Login Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Login Fields")})})]})]})}),(v=(w=s[l])==null?void 0:w.login_map)==null?void 0:v.map((m,a)=>e.jsx(D,{i:a,type:"login",field:m,formFields:n,dataConf:s,setDataConf:i,customFields:d},`analytics-m-${a+9}`)),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m",children:S("Redirect Page:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(c=s[l])==null?void 0:c.redirect_url,onChange:p,children:[e.jsx("option",{value:"",children:S("Custom Link")}),t&&t.map((m,a)=>e.jsx("option",{value:m.url,children:m.title},`r-url-${a+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:"Link:"}),e.jsx("input",{onChange:j,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:(b=s[l])==null?void 0:b.redirect_url})]})]}),e.jsx("br",{}),e.jsx("div",{className:"f-m",children:"Login Success Message "}),e.jsx("input",{onChange:j,name:"succ_msg",className:"btcd-paper-inp mt-1 w-5",type:"text",value:(g=s[l])==null?void 0:g.succ_msg})]})}const oe=[{key:"user_email",name:"Email",required:!0},{key:"user_login",name:"Username"},{key:"nickname",name:"Nickname"},{key:"display_name",name:"Display Name"},{key:"first_name",name:"First Name"},{key:"last_name",name:"Last Name"},{key:"user_pass",name:"Password"},{key:"user_url",name:"Website"},{key:"description",name:"Biographical Info"}],ee=(n,s,i,t,l)=>{l(r=>F(r,o=>{o[n][s].splice(i,0,{})}))},Ee=(n,s,i,t,l)=>{l(r=>F(r,o=>{o[n][s].length>1&&o[n][s].splice(i,1)}))},G=(n,s,i,t,l,r,o,d)=>{const j=q({},l),p=o==null?void 0:o.find(w=>w.key===i.target.value);if(j[n][s][t].userField==="user_email"&&(p==null?void 0:p.typ)!=="email"){d({show:!0,msg:"should be selected email field.."});return}r(w=>F(w,v=>{v[n][s][t][i.target.name]=i.target.value}))},Y=(n,s,i)=>!((n[s]?n[s].filter(l=>!l.formField&&l[i]&&l.required):[]).length>0);function ue({i:n,type:s,formFields:i,field:t,userConf:l,setUserConf:r,customFields:o,setSnackbar:d,fieldType:j,authType:p}){const w=W(B),v={user:{propName:"user_map",fldName:"userField"},meta:{propName:"meta_map",fldName:"metaField"}},{propName:c,fldName:b}=v[s],g=(a,x)=>{const h=fe(l);h[p][c][x].customValue=a.target.value,r(h),w(N=>L(q({},N),{unsaved:!0}))},m=!!o.find(a=>a.key===t[b]&&a.required);return e.jsxs("div",{className:"flx mt-2 mr-1",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:a=>G(p,c,a,n,l,r,i,d),children:[e.jsx("option",{value:"",children:u("Select Field")}),j==="file"?i.map(a=>ie.includes(a.type)&&e.jsx("option",{value:a.key,children:a.name},`ff-zhcrm-${a.key}`)):i==null?void 0:i.map(a=>!ie.includes(a.type)&&e.jsx("option",{value:a.key,children:a.name},`ff-zhcrm-${a.key}`)),j!=="file"&&e.jsx("option",{value:"custom",children:u("Custom...")})]}),t.formField==="custom"&&e.jsx(me,{onChange:a=>g(a,n),label:u("Custom Value"),className:"mr-2",type:"text",value:t.customValue,placeholder:u("Custom Value")}),s!=="meta"?e.jsxs("select",{className:"btcd-paper-inp",name:b,value:t[b]||"",onChange:a=>G(p,c,a,n,l,r,i,d),disabled:m,children:[e.jsx("option",{children:u("Select Field")}),o==null?void 0:o.map(a=>e.jsx("option",{value:a.key,children:`${a.name}`},`${a.key}-1`))]}):e.jsx("input",{className:"btcd-paper-inp",name:b,value:t[b]||"",onChange:a=>G(p,c,a,n,l,r,i,d),type:"text"})]}),!m&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ee(p,c,n,l,r),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>Ee(p,c,n,l,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(ve,{})})]})]})}function Le({formFields:n,userConf:s,setUserConf:i,pages:t,roles:l,type:r}){var x,h,N,y,$,A,_,R,E,I,P,V;const[o,d]=M.useState({show:!1}),[j,p]=M.useState(!1),[w,v]=M.useState(!1),c=W(B),{css:b}=ne(),g=f=>{i(k=>F(k,T=>{const{name:U,value:J}=f.target;T[r][U]=J})),c(k=>L(q({},k),{unsaved:!0}))},m=f=>{i(k=>F(k,T=>{const{name:U,checked:J}=f.target;J?T[r][U]=!0:delete T[r][U]})),c(k=>L(q({},k),{unsaved:!0}))},a=f=>{i(k=>F(k,T=>{const{value:U}=f.target;T[r].redirect_url=U})),c(k=>L(q({},k),{unsaved:!0}))};return e.jsxs(e.Fragment,{children:[e.jsx(Z,{snack:o,setSnackbar:d}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:u("Field Mappping")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:u("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:u("User Fields")})})]})]}),(h=(x=s[r])==null?void 0:x.user_map)==null?void 0:h.map((f,k)=>e.jsx(ue,{i:k,type:"user",field:f,formFields:n,userConf:s,setUserConf:i,customFields:oe,setSnackbar:d,fieldType:"all",authType:"register"},`analytics-m-${k+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>{var f,k;return ee(r,"user_map",(k=(f=s[r])==null?void 0:f.user_map)==null?void 0:k.length,s,i)},className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsxs("div",{className:"flx",children:[e.jsxs("div",{className:"w-5 mt-5 flx",children:[e.jsx(K,{name:"user_notify",onChange:m,title:u("User Email Notification"),checked:!!((N=s[r])!=null&&N.user_notify),value:!1}),e.jsx(O,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["When this option is enabled, a welcome email will be sent from WordPress after registration.",e.jsx("br",{})]})})]}),e.jsxs("div",{className:"w-5 mt-5 flx",children:[e.jsx(K,{name:"admin_notify",onChange:m,title:u("Admin Email Notification"),checked:!!((y=s[r])!=null&&y.admin_notify),value:!1}),e.jsx(O,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["If this option is enabled, e-mail will be sent from WordPress to admin.",e.jsx("br",{})]})})]})]}),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m",children:u("Redirect Page:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:($=s[r])==null?void 0:$.redirect_url,onChange:a,children:[e.jsx("option",{value:"",children:u("Custom Link")}),t&&t.map((f,k)=>e.jsx("option",{value:f.url,children:f.title},`r-url-${k+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:"Link"}),e.jsx("input",{onChange:g,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:(A=s[r])==null?void 0:A.redirect_url})]})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m fw-500",children:u("WP User Role")}),e.jsxs("select",{name:"user_role",onChange:g,value:(_=s[r])==null?void 0:_.user_role,className:"btcd-paper-inp mt-1",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select User Role"}),l.map((f,k)=>e.jsx("option",{value:f==null?void 0:f.key,children:f==null?void 0:f.name},`acf-${k*2}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:u("Success Messages")}),e.jsx("input",{className:"btcd-paper-inp mt-1",onChange:f=>g(f),name:"succ_msg",value:(R=s[r])==null?void 0:R.succ_msg,type:"text",placeholder:u("Success Message")})]})]}),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5",children:[e.jsx("div",{className:"f-m fw-500",children:u("User Approval  Method:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",name:"activation",value:(E=s[r])==null?void 0:E.activation,onChange:g,children:[e.jsx("option",{disabled:!0,selected:!0,value:"",children:u("select approval method")}),e.jsx("option",{value:"auto_approve",children:"Auto Approve"}),e.jsx("option",{value:"admin_review",children:"Require Admin Review"}),e.jsx("option",{value:"email_verify",children:"Require Email Activation"})]})]}),((I=s[r])==null?void 0:I.activation)==="auto_approve"&&e.jsxs("div",{className:"w-5 ml-2 flx",children:[e.jsx(K,{name:"auto_login",onChange:m,title:u("Auto Login After Registration"),checked:!!((P=s[r])!=null&&P.auto_login),value:!1}),e.jsx(O,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["if checked Auto Login, the user login automatically after registration.",e.jsx("br",{})]})})]}),e.jsx(ce,{dataConf:s,setDataConf:i,type:r,showMdl:j,setshowMdl:p,title:"Customize  Activation Email template"})]}),((V=s[r])==null?void 0:V.activation)==="email_verify"&&e.jsxs("div",{className:"flx  integ-fld-wrp",children:[e.jsx("div",{className:"w-5 mt-4",children:e.jsxs("button",{type:"button",className:b(H.btn),onClick:()=>p(!0),children:[e.jsx(Q,{size:18})," ",u("Customize Email template")]})}),e.jsxs("div",{className:"ml-2 mt-4",children:[e.jsxs("button",{type:"button",className:b(H.btn),onClick:()=>v(!0),children:[e.jsx(Q,{size:18})," ",u("Edit verification messages")]}),e.jsx(Me,{dataConf:s,setDataConf:i,showMdl:w,setCustomRedirectMdl:v,pages:t,type:r,title:"Edit verification messages"})]})]})]})]})}function $e({formFields:n,userConf:s,setUserConf:i,type:t}){var o,d;const[l,r]=M.useState([]);return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:u("User Meta Field Mappping")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:u("Meta Value")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:u("Meta Key")})})]})]}),(d=(o=s[t])==null?void 0:o.meta_map)==null?void 0:d.map((j,p)=>e.jsx(ue,{i:p,type:"meta",field:j,formFields:n,userConf:s,setUserConf:i,customFields:l,fieldType:"meta",authType:"register"},`analytics-m-${p+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>{var j;return ee(t,"meta_map",(j=s==null?void 0:s.meta_map)==null?void 0:j.length,s,i)},className:"icn-btn sh-sm",type:"button",children:"+"})})]})}function Ae({formFields:n,dataConf:s,setDataConf:i,pages:t,type:l,status:r}){const{formID:o}=be(),[d,j]=M.useState({show:!1}),[p,w]=M.useState([]);return X("bitforms_get_wp_roles",{},{fetchCondition:z,onSuccess:v=>w(Object.values(v))}),M.useEffect(()=>{i(v=>F(v,c=>{var b,g,m;(m=(g=(b=c[l])==null?void 0:b.user_map)==null?void 0:g[0])!=null&&m.userField||(c[l].user_map=oe.filter(a=>a.required).map(a=>({formField:"",userField:a.key,required:a.required})))}))},[]),e.jsxs("div",{style:{width:900,opacity:r===0&&.6,pointerEvents:r===0&&"none"},children:[e.jsx(Z,{snack:d,setSnackbar:j}),e.jsx("div",{children:e.jsx(Le,{formFields:n,formID:o,userConf:s,setUserConf:i,pages:t,roles:p,type:l})}),e.jsxs("div",{children:[e.jsx($e,{formFields:n,formID:o,userConf:s,setUserConf:i,type:l}),e.jsx("br",{})]}),e.jsxs("p",{className:"p-1 f-m",children:[e.jsx("strong",{children:"Note"})," ",": If the Username and Password fields are blank then the user will take the value of the email field as the field and the password will be auto-generated."]})]})}function Ie({fields:n,dataConf:s,setDataConf:i,type:t,pages:l,status:r}){var w,v,c,b,g;const o=W(B),d=[{key:"new_password",name:"New Password",required:!0},{key:"conf_password",name:"Confirm Password",required:!0}],j=m=>{i(a=>F(a,x=>{const{name:h,value:N}=m.target;x[t][h]=N})),o(a=>L(q({},a),{unsaved:!0}))};M.useEffect(()=>{i(m=>F(m,a=>{var x,h,N;(N=(h=(x=a[t])==null?void 0:x.reset_map)==null?void 0:h[0])!=null&&N.resetField||(a[t].reset_map=d.filter(y=>y.required).map(y=>({formField:"",resetField:y.key,required:y.required})))}))},[]);const p=m=>{i(a=>F(a,x=>{x[t].redirect_url=m.target.value})),o(a=>L(q({},a),{unsaved:!0}))};return e.jsxs("div",{style:{width:800,opacity:r===0&&.6,pointerEvents:r===0&&"none"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Login Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Reset Password Fields")})})]})]})}),(v=(w=s[t])==null?void 0:w.reset_map)==null?void 0:v.map((m,a)=>e.jsx(D,{i:a,type:"reset",field:m,formFields:n,dataConf:s,setDataConf:i,customFields:d},`analytics-m-${a+9}`)),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m fw-500",children:S("Redirect Page:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(c=s[t])==null?void 0:c.redirect_url,onChange:m=>p(m),children:[e.jsx("option",{value:"",children:S("Custom Link")}),l&&l.map((m,a)=>e.jsx("option",{value:m.url,children:m.title},`r-url-${a+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:"Link:"}),e.jsx("input",{onChange:j,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:(b=s[t])==null?void 0:b.redirect_url})]})]}),e.jsx("br",{}),e.jsx("div",{className:"flx integ-fld-wrp",children:e.jsxs("div",{className:"w-5",children:[e.jsx("div",{className:"f-m fw-500",children:S("Success Message:")}),e.jsx("input",{className:"btcd-paper-inp mt-1",onChange:m=>j(m),name:"succ_msg",value:(g=s[t])==null?void 0:g.succ_msg,type:"text",placeholder:S("Success Message")})]})}),e.jsx("br",{})]})}function He(){const[n,s]=M.useState(!1),i=te(Fe),[t,l]=M.useState("register"),r=te(Se),{css:o}=ne(),[d,j]=M.useState({register:{user_map:[{}],succ_msg:"Registration successfully done.",meta_map:[{}],sub:"Activate Your Account",body:Pe,acti_succ_msg:"Your account has been activated successfully.&nbsp;You can now login.",already_activated_msg:"Your account is already activated!",invalid_key_msg:"Sorry! Your URL Is Invalid!!"},login:{login_map:[{}],succ_msg:"You have been successfully logged in."},forgot:{forgot_map:[{}],succ_msg:"We have e-mailed your password reset link!",sub:"Email Subject",body:de},reset:{reset_map:[{}],succ_msg:"Your password has been reset!."}}),[p,w]=M.useState([]),[v,c]=M.useState(0),[b,g]=M.useState({show:!1}),m=W(B),{isLoading:a,mutate:x}=X("bitforms_get_auth_set",{formID:r},{fetchCondition:z,onSuccess:_=>{var R,E;j(I=>F(I,P=>{var V,f;P[(V=_[0])==null?void 0:V.integration_name]=JSON.parse((f=_[0])==null?void 0:f.integration_details)})),l((R=_[0])==null?void 0:R.integration_name),c(Number((E=_[0])==null?void 0:E.status))}});X("bitforms_get_all_wp_pages",{},{fetchCondition:z,onSuccess:_=>w(_)});const h=_=>{if(!z)return;const{name:R,value:E}=_.target;l(E);const I=q({},d);I[R]=E,j(I),m(P=>L(q({},P),{unsaved:!0}))},N=_=>{z&&(_.target.checked?c(1):c(0))},y=()=>{var R,E;let _=!0;return t==="register"&&!Y(d[t],"user_map","userField")&&(g({show:!0,msg:"Please mapped required fields."}),_=!1),t==="register"&&!((R=d[t])!=null&&R.user_role)&&(g({show:!0,msg:"User Role field is required."}),_=!1),t==="forgot"&&!Y(d[t],"forgot_map","forgotField")&&(g({show:!0,msg:"Please mapped required fields."}),_=!1),t==="forgot"&&!((E=d[t])!=null&&E.redirect_url)&&(g({show:!0,msg:"redirect page link is required."}),_=!1),t==="reset"&&!Y(d[t],"reset_map","resetField")&&(g({show:!0,msg:"Please mapped required fields."}),_=!1),t==="login"&&!Y(d[t],"login_map","loginField")&&(g({show:!0,msg:"Please mapped required fields."}),_=!1),_},$=_=>{if(_.preventDefault(),!z)return;s(!0);const R=F(d,P=>{Object.keys(P).forEach(V=>t!==V&&delete P[V]),P.formId=r,P.type=t,P.status=v});if(!y()){s(!1);return}const I=ke(R,"bitforms_save_auth_settings").then(P=>{P!==void 0&&P.success&&(x(R),s(!1))});ye.promise(I,{success:u("Saved successfully."),loading:u("Saving..."),error:u("Something went wrong, Try again.")})},A=()=>{switch(t){case"login":return e.jsx(Re,{fields:i,dataConf:d,setDataConf:j,pages:p,type:t,status:v});case"forgot":return e.jsx(qe,{fields:i,dataConf:d,setDataConf:j,pages:p,type:t,status:v});case"reset":return e.jsx(Ie,{fields:i,dataConf:d,setDataConf:j,pages:p,type:t,status:v});case"register":return e.jsx(Ae,{formFields:i,dataConf:d,setDataConf:j,pages:p,type:t,status:v})}};return e.jsxs("div",{className:"pos-rel",children:[e.jsx(Z,{snack:b,setSnackbar:g}),e.jsx("h2",{className:"",children:u("WP Authentication")}),e.jsxs("h5",{children:["How to setup WP Authentication:  ",e.jsx("a",{href:le.authSettings.link,target:"_blank",rel:"noreferrer",className:"yt-txt ml-1 mr-1",children:"YouTube"}),e.jsx("a",{href:le.authSettingsDoc.link,target:"_blank",rel:"noreferrer",className:"doc-txt",children:"Documentation"})]}),!z&&e.jsx("div",{className:"pro-blur flx",style:{height:"111%",left:-53,width:"104%"},children:e.jsxs("div",{className:"pro",children:[u("Available On"),e.jsx("a",{href:"https://www.bitapps.pro/bit-form",target:"_blank",rel:"noreferrer",children:e.jsx("span",{className:"txt-pro",children:u("Premium")})})]})}),a?e.jsx(Ne,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):e.jsxs("div",{children:[e.jsx("div",{className:"mt-2",children:e.jsxs("label",{htmlFor:"status",children:[e.jsx("b",{children:u("")}),e.jsx(C,{radio:!0,name:"type",onChange:h,checked:t==="register",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Registration"})}),value:"register"}),e.jsx(C,{radio:!0,name:"type",onChange:h,checked:t==="login",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Log In"})}),value:"login"}),e.jsx(C,{radio:!0,name:"type",onChange:h,checked:t==="forgot",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Forgot Password"})}),value:"forgot"}),e.jsx(C,{radio:!0,name:"type",onChange:h,checked:t==="reset",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Reset Password"})}),value:"reset"})]})}),e.jsxs("div",{className:"mt-2 ml-1 flx",children:[e.jsx("label",{htmlFor:"status",children:e.jsx("b",{children:u("Enable")})}),e.jsx(_e,{action:N,checked:v===1,className:"ml-4 flx"})]}),A(),e.jsxs("button",{type:"button",id:"secondary-update-btn",onClick:$,className:o(H.btn,H.blueGrd,{px:20}),disabled:n,children:[u("Save "),n&&e.jsx(we,{size:20,clr:"#fff",className:"ml-2"})]}),e.jsx("div",{children:t!=="register"&&e.jsxs("p",{className:"p-1 f-m",children:[e.jsx("strong",{children:"Note : "})," ","When the login, forgot password or reset password any of these feature enabled in the form, the entries will not be saved in the WP database."]})})]})]})}export{He as default};
