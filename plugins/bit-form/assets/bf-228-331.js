var Ye=Object.defineProperty;var $e=Object.getOwnPropertySymbols;var Ue=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable;var Pe=(m,c,i)=>c in m?Ye(m,c,{enumerable:!0,configurable:!0,writable:!0,value:i}):m[c]=i,Ce=(m,c)=>{for(var i in c||(c={}))Ue.call(c,i)&&Pe(m,i,c[i]);if($e)for(var i of $e(c))Re.call(c,i)&&Pe(m,i,c[i]);return m};import{g as Xe,F as He,i as Ee,u as Se,a as Ve,r as Ge,ea as Je,ap as Qe,j as e,dS as Ze,a1 as qe,b as w,_ as s,Y as Ke,Z as ea,X as Te,Q as aa,I as ta,c6 as sa,f as b,a0 as la,m as ia,z as na,aO as ra,J as da,$ as ca,c7 as oa}from"./main-509.js";import{B as ma,d as pa,i as ze,e as De}from"./bf-760-79.js";import{C as p}from"./bf-413-105.js";import{p as Ie}from"./bf-469-70.js";import"./bf-870-113.js";function wa(){var y,$,P,C,S,T,z,D,I,O,_,A,B,L,W,M,Y,U,R,X,H,E,V,G,J,Q,Z,q,K,ee,ae,te,se,le,ie,ne,re,de,ce,oe,me,pe,he,ge,xe,je,ue,be,ve,we,Ne,fe,ke,Fe,ye;const{formType:m,formID:c,id:i}=Xe(),Oe=He(),[g,h]=Ee(ra),N=Se(da),{css:l}=Ve(),v=Se(ca),{isPro:x}=v,[j]=Ge.useState(()=>N.filter(a=>!Je.includes(a.typ))),t=g[i],_e=`\${bf_pdf_download.${t==null?void 0:t.id}}`,Ae=`\${bf_pdf_password.${t==null?void 0:t.id}}`,Be=Qe(oa),f=()=>{if(!ta){Be(Ce({show:!0},sa.pdfProInstalledAlert));return}const a=b(g,r=>{r.push({updateTem:1})});h(a),Oe(`/form/settings/${m}/${c}/pdf-templates`)},Le=a=>{h(r=>b(r,d=>{(typeof d[i].setting!="object"||d[i].setting===null)&&(d[i].setting={}),d[i].setting.override=!!a.target.checked}))},n=(a,r)=>{let d=r;h(u=>b(u,Me=>{a==="setting->font"&&(d=la(d)),ia(Me[i],a,d)}))},k=(a,r)=>{h(d=>b(d,u=>{a.target.checked?u[i].setting.watermark.active=r:delete u[i].setting.watermark.active}))},We=()=>{if(typeof wp!="undefined"&&wp.media){const a=wp.media({title:"Media",button:{text:"Select picture"},library:{type:"image"},multiple:!1});a.on("select",()=>{const{url:r}=a.state().get("selection").first().toJSON();n("setting->watermark->img->src",r)}),a.open()}},F=(a,r)=>{const d=na(g);r==="pass"&&(d[i].setting.password||(d[i].setting.password={pass:"",static:!0}),d[i].setting.password.pass+=a.target.value),r==="pdfFileName"&&(d[i].setting.pdfFileName+=a.target.value),h(d)};return g.length<1?e.jsx(Ze,{to:`/form/settings/edit/${c}/pdf-templates`,replace:!0}):e.jsxs("div",{style:{width:900},children:[e.jsxs(qe,{to:`/form/settings/${m}/${c}/pdf-templates`,className:`${l(w.btn)} btcd-btn-o-gray`,children:[e.jsx(ma,{className:"mr-1"}),s("Back")]}),e.jsx("button",{id:"secondary-update-btn",onClick:f,className:`${l(w.btn)} blue f-right`,type:"button",children:s("Update Template")}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{className:"w-2",children:s("Template Name:")}),e.jsx("input",{onChange:a=>n(a.target.name,a.target.value),type:"text",className:"btcd-paper-inp w-9",placeholder:s("Template Name"),value:t.title,name:"title"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{children:e.jsx("b",{children:s("Body:")})}),e.jsx("label",{htmlFor:`t-m-e-${i}-${c}`,className:"mt-2 w-10",children:e.jsx(pa,{id:`mail-tem-${c}`,formFields:N,value:t.body,onChangeHandler:a=>n("body",a),width:"100%",mapAllFieldWithTable:!0,mapAllField:!0,height:"400"})})]}),e.jsxs("div",{className:l(o.size),children:[e.jsx("label",{htmlFor:"pdfFilePass",className:l({w:165}),children:e.jsx("b",{children:s("PDF File Name")})}),e.jsxs("div",{className:l({flx:"align-center",gp:10}),children:[e.jsx("input",{id:"pdfFileName",name:"pdfFileName",onChange:a=>n("setting->pdfFileName",a.target.value),value:(y=t.setting)==null?void 0:y.pdfFileName,className:"btcd-paper-inp",placeholder:s("PDF File Name"),type:"text"}),e.jsxs("select",{onChange:a=>F(a,"pdfFileName"),className:"btcd-paper-inp w-5",style:{width:100},children:[e.jsx("option",{value:"",children:s("Add field")}),e.jsx("optgroup",{label:"Form Fields",children:j!==null&&j.map(a=>!a.type.match(/^(file-up|recaptcha)$/)&&e.jsx("option",{value:`\${${a.key}}`,children:a.name},a.key))}),e.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&(($=ze)==null?void 0:$.map(a=>e.jsx("option",{value:`\${${a.name}}`,children:a.label},`ff-rm-${a.name}`)))})]})]})]}),v.proInfo&&!Ke((P=v.proInfo)==null?void 0:P.installedVersion,"2.11.6")&&e.jsx("span",{className:l({mt:20,cr:"red",dy:"inline-block"}),children:"To use those feature (PDF Password, Allow Download, PDF Download Link), please update to Pro version 2.11.6 or later."}),e.jsxs("div",{className:l(o.size),children:[e.jsx("label",{htmlFor:"pdfFilePass",className:l({w:165}),children:e.jsx("b",{children:s("PDF Password")})}),e.jsxs("div",{className:l({flx:"align-center",gp:10}),children:[e.jsx("input",{id:"pdfFilePass",name:"pdfFilePass",onChange:a=>n("setting->password->pass",a.target.value),value:(S=(C=t.setting)==null?void 0:C.password)==null?void 0:S.pass,className:"btcd-paper-inp",placeholder:s("Static Password"),type:"text"}),e.jsxs("select",{onChange:a=>F(a,"pass"),className:"btcd-paper-inp w-5",style:{width:100},children:[e.jsx("option",{value:"",children:s("Add field")}),e.jsx("optgroup",{label:"Form Fields",children:j!==null&&j.map(a=>!a.type.match(/^(file-up|recaptcha)$/)&&e.jsx("option",{value:`\${${a.key}}`,children:a.name},a.key))}),e.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((T=ze)==null?void 0:T.map(a=>!a.name.match(/^(_bf_entry_id)$/)&&e.jsx("option",{value:`\${${a.name}}`,children:a.label},`ff-rm-${a.name}`)))})]}),((D=(z=t.setting)==null?void 0:z.password)==null?void 0:D.pass)&&e.jsx(De,{msg:s("PDF Password Shortcode"),children:e.jsx(Ie,{id:"fld-stng-key",value:Ae,inpWidth:"200",className:l({h:40})})})]})]}),e.jsxs("div",{className:l(o.size),children:[e.jsx("label",{children:e.jsx("b",{children:s("Allow Download (Link)")})}),e.jsxs("div",{className:l({flx:"align-center",gp:10}),children:[e.jsx(p,{radio:!0,onChange:()=>n("setting->allowDownload","all"),checked:((I=t==null?void 0:t.setting)==null?void 0:I.allowDownload)==="all",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:s("All User")})}),value:"all"}),e.jsx(p,{radio:!0,onChange:()=>n("setting->allowDownload","loggedIn"),checked:((O=t==null?void 0:t.setting)==null?void 0:O.allowDownload)==="loggedIn",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:s("Only Logged In User")})}),value:"loggedIn"}),((_=t.setting)==null?void 0:_.allowDownload)&&e.jsx(De,{msg:s("Download Link Shortcode"),children:e.jsx(Ie,{id:"fld-stng-key",value:_e,inpWidth:"200",className:l({dy:"inline-block",h:40})})})]})]}),e.jsx("div",{className:l(o.checkbox),children:e.jsx(p,{onChange:a=>Le(a),checked:(A=t.setting)==null?void 0:A.override,title:s("Override Default Settings")})}),((B=t.setting)==null?void 0:B.override)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:l(o.size),children:[e.jsxs("label",{htmlFor:"paper_size",className:l({w:300,mr:20}),children:[e.jsx("b",{children:s("Paper Size")}),e.jsx("select",{id:"paper_size",name:"paperSize",onChange:a=>n("setting->paperSize",a.target.value),value:(L=t.setting)==null?void 0:L.paperSize,className:"btcd-paper-inp mt-1",children:ea.map((a,r)=>e.jsx("option",{value:a.value,children:a.label},`${r}-${a.val}`))})]}),e.jsxs("label",{htmlFor:"orientation",className:l({w:300}),children:[e.jsx("b",{children:s("Orientation")}),e.jsxs("select",{id:"orientation",name:"orientation",onChange:a=>n("setting->orientation",a.target.value),value:(W=t.setting)==null?void 0:W.orientation,className:"btcd-paper-inp mt-1",children:[e.jsx("option",{value:"p",children:s("Portrait")}),e.jsx("option",{value:"l",children:s("Landscape")})]})]})]}),e.jsxs("div",{className:l(o.size),children:[e.jsxs("label",{htmlFor:"font",className:l({w:300,mr:20}),children:[e.jsx("b",{children:s("Font Family")}),e.jsx("select",{id:"font",name:"font",onChange:a=>n("setting->font",a.target.value),value:(Y=(M=t.setting)==null?void 0:M.font)==null?void 0:Y.name,className:"btcd-paper-inp mt-1",children:Object.keys(Te).map(a=>e.jsx("optgroup",{label:a,children:Te[a].map((r,d)=>e.jsx("option",{value:r.name,children:r.name},`${d}-${r.name}`))},a))})]}),e.jsxs("label",{htmlFor:"fontSize",className:l({w:300}),children:[e.jsx("b",{children:s("Font Size (Pixels)")}),e.jsx("input",{id:"fontSize",name:"fontSize",onChange:a=>n("setting->fontSize",a.target.value),value:(U=t.setting)==null?void 0:U.fontSize,className:"btcd-paper-inp mt-1",placeholder:s("Font Size"),type:"number"})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("label",{htmlFor:"active",children:[e.jsx("b",{children:s("Watermark")}),e.jsx(p,{name:"active",onChange:a=>k(a,"txt"),checked:((X=(R=t.setting)==null?void 0:R.watermark)==null?void 0:X.active)==="txt",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:s("Text")})})}),e.jsx(p,{name:"active",onChange:a=>k(a,"img"),checked:((E=(H=t.setting)==null?void 0:H.watermark)==null?void 0:E.active)==="img",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:s("Image")})})})]})}),((G=(V=t.setting)==null?void 0:V.watermark)==null?void 0:G.active)&&e.jsxs("div",{className:l(o.bdr),children:[((J=t.setting)==null?void 0:J.watermark.active)==="txt"&&e.jsx("div",{className:l(o.size),children:e.jsxs("label",{htmlFor:"watermarkText",className:l({w:300}),children:[e.jsx("b",{children:s("Watermark Text")}),e.jsx("input",{id:"watermarkText",name:"watermarkText",onChange:a=>n("setting->watermark->txt",a.target.value),value:(Z=(Q=t.setting)==null?void 0:Q.watermark)==null?void 0:Z.txt,className:"btcd-paper-inp mt-1",placeholder:s("Watermark Text"),type:"text"})]})}),((q=t.setting)==null?void 0:q.watermark.active)==="img"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsxs("label",{htmlFor:"watermarkImg",className:l({flx:"align-center"}),children:[e.jsx("b",{children:s("Watermark Image")}),e.jsx(aa,{className:"ml-2",onClick:We,children:"Upload"}),((ae=(ee=(K=t.setting)==null?void 0:K.watermark)==null?void 0:ee.img)==null?void 0:ae.src)&&e.jsx("img",{className:l(o.img),src:(le=(se=(te=t.setting)==null?void 0:te.watermark)==null?void 0:se.img)==null?void 0:le.src,alt:""})]})}),e.jsxs("div",{className:l(o.size),children:[e.jsxs("label",{htmlFor:"width",className:l({w:300}),children:[e.jsx("b",{children:s("Width")}),e.jsx("input",{id:"width",onChange:a=>n("setting->watermark->img->width",a.target.value),value:(re=(ne=(ie=t.setting)==null?void 0:ie.watermark)==null?void 0:ne.img)==null?void 0:re.width,className:"btcd-paper-inp mt-1",placeholder:"Image width",type:"number"})]}),e.jsxs("label",{htmlFor:"height",className:l({w:300}),children:[e.jsx("b",{children:s("Height")}),e.jsx("input",{id:"height",onChange:a=>n("setting->watermark->img->height",a.target.value),value:(oe=(ce=(de=t.setting)==null?void 0:de.watermark)==null?void 0:ce.img)==null?void 0:oe.height,className:"btcd-paper-inp mt-1",placeholder:"Image height",type:"number"})]})]}),e.jsxs("div",{className:l(o.size),children:[e.jsxs("label",{htmlFor:"posX",className:l({w:300}),children:[e.jsx("b",{children:s("Position X (Units in millimeters)")}),e.jsx("input",{id:"posX",onChange:a=>n("setting->watermark->img->posX",a.target.value),value:(he=(pe=(me=t.setting)==null?void 0:me.watermark)==null?void 0:pe.img)==null?void 0:he.posX,className:"btcd-paper-inp mt-1",placeholder:"Position x",type:"number"})]}),e.jsxs("label",{htmlFor:"posY",className:l({w:300}),children:[e.jsx("b",{children:s("Position Y (Units in millimeters)")}),e.jsx("input",{id:"posY",onChange:a=>n("setting->watermark->img->posY",a.target.value),value:(je=(xe=(ge=t.setting)==null?void 0:ge.watermark)==null?void 0:xe.img)==null?void 0:je.posY,className:"btcd-paper-inp mt-1",placeholder:"Position Y",type:"number"})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("label",{htmlFor:"imgBehind",children:[e.jsx("b",{children:s("Show watermark behind the page content")}),e.jsx(p,{radio:!0,onChange:a=>n("setting->watermark->img->imgBehind",a.target.value),checked:((ve=(be=(ue=t.setting)==null?void 0:ue.watermark)==null?void 0:be.img)==null?void 0:ve.imgBehind)==="true",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Yes"})}),value:"true"}),e.jsx(p,{radio:!0,onChange:a=>n("setting->watermark->img->imgBehind",a.target.value),checked:((fe=(Ne=(we=t.setting)==null?void 0:we.watermark)==null?void 0:Ne.img)==null?void 0:fe.imgBehind)==="false",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"No"})}),value:"false"})]})})]}),e.jsx("div",{className:l(o.size),children:e.jsxs("label",{htmlFor:"opacity",className:l({w:300}),children:[e.jsx("b",{children:s("Opacity (0-100)")}),e.jsx("input",{id:"opacity",onChange:a=>n("setting->watermark->alpha",a.target.value),value:(Fe=(ke=t.setting)==null?void 0:ke.watermark)==null?void 0:Fe.alpha,className:"btcd-paper-inp mt-1",placeholder:s("Opacity"),max:"100",type:"number"})]})})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("label",{htmlFor:"direction",children:[e.jsx("b",{children:s("Language Direction")}),e.jsx(p,{radio:!0,onChange:a=>n("setting->direction",a.target.value),checked:((ye=t.setting)==null?void 0:ye.direction)==="ltr",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:s("LTR")})}),value:"ltr"}),e.jsx(p,{radio:!0,onChange:a=>n("setting->direction",a.target.value),checked:t.setting.direction==="rtl",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:s("RTL")})}),value:"rtl"})]})}),e.jsx("button",{id:"secondary-update-btn",onClick:f,className:`${l(w.btn)} blue f-right`,type:"button",children:s("Update Template")})]})]})}const o={checkbox:{mt:10},font:{flx:"align-center"},color:{b:"1px solid rgb(239 239 239) !important",w:30,h:30,ml:20},bdr:{pl:15},size:{flx:"align-center",mt:10,gp:40},img:{w:50,ml:20,b:"1px solid var(--white-0-89)",bs:"rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px",brs:5}};export{wa as default};
