var I=Object.defineProperty;var y=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var _=(i,c,t)=>c in i?I(i,c,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[c]=t,b=(i,c)=>{for(var t in c||(c={}))$.call(c,t)&&_(i,t,c[t]);if(y)for(var t of y(c))q.call(c,t)&&_(i,t,c[t]);return i};import{j as e,_ as d,J as M,T as h,u as O,$ as R,e as z}from"./main-381.js";import{P as V,u as P}from"./bf-540-79.js";import{ac as U}from"./bf-433-81.js";import{h as k,d as B,a as w,b as D,c as T,e as E,f as G}from"./bf-252-204.js";import{r as H,a as J}from"./bf-554-89.js";import{S as L}from"./bf-878-172.js";import{M as Z}from"./bf-445-114.js";function K({i,formFields:c,field:t,sheetConf:a,setSheetConf:r,addressField:p}){const u=t.required,x=p.filter(s=>!s.required);return e.jsxs("div",{className:"flx flx-around mt-2 mr-1",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:s=>k(s,i,a,r),children:[e.jsx("option",{value:"",children:d("Select Field")}),c.map(s=>s.type!=="file-up"&&e.jsx("option",{value:s.key,children:s.name},`ff-zhcrm-${s.key}`))]}),e.jsxs("select",{className:"btcd-paper-inp",name:"mailChimpAddressField",value:t.mailChimpAddressField||"",onChange:s=>k(s,i,a,r),disabled:u,children:[e.jsx("option",{value:"",children:d("Select Field")}),u?Object.values(p).map((s,m)=>e.jsx("option",{value:s.tag,children:s.name},`add-${m*2}`)):Object.values(x).map((s,m)=>e.jsx("option",{value:s.tag,children:s.name},`add-${m*2}`))]}),!u&&e.jsx("button",{onClick:()=>B(i,a,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(M,{})})]})}function Q({sheetConf:i,setSheetConf:c,formFields:t,address:a}){var p,u,x;const r=(s,m)=>{const l=b({},i);m==="update"&&(s.target.checked?l.actions.update=!0:delete l.actions.update),m==="double_opt_in"&&(s.target.checked?l.actions.double_opt_in=!0:delete l.actions.double_opt_in),m==="address"&&(s.target.checked?(l.actions.address=!0,l.address_field=a.filter(j=>j.required).map(j=>({formField:"",mailChimpAddressField:j.tag,required:!0}))):(delete l.actions.address,l.address_field="")),c(b({},l))};return e.jsxs("div",{className:"pos-rel d-flx w-8",children:[e.jsx(h,{checked:((p=i.actions)==null?void 0:p.address)||!1,onChange:s=>r(s,"address"),className:"wdt-200 mt-4 mr-2",value:"address",title:d("Add Address Field"),subTitle:d("Add Address Field")}),e.jsx(h,{checked:((u=i.actions)==null?void 0:u.double_opt_in)||!1,onChange:s=>r(s,"double_opt_in"),className:"wdt-200 mt-4 mr-2",value:"double_opt_in",title:d("Double Opt-in"),subTitle:d("Add Double Opt-in")}),e.jsx(h,{checked:((x=i.actions)==null?void 0:x.update)||!1,onChange:s=>r(s,"update"),className:"wdt-200 mt-4 mr-2",value:"user_share",title:d("Update Mail Chimp"),subTitle:d("Update Responses with MailChimp exist Aduience?")})]})}function W({i,formFields:c,field:t,sheetConf:a,setSheetConf:r}){var x,s,m;const p=O(R),{isPro:u}=p;return e.jsxs("div",{className:"flx mt-2 mr-1",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:l=>w(l,i,a,r),children:[e.jsx("option",{value:"",children:d("Select Field")}),e.jsx("optgroup",{label:"Form Fields",children:c.map(l=>l.type!=="file-up"&&e.jsx("option",{value:l.key,children:l.name},`ff-zhcrm-${l.key}`))}),e.jsx("option",{value:"custom",children:d("Custom...")}),e.jsx("optgroup",{label:`General Smart Codes ${u?"":"(PRO)"}`,children:u&&((x=L)==null?void 0:x.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),t.formField==="custom"&&e.jsx(Z,{onChange:l=>D(l,i,a,r),label:d("Custom Value"),className:"mr-2",type:"text",value:t.customValue,placeholder:d("Custom Value")}),e.jsxs("select",{className:"btcd-paper-inp",name:"mailChimpField",value:t.mailChimpField||"",onChange:l=>w(l,i,a,r),children:[e.jsx("option",{value:"",children:d("Select Field")}),((m=(s=a.default)==null?void 0:s.fields)==null?void 0:m[a.listId])&&Object.values(a.default.fields[a.listId]).map((l,j)=>e.jsx("option",{value:l.tag,children:l.name},`mchimp-${j*2}`))]})]}),e.jsx("button",{onClick:()=>T(i,a,r),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>E(i,a,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(M,{})})]})}function le({formID:i,formFields:c,handleInput:t,sheetConf:a,setSheetConf:r,isLoading:p,setisLoading:u,setSnackbar:x,setShowMdl:s}){var j,g,N,v,A,F;const m=[{tag:"addr1",name:"Address 1",required:!0},{tag:"addr2",name:"Address 2",required:!1},{tag:"city",name:"City",required:!0},{tag:"zip",name:"Zip",required:!0},{tag:"state",name:"State",required:!0},{tag:"country",name:"Country",required:!1}],l=n=>{const o=b({},a);n?o.tags=n?n.split(","):[]:delete o.tags,r(b({},o))};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-150 d-in-b",children:d("Authorized App:")}),e.jsxs("select",{className:"btcd-paper-inp w-6",value:a.parentAppId,onChange:t,name:"parentAppId",children:[e.jsx("option",{value:"",children:d("Select an App")}),U([a.type]).map(n=>e.jsx("option",{value:n.id,children:n.integration_name},n.id))]}),e.jsx("button",{"aria-label":"Add New",onClick:()=>s(!0),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Add New Authorize App"'},type:"button",disabled:p,children:e.jsx(V,{size:18})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-150 d-in-b",children:d("Audience List:")}),e.jsxs("select",{onChange:t,name:"listId",value:a.listId,className:"btcd-paper-inp w-6",children:[e.jsx("option",{value:"",children:d("Select Audience List")}),((j=a==null?void 0:a.default)==null?void 0:j.audiencelist)&&Object.keys(a.default.audiencelist).map(n=>e.jsx("option",{value:a.default.audiencelist[n].listId,children:a.default.audiencelist[n].listName},n))]}),e.jsx("button",{onClick:()=>H(i,a,r,u,x),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Audience list"'},type:"button",disabled:p,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"d-flx",children:[e.jsx("b",{style:{marginTop:"15px"},className:"wdt-150 d-in-b",children:d("Tags: ")}),e.jsx(P,{defaultValue:a==null?void 0:a.tags,className:"btcd-paper-drpdwn w-6",options:((g=a==null?void 0:a.default)==null?void 0:g.audienceTags)&&Object.keys(a.default.audienceTags).map(n=>({label:a.default.audienceTags[n].tagName,value:a.default.audienceTags[n].tagName})),onChange:n=>l(n)}),e.jsx("button",{onClick:()=>J(i,a,r,u,x),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Refresh MailChimp Tags")}'`},type:"button",disabled:p,children:"↻"})]}),p&&e.jsx(z,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),((v=(N=a.default)==null?void 0:N.fields)==null?void 0:v[a.listId])&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:d("Map Fields")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Mail Chimp Fields")})})]}),a.field_map.map((n,o)=>e.jsx(W,{i:o,field:n,sheetConf:a,formFields:c,setSheetConf:r},`sheet-m-${o+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>T(a.field_map.length,a,r),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),((A=a.actions)==null?void 0:A.address)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:d("Address Field Map")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Form Address Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Mail Chimp Address Fields")})})]}),(F=a==null?void 0:a.address_field)==null?void 0:F.map((n,o)=>e.jsx(K,{i:o,field:n,sheetConf:a,formFields:c,setSheetConf:r,addressField:m},`sheet-m-${o+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>G(a.address_field.length,a,r),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsx("br",{}),e.jsx("br",{})]}),a.listId&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:d("Actions")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(Q,{sheetConf:a,setSheetConf:r,formFields:c,address:m})]})]})}export{le as M};
