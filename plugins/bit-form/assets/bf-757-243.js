var U=Object.defineProperty,Q=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var T=(t,s,o)=>s in t?U(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o,v=(t,s)=>{for(var o in s||(s={}))Z.call(s,o)&&T(t,o,s[o]);if(P)for(var o of P(s))ee.call(s,o)&&T(t,o,s[o]);return t},w=(t,s)=>Q(t,X(s));import{ae as te,aE as oe,e5 as z,a as A,r as h,j as e,bm as re,b8 as se,z as ae,g as ne,i as le,ap as ie,c as L,h as u,_ as k,I as D,d3 as ce,b0 as de,c7 as me,c6 as ue,b3 as he,V as pe}from"./main-127.js";import"./bf-931-183.js";import{_ as V}from"./bf-665-324.js";import{D as be,B as fe}from"./bf-52-70.js";import{i as ge}from"./bf-131-79.js";import{C as B}from"./bf-583-325.js";import{L as xe}from"./bf-974-277.js";import{S as ve,G as R}from"./bf-983-250.js";import{P as W}from"./bf-790-80.js";import"./bf-479-113.js";import"./bf-373-278.js";import"./bf-346-86.js";import"./bf-468-88.js";const Se=te(oe),ye=t=>t.lbl||t.adminLbl||t.txt,G=()=>Object.entries(Se).map(([t,s])=>({lbl:ye(s)||t,val:`${t}`})),we=()=>ge.map(({name:t,label:s})=>({lbl:s,val:`bfVars["${t}"]`})),Ce=t=>`/* On Field ${z(t)}*/
document.querySelector(\`#form-\${bfContentId}\`).querySelector(\`#fieldKey-\${bfSlNo}\`).addEventListener('${t}', event => {
  /* Write your code here*/
})`,c=t=>({lbl:`On ${z(t)}`,val:Ce(t)}),je=[{type:"group-opts",name:"Global Variables/Property",childs:[{lbl:"Form ID",val:"bf_globals[bfContentId].formId"},...we(),{lbl:"Dummy Data",val:"window.bf_dummy_data = { /* Overwrite Dummy Data */};"}]},{type:"group-opts",name:"Field Keys",childs:[...G()]},{type:"group-opts",name:"Form Events",childs:[{lbl:"On Form Submit Success",val:"/* On Form Submit Success */\ndocument.querySelector(`#form-${bfContentId}`).addEventListener('bf-form-submit-success', ({detail:{formId, entryId, formData}}) => {\n	/* Write your code here... */\n})"},{lbl:"On Form Submit Error",val:"/* On Form Submit Error */\ndocument.querySelector(`#form-${bfContentId}`).addEventListener('bf-form-submit-error', ({detail:{formId, errors}}) => {\n	/* Write your code here... */\n})"},{lbl:"On Form Reset",val:"/* On Form Reset */\ndocument.querySelector(`#form-${bfContentId}`).addEventListener('bf-form-reset', ({detail:{formId}}) => {\n	/* Write your code here... */\n})"},{lbl:"On Form Validation Error",val:"/* On Form Validation Error */\ndocument.querySelector(`#form-${bfContentId}`).addEventListener('bf-form-validation-error', ({detail:{formId, fieldId, error}}) => {\n	/* Write your code here... */\n})"}]},{type:"group-title",name:"Field Events"},{type:"group-accordion",name:"Text Field",childs:[c("change"),c("input"),c("blur"),c("focus")]},{type:"group-accordion",name:"Textarea Field",childs:[c("change"),c("input"),c("blur"),c("focus")]},{type:"group-accordion",name:"Email Field",childs:[c("change"),c("input"),c("blur"),c("focus")]},{type:"group-accordion",name:"Checkbox",childs:[c("change")]},{type:"group-accordion",name:"Select",childs:[c("change")]},{type:"group-accordion",name:"Button",childs:[c("click")]},{type:"group-opts",name:"Filter Functions",childs:[{lbl:"Filter Logic status",val:`function bf_modify_workflow_logic_status(logicStatus, logics, fieldValues, rowIndex, condIndx, props) {
	/* write your code here */ 
	return logicStatus
}`},{lbl:"Filter Razorpay Notes",val:`function bf_modify_razorpay_notes(notes) {
	 /* write your code here */ 
	return notes
}`}]}],Ee=[{type:"group-opts",name:"Field Keys",childs:[...G()]}],_e=t=>{let s=0;return t.reduce((o,a)=>(a.type?(o.push(a),s=0):(s||(o.push({type:"no-group",childs:[]}),s=1),o[o.length-1].childs.push(a)),o),[])};function Fe({options:t,action:s}){var S;const{css:o}=A(),a=_e(t),[_,g]=h.useState(a);h.useEffect(()=>{g(a)},[t]);const F=n=>{const i=n.target.value.toLowerCase().trim();if(!i)return g(a);const j=ae(a).reduce((p,y)=>(y.type!=="group-title"&&(p.push(y),y.childs&&(p[p.length-1].childs=y.childs.filter(N=>N.lbl.toLowerCase().includes(i)),p[p.length-1].childs.length===0&&p.pop())),p),[]);g(j)},x=()=>{b.current.value="",g(a)},b=h.useRef(null);return e.jsxs("div",{className:o(d.main),children:[e.jsxs("div",{className:o(d.fields_search),children:[e.jsx("input",{ref:b,title:"Search Field","aria-label":"Search Field",autoComplete:"off","data-testid":"tlbr-srch-inp",placeholder:"Search...",id:"search-icon",type:"search",name:"searchIcn",onChange:F,className:o(d.search_field)}),((S=b==null?void 0:b.current)==null?void 0:S.value)&&e.jsx("span",{title:"clear",className:o(d.clear_icn),role:"button",tabIndex:"-1",onClick:x,onKeyDown:x,children:"Â "}),e.jsx("span",{title:"search",className:o(d.search_icn),children:e.jsx(re,{size:"20"})})]}),e.jsx(se,{style:{height:"92%"},autoHide:!0,children:e.jsx("div",{className:o(d.groupList),children:_.map(n=>e.jsxs(h.Fragment,{children:[n.type==="group-accordion"&&e.jsx(xe,{title:n.name,children:e.jsx("ul",{className:o(d.ul),children:"childs"in n&&n.childs.map(i=>e.jsx("li",{className:o(d.li),children:e.jsx("button",{type:"button",className:`${o(d.button)} btnHover`,title:i.lbl,onClick:()=>s(i.val),children:i.lbl})},`childs-${i.val}`))})},`group-accordion-${n.name}`),n.type==="group-opts"&&e.jsxs("ul",{className:o(d.ul),children:[n.type.match(/group-opts|group-title/)&&e.jsx("h4",{className:o(d.title),children:n.name}),"childs"in n&&n.childs.map(i=>e.jsx("li",{className:o(d.li),children:e.jsx("button",{type:"button",className:`${o(d.button)} btnHover`,title:i.lbl,onClick:()=>s(i.val),children:i.lbl})},`group-child-${i.val}`))]}),n.type==="group-title"&&e.jsx("h4",{className:o(d.title),children:n.name})]},`group-acc-${n.name}`))})})]})}const d={main:{h:300,w:200,py:3,ow:"hidden"},title:{m:0,pt:7,pb:5,pn:"sticky",tp:0,bd:"#fff",zx:9},fields_search:{pn:"relative",tn:"width .2s"},search_field:{mx:2,w:"98%",oe:"none",b:"none !important",brs:"9px !important",pl:"27px !important",pr:"5px !important",bd:"var(--white-0-97) !important",":focus":{oe:"none",bs:"0px 0px 0px 1.5px var(--b-50) !important",pr:"0px !important","& ~ .shortcut":{dy:"none"},"& ~ span svg":{cr:"var(--b-50)"}},"::placeholder":{fs:12},"::-webkit-search-cancel-button":{appearance:"none"}},search_icn:{pn:"absolute",tp:"50%",mx:6,lt:0,tm:"translateY(-50%)",cr:"var(--white-0-50)",curp:1,"& svg":{dy:"block"}},clear_icn:{pn:"absolute",tp:"50%",mx:6,rt:0,tm:"translateY(-50%)",cr:"var(--white-0-50)",curp:1,w:14,h:14,bd:"var(--white-0-83)",brs:20,backgroundPosition:"54% 50% !important",bi:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 24 24' fill='none' stroke='Black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='18' y1='6' x2='6' y2='18'%3E%3C/line%3E%3Cline x1='6' y1='6' x2='18' y2='18'%3E%3C/line%3E%3C/svg%3E")`},groupList:{mt:10},ul:{mt:0,mb:10},li:{mb:0,mt:5,ml:5},button:{fw:"normal",brs:5,dy:"block",w:"100%",ta:"left",b:0,bd:"none",p:3,curp:1,"&:hover":{bd:"var(--white-0-95)",cr:"var(--black-0)"},fs:11}};function Ge(){const{css:t}=A(),{formType:s,formID:o}=ne(),[a,_]=h.useState("JavaScript"),[g,F]=h.useState(localStorage.getItem("bf-editor-theme")||"tomorrow"),[x,b]=h.useState(localStorage.getItem("bf-enable-editor")||"on"),S=h.useRef({}),[n,i]=le(de),$=ie(me),[j,p]=h.useState(Ne),y=["JavaScript","CSS"],N=[{label:"Light Theme",value:"tomorrow"},{label:"Dark Theme",value:"twilight"}],J=r=>{r&&!(r in S.current)&&(S.current[a]=r)},I=r=>{i(l=>w(v({},l),{[a]:r}))},q=r=>{const l=S.current[a],{editor:f}=l;f.session.insert(f.getCursorPosition(),r);const m=f.getValue();i(E=>w(v({},E),{[a]:m})),l.editor.renderer.scrollBarV.scrollTop!==l.editor.renderer.scrollBarV.maxScrollTop&&l.editor.gotoLine(l.editor.session.getLength()+1)},H=r=>{localStorage.setItem("bf-editor-theme",r),F(r)},M=r=>{const{checked:l}=r.target;l?(b("on"),localStorage.setItem("bf-enable-editor","on")):(b("off"),localStorage.setItem("bf-enable-editor","off"))},K=r=>{if(!D){$(v({show:!0},ue.customCode));return}if(s==="new"){he("#update-btn").click();return}const f=L({form_id:o,customCodes:n},"bitforms_add_custom_code").then(m=>m);pe.promise(f,{loading:k("Updating..."),success:m=>{var E;return((E=m==null?void 0:m.data)==null?void 0:E.message)||(m==null?void 0:m.data)},error:k("Error occurred, Please try again.")}),r.preventDefault()},Y=()=>{if(a==="JavaScript")return je;if(a==="CSS")return Ee},O={mode:a.toLowerCase(),theme:g,name:a,value:n[a]||"",onChange:r=>{I(r)},height:"330px",width:"100%",placeholder:'Write your code here...(Note: Do not use single line"//" comment)',setOptions:j,ref:J};return h.useEffect(()=>{s==="edit"&&!(n.JavaScript||n.CSS)?L({form_id:o},"bitforms_get_custom_code").then(l=>{var f,m;return i({JavaScript:(f=l==null?void 0:l.data)==null?void 0:f.JavaScript,CSS:(m=l==null?void 0:l.data)==null?void 0:m.CSS,isFetched:!0}),l}):s==="new"&&L({form_id:o,customCodes:n},"bitforms_add_custom_code").then(l=>l)},[]),e.jsxs("div",{children:[e.jsxs("div",{className:t({flx:"between"}),children:[e.jsx("div",{className:t(u.w10,{flx:"center",my:2,ml:27}),children:e.jsx(ve,{width:300,options:y.map(r=>({label:r})),onChange:r=>_(r),defaultActive:"JavaScript",actionValue:a,wideTab:!0})}),e.jsx("div",{className:t(u.flxc),children:e.jsxs(be,{place:"bottom-end",children:[e.jsx("button",{"data-testid":"titl-mor-opt-btn","data-close":!0,type:"button",className:t(C.btn),unselectable:"on",draggable:"false",style:{cursor:"pointer"},title:k("Snippets"),children:e.jsx(fe,{size:"16"})}),e.jsx(Fe,{options:Y(),action:q})]})})]}),e.jsx(R,{open:a==="JavaScript",children:e.jsxs("div",{className:"pos-rel",children:[!D&&e.jsx(W,{style:{left:0,width:"100%"}}),x==="on"?e.jsx(V,w(v({},O),{onLoad:r=>{var l;(l=r==null?void 0:r.session)!=null&&l.$worker&&r.session.$worker.send("changeOptions",[{asi:!0}])}})):e.jsx("textarea",{className:t(C.editor,{h:330}),onChange:r=>I(r.target.value),value:n[a]||"",rows:"18"})]})}),e.jsx(R,{open:a==="CSS",children:e.jsxs("div",{className:"pos-rel",children:[!D&&e.jsx(W,{style:{left:0,width:"100%"}}),x==="on"?e.jsx(V,v({},O)):e.jsx("textarea",{className:t(C.editor,{h:330}),onChange:r=>I(r.target.value),value:n[a]||"",rows:"18"})]})}),e.jsxs("div",{className:t(u.flxb,u.mt1,u.mb1,{jc:"between"}),children:[e.jsxs("div",{className:t(u.flxc,u.w10,C.editorBtn),children:[e.jsx(B,{className:t(u.mr2),title:"Editor Mode",checked:x==="on",onChange:M}),x==="on"&&e.jsxs(e.Fragment,{children:[e.jsx(ce,{onChange:H,value:g,options:N,size:"sm",className:t({w:150})}),e.jsx(B,{className:t(u.ml4),title:"Word Wrap",checked:j.wrap,onChange:()=>p(r=>w(v({},r),{wrap:!r.wrap}))})]})]}),e.jsx("button",{onClick:K,type:"button",className:t(u.btn,C.saveBtn),children:"Save"})]})]})}const C={editor:{w:"99%"},btn:{b:0,brs:5,curp:1,flx:"center-between"},theme:{dy:"flex",jc:"flex-end"},editorBtn:{fs:12,pr:5},saveBtn:{bc:"var(--b-50)",brs:8,fs:13,fw:800,px:15,py:8,cr:"var(--white-100)",":hover":{bd:"var(--b-36)"}}},Ne={autoScrollEditorIntoView:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2,animatedScroll:!0,showFoldWidgets:!0,displayIndentGuides:!0,enableEmmet:!0,enableMultiselect:!0,highlightSelectedWord:!0,fontSize:15,useSoftTabs:!0,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0};export{Ge as default};
