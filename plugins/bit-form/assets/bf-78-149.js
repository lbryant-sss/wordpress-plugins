var A=Object.defineProperty;var f=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var _=(c,d,l)=>d in c?A(c,d,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[d]=l,u=(c,d)=>{for(var l in d||(d={}))E.call(d,l)&&_(c,l,d[l]);if(f)for(var l of f(d))$.call(d,l)&&_(c,l,d[l]);return c};import{r as m,g as q,F as R,c as j,j as e,S as T,cb as n}from"./main-559.js";import{p as U,S as B}from"./bf-365-208.js";import{a7 as L}from"./bf-946-81.js";import{P as N,a as y,c as z,b as G}from"./bf-205-211.js";import"./bf-215-82.js";import"./bf-669-79.js";import"./bf-472-172.js";function Z({formFields:c,setIntegration:d,integrations:l,allIntegURL:F}){const[P,S]=m.useState([]),[C,w]=m.useState([]),{id:v}=q(),k=R(),[s,p]=m.useState(u({},l[v])),[I,b]=m.useState([]),[M,x]=m.useState({show:!1});m.useEffect(()=>{j({},"bitforms_get_pod_type").then(t=>{var a,o;t!=null&&t.success&&t!==void 0&&(S(Object.values((a=t.data)==null?void 0:a.post_types)),w((o=t.data)==null?void 0:o.users))}),j({pod_type:s==null?void 0:s.post_type},"bitforms_get_pod_field").then(t=>{t!=null&&t.success&&t!==void 0&&b(Object.values(t==null?void 0:t.data))})},[]);const r=(t,a,o)=>{const i=u({},s);o?i[t]=Number(a):i[t]=a,p(i)},D=(t,a)=>{const o=u({},s);o[t]=a,j({pod_type:a},"bitforms_get_pod_field").then(i=>{var g;i!=null&&i.success&&i!==void 0&&(b(Object.values(i==null?void 0:i.data)),i!=null&&i.data&&(o.pod_map=Object.values(i.data).filter(h=>h.required).map(h=>({formField:"",podFormField:h.key,required:h.required})),((g=o==null?void 0:o.pod_map)==null?void 0:g.length)<1&&(o.pod_map=[{}])),p(o))})},O=()=>{if(!z(s)){x({show:!0,msg:n("Please map mandatory fields")});return}if(!G(s)){x({show:!0,msg:n("Please map mandatory fields")});return}L(l,d,F,s,k,v,"edit")};return e.jsxs("div",{style:{width:900},children:[e.jsx(T,{snack:M,setSnackbar:x}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:n("Integration Name ")})}),e.jsx("input",{className:"btcd-paper-inp w-5 mt-1",onChange:t=>r(t.target.name,t.target.value),name:"name",value:s.name,type:"text",placeholder:n("Integration Name...")}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:n("Post Type")})}),e.jsxs("select",{name:"post_type",onChange:t=>D(t.target.name,t.target.value),value:s==null?void 0:s.post_type,className:"btcd-paper-inp w-5 mt-1",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select Type"}),P.map((t,a)=>e.jsx("option",{value:t.name,children:t.label},`pod-${a*2}`))]}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:n("Post Status")})}),e.jsxs("select",{name:"post_status",onChange:t=>r(t.target.name,t.target.value),value:s==null?void 0:s.post_status,className:"btcd-paper-inp w-5 mt-1",children:[e.jsx("option",{disabled:!0,selected:!0,children:n("Select Status")}),e.jsx("option",{value:"publish",children:"Publish"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"inherit",children:"Inherit"}),e.jsx("option",{value:"auto-draft",children:"Auto-Draft"}),e.jsx("option",{value:"private ",children:"Private"}),e.jsx("option",{value:"pending",children:"Pending"})]}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:n("Comment Status")})}),e.jsxs("select",{name:"comment_status",onChange:t=>r(t.target.name,t.target.value),value:s==null?void 0:s.comment_status,className:"btcd-paper-inp w-5 mt-1",children:[e.jsx("option",{disabled:!0,selected:!0,children:n("Select Status")}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:n("Author")})}),e.jsxs("select",{name:"post_author",onChange:t=>r(t.target.name,t.target.value),value:s==null?void 0:s.post_author,className:"btcd-paper-inp w-5 mt-1",children:[e.jsx("option",{disabled:!0,selected:!0,children:n("Select Author")}),e.jsx("option",{value:"logged_in_user",children:"Logged In User"}),C.map((t,a)=>e.jsx("option",{value:t.ID,children:t.display_name},`pod-${a*2}`))]}),e.jsx("div",{children:e.jsxs("p",{className:"p-1 f-m",children:[e.jsx("strong",{children:"Note"})," ",": All your taxonomies will be mapped automatically from your form fields."]})}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Pod Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("Pod Fields")})})]})]}),s.pod_map.map((t,a)=>e.jsx(N,{i:a,type:"pod",field:t,formFields:c,dataConf:s,setDataConf:p,podFields:I},`analytics-m-${a+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>y("pod_map",s.pod_map.length,s,p),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Post Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("Post Fields")})})]})]}),s.post_map.map((t,a)=>e.jsx(N,{i:a,type:"post",field:t,formFields:c,dataConf:s,setDataConf:p,podFields:U},`analytics-m-${a+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>y("post_map",s.post_map.length,s,p),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx(B,{onClick:()=>O()})]})}export{Z as default};
