var C=(s,r,e)=>new Promise((p,i)=>{var m=l=>{try{o(e.next(l))}catch(d){i(d)}},u=l=>{try{o(e.throw(l))}catch(d){i(d)}},o=l=>l.done?p(l.value):Promise.resolve(l.value).then(m,u);o((e=e.apply(s,r)).next())});import{r as T,c2 as w,j as L,c3 as j}from"./main-878.js";import{S as R}from"./bf-939-172.js";import"./bf-85-79.js";function U({id:s,value:r,formFields:e,smartTags:p=!0,onChangeHandler:i,toolbarMnu:m,menubar:u,height:o,width:l,disabled:d,plugins:k,mapAllFieldWithTable:$,mapAllField:v}){const c=`${s}-settings`,x="https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.9.11",[g,F]=T.useState(typeof window.tinymce!="undefined"),A=g&&window.tinymce.baseURI.source===x,M=()=>C(this,null,function*(){yield j({src:x+"/tinymce.min.js",integrity:"sha256-SnRzknLClR3GaNw9oN4offMGFiPbXQTP7q0yFLPPwgY=",id:"tinymceCDN"});const t=setInterval(()=>{typeof window.tinymce!="undefined"&&(clearInterval(t),F(!0))},100)});T.useEffect(()=>(g||M(),E(),()=>{var n;const t=((n=window.tinymce)==null?void 0:n.get(c))||null;t&&t.remove()}),[g]);const y=t=>t.type==="signature"?`<img width="250" src="\${${t.key}}" alt="${t.key}" />`:`\${${t.key}}`,S=()=>{let t='<table border="1" style="border-collapse: collapse; width: 100%;">';return e==null||e.map(n=>{!w.includes(n.type)&&(t+=`<tr style="border: 1px solid #dddddd; text-align: left; padding: 8px;"><td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">${n.name}</td><td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">${y(n)}</td></tr>`)}),t+="</table>",t},I=()=>{let t="";return e==null||e.map(n=>{!w.includes(n.type)&&(t+=`<p>${n.name}: ${y(n)}</p>`)}),t},E=()=>{window&&window.tinymce&&window.tinymce.init({selector:`textarea#${c}`,menubar:u,height:o||150,width:l||"100%",branding:!1,resize:"verticle",convert_urls:!1,theme:"modern",plugins:k||`directionality fullscreen image link media charmap hr lists textcolor colorpicker ${A?"":"wordpress"}`,toolbar:m||"formatselect | fontsizeselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat toogleCode wp_code | addFormField | addSmartField | mapAllFieldWithTable | mapAllField",image_advtab:!0,default_link_target:"_blank",setup(t){var n;t.on("Paste Change input Undo Redo",()=>{i(t.getContent())}),e&&t.addButton("addFormField",{text:"Form Fields ",tooltip:"Add Form Field Value in Message",type:"menubutton",icon:!1,menu:e==null?void 0:e.map(a=>!w.includes(a.type)&&{text:a.name,onClick(){t.insertContent(y(a))}})}),p&&t.addButton("addSmartField",{text:"Smart Tag Fields",tooltip:"Add Smart Tag Field Value in Message",type:"menubutton",icon:!1,menu:(n=R)==null?void 0:n.map(a=>({text:a.label,onClick(){t.insertContent(`\${${a.name}}`)}}))}),$&&t.addButton("mapAllFieldWithTable",{text:"Map All Field With Table",tooltip:"Map All Field With Table",icon:!1,onclick(){t.insertContent(S())}}),v&&t.addButton("mapAllField",{text:"Map All Field",tooltip:"Map All Field",icon:!1,onclick(){t.insertContent(I())}}),t.addButton("toogleCode",{text:"</>",tooltip:"Toggle preview",icon:!1,onclick(a){const{$:b}=a.control,h=b(`#${c}`),_=b(t.iframeElement);if(h.value=t.getContent({source_view:!0}),_.toggleClass("btcd-mce-tinymce-hidden"),h.toggleClass("btcd-mce-tinymce-visible"),b("iframe.btcd-mce-tinymce-hidden").length>0)h.prependTo(".mce-edit-area");else{const f=document.getElementById(c);f instanceof HTMLTextAreaElement&&t.setContent(f.value)}}})}})};return L.jsx("textarea",{id:c,className:"btcd-paper-inp mt-1 w-10",rows:5,value:r,onChange:t=>i(t.target.value),style:{width:"95.5%",height:"auto"},disabled:d})}export{U as T};
