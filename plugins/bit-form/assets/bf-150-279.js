var RI=Object.defineProperty,CI=Object.defineProperties;var OI=Object.getOwnPropertyDescriptors;var zc=Object.getOwnPropertySymbols;var cf=Object.prototype.hasOwnProperty,hf=Object.prototype.propertyIsEnumerable;var df=Math.pow,lf=(t,e,s)=>e in t?RI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,I=(t,e)=>{for(var s in e||(e={}))cf.call(e,s)&&lf(t,s,e[s]);if(zc)for(var s of zc(e))hf.call(e,s)&&lf(t,s,e[s]);return t},O=(t,e)=>CI(t,OI(e));var uf=(t,e)=>{var s={};for(var i in t)cf.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&zc)for(var i of zc(t))e.indexOf(i)<0&&hf.call(t,i)&&(s[i]=t[i]);return s};var lp=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var r=(t,e,s)=>(lp(t,e,"read from private field"),s?s.call(t):e.get(t)),E=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},T=(t,e,s,i)=>(lp(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s);var l=(t,e,s)=>(lp(t,e,"access private method"),s);var Mo=(t,e,s)=>new Promise((i,n)=>{var a=h=>{try{c(s.next(h))}catch(d){n(d)}},o=h=>{try{c(s.throw(h))}catch(d){n(d)}},c=h=>h.done?i(h.value):Promise.resolve(h.value).then(a,o);c((s=s.apply(t,e)).next())});import{g as qu,u as J,el as LI,b1 as je,r as D,j as u,ds as x,dt as $,R as Fe,i as Mi,aE as Nt,b7 as St,em as $I,z as mn,b4 as Tt,$ as Gc,en as bt,a7 as sr,cJ as Ro,ap as fn,aU as Yu,f as De,m as ua,U as Xu,F as Nm,cL as sl,_ as yi,cP as Zu,bH as Bc,eo as Qu,v as AI,bn as gg,cN as Eg,aY as bg,c7 as Ig,dJ as vg,cT as _g,db as wg,aH as Pm,q as Tg,dC as xg,ep as nh,eq as Sg,cG as Ah,cp as yh,bC as Mh,ar as il,I as Rg,c6 as Cg,dv as yI,cM as Og,ce as MI,b3 as Dm,er as Fm,L as NI,x as PI,y as DI,es as FI,E as jI,an as kI,N as GI}from"./main-127.js";import{j as Nh,s as Ep,b as Lg,k as $g,r as Ag,B as BI}from"./bf-942-110.js";import{C as UI}from"./bf-346-86.js";import{R as yg,F as Ph,M as VI,a as zI}from"./bf-109-246.js";import{R as ht}from"./bf-883-280.js";import"./bf-131-79.js";import"./bf-52-70.js";import"./bf-479-113.js";import"./bf-355-247.js";import"./bf-700-248.js";import"./bf-983-250.js";import"./bf-468-88.js";import"./bf-300-249.js";import"./bf-523-251.js";import"./bf-240-252.js";import"./bf-940-87.js";import"./bf-717-253.js";import"./bf-860-254.js";import"./bf-776-255.js";import"./bf-134-256.js";import"./bf-463-78.js";var Rs,Ws,Ia,ts,es,zi,va,al,ol,ll,br,xn,cl,ss,Hh,Mg,qh,Ng,Yh,Pg,Xh,Dg,Wi,rr,Zh,Fg,Sn,Yr,hl,bp,Rn,Xr,_a,rh;class WI{constructor(e,s){E(this,Hh);E(this,qh);E(this,Yh);E(this,Xh);E(this,Wi);E(this,Zh);E(this,Sn);E(this,hl);E(this,Rn);E(this,_a);E(this,Rs,null);E(this,Ws,null);E(this,Ia,null);E(this,ts,null);E(this,es,{});E(this,zi,null);E(this,va,null);E(this,al,null);E(this,ol,null);E(this,ll,null);E(this,br,null);E(this,xn,[]);E(this,cl,null);E(this,ss,{document:{},formID:null,configSetting:{},ajaxURL:null,nonce:null,uploadFileToServer:null});var i,n,a,o;Object.assign(r(this,ss),s),T(this,zi,s.fieldKey),T(this,ts,s.window?s.window:window),T(this,Ia,s.document?s.document:document),T(this,cl,s.contentId),typeof e=="string"?T(this,Rs,r(this,Ia).querySelector(e)):T(this,Rs,e),T(this,va,r(this,ss).formID),T(this,es,r(this,ss).configSetting),T(this,al,r(this,ss).ajaxURL),T(this,ol,((a=(n=(i=r(this,ts))==null?void 0:i.bf_globals)==null?void 0:n[r(this,cl)])==null?void 0:a.nonce)||((o=r(this,ss))==null?void 0:o.nonce)),T(this,ll,r(this,ss).uploadFileToServer),this.uploaded_files=[],this.on_select_upload=!1,this.init()}init(){this.files=[];const e=[];r(this,es).allowFileSizeValidation&&e.push(r(this,ts).bit_filepond_plugin_file_validate_size),r(this,es).allowFileTypeValidation&&e.push(r(this,ts).bit_filepond_plugin_file_validate_type),r(this,es).allowImageCrop&&e.push(r(this,ts).bit_filepond_plugin_image_crop),r(this,es).allowImagePreview&&e.push(r(this,ts).bit_filepond_plugin_image_preview),r(this,es).allowImageResize&&e.push(r(this,ts).bit_filepond_plugin_image_resize),r(this,es).allowImageTransform&&e.push(r(this,ts).bit_filepond_plugin_image_transform),r(this,es).allowImageValidateSize&&e.push(r(this,ts).bit_filepond_plugin_image_validate_size),r(this,es).allowPreview&&e.push(r(this,ts).bit_filepond_plugin_media_preview);const{create:s,registerPlugin:i}=r(this,ts).bit_filepond;if(i(...e),T(this,Ws,s(r(this,es))),r(this,Rs).appendChild(r(this,Ws).element),setTimeout(()=>{var n;r(this,Rs)&&r(this,Rs).parentNode.parentNode.querySelector(`.${r(this,zi)}-lbl`).setAttribute("for",(n=l(this,_a,rh).call(this,'input[name="filepond"]'))==null?void 0:n.id)},1e3),r(this,ss).onFileUpdate&&r(this,Ws).on("updatefiles",r(this,ss).onFileUpdate),r(this,ll)){const n=new URL(r(this,al));this.on_select_upload=r(this,es).instantUpload,n.searchParams.append("_ajax_nonce",r(this,ol));let a=null;r(this,Ws).setOptions({server:{process:(o,c,h,d,p,m,b)=>{const f=new FormData;n.searchParams.has("action")&&n.searchParams.delete("action"),n.searchParams.append("action","bitforms_file_upload"),f.append(r(this,zi),c,c.name),f.append("fieldKey",r(this,zi)),f.append("formID",r(this,va));const g=new XMLHttpRequest;return g.open("POST",n.href),g.upload.onprogress=v=>{m(v.lengthComputable,v.loaded,v.total)},g.onload=()=>{var v,_;a=JSON.parse(g.responseText),g.status>=200&&g.status<300?(this.uploaded_files.push((v=a==null?void 0:a.data)==null?void 0:v.file_name),d((_=a==null?void 0:a.data)==null?void 0:_.file_name)):p()},g.send(f),{abort:()=>{g.abort(),b()}}},revert:(o,c,h)=>{if(this.uploaded_files.find(p=>p===o)){const p=this.uploaded_files.indexOf(o);this.uploaded_files.splice(p,1),n.searchParams.has("action")&&n.searchParams.delete("action"),n.searchParams.append("action","bitforms_file_delete"),n.searchParams.append("file_name",o),n.searchParams.append("formID",r(this,va));const m=new XMLHttpRequest;return m.open("DELETE",n.href),m.onload=()=>{m.status>=200&&m.status<300?c():h()},m.send(),{abort:()=>{m.abort()}}}}},labelFileProcessingError:()=>a==null?void 0:a.data}),r(this,Ws).on("updatefiles",()=>{this.files=[],this.files=r(this,Ws).getFiles()})}r(this,ss).oldFiles&&l(this,Hh,Mg).call(this,r(this,ss).oldFiles)}reset(){r(this,Ws).destroy(r(this,Ws).element),r(this,Rs).innerHTML="",this.init()}}Rs=new WeakMap,Ws=new WeakMap,Ia=new WeakMap,ts=new WeakMap,es=new WeakMap,zi=new WeakMap,va=new WeakMap,al=new WeakMap,ol=new WeakMap,ll=new WeakMap,br=new WeakMap,xn=new WeakMap,cl=new WeakMap,ss=new WeakMap,Hh=new WeakSet,Mg=function(e){const s=JSON.parse(e);T(this,xn,JSON.parse(e)),T(this,br,l(this,Wi,rr).call(this,"div")),l(this,Sn,Yr).call(this,r(this,br),"old-file-list"),s.forEach(n=>{l(this,qh,Ng).call(this,n)});const i=l(this,Wi,rr).call(this,"input");i.type="hidden",i.name=`${r(this,zi)}_old`,i.value=r(this,xn).toString(),r(this,Rs).appendChild(r(this,br)),r(this,Rs).appendChild(i)},qh=new WeakSet,Ng=function(e){const s=l(this,Wi,rr).call(this,"div"),i=e.replace(/( |\.|\(|\))/g,"");s.id=`file-wrp-${i}`,l(this,Sn,Yr).call(this,s,"file-wrpr");const n=l(this,Wi,rr).call(this,"div");l(this,Sn,Yr).call(this,n,"file-details");const a=l(this,Wi,rr).call(this,"a");l(this,Sn,Yr).call(this,a,"file-title"),l(this,Rn,Xr).call(this,a,"target","_blank"),l(this,Rn,Xr).call(this,a,"href",`${r(this,ss).baseDLURL}&fileID=${e}`),l(this,hl,bp).call(this,a,e),n.append(a),s.append(n);const o=l(this,Wi,rr).call(this,"button");l(this,Sn,Yr).call(this,o,"cross-btn"),l(this,Rn,Xr).call(this,o,"data-file-id",i),l(this,Rn,Xr).call(this,o,"data-file-name",e),l(this,Rn,Xr).call(this,o,"type","button"),l(this,hl,bp).call(this,o,"Ã—"),l(this,Zh,Fg).call(this,o,"click",c=>l(this,Yh,Pg).call(this,c)),s.append(o),r(this,br).appendChild(s)},Yh=new WeakSet,Pg=function(e){const s=e.target.getAttribute("data-file-id"),i=e.target.getAttribute("data-file-name");l(this,Xh,Dg).call(this,`#file-wrp-${s}`),T(this,xn,r(this,xn).filter(n=>n!==i)),l(this,_a,rh).call(this,`input[name="${r(this,zi)}_old"]`).value=r(this,xn).toString()},Xh=new WeakSet,Dg=function(e){var s;(s=l(this,_a,rh).call(this,e))==null||s.remove()},Wi=new WeakSet,rr=function(e){return r(this,Ia).createElement(e)},Zh=new WeakSet,Fg=function(e,s,i){e.addEventListener(s,i)},Sn=new WeakSet,Yr=function(e,s){e.classList.add(s)},hl=new WeakSet,bp=function(e,s){e.textContent=s},Rn=new WeakSet,Xr=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},_a=new WeakSet,rh=function(e){return r(this,Rs).querySelector(e)||void 0};/*!
* FilePondPluginFileValidateSize 2.2.8
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const jg=({addFilter:t,utils:e})=>{const{Type:s,replaceInString:i,toNaturalFileSize:n}=e;return t("ALLOW_HOPPER_ITEM",(a,{query:o})=>{if(!o("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;const c=o("GET_MAX_FILE_SIZE");if(c!==null&&a.size>c)return!1;const h=o("GET_MIN_FILE_SIZE");return!(h!==null&&a.size<h)}),t("LOAD_FILE",(a,{query:o})=>new Promise((c,h)=>{if(!o("GET_ALLOW_FILE_SIZE_VALIDATION"))return c(a);const d=o("GET_FILE_VALIDATE_SIZE_FILTER");if(d&&!d(a))return c(a);const p=o("GET_MAX_FILE_SIZE");if(p!==null&&a.size>p){h({status:{main:o("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:i(o("GET_LABEL_MAX_FILE_SIZE"),{filesize:n(p,".",o("GET_FILE_SIZE_BASE"),o("GET_FILE_SIZE_LABELS",o))})}});return}const m=o("GET_MIN_FILE_SIZE");if(m!==null&&a.size<m){h({status:{main:o("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:i(o("GET_LABEL_MIN_FILE_SIZE"),{filesize:n(m,".",o("GET_FILE_SIZE_BASE"),o("GET_FILE_SIZE_LABELS",o))})}});return}const b=o("GET_MAX_TOTAL_FILE_SIZE");if(b!==null&&o("GET_ACTIVE_ITEMS").reduce((g,v)=>g+v.fileSize,0)>b){h({status:{main:o("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:i(o("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:n(b,".",o("GET_FILE_SIZE_BASE"),o("GET_FILE_SIZE_LABELS",o))})}});return}c(a)})),{options:{allowFileSizeValidation:[!0,s.BOOLEAN],maxFileSize:[null,s.INT],minFileSize:[null,s.INT],maxTotalFileSize:[null,s.INT],fileValidateSizeFilter:[null,s.FUNCTION],labelMinFileSizeExceeded:["File is too small",s.STRING],labelMinFileSize:["Minimum file size is {filesize}",s.STRING],labelMaxFileSizeExceeded:["File is too large",s.STRING],labelMaxFileSize:["Maximum file size is {filesize}",s.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",s.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",s.STRING]}}},HI=typeof window!="undefined"&&typeof window.document!="undefined";HI&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:jg}));/*!
* FilePondPluginFileValidateType 1.2.9
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const kg=({addFilter:t,utils:e})=>{const{Type:s,isString:i,replaceInString:n,guesstimateMimeType:a,getExtensionFromFilename:o,getFilenameFromURL:c}=e,h=(f,g)=>{const v=(/^[^/]+/.exec(f)||[]).pop(),_=g.slice(0,-2);return v===_},d=(f,g)=>f.some(v=>/\*$/.test(v)?h(g,v):v===g),p=f=>{let g="";if(i(f)){const v=c(f),_=o(v);_&&(g=a(_))}else g=f.type;return g},m=(f,g,v)=>{if(g.length===0)return!0;const _=p(f);return v?new Promise((R,w)=>{v(f,_).then(S=>{d(g,S)?R():w()}).catch(w)}):d(g,_)},b=f=>g=>f[g]===null?!1:f[g]||g;return t("SET_ATTRIBUTE_TO_OPTION_MAP",f=>Object.assign(f,{accept:"acceptedFileTypes"})),t("ALLOW_HOPPER_ITEM",(f,{query:g})=>g("GET_ALLOW_FILE_TYPE_VALIDATION")?m(f,g("GET_ACCEPTED_FILE_TYPES")):!0),t("LOAD_FILE",(f,{query:g})=>new Promise((v,_)=>{if(!g("GET_ALLOW_FILE_TYPE_VALIDATION")){v(f);return}const R=g("GET_ACCEPTED_FILE_TYPES"),w=g("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),S=m(f,R,w),C=()=>{const L=R.map(b(g("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(P=>P!==!1),y=L.filter((P,A)=>L.indexOf(P)===A);_({status:{main:g("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:n(g("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:y.join(", "),allButLastType:y.slice(0,-1).join(", "),lastType:y[y.length-1]})}})};if(typeof S=="boolean")return S?v(f):C();S.then(()=>{v(f)}).catch(C)})),{options:{allowFileTypeValidation:[!0,s.BOOLEAN],acceptedFileTypes:[[],s.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",s.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",s.STRING],fileValidateTypeLabelExpectedTypesMap:[{},s.OBJECT],fileValidateTypeDetectType:[null,s.FUNCTION]}}},qI=typeof window!="undefined"&&typeof window.document!="undefined";qI&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:kg}));/*!
* FilePondPluginImageCrop 2.0.6
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const pf=t=>/^image/.test(t.type),Gg=({addFilter:t,utils:e})=>{const{Type:s,isFile:i,getNumericAspectRatioFromString:n}=e,a=(d,p)=>!(!pf(d.file)||!p("GET_ALLOW_IMAGE_CROP")),o=d=>typeof d=="object",c=d=>typeof d=="number",h=(d,p)=>d.setMetadata("crop",Object.assign({},d.getMetadata("crop"),p));return t("DID_CREATE_ITEM",(d,{query:p})=>{d.extend("setImageCrop",m=>{if(!(!a(d,p)||!o(center)))return d.setMetadata("crop",m),m}),d.extend("setImageCropCenter",m=>{if(!(!a(d,p)||!o(m)))return h(d,{center:m})}),d.extend("setImageCropZoom",m=>{if(!(!a(d,p)||!c(m)))return h(d,{zoom:Math.max(1,m)})}),d.extend("setImageCropRotation",m=>{if(!(!a(d,p)||!c(m)))return h(d,{rotation:m})}),d.extend("setImageCropFlip",m=>{if(!(!a(d,p)||!o(m)))return h(d,{flip:m})}),d.extend("setImageCropAspectRatio",m=>{if(!a(d,p)||typeof m=="undefined")return;const b=d.getMetadata("crop"),f=n(m),g={center:{x:.5,y:.5},flip:b?Object.assign({},b.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:f};return d.setMetadata("crop",g),g})}),t("DID_LOAD_ITEM",(d,{query:p})=>new Promise((m,b)=>{const f=d.file;if(!i(f)||!pf(f)||!p("GET_ALLOW_IMAGE_CROP")||d.getMetadata("crop"))return m(d);const v=p("GET_IMAGE_CROP_ASPECT_RATIO");d.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:v?n(v):null}),m(d)})),{options:{allowImageCrop:[!0,s.BOOLEAN],imageCropAspectRatio:[null,s.STRING]}}},YI=typeof window!="undefined"&&typeof window.document!="undefined";YI&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Gg}));/*!
* FilePondPluginImagePreview 4.6.12
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const XI=t=>/^image/.test(t.type),mf=(t,e)=>nl(t.x*e,t.y*e),ff=(t,e)=>nl(t.x+e.x,t.y+e.y),ZI=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?{x:0,y:0}:nl(t.x/e,t.y/e)},Wc=(t,e,s)=>{const i=Math.cos(e),n=Math.sin(e),a=nl(t.x-s.x,t.y-s.y);return nl(s.x+i*a.x-n*a.y,s.y+n*a.x+i*a.y)},nl=(t=0,e=0)=>({x:t,y:e}),ls=(t,e,s=1,i)=>{if(typeof t=="string")return parseFloat(t)*s;if(typeof t=="number")return t*(i?e[i]:Math.min(e.width,e.height))},QI=(t,e,s)=>{const i=t.borderStyle||t.lineStyle||"solid",n=t.backgroundColor||t.fontColor||"transparent",a=t.borderColor||t.lineColor||"transparent",o=ls(t.borderWidth||t.lineWidth,e,s),c=t.lineCap||"round",h=t.lineJoin||"round",d=typeof i=="string"?"":i.map(m=>ls(m,e,s)).join(","),p=t.opacity||1;return{"stroke-linecap":c,"stroke-linejoin":h,"stroke-width":o||0,"stroke-dasharray":d,stroke:a,fill:n,opacity:p}},vs=t=>t!=null,JI=(t,e,s=1)=>{let i=ls(t.x,e,s,"width")||ls(t.left,e,s,"width"),n=ls(t.y,e,s,"height")||ls(t.top,e,s,"height"),a=ls(t.width,e,s,"width"),o=ls(t.height,e,s,"height"),c=ls(t.right,e,s,"width"),h=ls(t.bottom,e,s,"height");return vs(n)||(vs(o)&&vs(h)?n=e.height-o-h:n=h),vs(i)||(vs(a)&&vs(c)?i=e.width-a-c:i=c),vs(a)||(vs(i)&&vs(c)?a=e.width-i-c:a=0),vs(o)||(vs(n)&&vs(h)?o=e.height-n-h:o=0),{x:i||0,y:n||0,width:a||0,height:o||0}},KI=t=>t.map((e,s)=>`${s===0?"M":"L"} ${e.x} ${e.y}`).join(" "),Ni=(t,e)=>Object.keys(e).forEach(s=>t.setAttribute(s,e[s])),tv="http://www.w3.org/2000/svg",pa=(t,e)=>{const s=document.createElementNS(tv,t);return e&&Ni(s,e),s},ev=t=>Ni(t,I(I({},t.rect),t.styles)),sv=t=>{const e=t.rect.x+t.rect.width*.5,s=t.rect.y+t.rect.height*.5,i=t.rect.width*.5,n=t.rect.height*.5;return Ni(t,I({cx:e,cy:s,rx:i,ry:n},t.styles))},iv={contain:"xMidYMid meet",cover:"xMidYMid slice"},nv=(t,e)=>{Ni(t,O(I(I({},t.rect),t.styles),{preserveAspectRatio:iv[e.fit]||"none"}))},rv={left:"start",center:"middle",right:"end"},av=(t,e,s,i)=>{const n=ls(e.fontSize,s,i),a=e.fontFamily||"sans-serif",o=e.fontWeight||"normal",c=rv[e.textAlign]||"start";Ni(t,O(I(I({},t.rect),t.styles),{"stroke-width":0,"font-weight":o,"font-size":n,"font-family":a,"text-anchor":c})),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},ov=(t,e,s,i)=>{Ni(t,O(I(I({},t.rect),t.styles),{fill:"none"}));const n=t.childNodes[0],a=t.childNodes[1],o=t.childNodes[2],c=t.rect,h={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(Ni(n,{x1:c.x,y1:c.y,x2:h.x,y2:h.y}),!e.lineDecoration)return;a.style.display="none",o.style.display="none";const d=ZI({x:h.x-c.x,y:h.y-c.y}),p=ls(.05,s,i);if(e.lineDecoration.indexOf("arrow-begin")!==-1){const m=mf(d,p),b=ff(c,m),f=Wc(c,2,b),g=Wc(c,-2,b);Ni(a,{style:"display:block;",d:`M${f.x},${f.y} L${c.x},${c.y} L${g.x},${g.y}`})}if(e.lineDecoration.indexOf("arrow-end")!==-1){const m=mf(d,-p),b=ff(h,m),f=Wc(h,2,b),g=Wc(h,-2,b);Ni(o,{style:"display:block;",d:`M${f.x},${f.y} L${h.x},${h.y} L${g.x},${g.y}`})}},lv=(t,e,s,i)=>{Ni(t,O(I({},t.styles),{fill:"none",d:KI(e.points.map(n=>({x:ls(n.x,s,i,"width"),y:ls(n.y,s,i,"height")})))}))},Hc=t=>e=>pa(t,{id:e.id}),cv=t=>{const e=pa("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=()=>{e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},hv=t=>{const e=pa("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),s=pa("line");e.appendChild(s);const i=pa("path");e.appendChild(i);const n=pa("path");return e.appendChild(n),e},dv={image:cv,rect:Hc("rect"),ellipse:Hc("ellipse"),text:Hc("text"),path:Hc("path"),line:hv},uv={rect:ev,ellipse:sv,image:nv,text:av,path:lv,line:ov},pv=(t,e)=>dv[t](e),mv=(t,e,s,i,n)=>{e!=="path"&&(t.rect=JI(s,i,n)),t.styles=QI(s,i,n),uv[e](t,s,i,n)},fv=["x","y","left","top","right","bottom","width","height"],gv=t=>typeof t=="string"&&/%/.test(t)?parseFloat(t)/100:t,Ev=t=>{const[e,s]=t,i=s.points?{}:fv.reduce((n,a)=>(n[a]=gv(s[a]),n),{});return[e,I(I({zIndex:0},s),i)]},bv=(t,e)=>t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0,Iv=t=>t.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:e,props:s})=>{if(!s.dirty)return;const{crop:i,resize:n,markup:a}=s,o=s.width,c=s.height;let h=i.width,d=i.height;if(n){const{size:f}=n;let g=f&&f.width,v=f&&f.height;const _=n.mode,R=n.upscale;g&&!v&&(v=g),v&&!g&&(g=v);const w=h<g&&d<v;if(!w||w&&R){let S=g/h,C=v/d;if(_==="force")h=g,d=v;else{let L;_==="cover"?L=Math.max(S,C):_==="contain"&&(L=Math.min(S,C)),h=h*L,d=d*L}}}const p={width:o,height:c};e.element.setAttribute("width",p.width),e.element.setAttribute("height",p.height);const m=Math.min(o/h,c/d);e.element.innerHTML="";const b=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");a.filter(b).map(Ev).sort(bv).forEach(f=>{const[g,v]=f,_=pv(g,v);mv(_,g,v,p,m),e.element.appendChild(_)})}}),Jo=(t,e)=>({x:t,y:e}),vv=(t,e)=>t.x*e.x+t.y*e.y,gf=(t,e)=>Jo(t.x-e.x,t.y-e.y),_v=(t,e)=>vv(gf(t,e),gf(t,e)),Ef=(t,e)=>Math.sqrt(_v(t,e)),bf=(t,e)=>{const s=t,i=1.5707963267948966,n=e,a=1.5707963267948966-e,o=Math.sin(i),c=Math.sin(n),h=Math.sin(a),d=Math.cos(a),p=s/o,m=p*c,b=p*h;return Jo(d*m,d*b)},wv=(t,e)=>{const s=t.width,i=t.height,n=bf(s,e),a=bf(i,e),o=Jo(t.x+Math.abs(n.x),t.y-Math.abs(n.y)),c=Jo(t.x+t.width+Math.abs(a.y),t.y+Math.abs(a.x)),h=Jo(t.x-Math.abs(a.y),t.y+t.height-Math.abs(a.x));return{width:Ef(o,c),height:Ef(o,h)}},Tv=(t,e,s=1)=>{const i=t.height/t.width;let n=1,a=e,o=1,c=i;c>a&&(c=a,o=c/i);const h=Math.max(n/o,a/c),d=t.width/(s*h*o),p=d*e;return{width:d,height:p}},Bg=(t,e,s,i)=>{const n=i.x>.5?1-i.x:i.x,a=i.y>.5?1-i.y:i.y,o=n*2*t.width,c=a*2*t.height,h=wv(e,s);return Math.max(h.width/o,h.height/c)},Ug=(t,e)=>{let s=t.width,i=s*e;i>t.height&&(i=t.height,s=i/e);const n=(t.width-s)*.5,a=(t.height-i)*.5;return{x:n,y:a,width:s,height:i}},xv=(t,e={})=>{let{zoom:s,rotation:i,center:n,aspectRatio:a}=e;a||(a=t.height/t.width);const o=Tv(t,a,s),c={x:o.width*.5,y:o.height*.5},h={x:0,y:0,width:o.width,height:o.height,center:c},d=typeof e.scaleToFit=="undefined"||e.scaleToFit,p=Bg(t,Ug(h,a),i,d?n:{x:.5,y:.5}),m=s*p;return{widthFloat:o.width/m,heightFloat:o.height/m,width:Math.round(o.width/m),height:Math.round(o.height/m)}},mi={type:"spring",stiffness:.5,damping:.45,mass:10},Sv=t=>t.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:e,props:s})=>{e.appendChild(s.image)}}),Rv=t=>t.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:mi,originY:mi,scaleX:mi,scaleY:mi,translateX:mi,translateY:mi,rotateZ:mi}},create:({root:e,props:s})=>{s.width=s.image.width,s.height=s.image.height,e.ref.bitmap=e.appendChildView(e.createChildView(Sv(t),{image:s.image}))},write:({root:e,props:s})=>{const{flip:i}=s.crop,{bitmap:n}=e.ref;n.scaleX=i.horizontal?-1:1,n.scaleY=i.vertical?-1:1}}),Cv=t=>t.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:e,props:s}){s.background&&(e.element.style.backgroundColor=s.background)},create:({root:e,props:s})=>{e.ref.image=e.appendChildView(e.createChildView(Rv(t),Object.assign({},s))),e.ref.createMarkup=()=>{e.ref.markup||(e.ref.markup=e.appendChildView(e.createChildView(Iv(t),Object.assign({},s))))},e.ref.destroyMarkup=()=>{e.ref.markup&&(e.removeChildView(e.ref.markup),e.ref.markup=null)};const i=e.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");i!==null&&(i==="grid"?e.element.dataset.transparencyIndicator=i:e.element.dataset.transparencyIndicator="color")},write:({root:e,props:s,shouldOptimize:i})=>{const{crop:n,markup:a,resize:o,dirty:c,width:h,height:d}=s;e.ref.image.crop=n;const p={x:0,y:0,width:h,height:d,center:{x:h*.5,y:d*.5}},m={width:e.ref.image.width,height:e.ref.image.height},b={x:n.center.x*m.width,y:n.center.y*m.height},f={x:p.center.x-m.width*n.center.x,y:p.center.y-m.height*n.center.y},g=Math.PI*2+n.rotation%(Math.PI*2),v=n.aspectRatio||m.height/m.width,_=typeof n.scaleToFit=="undefined"||n.scaleToFit,R=Bg(m,Ug(p,v),g,_?n.center:{x:.5,y:.5}),w=n.zoom*R;a&&a.length?(e.ref.createMarkup(),e.ref.markup.width=h,e.ref.markup.height=d,e.ref.markup.resize=o,e.ref.markup.dirty=c,e.ref.markup.markup=a,e.ref.markup.crop=xv(m,n)):e.ref.markup&&e.ref.destroyMarkup();const S=e.ref.image;if(i){S.originX=null,S.originY=null,S.translateX=null,S.translateY=null,S.rotateZ=null,S.scaleX=null,S.scaleY=null;return}S.originX=b.x,S.originY=b.y,S.translateX=f.x,S.translateY=f.y,S.rotateZ=g,S.scaleX=w,S.scaleY=w}}),Ov=t=>t.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:mi,scaleY:mi,translateY:mi,opacity:{type:"tween",duration:400}}},create:({root:e,props:s})=>{e.ref.clip=e.appendChildView(e.createChildView(Cv(t),{id:s.id,image:s.image,crop:s.crop,markup:s.markup,resize:s.resize,dirty:s.dirty,background:s.background}))},write:({root:e,props:s,shouldOptimize:i})=>{const{clip:n}=e.ref,{image:a,crop:o,markup:c,resize:h,dirty:d}=s;if(n.crop=o,n.markup=c,n.resize=h,n.dirty=d,n.opacity=i?0:1,i||e.rect.element.hidden)return;const p=a.height/a.width;let m=o.aspectRatio||p;const b=e.rect.inner.width,f=e.rect.inner.height;let g=e.query("GET_IMAGE_PREVIEW_HEIGHT");const v=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),_=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),R=e.query("GET_PANEL_ASPECT_RATIO"),w=e.query("GET_ALLOW_MULTIPLE");R&&!w&&(g=b*R,m=R);let S=g!==null?g:Math.max(v,Math.min(b*m,_)),C=S/m;C>b&&(C=b,S=C*m),S>f&&(S=f,C=f/m),n.width=C,n.height=S}});let Lv=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,If=0;const $v=t=>t.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:e,props:s})=>{let i=Lv;if(document.querySelector("base")){const n=new URL(window.location.href.replace(window.location.hash,"")).href;i=i.replace(/url\(\#/g,"url("+n+"#")}If++,e.element.classList.add(`filepond--image-preview-overlay-${s.status}`),e.element.innerHTML=i.replace(/__UID__/g,If)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),Av=function(){self.onmessage=t=>{createImageBitmap(t.data.message.file).then(e=>{self.postMessage({id:t.data.id,message:e},[e])})}},yv=function(){self.onmessage=t=>{const e=t.data.message.imageData,s=t.data.message.colorMatrix,i=e.data,n=i.length,a=s[0],o=s[1],c=s[2],h=s[3],d=s[4],p=s[5],m=s[6],b=s[7],f=s[8],g=s[9],v=s[10],_=s[11],R=s[12],w=s[13],S=s[14],C=s[15],L=s[16],y=s[17],P=s[18],A=s[19];let F=0,W=0,G=0,B=0,X=0;for(;F<n;F+=4)W=i[F]/255,G=i[F+1]/255,B=i[F+2]/255,X=i[F+3]/255,i[F]=Math.max(0,Math.min((W*a+G*o+B*c+X*h+d)*255,255)),i[F+1]=Math.max(0,Math.min((W*p+G*m+B*b+X*f+g)*255,255)),i[F+2]=Math.max(0,Math.min((W*v+G*_+B*R+X*w+S)*255,255)),i[F+3]=Math.max(0,Math.min((W*C+G*L+B*y+X*P+A)*255,255));self.postMessage({id:t.data.id,message:e},[e.data.buffer])}},Mv=(t,e)=>{let s=new Image;s.onload=()=>{const i=s.naturalWidth,n=s.naturalHeight;s=null,e(i,n)},s.src=t},Nv={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]},Pv=(t,e,s,i)=>{i!==-1&&t.transform.apply(t,Nv[i](e,s))},Dv=(t,e,s,i)=>{e=Math.round(e),s=Math.round(s);const n=document.createElement("canvas");n.width=e,n.height=s;const a=n.getContext("2d");return i>=5&&i<=8&&([e,s]=[s,e]),Pv(a,e,s,i),a.drawImage(t,0,0,e,s),n},Vg=t=>/^image/.test(t.type)&&!/svg/.test(t.type),Fv=10,jv=10,kv=t=>{const e=Math.min(Fv/t.width,jv/t.height),s=document.createElement("canvas"),i=s.getContext("2d"),n=s.width=Math.ceil(t.width*e),a=s.height=Math.ceil(t.height*e);i.drawImage(t,0,0,n,a);let o=null;try{o=i.getImageData(0,0,n,a).data}catch(b){return null}const c=o.length;let h=0,d=0,p=0,m=0;for(;m<c;m+=4)h+=o[m]*o[m],d+=o[m+1]*o[m+1],p+=o[m+2]*o[m+2];return h=cp(h,c),d=cp(d,c),p=cp(p,c),{r:h,g:d,b:p}},cp=(t,e)=>Math.floor(Math.sqrt(t/(e/4))),Gv=(t,e)=>(e=e||document.createElement("canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e),Bv=t=>{let e;try{e=new ImageData(t.width,t.height)}catch(s){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(new Uint8ClampedArray(t.data)),e},Uv=t=>new Promise((e,s)=>{const i=new Image;i.crossOrigin="Anonymous",i.onload=()=>{e(i)},i.onerror=n=>{s(n)},i.src=t}),Vv=t=>{const e=$v(t),s=Ov(t),{createWorker:i}=t.utils,n=(w,S,C)=>new Promise(L=>{w.ref.imageData||(w.ref.imageData=C.getContext("2d").getImageData(0,0,C.width,C.height));const y=Bv(w.ref.imageData);if(!S||S.length!==20)return C.getContext("2d").putImageData(y,0,0),L();const P=i(yv);P.post({imageData:y,colorMatrix:S},A=>{C.getContext("2d").putImageData(A,0,0),P.terminate(),L()},[y.data.buffer])}),a=(w,S)=>{w.removeChildView(S),S.image.width=1,S.image.height=1,S._destroy()},o=({root:w})=>{const S=w.ref.images.shift();return S.opacity=0,S.translateY=-15,w.ref.imageViewBin.push(S),S},c=({root:w,props:S,image:C})=>{const L=S.id,y=w.query("GET_ITEM",{id:L});if(!y)return;const P=y.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},A=w.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let F,W,G=!1;w.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(F=y.getMetadata("markup")||[],W=y.getMetadata("resize"),G=!0);const B=w.appendChildView(w.createChildView(s,{id:L,image:C,crop:P,resize:W,markup:F,dirty:G,background:A,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),w.childViews.length);w.ref.images.push(B),B.opacity=1,B.scaleX=1,B.scaleY=1,B.translateY=0,setTimeout(()=>{w.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:L})},250)},h=({root:w,props:S})=>{const C=w.query("GET_ITEM",{id:S.id});if(!C)return;const L=w.ref.images[w.ref.images.length-1];L.crop=C.getMetadata("crop"),L.background=w.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),w.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(L.dirty=!0,L.resize=C.getMetadata("resize"),L.markup=C.getMetadata("markup"))},d=({root:w,props:S,action:C})=>{if(!/crop|filter|markup|resize/.test(C.change.key)||!w.ref.images.length)return;const L=w.query("GET_ITEM",{id:S.id});if(L){if(/filter/.test(C.change.key)){const y=w.ref.images[w.ref.images.length-1];n(w,C.change.value,y.image);return}if(/crop|markup|resize/.test(C.change.key)){const y=L.getMetadata("crop"),P=w.ref.images[w.ref.images.length-1];if(y&&y.aspectRatio&&P.crop&&P.crop.aspectRatio&&Math.abs(y.aspectRatio-P.crop.aspectRatio)>1e-5){const A=o({root:w});c({root:w,props:S,image:Gv(A.image)})}else h({root:w,props:S})}}},p=w=>{const C=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./),L=C?parseInt(C[1]):null;return L!==null&&L<=58?!1:"createImageBitmap"in window&&Vg(w)},m=({root:w,props:S})=>{const{id:C}=S,L=w.query("GET_ITEM",C);if(!L)return;const y=URL.createObjectURL(L.file);Mv(y,(P,A)=>{w.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:C,width:P,height:A})})},b=({root:w,props:S})=>{const{id:C}=S,L=w.query("GET_ITEM",C);if(!L)return;const y=URL.createObjectURL(L.file),P=()=>{Uv(y).then(A)},A=F=>{URL.revokeObjectURL(y);const G=(L.getMetadata("exif")||{}).orientation||-1;let{width:B,height:X}=F;if(!B||!X)return;G>=5&&G<=8&&([B,X]=[X,B]);const M=Math.max(1,window.devicePixelRatio*.75),j=w.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*M,N=X/B,k=w.rect.element.width,U=w.rect.element.height;let Y=k,z=Y*N;N>1?(Y=Math.min(B,k*j),z=Y*N):(z=Math.min(X,U*j),Y=z/N);const ot=Dv(F,Y,z,G),nt=()=>{const gt=w.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?kv(data):null;L.setMetadata("color",gt,!0),"close"in F&&F.close(),w.ref.overlayShadow.opacity=1,c({root:w,props:S,image:ot})},lt=L.getMetadata("filter");lt?n(w,lt,ot).then(nt):nt()};if(p(L.file)){const F=i(Av);F.post({file:L.file},W=>{if(F.terminate(),!W){P();return}A(W)})}else P()},f=({root:w})=>{const S=w.ref.images[w.ref.images.length-1];S.translateY=0,S.scaleX=1,S.scaleY=1,S.opacity=1},g=({root:w})=>{w.ref.overlayShadow.opacity=1,w.ref.overlayError.opacity=0,w.ref.overlaySuccess.opacity=0},v=({root:w})=>{w.ref.overlayShadow.opacity=.25,w.ref.overlayError.opacity=1},_=({root:w})=>{w.ref.overlayShadow.opacity=.25,w.ref.overlaySuccess.opacity=1},R=({root:w})=>{w.ref.images=[],w.ref.imageData=null,w.ref.imageViewBin=[],w.ref.overlayShadow=w.appendChildView(w.createChildView(e,{opacity:0,status:"idle"})),w.ref.overlaySuccess=w.appendChildView(w.createChildView(e,{opacity:0,status:"success"})),w.ref.overlayError=w.appendChildView(w.createChildView(e,{opacity:0,status:"failure"}))};return t.utils.createView({name:"image-preview-wrapper",create:R,styles:["height"],apis:["height"],destroy:({root:w})=>{w.ref.images.forEach(S=>{S.image.width=1,S.image.height=1})},didWriteView:({root:w})=>{w.ref.images.forEach(S=>{S.dirty=!1})},write:t.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:f,DID_IMAGE_PREVIEW_CONTAINER_CREATE:m,DID_FINISH_CALCULATE_PREVIEWSIZE:b,DID_UPDATE_ITEM_METADATA:d,DID_THROW_ITEM_LOAD_ERROR:v,DID_THROW_ITEM_PROCESSING_ERROR:v,DID_THROW_ITEM_INVALID:v,DID_COMPLETE_ITEM_PROCESSING:_,DID_START_ITEM_PROCESSING:g,DID_REVERT_ITEM_PROCESSING:g},({root:w})=>{const S=w.ref.imageViewBin.filter(C=>C.opacity===0);w.ref.imageViewBin=w.ref.imageViewBin.filter(C=>C.opacity>0),S.forEach(C=>a(w,C)),S.length=0})})},zg=t=>{const{addFilter:e,utils:s}=t,{Type:i,createRoute:n,isFile:a}=s,o=Vv(t);return e("CREATE_VIEW",c=>{const{is:h,view:d,query:p}=c;if(!h("file")||!p("GET_ALLOW_IMAGE_PREVIEW"))return;const m=({root:_,props:R})=>{const{id:w}=R,S=p("GET_ITEM",w);if(!S||!a(S.file)||S.archived)return;const C=S.file;if(!XI(C)||!p("GET_IMAGE_PREVIEW_FILTER_ITEM")(S))return;const L="createImageBitmap"in(window||{}),y=p("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!L&&y&&C.size>y)return;_.ref.imagePreview=d.appendChildView(d.createChildView(o,{id:w}));const P=_.query("GET_IMAGE_PREVIEW_HEIGHT");P&&_.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:S.id,height:P});const A=!L&&C.size>p("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");_.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:w},A)},b=(_,R)=>{if(!_.ref.imagePreview)return;let{id:w}=R;const S=_.query("GET_ITEM",{id:w});if(!S)return;const C=_.query("GET_PANEL_ASPECT_RATIO"),L=_.query("GET_ITEM_PANEL_ASPECT_RATIO"),y=_.query("GET_IMAGE_PREVIEW_HEIGHT");if(C||L||y)return;let{imageWidth:P,imageHeight:A}=_.ref;if(!P||!A)return;const F=_.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),W=_.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),B=(S.getMetadata("exif")||{}).orientation||-1;if(B>=5&&B<=8&&([P,A]=[A,P]),!Vg(S.file)||_.query("GET_IMAGE_PREVIEW_UPSCALE")){const k=2048/P;P*=k,A*=k}const X=A/P,M=(S.getMetadata("crop")||{}).aspectRatio||X;let q=Math.max(F,Math.min(A,W));const j=_.rect.element.width,N=Math.min(j*M,q);_.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:S.id,height:N})},f=({root:_})=>{_.ref.shouldRescale=!0},g=({root:_,action:R})=>{R.change.key==="crop"&&(_.ref.shouldRescale=!0)},v=({root:_,action:R})=>{_.ref.imageWidth=R.width,_.ref.imageHeight=R.height,_.ref.shouldRescale=!0,_.ref.shouldDrawPreview=!0,_.dispatch("KICK")};d.registerWriter(n({DID_RESIZE_ROOT:f,DID_STOP_RESIZE:f,DID_LOAD_ITEM:m,DID_IMAGE_PREVIEW_CALCULATE_SIZE:v,DID_UPDATE_ITEM_METADATA:g},({root:_,props:R})=>{_.ref.imagePreview&&(_.rect.element.hidden||(_.ref.shouldRescale&&(b(_,R),_.ref.shouldRescale=!1),_.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{_.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:R.id})})}),_.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,i.BOOLEAN],imagePreviewFilterItem:[()=>!0,i.FUNCTION],imagePreviewHeight:[null,i.INT],imagePreviewMinHeight:[44,i.INT],imagePreviewMaxHeight:[256,i.INT],imagePreviewMaxFileSize:[null,i.INT],imagePreviewZoomFactor:[2,i.INT],imagePreviewUpscale:[!1,i.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,i.INT],imagePreviewTransparencyIndicator:[null,i.STRING],imagePreviewCalculateAverageImageColor:[!1,i.BOOLEAN],imagePreviewMarkupShow:[!0,i.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,i.FUNCTION]}}},zv=typeof window!="undefined"&&typeof window.document!="undefined";zv&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:zg}));/*!
* FilePondPluginImageResize 2.0.10
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const Wv=t=>/^image/.test(t.type),Hv=(t,e)=>{let s=new Image;s.onload=()=>{const i=s.naturalWidth,n=s.naturalHeight;s=null,e({width:i,height:n})},s.onerror=()=>e(null),s.src=t},Wg=({addFilter:t,utils:e})=>{const{Type:s}=e;return t("DID_LOAD_ITEM",(i,{query:n})=>new Promise((a,o)=>{const c=i.file;if(!Wv(c)||!n("GET_ALLOW_IMAGE_RESIZE"))return a(i);const h=n("GET_IMAGE_RESIZE_MODE"),d=n("GET_IMAGE_RESIZE_TARGET_WIDTH"),p=n("GET_IMAGE_RESIZE_TARGET_HEIGHT"),m=n("GET_IMAGE_RESIZE_UPSCALE");if(d===null&&p===null)return a(i);const b=d===null?p:d,f=p===null?b:p,g=URL.createObjectURL(c);Hv(g,v=>{if(URL.revokeObjectURL(g),!v)return a(i);let{width:_,height:R}=v;const w=(i.getMetadata("exif")||{}).orientation||-1;if(w>=5&&w<=8&&([_,R]=[R,_]),_===b&&R===f)return a(i);if(!m){if(h==="cover"){if(_<=b||R<=f)return a(i)}else if(_<=b&&R<=b)return a(i)}i.setMetadata("resize",{mode:h,upscale:m,size:{width:b,height:f}}),a(i)})})),{options:{allowImageResize:[!0,s.BOOLEAN],imageResizeMode:["cover",s.STRING],imageResizeUpscale:[!0,s.BOOLEAN],imageResizeTargetWidth:[null,s.INT],imageResizeTargetHeight:[null,s.INT]}}},qv=typeof window!="undefined"&&typeof window.document!="undefined";qv&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Wg}));/*!
* FilePondPluginImageTransform 3.8.7
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const Yv=t=>/^image/.test(t.type),Xv=t=>t.substr(0,t.lastIndexOf("."))||t,Zv={jpeg:"jpg","svg+xml":"svg"},Qv=(t,e)=>{const s=Xv(t),i=e.split("/")[1],n=Zv[i]||i;return`${s}.${n}`},Jv=t=>/jpeg|png|svg\+xml/.test(t)?t:"image/jpeg",Kv=t=>/^image/.test(t.type),t_={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]},e_=(t,e,s)=>(s===-1&&(s=1),t_[s](t,e)),Ko=(t,e)=>({x:t,y:e}),s_=(t,e)=>t.x*e.x+t.y*e.y,vf=(t,e)=>Ko(t.x-e.x,t.y-e.y),i_=(t,e)=>s_(vf(t,e),vf(t,e)),_f=(t,e)=>Math.sqrt(i_(t,e)),wf=(t,e)=>{const s=t,i=1.5707963267948966,n=e,a=1.5707963267948966-e,o=Math.sin(i),c=Math.sin(n),h=Math.sin(a),d=Math.cos(a),p=s/o,m=p*c,b=p*h;return Ko(d*m,d*b)},n_=(t,e)=>{const s=t.width,i=t.height,n=wf(s,e),a=wf(i,e),o=Ko(t.x+Math.abs(n.x),t.y-Math.abs(n.y)),c=Ko(t.x+t.width+Math.abs(a.y),t.y+Math.abs(a.x)),h=Ko(t.x-Math.abs(a.y),t.y+t.height-Math.abs(a.x));return{width:_f(o,c),height:_f(o,h)}},Hg=(t,e,s=0,i={x:.5,y:.5})=>{const n=i.x>.5?1-i.x:i.x,a=i.y>.5?1-i.y:i.y,o=n*2*t.width,c=a*2*t.height,h=n_(e,s);return Math.max(h.width/o,h.height/c)},qg=(t,e)=>{let s=t.width,i=s*e;i>t.height&&(i=t.height,s=i/e);const n=(t.width-s)*.5,a=(t.height-i)*.5;return{x:n,y:a,width:s,height:i}},Tf=(t,e,s=1)=>{const i=t.height/t.width;let n=1,a=e,o=1,c=i;c>a&&(c=a,o=c/i);const h=Math.max(n/o,a/c),d=t.width/(s*h*o),p=d*e;return{width:d,height:p}},Yg=t=>{t.width=1,t.height=1,t.getContext("2d").clearRect(0,0,1,1)},xf=t=>t&&(t.horizontal||t.vertical),r_=(t,e,s)=>{if(e<=1&&!xf(s))return t.width=t.naturalWidth,t.height=t.naturalHeight,t;const i=document.createElement("canvas"),n=t.naturalWidth,a=t.naturalHeight,o=e>=5&&e<=8;o?(i.width=a,i.height=n):(i.width=n,i.height=a);const c=i.getContext("2d");if(e&&c.transform.apply(c,e_(n,a,e)),xf(s)){const h=[1,0,0,1,0,0];(!o&&s.horizontal||o&s.vertical)&&(h[0]=-1,h[4]=n),(!o&&s.vertical||o&&s.horizontal)&&(h[3]=-1,h[5]=a),c.transform(...h)}return c.drawImage(t,0,0,n,a),i},a_=(t,e,s={},i={})=>{const{canvasMemoryLimit:n,background:a=null}=i,o=s.zoom||1,c=r_(t,e,s.flip),h={width:c.width,height:c.height},d=s.aspectRatio||h.height/h.width;let p=Tf(h,d,o);if(n){const S=p.width*p.height;if(S>n){const C=Math.sqrt(n)/Math.sqrt(S);h.width=Math.floor(h.width*C),h.height=Math.floor(h.height*C),p=Tf(h,d,o)}}const m=document.createElement("canvas"),b={x:p.width*.5,y:p.height*.5},f={x:0,y:0,width:p.width,height:p.height,center:b},g=typeof s.scaleToFit=="undefined"||s.scaleToFit,v=o*Hg(h,qg(f,d),s.rotation,g?s.center:{x:.5,y:.5});m.width=Math.round(p.width/v),m.height=Math.round(p.height/v),b.x/=v,b.y/=v;const _={x:b.x-h.width*(s.center?s.center.x:.5),y:b.y-h.height*(s.center?s.center.y:.5)},R=m.getContext("2d");a&&(R.fillStyle=a,R.fillRect(0,0,m.width,m.height)),R.translate(b.x,b.y),R.rotate(s.rotation||0),R.drawImage(c,_.x-b.x,_.y-b.y,h.width,h.height);const w=R.getImageData(0,0,m.width,m.height);return Yg(m),w},o_=(()=>typeof window!="undefined"&&typeof window.document!="undefined")();o_&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,s){var i=this.toDataURL(e,s).split(",")[1];setTimeout(function(){for(var n=atob(i),a=n.length,o=new Uint8Array(a),c=0;c<a;c++)o[c]=n.charCodeAt(c);t(new Blob([o],{type:e||"image/png"}))})}}));const l_=(t,e,s=null)=>new Promise(i=>{const n=s?s(t):t;Promise.resolve(n).then(a=>{a.toBlob(i,e.type,e.quality)})}),Dh=(t,e)=>rl(t.x*e,t.y*e),Fh=(t,e)=>rl(t.x+e.x,t.y+e.y),Xg=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?{x:0,y:0}:rl(t.x/e,t.y/e)},tr=(t,e,s)=>{const i=Math.cos(e),n=Math.sin(e),a=rl(t.x-s.x,t.y-s.y);return rl(s.x+i*a.x-n*a.y,s.y+n*a.x+i*a.y)},rl=(t=0,e=0)=>({x:t,y:e}),Ce=(t,e,s=1,i)=>{if(typeof t=="string")return parseFloat(t)*s;if(typeof t=="number")return t*(i?e[i]:Math.min(e.width,e.height))},Wr=(t,e,s)=>{const i=t.borderStyle||t.lineStyle||"solid",n=t.backgroundColor||t.fontColor||"transparent",a=t.borderColor||t.lineColor||"transparent",o=Ce(t.borderWidth||t.lineWidth,e,s),c=t.lineCap||"round",h=t.lineJoin||"round",d=typeof i=="string"?"":i.map(m=>Ce(m,e,s)).join(","),p=t.opacity||1;return{"stroke-linecap":c,"stroke-linejoin":h,"stroke-width":o||0,"stroke-dasharray":d,stroke:a,fill:n,opacity:p}},_s=t=>t!=null,Co=(t,e,s=1)=>{let i=Ce(t.x,e,s,"width")||Ce(t.left,e,s,"width"),n=Ce(t.y,e,s,"height")||Ce(t.top,e,s,"height"),a=Ce(t.width,e,s,"width"),o=Ce(t.height,e,s,"height"),c=Ce(t.right,e,s,"width"),h=Ce(t.bottom,e,s,"height");return _s(n)||(_s(o)&&_s(h)?n=e.height-o-h:n=h),_s(i)||(_s(a)&&_s(c)?i=e.width-a-c:i=c),_s(a)||(_s(i)&&_s(c)?a=e.width-i-c:a=0),_s(o)||(_s(n)&&_s(h)?o=e.height-n-h:o=0),{x:i||0,y:n||0,width:a||0,height:o||0}},c_=t=>t.map((e,s)=>`${s===0?"M":"L"} ${e.x} ${e.y}`).join(" "),Pi=(t,e)=>Object.keys(e).forEach(s=>t.setAttribute(s,e[s])),h_="http://www.w3.org/2000/svg",ma=(t,e)=>{const s=document.createElementNS(h_,t);return e&&Pi(s,e),s},d_=t=>Pi(t,I(I({},t.rect),t.styles)),u_=t=>{const e=t.rect.x+t.rect.width*.5,s=t.rect.y+t.rect.height*.5,i=t.rect.width*.5,n=t.rect.height*.5;return Pi(t,I({cx:e,cy:s,rx:i,ry:n},t.styles))},p_={contain:"xMidYMid meet",cover:"xMidYMid slice"},m_=(t,e)=>{Pi(t,O(I(I({},t.rect),t.styles),{preserveAspectRatio:p_[e.fit]||"none"}))},f_={left:"start",center:"middle",right:"end"},g_=(t,e,s,i)=>{const n=Ce(e.fontSize,s,i),a=e.fontFamily||"sans-serif",o=e.fontWeight||"normal",c=f_[e.textAlign]||"start";Pi(t,O(I(I({},t.rect),t.styles),{"stroke-width":0,"font-weight":o,"font-size":n,"font-family":a,"text-anchor":c})),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},E_=(t,e,s,i)=>{Pi(t,O(I(I({},t.rect),t.styles),{fill:"none"}));const n=t.childNodes[0],a=t.childNodes[1],o=t.childNodes[2],c=t.rect,h={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(Pi(n,{x1:c.x,y1:c.y,x2:h.x,y2:h.y}),!e.lineDecoration)return;a.style.display="none",o.style.display="none";const d=Xg({x:h.x-c.x,y:h.y-c.y}),p=Ce(.05,s,i);if(e.lineDecoration.indexOf("arrow-begin")!==-1){const m=Dh(d,p),b=Fh(c,m),f=tr(c,2,b),g=tr(c,-2,b);Pi(a,{style:"display:block;",d:`M${f.x},${f.y} L${c.x},${c.y} L${g.x},${g.y}`})}if(e.lineDecoration.indexOf("arrow-end")!==-1){const m=Dh(d,-p),b=Fh(h,m),f=tr(h,2,b),g=tr(h,-2,b);Pi(o,{style:"display:block;",d:`M${f.x},${f.y} L${h.x},${h.y} L${g.x},${g.y}`})}},b_=(t,e,s,i)=>{Pi(t,O(I({},t.styles),{fill:"none",d:c_(e.points.map(n=>({x:Ce(n.x,s,i,"width"),y:Ce(n.y,s,i,"height")})))}))},qc=t=>e=>ma(t,{id:e.id}),I_=t=>{const e=ma("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=()=>{e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},v_=t=>{const e=ma("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),s=ma("line");e.appendChild(s);const i=ma("path");e.appendChild(i);const n=ma("path");return e.appendChild(n),e},__={image:I_,rect:qc("rect"),ellipse:qc("ellipse"),text:qc("text"),path:qc("path"),line:v_},w_={rect:d_,ellipse:u_,image:m_,text:g_,path:b_,line:E_},T_=(t,e)=>__[t](e),x_=(t,e,s,i,n)=>{e!=="path"&&(t.rect=Co(s,i,n)),t.styles=Wr(s,i,n),w_[e](t,s,i,n)},Zg=(t,e)=>t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0,S_=(t,e={},s,i)=>new Promise(n=>{const{background:a=null}=i,o=new FileReader;o.onloadend=()=>{const c=o.result,h=document.createElement("div");h.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",h.innerHTML=c;const d=h.querySelector("svg");document.body.appendChild(h);const p=d.getBBox();h.parentNode.removeChild(h);const m=h.querySelector("title"),b=d.getAttribute("viewBox")||"",f=d.getAttribute("width")||"",g=d.getAttribute("height")||"";let v=parseFloat(f)||null,_=parseFloat(g)||null;const R=(f.match(/[a-z]+/)||[])[0]||"",w=(g.match(/[a-z]+/)||[])[0]||"",S=b.split(" ").map(parseFloat),C=S.length?{x:S[0],y:S[1],width:S[2],height:S[3]}:p;let L=v!=null?v:C.width,y=_!=null?_:C.height;d.style.overflow="visible",d.setAttribute("width",L),d.setAttribute("height",y);let P="";if(s&&s.length){const lt={width:L,height:y};P=s.sort(Zg).reduce((gt,Q)=>{const st=T_(Q[0],Q[1]);return x_(st,Q[0],Q[1],lt),st.removeAttribute("id"),st.getAttribute("opacity")===1&&st.removeAttribute("opacity"),gt+`
`+st.outerHTML+`
`},""),P=`

<g>${P.replace(/&nbsp;/g," ")}</g>

`}const A=e.aspectRatio||y/L,F=L,W=F*A,G=typeof e.scaleToFit=="undefined"||e.scaleToFit,B=e.center?e.center.x:.5,X=e.center?e.center.y:.5,M=Hg({width:L,height:y},qg({width:F,height:W},A),e.rotation,G?{x:B,y:X}:{x:.5,y:.5}),q=e.zoom*M,j=e.rotation*(180/Math.PI),N={x:F*.5,y:W*.5},k={x:N.x-L*B,y:N.y-y*X},U=[`rotate(${j} ${N.x} ${N.y})`,`translate(${N.x} ${N.y})`,`scale(${q})`,`translate(${-N.x} ${-N.y})`,`translate(${k.x} ${k.y})`],Y=e.flip&&e.flip.horizontal,z=e.flip&&e.flip.vertical,ot=[`scale(${Y?-1:1} ${z?-1:1})`,`translate(${Y?-L:0} ${z?-y:0})`],nt=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="${F}${R}" height="${W}${w}" 
viewBox="0 0 ${F} ${W}" ${a?'style="background:'+a+'" ':""}
preserveAspectRatio="xMinYMin"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns="http://www.w3.org/2000/svg">
<!-- Generated by PQINA - https://pqina.nl/ -->
<title>${m?m.textContent:""}</title>
<g transform="${U.join(" ")}">
<g transform="${ot.join(" ")}">
${d.outerHTML}${P}
</g>
</g>
</svg>`;n(nt)},o.readAsText(t)}),R_=t=>{let e;try{e=new ImageData(t.width,t.height)}catch(s){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},C_=()=>{const t={resize:p,filter:d},e=(m,b)=>(m.forEach(f=>{b=t[f.type](b,f.data)}),b),s=(m,b)=>{let f=m.transforms,g=null;if(f.forEach(v=>{v.type==="filter"&&(g=v)}),g){let v=null;f.forEach(_=>{_.type==="resize"&&(v=_)}),v&&(v.data.matrix=g.data,f=f.filter(_=>_.type!=="filter"))}b(e(f,m.imageData))};self.onmessage=m=>{s(m.data.message,b=>{self.postMessage({id:m.data.id,message:b},[b.data.buffer])})};const i=1,n=1,a=1;function o(m,b,f){const g=b[m]/255,v=b[m+1]/255,_=b[m+2]/255,R=b[m+3]/255,w=g*f[0]+v*f[1]+_*f[2]+R*f[3]+f[4],S=g*f[5]+v*f[6]+_*f[7]+R*f[8]+f[9],C=g*f[10]+v*f[11]+_*f[12]+R*f[13]+f[14],L=g*f[15]+v*f[16]+_*f[17]+R*f[18]+f[19],y=Math.max(0,w*L)+i*(1-L),P=Math.max(0,S*L)+n*(1-L),A=Math.max(0,C*L)+a*(1-L);b[m]=Math.max(0,Math.min(1,y))*255,b[m+1]=Math.max(0,Math.min(1,P))*255,b[m+2]=Math.max(0,Math.min(1,A))*255}const c=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);function h(m){return self.JSON.stringify(m||[])===c}function d(m,b){if(!b||h(b))return m;const f=m.data,g=f.length,v=b[0],_=b[1],R=b[2],w=b[3],S=b[4],C=b[5],L=b[6],y=b[7],P=b[8],A=b[9],F=b[10],W=b[11],G=b[12],B=b[13],X=b[14],M=b[15],q=b[16],j=b[17],N=b[18],k=b[19];let U=0,Y=0,z=0,ot=0,nt=0,lt=0,gt=0,Q=0,st=0,rt=0,pt=0,dt=0;for(;U<g;U+=4)Y=f[U]/255,z=f[U+1]/255,ot=f[U+2]/255,nt=f[U+3]/255,lt=Y*v+z*_+ot*R+nt*w+S,gt=Y*C+z*L+ot*y+nt*P+A,Q=Y*F+z*W+ot*G+nt*B+X,st=Y*M+z*q+ot*j+nt*N+k,rt=Math.max(0,lt*st)+i*(1-st),pt=Math.max(0,gt*st)+n*(1-st),dt=Math.max(0,Q*st)+a*(1-st),f[U]=Math.max(0,Math.min(1,rt))*255,f[U+1]=Math.max(0,Math.min(1,pt))*255,f[U+2]=Math.max(0,Math.min(1,dt))*255;return m}function p(m,b){let{mode:f="contain",upscale:g=!1,width:v,height:_,matrix:R}=b;if(R=!R||h(R)?null:R,!v&&!_)return d(m,R);if(v===null?v=_:_===null&&(_=v),f!=="force"){let B=v/m.width,X=_/m.height,M=1;if(f==="cover"?M=Math.max(B,X):f==="contain"&&(M=Math.min(B,X)),M>1&&g===!1)return d(m,R);v=m.width*M,_=m.height*M}const w=m.width,S=m.height,C=Math.round(v),L=Math.round(_),y=m.data,P=new Uint8ClampedArray(C*L*4),A=w/C,F=S/L,W=Math.ceil(A*.5),G=Math.ceil(F*.5);for(let B=0;B<L;B++)for(let X=0;X<C;X++){let M=(X+B*C)*4,q=0,j=0,N=0,k=0,U=0,Y=0,z=0,ot=(B+.5)*F;for(let nt=Math.floor(B*F);nt<(B+1)*F;nt++){let lt=Math.abs(ot-(nt+.5))/G,gt=(X+.5)*A,Q=lt*lt;for(let st=Math.floor(X*A);st<(X+1)*A;st++){let rt=Math.abs(gt-(st+.5))/W,pt=Math.sqrt(Q+rt*rt);if(pt>=-1&&pt<=1&&(q=2*pt*pt*pt-3*pt*pt+1,q>0)){rt=4*(st+nt*w);let dt=y[rt+3];z+=q*dt,N+=q,dt<255&&(q=q*dt/250),k+=q*y[rt],U+=q*y[rt+1],Y+=q*y[rt+2],j+=q}}}P[M]=k/j,P[M+1]=U/j,P[M+2]=Y/j,P[M+3]=z/N,R&&o(M,P,R)}return{data:P,width:C,height:L}}},O_=(t,e)=>{if(t.getUint32(e+4,!1)!==1165519206)return;e+=4;const s=t.getUint16(e+=6,!1)===18761;e+=t.getUint32(e+4,s);const i=t.getUint16(e,s);e+=2;for(let n=0;n<i;n++)if(t.getUint16(e+n*12,s)===274)return t.setUint16(e+n*12+8,1,s),!0;return!1},L_=t=>{const e=new DataView(t);if(e.getUint16(0)!==65496)return null;let s=2,i,n,a=!1;for(;s<e.byteLength&&(i=e.getUint16(s,!1),n=e.getUint16(s+2,!1)+2,!(!(i>=65504&&i<=65519||i===65534)||(a||(a=O_(e,s)),s+n>e.byteLength)));)s+=n;return t.slice(0,s)},$_=t=>new Promise(e=>{const s=new FileReader;s.onload=()=>e(L_(s.result)||null),s.readAsArrayBuffer(t.slice(0,256*1024))}),A_=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,y_=(t,e)=>{const s=A_();if(s){const i=new s;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},M_=()=>Math.random().toString(36).substr(2,9),N_=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),s=URL.createObjectURL(e),i=new Worker(s),n=[];return{transfer:()=>{},post:(a,o,c)=>{const h=M_();n[h]=o,i.onmessage=d=>{const p=n[d.data.id];p&&(p(d.data.message),delete n[d.data.id])},i.postMessage({id:h,message:a},c)},terminate:()=>{i.terminate(),URL.revokeObjectURL(s)}}},P_=t=>new Promise((e,s)=>{const i=new Image;i.onload=()=>{e(i)},i.onerror=n=>{s(n)},i.src=t}),D_=t=>t.reduce((e,s)=>e.then(i=>s().then(Array.prototype.concat.bind(i))),Promise.resolve([])),F_=(t,e)=>new Promise(s=>{const i={width:t.width,height:t.height},n=t.getContext("2d"),a=e.sort(Zg).map(o=>()=>new Promise(c=>{z_[o[0]](n,i,o[1],c)&&c()}));D_(a).then(()=>s(t))}),Oo=(t,e)=>{t.beginPath(),t.lineCap=e["stroke-linecap"],t.lineJoin=e["stroke-linejoin"],t.lineWidth=e["stroke-width"],e["stroke-dasharray"].length&&t.setLineDash(e["stroke-dasharray"].split(",")),t.fillStyle=e.fill,t.strokeStyle=e.stroke,t.globalAlpha=e.opacity||1},Lo=t=>{t.fill(),t.stroke(),t.globalAlpha=1},j_=(t,e,s)=>{const i=Co(s,e),n=Wr(s,e);return Oo(t,n),t.rect(i.x,i.y,i.width,i.height),Lo(t),!0},k_=(t,e,s)=>{const i=Co(s,e),n=Wr(s,e);Oo(t,n);const a=i.x,o=i.y,c=i.width,h=i.height,d=.5522848,p=c/2*d,m=h/2*d,b=a+c,f=o+h,g=a+c/2,v=o+h/2;return t.moveTo(a,v),t.bezierCurveTo(a,v-m,g-p,o,g,o),t.bezierCurveTo(g+p,o,b,v-m,b,v),t.bezierCurveTo(b,v+m,g+p,f,g,f),t.bezierCurveTo(g-p,f,a,v+m,a,v),Lo(t),!0},G_=(t,e,s,i)=>{const n=Co(s,e),a=Wr(s,e);Oo(t,a);const o=new Image;new URL(s.src,window.location.href).origin!==window.location.origin&&(o.crossOrigin=""),o.onload=()=>{if(s.fit==="cover"){const h=n.width/n.height,d=h>1?o.width:o.height*h,p=h>1?o.width/h:o.height,m=o.width*.5-d*.5,b=o.height*.5-p*.5;t.drawImage(o,m,b,d,p,n.x,n.y,n.width,n.height)}else if(s.fit==="contain"){const h=Math.min(n.width/o.width,n.height/o.height),d=h*o.width,p=h*o.height,m=n.x+n.width*.5-d*.5,b=n.y+n.height*.5-p*.5;t.drawImage(o,0,0,o.width,o.height,m,b,d,p)}else t.drawImage(o,0,0,o.width,o.height,n.x,n.y,n.width,n.height);Lo(t),i()},o.src=s.src},B_=(t,e,s)=>{const i=Co(s,e),n=Wr(s,e);Oo(t,n);const a=Ce(s.fontSize,e),o=s.fontFamily||"sans-serif",c=s.fontWeight||"normal",h=s.textAlign||"left";return t.font=`${c} ${a}px ${o}`,t.textAlign=h,t.fillText(s.text,i.x,i.y),Lo(t),!0},U_=(t,e,s)=>{const i=Wr(s,e);Oo(t,i),t.beginPath();const n=s.points.map(o=>({x:Ce(o.x,e,1,"width"),y:Ce(o.y,e,1,"height")}));t.moveTo(n[0].x,n[0].y);const a=n.length;for(let o=1;o<a;o++)t.lineTo(n[o].x,n[o].y);return Lo(t),!0},V_=(t,e,s)=>{const i=Co(s,e),n=Wr(s,e);Oo(t,n),t.beginPath();const a={x:i.x,y:i.y},o={x:i.x+i.width,y:i.y+i.height};t.moveTo(a.x,a.y),t.lineTo(o.x,o.y);const c=Xg({x:o.x-a.x,y:o.y-a.y}),h=.04*Math.min(e.width,e.height);if(s.lineDecoration.indexOf("arrow-begin")!==-1){const d=Dh(c,h),p=Fh(a,d),m=tr(a,2,p),b=tr(a,-2,p);t.moveTo(m.x,m.y),t.lineTo(a.x,a.y),t.lineTo(b.x,b.y)}if(s.lineDecoration.indexOf("arrow-end")!==-1){const d=Dh(c,-h),p=Fh(o,d),m=tr(o,2,p),b=tr(o,-2,p);t.moveTo(m.x,m.y),t.lineTo(o.x,o.y),t.lineTo(b.x,b.y)}return Lo(t),!0},z_={rect:j_,ellipse:k_,image:G_,text:B_,line:V_,path:U_},W_=t=>{const e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t,0,0),e},H_=(t,e,s={})=>new Promise((i,n)=>{if(!t||!Kv(t))return n({status:"not an image file",file:t});const{stripImageHead:a,beforeCreateBlob:o,afterCreateBlob:c,canvasMemoryLimit:h}=s,{crop:d,size:p,filter:m,markup:b,output:f}=e,g=e.image&&e.image.orientation?Math.max(1,Math.min(8,e.image.orientation)):null,v=f&&f.quality,_=v===null?null:v/100,R=f&&f.type||null,w=f&&f.background||null,S=[];p&&(typeof p.width=="number"||typeof p.height=="number")&&S.push({type:"resize",data:p}),m&&m.length===20&&S.push({type:"filter",data:m});const C=P=>{const A=c?c(P):P;Promise.resolve(A).then(i)},L=(P,A)=>{const F=W_(P),W=b.length?F_(F,b):F;Promise.resolve(W).then(G=>{l_(G,A,o).then(B=>{if(Yg(G),a)return C(B);$_(t).then(X=>{X!==null&&(B=new Blob([X,B.slice(20)],{type:B.type})),C(B)})}).catch(n)})};if(/svg/.test(t.type)&&R===null)return S_(t,d,b,{background:w}).then(P=>{i(y_(P,"image/svg+xml"))});const y=URL.createObjectURL(t);P_(y).then(P=>{URL.revokeObjectURL(y);const A=a_(P,g,d,{canvasMemoryLimit:h,background:w}),F={quality:_,type:R||t.type};if(!S.length)return L(A,F);const W=N_(C_);W.post({transforms:S,imageData:A},G=>{L(R_(G),F),W.terminate()},[A.data.buffer])}).catch(n)}),q_=["x","y","left","top","right","bottom","width","height"],Y_=t=>typeof t=="string"&&/%/.test(t)?parseFloat(t)/100:t,X_=t=>{const[e,s]=t,i=s.points?{}:q_.reduce((n,a)=>(n[a]=Y_(s[a]),n),{});return[e,I(I({zIndex:0},s),i)]},Z_=t=>new Promise((e,s)=>{const i=new Image;i.src=URL.createObjectURL(t);const n=()=>{const o=i.naturalWidth,c=i.naturalHeight;o&&c&&(URL.revokeObjectURL(i.src),clearInterval(a),e({width:o,height:c}))};i.onerror=o=>{URL.revokeObjectURL(i.src),clearInterval(a),s(o)};const a=setInterval(n,1);n()});typeof window!="undefined"&&typeof window.document!="undefined"&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,s){const i=this;setTimeout(()=>{const n=i.toDataURL(e,s).split(",")[1],a=atob(n);let o=a.length;const c=new Uint8Array(o);for(;o--;)c[o]=a.charCodeAt(o);t(new Blob([c],{type:e||"image/png"}))})}}));const jm=typeof window!="undefined"&&typeof window.document!="undefined",Q_=jm&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Qg=({addFilter:t,utils:e})=>{const{Type:s,forin:i,getFileFromBlob:n,isFile:a}=e,o=["crop","resize","filter","markup","output"],c=p=>(m,b,f)=>m(b,p?p(f):f),h=p=>p.aspectRatio===null&&p.rotation===0&&p.zoom===1&&p.center&&p.center.x===.5&&p.center.y===.5&&p.flip&&p.flip.horizontal===!1&&p.flip.vertical===!1;t("SHOULD_PREPARE_OUTPUT",(p,{query:m})=>new Promise(b=>{b(!m("IS_ASYNC"))}));const d=(p,m,b)=>new Promise(f=>{if(!p("GET_ALLOW_IMAGE_TRANSFORM")||b.archived||!a(m)||!Yv(m))return f(!1);Z_(m).then(()=>{const g=p("GET_IMAGE_TRANSFORM_IMAGE_FILTER");if(g){const v=g(m);if(v==null)return handleRevert(!0);if(typeof v=="boolean")return f(v);if(typeof v.then=="function")return v.then(f)}f(!0)}).catch(g=>{f(!1)})});return t("DID_CREATE_ITEM",(p,{query:m,dispatch:b})=>{m("GET_ALLOW_IMAGE_TRANSFORM")&&p.extend("requestPrepare",()=>new Promise((f,g)=>{b("REQUEST_PREPARE_OUTPUT",{query:p.id,item:p,success:f,failure:g},!0)}))}),t("PREPARE_OUTPUT",(p,{query:m,item:b})=>new Promise(f=>{d(m,p,b).then(g=>{if(!g)return f(p);const v=[];m("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL")&&v.push(()=>new Promise(A=>{A({name:m("GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME"),file:p})})),m("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT")&&v.push((A,F,W)=>new Promise(G=>{A(F,W).then(B=>G({name:m("GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME"),file:B}))}));const _=m("GET_IMAGE_TRANSFORM_VARIANTS")||{};i(_,(A,F)=>{const W=c(F);v.push((G,B,X)=>new Promise(M=>{W(G,B,X).then(q=>M({name:A,file:q}))}))});const R=m("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY"),w=m("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE"),S=R===null?null:R/100,C=m("GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE"),L=m("GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS")||o;b.setMetadata("output",{type:C,quality:S,client:L},!0);const y=(A,F)=>new Promise((W,G)=>{const B=I({},F);Object.keys(B).filter(z=>z!=="exif").forEach(z=>{L.indexOf(z)===-1&&delete B[z]});const{resize:X,exif:M,output:q,crop:j,filter:N,markup:k}=B,U={image:{orientation:M?M.orientation:null},output:q&&(q.type||typeof q.quality=="number"||q.background)?{type:q.type,quality:typeof q.quality=="number"?q.quality*100:null,background:q.background||m("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||null}:void 0,size:X&&(X.size.width||X.size.height)?I({mode:X.mode,upscale:X.upscale},X.size):void 0,crop:j&&!h(j)?I({},j):void 0,markup:k&&k.length?k.map(X_):[],filter:N};if(U.output){const z=q.type?q.type!==A.type:!1,ot=/\/jpe?g$/.test(A.type),nt=q.quality!==null?ot&&w==="always":!1;if(!!!(U.size||U.crop||U.filter||z||nt))return W(A)}const Y={beforeCreateBlob:m("GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB"),afterCreateBlob:m("GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB"),canvasMemoryLimit:m("GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT"),stripImageHead:m("GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD")};H_(A,U,Y).then(z=>{const ot=n(z,Qv(A.name,Jv(z.type)));W(ot)}).catch(G)}),P=v.map(A=>A(y,p,b.getMetadata()));Promise.all(P).then(A=>{f(A.length===1&&A[0].name===null?A[0].file:A)})})})),{options:{allowImageTransform:[!0,s.BOOLEAN],imageTransformImageFilter:[null,s.FUNCTION],imageTransformOutputMimeType:[null,s.STRING],imageTransformOutputQuality:[null,s.INT],imageTransformOutputStripImageHead:[!0,s.BOOLEAN],imageTransformClientTransforms:[null,s.ARRAY],imageTransformOutputQualityMode:["always",s.STRING],imageTransformVariants:[null,s.OBJECT],imageTransformVariantsIncludeDefault:[!0,s.BOOLEAN],imageTransformVariantsDefaultName:[null,s.STRING],imageTransformVariantsIncludeOriginal:[!1,s.BOOLEAN],imageTransformVariantsOriginalName:["original_",s.STRING],imageTransformBeforeCreateBlob:[null,s.FUNCTION],imageTransformAfterCreateBlob:[null,s.FUNCTION],imageTransformCanvasMemoryLimit:[jm&&Q_?4096*4096:null,s.INT],imageTransformCanvasBackgroundColor:[null,s.STRING]}}};jm&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Qg}));/*!
* FilePondPluginImageValidateSize 1.2.7
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const J_=t=>/^image/.test(t.type),K_=t=>new Promise((e,s)=>{const i=document.createElement("img");i.src=URL.createObjectURL(t),i.onerror=a=>{clearInterval(n),s(a)};const n=setInterval(()=>{i.naturalWidth&&i.naturalHeight&&(clearInterval(n),URL.revokeObjectURL(i.src),e({width:i.naturalWidth,height:i.naturalHeight}))},1)}),Jg=({addFilter:t,utils:e})=>{const{Type:s,replaceInString:i,isFile:n}=e,a=(o,c,h)=>new Promise((d,p)=>{const m=({width:b,height:f})=>{const{minWidth:g,minHeight:v,maxWidth:_,maxHeight:R,minResolution:w,maxResolution:S}=c,C=b*f;b<g||f<v?p("TOO_SMALL"):b>_||f>R?p("TOO_BIG"):w!==null&&C<w?p("TOO_LOW_RES"):S!==null&&C>S&&p("TOO_HIGH_RES"),d()};K_(o).then(m).catch(()=>{if(!h){p();return}h(o,c).then(m).catch(()=>p())})});return t("LOAD_FILE",(o,{query:c})=>new Promise((h,d)=>{if(!n(o)||!J_(o)||!c("GET_ALLOW_IMAGE_VALIDATE_SIZE")){h(o);return}const p={minWidth:c("GET_IMAGE_VALIDATE_SIZE_MIN_WIDTH"),minHeight:c("GET_IMAGE_VALIDATE_SIZE_MIN_HEIGHT"),maxWidth:c("GET_IMAGE_VALIDATE_SIZE_MAX_WIDTH"),maxHeight:c("GET_IMAGE_VALIDATE_SIZE_MAX_HEIGHT"),minResolution:c("GET_IMAGE_VALIDATE_SIZE_MIN_RESOLUTION"),maxResolution:c("GET_IMAGE_VALIDATE_SIZE_MAX_RESOLUTION")},m=c("GET_IMAGE_VALIDATE_SIZE_MEASURE");a(o,p,m).then(()=>{h(o)}).catch(b=>{const f=b?{TOO_SMALL:{label:c("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_SMALL"),details:c("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_SIZE")},TOO_BIG:{label:c("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_SIZE_TOO_BIG"),details:c("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_SIZE")},TOO_LOW_RES:{label:c("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_LOW"),details:c("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MIN_RESOLUTION")},TOO_HIGH_RES:{label:c("GET_IMAGE_VALIDATE_SIZE_LABEL_IMAGE_RESOLUTION_TOO_HIGH"),details:c("GET_IMAGE_VALIDATE_SIZE_LABEL_EXPECTED_MAX_RESOLUTION")}}[b]:{label:c("GET_IMAGE_VALIDATE_SIZE_LABEL_FORMAT_ERROR"),details:o.type};d({status:{main:f.label,sub:b?i(f.details,p):f.details}})})})),{options:{allowImageValidateSize:[!0,s.BOOLEAN],imageValidateSizeLabelFormatError:["Image type not supported",s.STRING],imageValidateSizeMeasure:[null,s.FUNCTION],imageValidateSizeMinResolution:[null,s.INT],imageValidateSizeMaxResolution:[null,s.INT],imageValidateSizeLabelImageResolutionTooLow:["Resolution is too low",s.STRING],imageValidateSizeLabelImageResolutionTooHigh:["Resolution is too high",s.STRING],imageValidateSizeLabelExpectedMinResolution:["Minimum resolution is {minResolution}",s.STRING],imageValidateSizeLabelExpectedMaxResolution:["Maximum resolution is {maxResolution}",s.STRING],imageValidateSizeMinWidth:[1,s.INT],imageValidateSizeMinHeight:[1,s.INT],imageValidateSizeMaxWidth:[65535,s.INT],imageValidateSizeMaxHeight:[65535,s.INT],imageValidateSizeLabelImageSizeTooSmall:["Image is too small",s.STRING],imageValidateSizeLabelImageSizeTooBig:["Image is too big",s.STRING],imageValidateSizeLabelExpectedMinSize:["Minimum size is {minWidth} Ã— {minHeight}",s.STRING],imageValidateSizeLabelExpectedMaxSize:["Maximum size is {maxWidth} Ã— {maxHeight}",s.STRING]}}},tw=typeof window!="undefined"&&typeof window.document!="undefined";tw&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Jg}));/*!
* FilePondPluginMediaPreview 1.0.1
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit undefined for details.
*/const jh=t=>/^video/.test(t.type),fa=t=>/^audio/.test(t.type),tl=t=>/pdf$/.test(t.type);class ew{constructor(e,s){this.mediaEl=e,this.audioElems=s,this.onplayhead=!1,this.duration=0,this.timelineWidth=this.audioElems.timeline.offsetWidth-this.audioElems.playhead.offsetWidth,this.moveplayheadFn=this.moveplayhead.bind(this),this.registerListeners()}registerListeners(){this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1),this.mediaEl.addEventListener("canplaythrough",()=>this.duration=this.mediaEl.duration,!1),this.audioElems.timeline.addEventListener("click",this.timelineClicked.bind(this),!1),this.audioElems.button.addEventListener("click",this.play.bind(this)),this.audioElems.playhead.addEventListener("mousedown",this.mouseDown.bind(this),!1),window.addEventListener("mouseup",this.mouseUp.bind(this),!1)}play(){this.mediaEl.paused?this.mediaEl.play():this.mediaEl.pause(),this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause")}timeUpdate(){let e=this.mediaEl.currentTime/this.duration*100;this.audioElems.playhead.style.marginLeft=e+"%",this.mediaEl.currentTime===this.duration&&(this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause"))}moveplayhead(e){let s=e.clientX-this.getPosition(this.audioElems.timeline);s>=0&&s<=this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=s+"px"),s<0&&(this.audioElems.playhead.style.marginLeft="0px"),s>this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=this.timelineWidth-4+"px")}timelineClicked(e){this.moveplayhead(e),this.mediaEl.currentTime=this.duration*this.clickPercent(e)}mouseDown(){this.onplayhead=!0,window.addEventListener("mousemove",this.moveplayheadFn,!0),this.mediaEl.removeEventListener("timeupdate",this.timeUpdate.bind(this),!1)}mouseUp(e){window.removeEventListener("mousemove",this.moveplayheadFn,!0),this.onplayhead==!0&&(this.moveplayhead(e),this.mediaEl.currentTime=this.duration*this.clickPercent(e),this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1)),this.onplayhead=!1}clickPercent(e){return(e.clientX-this.getPosition(this.audioElems.timeline))/this.timelineWidth}getPosition(e){return e.getBoundingClientRect().left}}const sw=t=>t.utils.createView({name:"media-preview",tag:"div",ignoreRect:!0,create:({root:e,props:s})=>{const i=e.query("GET_ITEM",{id:s.id});if(tl(i.file))e.ref.media=document.createElement("object"),e.ref.media.setAttribute("height",300),e.ref.media.setAttribute("width",320),e.ref.media.setAttribute("style","position:absolute;left:0;right:0;margin:auto;"),e.element.appendChild(e.ref.media);else{let n=fa(i.file)?"audio":"video";if(e.ref.media=document.createElement(n),e.ref.media.setAttribute("controls",!0),e.element.appendChild(e.ref.media),fa(i.file)){let a=document.createDocumentFragment();e.ref.audio=[],e.ref.audio.container=document.createElement("div"),e.ref.audio.button=document.createElement("span"),e.ref.audio.timeline=document.createElement("div"),e.ref.audio.playhead=document.createElement("div"),e.ref.audio.container.className="audioplayer",e.ref.audio.button.className="playpausebtn play",e.ref.audio.timeline.className="timeline",e.ref.audio.playhead.className="playhead",e.ref.audio.timeline.appendChild(e.ref.audio.playhead),e.ref.audio.container.appendChild(e.ref.audio.button),e.ref.audio.container.appendChild(e.ref.audio.timeline),a.appendChild(e.ref.audio.container),e.element.appendChild(a)}}},write:t.utils.createRoute({DID_MEDIA_PREVIEW_LOAD:({root:e,props:s})=>{const{id:i}=s,n=e.query("GET_ITEM",{id:i});if(!n)return;let a=window.URL||window.webkitURL,o=new Blob([n.file],{type:n.file.type});e.ref.media.type=n.file.type,tl(n.file)?e.ref.media.data=a.createObjectURL(o):e.ref.media.src=n.file.mock&&n.file.url||a.createObjectURL(o),fa(n.file)&&new ew(e.ref.media,e.ref.audio),e.ref.media.addEventListener("loadeddata",()=>{if(jh(n.file)||fa(n.file)){let c=75;if(jh(n.file)){let h=e.ref.media.offsetWidth,d=e.ref.media.videoWidth/h;c=e.ref.media.videoHeight/d}e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i,height:c})}},!1),e.ref.media.addEventListener("load",()=>{tl(n.file)&&e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i,height:e.ref.media.scrollHeight})},!1)}})}),iw=t=>{const e=({root:i,props:n})=>{const{id:a}=n;i.query("GET_ITEM",a)&&i.dispatch("DID_MEDIA_PREVIEW_LOAD",{id:a})},s=({root:i,props:n})=>{const a=sw(t);i.ref.media=i.appendChildView(i.createChildView(a,{id:n.id}))};return t.utils.createView({name:"media-preview-wrapper",create:s,write:t.utils.createRoute({DID_MEDIA_PREVIEW_CONTAINER_CREATE:e})})},Kg=t=>{const{addFilter:e,utils:s}=t,{Type:i,createRoute:n}=s,a=iw(t);return e("CREATE_VIEW",o=>{const{is:c,view:h,query:d}=o;if(!c("file"))return;const p=({root:m,props:b})=>{const{id:f}=b,g=d("GET_ITEM",f);!g||g.archived||!jh(g.file)&&!tl(g.file)&&!fa(g.file)||(m.ref.mediaPreview=h.appendChildView(h.createChildView(a,{id:f})),m.dispatch("DID_MEDIA_PREVIEW_CONTAINER_CREATE",{id:f}))};h.registerWriter(n({DID_LOAD_ITEM:p},({root:m,props:b})=>{const{id:f}=b,g=d("GET_ITEM",f);!jh(g.file)&&!tl(g.file)&&!fa(g.file)||m.rect.element.hidden}))}),{options:{allowPdfPreview:[!0,i.BOOLEAN],allowVideoPreview:[!0,i.BOOLEAN],allowAudioPreview:[!0,i.BOOLEAN]}}},nw=typeof window!="undefined"&&typeof window.document!="undefined";nw&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Kg}));/*!
* FilePond 4.32.8
* Licensed under MIT, https://opensource.org/licenses/MIT/
* Please visit https://pqina.nl/filepond/ for details.
*/const rw=t=>t instanceof HTMLElement,aw=(t,e=[],s=[])=>{const i=I({},t),n=[],a=[],o=()=>I({},i),c=()=>{const g=[...n];return n.length=0,g},h=()=>{const g=[...a];a.length=0,g.forEach(({type:v,data:_})=>{d(v,_)})},d=(g,v,_)=>{if(_&&!document.hidden){a.push({type:g,data:v});return}f[g]&&f[g](v),n.push({type:g,data:v})},p=(g,...v)=>b[g]?b[g](...v):null,m={getState:o,processActionQueue:c,processDispatchQueue:h,dispatch:d,query:p};let b={};e.forEach(g=>{b=I(I({},g(i)),b)});let f={};return s.forEach(g=>{f=I(I({},g(d,p,i)),f)}),m},ow=(t,e,s)=>{if(typeof s=="function"){t[e]=s;return}Object.defineProperty(t,e,I({},s))},Mt=(t,e)=>{for(const s in t)t.hasOwnProperty(s)&&e(s,t[s])},er=t=>{const e={};return Mt(t,s=>{ow(e,s,t[s])}),e},ae=(t,e,s=null)=>{if(s===null)return t.getAttribute(e)||t.hasAttribute(e);t.setAttribute(e,s)},lw="http://www.w3.org/2000/svg",cw=["svg","path"],Sf=t=>cw.includes(t),kh=(t,e,s={})=>{typeof e=="object"&&(s=e,e=null);const i=Sf(t)?document.createElementNS(lw,t):document.createElement(t);return e&&(Sf(t)?ae(i,"class",e):i.className=e),Mt(s,(n,a)=>{ae(i,n,a)}),i},hw=t=>(e,s)=>{typeof s!="undefined"&&t.children[s]?t.insertBefore(e,t.children[s]):t.appendChild(e)},dw=(t,e)=>(s,i)=>(typeof i!="undefined"?e.splice(i,0,s):e.push(s),s),uw=(t,e)=>s=>(e.splice(e.indexOf(s),1),s.element.parentNode&&t.removeChild(s.element),s),pw=(()=>typeof window!="undefined"&&typeof window.document!="undefined")(),tE=()=>pw,mw=tE()?kh("svg"):{},fw="children"in mw?t=>t.children.length:t=>t.childNodes.length,eE=(t,e,s,i)=>{const n=s[0]||t.left,a=s[1]||t.top,o=n+t.width,c=a+t.height*(i[1]||1),h={element:I({},t),inner:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},outer:{left:n,top:a,right:o,bottom:c}};return e.filter(d=>!d.isRectIgnored()).map(d=>d.rect).forEach(d=>{Rf(h.inner,I({},d.inner)),Rf(h.outer,I({},d.outer))}),Cf(h.inner),h.outer.bottom+=h.element.marginBottom,h.outer.right+=h.element.marginRight,Cf(h.outer),h},Rf=(t,e)=>{e.top+=t.top,e.right+=t.left,e.bottom+=t.top,e.left+=t.left,e.bottom>t.bottom&&(t.bottom=e.bottom),e.right>t.right&&(t.right=e.right)},Cf=t=>{t.width=t.right-t.left,t.height=t.bottom-t.top},fr=t=>typeof t=="number",gw=(t,e,s,i=.001)=>Math.abs(t-e)<i&&Math.abs(s)<i,Ew=({stiffness:t=.5,damping:e=.75,mass:s=10}={})=>{let i=null,n=null,a=0,o=!1;const d=er({interpolate:(p,m)=>{if(o)return;if(!(fr(i)&&fr(n))){o=!0,a=0;return}const b=-(n-i)*t;a+=b/s,n+=a,a*=e,gw(n,i,a)||m?(n=i,a=0,o=!0,d.onupdate(n),d.oncomplete(n)):d.onupdate(n)},target:{set:p=>{if(fr(p)&&!fr(n)&&(n=p),i===null&&(i=p,n=p),i=p,n===i||typeof i=="undefined"){o=!0,a=0,d.onupdate(n),d.oncomplete(n);return}o=!1},get:()=>i},resting:{get:()=>o},onupdate:p=>{},oncomplete:p=>{}});return d},bw=t=>t<.5?2*t*t:-1+(4-2*t)*t,Iw=({duration:t=500,easing:e=bw,delay:s=0}={})=>{let i=null,n,a,o=!0,c=!1,h=null;const p=er({interpolate:(m,b)=>{o||h===null||(i===null&&(i=m),!(m-i<s)&&(n=m-i-s,n>=t||b?(n=1,a=c?0:1,p.onupdate(a*h),p.oncomplete(a*h),o=!0):(a=n/t,p.onupdate((n>=0?e(c?1-a:a):0)*h))))},target:{get:()=>c?0:h,set:m=>{if(h===null){h=m,p.onupdate(m),p.oncomplete(m);return}m<h?(h=1,c=!0):(c=!1,h=m),o=!1,i=null}},resting:{get:()=>o},onupdate:m=>{},oncomplete:m=>{}});return p},Of={spring:Ew,tween:Iw},vw=(t,e,s)=>{const i=t[e]&&typeof t[e][s]=="object"?t[e][s]:t[e]||t,n=typeof i=="string"?i:i.type,a=typeof i=="object"?I({},i):{};return Of[n]?Of[n](a):null},km=(t,e,s,i=!1)=>{e=Array.isArray(e)?e:[e],e.forEach(n=>{t.forEach(a=>{let o=a,c=()=>s[a],h=d=>s[a]=d;typeof a=="object"&&(o=a.key,c=a.getter||c,h=a.setter||h),!(n[o]&&!i)&&(n[o]={get:c,set:h})})})},_w=({mixinConfig:t,viewProps:e,viewInternalAPI:s,viewExternalAPI:i})=>{const n=I({},e),a=[];return Mt(t,(o,c)=>{const h=vw(c);if(!h)return;h.onupdate=p=>{e[o]=p},h.target=n[o],km([{key:o,setter:p=>{h.target!==p&&(h.target=p)},getter:()=>e[o]}],[s,i],e,!0),a.push(h)}),{write:o=>{let c=document.hidden,h=!0;return a.forEach(d=>{d.resting||(h=!1),d.interpolate(o,c)}),h},destroy:()=>{}}},ww=t=>(e,s)=>{t.addEventListener(e,s)},Tw=t=>(e,s)=>{t.removeEventListener(e,s)},xw=({mixinConfig:t,viewProps:e,viewInternalAPI:s,viewExternalAPI:i,viewState:n,view:a})=>{const o=[],c=ww(a.element),h=Tw(a.element);return i.on=(d,p)=>{o.push({type:d,fn:p}),c(d,p)},i.off=(d,p)=>{o.splice(o.findIndex(m=>m.type===d&&m.fn===p),1),h(d,p)},{write:()=>!0,destroy:()=>{o.forEach(d=>{h(d.type,d.fn)})}}},Sw=({mixinConfig:t,viewProps:e,viewExternalAPI:s})=>{km(t,s,e)},Ge=t=>t!=null,Rw={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Cw=({mixinConfig:t,viewProps:e,viewInternalAPI:s,viewExternalAPI:i,view:n})=>{const a=I({},e),o={};km(t,[s,i],e);const c=()=>[e.translateX||0,e.translateY||0],h=()=>[e.scaleX||0,e.scaleY||0],d=()=>n.rect?eE(n.rect,n.childViews,c(),h()):null;return s.rect={get:d},i.rect={get:d},t.forEach(p=>{e[p]=typeof a[p]=="undefined"?Rw[p]:a[p]}),{write:()=>{if(Ow(o,e))return Lw(n.element,e),Object.assign(o,I({},e)),!0},destroy:()=>{}}},Ow=(t,e)=>{if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const s in e)if(e[s]!==t[s])return!0;return!1},Lw=(t,{opacity:e,perspective:s,translateX:i,translateY:n,scaleX:a,scaleY:o,rotateX:c,rotateY:h,rotateZ:d,originX:p,originY:m,width:b,height:f})=>{let g="",v="";(Ge(p)||Ge(m))&&(v+=`transform-origin: ${p||0}px ${m||0}px;`),Ge(s)&&(g+=`perspective(${s}px) `),(Ge(i)||Ge(n))&&(g+=`translate3d(${i||0}px, ${n||0}px, 0) `),(Ge(a)||Ge(o))&&(g+=`scale3d(${Ge(a)?a:1}, ${Ge(o)?o:1}, 1) `),Ge(d)&&(g+=`rotateZ(${d}rad) `),Ge(c)&&(g+=`rotateX(${c}rad) `),Ge(h)&&(g+=`rotateY(${h}rad) `),g.length&&(v+=`transform:${g};`),Ge(e)&&(v+=`opacity:${e};`,e===0&&(v+="visibility:hidden;"),e<1&&(v+="pointer-events:none;")),Ge(f)&&(v+=`height:${f}px;`),Ge(b)&&(v+=`width:${b}px;`);const _=t.elementCurrentStyle||"";(v.length!==_.length||v!==_)&&(t.style.cssText=v,t.elementCurrentStyle=v)},$w={styles:Cw,listeners:xw,animations:_w,apis:Sw},Lf=(t={},e={},s={})=>(e.layoutCalculated||(t.paddingTop=parseInt(s.paddingTop,10)||0,t.marginTop=parseInt(s.marginTop,10)||0,t.marginRight=parseInt(s.marginRight,10)||0,t.marginBottom=parseInt(s.marginBottom,10)||0,t.marginLeft=parseInt(s.marginLeft,10)||0,e.layoutCalculated=!0),t.left=e.offsetLeft||0,t.top=e.offsetTop||0,t.width=e.offsetWidth||0,t.height=e.offsetHeight||0,t.right=t.left+t.width,t.bottom=t.top+t.height,t.scrollTop=e.scrollTop,t.hidden=e.offsetParent===null,t),Ht=({tag:t="div",name:e=null,attributes:s={},read:i=()=>{},write:n=()=>{},create:a=()=>{},destroy:o=()=>{},filterFrameActionsForChild:c=(f,g)=>g,didCreateView:h=()=>{},didWriteView:d=()=>{},ignoreRect:p=!1,ignoreRectUpdate:m=!1,mixins:b=[]}={})=>(f,g={})=>{const v=kh(t,`filepond--${e}`,s),_=window.getComputedStyle(v,null),R=Lf();let w=null,S=!1;const C=[],L=[],y={},P={},A=[n],F=[i],W=[o],G=()=>v,B=()=>C.concat(),X=()=>y,M=Q=>(st,rt)=>st(Q,rt),q=()=>w||(w=eE(R,C,[0,0],[1,1]),w),j=()=>_,N=()=>{w=null,C.forEach(rt=>rt._read()),!(m&&R.width&&R.height)&&Lf(R,v,_);const st={root:lt,props:g,rect:R};F.forEach(rt=>rt(st))},k=(Q,st,rt)=>{let pt=st.length===0;return A.forEach(dt=>{dt({props:g,root:lt,actions:st,timestamp:Q,shouldOptimize:rt})===!1&&(pt=!1)}),L.forEach(dt=>{dt.write(Q)===!1&&(pt=!1)}),C.filter(dt=>!!dt.element.parentNode).forEach(dt=>{dt._write(Q,c(dt,st),rt)||(pt=!1)}),C.forEach((dt,ke)=>{dt.element.parentNode||(lt.appendChild(dt.element,ke),dt._read(),dt._write(Q,c(dt,st),rt),pt=!1)}),S=pt,d({props:g,root:lt,actions:st,timestamp:Q}),pt},U=()=>{L.forEach(Q=>Q.destroy()),W.forEach(Q=>{Q({root:lt,props:g})}),C.forEach(Q=>Q._destroy())},Y={element:{get:G},style:{get:j},childViews:{get:B}},z=O(I({},Y),{rect:{get:q},ref:{get:X},is:Q=>e===Q,appendChild:hw(v),createChildView:M(f),linkView:Q=>(C.push(Q),Q),unlinkView:Q=>{C.splice(C.indexOf(Q),1)},appendChildView:dw(v,C),removeChildView:uw(v,C),registerWriter:Q=>A.push(Q),registerReader:Q=>F.push(Q),registerDestroyer:Q=>W.push(Q),invalidateLayout:()=>v.layoutCalculated=!1,dispatch:f.dispatch,query:f.query}),ot={element:{get:G},childViews:{get:B},rect:{get:q},resting:{get:()=>S},isRectIgnored:()=>p,_read:N,_write:k,_destroy:U},nt=O(I({},Y),{rect:{get:()=>R}});Object.keys(b).sort((Q,st)=>Q==="styles"?1:st==="styles"?-1:0).forEach(Q=>{const st=$w[Q]({mixinConfig:b[Q],viewProps:g,viewState:P,viewInternalAPI:z,viewExternalAPI:ot,view:er(nt)});st&&L.push(st)});const lt=er(z);a({root:lt,props:g});const gt=fw(v);return C.forEach((Q,st)=>{lt.appendChild(Q.element,gt+st)}),h(lt),er(ot)},Aw=(t,e,s=60)=>{const i="__framePainter";if(window[i]){window[i].readers.push(t),window[i].writers.push(e);return}window[i]={readers:[t],writers:[e]};const n=window[i],a=1e3/s;let o=null,c=null,h=null,d=null;const p=()=>{document.hidden?(h=()=>window.setTimeout(()=>m(performance.now()),a),d=()=>window.clearTimeout(c)):(h=()=>window.requestAnimationFrame(m),d=()=>window.cancelAnimationFrame(c))};document.addEventListener("visibilitychange",()=>{d&&d(),p(),m(performance.now())});const m=b=>{c=h(m),o||(o=b);const f=b-o;f<=a||(o=b-f%a,n.readers.forEach(g=>g()),n.writers.forEach(g=>g(b)))};return p(),m(performance.now()),{pause:()=>{d(c)}}},Xe=(t,e)=>({root:s,props:i,actions:n=[],timestamp:a,shouldOptimize:o})=>{n.filter(c=>t[c.type]).forEach(c=>t[c.type]({root:s,props:i,action:c.data,timestamp:a,shouldOptimize:o})),e&&e({root:s,props:i,actions:n,timestamp:a,shouldOptimize:o})},$f=(t,e)=>e.parentNode.insertBefore(t,e),Af=(t,e)=>e.parentNode.insertBefore(t,e.nextSibling),Ju=t=>Array.isArray(t),gn=t=>t==null,yw=t=>t.trim(),Ku=t=>""+t,Mw=(t,e=",")=>gn(t)?[]:Ju(t)?t:Ku(t).split(e).map(yw).filter(s=>s.length),sE=t=>typeof t=="boolean",iE=t=>sE(t)?t:t==="true",Ye=t=>typeof t=="string",nE=t=>fr(t)?t:Ye(t)?Ku(t).replace(/[a-z]+/gi,""):0,ah=t=>parseInt(nE(t),10),yf=t=>parseFloat(nE(t)),$o=t=>fr(t)&&isFinite(t)&&Math.floor(t)===t,Mf=(t,e=1e3)=>{if($o(t))return t;let s=Ku(t).trim();return/MB$/i.test(s)?(s=s.replace(/MB$i/,"").trim(),ah(s)*e*e):/KB/i.test(s)?(s=s.replace(/KB$i/,"").trim(),ah(s)*e):ah(s)},gr=t=>typeof t=="function",Nw=t=>{let e=self,s=t.split("."),i=null;for(;i=s.shift();)if(e=e[i],!e)return null;return e},Nf={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},Pw=t=>{const e={};return e.url=Ye(t)?t:t.url||"",e.timeout=t.timeout?parseInt(t.timeout,10):0,e.headers=t.headers?t.headers:{},Mt(Nf,s=>{e[s]=Dw(s,t[s],Nf[s],e.timeout,e.headers)}),e.process=t.process||Ye(t)||t.url?e.process:null,e.remove=t.remove||null,delete e.headers,e},Dw=(t,e,s,i,n)=>{if(e===null)return null;if(typeof e=="function")return e;const a={url:s==="GET"||s==="PATCH"?`?${t}=`:"",method:s,headers:n,withCredentials:!1,timeout:i,onload:null,ondata:null,onerror:null};if(Ye(e))return a.url=e,a;if(Object.assign(a,e),Ye(a.headers)){const o=a.headers.split(/:(.+)/);a.headers={header:o[0],value:o[1]}}return a.withCredentials=iE(a.withCredentials),a},Fw=t=>Pw(t),jw=t=>t===null,me=t=>typeof t=="object"&&t!==null,kw=t=>me(t)&&Ye(t.url)&&me(t.process)&&me(t.revert)&&me(t.restore)&&me(t.fetch),Ip=t=>Ju(t)?"array":jw(t)?"null":$o(t)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(t)?"bytes":kw(t)?"api":typeof t,Gw=t=>t.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),Bw={array:Mw,boolean:iE,int:t=>Ip(t)==="bytes"?Mf(t):ah(t),number:yf,float:yf,bytes:Mf,string:t=>gr(t)?t:Ku(t),function:t=>Nw(t),serverapi:Fw,object:t=>{try{return JSON.parse(Gw(t))}catch(e){return null}}},Uw=(t,e)=>Bw[e](t),rE=(t,e,s)=>{if(t===e)return t;let i=Ip(t);if(i!==s){const n=Uw(t,s);if(i=Ip(n),n===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${s}"`;t=n}return t},Vw=(t,e)=>{let s=t;return{enumerable:!0,get:()=>s,set:i=>{s=rE(i,t,e)}}},zw=t=>{const e={};return Mt(t,s=>{const i=t[s];e[s]=Vw(i[0],i[1])}),er(e)},Ww=t=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:zw(t)}),tp=(t,e="-")=>t.split(/(?=[A-Z])/).map(s=>s.toLowerCase()).join(e),Hw=(t,e)=>{const s={};return Mt(e,i=>{s[i]={get:()=>t.getState().options[i],set:n=>{t.dispatch(`SET_${tp(i,"_").toUpperCase()}`,{value:n})}}}),s},qw=t=>(e,s,i)=>{const n={};return Mt(t,a=>{const o=tp(a,"_").toUpperCase();n[`SET_${o}`]=c=>{try{i.options[a]=c.value}catch(h){}e(`DID_SET_${o}`,{value:i.options[a]})}}),n},Yw=t=>e=>{const s={};return Mt(t,i=>{s[`GET_${tp(i,"_").toUpperCase()}`]=n=>e.options[i]}),s},ks={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Gm=()=>Math.random().toString(36).substring(2,11),Bm=(t,e)=>t.splice(e,1),Xw=(t,e)=>{e?t():document.hidden?Promise.resolve(1).then(t):setTimeout(t,0)},ep=()=>{const t=[],e=(i,n)=>{Bm(t,t.findIndex(a=>a.event===i&&(a.cb===n||!n)))},s=(i,n,a)=>{t.filter(o=>o.event===i).map(o=>o.cb).forEach(o=>Xw(()=>o(...n),a))};return{fireSync:(i,...n)=>{s(i,n,!0)},fire:(i,...n)=>{s(i,n,!1)},on:(i,n)=>{t.push({event:i,cb:n})},onOnce:(i,n)=>{t.push({event:i,cb:(...a)=>{e(i,n),n(...a)}})},off:e}},aE=(t,e,s)=>{Object.getOwnPropertyNames(t).filter(i=>!s.includes(i)).forEach(i=>Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i)))},Zw=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],os=t=>{const e={};return aE(t,e,Zw),e},Qw=t=>{t.forEach((e,s)=>{e.released&&Bm(t,s)})},it={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},re={INPUT:1,LIMBO:2,LOCAL:3},oE=t=>/[^0-9]+/.exec(t),lE=()=>oE(1.1.toLocaleString())[0],Jw=()=>{const t=lE(),e=1e3.toLocaleString(),s=1e3.toString();return e!==s?oE(e)[0]:t==="."?",":"."},V={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Um=[],oi=(t,e,s)=>new Promise((i,n)=>{const a=Um.filter(c=>c.key===t).map(c=>c.cb);if(a.length===0){i(e);return}const o=a.shift();a.reduce((c,h)=>c.then(d=>h(d,s)),o(e,s)).then(c=>i(c)).catch(c=>n(c))}),Hr=(t,e,s)=>Um.filter(i=>i.key===t).map(i=>i.cb(e,s)),Kw=(t,e)=>Um.push({key:t,cb:e}),tT=t=>Object.assign(ga,t),Gh=()=>I({},ga),eT=t=>{Mt(t,(e,s)=>{ga[e]&&(ga[e][0]=rE(s,ga[e][0],ga[e][1]))})},ga={id:[null,V.STRING],name:["filepond",V.STRING],disabled:[!1,V.BOOLEAN],className:[null,V.STRING],required:[!1,V.BOOLEAN],captureMethod:[null,V.STRING],allowSyncAcceptAttribute:[!0,V.BOOLEAN],allowDrop:[!0,V.BOOLEAN],allowBrowse:[!0,V.BOOLEAN],allowPaste:[!0,V.BOOLEAN],allowMultiple:[!1,V.BOOLEAN],allowReplace:[!0,V.BOOLEAN],allowRevert:[!0,V.BOOLEAN],allowRemove:[!0,V.BOOLEAN],allowProcess:[!0,V.BOOLEAN],allowReorder:[!1,V.BOOLEAN],allowDirectoriesOnly:[!1,V.BOOLEAN],storeAsFile:[!1,V.BOOLEAN],forceRevert:[!1,V.BOOLEAN],maxFiles:[null,V.INT],checkValidity:[!1,V.BOOLEAN],itemInsertLocationFreedom:[!0,V.BOOLEAN],itemInsertLocation:["before",V.STRING],itemInsertInterval:[75,V.INT],dropOnPage:[!1,V.BOOLEAN],dropOnElement:[!0,V.BOOLEAN],dropValidation:[!1,V.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],V.ARRAY],instantUpload:[!0,V.BOOLEAN],maxParallelUploads:[2,V.INT],allowMinimumUploadDuration:[!0,V.BOOLEAN],chunkUploads:[!1,V.BOOLEAN],chunkForce:[!1,V.BOOLEAN],chunkSize:[5e6,V.INT],chunkRetryDelays:[[500,1e3,3e3],V.ARRAY],server:[null,V.SERVER_API],fileSizeBase:[1e3,V.INT],labelFileSizeBytes:["bytes",V.STRING],labelFileSizeKilobytes:["KB",V.STRING],labelFileSizeMegabytes:["MB",V.STRING],labelFileSizeGigabytes:["GB",V.STRING],labelDecimalSeparator:[lE(),V.STRING],labelThousandsSeparator:[Jw(),V.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',V.STRING],labelInvalidField:["Field contains invalid files",V.STRING],labelFileWaitingForSize:["Waiting for size",V.STRING],labelFileSizeNotAvailable:["Size not available",V.STRING],labelFileCountSingular:["file in list",V.STRING],labelFileCountPlural:["files in list",V.STRING],labelFileLoading:["Loading",V.STRING],labelFileAdded:["Added",V.STRING],labelFileLoadError:["Error during load",V.STRING],labelFileRemoved:["Removed",V.STRING],labelFileRemoveError:["Error during remove",V.STRING],labelFileProcessing:["Uploading",V.STRING],labelFileProcessingComplete:["Upload complete",V.STRING],labelFileProcessingAborted:["Upload cancelled",V.STRING],labelFileProcessingError:["Error during upload",V.STRING],labelFileProcessingRevertError:["Error during revert",V.STRING],labelTapToCancel:["tap to cancel",V.STRING],labelTapToRetry:["tap to retry",V.STRING],labelTapToUndo:["tap to undo",V.STRING],labelButtonRemoveItem:["Remove",V.STRING],labelButtonAbortItemLoad:["Abort",V.STRING],labelButtonRetryItemLoad:["Retry",V.STRING],labelButtonAbortItemProcessing:["Cancel",V.STRING],labelButtonUndoItemProcessing:["Undo",V.STRING],labelButtonRetryItemProcessing:["Retry",V.STRING],labelButtonProcessItem:["Upload",V.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',V.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',V.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',V.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',V.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',V.STRING],oninit:[null,V.FUNCTION],onwarning:[null,V.FUNCTION],onerror:[null,V.FUNCTION],onactivatefile:[null,V.FUNCTION],oninitfile:[null,V.FUNCTION],onaddfilestart:[null,V.FUNCTION],onaddfileprogress:[null,V.FUNCTION],onaddfile:[null,V.FUNCTION],onprocessfilestart:[null,V.FUNCTION],onprocessfileprogress:[null,V.FUNCTION],onprocessfileabort:[null,V.FUNCTION],onprocessfilerevert:[null,V.FUNCTION],onprocessfile:[null,V.FUNCTION],onprocessfiles:[null,V.FUNCTION],onremovefile:[null,V.FUNCTION],onpreparefile:[null,V.FUNCTION],onupdatefiles:[null,V.FUNCTION],onreorderfiles:[null,V.FUNCTION],beforeDropFile:[null,V.FUNCTION],beforeAddFile:[null,V.FUNCTION],beforeRemoveFile:[null,V.FUNCTION],beforePrepareFile:[null,V.FUNCTION],stylePanelLayout:[null,V.STRING],stylePanelAspectRatio:[null,V.STRING],styleItemPanelAspectRatio:[null,V.STRING],styleButtonRemoveItemPosition:["left",V.STRING],styleButtonProcessItemPosition:["right",V.STRING],styleLoadIndicatorPosition:["right",V.STRING],styleProgressIndicatorPosition:["right",V.STRING],styleButtonRemoveItemAlign:[!1,V.BOOLEAN],files:[[],V.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],V.ARRAY]},Er=(t,e)=>gn(e)?t[0]||null:$o(e)?t[e]||null:(typeof e=="object"&&(e=e.id),t.find(s=>s.id===e)||null),cE=t=>{if(gn(t))return t;if(/:/.test(t)){const e=t.split(":");return e[1]/e[0]}return parseFloat(t)},li=t=>t.filter(e=>!e.archived),hE={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Yc=null;const sT=()=>{if(Yc===null)try{const t=new DataTransfer;t.items.add(new File(["hello world"],"This_Works.txt"));const e=document.createElement("input");e.setAttribute("type","file"),e.files=t.files,Yc=e.files.length===1}catch(t){Yc=!1}return Yc},iT=[it.LOAD_ERROR,it.PROCESSING_ERROR,it.PROCESSING_REVERT_ERROR],nT=[it.LOADING,it.PROCESSING,it.PROCESSING_QUEUED,it.INIT],rT=[it.PROCESSING_COMPLETE],aT=t=>iT.includes(t.status),oT=t=>nT.includes(t.status),lT=t=>rT.includes(t.status),Pf=t=>me(t.options.server)&&(me(t.options.server.process)||gr(t.options.server.process)),cT=t=>({GET_STATUS:()=>{const e=li(t.items),{EMPTY:s,ERROR:i,BUSY:n,IDLE:a,READY:o}=hE;return e.length===0?s:e.some(aT)?i:e.some(oT)?n:e.some(lT)?o:a},GET_ITEM:e=>Er(t.items,e),GET_ACTIVE_ITEM:e=>Er(li(t.items),e),GET_ACTIVE_ITEMS:()=>li(t.items),GET_ITEMS:()=>t.items,GET_ITEM_NAME:e=>{const s=Er(t.items,e);return s?s.filename:null},GET_ITEM_SIZE:e=>{const s=Er(t.items,e);return s?s.fileSize:null},GET_STYLES:()=>Object.keys(t.options).filter(e=>/^style/.test(e)).map(e=>({name:e,value:t.options[e]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(t.options.stylePanelLayout)?1:cE(t.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>t.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:e=>li(t.items).filter(s=>s.status===e),GET_TOTAL_ITEMS:()=>li(t.items).length,SHOULD_UPDATE_FILE_INPUT:()=>t.options.storeAsFile&&sT()&&!Pf(t),IS_ASYNC:()=>Pf(t),GET_FILE_SIZE_LABELS:e=>({labelBytes:e("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:e("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:e("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:e("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),hT=t=>{const e=li(t.items).length;if(!t.options.allowMultiple)return e===0;const s=t.options.maxFiles;return s===null||e<s},dE=(t,e,s)=>Math.max(Math.min(s,t),e),dT=(t,e,s)=>t.splice(e,0,s),uT=(t,e,s)=>gn(e)?null:typeof s=="undefined"?(t.push(e),e):(s=dE(s,0,t.length),dT(t,s,e),e),vp=t=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(t),Uc=t=>`${t}`.split("/").pop().split("?").shift(),sp=t=>t.split(".").pop(),pT=t=>{if(typeof t!="string")return"";const e=t.split("/").pop();return/svg/.test(e)?"svg":/zip|compressed/.test(e)?"zip":/plain/.test(e)?"txt":/msword/.test(e)?"doc":/[a-z]+/.test(e)?e==="jpeg"?"jpg":e:""},No=(t,e="")=>(e+t).slice(-e.length),uE=(t=new Date)=>`${t.getFullYear()}-${No(t.getMonth()+1,"00")}-${No(t.getDate(),"00")}_${No(t.getHours(),"00")}-${No(t.getMinutes(),"00")}-${No(t.getSeconds(),"00")}`,So=(t,e,s=null,i=null)=>{const n=typeof s=="string"?t.slice(0,t.size,s):t.slice(0,t.size,t.type);return n.lastModifiedDate=new Date,t._relativePath&&(n._relativePath=t._relativePath),Ye(e)||(e=uE()),e&&i===null&&sp(e)?n.name=e:(i=i||pT(n.type),n.name=e+(i?"."+i:"")),n},mT=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,pE=(t,e)=>{const s=mT();if(s){const i=new s;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},fT=(t,e)=>{const s=new ArrayBuffer(t.length),i=new Uint8Array(s);for(let n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return pE(s,e)},mE=t=>(/^data:(.+);/.exec(t)||[])[1]||null,gT=t=>t.split(",")[1].replace(/\s/g,""),ET=t=>atob(gT(t)),bT=t=>{const e=mE(t),s=ET(t);return fT(s,e)},IT=(t,e,s)=>So(bT(t),e,null,s),vT=t=>{if(!/^content-disposition:/i.test(t))return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(s=>s.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(s=>s.length);return e.length?decodeURI(e[e.length-1]):null},_T=t=>{if(/content-length:/i.test(t)){const e=t.match(/[0-9]+/)[0];return e?parseInt(e,10):null}return null},wT=t=>/x-content-transfer-id:/i.test(t)&&(t.split(":")[1]||"").trim()||null,Vm=t=>{const e={source:null,name:null,size:null},s=t.split(`
`);for(let i of s){const n=vT(i);if(n){e.name=n;continue}const a=_T(i);if(a){e.size=a;continue}const o=wT(i);if(o){e.source=o;continue}}return e},TT=t=>{const e={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},s=()=>e.progress,i=()=>{e.request&&e.request.abort&&e.request.abort()},n=()=>{const c=e.source;o.fire("init",c),c instanceof File?o.fire("load",c):c instanceof Blob?o.fire("load",So(c,c.name)):vp(c)?o.fire("load",IT(c)):a(c)},a=c=>{if(!t){o.fire("error",{type:"error",body:"Can't load URL",code:400});return}e.timestamp=Date.now(),e.request=t(c,h=>{e.duration=Date.now()-e.timestamp,e.complete=!0,h instanceof Blob&&(h=So(h,h.name||Uc(c))),o.fire("load",h instanceof Blob?h:h?h.body:null)},h=>{o.fire("error",typeof h=="string"?{type:"error",code:0,body:h}:h)},(h,d,p)=>{if(p&&(e.size=p),e.duration=Date.now()-e.timestamp,!h){e.progress=null;return}e.progress=d/p,o.fire("progress",e.progress)},()=>{o.fire("abort")},h=>{const d=Vm(typeof h=="string"?h:h.headers);o.fire("meta",{size:e.size||d.size,filename:d.name,source:d.source})})},o=O(I({},ep()),{setSource:c=>e.source=c,getProgress:s,abort:i,load:n});return o},Df=t=>/GET|HEAD/.test(t),Br=(t,e,s)=>{const i={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{n=!0,o.abort()}};let n=!1,a=!1;s=I({method:"POST",headers:{},withCredentials:!1},s),e=encodeURI(e),Df(s.method)&&t&&(e=`${e}${encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))}`);const o=new XMLHttpRequest,c=Df(s.method)?o:o.upload;return c.onprogress=h=>{n||i.onprogress(h.lengthComputable,h.loaded,h.total)},o.onreadystatechange=()=>{o.readyState<2||o.readyState===4&&o.status===0||a||(a=!0,i.onheaders(o))},o.onload=()=>{o.status>=200&&o.status<300?i.onload(o):i.onerror(o)},o.onerror=()=>i.onerror(o),o.onabort=()=>{n=!0,i.onabort()},o.ontimeout=()=>i.ontimeout(o),o.open(s.method,e,!0),$o(s.timeout)&&(o.timeout=s.timeout),Object.keys(s.headers).forEach(h=>{const d=unescape(encodeURIComponent(s.headers[h]));o.setRequestHeader(h,d)}),s.responseType&&(o.responseType=s.responseType),s.withCredentials&&(o.withCredentials=!0),o.send(t),i},jt=(t,e,s,i)=>({type:t,code:e,body:s,headers:i}),Ur=t=>e=>{t(jt("error",0,"Timeout",e.getAllResponseHeaders()))},Ff=t=>/\?/.test(t),el=(...t)=>{let e="";return t.forEach(s=>{e+=Ff(e)&&Ff(s)?s.replace(/\?/,"&"):s}),e},hp=(t="",e)=>{if(typeof e=="function")return e;if(!e||!Ye(e.url))return null;const s=e.onload||(n=>n),i=e.onerror||(n=>null);return(n,a,o,c,h,d)=>{const p=Br(n,el(t,e.url),O(I({},e),{responseType:"blob"}));return p.onload=m=>{const b=m.getAllResponseHeaders(),f=Vm(b).name||Uc(n);a(jt("load",m.status,e.method==="HEAD"?null:So(s(m.response),f),b))},p.onerror=m=>{o(jt("error",m.status,i(m.response)||m.statusText,m.getAllResponseHeaders()))},p.onheaders=m=>{d(jt("headers",m.status,null,m.getAllResponseHeaders()))},p.ontimeout=Ur(o),p.onprogress=c,p.onabort=h,p}},ws={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},xT=(t,e,s,i,n,a,o,c,h,d,p)=>{const m=[],{chunkTransferId:b,chunkServer:f,chunkSize:g,chunkRetryDelays:v}=p,_={serverId:b,aborted:!1},R=e.ondata||(M=>M),w=e.onload||((M,q)=>q==="HEAD"?M.getResponseHeader("Upload-Offset"):M.response),S=e.onerror||(M=>null),C=M=>{const q=new FormData;me(n)&&q.append(s,JSON.stringify(n));const j=typeof e.headers=="function"?e.headers(i,n):O(I({},e.headers),{"Upload-Length":i.size}),N=O(I({},e),{headers:j}),k=Br(R(q),el(t,e.url),N);k.onload=U=>M(w(U,N.method)),k.onerror=U=>o(jt("error",U.status,S(U.response)||U.statusText,U.getAllResponseHeaders())),k.ontimeout=Ur(o)},L=M=>{const q=el(t,f.url,_.serverId),N={headers:typeof e.headers=="function"?e.headers(_.serverId):I({},e.headers),method:"HEAD"},k=Br(null,q,N);k.onload=U=>M(w(U,N.method)),k.onerror=U=>o(jt("error",U.status,S(U.response)||U.statusText,U.getAllResponseHeaders())),k.ontimeout=Ur(o)},y=Math.floor(i.size/g);for(let M=0;M<=y;M++){const q=M*g,j=i.slice(q,q+g,"application/offset+octet-stream");m[M]={index:M,size:j.size,offset:q,data:j,file:i,progress:0,retries:[...v],status:ws.QUEUED,error:null,request:null,timeout:null}}const P=()=>a(_.serverId),A=M=>M.status===ws.QUEUED||M.status===ws.ERROR,F=M=>{if(_.aborted)return;if(M=M||m.find(A),!M){m.every(z=>z.status===ws.COMPLETE)&&P();return}M.status=ws.PROCESSING,M.progress=null;const q=f.ondata||(z=>z),j=f.onerror||(z=>null),N=f.onload||(()=>{}),k=el(t,f.url,_.serverId),U=typeof f.headers=="function"?f.headers(M):O(I({},f.headers),{"Content-Type":"application/offset+octet-stream","Upload-Offset":M.offset,"Upload-Length":i.size,"Upload-Name":i.name}),Y=M.request=Br(q(M.data),k,O(I({},f),{headers:U}));Y.onload=z=>{N(z,M.index,m.length),M.status=ws.COMPLETE,M.request=null,B()},Y.onprogress=(z,ot,nt)=>{M.progress=z?ot:null,G()},Y.onerror=z=>{M.status=ws.ERROR,M.request=null,M.error=j(z.response)||z.statusText,W(M)||o(jt("error",z.status,j(z.response)||z.statusText,z.getAllResponseHeaders()))},Y.ontimeout=z=>{M.status=ws.ERROR,M.request=null,W(M)||Ur(o)(z)},Y.onabort=()=>{M.status=ws.QUEUED,M.request=null,h()}},W=M=>M.retries.length===0?!1:(M.status=ws.WAITING,clearTimeout(M.timeout),M.timeout=setTimeout(()=>{F(M)},M.retries.shift()),!0),G=()=>{const M=m.reduce((j,N)=>j===null||N.progress===null?null:j+N.progress,0);if(M===null)return c(!1,0,0);const q=m.reduce((j,N)=>j+N.size,0);c(!0,M,q)},B=()=>{m.filter(q=>q.status===ws.PROCESSING).length>=1||F()},X=()=>{m.forEach(M=>{clearTimeout(M.timeout),M.request&&M.request.abort()})};return _.serverId?L(M=>{_.aborted||(m.filter(q=>q.offset<M).forEach(q=>{q.status=ws.COMPLETE,q.progress=q.size}),B())}):C(M=>{_.aborted||(d(M),_.serverId=M,B())}),{abort:()=>{_.aborted=!0,X()}}},ST=(t,e,s,i)=>(n,a,o,c,h,d,p)=>{if(!n)return;const m=i.chunkUploads,b=m&&n.size>i.chunkSize,f=m&&(b||i.chunkForce);if(n instanceof Blob&&f)return xT(t,e,s,n,a,o,c,h,d,p,i);const g=e.ondata||(L=>L),v=e.onload||(L=>L),_=e.onerror||(L=>null),R=typeof e.headers=="function"?e.headers(n,a)||{}:I({},e.headers),w=O(I({},e),{headers:R});var S=new FormData;me(a)&&S.append(s,JSON.stringify(a)),(n instanceof Blob?[{name:null,file:n}]:n).forEach(L=>{S.append(s,L.file,L.name===null?L.file.name:`${L.name}${L.file.name}`)});const C=Br(g(S),el(t,e.url),w);return C.onload=L=>{o(jt("load",L.status,v(L.response),L.getAllResponseHeaders()))},C.onerror=L=>{c(jt("error",L.status,_(L.response)||L.statusText,L.getAllResponseHeaders()))},C.ontimeout=Ur(c),C.onprogress=h,C.onabort=d,C},RT=(t="",e,s,i)=>typeof e=="function"?(...n)=>e(s,...n,i):!e||!Ye(e.url)?null:ST(t,e,s,i),Po=(t="",e)=>{if(typeof e=="function")return e;if(!e||!Ye(e.url))return(n,a)=>a();const s=e.onload||(n=>n),i=e.onerror||(n=>null);return(n,a,o)=>{const c=Br(n,t+e.url,e);return c.onload=h=>{a(jt("load",h.status,s(h.response),h.getAllResponseHeaders()))},c.onerror=h=>{o(jt("error",h.status,i(h.response)||h.statusText,h.getAllResponseHeaders()))},c.ontimeout=Ur(o),c}},fE=(t=0,e=1)=>t+Math.random()*(e-t),CT=(t,e=1e3,s=0,i=25,n=250)=>{let a=null;const o=Date.now(),c=()=>{let h=Date.now()-o,d=fE(i,n);h+d>e&&(d=h+d-e);let p=h/e;if(p>=1||document.hidden){t(1);return}t(p),a=setTimeout(c,d)};return e>0&&c(),{clear:()=>{clearTimeout(a)}}},OT=(t,e)=>{const s={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:i}=e,n=(p,m)=>{const b=()=>{s.duration===0||s.progress===null||d.fire("progress",d.getProgress())},f=()=>{s.complete=!0,d.fire("load-perceived",s.response.body)};d.fire("start"),s.timestamp=Date.now(),s.perceivedPerformanceUpdater=CT(g=>{s.perceivedProgress=g,s.perceivedDuration=Date.now()-s.timestamp,b(),s.response&&s.perceivedProgress===1&&!s.complete&&f()},i?fE(750,1500):0),s.request=t(p,m,g=>{s.response=me(g)?g:{type:"load",code:200,body:`${g}`,headers:{}},s.duration=Date.now()-s.timestamp,s.progress=1,d.fire("load",s.response.body),(!i||i&&s.perceivedProgress===1)&&f()},g=>{s.perceivedPerformanceUpdater.clear(),d.fire("error",me(g)?g:{type:"error",code:0,body:`${g}`})},(g,v,_)=>{s.duration=Date.now()-s.timestamp,s.progress=g?v/_:null,b()},()=>{s.perceivedPerformanceUpdater.clear(),d.fire("abort",s.response?s.response.body:null)},g=>{d.fire("transfer",g)})},a=()=>{s.request&&(s.perceivedPerformanceUpdater.clear(),s.request.abort&&s.request.abort(),s.complete=!0)},o=()=>{a(),s.complete=!1,s.perceivedProgress=0,s.progress=0,s.timestamp=null,s.perceivedDuration=0,s.duration=0,s.request=null,s.response=null},c=i?()=>s.progress?Math.min(s.progress,s.perceivedProgress):null:()=>s.progress||null,h=i?()=>Math.min(s.duration,s.perceivedDuration):()=>s.duration,d=O(I({},ep()),{process:n,abort:a,getProgress:c,getDuration:h,reset:o});return d},gE=t=>t.substring(0,t.lastIndexOf("."))||t,LT=t=>{let e=[t.name,t.size,t.type];return t instanceof Blob||vp(t)?e[0]=t.name||uE():vp(t)?(e[1]=t.length,e[2]=mE(t)):Ye(t)&&(e[0]=Uc(t),e[1]=0,e[2]="application/octet-stream"),{name:e[0],size:e[1],type:e[2]}},Vr=t=>!!(t instanceof File||t instanceof Blob&&t.name),EE=t=>{if(!me(t))return t;const e=Ju(t)?[]:{};for(const s in t){if(!t.hasOwnProperty(s))continue;const i=t[s];e[s]=i&&me(i)?EE(i):i}return e},$T=(t=null,e=null,s=null)=>{const i=Gm(),n={archived:!1,frozen:!1,released:!1,source:null,file:s,serverFileReference:e,transferId:null,processingAborted:!1,status:e?it.PROCESSING_COMPLETE:it.INIT,activeLoader:null,activeProcessor:null};let a=null;const o={},c=A=>n.status=A,h=(A,...F)=>{n.released||n.frozen||y.fire(A,...F)},d=()=>sp(n.file.name),p=()=>n.file.type,m=()=>n.file.size,b=()=>n.file,f=(A,F,W)=>{if(n.source=A,y.fireSync("init"),n.file){y.fireSync("load-skip");return}n.file=LT(A),F.on("init",()=>{h("load-init")}),F.on("meta",G=>{n.file.size=G.size,n.file.filename=G.filename,G.source&&(t=re.LIMBO,n.serverFileReference=G.source,n.status=it.PROCESSING_COMPLETE),h("load-meta")}),F.on("progress",G=>{c(it.LOADING),h("load-progress",G)}),F.on("error",G=>{c(it.LOAD_ERROR),h("load-request-error",G)}),F.on("abort",()=>{c(it.INIT),h("load-abort")}),F.on("load",G=>{n.activeLoader=null;const B=M=>{n.file=Vr(M)?M:n.file,t===re.LIMBO&&n.serverFileReference?c(it.PROCESSING_COMPLETE):c(it.IDLE),h("load")},X=M=>{n.file=G,h("load-meta"),c(it.LOAD_ERROR),h("load-file-error",M)};if(n.serverFileReference){B(G);return}W(G,B,X)}),F.setSource(A),n.activeLoader=F,F.load()},g=()=>{n.activeLoader&&n.activeLoader.load()},v=()=>{if(n.activeLoader){n.activeLoader.abort();return}c(it.INIT),h("load-abort")},_=(A,F)=>{if(n.processingAborted){n.processingAborted=!1;return}if(c(it.PROCESSING),a=null,!(n.file instanceof Blob)){y.on("load",()=>{_(A,F)});return}A.on("load",B=>{n.transferId=null,n.serverFileReference=B}),A.on("transfer",B=>{n.transferId=B}),A.on("load-perceived",B=>{n.activeProcessor=null,n.transferId=null,n.serverFileReference=B,c(it.PROCESSING_COMPLETE),h("process-complete",B)}),A.on("start",()=>{h("process-start")}),A.on("error",B=>{n.activeProcessor=null,c(it.PROCESSING_ERROR),h("process-error",B)}),A.on("abort",B=>{n.activeProcessor=null,n.serverFileReference=B,c(it.IDLE),h("process-abort"),a&&a()}),A.on("progress",B=>{h("process-progress",B)});const W=B=>{n.archived||A.process(B,I({},o))},G=console.error;F(n.file,W,G),n.activeProcessor=A},R=()=>{n.processingAborted=!1,c(it.PROCESSING_QUEUED)},w=()=>new Promise(A=>{if(!n.activeProcessor){n.processingAborted=!0,c(it.IDLE),h("process-abort"),A();return}a=()=>{A()},n.activeProcessor.abort()}),S=(A,F)=>new Promise((W,G)=>{const B=n.serverFileReference!==null?n.serverFileReference:n.transferId;if(B===null){W();return}A(B,()=>{n.serverFileReference=null,n.transferId=null,W()},X=>{if(!F){W();return}c(it.PROCESSING_REVERT_ERROR),h("process-revert-error"),G(X)}),c(it.IDLE),h("process-revert")}),C=(A,F,W)=>{const G=A.split("."),B=G[0],X=G.pop();let M=o;G.forEach(q=>M=M[q]),JSON.stringify(M[X])!==JSON.stringify(F)&&(M[X]=F,h("metadata-update",{key:B,value:o[B],silent:W}))},y=O(I({id:{get:()=>i},origin:{get:()=>t,set:A=>t=A},serverId:{get:()=>n.serverFileReference},transferId:{get:()=>n.transferId},status:{get:()=>n.status},filename:{get:()=>n.file.name},filenameWithoutExtension:{get:()=>gE(n.file.name)},fileExtension:{get:d},fileType:{get:p},fileSize:{get:m},file:{get:b},relativePath:{get:()=>n.file._relativePath},source:{get:()=>n.source},getMetadata:A=>EE(A?o[A]:o),setMetadata:(A,F,W)=>{if(me(A)){const G=A;return Object.keys(G).forEach(B=>{C(B,G[B],F)}),A}return C(A,F,W),F},extend:(A,F)=>P[A]=F,abortLoad:v,retryLoad:g,requestProcessing:R,abortProcessing:w,load:f,process:_,revert:S},ep()),{freeze:()=>n.frozen=!0,release:()=>n.released=!0,released:{get:()=>n.released},archive:()=>n.archived=!0,archived:{get:()=>n.archived},setFile:A=>n.file=A}),P=er(y);return P},AT=(t,e)=>gn(e)?0:Ye(e)?t.findIndex(s=>s.id===e):-1,jf=(t,e)=>{const s=AT(t,e);if(!(s<0))return t[s]||null},kf=(t,e,s,i,n,a)=>{const o=Br(null,t,{method:"GET",responseType:"blob"});return o.onload=c=>{const h=c.getAllResponseHeaders(),d=Vm(h).name||Uc(t);e(jt("load",c.status,So(c.response,d),h))},o.onerror=c=>{s(jt("error",c.status,c.statusText,c.getAllResponseHeaders()))},o.onheaders=c=>{a(jt("headers",c.status,null,c.getAllResponseHeaders()))},o.ontimeout=Ur(s),o.onprogress=i,o.onabort=n,o},Gf=t=>(t.indexOf("//")===0&&(t=location.protocol+t),t.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),yT=t=>(t.indexOf(":")>-1||t.indexOf("//")>-1)&&Gf(location.href)!==Gf(t),Xc=t=>(...e)=>gr(t)?t(...e):t,MT=t=>!Vr(t.file),dp=(t,e)=>{clearTimeout(e.listUpdateTimeout),e.listUpdateTimeout=setTimeout(()=>{t("DID_UPDATE_ITEMS",{items:li(e.items)})},0)},Bf=(t,...e)=>new Promise(s=>{if(!t)return s(!0);const i=t(...e);if(i==null)return s(!0);if(typeof i=="boolean")return s(i);typeof i.then=="function"&&i.then(s)}),up=(t,e)=>{t.items.sort((s,i)=>e(os(s),os(i)))},Ts=(t,e)=>(o={})=>{var c=o,{query:s,success:i=()=>{},failure:n=()=>{}}=c,a=uf(c,["query","success","failure"]);const h=Er(t.items,s);if(!h){n({error:jt("error",0,"Item not found"),file:null});return}e(h,i,n,a||{})},NT=(t,e,s)=>({ABORT_ALL:()=>{li(s.items).forEach(i=>{i.freeze(),i.abortLoad(),i.abortProcessing()})},DID_SET_FILES:({value:i=[]})=>{const n=i.map(o=>({source:o.source?o.source:o,options:o.options}));let a=li(s.items);a.forEach(o=>{n.find(c=>c.source===o.source||c.source===o.file)||t("REMOVE_ITEM",{query:o,remove:!1})}),a=li(s.items),n.forEach((o,c)=>{a.find(h=>h.source===o.source||h.file===o.source)||t("ADD_ITEM",O(I({},o),{interactionMethod:ks.NONE,index:c}))})},DID_UPDATE_ITEM_METADATA:({id:i,action:n,change:a})=>{a.silent||(clearTimeout(s.itemUpdateTimeout),s.itemUpdateTimeout=setTimeout(()=>{const o=jf(s.items,i);if(!e("IS_ASYNC")){oi("SHOULD_PREPARE_OUTPUT",!1,{item:o,query:e,action:n,change:a}).then(p=>{const m=e("GET_BEFORE_PREPARE_FILE");m&&(p=m(o,p)),p&&t("REQUEST_PREPARE_OUTPUT",{query:i,item:o,success:b=>{t("DID_PREPARE_OUTPUT",{id:i,file:b})}},!0)});return}o.origin===re.LOCAL&&t("DID_LOAD_ITEM",{id:o.id,error:null,serverFileReference:o.source});const c=()=>{setTimeout(()=>{t("REQUEST_ITEM_PROCESSING",{query:i})},32)},h=p=>{o.revert(Po(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")).then(p?c:()=>{}).catch(()=>{})},d=p=>{o.abortProcessing().then(p?c:()=>{})};if(o.status===it.PROCESSING_COMPLETE)return h(s.options.instantUpload);if(o.status===it.PROCESSING)return d(s.options.instantUpload);s.options.instantUpload&&c()},0))},MOVE_ITEM:({query:i,index:n})=>{const a=Er(s.items,i);if(!a)return;const o=s.items.indexOf(a);n=dE(n,0,s.items.length-1),o!==n&&s.items.splice(n,0,s.items.splice(o,1)[0])},SORT:({compare:i})=>{up(s,i),t("DID_SORT_ITEMS",{items:e("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:i,index:n,interactionMethod:a,success:o=()=>{},failure:c=()=>{}})=>{let h=n;if(n===-1||typeof n=="undefined"){const f=e("GET_ITEM_INSERT_LOCATION"),g=e("GET_TOTAL_ITEMS");h=f==="before"?0:g}const d=e("GET_IGNORED_FILES"),p=f=>Vr(f)?!d.includes(f.name.toLowerCase()):!gn(f),b=i.filter(p).map(f=>new Promise((g,v)=>{t("ADD_ITEM",{interactionMethod:a,source:f.source||f,success:g,failure:v,index:h++,options:f.options||{}})}));Promise.all(b).then(o).catch(c)},ADD_ITEM:({source:i,index:n=-1,interactionMethod:a,success:o=()=>{},failure:c=()=>{},options:h={}})=>{if(gn(i)){c({error:jt("error",0,"No source"),file:null});return}if(Vr(i)&&s.options.ignoredFiles.includes(i.name.toLowerCase()))return;if(!hT(s)){if(s.options.allowMultiple||!s.options.allowMultiple&&!s.options.allowReplace){const w=jt("warning",0,"Max files");t("DID_THROW_MAX_FILES",{source:i,error:w}),c({error:w,file:null});return}const R=li(s.items)[0];if(R.status===it.PROCESSING_COMPLETE||R.status===it.PROCESSING_REVERT_ERROR){const w=e("GET_FORCE_REVERT");if(R.revert(Po(s.options.server.url,s.options.server.revert),w).then(()=>{w&&t("ADD_ITEM",{source:i,index:n,interactionMethod:a,success:o,failure:c,options:h})}).catch(()=>{}),w)return}t("REMOVE_ITEM",{query:R.id})}const d=h.type==="local"?re.LOCAL:h.type==="limbo"?re.LIMBO:re.INPUT,p=$T(d,d===re.INPUT?null:i,h.file);Object.keys(h.metadata||{}).forEach(R=>{p.setMetadata(R,h.metadata[R])}),Hr("DID_CREATE_ITEM",p,{query:e,dispatch:t});const m=e("GET_ITEM_INSERT_LOCATION");s.options.itemInsertLocationFreedom||(n=m==="before"?-1:s.items.length),uT(s.items,p,n),gr(m)&&i&&up(s,m);const b=p.id;p.on("init",()=>{t("DID_INIT_ITEM",{id:b})}),p.on("load-init",()=>{t("DID_START_ITEM_LOAD",{id:b})}),p.on("load-meta",()=>{t("DID_UPDATE_ITEM_META",{id:b})}),p.on("load-progress",R=>{t("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:b,progress:R})}),p.on("load-request-error",R=>{const w=Xc(s.options.labelFileLoadError)(R);if(R.code>=400&&R.code<500){t("DID_THROW_ITEM_INVALID",{id:b,error:R,status:{main:w,sub:`${R.code} (${R.body})`}}),c({error:R,file:os(p)});return}t("DID_THROW_ITEM_LOAD_ERROR",{id:b,error:R,status:{main:w,sub:s.options.labelTapToRetry}})}),p.on("load-file-error",R=>{t("DID_THROW_ITEM_INVALID",{id:b,error:R.status,status:R.status}),c({error:R.status,file:os(p)})}),p.on("load-abort",()=>{t("REMOVE_ITEM",{query:b})}),p.on("load-skip",()=>{p.on("metadata-update",R=>{Vr(p.file)&&t("DID_UPDATE_ITEM_METADATA",{id:b,change:R})}),t("COMPLETE_LOAD_ITEM",{query:b,item:p,data:{source:i,success:o}})}),p.on("load",()=>{const R=w=>{if(!w){t("REMOVE_ITEM",{query:b});return}p.on("metadata-update",S=>{t("DID_UPDATE_ITEM_METADATA",{id:b,change:S})}),oi("SHOULD_PREPARE_OUTPUT",!1,{item:p,query:e}).then(S=>{const C=e("GET_BEFORE_PREPARE_FILE");C&&(S=C(p,S));const L=()=>{t("COMPLETE_LOAD_ITEM",{query:b,item:p,data:{source:i,success:o}}),dp(t,s)};if(S){t("REQUEST_PREPARE_OUTPUT",{query:b,item:p,success:y=>{t("DID_PREPARE_OUTPUT",{id:b,file:y}),L()}},!0);return}L()})};oi("DID_LOAD_ITEM",p,{query:e,dispatch:t}).then(()=>{Bf(e("GET_BEFORE_ADD_FILE"),os(p)).then(R)}).catch(w=>{if(!w||!w.error||!w.status)return R(!1);t("DID_THROW_ITEM_INVALID",{id:b,error:w.error,status:w.status})})}),p.on("process-start",()=>{t("DID_START_ITEM_PROCESSING",{id:b})}),p.on("process-progress",R=>{t("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:b,progress:R})}),p.on("process-error",R=>{t("DID_THROW_ITEM_PROCESSING_ERROR",{id:b,error:R,status:{main:Xc(s.options.labelFileProcessingError)(R),sub:s.options.labelTapToRetry}})}),p.on("process-revert-error",R=>{t("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:b,error:R,status:{main:Xc(s.options.labelFileProcessingRevertError)(R),sub:s.options.labelTapToRetry}})}),p.on("process-complete",R=>{t("DID_COMPLETE_ITEM_PROCESSING",{id:b,error:null,serverFileReference:R}),t("DID_DEFINE_VALUE",{id:b,value:R})}),p.on("process-abort",()=>{t("DID_ABORT_ITEM_PROCESSING",{id:b})}),p.on("process-revert",()=>{t("DID_REVERT_ITEM_PROCESSING",{id:b}),t("DID_DEFINE_VALUE",{id:b,value:null})}),t("DID_ADD_ITEM",{id:b,index:n,interactionMethod:a}),dp(t,s);const{url:f,load:g,restore:v,fetch:_}=s.options.server||{};p.load(i,TT(d===re.INPUT?Ye(i)&&yT(i)&&_?hp(f,_):kf:d===re.LIMBO?hp(f,v):hp(f,g)),(R,w,S)=>{oi("LOAD_FILE",R,{query:e}).then(w).catch(S)})},REQUEST_PREPARE_OUTPUT:({item:i,success:n,failure:a=()=>{}})=>{const o={error:jt("error",0,"Item not found"),file:null};if(i.archived)return a(o);oi("PREPARE_OUTPUT",i.file,{query:e,item:i}).then(c=>{oi("COMPLETE_PREPARE_OUTPUT",c,{query:e,item:i}).then(h=>{if(i.archived)return a(o);n(h)})})},COMPLETE_LOAD_ITEM:({item:i,data:n})=>{const{success:a,source:o}=n,c=e("GET_ITEM_INSERT_LOCATION");if(gr(c)&&o&&up(s,c),t("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.origin===re.INPUT?null:o}),a(os(i)),i.origin===re.LOCAL){t("DID_LOAD_LOCAL_ITEM",{id:i.id});return}if(i.origin===re.LIMBO){t("DID_COMPLETE_ITEM_PROCESSING",{id:i.id,error:null,serverFileReference:o}),t("DID_DEFINE_VALUE",{id:i.id,value:i.serverId||o});return}e("IS_ASYNC")&&s.options.instantUpload&&t("REQUEST_ITEM_PROCESSING",{query:i.id})},RETRY_ITEM_LOAD:Ts(s,i=>{i.retryLoad()}),REQUEST_ITEM_PREPARE:Ts(s,(i,n,a)=>{t("REQUEST_PREPARE_OUTPUT",{query:i.id,item:i,success:o=>{t("DID_PREPARE_OUTPUT",{id:i.id,file:o}),n({file:i,output:o})},failure:a},!0)}),REQUEST_ITEM_PROCESSING:Ts(s,(i,n,a)=>{if(!(i.status===it.IDLE||i.status===it.PROCESSING_ERROR)){const c=()=>t("REQUEST_ITEM_PROCESSING",{query:i,success:n,failure:a}),h=()=>document.hidden?c():setTimeout(c,32);i.status===it.PROCESSING_COMPLETE||i.status===it.PROCESSING_REVERT_ERROR?i.revert(Po(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")).then(h).catch(()=>{}):i.status===it.PROCESSING&&i.abortProcessing().then(h);return}i.status!==it.PROCESSING_QUEUED&&(i.requestProcessing(),t("DID_REQUEST_ITEM_PROCESSING",{id:i.id}),t("PROCESS_ITEM",{query:i,success:n,failure:a},!0))}),PROCESS_ITEM:Ts(s,(i,n,a)=>{const o=e("GET_MAX_PARALLEL_UPLOADS");if(e("GET_ITEMS_BY_STATUS",it.PROCESSING).length===o){s.processingQueue.push({id:i.id,success:n,failure:a});return}if(i.status===it.PROCESSING)return;const h=()=>{const p=s.processingQueue.shift();if(!p)return;const{id:m,success:b,failure:f}=p,g=Er(s.items,m);if(!g||g.archived){h();return}t("PROCESS_ITEM",{query:m,success:b,failure:f},!0)};i.onOnce("process-complete",()=>{n(os(i)),h();const p=s.options.server;if(s.options.instantUpload&&i.origin===re.LOCAL&&gr(p.remove)){const f=()=>{};i.origin=re.LIMBO,s.options.server.remove(i.source,f,f)}e("GET_ITEMS_BY_STATUS",it.PROCESSING_COMPLETE).length===s.items.length&&t("DID_COMPLETE_ITEM_PROCESSING_ALL")}),i.onOnce("process-error",p=>{a({error:p,file:os(i)}),h()});const d=s.options;i.process(OT(RT(d.server.url,d.server.process,d.name,{chunkTransferId:i.transferId,chunkServer:d.server.patch,chunkUploads:d.chunkUploads,chunkForce:d.chunkForce,chunkSize:d.chunkSize,chunkRetryDelays:d.chunkRetryDelays}),{allowMinimumUploadDuration:e("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(p,m,b)=>{oi("PREPARE_OUTPUT",p,{query:e,item:i}).then(f=>{t("DID_PREPARE_OUTPUT",{id:i.id,file:f}),m(f)}).catch(b)})}),RETRY_ITEM_PROCESSING:Ts(s,i=>{t("REQUEST_ITEM_PROCESSING",{query:i})}),REQUEST_REMOVE_ITEM:Ts(s,i=>{Bf(e("GET_BEFORE_REMOVE_FILE"),os(i)).then(n=>{n&&t("REMOVE_ITEM",{query:i})})}),RELEASE_ITEM:Ts(s,i=>{i.release()}),REMOVE_ITEM:Ts(s,(i,n,a,o)=>{const c=()=>{const d=i.id;jf(s.items,d).archive(),t("DID_REMOVE_ITEM",{error:null,id:d,item:i}),dp(t,s),n(os(i))},h=s.options.server;i.origin===re.LOCAL&&h&&gr(h.remove)&&o.remove!==!1?(t("DID_START_ITEM_REMOVE",{id:i.id}),h.remove(i.source,()=>c(),d=>{t("DID_THROW_ITEM_REMOVE_ERROR",{id:i.id,error:jt("error",0,d,null),status:{main:Xc(s.options.labelFileRemoveError)(d),sub:s.options.labelTapToRetry}})})):((o.revert&&i.origin!==re.LOCAL&&i.serverId!==null||s.options.chunkUploads&&i.file.size>s.options.chunkSize||s.options.chunkUploads&&s.options.chunkForce)&&i.revert(Po(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")),c())}),ABORT_ITEM_LOAD:Ts(s,i=>{i.abortLoad()}),ABORT_ITEM_PROCESSING:Ts(s,i=>{if(i.serverId){t("REVERT_ITEM_PROCESSING",{id:i.id});return}i.abortProcessing().then(()=>{s.options.instantUpload&&t("REMOVE_ITEM",{query:i.id})})}),REQUEST_REVERT_ITEM_PROCESSING:Ts(s,i=>{if(!s.options.instantUpload){t("REVERT_ITEM_PROCESSING",{query:i});return}const n=c=>{c&&t("REVERT_ITEM_PROCESSING",{query:i})},a=e("GET_BEFORE_REMOVE_FILE");if(!a)return n(!0);const o=a(os(i));if(o==null)return n(!0);if(typeof o=="boolean")return n(o);typeof o.then=="function"&&o.then(n)}),REVERT_ITEM_PROCESSING:Ts(s,i=>{i.revert(Po(s.options.server.url,s.options.server.revert),e("GET_FORCE_REVERT")).then(()=>{(s.options.instantUpload||MT(i))&&t("REMOVE_ITEM",{query:i.id})}).catch(()=>{})}),SET_OPTIONS:({options:i})=>{const n=Object.keys(i),a=PT.filter(c=>n.includes(c));[...a,...Object.keys(i).filter(c=>!a.includes(c))].forEach(c=>{t(`SET_${tp(c,"_").toUpperCase()}`,{value:i[c]})})}}),PT=["server"],zm=t=>t,En=t=>document.createElement(t),kt=(t,e)=>{let s=t.childNodes[0];s?e!==s.nodeValue&&(s.nodeValue=e):(s=document.createTextNode(e),t.appendChild(s))},Uf=(t,e,s,i)=>{const n=(i%360-90)*Math.PI/180;return{x:t+s*Math.cos(n),y:e+s*Math.sin(n)}},DT=(t,e,s,i,n,a)=>{const o=Uf(t,e,s,n),c=Uf(t,e,s,i);return["M",o.x,o.y,"A",s,s,0,a,0,c.x,c.y].join(" ")},FT=(t,e,s,i,n)=>{let a=1;return n>i&&n-i<=.5&&(a=0),i>n&&i-n>=.5&&(a=0),DT(t,e,s,Math.min(.9999,i)*360,Math.min(.9999,n)*360,a)},jT=({root:t,props:e})=>{e.spin=!1,e.progress=0,e.opacity=0;const s=kh("svg");t.ref.path=kh("path",{"stroke-width":2,"stroke-linecap":"round"}),s.appendChild(t.ref.path),t.ref.svg=s,t.appendChild(s)},kT=({root:t,props:e})=>{if(e.opacity===0)return;e.align&&(t.element.dataset.align=e.align);const s=parseInt(ae(t.ref.path,"stroke-width"),10),i=t.rect.element.width*.5;let n=0,a=0;e.spin?(n=0,a=.5):(n=0,a=e.progress);const o=FT(i,i,i-s,n,a);ae(t.ref.path,"d",o),ae(t.ref.path,"stroke-opacity",e.spin||e.progress>0?1:0)},Vf=Ht({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:jT,write:kT,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),GT=({root:t,props:e})=>{t.element.innerHTML=(e.icon||"")+`<span>${e.label}</span>`,e.isDisabled=!1},BT=({root:t,props:e})=>{const{isDisabled:s}=e,i=t.query("GET_DISABLED")||e.opacity===0;i&&!s?(e.isDisabled=!0,ae(t.element,"disabled","disabled")):!i&&s&&(e.isDisabled=!1,t.element.removeAttribute("disabled"))},bE=Ht({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:GT,write:BT}),IE=(t,e=".",s=1e3,i={})=>{const{labelBytes:n="bytes",labelKilobytes:a="KB",labelMegabytes:o="MB",labelGigabytes:c="GB"}=i;t=Math.round(Math.abs(t));const h=s,d=s*s,p=s*s*s;return t<h?`${t} ${n}`:t<d?`${Math.floor(t/h)} ${a}`:t<p?`${zf(t/d,1,e)} ${o}`:`${zf(t/p,2,e)} ${c}`},zf=(t,e,s)=>t.toFixed(e).split(".").filter(i=>i!=="0").join(s),UT=({root:t,props:e})=>{const s=En("span");s.className="filepond--file-info-main",ae(s,"aria-hidden","true"),t.appendChild(s),t.ref.fileName=s;const i=En("span");i.className="filepond--file-info-sub",t.appendChild(i),t.ref.fileSize=i,kt(i,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),kt(s,zm(t.query("GET_ITEM_NAME",e.id)))},_p=({root:t,props:e})=>{kt(t.ref.fileSize,IE(t.query("GET_ITEM_SIZE",e.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),kt(t.ref.fileName,zm(t.query("GET_ITEM_NAME",e.id)))},Wf=({root:t,props:e})=>{if($o(t.query("GET_ITEM_SIZE",e.id))){_p({root:t,props:e});return}kt(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},VT=Ht({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Xe({DID_LOAD_ITEM:_p,DID_UPDATE_ITEM_META:_p,DID_THROW_ITEM_LOAD_ERROR:Wf,DID_THROW_ITEM_INVALID:Wf}),didCreateView:t=>{Hr("CREATE_VIEW",O(I({},t),{view:t}))},create:UT,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),vE=t=>Math.round(t*100),zT=({root:t})=>{const e=En("span");e.className="filepond--file-status-main",t.appendChild(e),t.ref.main=e;const s=En("span");s.className="filepond--file-status-sub",t.appendChild(s),t.ref.sub=s,_E({root:t,action:{progress:null}})},_E=({root:t,action:e})=>{const s=e.progress===null?t.query("GET_LABEL_FILE_LOADING"):`${t.query("GET_LABEL_FILE_LOADING")} ${vE(e.progress)}%`;kt(t.ref.main,s),kt(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},WT=({root:t,action:e})=>{const s=e.progress===null?t.query("GET_LABEL_FILE_PROCESSING"):`${t.query("GET_LABEL_FILE_PROCESSING")} ${vE(e.progress)}%`;kt(t.ref.main,s),kt(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},HT=({root:t})=>{kt(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),kt(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},qT=({root:t})=>{kt(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),kt(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},YT=({root:t})=>{kt(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),kt(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},Hf=({root:t})=>{kt(t.ref.main,""),kt(t.ref.sub,"")},Do=({root:t,action:e})=>{kt(t.ref.main,e.status.main),kt(t.ref.sub,e.status.sub)},XT=Ht({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Xe({DID_LOAD_ITEM:Hf,DID_REVERT_ITEM_PROCESSING:Hf,DID_REQUEST_ITEM_PROCESSING:HT,DID_ABORT_ITEM_PROCESSING:qT,DID_COMPLETE_ITEM_PROCESSING:YT,DID_UPDATE_ITEM_PROCESS_PROGRESS:WT,DID_UPDATE_ITEM_LOAD_PROGRESS:_E,DID_THROW_ITEM_LOAD_ERROR:Do,DID_THROW_ITEM_INVALID:Do,DID_THROW_ITEM_PROCESSING_ERROR:Do,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Do,DID_THROW_ITEM_REMOVE_ERROR:Do}),didCreateView:t=>{Hr("CREATE_VIEW",O(I({},t),{view:t}))},create:zT,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),wp={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Tp=[];Mt(wp,t=>{Tp.push(t)});const us=t=>{if(xp(t)==="right")return 0;const e=t.ref.buttonRemoveItem.rect.element;return e.hidden?null:e.width+e.left},ZT=t=>t.ref.buttonAbortItemLoad.rect.element.width,Zc=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.height/4),QT=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.left/2),JT=t=>t.query("GET_STYLE_LOAD_INDICATOR_POSITION"),KT=t=>t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),xp=t=>t.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),tx={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:JT},processProgressIndicator:{opacity:0,align:KT},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},qf={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:us},status:{translateX:us}},pp={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Ea={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:us},status:{translateX:us,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:us},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:xp},info:{translateX:us},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:xp},buttonRemoveItem:{opacity:1},info:{translateX:us},status:{opacity:1,translateX:us}},DID_LOAD_ITEM:qf,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:us},status:{translateX:us}},DID_START_ITEM_PROCESSING:pp,DID_REQUEST_ITEM_PROCESSING:pp,DID_UPDATE_ITEM_PROCESS_PROGRESS:pp,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:us}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:us},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:qf},ex=Ht({create:({root:t})=>{t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),sx=({root:t,props:e})=>{const s=Object.keys(wp).reduce((g,v)=>(g[v]=I({},wp[v]),g),{}),{id:i}=e,n=t.query("GET_ALLOW_REVERT"),a=t.query("GET_ALLOW_REMOVE"),o=t.query("GET_ALLOW_PROCESS"),c=t.query("GET_INSTANT_UPLOAD"),h=t.query("IS_ASYNC"),d=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let p;h?o&&!n?p=g=>!/RevertItemProcessing/.test(g):!o&&n?p=g=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(g):!o&&!n&&(p=g=>!/Process/.test(g)):p=g=>!/Process/.test(g);const m=p?Tp.filter(p):Tp.concat();if(c&&n&&(s.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",s.RevertItemProcessing.icon="GET_ICON_REMOVE"),h&&!n){const g=Ea.DID_COMPLETE_ITEM_PROCESSING;g.info.translateX=QT,g.info.translateY=Zc,g.status.translateY=Zc,g.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(h&&!o&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(g=>{Ea[g].status.translateY=Zc}),Ea.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=ZT),d&&n){s.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const g=Ea.DID_COMPLETE_ITEM_PROCESSING;g.info.translateX=us,g.status.translateY=Zc,g.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}a||(s.RemoveItem.disabled=!0),Mt(s,(g,v)=>{const _=t.createChildView(bE,{label:t.query(v.label),icon:t.query(v.icon),opacity:0});m.includes(g)&&t.appendChildView(_),v.disabled&&(_.element.setAttribute("disabled","disabled"),_.element.setAttribute("hidden","hidden")),_.element.dataset.align=t.query(`GET_STYLE_${v.align}`),_.element.classList.add(v.className),_.on("click",R=>{R.stopPropagation(),!v.disabled&&t.dispatch(v.action,{query:i})}),t.ref[`button${g}`]=_}),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(ex)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView(VT,{id:i})),t.ref.status=t.appendChildView(t.createChildView(XT,{id:i}));const b=t.appendChildView(t.createChildView(Vf,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));b.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=b;const f=t.appendChildView(t.createChildView(Vf,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));f.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=f,t.ref.activeStyles=[]},ix=({root:t,actions:e,props:s})=>{nx({root:t,actions:e,props:s});let i=e.concat().filter(n=>/^DID_/.test(n.type)).reverse().find(n=>Ea[n.type]);if(i){t.ref.activeStyles=[];const n=Ea[i.type];Mt(tx,(a,o)=>{const c=t.ref[a];Mt(o,(h,d)=>{const p=n[a]&&typeof n[a][h]!="undefined"?n[a][h]:d;t.ref.activeStyles.push({control:c,key:h,value:p})})})}t.ref.activeStyles.forEach(({control:n,key:a,value:o})=>{n[a]=typeof o=="function"?o(t):o})},nx=Xe({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:t,action:e})=>{t.ref.buttonAbortItemProcessing.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:t,action:e})=>{t.ref.buttonAbortItemLoad.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:t,action:e})=>{t.ref.buttonAbortItemRemoval.label=e.value},DID_REQUEST_ITEM_PROCESSING:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:t})=>{t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:t,action:e})=>{t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=e.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:t,action:e})=>{t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=e.progress}}),rx=Ht({create:sx,write:ix,didCreateView:t=>{Hr("CREATE_VIEW",O(I({},t),{view:t}))},name:"file"}),ax=({root:t,props:e})=>{t.ref.fileName=En("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(rx,{id:e.id})),t.ref.data=!1},ox=({root:t,props:e})=>{kt(t.ref.fileName,zm(t.query("GET_ITEM_NAME",e.id)))},lx=Ht({create:ax,ignoreRect:!0,write:Xe({DID_LOAD_ITEM:ox}),didCreateView:t=>{Hr("CREATE_VIEW",O(I({},t),{view:t}))},tag:"fieldset",name:"file-wrapper"}),Yf={type:"spring",damping:.6,mass:7},cx=({root:t,props:e})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Yf},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Yf},styles:["translateY"]}}].forEach(s=>{hx(t,s,e.name)}),t.element.classList.add(`filepond--${e.name}`),t.ref.scalable=null},hx=(t,e,s)=>{const i=Ht({name:`panel-${e.name} filepond--${s}`,mixins:e.mixins,ignoreRectUpdate:!0}),n=t.createChildView(i,e.props);t.ref[e.name]=t.appendChildView(n)},dx=({root:t,props:e})=>{if((t.ref.scalable===null||e.scalable!==t.ref.scalable)&&(t.ref.scalable=sE(e.scalable)?e.scalable:!0,t.element.dataset.scalable=t.ref.scalable),!e.height)return;const s=t.ref.top.rect.element,i=t.ref.bottom.rect.element,n=Math.max(s.height+i.height,e.height);t.ref.center.translateY=s.height,t.ref.center.scaleY=(n-s.height-i.height)/100,t.ref.bottom.translateY=n-i.height},wE=Ht({name:"panel",read:({root:t,props:e})=>e.heightCurrent=t.ref.bottom.translateY,write:dx,create:cx,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),ux=t=>{const e=t.map(i=>i.id);let s;return{setIndex:i=>{s=i},getIndex:()=>s,getItemIndex:i=>e.indexOf(i.id)}},Xf={type:"spring",stiffness:.75,damping:.45,mass:10},Zf="spring",Qf={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},px=({root:t,props:e})=>{if(t.ref.handleClick=i=>t.dispatch("DID_ACTIVATE_ITEM",{id:e.id}),t.element.id=`filepond--item-${e.id}`,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(lx,{id:e.id})),t.ref.panel=t.appendChildView(t.createChildView(wE,{name:"item-panel"})),t.ref.panel.height=null,e.markedForRemoval=!1,!t.query("GET_ALLOW_REORDER"))return;t.element.dataset.dragState="idle";const s=i=>{if(!i.isPrimary)return;let n=!1;const a={x:i.pageX,y:i.pageY};e.dragOrigin={x:t.translateX,y:t.translateY},e.dragCenter={x:i.offsetX,y:i.offsetY};const o=ux(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:e.id,dragState:o});const c=m=>{if(!m.isPrimary)return;m.stopPropagation(),m.preventDefault(),e.dragOffset={x:m.pageX-a.x,y:m.pageY-a.y},e.dragOffset.x*e.dragOffset.x+e.dragOffset.y*e.dragOffset.y>16&&!n&&(n=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:e.id,dragState:o})},h=m=>{m.isPrimary&&(e.dragOffset={x:m.pageX-a.x,y:m.pageY-a.y},p())},d=()=>{p()},p=()=>{document.removeEventListener("pointercancel",d),document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",h),t.dispatch("DID_DROP_ITEM",{id:e.id,dragState:o}),n&&setTimeout(()=>t.element.addEventListener("click",t.ref.handleClick),0)};document.addEventListener("pointercancel",d),document.addEventListener("pointermove",c),document.addEventListener("pointerup",h)};t.element.addEventListener("pointerdown",s)},mx=Xe({DID_UPDATE_PANEL_HEIGHT:({root:t,action:e})=>{t.height=e.height}}),fx=Xe({DID_GRAB_ITEM:({root:t,props:e})=>{e.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:({root:t})=>{t.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:t,props:e})=>{e.dragOffset=null,e.dragOrigin=null,t.element.dataset.dragState="drop"}},({root:t,actions:e,props:s,shouldOptimize:i})=>{t.element.dataset.dragState==="drop"&&t.scaleX<=1&&(t.element.dataset.dragState="idle");let n=e.concat().filter(o=>/^DID_/.test(o.type)).reverse().find(o=>Qf[o.type]);n&&n.type!==s.currentState&&(s.currentState=n.type,t.element.dataset.filepondItemState=Qf[s.currentState]||"");const a=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");a?i||(t.height=t.rect.element.width*a):(mx({root:t,actions:e,props:s}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),i&&(t.ref.panel.height=null),t.ref.panel.height=t.height}),gx=Ht({create:px,write:fx,destroy:({root:t,props:e})=>{t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:e.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Zf,scaleY:Zf,translateX:Xf,translateY:Xf,opacity:{type:"tween",duration:150}}}});var Wm=(t,e)=>Math.max(1,Math.floor((t+1)/e));const Hm=(t,e,s)=>{if(!s)return;const i=t.rect.element.width,n=e.length;let a=null;if(n===0||s.top<e[0].rect.element.top)return-1;const c=e[0].rect.element,h=c.marginLeft+c.marginRight,d=c.width+h,p=Wm(i,d);if(p===1){for(let f=0;f<n;f++){const g=e[f],v=g.rect.outer.top+g.rect.element.height*.5;if(s.top<v)return f}return n}const m=c.marginTop+c.marginBottom,b=c.height+m;for(let f=0;f<n;f++){const g=f%p,v=Math.floor(f/p),_=g*d,R=v*b,w=R-c.marginTop,S=_+d,C=R+b+c.marginBottom;if(s.top<C&&s.top>w){if(s.left<S)return f;f!==n-1?a=f:a=null}}return a!==null?a:n},Qc={height:0,width:0,get getHeight(){return this.height},set setHeight(t){(this.height===0||t===0)&&(this.height=t)},get getWidth(){return this.width},set setWidth(t){(this.width===0||t===0)&&(this.width=t)},setDimensions:function(t,e){(this.height===0||t===0)&&(this.height=t),(this.width===0||e===0)&&(this.width=e)}},Ex=({root:t})=>{ae(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},bx=({root:t,action:e})=>{const{id:s,index:i,interactionMethod:n}=e;t.ref.addIndex=i;const a=Date.now();let o=a,c=1;if(n!==ks.NONE){c=0;const h=t.query("GET_ITEM_INSERT_INTERVAL"),d=a-t.ref.lastItemSpanwDate;o=d<h?a+(h-d):a}t.ref.lastItemSpanwDate=o,t.appendChildView(t.createChildView(gx,{spawnDate:o,id:s,opacity:c,interactionMethod:n}),i)},Jf=(t,e,s,i=0,n=1)=>{t.dragOffset?(t.translateX=null,t.translateY=null,t.translateX=t.dragOrigin.x+t.dragOffset.x,t.translateY=t.dragOrigin.y+t.dragOffset.y,t.scaleX=1.025,t.scaleY=1.025):(t.translateX=e,t.translateY=s,Date.now()>t.spawnDate&&(t.opacity===0&&Ix(t,e,s,i,n),t.scaleX=1,t.scaleY=1,t.opacity=1))},Ix=(t,e,s,i,n)=>{t.interactionMethod===ks.NONE?(t.translateX=null,t.translateX=e,t.translateY=null,t.translateY=s):t.interactionMethod===ks.DROP?(t.translateX=null,t.translateX=e-i*20,t.translateY=null,t.translateY=s-n*10,t.scaleX=.8,t.scaleY=.8):t.interactionMethod===ks.BROWSE?(t.translateY=null,t.translateY=s-30):t.interactionMethod===ks.API&&(t.translateX=null,t.translateX=e-30,t.translateY=null)},vx=({root:t,action:e})=>{const{id:s}=e,i=t.childViews.find(n=>n.id===s);i&&(i.scaleX=.9,i.scaleY=.9,i.opacity=0,i.markedForRemoval=!0)},mp=t=>t.rect.element.height+t.rect.element.marginBottom*.5+t.rect.element.marginTop*.5,_x=t=>t.rect.element.width+t.rect.element.marginLeft*.5+t.rect.element.marginRight*.5,wx=({root:t,action:e})=>{const{id:s,dragState:i}=e,n=t.query("GET_ITEM",{id:s}),a=t.childViews.find(_=>_.id===s),o=t.childViews.length,c=i.getItemIndex(n);if(!a)return;const h={x:a.dragOrigin.x+a.dragOffset.x+a.dragCenter.x,y:a.dragOrigin.y+a.dragOffset.y+a.dragCenter.y},d=mp(a),p=_x(a);let m=Math.floor(t.rect.outer.width/p);m>o&&(m=o);const b=Math.floor(o/m+1);Qc.setHeight=d*b,Qc.setWidth=p*m;var f={y:Math.floor(h.y/d),x:Math.floor(h.x/p),getGridIndex:function(){return h.y>Qc.getHeight||h.y<0||h.x>Qc.getWidth||h.x<0?c:this.y*m+this.x},getColIndex:function(){const R=t.query("GET_ACTIVE_ITEMS"),w=t.childViews.filter(G=>G.rect.element.height),S=R.map(G=>w.find(B=>B.id===G.id)),C=S.findIndex(G=>G===a),L=mp(a),y=S.length;let P=y,A=0,F=0,W=0;for(let G=0;G<y;G++)if(A=mp(S[G]),W=F,F=W+A,h.y<F){if(C>G){if(h.y<W+L){P=G;break}continue}P=G;break}return P}};const g=m>1?f.getGridIndex():f.getColIndex();t.dispatch("MOVE_ITEM",{query:a,index:g});const v=i.getIndex();if(v===void 0||v!==g){if(i.setIndex(g),v===void 0)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:c,target:g})}},Tx=Xe({DID_ADD_ITEM:bx,DID_REMOVE_ITEM:vx,DID_DRAG_ITEM:wx}),xx=({root:t,props:e,actions:s,shouldOptimize:i})=>{Tx({root:t,props:e,actions:s});const{dragCoordinates:n}=e,a=t.rect.element.width,o=t.childViews.filter(S=>S.rect.element.height),c=t.query("GET_ACTIVE_ITEMS").map(S=>o.find(C=>C.id===S.id)).filter(S=>S),h=n?Hm(t,c,n):null,d=t.ref.addIndex||null;t.ref.addIndex=null;let p=0,m=0,b=0;if(c.length===0)return;const f=c[0].rect.element,g=f.marginTop+f.marginBottom,v=f.marginLeft+f.marginRight,_=f.width+v,R=f.height+g,w=Wm(a,_);if(w===1){let S=0,C=0;c.forEach((L,y)=>{if(h){let F=y-h;F===-2?C=-g*.25:F===-1?C=-g*.75:F===0?C=g*.75:F===1?C=g*.25:C=0}i&&(L.translateX=null,L.translateY=null),L.markedForRemoval||Jf(L,0,S+C);let A=(L.rect.element.height+g)*(L.markedForRemoval?L.opacity:1);S+=A})}else{let S=0,C=0;c.forEach((L,y)=>{y===h&&(p=1),y===d&&(b+=1),L.markedForRemoval&&L.opacity<.5&&(m-=1);const P=y+b+p+m,A=P%w,F=Math.floor(P/w),W=A*_,G=F*R,B=Math.sign(W-S),X=Math.sign(G-C);S=W,C=G,!L.markedForRemoval&&(i&&(L.translateX=null,L.translateY=null),Jf(L,W,G,B,X))})}},Sx=(t,e)=>e.filter(s=>s.data&&s.data.id?t.id===s.data.id:!0),Rx=Ht({create:Ex,write:xx,tag:"ul",name:"list",didWriteView:({root:t})=>{t.childViews.filter(e=>e.markedForRemoval&&e.opacity===0&&e.resting).forEach(e=>{e._destroy(),t.removeChildView(e)})},filterFrameActionsForChild:Sx,mixins:{apis:["dragCoordinates"]}}),Cx=({root:t,props:e})=>{t.ref.list=t.appendChildView(t.createChildView(Rx)),e.dragCoordinates=null,e.overflowing=!1},Ox=({root:t,props:e,action:s})=>{t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(e.dragCoordinates={left:s.position.scopeLeft-t.ref.list.rect.element.left,top:s.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},Lx=({props:t})=>{t.dragCoordinates=null},$x=Xe({DID_DRAG:Ox,DID_END_DRAG:Lx}),Ax=({root:t,props:e,actions:s})=>{if($x({root:t,props:e,actions:s}),t.ref.list.dragCoordinates=e.dragCoordinates,e.overflowing&&!e.overflow&&(e.overflowing=!1,t.element.dataset.state="",t.height=null),e.overflow){const i=Math.round(e.overflow);i!==t.height&&(e.overflowing=!0,t.element.dataset.state="overflow",t.height=i)}},yx=Ht({create:Cx,write:Ax,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),ci=(t,e,s,i="")=>{s?ae(t,e,i):t.removeAttribute(e)},Mx=t=>{if(!(!t||t.value==="")){try{t.value=""}catch(e){}if(t.value){const e=En("form"),s=t.parentNode,i=t.nextSibling;e.appendChild(t),e.reset(),i?s.insertBefore(t,i):s.appendChild(t)}}},Nx=({root:t,props:e})=>{t.element.id=`filepond--browser-${e.id}`,ae(t.element,"name",t.query("GET_NAME")),ae(t.element,"aria-controls",`filepond--assistant-${e.id}`),ae(t.element,"aria-labelledby",`filepond--drop-label-${e.id}`),TE({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),xE({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),SE({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Sp({root:t}),RE({root:t,action:{value:t.query("GET_REQUIRED")}}),CE({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=s=>{if(!t.element.value)return;const i=Array.from(t.element.files).map(n=>(n._relativePath=n.webkitRelativePath,n));setTimeout(()=>{e.onload(i),Mx(t.element)},250)},t.element.addEventListener("change",t.ref.handleChange)},TE=({root:t,action:e})=>{t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&ci(t.element,"accept",!!e.value,e.value?e.value.join(","):"")},xE=({root:t,action:e})=>{ci(t.element,"multiple",e.value)},SE=({root:t,action:e})=>{ci(t.element,"webkitdirectory",e.value)},Sp=({root:t})=>{const e=t.query("GET_DISABLED"),s=t.query("GET_ALLOW_BROWSE"),i=e||!s;ci(t.element,"disabled",i)},RE=({root:t,action:e})=>{e.value?t.query("GET_TOTAL_ITEMS")===0&&ci(t.element,"required",!0):ci(t.element,"required",!1)},CE=({root:t,action:e})=>{ci(t.element,"capture",!!e.value,e.value===!0?"":e.value)},Kf=({root:t})=>{const{element:e}=t;if(t.query("GET_TOTAL_ITEMS")>0){ci(e,"required",!1),ci(e,"name",!1);const s=t.query("GET_ACTIVE_ITEMS");let i=!1;for(let n=0;n<s.length;n++)s[n].status===it.LOAD_ERROR&&(i=!0);t.element.setCustomValidity(i?t.query("GET_LABEL_INVALID_FIELD"):"")}else ci(e,"name",!0,t.query("GET_NAME")),t.query("GET_CHECK_VALIDITY")&&e.setCustomValidity(""),t.query("GET_REQUIRED")&&ci(e,"required",!0)},Px=({root:t})=>{t.query("GET_CHECK_VALIDITY")&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},Dx=Ht({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:Nx,destroy:({root:t})=>{t.element.removeEventListener("change",t.ref.handleChange)},write:Xe({DID_LOAD_ITEM:Kf,DID_REMOVE_ITEM:Kf,DID_THROW_ITEM_INVALID:Px,DID_SET_DISABLED:Sp,DID_SET_ALLOW_BROWSE:Sp,DID_SET_ALLOW_DIRECTORIES_ONLY:SE,DID_SET_ALLOW_MULTIPLE:xE,DID_SET_ACCEPTED_FILE_TYPES:TE,DID_SET_CAPTURE_METHOD:CE,DID_SET_REQUIRED:RE})}),tg={ENTER:13,SPACE:32},Fx=({root:t,props:e})=>{const s=En("label");ae(s,"for",`filepond--browser-${e.id}`),ae(s,"id",`filepond--drop-label-${e.id}`),t.ref.handleKeyDown=i=>{(i.keyCode===tg.ENTER||i.keyCode===tg.SPACE)&&(i.preventDefault(),t.ref.label.click())},t.ref.handleClick=i=>{i.target===s||s.contains(i.target)||t.ref.label.click()},s.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),OE(s,e.caption),t.appendChild(s),t.ref.label=s},OE=(t,e)=>{t.innerHTML=e;const s=t.querySelector(".filepond--label-action");return s&&ae(s,"tabindex","0"),e},jx=Ht({name:"drop-label",ignoreRect:!0,create:Fx,destroy:({root:t})=>{t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:Xe({DID_SET_LABEL_IDLE:({root:t,action:e})=>{OE(t.ref.label,e.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),kx=Ht({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Gx=({root:t})=>{const e=t.rect.element.width*.5,s=t.rect.element.height*.5;t.ref.blob=t.appendChildView(t.createChildView(kx,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:e,translateY:s}))},Bx=({root:t,action:e})=>{if(!t.ref.blob){Gx({root:t});return}t.ref.blob.translateX=e.position.scopeLeft,t.ref.blob.translateY=e.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1},Ux=({root:t})=>{t.ref.blob&&(t.ref.blob.opacity=0)},Vx=({root:t})=>{t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},zx=({root:t,props:e,actions:s})=>{Wx({root:t,props:e,actions:s});const{blob:i}=t.ref;s.length===0&&i&&i.opacity===0&&(t.removeChildView(i),t.ref.blob=null)},Wx=Xe({DID_DRAG:Bx,DID_DROP:Vx,DID_END_DRAG:Ux}),Hx=Ht({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:zx}),LE=(t,e)=>{try{const s=new DataTransfer;e.forEach(i=>{i instanceof File?s.items.add(i):s.items.add(new File([i],i.name,{type:i.type}))}),t.files=s.files}catch(s){return!1}return!0},qx=({root:t})=>{t.ref.fields={};const e=document.createElement("legend");e.textContent="Files",t.element.appendChild(e)},ip=(t,e)=>t.ref.fields[e],qm=t=>{t.query("GET_ACTIVE_ITEMS").forEach(e=>{t.ref.fields[e.id]&&t.element.appendChild(t.ref.fields[e.id])})},eg=({root:t})=>qm(t),Yx=({root:t,action:e})=>{const n=!(t.query("GET_ITEM",e.id).origin===re.LOCAL)&&t.query("SHOULD_UPDATE_FILE_INPUT"),a=En("input");a.type=n?"file":"hidden",a.name=t.query("GET_NAME"),t.ref.fields[e.id]=a,qm(t)},Xx=({root:t,action:e})=>{const s=ip(t,e.id);if(!s||(e.serverFileReference!==null&&(s.value=e.serverFileReference),!t.query("SHOULD_UPDATE_FILE_INPUT")))return;const i=t.query("GET_ITEM",e.id);LE(s,[i.file])},Zx=({root:t,action:e})=>{t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const s=ip(t,e.id);s&&LE(s,[e.file])},0)},Qx=({root:t})=>{t.element.disabled=t.query("GET_DISABLED")},Jx=({root:t,action:e})=>{const s=ip(t,e.id);s&&(s.parentNode&&s.parentNode.removeChild(s),delete t.ref.fields[e.id])},Kx=({root:t,action:e})=>{const s=ip(t,e.id);s&&(e.value===null?s.removeAttribute("value"):s.type!="file"&&(s.value=e.value),qm(t))},t0=Xe({DID_SET_DISABLED:Qx,DID_ADD_ITEM:Yx,DID_LOAD_ITEM:Xx,DID_REMOVE_ITEM:Jx,DID_DEFINE_VALUE:Kx,DID_PREPARE_OUTPUT:Zx,DID_REORDER_ITEMS:eg,DID_SORT_ITEMS:eg}),e0=Ht({tag:"fieldset",name:"data",create:qx,write:t0,ignoreRect:!0}),s0=t=>"getRootNode"in t?t.getRootNode():document,i0=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],n0=["css","csv","html","txt"],r0={zip:"zip|compressed",epub:"application/epub+zip"},$E=(t="")=>(t=t.toLowerCase(),i0.includes(t)?"image/"+(t==="jpg"?"jpeg":t==="svg"?"svg+xml":t):n0.includes(t)?"text/"+t:r0[t]||""),Ym=t=>new Promise((e,s)=>{const i=p0(t);if(i.length&&!a0(t))return e(i);o0(t).then(e)}),a0=t=>t.files?t.files.length>0:!1,o0=t=>new Promise((e,s)=>{const i=(t.items?Array.from(t.items):[]).filter(n=>l0(n)).map(n=>c0(n));if(!i.length){e(t.files?Array.from(t.files):[]);return}Promise.all(i).then(n=>{const a=[];n.forEach(o=>{a.push.apply(a,o)}),e(a.filter(o=>o).map(o=>(o._relativePath||(o._relativePath=o.webkitRelativePath),o)))}).catch(console.error)}),l0=t=>{if(AE(t)){const e=Xm(t);if(e)return e.isFile||e.isDirectory}return t.kind==="file"},c0=t=>new Promise((e,s)=>{if(u0(t)){h0(Xm(t)).then(e).catch(s);return}e([t.getAsFile()])}),h0=t=>new Promise((e,s)=>{const i=[];let n=0,a=0;const o=()=>{a===0&&n===0&&e(i)},c=h=>{n++;const d=h.createReader(),p=()=>{d.readEntries(m=>{if(m.length===0){n--,o();return}m.forEach(b=>{b.isDirectory?c(b):(a++,b.file(f=>{const g=d0(f);b.fullPath&&(g._relativePath=b.fullPath),i.push(g),a--,o()}))}),p()},s)};p()};c(t)}),d0=t=>{if(t.type.length)return t;const e=t.lastModifiedDate,s=t.name,i=$E(sp(t.name));return i.length&&(t=t.slice(0,t.size,i),t.name=s,t.lastModifiedDate=e),t},u0=t=>AE(t)&&(Xm(t)||{}).isDirectory,AE=t=>"webkitGetAsEntry"in t,Xm=t=>t.webkitGetAsEntry(),p0=t=>{let e=[];try{if(e=f0(t),e.length)return e;e=m0(t)}catch(s){}return e},m0=t=>{let e=t.getData("url");return typeof e=="string"&&e.length?[e]:[]},f0=t=>{let e=t.getData("text/html");if(typeof e=="string"&&e.length){const s=e.match(/src\s*=\s*"(.+?)"/);if(s)return[s[1]]}return[]},Bh=[],zr=t=>({pageLeft:t.pageX,pageTop:t.pageY,scopeLeft:t.offsetX||t.layerX,scopeTop:t.offsetY||t.layerY}),g0=(t,e,s)=>{const i=E0(e),n={element:t,filterElement:s,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return n.destroy=i.addListener(n),n},E0=t=>{const e=Bh.find(i=>i.element===t);if(e)return e;const s=b0(t);return Bh.push(s),s},b0=t=>{const e=[],s={dragenter:v0,dragover:_0,dragleave:T0,drop:w0},i={};Mt(s,(a,o)=>{i[a]=o(t,e),t.addEventListener(a,i[a],!1)});const n={element:t,addListener:a=>(e.push(a),()=>{e.splice(e.indexOf(a),1),e.length===0&&(Bh.splice(Bh.indexOf(n),1),Mt(s,o=>{t.removeEventListener(o,i[o],!1)}))})};return n},I0=(t,e)=>("elementFromPoint"in t||(t=document),t.elementFromPoint(e.x,e.y)),Zm=(t,e)=>{const s=s0(e),i=I0(s,{x:t.pageX-window.pageXOffset,y:t.pageY-window.pageYOffset});return i===e||e.contains(i)};let yE=null;const Jc=(t,e)=>{try{t.dropEffect=e}catch(s){}},v0=(t,e)=>s=>{s.preventDefault(),yE=s.target,e.forEach(i=>{const{element:n,onenter:a}=i;Zm(s,n)&&(i.state="enter",a(zr(s)))})},_0=(t,e)=>s=>{s.preventDefault();const i=s.dataTransfer;Ym(i).then(n=>{let a=!1;e.some(o=>{const{filterElement:c,element:h,onenter:d,onexit:p,ondrag:m,allowdrop:b}=o;Jc(i,"copy");const f=b(n);if(!f){Jc(i,"none");return}if(Zm(s,h)){if(a=!0,o.state===null){o.state="enter",d(zr(s));return}if(o.state="over",c&&!f){Jc(i,"none");return}m(zr(s))}else c&&!a&&Jc(i,"none"),o.state&&(o.state=null,p(zr(s)))})})},w0=(t,e)=>s=>{s.preventDefault();const i=s.dataTransfer;Ym(i).then(n=>{e.forEach(a=>{const{filterElement:o,element:c,ondrop:h,onexit:d,allowdrop:p}=a;if(a.state=null,!(o&&!Zm(s,c))){if(!p(n))return d(zr(s));h(zr(s),n)}})})},T0=(t,e)=>s=>{yE===s.target&&e.forEach(i=>{const{onexit:n}=i;i.state=null,n(zr(s))})},x0=(t,e,s)=>{t.classList.add("filepond--hopper");const{catchesDropsOnPage:i,requiresDropOnElement:n,filterItems:a=p=>p}=s,o=g0(t,i?document.documentElement:t,n);let c="",h="";o.allowdrop=p=>e(a(p)),o.ondrop=(p,m)=>{const b=a(m);if(!e(b)){d.ondragend(p);return}h="drag-drop",d.onload(b,p)},o.ondrag=p=>{d.ondrag(p)},o.onenter=p=>{h="drag-over",d.ondragstart(p)},o.onexit=p=>{h="drag-exit",d.ondragend(p)};const d={updateHopperState:()=>{c!==h&&(t.dataset.hopperState=h,c=h)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{o.destroy()}};return d};let Rp=!1;const ba=[],ME=t=>{const e=document.activeElement;if(e&&(/textarea|input/i.test(e.nodeName)||e.getAttribute("contenteditable")==="true"||e.getAttribute("contenteditable")==="")){let i=!1,n=e;for(;n!==document.body;){if(n.classList.contains("filepond--root")){i=!0;break}n=n.parentNode}if(!i)return}Ym(t.clipboardData).then(i=>{i.length&&ba.forEach(n=>n(i))})},S0=t=>{ba.includes(t)||(ba.push(t),!Rp&&(Rp=!0,document.addEventListener("paste",ME)))},R0=t=>{Bm(ba,ba.indexOf(t)),ba.length===0&&(document.removeEventListener("paste",ME),Rp=!1)},C0=()=>{const t=s=>{e.onload(s)},e={destroy:()=>{R0(t)},onload:()=>{}};return S0(t),e},O0=({root:t,props:e})=>{t.element.id=`filepond--assistant-${e.id}`,ae(t.element,"role","alert"),ae(t.element,"aria-live","polite"),ae(t.element,"aria-relevant","additions")};let sg=null,ig=null;const fp=[],np=(t,e)=>{t.element.textContent=e},L0=t=>{t.element.textContent=""},NE=(t,e,s)=>{const i=t.query("GET_TOTAL_ITEMS");np(t,`${s} ${e}, ${i} ${i===1?t.query("GET_LABEL_FILE_COUNT_SINGULAR"):t.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(ig),ig=setTimeout(()=>{L0(t)},1500)},PE=t=>t.element.parentNode.contains(document.activeElement),$0=({root:t,action:e})=>{if(!PE(t))return;t.element.textContent="";const s=t.query("GET_ITEM",e.id);fp.push(s.filename),clearTimeout(sg),sg=setTimeout(()=>{NE(t,fp.join(", "),t.query("GET_LABEL_FILE_ADDED")),fp.length=0},750)},A0=({root:t,action:e})=>{if(!PE(t))return;const s=e.item;NE(t,s.filename,t.query("GET_LABEL_FILE_REMOVED"))},y0=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,n=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");np(t,`${i} ${n}`)},ng=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,n=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");np(t,`${i} ${n}`)},Kc=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename;np(t,`${e.status.main} ${i} ${e.status.sub}`)},M0=Ht({create:O0,ignoreRect:!0,ignoreRectUpdate:!0,write:Xe({DID_LOAD_ITEM:$0,DID_REMOVE_ITEM:A0,DID_COMPLETE_ITEM_PROCESSING:y0,DID_ABORT_ITEM_PROCESSING:ng,DID_REVERT_ITEM_PROCESSING:ng,DID_THROW_ITEM_REMOVE_ERROR:Kc,DID_THROW_ITEM_LOAD_ERROR:Kc,DID_THROW_ITEM_INVALID:Kc,DID_THROW_ITEM_PROCESSING_ERROR:Kc}),tag:"span",name:"assistant"}),DE=(t,e="-")=>t.replace(new RegExp(`${e}.`,"g"),s=>s.charAt(1).toUpperCase()),FE=(t,e=16,s=!0)=>{let i=Date.now(),n=null;return(...a)=>{clearTimeout(n);const o=Date.now()-i,c=()=>{i=Date.now(),t(...a)};o<e?s||(n=setTimeout(c,e-o)):c()}},N0=1e6,Uh=t=>t.preventDefault(),P0=({root:t,props:e})=>{const s=t.query("GET_ID");s&&(t.element.id=s);const i=t.query("GET_CLASS_NAME");i&&i.split(" ").filter(h=>h.length).forEach(h=>{t.element.classList.add(h)}),t.ref.label=t.appendChildView(t.createChildView(jx,O(I({},e),{translateY:null,caption:t.query("GET_LABEL_IDLE")}))),t.ref.list=t.appendChildView(t.createChildView(yx,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(wE,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(M0,I({},e))),t.ref.data=t.appendChildView(t.createChildView(e0,I({},e))),t.ref.measure=En("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(h=>!gn(h.value)).map(({name:h,value:d})=>{t.element.dataset[h]=d}),t.ref.widthPrevious=null,t.ref.widthUpdated=FE(()=>{t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];const n=window.matchMedia("(pointer: fine) and (hover: hover)").matches,a="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&a&&!n&&(t.element.addEventListener("touchmove",Uh,{passive:!1}),t.element.addEventListener("gesturestart",Uh));const o=t.query("GET_CREDITS");if(o.length===2){const h=document.createElement("a");h.className="filepond--credits",h.href=o[0],h.tabIndex=-1,h.target="_blank",h.rel="noopener noreferrer nofollow",h.textContent=o[1],t.element.appendChild(h),t.ref.credits=h}},D0=({root:t,props:e,actions:s})=>{if(B0({root:t,props:e,actions:s}),s.filter(y=>/^DID_SET_STYLE_/.test(y.type)).filter(y=>!gn(y.data.value)).map(({type:y,data:P})=>{const A=DE(y.substring(8).toLowerCase(),"_");t.element.dataset[A]=P.value,t.invalidateLayout()}),t.rect.element.hidden)return;t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());let i=t.ref.bounds;i||(i=t.ref.bounds=k0(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);const{hopper:n,label:a,list:o,panel:c}=t.ref;n&&n.updateHopperState();const h=t.query("GET_PANEL_ASPECT_RATIO"),d=t.query("GET_ALLOW_MULTIPLE"),p=t.query("GET_TOTAL_ITEMS"),m=d?t.query("GET_MAX_FILES")||N0:1,b=p===m,f=s.find(y=>y.type==="DID_ADD_ITEM");if(b&&f){const y=f.data.interactionMethod;a.opacity=0,d?a.translateY=-40:y===ks.API?a.translateX=40:y===ks.BROWSE?a.translateY=40:a.translateY=30}else b||(a.opacity=1,a.translateX=0,a.translateY=0);const g=F0(t),v=j0(t),_=a.rect.element.height,R=!d||b?0:_,w=b?o.rect.element.marginTop:0,S=p===0?0:o.rect.element.marginBottom,C=R+w+v.visual+S,L=R+w+v.bounds+S;if(o.translateY=Math.max(0,R-o.rect.element.marginTop)-g.top,h){const y=t.rect.element.width,P=y*h;h!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=h,t.ref.updateHistory=[]);const A=t.ref.updateHistory;A.push(y);const F=2;if(A.length>F*2){const G=A.length,B=G-10;let X=0;for(let M=G;M>=B;M--)if(A[M]===A[M-2]&&X++,X>=F)return}c.scalable=!1,c.height=P;const W=P-R-(S-g.bottom)-(b?w:0);v.visual>W?o.overflow=W:o.overflow=null,t.height=P}else if(i.fixedHeight){c.scalable=!1;const y=i.fixedHeight-R-(S-g.bottom)-(b?w:0);v.visual>y?o.overflow=y:o.overflow=null}else if(i.cappedHeight){const y=C>=i.cappedHeight,P=Math.min(i.cappedHeight,C);c.scalable=!0,c.height=y?P:P-g.top-g.bottom;const A=P-R-(S-g.bottom)-(b?w:0);C>i.cappedHeight&&v.visual>A?o.overflow=A:o.overflow=null,t.height=Math.min(i.cappedHeight,L-g.top-g.bottom)}else{const y=p>0?g.top+g.bottom:0;c.scalable=!0,c.height=Math.max(_,C-y),t.height=Math.max(_,L-y)}t.ref.credits&&c.heightCurrent&&(t.ref.credits.style.transform=`translateY(${c.heightCurrent}px)`)},F0=t=>{const e=t.ref.list.childViews[0].childViews[0];return e?{top:e.rect.element.marginTop,bottom:e.rect.element.marginBottom}:{top:0,bottom:0}},j0=t=>{let e=0,s=0;const i=t.ref.list,n=i.childViews[0],a=n.childViews.filter(w=>w.rect.element.height),o=t.query("GET_ACTIVE_ITEMS").map(w=>a.find(S=>S.id===w.id)).filter(w=>w);if(o.length===0)return{visual:e,bounds:s};const c=n.rect.element.width,h=Hm(n,o,i.dragCoordinates),d=o[0].rect.element,p=d.marginTop+d.marginBottom,m=d.marginLeft+d.marginRight,b=d.width+m,f=d.height+p,g=typeof h!="undefined"&&h>=0?1:0,v=o.find(w=>w.markedForRemoval&&w.opacity<.45)?-1:0,_=o.length+g+v,R=Wm(c,b);return R===1?o.forEach(w=>{const S=w.rect.element.height+p;s+=S,e+=S*w.opacity}):(s=Math.ceil(_/R)*f,e=s),{visual:e,bounds:s}},k0=t=>{const e=t.ref.measureHeight||null;return{cappedHeight:parseInt(t.style.maxHeight,10)||null,fixedHeight:e===0?null:e}},Qm=(t,e)=>{const s=t.query("GET_ALLOW_REPLACE"),i=t.query("GET_ALLOW_MULTIPLE"),n=t.query("GET_TOTAL_ITEMS");let a=t.query("GET_MAX_FILES");const o=e.length;return!i&&o>1?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:jt("warning",0,"Max files")}),!0):(a=i?a:1,!i&&s?!1:$o(a)&&n+o>a?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:jt("warning",0,"Max files")}),!0):!1)},G0=(t,e,s)=>{const i=t.childViews[0];return Hm(i,e,{left:s.scopeLeft-i.rect.element.left,top:s.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},rg=t=>{const e=t.query("GET_ALLOW_DROP"),s=t.query("GET_DISABLED"),i=e&&!s;if(i&&!t.ref.hopper){const n=x0(t.element,a=>{const o=t.query("GET_BEFORE_DROP_FILE")||(()=>!0);return t.query("GET_DROP_VALIDATION")?a.every(h=>Hr("ALLOW_HOPPER_ITEM",h,{query:t.query}).every(d=>d===!0)&&o(h)):!0},{filterItems:a=>{const o=t.query("GET_IGNORED_FILES");return a.filter(c=>Vr(c)?!o.includes(c.name.toLowerCase()):!0)},catchesDropsOnPage:t.query("GET_DROP_ON_PAGE"),requiresDropOnElement:t.query("GET_DROP_ON_ELEMENT")});n.onload=(a,o)=>{const h=t.ref.list.childViews[0].childViews.filter(p=>p.rect.element.height),d=t.query("GET_ACTIVE_ITEMS").map(p=>h.find(m=>m.id===p.id)).filter(p=>p);oi("ADD_ITEMS",a,{dispatch:t.dispatch}).then(p=>{if(Qm(t,p))return!1;t.dispatch("ADD_ITEMS",{items:p,index:G0(t.ref.list,d,o),interactionMethod:ks.DROP})}),t.dispatch("DID_DROP",{position:o}),t.dispatch("DID_END_DRAG",{position:o})},n.ondragstart=a=>{t.dispatch("DID_START_DRAG",{position:a})},n.ondrag=FE(a=>{t.dispatch("DID_DRAG",{position:a})}),n.ondragend=a=>{t.dispatch("DID_END_DRAG",{position:a})},t.ref.hopper=n,t.ref.drip=t.appendChildView(t.createChildView(Hx))}else!i&&t.ref.hopper&&(t.ref.hopper.destroy(),t.ref.hopper=null,t.removeChildView(t.ref.drip))},ag=(t,e)=>{const s=t.query("GET_ALLOW_BROWSE"),i=t.query("GET_DISABLED"),n=s&&!i;n&&!t.ref.browser?t.ref.browser=t.appendChildView(t.createChildView(Dx,O(I({},e),{onload:a=>{oi("ADD_ITEMS",a,{dispatch:t.dispatch}).then(o=>{if(Qm(t,o))return!1;t.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:ks.BROWSE})})}})),0):!n&&t.ref.browser&&(t.removeChildView(t.ref.browser),t.ref.browser=null)},og=t=>{const e=t.query("GET_ALLOW_PASTE"),s=t.query("GET_DISABLED"),i=e&&!s;i&&!t.ref.paster?(t.ref.paster=C0(),t.ref.paster.onload=n=>{oi("ADD_ITEMS",n,{dispatch:t.dispatch}).then(a=>{if(Qm(t,a))return!1;t.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:ks.PASTE})})}):!i&&t.ref.paster&&(t.ref.paster.destroy(),t.ref.paster=null)},B0=Xe({DID_SET_ALLOW_BROWSE:({root:t,props:e})=>{ag(t,e)},DID_SET_ALLOW_DROP:({root:t})=>{rg(t)},DID_SET_ALLOW_PASTE:({root:t})=>{og(t)},DID_SET_DISABLED:({root:t,props:e})=>{rg(t),og(t),ag(t,e),t.query("GET_DISABLED")?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),U0=Ht({name:"root",read:({root:t})=>{t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:P0,write:D0,destroy:({root:t})=>{t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",Uh),t.element.removeEventListener("gesturestart",Uh)},mixins:{styles:["height"]}}),V0=(t={})=>{let e=null;const s=Gh(),i=aw(Ww(s),[cT,Yw(s)],[NT,qw(s)]);i.dispatch("SET_OPTIONS",{options:t});const n=()=>{document.hidden||i.dispatch("KICK")};document.addEventListener("visibilitychange",n);let a=null,o=!1,c=!1,h=null,d=null;const p=()=>{o||(o=!0),clearTimeout(a),a=setTimeout(()=>{o=!1,h=null,d=null,c&&(c=!1,i.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",p);const m=U0(i,{id:Gm()});let b=!1,f=!1;const g={_read:()=>{o&&(d=window.innerWidth,h||(h=d),!c&&d!==h&&(i.dispatch("DID_START_RESIZE"),c=!0)),f&&b&&(b=m.element.offsetParent===null),!b&&(m._read(),f=m.rect.element.hidden)},_write:j=>{const N=i.processActionQueue().filter(k=>!/^SET_/.test(k.type));b&&!N.length||(w(N),b=m._write(j,N,c),Qw(i.query("GET_ITEMS")),b&&i.processDispatchQueue())}},v=j=>N=>{const k={type:j};if(!N)return k;if(N.hasOwnProperty("error")&&(k.error=N.error?I({},N.error):null),N.status&&(k.status=I({},N.status)),N.file&&(k.output=N.file),N.source)k.file=N.source;else if(N.item||N.id){const U=N.item?N.item:i.query("GET_ITEM",N.id);k.file=U?os(U):null}return N.items&&(k.items=N.items.map(os)),/progress/.test(j)&&(k.progress=N.progress),N.hasOwnProperty("origin")&&N.hasOwnProperty("target")&&(k.origin=N.origin,k.target=N.target),k},_={DID_DESTROY:v("destroy"),DID_INIT:v("init"),DID_THROW_MAX_FILES:v("warning"),DID_INIT_ITEM:v("initfile"),DID_START_ITEM_LOAD:v("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:v("addfileprogress"),DID_LOAD_ITEM:v("addfile"),DID_THROW_ITEM_INVALID:[v("error"),v("addfile")],DID_THROW_ITEM_LOAD_ERROR:[v("error"),v("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[v("error"),v("removefile")],DID_PREPARE_OUTPUT:v("preparefile"),DID_START_ITEM_PROCESSING:v("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:v("processfileprogress"),DID_ABORT_ITEM_PROCESSING:v("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:v("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:v("processfiles"),DID_REVERT_ITEM_PROCESSING:v("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[v("error"),v("processfile")],DID_REMOVE_ITEM:v("removefile"),DID_UPDATE_ITEMS:v("updatefiles"),DID_ACTIVATE_ITEM:v("activatefile"),DID_REORDER_ITEMS:v("reorderfiles")},R=j=>{const N=I({pond:q},j);delete N.type,m.element.dispatchEvent(new CustomEvent(`FilePond:${j.type}`,{detail:N,bubbles:!0,cancelable:!0,composed:!0}));const k=[];j.hasOwnProperty("error")&&k.push(j.error),j.hasOwnProperty("file")&&k.push(j.file);const U=["type","error","file"];Object.keys(j).filter(z=>!U.includes(z)).forEach(z=>k.push(j[z])),q.fire(j.type,...k);const Y=i.query(`GET_ON${j.type.toUpperCase()}`);Y&&Y(...k)},w=j=>{j.length&&j.filter(N=>_[N.type]).forEach(N=>{const k=_[N.type];(Array.isArray(k)?k:[k]).forEach(U=>{N.type==="DID_INIT_ITEM"?R(U(N.data)):setTimeout(()=>{R(U(N.data))},0)})})},S=j=>i.dispatch("SET_OPTIONS",{options:j}),C=j=>i.query("GET_ACTIVE_ITEM",j),L=j=>new Promise((N,k)=>{i.dispatch("REQUEST_ITEM_PREPARE",{query:j,success:U=>{N(U)},failure:U=>{k(U)}})}),y=(j,N={})=>new Promise((k,U)=>{F([{source:j,options:N}],{index:N.index}).then(Y=>k(Y&&Y[0])).catch(U)}),P=j=>j.file&&j.id,A=(j,N)=>(typeof j=="object"&&!P(j)&&!N&&(N=j,j=void 0),i.dispatch("REMOVE_ITEM",O(I({},N),{query:j})),i.query("GET_ACTIVE_ITEM",j)===null),F=(...j)=>new Promise((N,k)=>{const U=[],Y={};if(Ju(j[0]))U.push.apply(U,j[0]),Object.assign(Y,j[1]||{});else{const z=j[j.length-1];typeof z=="object"&&!(z instanceof Blob)&&Object.assign(Y,j.pop()),U.push(...j)}i.dispatch("ADD_ITEMS",{items:U,index:Y.index,interactionMethod:ks.API,success:N,failure:k})}),W=()=>i.query("GET_ACTIVE_ITEMS"),G=j=>new Promise((N,k)=>{i.dispatch("REQUEST_ITEM_PROCESSING",{query:j,success:U=>{N(U)},failure:U=>{k(U)}})}),B=(...j)=>{const N=Array.isArray(j[0])?j[0]:j,k=N.length?N:W();return Promise.all(k.map(L))},X=(...j)=>{const N=Array.isArray(j[0])?j[0]:j;if(!N.length){const k=W().filter(U=>!(U.status===it.IDLE&&U.origin===re.LOCAL)&&U.status!==it.PROCESSING&&U.status!==it.PROCESSING_COMPLETE&&U.status!==it.PROCESSING_REVERT_ERROR);return Promise.all(k.map(G))}return Promise.all(N.map(G))},M=(...j)=>{const N=Array.isArray(j[0])?j[0]:j;let k;typeof N[N.length-1]=="object"?k=N.pop():Array.isArray(j[0])&&(k=j[1]);const U=W();return N.length?N.map(z=>fr(z)?U[z]?U[z].id:null:z).filter(z=>z).map(z=>A(z,k)):Promise.all(U.map(z=>A(z,k)))},q=O(I(I(I({},ep()),g),Hw(i,s)),{setOptions:S,addFile:y,addFiles:F,getFile:C,processFile:G,prepareFile:L,removeFile:A,moveFile:(j,N)=>i.dispatch("MOVE_ITEM",{query:j,index:N}),getFiles:W,processFiles:X,removeFiles:M,prepareFiles:B,sort:j=>i.dispatch("SORT",{compare:j}),browse:()=>{var j=m.element.querySelector("input[type=file]");j&&j.click()},destroy:()=>{q.fire("destroy",m.element),i.dispatch("ABORT_ALL"),m._destroy(),window.removeEventListener("resize",p),document.removeEventListener("visibilitychange",n),i.dispatch("DID_DESTROY")},insertBefore:j=>$f(m.element,j),insertAfter:j=>Af(m.element,j),appendTo:j=>j.appendChild(m.element),replaceElement:j=>{$f(m.element,j),j.parentNode.removeChild(j),e=j},restoreElement:()=>{e&&(Af(e,m.element),m.element.parentNode.removeChild(m.element),e=null)},isAttachedTo:j=>m.element===j||e===j,element:{get:()=>m.element},status:{get:()=>i.query("GET_STATUS")}});return i.dispatch("DID_INIT"),er(q)},jE=(t={})=>{const e={};return Mt(Gh(),(i,n)=>{e[i]=n[0]}),V0(I(I({},e),t))},z0=t=>t.charAt(0).toLowerCase()+t.slice(1),W0=t=>DE(t.replace(/^data-/,"")),kE=(t,e)=>{Mt(e,(s,i)=>{Mt(t,(n,a)=>{const o=new RegExp(s);if(!o.test(n)||(delete t[n],i===!1))return;if(Ye(i)){t[i]=a;return}const h=i.group;me(i)&&!t[h]&&(t[h]={}),t[h][z0(n.replace(o,""))]=a}),i.mapping&&kE(t[i.group],i.mapping)})},H0=(t,e={})=>{const s=[];Mt(t.attributes,n=>{s.push(t.attributes[n])});const i=s.filter(n=>n.name).reduce((n,a)=>{const o=ae(t,a.name);return n[W0(a.name)]=o===a.name?!0:o,n},{});return kE(i,e),i},q0=(t,e={})=>{const s={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Hr("SET_ATTRIBUTE_TO_OPTION_MAP",s);const i=I({},e),n=H0(t.nodeName==="FIELDSET"?t.querySelector("input[type=file]"):t,s);Object.keys(n).forEach(o=>{me(n[o])?(me(i[o])||(i[o]={}),Object.assign(i[o],n[o])):i[o]=n[o]}),i.files=(e.files||[]).concat(Array.from(t.querySelectorAll("input:not([type=file])")).map(o=>({source:o.value,options:{type:o.dataset.type}})));const a=jE(i);return t.files&&Array.from(t.files).forEach(o=>{a.addFile(o)}),a.replaceElement(t),a},Y0=(...t)=>rw(t[0])?q0(...t):jE(...t),X0=["fire","_read","_write"],lg=t=>{const e={};return aE(t,e,X0),e},Z0=(t,e)=>t.replace(/(?:{([a-zA-Z]+)})/g,(s,i)=>e[i]),Q0=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),s=URL.createObjectURL(e),i=new Worker(s);return{transfer:(n,a)=>{},post:(n,a,o)=>{const c=Gm();i.onmessage=h=>{h.data.id===c&&a(h.data.message)},i.postMessage({id:c,message:n},o)},terminate:()=>{i.terminate(),URL.revokeObjectURL(s)}}},J0=t=>new Promise((e,s)=>{const i=new Image;i.onload=()=>{e(i)},i.onerror=n=>{s(n)},i.src=t}),GE=(t,e)=>{const s=t.slice(0,t.size,t.type);return s.lastModifiedDate=t.lastModifiedDate,s.name=e,s},K0=t=>GE(t,t.name),cg=[],tS=t=>{if(cg.includes(t))return;cg.push(t);const e=t({addFilter:Kw,utils:{Type:V,forin:Mt,isString:Ye,isFile:Vr,toNaturalFileSize:IE,replaceInString:Z0,getExtensionFromFilename:sp,getFilenameWithoutExtension:gE,guesstimateMimeType:$E,getFileFromBlob:So,getFilenameFromURL:Uc,createRoute:Xe,createWorker:Q0,createView:Ht,createItemAPI:os,loadImage:J0,copyFile:K0,renameFile:GE,createBlob:pE,applyFilterChain:oi,text:kt,getNumericAspectRatioFromString:cE},views:{fileActionButton:bE}});tT(e.options)},eS=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",sS=()=>"Promise"in window,iS=()=>"slice"in Blob.prototype,nS=()=>"URL"in window&&"createObjectURL"in window.URL,rS=()=>"visibilityState"in document,aS=()=>"performance"in window,oS=()=>"supports"in(window.CSS||{}),lS=()=>/MSIE|Trident/.test(window.navigator.userAgent),Cp=(()=>{const t=tE()&&!eS()&&rS()&&sS()&&iS()&&nS()&&aS()&&(oS()||lS());return()=>t})(),In={apps:[]},cS="filepond",qr=()=>{};let BE={},UE={},VE={},Op={},oh=qr,lh=qr,Lp=qr,$p=qr,Ap=qr,yp=qr,Mp=qr;if(Cp()){Aw(()=>{In.apps.forEach(s=>s._read())},s=>{In.apps.forEach(i=>i._write(s))});const t=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Cp,create:oh,destroy:lh,parse:Lp,find:$p,registerPlugin:Ap,setOptions:Mp}})),document.removeEventListener("DOMContentLoaded",t)};document.readyState!=="loading"?setTimeout(()=>t(),0):document.addEventListener("DOMContentLoaded",t);const e=()=>Mt(Gh(),(s,i)=>{Op[s]=i[1]});BE=I({},hE),VE=I({},re),UE=I({},it),Op={},e(),oh=(...s)=>{const i=Y0(...s);return i.on("destroy",lh),In.apps.push(i),lg(i)},lh=s=>{const i=In.apps.findIndex(n=>n.isAttachedTo(s));return i>=0?(In.apps.splice(i,1)[0].restoreElement(),!0):!1},Lp=s=>Array.from(s.querySelectorAll(`.${cS}`)).filter(a=>!In.apps.find(o=>o.isAttachedTo(a))).map(a=>oh(a)),$p=s=>{const i=In.apps.find(n=>n.isAttachedTo(s));return i?lg(i):null},Ap=(...s)=>{s.forEach(tS),e()},yp=()=>{const s={};return Mt(Gh(),(i,n)=>{s[i]=n[0]}),s},Mp=s=>(me(s)&&(In.apps.forEach(i=>{i.setOptions(s)}),eT(s)),yp())}var hg=Object.freeze({__proto__:null,get FileOrigin(){return VE},get FileStatus(){return UE},get OptionTypes(){return Op},get Status(){return BE},get create(){return oh},get destroy(){return lh},get find(){return $p},get getOptions(){return yp},get parse(){return Lp},get registerPlugin(){return Ap},get setOptions(){return Mp},supported:Cp});function _t({formID:t,fieldKey:e,fieldData:s,children:i,noLabel:n,noErrMsg:a,isBuilder:o}){var C,L,y,P,A,F,W,G,B,X;const{"*":c}=qu(),h=J(LI),d=J(je),{styleMode:p}=d,[m,b,f]=c.split("/"),g=p&&m==="theme-customize"&&["err-msg","err-txt","err-txt-pre-i","err-txt-suf-i"].indexOf(b)>=0,v=p&&m==="field-theme-customize"&&["err-msg","err-txt","err-txt-pre-i","err-txt-suf-i"].indexOf(b)>=0&&f===e,_=((C=s.valid)==null?void 0:C.hide)||!1,R=((y=(L=s.err)==null?void 0:L.req)==null?void 0:y.dflt)||"",w=D.useRef(null),S=M=>{const q=M.getBoundingClientRect();return q.top>=0&&q.left>=0&&q.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&q.right<=(window.innerWidth||document.documentElement.clientWidth)};if(R&&w.current){const M=w.current,q=document.body.getBoundingClientRect(),N=M.getBoundingClientRect().top-q.top;S(M)||window.scroll({top:N,behavior:"smooth"})}return u.jsxs("div",O(I({ref:w,"data-testid":`${e}-fld-wrp`,"data-dev-fld-wrp":e,className:`${e}-fld-wrp ${x(e,"fld-wrp")} ${p?"":"drag"} ${_?"fld-hide":""}`,style:{direction:h}},$(e,"fld-wrp")),{children:[!n&&u.jsxs("div",O(I({"data-testid":`${e}-lbl-wrp`,"data-dev-lbl-wrp":e,className:`${e}-lbl-wrp ${x(e,"lbl-wrp")}`},$(e,"lbl-wrp")),{children:[!((P=s==null?void 0:s.valid)!=null&&P.hideLbl)&&"lbl"in s&&u.jsxs("label",O(I({"data-testid":`${e}-lbl`,"data-dev-lbl":e,title:s.lbl,className:`${e}-lbl ${x(e,"lbl")}`,htmlFor:e},$(e,"lbl")),{children:[((A=s.valid)==null?void 0:A.req)&&((F=s.valid)==null?void 0:F.reqShow)&&((W=s.valid)==null?void 0:W.reqPos)==="before"&&u.jsx("span",O(I({"data-testid":`${e}-req-smbl`,"data-dev-req-smbl":e,className:`${e}-req-smbl ${x(e,"req-smbl")}`},$(e,"req-smbl")),{children:"*"})),s.lblPreIcn&&u.jsx("img",I({"data-testid":`${e}-lbl-pre-i`,"data-dev-lbl-pre-i":e,className:`${e}-lbl-pre-i ${x(e,"lbl-pre-i")}`,src:s.lblPreIcn,alt:""},$(e,"lbl-pre-i"))),u.jsx(Fe,{html:s.lbl.replace(/\$_bf_\$/g,"\\")}),s.lblSufIcn&&u.jsx("img",I({"data-testid":`${e}-lbl-suf-i`,"data-dev-lbl-suf-i":e,className:`${e}-lbl-suf-i ${x(e,"lbl-suf-i")}`,src:s.lblSufIcn,alt:""},$(e,"lbl-suf-i"))),((G=s.valid)==null?void 0:G.req)&&((B=s.valid)==null?void 0:B.reqShow)&&((X=s.valid)==null?void 0:X.reqPos)!=="before"&&u.jsx("span",O(I({"data-testid":`${e}-req-smbl`,"data-dev-req-smbl":e,className:`${e}-req-smbl ${x(e,"req-smbl")}`},$(e,"req-smbl")),{children:"*"}))]})),(s.subtitle||s.subTlePreIcn||s.subTleSufIcn)&&u.jsxs("div",O(I({"data-testid":`${e}-sub-titl`,"data-dev-sub-titl":e,className:`${e}-sub-titl ${x(e,"sub-titl")}`},$(e,"sub-titl")),{children:[s.subTlePreIcn&&u.jsx("img",I({"data-testid":`${e}-sub-titl-pre-i`,"data-dev-sub-titl-pre-i":e,className:`${e}-sub-titl-pre-i ${x(e,"sub-titl-pre-i")}`,src:s.subTlePreIcn,alt:""},$(e,"sub-titl-pre-i"))),u.jsx(Fe,{html:s.subtitle||""}),s.subTleSufIcn&&u.jsx("img",I({"data-testid":`${e}-sub-titl-suf-i`,"data-dev-sub-titl-suf-i":e,className:`${e}-sub-titl-suf-i ${x(e,"sub-titl-suf-i")}`,src:s.subTleSufIcn,alt:""},$(e,"sub-titl-suf-i")))]}))]})),u.jsxs("div",O(I({"data-testid":`${e}-inp-wrp`,className:`${e}-inp-wrp ${x(e,"inp-wrp")}`},$(e,"inp-wrp")),{children:[i,(s.helperTxt||s.hlpPreIcn||s.hlpSufIcn)&&u.jsxs("div",O(I({"data-testid":`${e}-hlp-txt`,"data-dev-hlp-txt":e,className:`${e}-hlp-txt ${x(e,"hlp-txt")}`},$(e,"hlp-txt")),{children:[s.hlpPreIcn&&u.jsx("img",I({"data-testid":`${e}-hlp-txt-pre-i`,"data-dev-hlp-txt-pre-i":e,className:`${e}-hlp-txt-pre-i ${x(e,"hlp-txt-pre-i")}`,src:s.hlpPreIcn,alt:""},$(e,"hlp-txt-pre-i"))),u.jsx(Fe,{html:s.helperTxt||""}),s.hlpSufIcn&&u.jsx("img",I({"data-testid":`${e}-hlp-txt-suf-i`,"data-dev-hlp-txt-suf-i":e,className:`${e}-hlp-txt-suf-i ${x(e,"hlp-txt-suf-i")}`,src:s.hlpSufIcn,alt:""},$(e,"hlp-txt-suf-i")))]})),!a&&(g||v)&&u.jsxs("div",O(I({"data-testid":`${e}-err-msg`,"data-dev-err-msg":e,className:`${e}-err-msg ${x(e,"err-msg")}`},$(e,"err-msg")),{children:[s.errPreIcn&&u.jsx("img",I({"data-testid":`${e}-err-txt-pre-i`,"data-dev-err-txt-pre-i":e,className:`${e}-err-txt-pre-i ${x(e,"err-txt-pre-i")}`,src:s.errPreIcn,alt:""},$(e,"err-txt-pre-i"))),u.jsx("div",O(I({"data-testid":`${e}-err-txt`,"data-dev-err-txt":e,className:`${e}-err-txt ${x(e,"err-txt")}`},$(e,"err-txt")),{children:u.jsx(Fe,{html:`${R||"This is an example of an error message. this message will vary by a condition or validation check."} `})})),s.errSufIcn&&u.jsx("img",I({"data-testid":`${e}-err-txt-suf-i`,"data-dev-err-txt-suf-i":e,className:`${e}-err-txt-suf-i ${x(e,"err-txt-suf-i")}`,src:s.errSufIcn,alt:""},$(e,"err-txt-suf-i")))]}))]}))]}))}function hS({attr:t,formID:e,fieldKey:s,styleClasses:i}){const[n]=Mi(Nt),a=n[s],{config:o}=a,[c,h]=D.useState(0),d=D.useRef(null),p=D.useRef(null),m=J(je),{styleMode:b}=m;D.useEffect(()=>{const g=document.getElementById("bit-grid-layout").contentWindow;g.bit_filepond||(g.bit_filepond=hg),g.bit_filepond_plugin_image_preview||(g.bit_filepond_plugin_image_preview=zg),g.bit_filepond_plugin_file_validate_size||(g.bit_filepond_plugin_file_validate_size=jg),g.bit_filepond_plugin_file_validate_type||(g.bit_filepond_plugin_file_validate_type=kg),g.bit_filepond_plugin_image_crop||(g.bit_filepond_plugin_image_crop=Gg),g.bit_filepond_plugin_image_resize||(g.bit_filepond_plugin_image_resize=Wg),g.bit_filepond_plugin_image_transform||(g.bit_filepond_plugin_image_transform=Qg),g.bit_filepond_plugin_image_validate_size||(g.bit_filepond_plugin_image_validate_size=Jg),g.bit_filepond_plugin_media_preview||(g.bit_filepond_plugin_media_preview=Kg);const v={configSetting:o,fieldKey:s,window:g,document:document.getElementById("bit-grid-layout").contentDocument,formID:e,ajaxURL:typeof bits=="undefined"?bitFromsFront==null?void 0:bitFromsFront.ajaxURL:bits.ajaxURL,nonce:typeof bits=="undefined"?"":bits.nonce,uploadFileToServer:!0,onFileUpdate:()=>h(w=>w+1)};p!=null&&p.current||(p.current=St(`#filepond-${s}-container`));const _=d.current,R=p.current;_&&(hg.destroy(p.current),R.firstChild&&R.removeChild(R.firstChild)),d.current=new WI(R,v),h(w=>w+1)},[a==null?void 0:a.config]);const f=(g,v=!1)=>{var _;if((_=St(`.${s}-inp-wrp .${g}`))==null||_.setAttribute(`data-dev-${g}`,s),v){const R=$I(`.${s}-inp-wrp .${g}`);R.length>0&&[...R].map(w=>{w.setAttribute(`data-dev-${g}`,s)})}};return D.useEffect(()=>{f("filepond--root"),f("filepond--drop-label"),f("filepond--label-action"),f("filepond--panel-root"),f("filepond--item-panel",!0),f("filepond--file-action-button",!0),f("filepond--drip-blob"),f("filepond--file")},[c]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:i}),u.jsxs(_t,{formID:e,fieldKey:s,fieldData:t,children:[u.jsx("input",I(I(O(I({hidden:!0},b&&{id:s}),{type:"file",className:"filepond",name:"filepond"}),"disabled"in a.valid&&{disabled:a.valid.disabled}),"readonly"in a.valid&&{readOnly:a.valid.readonly})),u.jsx("div",{ref:p,id:`filepond-${s}-container`,className:`filepond-${s}-container ${a.valid.disabled?"disabled":""} ${a.valid.readonly?"readonly":""}`})]})]})}var dS=D.memo(hS);function uS({fieldKey:t,attr:e,styleClasses:s,buttonDisabled:i,handleReset:n,formID:a,data:o}){const c=mn(s);return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:c}),u.jsx(_t,{formID:a,fieldKey:t,fieldData:e,noLabel:!0,noErrMsg:!0,children:u.jsx("div",O(I({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${x(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{children:u.jsxs("button",O(I(I(O(I({"data-testid":t,"data-dev-btn":t,className:`${t}-btn ${x(t,"btn")}`},$(t,"btn")),{type:e.btnTyp}),e.btnTyp==="reset"&&{onClick:n}),"disabled"in e.valid&&{disabled:e.valid.disabled}),{name:e.fieldName,children:[e.btnPreIcn&&u.jsx("img",I({"data-testid":`${t}-btn-pre-i`,"data-dev-btn-pre-i":t,className:`${t}-btn-pre-i ${x(t,"btn-pre-i")}`,src:e.btnPreIcn,alt:""},$(t,"btn-pre-i"))),u.jsx(Fe,{html:e.txt||""}),e.btnSufIcn&&u.jsx("img",I({"data-testid":`${t}-btn-suf-i`,"data-dev-btn-suf-i":t,className:`${t}-btn-suf-i ${x(t,"btn-suf-i")}`,src:e.btnSufIcn,alt:""},$(t,"btn-suf-i")))]}))}))})]})}function pS({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:a}){const o=J(Nt),[c,h]=D.useState({checked:[]}),d=mn(o[n]),[p,m]=D.useState(""),b=(f,g)=>{const{checked:v}=f.target;if(v)c.checked.push(g);else{const _=c.checked.indexOf(g);c.checked.splice(_,1),h({checked:c.checked})}Tt(n)};return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:a}),u.jsx(_t,{formID:i,fieldKey:n,fieldData:t,children:u.jsxs("div",O(I({"data-testid":`${n}-cc`,"data-dev-cc":n,className:`${n}-cc ${x(n,"cc")}`},$(n,"cc")),{children:[u.jsx("svg",{className:`${n}-cks`,children:u.jsx("symbol",{id:`${n}-ck-svg`,viewBox:"0 0 12 10",children:u.jsx("polyline",{className:`${n}-ck-svgline`,points:"1.5 6 4.5 9 10.5 1"})})}),t.opt.map((f,g)=>u.jsxs("div",O(I({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${x(n,"cw")}`},$(n,"cw")),{children:[u.jsx("input",I(O(I(O(I({"data-testid":`${n}-ci`,id:`${n}-chk-${g}`,type:"checkbox",className:`${n}-ci ${x(n,"ci")}`},(t.valid.disabled||f.disabled)&&{disabled:!0}),{defaultValue:f.val||f.lbl}),t.valid.req&&{required:!0}),{name:`${d.lbl}[]`,checked:c.checked.includes(g)||(f==null?void 0:f.check),onChange:v=>b(v,g)}),$(n,"ci"))),u.jsxs("label",O(I({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${g}`,className:`${n}-cl ${x(n,"cl")}`},$(n,"cl")),{children:[u.jsx("span",O(I({"data-testid":`${n}-bx`,"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${x(n,"bx")}`},$(n,"bx")),{children:u.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${x(n,"svgwrp")}`,children:u.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${x(n,"ck-icn")}`})})})),u.jsx("span",O(I({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${x(n,"ct")}`},$(n,"ct")),{children:u.jsx(Fe,{html:f.lbl})}))]}))]}),`opt-${g+24}`)),t.addOtherOpt&&u.jsxs("div",O(I({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${x(n,"cw")}`},$(n,"cw")),{children:[u.jsx("input",I(O(I({"data-testid":`${n}-ci`,"data-oopt":n,id:`${n}-chk-${t.opt.length}`,type:"checkbox",className:`${n}-ci ${x(n,"ci")}`,disabled:t.valid.disabled,value:p},t.valid.req&&{required:!0}),{name:`${d.lbl}[]`,checked:c.checked.includes(t.opt.length),onChange:f=>b(f,t.opt.length)}),$(n,"ci"))),u.jsxs("label",O(I({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${t.opt.length}`,className:`${n}-cl ${x(n,"cl")}`},$(n,"cl")),{children:[u.jsx("span",O(I({"data-testid":`${n}-bx`,"data-dev-ck":n,"data-bx":!0,className:`${n}-bx ${n}-ck ${x(n,"ck")}`},$(n,"ck")),{children:u.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${x(n,"svgwrp")}`,children:u.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${x(n,"ck-icn")}`})})})),u.jsx("span",O(I({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${x(n,"ct")}`},$(n,"ct")),{children:t.otherOptLbl||"Other..."}))]})),u.jsx("div",{"data-oinp-wrp":!0,className:`${n}-other-inp-wrp`,children:u.jsx("input",O(I(I(I({"data-testid":`${n}-other-inp`,"data-dev-other-inp":n,type:"text",className:`${n}-other-inp ${x(n,"other-inp")}`},t.valid.otherOptReq&&{required:!0}),"otherInpPh"in t&&{placeholder:t.otherInpPh}),!("otherInpPh"in t)&&{placeholder:"Other..."}),{value:p,onChange:f=>m(f.target.value)}))})]}),`opt-${t.opt.length+24}`)]}))})]})}var Qt,Jt,Lt,Cn,wa,Hs,Qh,Jh,Ie,fi,dl,qs,Hi,Cs,Ir,Ys,On,ul,pl,ml,Ta,vr,Kh,fl,xa,Sa,gi,Ei,ve,Os,Ls,Ra,gl,El,Ca,Oa,La,$a,td,zE,ed,WE,bl,Np,sd,HE,id,qE,_e,Be,is,xs,nd,YE,rd,XE,ad,ZE,_r,jo,Aa,ch,Il,Pp,vl,Dp,wr,ko,_l,Fp,wl,jp,Tr,Go,Xs,ki,xr,Bo,ut,mt,ns,Ss,Tl,kp,Sr,Uo,Rr,Vo,$m,fS,xl,Gp,od,QE,ld,JE,Sl,Bp,Ln,Zr,cd,KE,Rl,Up,hd,tb,dd,eb;class mS{constructor(e,s){E(this,td);E(this,ed);E(this,bl);E(this,sd);E(this,id);E(this,_e);E(this,is);E(this,nd);E(this,rd);E(this,ad);E(this,_r);E(this,Aa);E(this,Il);E(this,vl);E(this,wr);E(this,_l);E(this,wl);E(this,Tr);E(this,Xs);E(this,xr);E(this,ut);E(this,ns);E(this,Tl);E(this,Sr);E(this,Rr);E(this,$m);E(this,xl);E(this,od);E(this,ld);E(this,Sl);E(this,Ln);E(this,cd);E(this,Rl);E(this,hd);E(this,dd);E(this,Qt,void 0);E(this,Jt,void 0);E(this,Lt,void 0);E(this,Cn,void 0);E(this,wa,void 0);E(this,Hs,void 0);E(this,Qh,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");E(this,Jh,void 0);E(this,Ie,void 0);E(this,fi,void 0);E(this,dl,void 0);E(this,qs,void 0);E(this,Hi,"");E(this,Cs,[]);E(this,Ir,!0);E(this,Ys,!0);E(this,On,!0);E(this,ul,!0);E(this,pl,!1);E(this,ml,!1);E(this,Ta,"");E(this,vr,"Select a Country");E(this,Kh,"Search Country");E(this,fl,"No Currency Found");E(this,xa,370);E(this,Sa,30);E(this,gi,void 0);E(this,Ei,{});E(this,ve,[]);E(this,Os,{});E(this,Ls,{});E(this,Ra,"");E(this,gl,"");E(this,El,null);E(this,Ca,"");E(this,Oa,[]);E(this,La,void 0);E(this,$a,!1);l(this,td,zE).call(this,s),typeof e=="string"?T(this,Qt,r(this,gi).querySelector(e)):T(this,Qt,e),this.fieldKey=r(this,gl),this.init()}init(){var e;T(this,Jt,l(this,_e,Be).call(this,`.${this.fieldKey}-country-hidden-input`)),T(this,Lt,l(this,_e,Be).call(this,`.${this.fieldKey}-dpd-wrp`)),T(this,Cn,l(this,_e,Be).call(this,`.${this.fieldKey}-selected-country-img`)),T(this,wa,l(this,_e,Be).call(this,`.${this.fieldKey}-selected-country-lbl`)),T(this,Hs,r(this,Ys)?l(this,_e,Be).call(this,`.${this.fieldKey}-inp-clr-btn`):{}),T(this,Jh,l(this,_e,Be).call(this,`.${this.fieldKey}-option-search-wrp`)),T(this,Ie,l(this,_e,Be).call(this,`.${this.fieldKey}-opt-search-input`)),T(this,fi,l(this,_e,Be).call(this,`.${this.fieldKey}-search-clear-btn`)),T(this,dl,l(this,_e,Be).call(this,`.${this.fieldKey}-option-wrp`)),T(this,qs,l(this,_e,Be).call(this,`.${this.fieldKey}-option-list`)),this.setMenu({open:!1}),r(this,pl)&&l(this,nd,YE).call(this),r(this,ml)&&l(this,rd,XE).call(this),r(this,Ta)&&l(this,sd,HE).call(this),l(this,id,qE).call(this),l(this,bl,Np).call(this),r(this,Ei).observeElm(r(this,Jt),"value",(s,i)=>{l(this,Il,Pp).call(this,s,i)}),r(this,Ir)||(e=r(this,Cn))==null||e.remove(),r(this,On)&&(l(this,ns,Ss).call(this,r(this,Ie),"padding-right","35px"),l(this,ns,Ss).call(this,r(this,fi),"display","none")),l(this,is,xs).call(this,r(this,qs),"scroll",s=>{s.stopPropagation()})}setSelectedCountryItem(e){if(T(this,Hi,e),!r(this,Hi))return;const s=l(this,wl,jp).call(this);s&&(r(this,Ir)&&r(this,Cn)&&(r(this,Cn).src=`${r(this,Ra)}${s.img}`),l(this,xr,Bo).call(this,r(this,wa),s.lbl),this.setMenu({open:!1}),this.value=s.val||s.lbl,r(this,Ys)&&(l(this,ns,Ss).call(this,r(this,Hs),"display","grid"),l(this,is,xs).call(this,r(this,Hs),"click",i=>{l(this,vl,Dp).call(this,i)})),r(this,La)&&r(this,La).call(this,s.val||s.lbl),l(this,ut,mt).call(this,r(this,Lt),"aria-label",`${s.lbl} selected`),l(this,wr,ko).call(this,r(this,Jt),"blur"),setTimeout(()=>{l(this,ut,mt).call(this,r(this,Lt),"aria-label",s.lbl)},100))}searchOptions(e){l(this,ld,JE).call(this,e);let s=[];e?(s=r(this,ve).filter(i=>i.lbl.toLowerCase().includes(e.toLowerCase())),s.length||(s=[{i:0,lbl:r(this,fl)}]),T(this,Cs,s),r(this,On)&&l(this,ns,Ss).call(this,r(this,fi),"display","grid")):(T(this,Cs,r(this,ve)),r(this,On)&&l(this,ns,Ss).call(this,r(this,fi),"display","none")),l(this,Tl,kp).call(this)}setMenu({open:e}){l(this,ns,Ss).call(this,r(this,dl),"max-height",`${e?r(this,xa):0}px`),e?(l(this,cd,KE).call(this),r(this,Qt).classList.add("menu-open"),l(this,is,xs).call(this,r(this,gi),"click",s=>l(this,Sl,Bp).call(this,s)),r(this,Ie).tabIndex="0",r(this,fi).tabIndex="0",r(this,Lt).setAttribute("aria-expanded","true"),l(this,ut,mt).call(this,r(this,qs),"aria-hidden",!1),l(this,ut,mt).call(this,r(this,Ie),"aria-hidden",!1),l(this,Tl,kp).call(this)):(r(this,Qt).classList.remove("menu-open"),r(this,gi).removeEventListener("click",l(this,Sl,Bp)),setTimeout(()=>{this.searchOptions("")},100),r(this,Ie).blur(),r(this,Ie).tabIndex="-1",r(this,fi).tabIndex="-1",r(this,Lt).setAttribute("aria-expanded","false"),l(this,ut,mt).call(this,r(this,qs),"aria-hidden",!0),l(this,ut,mt).call(this,r(this,Ie),"aria-hidden",!0))}set disabled(e){String(e).toLowerCase()==="true"?(r(this,Qt).classList.add("disabled"),r(this,Jt).disabled=!0,r(this,Ys)&&l(this,ut,mt).call(this,r(this,Hs),"tabindex","-1"),l(this,ut,mt).call(this,r(this,Lt),"aria-label","Country Field disabled"),l(this,ut,mt).call(this,r(this,Lt),"tabindex","-1"),this.setMenu({open:!1}),r(this,Oa).forEach(({selector:s,eventType:i,cb:n})=>{s.removeEventListener(i,n)})):String(e).toLowerCase()==="false"&&(r(this,Qt).classList.remove("disabled"),r(this,Jt).removeAttribute("disabled"),l(this,ut,mt).call(this,r(this,Lt),"tabindex","0"),r(this,Ys)&&l(this,ut,mt).call(this,r(this,Hs),"tabindex","0"),l(this,ut,mt).call(this,r(this,Lt),"aria-label",r(this,vr)),l(this,bl,Np).call(this))}get disabled(){return r(this,Jt).disabled}set readonly(e){String(e).toLowerCase()==="true"?(r(this,Qt).classList.add("disabled"),r(this,Jt).readOnly=!0,l(this,ut,mt).call(this,r(this,Lt),"tabindex","-1"),r(this,Ys)&&l(this,ut,mt).call(this,r(this,Hs),"tabindex","-1"),this.setMenu({open:!1})):String(e).toLowerCase()==="false"&&(r(this,Qt).classList.remove("disabled"),r(this,Jt).removeAttribute("readonly"),r(this,Ys)&&l(this,ut,mt).call(this,r(this,Lt),"tabindex","0"),l(this,ut,mt).call(this,r(this,Hs),"tabindex","0"))}get readonly(){return r(this,Jt).readOnly}set value(e){r(this,Jt).value=e,l(this,ut,mt).call(this,r(this,Jt),"value",e)}get value(){const e=l(this,wl,jp).call(this);return e.val||e.lbl}destroy(){r(this,qs).innerHTML="",this.value="",l(this,dd,eb).call(this)}reset(e){T(this,$a,!0),l(this,vl,Dp).call(this),this.destroy(),this.init(),this.setSelectedCountryItem(e),T(this,$a,!1)}}Qt=new WeakMap,Jt=new WeakMap,Lt=new WeakMap,Cn=new WeakMap,wa=new WeakMap,Hs=new WeakMap,Qh=new WeakMap,Jh=new WeakMap,Ie=new WeakMap,fi=new WeakMap,dl=new WeakMap,qs=new WeakMap,Hi=new WeakMap,Cs=new WeakMap,Ir=new WeakMap,Ys=new WeakMap,On=new WeakMap,ul=new WeakMap,pl=new WeakMap,ml=new WeakMap,Ta=new WeakMap,vr=new WeakMap,Kh=new WeakMap,fl=new WeakMap,xa=new WeakMap,Sa=new WeakMap,gi=new WeakMap,Ei=new WeakMap,ve=new WeakMap,Os=new WeakMap,Ls=new WeakMap,Ra=new WeakMap,gl=new WeakMap,El=new WeakMap,Ca=new WeakMap,Oa=new WeakMap,La=new WeakMap,$a=new WeakMap,td=new WeakSet,zE=function(e){T(this,gi,e.document||document),T(this,Ei,e.window||window),T(this,gl,e.fieldKey),T(this,Ta,e.defaultValue),T(this,vr,e.placeholder),T(this,Kh,e.searchPlaceholder||"Search Country"),T(this,fl,e.noCountryFoundText||"No Country Found"),T(this,Sa,e.rowHeight||30),T(this,xa,e.maxHeight||370),T(this,Ir,e.selectedFlagImage),T(this,Ys,e.selectedCountryClearable),T(this,On,e.searchClearable),T(this,ul,e.optionFlagImage),T(this,pl,e.detectCountryByIp),T(this,ml,e.detectCountryByGeo),T(this,Ra,e.assetsURL),T(this,La,e.onChange),T(this,Os,e.attributes||{}),T(this,Ls,e.classNames||{}),typeof e.options=="string"&&(e.options=l(this,ed,WE).call(this,e.options)),T(this,ve,e.options.filter(s=>!s.hide)),T(this,Cs,r(this,ve))},ed=new WeakSet,WE=function(e){const s=e.split("->");let i=r(this,Ei);return s.forEach(n=>{i=i[n]}),i},bl=new WeakSet,Np=function(){l(this,is,xs).call(this,r(this,Lt),"click",e=>{l(this,Rl,Up).call(this,e)}),l(this,is,xs).call(this,r(this,Lt),"keyup",e=>{l(this,Rl,Up).call(this,e)}),l(this,is,xs).call(this,r(this,Lt),"blur",e=>{l(this,hd,tb).call(this,e)}),l(this,is,xs).call(this,r(this,Qt),"keydown",e=>{l(this,ad,ZE).call(this,e)}),r(this,On)&&l(this,is,xs).call(this,r(this,fi),"click",()=>{this.searchOptions("")}),l(this,is,xs).call(this,r(this,Ie),"keyup",e=>{l(this,od,QE).call(this,e)})},sd=new WeakSet,HE=function(){const e=r(this,ve).find(s=>{const i=r(this,Ta);return s.i===i?!0:s.val?s.val===i:s.lbl===i});e&&this.setSelectedCountryItem(e.i)},id=new WeakSet,qE=function(){const e=r(this,Jt).name,i=decodeURIComponent(`${r(this,gi).URL}`.replace(/\+/g,"%20")).replace(new RegExp(`.*${e}=([^&]*).*|(.*)`),"$1");i&&l(this,Il,Pp).call(this,"",i)},_e=new WeakSet,Be=function(e){return r(this,Qt).querySelector(e)},is=new WeakSet,xs=function(e,s,i){e.addEventListener(s,i),r(this,Oa).push({selector:e,eventType:s,cb:i})},nd=new WeakSet,YE=function(){const{protocol:e}=r(this,Ei).location;fetch(`${e}//www.cloudflare.com/cdn-cgi/trace`).then(s=>s.text()).then(s=>{const i=s.trim().split(`
`).reduce((n,a)=>{const[o,c]=a.split("=");return n[o]=c,n},{});this.setSelectedCountryItem(i==null?void 0:i.loc)})},rd=new WeakSet,XE=function(){navigator.geolocation.getCurrentPosition(e=>{const{latitude:s,longitude:i}=e.coords,{protocol:n}=r(this,Ei).location,a=n==="https:"?`${n}//secure`:`${n}//api`;fetch(`${a}.geonames.org/countryCodeJSON?username=bitcodezoho1&lat=${s}&lng=${i}`).then(o=>o.json()).then(o=>{this.setSelectedCountryItem(o.countryCode)})})},ad=new WeakSet,ZE=function(e){var a,o;e.stopPropagation();const s=r(this,gi).activeElement;let i=null;if(l(this,Ln,Zr).call(this)){const c=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Ie))i=l(this,_e,Be).call(this,".option:not(.disabled-opt)");else if(s.classList.contains("option")){const h=l(this,Aa,ch).call(this,c,"next"),d=l(this,_r,jo).call(this,h);d?i=d:h+1<r(this,Cs).length&&((a=this.virtualOptionList)==null||a.scrollToIndex(h),setTimeout(()=>{const p=l(this,_r,jo).call(this,h);p&&p.focus()},50))}}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Ie))i=r(this,Lt),l(this,Ln,Zr).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){const h=l(this,Aa,ch).call(this,c,"previous"),d=l(this,_r,jo).call(this,h);d?i=d:h>0?((o=this.virtualOptionList)==null||o.scrollToIndex(h),setTimeout(()=>{const p=l(this,_r,jo).call(this,h);p&&p.focus()},50)):d||(i=r(this,Ie))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,El)),T(this,Ca,r(this,Ca)+e.key),T(this,El,setTimeout(()=>{T(this,Ca,"")},300));const c=r(this,ve).find(h=>!h.disabled&&h.lbl.toLowerCase().startsWith(r(this,Ca)));c&&this.setSelectedCountryItem(c.i)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();const c=l(this,_l,Fp).call(this),h=e.key==="ArrowDown"?"next":"previous",d=l(this,Aa,ch).call(this,c,h);d>-1&&d<r(this,ve).length&&(this.value=r(this,ve)[d].val||r(this,ve)[d].lbl,l(this,wr,ko).call(this,r(this,Jt),"blur"))}i&&i.focus()},_r=new WeakSet,jo=function(e){return l(this,_e,Be).call(this,`.${this.fieldKey}-option-list .option[data-index="${e}"]`)},Aa=new WeakSet,ch=function(e=-1,s){if(s==="next"){const i=r(this,ve).length;for(let n=e+1;n<i;n+=1)if(!r(this,ve)[n].disabled)return n}else if(s==="previous"){for(let i=e-1;i>=0;i-=1)if(!r(this,ve)[i].disabled)return i}},Il=new WeakSet,Pp=function(e,s){const i=r(this,ve).find(n=>n.i===s||n.val===s||n.lbl===s);i&&e!==s&&this.setSelectedCountryItem(i.i),typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,Jt)})},vl=new WeakSet,Dp=function(e){e==null||e.stopPropagation(),T(this,Hi,""),r(this,Ir)&&(r(this,Cn).src=r(this,Qh)),l(this,xr,Bo).call(this,r(this,wa),r(this,vr)),r(this,Ys)&&l(this,ns,Ss).call(this,r(this,Hs),"display","none"),l(this,ut,mt).call(this,r(this,Lt),"aria-label","Selected country cleared"),r(this,$a)||r(this,Lt).focus(),this.setMenu({open:!1}),this.value="",l(this,wr,ko).call(this,r(this,Jt),"blur"),setTimeout(()=>{l(this,ut,mt).call(this,r(this,Lt),"aria-label",r(this,vr))},100)},wr=new WeakSet,ko=function(e,s){const i=new Event(s);e.dispatchEvent(i)},_l=new WeakSet,Fp=function(){return r(this,Cs).findIndex(e=>e.i===r(this,Hi))},wl=new WeakSet,jp=function(){return r(this,ve).find(e=>e.i===r(this,Hi))},Tr=new WeakSet,Go=function(e){return r(this,gi).createElement(e)},Xs=new WeakSet,ki=function(e,s){e.classList.add(s)},xr=new WeakSet,Bo=function(e,s){e.textContent=s},ut=new WeakSet,mt=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},ns=new WeakSet,Ss=function(e,s,i){e.style.setProperty(s,i,"important")},Tl=new WeakSet,kp=function(){if(!l(this,Ln,Zr).call(this))return;l(this,xl,Gp).call(this);const e=l(this,_l,Fp).call(this),s=l(this,_e,Be).call(this,`.option[data-index="${e}"]`);s&&s.scrollIntoView({block:"nearest",inline:"nearest"})},Sr=new WeakSet,Uo=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,Xs,ki).call(this,e,i))},Rr=new WeakSet,Vo=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,ut,mt).call(this,e,s[n].key,s[n].value)},$m=new WeakSet,fS=function(){const e=l(this,_e,Be).call(this,".option");if(!e)return;const s=r(this,Ei).getComputedStyle(e),i=parseFloat(s.marginTop)+parseFloat(s.marginBottom),n=e.offsetHeight+i||0;n!==r(this,Sa)&&(T(this,Sa,n),r(this,qs).innerHTML="",l(this,xl,Gp).call(this))},xl=new WeakSet,Gp=function(){r(this,qs).innerHTML="";const e=r(this,Cs).map((s,i)=>{const n=l(this,Tr,Go).call(this,"li");if(l(this,ut,mt).call(this,n,"data-key",s.i),l(this,ut,mt).call(this,n,"data-index",i),"option"in r(this,Os)){const c=r(this,Os).option;l(this,Rr,Vo).call(this,n,c)}if(l(this,ut,mt).call(this,n,"data-dev-option",this.fieldKey),!s.i)return l(this,xr,Bo).call(this,n,s.lbl),l(this,Xs,ki).call(this,n,"opt-not-found"),n;if(l(this,Xs,ki).call(this,n,"option"),"option"in r(this,Ls)){const c=r(this,Ls).option;c&&l(this,Sr,Uo).call(this,n,c)}const a=l(this,Tr,Go).call(this,"span");if(l(this,Xs,ki).call(this,a,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,Ls)){const c=r(this,Ls)["opt-lbl-wrp"];c&&l(this,Sr,Uo).call(this,a,c)}if("opt-lbl-wrp"in r(this,Os)){const c=r(this,Os)["opt-lbl-wrp"];l(this,Rr,Vo).call(this,a,c)}if(r(this,ul)){const c=l(this,Tr,Go).call(this,"img");if("opt-icn"in r(this,Os)){const h=r(this,Os)["opt-icn"];h&&l(this,Rr,Vo).call(this,c,h)}if(l(this,Xs,ki).call(this,c,"opt-icn"),"opt-icn"in r(this,Ls)){const h=r(this,Ls)["opt-icn"];h&&l(this,Sr,Uo).call(this,c,h)}c.src=`${r(this,Ra)}${s.img}`,c.alt=`${s.lbl} flag image`,c.loading="lazy",l(this,ut,mt).call(this,c,"aria-hidden",!0),a.append(c)}const o=l(this,Tr,Go).call(this,"span");if("opt-lbl"in r(this,Os)){const c=r(this,Os)["opt-lbl"];l(this,Rr,Vo).call(this,o,c)}if(l(this,Xs,ki).call(this,o,"opt-lbl"),"opt-lbl"in r(this,Ls)){const c=r(this,Ls)["opt-lbl"];c&&l(this,Sr,Uo).call(this,o,c)}return l(this,xr,Bo).call(this,o,s.lbl),a.append(o),n.tabIndex=l(this,Ln,Zr).call(this)?"0":"-1",l(this,ut,mt).call(this,n,"role","option"),l(this,ut,mt).call(this,n,"aria-posinset",i+1),l(this,ut,mt).call(this,n,"aria-setsize",r(this,Cs).length),l(this,is,xs).call(this,n,"click",c=>{this.setSelectedCountryItem(c.currentTarget.dataset.key)}),l(this,is,xs).call(this,n,"keyup",c=>{c.key==="Enter"&&this.setSelectedCountryItem(c.currentTarget.dataset.key)}),s.disabled&&l(this,Xs,ki).call(this,n,"disabled-opt"),n.append(a),r(this,Hi)===s.i?(l(this,Xs,ki).call(this,n,"selected-opt"),l(this,ut,mt).call(this,n,"aria-selected",!0)):l(this,ut,mt).call(this,n,"aria-selected",!1),n});r(this,qs).append(...e)},od=new WeakSet,QE=function(e){var s;if(e.stopPropagation(),e.key==="Enter"&&r(this,Cs).length){const i=(s=r(this,Cs))==null?void 0:s[0].i;i&&(this.setSelectedCountryItem(i),this.searchOptions(""))}else this.searchOptions(e.target.value)},ld=new WeakSet,JE=function(e){r(this,Ie).value=e},Sl=new WeakSet,Bp=function(e){r(this,Qt).contains(e.target)||this.setMenu({open:!1})},Ln=new WeakSet,Zr=function(){return r(this,Qt).classList.contains("menu-open")},cd=new WeakSet,KE=function(){const e=r(this,Ei),s=r(this,Lt).getBoundingClientRect(),i=s.top,n=e.innerHeight-s.bottom;n<i&&n<r(this,xa)?(l(this,ns,Ss).call(this,r(this,Qt),"flex-direction","column-reverse"),l(this,ns,Ss).call(this,r(this,Qt),"bottom","0%")):(l(this,ns,Ss).call(this,r(this,Qt),"flex-direction","column"),l(this,ns,Ss).call(this,r(this,Qt),"bottom","auto"))},Rl=new WeakSet,Up=function(e){e.code==="Space"&&(r(this,Ie).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,Ln,Zr).call(this)?this.setMenu({open:!1}):(r(this,Ie).focus(),this.setMenu({open:!0})))},hd=new WeakSet,tb=function(e){var s;(s=e.target.parentElement)!=null&&s.contains(e.relatedTarget)||l(this,wr,ko).call(this,r(this,Jt),"blur")},dd=new WeakSet,eb=function(){r(this,Oa).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function rp(t,e,s,i=0){const n=new MutationObserver(o=>{o.forEach(c=>{if(c.attributeName===e){const{oldValue:h}=c,d=c.target[e];typeof s=="function"&&setTimeout(s.call(this,h,d),i)}})}),a={attributes:!0,attributeOldValue:!0,attributeFilter:[e]};return n.observe(t,a),n}var dg=11;function gS(t,e){var s=e.attributes,i,n,a,o,c;if(!(e.nodeType===dg||t.nodeType===dg)){for(var h=s.length-1;h>=0;h--)i=s[h],n=i.name,a=i.namespaceURI,o=i.value,a?(n=i.localName||n,c=t.getAttributeNS(a,n),c!==o&&(i.prefix==="xmlns"&&(n=i.name),t.setAttributeNS(a,n,o))):(c=t.getAttribute(n),c!==o&&t.setAttribute(n,o));for(var d=t.attributes,p=d.length-1;p>=0;p--)i=d[p],n=i.name,a=i.namespaceURI,a?(n=i.localName||n,e.hasAttributeNS(a,n)||t.removeAttributeNS(a,n)):e.hasAttribute(n)||t.removeAttribute(n)}}var th,ES="http://www.w3.org/1999/xhtml",cs=typeof document=="undefined"?void 0:document,bS=!!cs&&"content"in cs.createElement("template"),IS=!!cs&&cs.createRange&&"createContextualFragment"in cs.createRange();function vS(t){var e=cs.createElement("template");return e.innerHTML=t,e.content.childNodes[0]}function _S(t){th||(th=cs.createRange(),th.selectNode(cs.body));var e=th.createContextualFragment(t);return e.childNodes[0]}function wS(t){var e=cs.createElement("body");return e.innerHTML=t,e.childNodes[0]}function TS(t){return t=t.trim(),bS?vS(t):IS?_S(t):wS(t)}function eh(t,e){var s=t.nodeName,i=e.nodeName,n,a;return s===i?!0:(n=s.charCodeAt(0),a=i.charCodeAt(0),n<=90&&a>=97?s===i.toUpperCase():a<=90&&n>=97?i===s.toUpperCase():!1)}function xS(t,e){return!e||e===ES?cs.createElement(t):cs.createElementNS(e,t)}function SS(t,e){for(var s=t.firstChild;s;){var i=s.nextSibling;e.appendChild(s),s=i}return e}function gp(t,e,s){t[s]!==e[s]&&(t[s]=e[s],t[s]?t.setAttribute(s,""):t.removeAttribute(s))}var ug={OPTION:function(t,e){var s=t.parentNode;if(s){var i=s.nodeName.toUpperCase();i==="OPTGROUP"&&(s=s.parentNode,i=s&&s.nodeName.toUpperCase()),i==="SELECT"&&!s.hasAttribute("multiple")&&(t.hasAttribute("selected")&&!e.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),s.selectedIndex=-1)}gp(t,e,"selected")},INPUT:function(t,e){gp(t,e,"checked"),gp(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),e.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var s=e.value;t.value!==s&&(t.value=s);var i=t.firstChild;if(i){var n=i.nodeValue;if(n==s||!s&&n==t.placeholder)return;i.nodeValue=s}},SELECT:function(t,e){if(!e.hasAttribute("multiple")){for(var s=-1,i=0,n=t.firstChild,a,o;n;)if(o=n.nodeName&&n.nodeName.toUpperCase(),o==="OPTGROUP")a=n,n=a.firstChild;else{if(o==="OPTION"){if(n.hasAttribute("selected")){s=i;break}i++}n=n.nextSibling,!n&&a&&(n=a.nextSibling,a=null)}t.selectedIndex=s}}},Fo=1,pg=11,mg=3,fg=8;function vn(){}function RS(t){if(t)return t.getAttribute&&t.getAttribute("id")||t.id}function CS(t){return function(s,i,n){if(n||(n={}),typeof i=="string")if(s.nodeName==="#document"||s.nodeName==="HTML"||s.nodeName==="BODY"){var a=i;i=cs.createElement("html"),i.innerHTML=a}else i=TS(i);else i.nodeType===pg&&(i=i.firstElementChild);var o=n.getNodeKey||RS,c=n.onBeforeNodeAdded||vn,h=n.onNodeAdded||vn,d=n.onBeforeElUpdated||vn,p=n.onElUpdated||vn,m=n.onBeforeNodeDiscarded||vn,b=n.onNodeDiscarded||vn,f=n.onBeforeElChildrenUpdated||vn,g=n.skipFromChildren||vn,v=n.addChild||function(N,k){return N.appendChild(k)},_=n.childrenOnly===!0,R=Object.create(null),w=[];function S(N){w.push(N)}function C(N,k){if(N.nodeType===Fo)for(var U=N.firstChild;U;){var Y=void 0;k&&(Y=o(U))?S(Y):(b(U),U.firstChild&&C(U,k)),U=U.nextSibling}}function L(N,k,U){m(N)!==!1&&(k&&k.removeChild(N),b(N),C(N,U))}function y(N){if(N.nodeType===Fo||N.nodeType===pg)for(var k=N.firstChild;k;){var U=o(k);U&&(R[U]=k),y(k),k=k.nextSibling}}y(s);function P(N){h(N);for(var k=N.firstChild;k;){var U=k.nextSibling,Y=o(k);if(Y){var z=R[Y];z&&eh(k,z)?(k.parentNode.replaceChild(z,k),F(z,k)):P(k)}else P(k);k=U}}function A(N,k,U){for(;k;){var Y=k.nextSibling;(U=o(k))?S(U):L(k,N,!0),k=Y}}function F(N,k,U){var Y=o(k);if(Y&&delete R[Y],!U){var z=d(N,k);if(z===!1||(z instanceof HTMLElement&&(N=z,y(N)),t(N,k),p(N),f(N,k)===!1))return}N.nodeName!=="TEXTAREA"?W(N,k):ug.TEXTAREA(N,k)}function W(N,k){var U=g(N,k),Y=k.firstChild,z=N.firstChild,ot,nt,lt,gt,Q;t:for(;Y;){for(gt=Y.nextSibling,ot=o(Y);!U&&z;){if(lt=z.nextSibling,Y.isSameNode&&Y.isSameNode(z)){Y=gt,z=lt;continue t}nt=o(z);var st=z.nodeType,rt=void 0;if(st===Y.nodeType&&(st===Fo?(ot?ot!==nt&&((Q=R[ot])?lt===Q?rt=!1:(N.insertBefore(Q,z),nt?S(nt):L(z,N,!0),z=Q,nt=o(z)):rt=!1):nt&&(rt=!1),rt=rt!==!1&&eh(z,Y),rt&&F(z,Y)):(st===mg||st==fg)&&(rt=!0,z.nodeValue!==Y.nodeValue&&(z.nodeValue=Y.nodeValue))),rt){Y=gt,z=lt;continue t}nt?S(nt):L(z,N,!0),z=lt}if(ot&&(Q=R[ot])&&eh(Q,Y))U||v(N,Q),F(Q,Y);else{var pt=c(Y);pt!==!1&&(pt&&(Y=pt),Y.actualize&&(Y=Y.actualize(N.ownerDocument||cs)),v(N,Y),P(Y))}Y=gt,z=lt}A(N,z,nt);var dt=ug[N.nodeName];dt&&dt(N,k)}var G=s,B=G.nodeType,X=i.nodeType;if(!_){if(B===Fo)X===Fo?eh(s,i)||(b(s),G=SS(s,xS(i.nodeName,i.namespaceURI))):G=i;else if(B===mg||B===fg){if(X===B)return G.nodeValue!==i.nodeValue&&(G.nodeValue=i.nodeValue),G;G=i}}if(G===i)b(s);else{if(i.isSameNode&&i.isSameNode(G))return;if(F(G,i,_),w)for(var M=0,q=w.length;M<q;M++){var j=R[w[M]];j&&L(j,j.parentNode,!1)}}return!_&&G!==s&&s.parentNode&&(G.actualize&&(G=G.actualize(s.ownerDocument||cs)),s.parentNode.replaceChild(G,s)),G}}var OS=CS(gS);function LS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var $S="start",AS="center",yS="end",MS=function(){function t(e){var s=e.itemCount,i=e.itemSizeGetter,n=e.estimatedItemSize;LS(this,t),this._itemSizeGetter=i,this._itemCount=s,this._estimatedItemSize=n,this._itemSizeAndPositionData={},this._lastMeasuredIndex=-1}return t.prototype.getLastMeasuredIndex=function(){return this._lastMeasuredIndex},t.prototype.getSizeAndPositionForIndex=function(s){if(s<0||s>=this._itemCount)throw Error("Requested index "+s+" is outside of range 0.."+this._itemCount);if(s>this._lastMeasuredIndex){for(var i=this.getSizeAndPositionOfLastMeasuredItem(),n=i.offset+i.size,a=this._lastMeasuredIndex+1;a<=s;a++){var o=this._itemSizeGetter({index:a});if(o==null||isNaN(o))throw Error("Invalid size returned for index "+a+" of value "+o);this._itemSizeAndPositionData[a]={offset:n,size:o},n+=o}this._lastMeasuredIndex=s}return this._itemSizeAndPositionData[s]},t.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this._lastMeasuredIndex>=0?this._itemSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}},t.prototype.getTotalSize=function(){var s=this.getSizeAndPositionOfLastMeasuredItem();return s.offset+s.size+(this._itemCount-this._lastMeasuredIndex-1)*this._estimatedItemSize},t.prototype.getUpdatedOffsetForIndex=function(s){var i=s.align,n=i===void 0?$S:i,a=s.containerSize,o=s.targetIndex;if(a<=0)return 0;var c=this.getSizeAndPositionForIndex(o),h=c.offset,d=h-a+c.size,p=void 0;switch(n){case yS:p=d;break;case AS:p=h-(a-c.size)/2;break;default:p=h;break}var m=this.getTotalSize();return Math.max(0,Math.min(m-a,p))},t.prototype.getVisibleRange=function(s){var i=s.containerSize,n=s.offset,a=s.overscanCount,o=this.getTotalSize();if(o===0)return{};var c=n+i,h=this._findNearestItem(n),d=h,p=this.getSizeAndPositionForIndex(h);for(n=p.offset+p.size;n<c&&d<this._itemCount-1;)d++,n+=this.getSizeAndPositionForIndex(d).size;return a&&(h=Math.max(0,h-a),d=Math.min(d+a,this._itemCount)),{start:h,stop:d}},t.prototype.resetItem=function(s){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,s-1)},t.prototype._binarySearch=function(s){for(var i=s.low,n=s.high,a=s.offset,o=void 0,c=void 0;i<=n;){if(o=i+Math.floor((n-i)/2),c=this.getSizeAndPositionForIndex(o).offset,c===a)return o;c<a?i=o+1:c>a&&(n=o-1)}if(i>0)return i-1},t.prototype._exponentialSearch=function(s){for(var i=s.index,n=s.offset,a=1;i<this._itemCount&&this.getSizeAndPositionForIndex(i).offset<n;)i+=a,a*=2;return this._binarySearch({high:Math.min(i,this._itemCount-1),low:Math.floor(i/2),offset:n})},t.prototype._findNearestItem=function(s){if(isNaN(s))throw Error("Invalid offset "+s+" specified");s=Math.max(0,s);var i=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this._lastMeasuredIndex);return i.offset>=s?this._binarySearch({high:n,low:0,offset:s}):this._exponentialSearch({index:n,offset:s})},t}();function NS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var PS="position:relative; overflow:hidden; width:100%; min-height:100%; will-change: transform;",DS="position:absolute; top:0; left:0; height:100%; width:100%; overflow:visible;",Jm=function(){function t(e,s){var i=this;NS(this,t),this.getRowHeight=function(n){var a=n.index,o=i.options.rowHeight;return typeof o=="function"?o(a):Array.isArray(o)?o[a]:o},this.container=e,this.options=s,this.state={},this._initializeSizeAndPositionManager(s.rowCount),this.render=this.render.bind(this),this.handleScroll=this.handleScroll.bind(this),this.componentDidMount()}return t.prototype.componentDidMount=function(){var s=this,i=this.options,n=i.onMount,a=i.initialScrollTop,o=i.initialIndex,c=i.height,h=a||o!=null&&this.getRowOffset(o)||0,d=this.inner=document.createElement("div"),p=this.content=document.createElement("div");d.setAttribute("style",PS),p.setAttribute("style",DS),d.appendChild(p),this.container.appendChild(d),this.setState({offset:h,height:c},function(){h&&(s.container.scrollTop=h),s.container.addEventListener("scroll",s.handleScroll),typeof n=="function"&&n()})},t.prototype._initializeSizeAndPositionManager=function(s){this._sizeAndPositionManager=new MS({itemCount:s,itemSizeGetter:this.getRowHeight,estimatedItemSize:this.options.estimatedRowHeight||100})},t.prototype.setState=function(){var s=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments[1];this.state=Object.assign(this.state,i),requestAnimationFrame(function(){s.render(),typeof n=="function"&&n()})},t.prototype.resize=function(s,i){this.setState({height:s},i)},t.prototype.handleScroll=function(s){var i=this.options.onScroll,n=this.container.scrollTop;this.setState({offset:n}),typeof i=="function"&&i(n,s)},t.prototype.getRowOffset=function(s){var i=this._sizeAndPositionManager.getSizeAndPositionForIndex(s),n=i.offset;return n},t.prototype.scrollToIndex=function(s,i){var n=this.state.height,a=this._sizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:n,targetIndex:s});this.container.scrollTop=a},t.prototype.setRowCount=function(s){this._initializeSizeAndPositionManager(s),this.render()},t.prototype.onRowsRendered=function(s){var i=this.options.onRowsRendered;typeof i=="function"&&i(s)},t.prototype.destroy=function(){this.container.removeEventListener("scroll",this.handleScroll),this.container.innerHTML=""},t.prototype.render=function(){for(var s=this.options,i=s.overscanCount,n=s.renderRow,a=this.state,o=a.height,c=a.offset,h=c===void 0?0:c,d=this._sizeAndPositionManager.getVisibleRange({containerSize:o,offset:h,overscanCount:i}),p=d.start,m=d.stop,b=document.createDocumentFragment(),f=p;f<=m;f++)b.appendChild(n(f));this.inner.style.height=this._sizeAndPositionManager.getTotalSize()+"px",this.content.style.top=this.getRowOffset(p)+"px",OS(this.content,b,{childrenOnly:!0,getNodeKey:function(v){return v.nodeIndex}}),this.onRowsRendered({startIndex:p,stopIndex:m})},t}();const FS=({fieldKey:t,formID:e,attr:s,styleClasses:i})=>{const n=D.useRef(null),a=D.useRef(null),c=J(Nt)[t],h=J(Gc),{options:d,ph:p}=c;return D.useEffect(()=>{const m=document.getElementById("bit-grid-layout").contentWindow;n!=null&&n.current||(n.current=St(`.${t}-country-fld-wrp`));const b=a.current,f=n.current;b&&f&&"destroy"in b&&b.destroy();const{selectedFlagImage:g,selectedCountryClearable:v,searchClearable:_,optionFlagImage:R,detectCountryByIp:w,detectCountryByGeo:S,defaultValue:C,searchPlaceholder:L,noCountryFoundText:y}=c.config;m.bit_virtualized_list||(m.bit_virtualized_list=Jm),m.observeElm||(m.observeElm=rp);const P={fieldKey:t,selectedFlagImage:g,selectedCountryClearable:v,searchClearable:_,optionFlagImage:R,detectCountryByIp:w,detectCountryByGeo:S,defaultValue:C,placeholder:p,searchPlaceholder:L,noCountryFoundText:y,options:d,assetsURL:`${h.assetsURL}/../static/countries/`,document:document.getElementById("bit-grid-layout").contentDocument,window:m,attributes:{option:bt(t,"option"),"opt-lbl-wrp":bt(t,"opt-lbl-wrp"),"opt-icn":bt(t,"opt-icn"),"opt-lbl":bt(t,"opt-lbl")},classNames:{option:x(t,"option"),"opt-lbl-wrp":x(t,"opt-lbl-wrp"),"opt-icn":x(t,"opt-icn"),"opt-lbl":x(t,"opt-lbl")}};a.current=new mS(f,P)},[c]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:i}),u.jsx(_t,{formID:e,fieldKey:t,fieldData:s,children:u.jsx("div",{className:`${t}-country-fld-container`,children:u.jsxs("div",O(I({"data-dev-country-fld-wrp":t,className:`${t}-country-fld-wrp ${x(t,"country-fld-wrp")} ${c.valid.disabled?"disabled":""} ${c.valid.readonly?"readonly":""}`,ref:n},$(t,"country-fld-wrp")),{children:[u.jsx("input",I(I({name:"country-name",type:"hidden",className:`${t}-country-hidden-input`},"disabled"in c.valid&&{disabled:c.valid.disabled}),"readonly"in c.valid&&{readOnly:c.valid.readonly})),u.jsxs("div",{"data-testid":`${t}-dpd-wrp`,className:`${t}-dpd-wrp`,"aria-live":"assertive","aria-label":"Select a Country",role:"combobox","aria-expanded":"false",tabIndex:c.valid.disabled?"-1":"0",children:[u.jsxs("div",{className:`${t}-selected-country-wrp`,children:[c.config.selectedFlagImage&&u.jsx("img",I({"data-dev-selected-country-img":t,className:`${t}-selected-country-img ${x(t,"selected-country-img")}`,"aria-hidden":"true",alt:"selected country flag",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},$(t,"selected-country-img"))),u.jsx("span",{"data-testid":`${t}-slctd-cntry-lbl`,"data-dev-selected-country-lbl":t,className:`${t}-selected-country-lbl`,children:p})]}),u.jsxs("div",{className:`${t}-dpd-btn-wrp`,children:[c.config.selectedCountryClearable&&u.jsx("button",O(I({"data-testid":`${t}-clr-slctd-cntry-btn`,type:"button",title:"Clear selected country value","data-dev-inp-clr-btn":t,className:`${t}-inp-clr-btn ${x(t,"inp-clr-btn")}`},$(t,"inp-clr-btn")),{children:u.jsxs("svg",{width:"15",height:"15",role:"img",title:"Cross icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})),u.jsx("div",{className:`${t}-dpd-down-btn`,children:u.jsx("svg",{width:"15",height:"15",viewBox:"0 0 24 24",title:"Cross icon",role:"img",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]}),u.jsx("div",O(I({className:`${t}-option-wrp  ${x(t,"option-wrp")}`,"data-dev-option-wrp":t},$(t,"option-search-wrp")),{children:u.jsxs("div",{className:`${t}-option-inner-wrp`,children:[u.jsxs("div",{className:`${t}-option-search-wrp`,"data-dev-option-search-wrp":t,children:[u.jsx("input",I({"data-testid":`${t}-opt-srch-inp`,type:"search","data-dev-opt-search-input":t,className:`${t}-opt-search-input ${x(t,"opt-search-input")}`,placeholder:c.config.searchPlaceholder,autoComplete:"country-name",tabIndex:"-1"},$(t,"opt-search-input"))),u.jsxs("svg",O(I({"data-dev-opt-search-icn":t,className:`${t}-opt-search-icn ${x(t,"opt-search-icn")}`,"aria-hidden":"true",width:"22",height:"22",role:"img",title:"Search icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},$(t,"opt-search-icn")),{children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),c.config.searchClearable&&u.jsx("button",O(I({"data-testid":`${t}-srch-clr-btn`,type:"button",title:"Clear search","data-dev-search-clear-btn":t,className:`${t}-search-clear-btn ${x(t,"search-clear-btn")}`,tabIndex:"-1"},$(t,"search-clear-btn")),{children:u.jsxs("svg",{width:"13",height:"13",role:"img",title:"Cross icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),u.jsx("ul",O(I({className:`${t}-option-list ${x(t,"option-list")}`,tabIndex:"-1",role:"listbox","aria-label":"country list","data-dev-option-list":t},$(t,"option-list")),{children:u.jsxs("li",{className:"option",children:[u.jsx("span",{className:"opt-prefix",children:"Prefix"}),u.jsxs("span",{className:"opt-lbl-wrp",children:[u.jsx("img",{className:"opt-icn",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"Placeholder"}),u.jsx("span",{className:"opt-lbl",children:"Option"})]}),u.jsx("span",{className:"opt-suffix",children:"Suffix"})]})}))]})}))]}))})})]})};var ud,Ue,Ae,qi,$n,Cl,ya,Yi,pd,Ve,Ol,vt,bi,Xi,Ll,Cr,Zs,Zi,An,Ma,Z,$l,Na,Al,md,sb,fd,ib,yl,Vp,Pa,hh,Ml,zp,gd,nb,Ed,rb,bd,ab,Da,dh,Kt,fe,ye,Ze,Id,ob,vd,lb,Or,zo,_d,cb,Lr,Wo,Fa,uh,Nl,Wp,ja,ph,Pl,Hp,wd,hb,Dl,qp,Fl,Yp,yn,Qr,ps,Bs,ka,mh,Et,It,Mn,Jr,Nn,Kr,Me,Qe,Am,kS,jl,Xp,kl,Zp,Gl,Qp,Td,db,xd,ub,Sd,pb,Pn,ta,Rd,mb,Bl,Jp,Cd,fb;class jS{constructor(e,s){E(this,md);E(this,fd);E(this,yl);E(this,Pa);E(this,Ml);E(this,gd);E(this,Ed);E(this,bd);E(this,Da);E(this,Kt);E(this,ye);E(this,Id);E(this,vd);E(this,Or);E(this,_d);E(this,Lr);E(this,Fa);E(this,Nl);E(this,ja);E(this,Pl);E(this,wd);E(this,Dl);E(this,Fl);E(this,yn);E(this,ps);E(this,ka);E(this,Et);E(this,Mn);E(this,Nn);E(this,Me);E(this,Am);E(this,jl);E(this,kl);E(this,Gl);E(this,Td);E(this,xd);E(this,Sd);E(this,Pn);E(this,Rd);E(this,Bl);E(this,Cd);E(this,ud,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");E(this,Ue,null);E(this,Ae,null);E(this,qi,null);E(this,$n,null);E(this,Cl,null);E(this,ya,null);E(this,Yi,null);E(this,pd,null);E(this,Ve,null);E(this,Ol,null);E(this,vt,null);E(this,bi,null);E(this,Xi,null);E(this,Ll,30);E(this,Cr,!1);E(this,Zs,[]);E(this,Zi,void 0);E(this,An,{});E(this,Ma,"");E(this,Z,{maxHeight:370,searchCurrencyPlaceholder:"Search Currency",noCurrencyFoundText:"No Currency Found",selectedCurrencyClearable:!0,searchClearable:!0,selectedFlagImage:!0,defaultCurrencyKey:"",defaultValue:"",optionFlagImage:!0,inputFormatOptions:{formatter:"browser",showCurrencySymbol:!0,decimalSeparator:"."},valueFormatOptions:{formatter:"browser",showCurrencySymbol:!0,decimalSeparator:"."},attributes:{},classNames:{},assetsURL:""});E(this,$l,null);E(this,Na,"");E(this,Al,[]);Object.assign(r(this,Z),s),T(this,An,s.window?s.window:window),T(this,Zi,s.document?s.document:document),typeof e=="string"?T(this,Ue,r(this,Zi).querySelector(e)):T(this,Ue,e),typeof r(this,Z).options=="string"&&(r(this,Z).options=l(this,md,sb).call(this,r(this,Z).options)),r(this,Z).options=r(this,Z).options.filter(i=>!i.hide),T(this,Zs,[...r(this,Z).options]),this.fieldKey=r(this,Z).fieldKey,T(this,Ma,s.assetsURL),this.init()}init(){T(this,Ol,l(this,Kt,fe).call(this,`.${this.fieldKey}-currency-inner-wrp`)),T(this,vt,l(this,Kt,fe).call(this,`.${this.fieldKey}-currency-amount-input`)),T(this,Ae,l(this,Kt,fe).call(this,`.${this.fieldKey}-currency-hidden-input`)),T(this,qi,l(this,Kt,fe).call(this,`.${this.fieldKey}-input-clear-btn`)),T(this,ya,l(this,Kt,fe).call(this,`.${this.fieldKey}-selected-currency-img`)),T(this,pd,l(this,Kt,fe).call(this,`.${this.fieldKey}-option-search-wrp`)),T(this,Ve,l(this,Kt,fe).call(this,`.${this.fieldKey}-opt-search-input`)),T(this,$n,l(this,Kt,fe).call(this,`.${this.fieldKey}-dpd-wrp`)),T(this,Cl,l(this,Kt,fe).call(this,`.${this.fieldKey}-option-wrp`)),T(this,bi,l(this,Kt,fe).call(this,`.${this.fieldKey}-search-clear-btn`)),T(this,Xi,l(this,Kt,fe).call(this,`.${this.fieldKey}-option-list`)),this.setMenu({open:!1}),l(this,ye,Ze).call(this,r(this,Ue),"keydown",e=>{l(this,vd,lb).call(this,e)}),l(this,ye,Ze).call(this,r(this,$n),"click",e=>{l(this,Bl,Jp).call(this,e)}),l(this,ye,Ze).call(this,r(this,$n),"keyup",e=>{l(this,Bl,Jp).call(this,e)}),l(this,ye,Ze).call(this,r(this,vt),"focus",()=>{l(this,fd,ib).call(this)}),l(this,ye,Ze).call(this,r(this,vt),"blur",()=>{l(this,Pa,hh).call(this)}),l(this,ye,Ze).call(this,r(this,vt),"input",e=>{l(this,wd,hb).call(this,e)}),r(this,Z).selectedCurrencyClearable&&l(this,ye,Ze).call(this,r(this,qi),"click",e=>{l(this,_d,cb).call(this,e)}),r(this,An).observeElm(r(this,Ae),"value",(e,s)=>{l(this,Pl,Hp).call(this,e,s)}),r(this,Z).defaultValue&&l(this,Id,ob).call(this),!r(this,Z).defaultValue&&r(this,Z).defaultCurrencyKey&&this.setSelectedCurrencyItem(r(this,Z).defaultCurrencyKey),l(this,ye,Ze).call(this,r(this,Xi),"scroll",e=>{e.stopPagination()}),r(this,Z).searchClearable&&(l(this,Me,Qe).call(this,r(this,Ve),"padding-right","35px"),l(this,Me,Qe).call(this,r(this,bi),"display","none"),l(this,ye,Ze).call(this,r(this,bi),"click",()=>{this.searchOptions("")})),r(this,Ve).value="",l(this,ye,Ze).call(this,r(this,Ve),"keyup",e=>{l(this,xd,ub).call(this,e)})}setSelectedCurrencyItem(e){if(T(this,Yi,e),!r(this,Yi)){l(this,kl,Zp).call(this);return}const s=l(this,Fl,Yp).call(this);s&&(r(this,Z).selectedFlagImage&&(r(this,ya).src=`${r(this,Ma)}${s.img}`),this.setMenu({open:!1}),l(this,Pa,hh).call(this),r(this,Cr)&&(!this.value&&r(this,vt).focus(),T(this,Cr,!1)))}isValidated(){return l(this,Sd,pb).call(this,{target:r(this,vt)})}searchOptions(e){l(this,Td,db).call(this,e);let s=[];e?(s=r(this,Z).options.filter(i=>{const n=e.toLowerCase(),a=(i.lbl||"").toLowerCase(),o=(i.val||"").toLowerCase(),c=(i.i||"").toLowerCase();if(a.includes(n)||o.includes(n)||c.includes(n))return!0}),s.length||(s=[{i:0,lbl:r(this,Z).noCurrencyFoundText}]),T(this,Zs,s),r(this,Z).searchClearable&&l(this,Me,Qe).call(this,r(this,bi),"display","grid")):(T(this,Zs,r(this,Z).options),r(this,Z).searchClearable&&l(this,Me,Qe).call(this,r(this,bi),"display","none")),l(this,Gl,Qp).call(this)}setMenu({open:e}){l(this,Me,Qe).call(this,r(this,Cl),"max-height",`${e?r(this,Z).maxHeight:0}px`),e?(l(this,Rd,mb).call(this),l(this,ps,Bs).call(this,r(this,Ue),"menu-open"),l(this,ye,Ze).call(this,r(this,Zi),"click",s=>l(this,Nl,Wp).call(this,s)),l(this,Et,It).call(this,r(this,Ve),"tabindex",0),l(this,Et,It).call(this,r(this,bi),"tabindex",0),l(this,Et,It).call(this,r(this,$n),"aria-expanded",!0),l(this,Gl,Qp).call(this)):(r(this,Ue).classList.remove("menu-open"),r(this,Zi).removeEventListener("click",l(this,Nl,Wp)),setTimeout(()=>{this.searchOptions("")},100),l(this,Et,It).call(this,r(this,Ve),"tabindex",-1),l(this,Et,It).call(this,r(this,bi),"tabindex",-1),l(this,Et,It).call(this,r(this,$n),"aria-expanded",!1))}set value(e){r(this,Ae).value=e||"",l(this,Et,It).call(this,r(this,Ae),"value",e||"")}get value(){return r(this,Ae).value}destroy(){r(this,Xi).innerHTML="",this.value=r(this,Z).defaultValue,l(this,Cd,fb).call(this)}reset(){l(this,kl,Zp).call(this),this.destroy(),this.init()}}ud=new WeakMap,Ue=new WeakMap,Ae=new WeakMap,qi=new WeakMap,$n=new WeakMap,Cl=new WeakMap,ya=new WeakMap,Yi=new WeakMap,pd=new WeakMap,Ve=new WeakMap,Ol=new WeakMap,vt=new WeakMap,bi=new WeakMap,Xi=new WeakMap,Ll=new WeakMap,Cr=new WeakMap,Zs=new WeakMap,Zi=new WeakMap,An=new WeakMap,Ma=new WeakMap,Z=new WeakMap,$l=new WeakMap,Na=new WeakMap,Al=new WeakMap,md=new WeakSet,sb=function(e){const s=e.split("->");let i=r(this,An);return s.forEach(n=>{i=i[n]}),i},fd=new WeakSet,ib=function(){l(this,Et,It).call(this,r(this,vt),"type","number"),r(this,vt).value=r(this,vt).dataset.numValue||""},yl=new WeakSet,Vp=function(e,s=0){const i=df(10,s||0);return Math.round(e*i)/i},Pa=new WeakSet,hh=function(){l(this,Et,It).call(this,r(this,vt),"type","text");const e=Number(r(this,vt).dataset.numValue);if(r(this,vt).dataset.numValue===""||Number.isNaN(e)){r(this,vt).value="",r(this,Ae).value="",l(this,Et,It).call(this,r(this,Ae),"value",""),l(this,Or,zo).call(this,r(this,Ae),"blur");return}const{inputFormatOptions:s,valueFormatOptions:i}=r(this,Z),n=l(this,Ml,zp).call(this,e,s);r(this,vt).value=n,this.value=l(this,Ml,zp).call(this,e,i),l(this,Or,zo).call(this,r(this,Ae),"blur")},Ml=new WeakSet,zp=function(e,s){const i=l(this,Fl,Yp).call(this),{defaultCurrencyKey:n}=r(this,Z),{formatter:a,roundToClosestInteger:o,showCurrencySymbol:c,currencyPosition:h,symbolPosition:d}=s,p=(i==null?void 0:i.i)||n;if(!p)return e;o&&(e=l(this,yl,Vp).call(this,e));let m="";return a==="browser"?m=l(this,gd,nb).call(this,e,p,s):a==="custom"||!a?m=l(this,Ed,rb).call(this,e,s):a==="none"&&(m=e),d==="left-number"?m=`${(i==null?void 0:i.symbol)||""}${m}`:d==="right-number"&&(m=`${m}${(i==null?void 0:i.symbol)||""}`),c&&(h==="left"?m=`${c?`${p} `:""}${m}`:h==="right"&&(m=`${m}${c?` ${p}`:""}`)),d==="left-currency"?m=`${(i==null?void 0:i.symbol)||""}${m}`:d==="right-currency"&&(m=`${m}${(i==null?void 0:i.symbol)||""}`),m},gd=new WeakSet,nb=function(e,s,i){const{showCurrencySymbol:n,roundToClosestInteger:a}=i;return new Intl.NumberFormat(navigator.language,{style:"currency",currency:s}).formatToParts(e).map(h=>!n&&h.type==="currency"||a&&(h.type==="decimal"||h.type==="fraction")?"":h.value).join("")},Ed=new WeakSet,rb=function(e,s){const{decimalSeparator:i,roundToClosestFractionDigits:n,minimumFractionDigits:a=0,maximumFractionDigits:o=0,numberFormat:c=""}=s,[h]=c.split(i),[d,p=""]=e.toString().split("."),m=l(this,bd,ab).call(this,d,h);let b=p;const f=b.length;if(f>0){const v=o>0,_=a>0;if(n&&b){let R;v&&f>o?R=o:_&&f<a?R=a:R=f,b=l(this,yl,Vp).call(this,+`0.${b}`,R).toString().replace("0.","")}v&&b&&(b=b.slice(0,o))}b.length<a&&(b=b.padEnd(a,"0"));let g="";return b?g=`${m}${i}${b}`:g=m,g},bd=new WeakSet,ab=function(e="",s=""){let i="",n=e.length-1;for(let a=s.length-1;a>=0;a--){const o=s[a],c=e[n];if(!c)break;o==="#"?(i=c+i,n--):i=o+i}return n>=0&&(i=e.substring(0,n+1)+i),i},Da=new WeakSet,dh=function(e=""){const{decimalSeparator:s}=r(this,Z).valueFormatOptions,i=new RegExp(`[^0-9${s}]`,"g");return e.replace(i,"")},Kt=new WeakSet,fe=function(e){return r(this,Ue).querySelector(e)},ye=new WeakSet,Ze=function(e,s,i){e.addEventListener(s,i),r(this,Al).push({selector:e,eventType:s,cb:i})},Id=new WeakSet,ob=function(){r(this,vt).dataset.numValue=l(this,Da,dh).call(this,r(this,Z).defaultValue),l(this,Pl,Hp).call(this,"",r(this,Z).defaultValue),r(this,Z).selectedCurrencyClearable&&l(this,Me,Qe).call(this,r(this,qi),"display","grid")},vd=new WeakSet,lb=function(e){var a,o;const s=r(this,Zi).activeElement;let i=null;const n=l(this,Pn,ta).call(this);if(e.target!==r(this,vt)){if(n){const c=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Ve))i=l(this,Kt,fe).call(this,".option:not(.disabled-opt)");else if(s.classList.contains("option")){const h=l(this,Fa,uh).call(this,c,"next"),d=l(this,Lr,Wo).call(this,h);d?i=d:h+1<r(this,Zs).length&&((a=this.virtualOptionList)==null||a.scrollToIndex(h),setTimeout(()=>{const p=l(this,Lr,Wo).call(this,h);p&&p.focus()},50))}}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Ve))i=r(this,vt),l(this,Pn,ta).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){const h=l(this,Fa,uh).call(this,c,"previous"),d=l(this,Lr,Wo).call(this,h);d?i=d:h>0?((o=this.virtualOptionList)==null||o.scrollToIndex(h),setTimeout(()=>{const p=l(this,Lr,Wo).call(this,h);p&&p.focus()},50)):d||(i=r(this,Ve))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,$l)),T(this,Na,r(this,Na)+e.key),T(this,$l,setTimeout(()=>{T(this,Na,"")},300));const c=r(this,Z).options.find(h=>!h.disabled&&h.lbl.toLowerCase().startsWith(r(this,Na)));c&&this.setSelectedCurrencyItem(c.i)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();const c=l(this,Dl,qp).call(this),h=e.key==="ArrowDown"?"next":"previous",d=l(this,Fa,uh).call(this,c,h);d>-1&&d<r(this,Z).options.length&&(this.value=r(this,Z).options[d].val)}i&&i.focus()}},Or=new WeakSet,zo=function(e,s){const i=new Event(s);e.dispatchEvent(i)},_d=new WeakSet,cb=function(){r(this,vt).value="",l(this,Et,It).call(this,r(this,Ae),"value",""),l(this,Et,It).call(this,r(this,vt),"data-num-value",""),this.setSelectedCurrencyItem(r(this,Z).defaultCurrencyKey),l(this,Or,zo).call(this,r(this,vt),"input"),this.value="",l(this,Or,zo).call(this,r(this,Ae),"blur")},Lr=new WeakSet,Wo=function(e){return l(this,Kt,fe).call(this,`.${this.fieldKey}-option-list .option[data-index="${e}"]`)},Fa=new WeakSet,uh=function(e=-1,s){if(s==="next"){const i=r(this,Z).options.length;for(let n=e+1;n<i;n++)if(!r(this,Z).options[n].disabled)return n}else if(s==="previous"){for(let i=e-1;i>=0;i--)if(!r(this,Z).options[i].disabled)return i}},Nl=new WeakSet,Wp=function(e){r(this,Ue).contains(e.target)||this.setMenu({open:!1})},ja=new WeakSet,ph=function(e){var s;return((s=e==null?void 0:e.match(/[a-zA-Z]+/))==null?void 0:s[0])||""},Pl=new WeakSet,Hp=function(e,s){const i=l(this,ja,ph).call(this,s),n=r(this,Z).options.find(a=>a.i===i);if((i&&n||!i&&r(this,Z).defaultCurrencyKey)&&e!==s){const a=l(this,ja,ph).call(this,r(this,Z).defaultValue);this.setSelectedCurrencyItem(i||a||r(this,Z).defaultCurrencyKey);const{decimalSeparator:o}=r(this,Z).valueFormatOptions,[c,h]=s.split(o),d=l(this,Da,dh).call(this,c),p=l(this,Da,dh).call(this,h),m=p?`${d}.${p}`:d;l(this,Et,It).call(this,r(this,vt),"data-num-value",m),l(this,Pa,hh).call(this)}typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,Ae)})},wd=new WeakSet,hb=function(e){const s=Number(e.target.value);l(this,Et,It).call(this,r(this,vt),"data-num-value",s||""),r(this,Z).selectedCurrencyClearable&&(s?l(this,Me,Qe).call(this,r(this,qi),"display","grid"):l(this,Me,Qe).call(this,r(this,qi),"display","none"))},Dl=new WeakSet,qp=function(){const e=r(this,Zs).findIndex(s=>s.i===r(this,Yi));return e===-1?0:e},Fl=new WeakSet,Yp=function(){return r(this,Z).options.find(e=>e.i===r(this,Yi))},yn=new WeakSet,Qr=function(e){return r(this,Zi).createElement(e)},ps=new WeakSet,Bs=function(e,s){e.classList.add(s)},ka=new WeakSet,mh=function(e,s){e.textContent=s},Et=new WeakSet,It=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Mn=new WeakSet,Jr=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,ps,Bs).call(this,e,i))},Nn=new WeakSet,Kr=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,Et,It).call(this,e,s[n].key,s[n].value)},Me=new WeakSet,Qe=function(e,s,i){e.style.setProperty(s,i,"important")},Am=new WeakSet,kS=function(){const e=l(this,Kt,fe).call(this,".option");if(!e)return;const s=r(this,An).getComputedStyle(e),i=parseFloat(s.marginTop)+parseFloat(s.marginBottom),n=e.offsetHeight+i||0;n!==r(this,Ll)&&(T(this,Ll,n),r(this,Xi).innerHTML="",l(this,jl,Xp).call(this))},jl=new WeakSet,Xp=function(){r(this,Xi).innerHTML="";const e=r(this,Zs).map((s,i)=>{const n=l(this,yn,Qr).call(this,"li");if(l(this,Et,It).call(this,n,"data-key",s.i),l(this,Et,It).call(this,n,"data-index",i),"option"in r(this,Z).attributes){const h=r(this,Z).attributes.option;l(this,Nn,Kr).call(this,n,h)}if(!s.i)return l(this,ka,mh).call(this,n,s.lbl),l(this,ps,Bs).call(this,n,"opt-not-found"),n;if(l(this,ps,Bs).call(this,n,"option"),"option"in r(this,Z).classNames){const h=r(this,Z).classNames.option;h&&l(this,Mn,Jr).call(this,n,h)}const a=l(this,yn,Qr).call(this,"span");if("opt-lbl-wrp"in r(this,Z).attributes){const h=r(this,Z).attributes["opt-lbl-wrp"];l(this,Nn,Kr).call(this,a,h)}if(l(this,ps,Bs).call(this,a,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,Z).classNames){const h=r(this,Z).classNames["opt-lbl-wrp"];h&&l(this,Mn,Jr).call(this,a,h)}if(r(this,Z).optionFlagImage){const h=l(this,yn,Qr).call(this,"img");if("opt-icn"in r(this,Z).attributes){const d=r(this,Z).attributes["opt-icn"];l(this,Nn,Kr).call(this,h,d)}if(l(this,ps,Bs).call(this,h,"opt-icn"),"opt-icn"in r(this,Z).classNames){const d=r(this,Z).classNames["opt-icn"];d&&l(this,Mn,Jr).call(this,h,d)}h.src=`${r(this,Ma)}${s.img}`,h.alt=`${s.lbl} flag image`,h.loading="lazy",l(this,Et,It).call(this,h,"aria-hidden",!0),a.append(h)}const o=l(this,yn,Qr).call(this,"span");if("opt-lbl"in r(this,Z).attributes){const h=r(this,Z).attributes["opt-lbl"];l(this,Nn,Kr).call(this,o,h)}if(l(this,ps,Bs).call(this,o,"opt-lbl"),"opt-lbl"in r(this,Z).classNames){const h=r(this,Z).classNames["opt-lbl"];h&&l(this,Mn,Jr).call(this,o,h)}l(this,ka,mh).call(this,o,s.lbl),a.append(o);const c=l(this,yn,Qr).call(this,"span");if("opt-suffix"in r(this,Z).attributes){const h=r(this,Z).attributes["opt-suffix"];l(this,Nn,Kr).call(this,c,h)}if(l(this,ps,Bs).call(this,c,"opt-suffix"),"opt-suffix"in r(this,Z).classNames){const h=r(this,Z).classNames["opt-suffix"];h&&l(this,Mn,Jr).call(this,c,h)}return l(this,ka,mh).call(this,c,s.i),l(this,Et,It).call(this,n,"tabindex",l(this,Pn,ta).call(this)?"0":"-1"),l(this,Et,It).call(this,n,"role","option"),l(this,Et,It).call(this,n,"aria-posinset",i+1),l(this,Et,It).call(this,n,"aria-setsize",r(this,Zs).length),l(this,ye,Ze).call(this,n,"click",h=>{T(this,Cr,!0),this.setSelectedCurrencyItem(h.currentTarget.dataset.key)}),l(this,ye,Ze).call(this,n,"keyup",h=>{h.key==="Enter"&&(T(this,Cr,!0),this.setSelectedCurrencyItem(h.currentTarget.dataset.key))}),s.disabled&&l(this,ps,Bs).call(this,n,"disabled-opt"),n.append(a,c),r(this,Yi)===s.i?(l(this,ps,Bs).call(this,n,"selected-opt"),l(this,Et,It).call(this,n,"aria-selected",!0)):l(this,Et,It).call(this,n,"aria-selected",!1),n});r(this,Xi).append(...e)},kl=new WeakSet,Zp=function(){const e=l(this,ja,ph).call(this,r(this,Z).defaultValue);T(this,Yi,e||r(this,Z).defaultCurrencyKey||""),r(this,Z).selectedFlagImage&&(r(this,ya).src=r(this,ud)),this.setMenu({open:!1}),l(this,Et,It).call(this,r(this,vt),"data-num-value",""),r(this,Z).selectedCurrencyClearable&&l(this,Me,Qe).call(this,r(this,qi),"display","none"),l(this,Et,It).call(this,r(this,Ae),"value",r(this,Z).defaultValue)},Gl=new WeakSet,Qp=function(){if(!l(this,Pn,ta).call(this))return;l(this,jl,Xp).call(this);const e=l(this,Dl,qp).call(this),s=l(this,Kt,fe).call(this,`.option[data-index="${e}"]`);s&&s.scrollIntoView({block:"nearest",inline:"nearest"})},Td=new WeakSet,db=function(e){r(this,Ve).value=e},xd=new WeakSet,ub=function(e){var s;if(e.key==="Enter"&&r(this,Zs).length){const i=(s=l(this,Kt,fe).call(this,".option"))==null?void 0:s.dataset.key;this.setSelectedCurrencyItem(i),this.searchOptions("")}else this.searchOptions(e.target.value)},Sd=new WeakSet,pb=function(e){var a,o;if(e.target.value==="")return"required";const s=Number((o=(a=e.target.value)==null?void 0:a.match(/[0-9.]+/))==null?void 0:o[0]),{minValue:i,maxValue:n}=r(this,Z);return i!==""&&s<i?"minValue":n!==""&&s>n?"maxValue":""},Pn=new WeakSet,ta=function(){return r(this,Ue).classList.contains("menu-open")},Rd=new WeakSet,mb=function(){const e=r(this,Ol).getBoundingClientRect(),s=e.top,i=r(this,An).innerHeight-e.bottom;i<s&&i<r(this,Z).maxHeight?(l(this,Me,Qe).call(this,r(this,Ue),"flex-direction","column-reverse"),l(this,Me,Qe).call(this,r(this,Ue),"bottom","0%")):(l(this,Me,Qe).call(this,r(this,Ue),"flex-direction","column"),l(this,Me,Qe).call(this,r(this,Ue),"bottom","auto"))},Bl=new WeakSet,Jp=function(e){e.code==="Space"&&(r(this,Ve).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,Pn,ta).call(this)?this.setMenu({open:!1}):(r(this,Ve).focus(),this.setMenu({open:!0})))},Cd=new WeakSet,fb=function(){r(this,Al).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};const GS=({fieldKey:t,formID:e,attr:s,onBlurHandler:i,contentID:n,styleClasses:a})=>{const o=D.useRef(null),c=D.useRef(null),d=J(Nt)[t],p=J(Gc),{selectedFlagImage:m,selectedCurrencyClearable:b,searchClearable:f,optionFlagImage:g,defaultCurrencyKey:v,searchPlaceholder:_,noCurrencyFoundText:R,defaultValue:w}=d.config;return D.useEffect(()=>{const S=document.getElementById("bit-grid-layout").contentWindow;o!=null&&o.current||(o.current=St(`.${t}-currency-fld-wrp`));const C=c.current,L=o.current;C&&L&&"destroy"in C&&C.destroy();const{options:y,inputFormatOptions:P,valueFormatOptions:A}=d,F={fieldKey:t,inputFormatOptions:P,valueFormatOptions:A,selectedFlagImage:m,selectedCurrencyClearable:b,searchClearable:f,optionFlagImage:g,defaultCurrencyKey:v,defaultValue:w,searchPlaceholder:_,noCurrencyFoundText:R,options:y,assetsURL:`${p.assetsURL}/../static/currencies/`,document:document.getElementById("bit-grid-layout").contentDocument,window:S,attributes:{option:bt(t,"option"),"opt-lbl-wrp":bt(t,"opt-lbl-wrp"),"opt-icn":bt(t,"opt-icn"),"opt-lbl":bt(t,"opt-lbl"),"opt-suffix":bt(t,"opt-suffix")},classNames:{option:x(t,"option"),"opt-lbl-wrp":x(t,"opt-lbl-wrp"),"opt-icn":x(t,"opt-icn"),"opt-lbl":x(t,"opt-lbl"),"opt-suffix":x(t,"opt-suffix")}};S.bit_virtualized_list||(S.bit_virtualized_list=Jm),S.observeElm||(S.observeElm=rp),c.current=new jS(L,F)},[d]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:a}),u.jsx(_t,{formID:e,fieldKey:t,fieldData:s,children:u.jsx("div",{className:`${t}-currency-fld-container`,children:u.jsxs("div",O(I({"data-dev-currency-fld-wrp":t,className:`${t}-currency-fld-wrp ${x(t,"currency-fld-wrp")} ${d.valid.disabled?"disabled":""} ${d.valid.readonly?"readonly":""}`,ref:o},$(t,"currency-fld-wrp")),{children:[u.jsx("input",I(I({name:t,type:"hidden",className:`${t}-currency-hidden-input`},"disabled"in d.valid&&{disabled:d.valid.disabled}),"readonly"in d.valid&&{readOnly:d.valid.readonly})),u.jsxs("div",{className:`${t}-currency-inner-wrp`,children:[u.jsxs("div",{"data-testid":`${t}-dpd-wrp`,className:`${t}-dpd-wrp`,"data-dev-dpd-wrp":t,role:"combobox","aria-controls":"currency-dropdown","aria-live":"assertive","aria-labelledby":"currency-label-2","aria-expanded":"false",tabIndex:d.valid.disabled?"-1":"0",children:[m&&u.jsx("div",{className:`${t}-selected-currency-wrp`,children:u.jsx("img",I({"data-dev-selected-currency-img":t,alt:"Selected currency image","aria-hidden":"true",className:`${t}-selected-currency-img ${x(t,"selected-currency-img")}`,src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},$(t,"selected-currency-img")))}),u.jsx("div",{className:`${t}-dpd-down-btn`,children:u.jsx("svg",{width:"15",height:"15",role:"img",title:"Downarrow icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),u.jsx("input",O(I({"data-dev-currency-amount-input":t,"data-testid":`${t}-crncy-amnt-inp`,"aria-label":"Currency Input",type:"text"},"ph"in s&&{placeholder:s.ph}),{className:`${t}-currency-amount-input`,tabIndex:d.valid.disabled?"-1":"0"})),b&&u.jsx("button",O(I({"data-testid":`${t}-inp-clr-btn`,"data-dev-input-clear-btn":t,type:"button",title:"Clear value",className:`${t}-input-clear-btn ${x(t,"input-clear-btn")}`},$(t,"input-clear-btn")),{children:u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),u.jsx("div",O(I({className:`${t}-option-wrp  ${x(t,"option-wrp")}`,"data-dev-option-wrp":t},$(t,"option-search-wrp")),{children:u.jsxs("div",{className:`${t}-option-inner-wrp`,children:[u.jsxs("div",O(I({"data-dev-option-search-wrp":t,className:`${t}-option-search-wrp ${x(t,"option-search-wrp")}`},$(t,"option-search-wrp")),{children:[u.jsx("input",I({"data-testid":`${t}-opt-srch-inp`,"data-dev-opt-search-input":t,type:"search",className:`${t}-opt-search-input ${x(t,"opt-search-input")}`,placeholder:d.config.searchPlaceholder,autoComplete:"off",tabIndex:"-1"},$(t,"opt-search-input"))),u.jsxs("svg",O(I({className:`${t}-opt-search-icn ${x(t,"opt-search-icn")}`,"data-dev-opt-search-icn":t,"aria-hidden":"true",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},$(t,"opt-search-icn")),{children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),f&&u.jsx("button",O(I({"data-testid":`${t}-srch-clr-btn`,"data-dev-search-clear-btn":t,type:"button","aria-label":"Clear search",className:`${t}-search-clear-btn ${x(t,"search-clear-btn")}`,tabIndex:"-1"},$(t,"search-clear-btn")),{children:u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]})),u.jsx("ul",O(I({className:`${t}-option-list ${x(t,"option-list")}`,tabIndex:"-1",role:"listbox","aria-label":"currency list","data-dev-option-list":t},$(t,"option-list")),{children:u.jsxs("li",{className:"option",children:[u.jsx("span",{className:"opt-prefix",children:"Prefix"}),u.jsxs("span",{className:"opt-lbl-wrp",children:[u.jsx("img",{className:"opt-icn",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"Placeholder"}),u.jsx("span",{className:"opt-lbl",children:"Option"})]}),u.jsx("span",{className:"opt-suffix",children:"Suffix"})]})}))]})}))]}))})})]})};function BS({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:a}){var m,b;let{checked:o}=t.valid;const c=t.val||(o?t.msg.checked:t.msg.unchecked),[h,d]=D.useState(c);h===t.msg.unchecked?o=!1:h===t.msg.checked&&(o=!0);const p=f=>{if(t.valid.disabled)return;f.target.checked?d(t.msg.checked):d(t.msg.unchecked);const{form:g}=f.target;validateForm({input:{name:t.name,form:g,value:f.target.checked?t.msg.checked:t.msg.unchecked}})};return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:a}),u.jsx(_t,{formID:i,fieldKey:n,fieldData:t,noLabel:!0,children:u.jsxs("div",O(I({"data-dev-cc":n,className:`${n}-cc ${x(n,"cc")}`},$(n,"cc")),{children:[u.jsx("svg",{className:`${n}-cks`,children:u.jsx("symbol",{id:`${n}-ck-svg`,viewBox:"0 0 12 10",children:u.jsx("polyline",{className:`${n}-ck-svgline`,points:"1.5 6 4.5 9 10.5 1"})})}),u.jsxs("div",O(I({"data-dev-cw":n,className:`${n}-cw ${x(n,"cw")}`},$(n,"cw")),{children:[u.jsx("input",O(I(O(I(I(I({"data-testid":n,id:`${n}-decision`,type:"checkbox",className:`${n}-ci`},"req"in t.valid&&{required:t.valid.req}),"disabled"in t.valid&&{disabled:t.valid.disabled}),"readonly"in t.valid&&{readOnly:t.valid.readonly}),{defaultValue:(m=t==null?void 0:t.info)==null?void 0:m.lbl}),"name"in t&&{name:t.name}),{checked:o,value:h,onChange:p})),u.jsxs("label",O(I({"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-decision`,className:`${n}-cl ${x(n,"cl")}`},$(n,"cl")),{children:[u.jsx("span",O(I({"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${x(n,"bx")}`},$(n,"bx")),{children:u.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp`,children:u.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn`})})})),u.jsx("span",O(I({"data-dev-ct":n,className:`${n}-ct ${x(n,"ct")}`},$(n,"ct")),{children:u.jsx(Fe,{html:t.lbl||((b=t==null?void 0:t.info)==null?void 0:b.lbl)})}))]}))]}))]}))})]})}function US({fieldKey:t,styleClasses:e,attr:s}){var o,c;const i=J(sr),{styleMode:n}=J(je),a=((c=(o=s.valid)==null?void 0:o.hidden)==null?void 0:c.includes(i))||!1;return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:e}),u.jsx("div",O(I({"data-dev-fld-wrp":t,className:`${t}-fld-wrp drag ${n?"":"drag"} ${a?"fld-hide":""} ${x(t,"fld-wrp")}`},$(t,"fld-wrp")),{children:u.jsx("div",I({"data-dev-divider":t,className:`${t}-divider ${x(t,"divider")}`},$(t,"divider")))}))]})}var Rt,$r,Ut,we,Ga,Te,Od,xe,Qi,$s,Ii,As,ms,Qs,Js,ce,vi,Ct,Ji,Ba,Dn,H,Ul,Ua,Vl,zl,Kp,Dt,Xt,Wl,tm,he,Oe,Ki,ar,Ld,gb,Va,fh,$d,Eb,Ar,Ho,za,gh,Ad,bb,tn,or,yd,Ib,Wa,Eh,Fn,ea,Hl,em,ql,sm,_i,_n,Ha,bh,Md,vb,ys,hi,de,Le,xt,Ot,en,lr,qa,Ih,Yl,im,Ks,Gi,te,ge,Xl,nm,Zl,rm,yr,qo,sn,cr,Ql,am,Nd,_b,Pd,wb,$t,Bt,ti,Bi,ze,hs,Dd,Tb,Fd,xb,Ya,vh,jd,Sb,Jl,om,jn,sa,kd,Rb,Kl,lm,Gd,Cb,Bd,Ob;class VS{constructor(e,s){E(this,zl);E(this,Dt);E(this,Wl);E(this,he);E(this,Ki);E(this,Ld);E(this,Va);E(this,$d);E(this,Ar);E(this,za);E(this,Ad);E(this,tn);E(this,yd);E(this,Wa);E(this,Fn);E(this,Hl);E(this,ql);E(this,_i);E(this,Ha);E(this,Md);E(this,ys);E(this,de);E(this,xt);E(this,en);E(this,qa);E(this,Yl);E(this,Ks);E(this,te);E(this,Xl);E(this,Zl);E(this,yr);E(this,sn);E(this,Ql);E(this,Nd);E(this,Pd);E(this,$t);E(this,ti);E(this,ze);E(this,Dd);E(this,Fd);E(this,Ya);E(this,jd);E(this,Jl);E(this,jn);E(this,kd);E(this,Kl);E(this,Gd);E(this,Bd);E(this,Rt,null);E(this,$r,null);E(this,Ut,null);E(this,we,null);E(this,Ga,null);E(this,Te,null);E(this,Od,null);E(this,xe,null);E(this,Qi,null);E(this,$s,null);E(this,Ii,null);E(this,As,!1);E(this,ms,null);E(this,Qs,null);E(this,Js,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");E(this,ce,"");E(this,vi,[]);E(this,Ct,[]);E(this,Ji,null);E(this,Ba,{});E(this,Dn,!1);E(this,H,{separator:",",selectedOptImage:!1,dropdownIcn:"",selectedOptClearable:!0,searchClearable:!0,optionIcon:!0,defaultValue:"",placeholder:"Select an option",searchPlaceholder:"Search option",maxHeight:370,closeOnSelect:!1,showChip:!0,options:[],attributes:{},classNames:{},activeList:0,onChange:()=>{}});E(this,Ul,null);E(this,Ua,"");E(this,Vl,[]);Object.assign(r(this,H),s),T(this,Ji,s.document?s.document:document),T(this,Ba,s.window?s.window:window),typeof e=="string"?T(this,Rt,r(this,Ji).querySelector(e)):T(this,Rt,e),this.fieldKey=r(this,H).fieldKey,this.init()}init(){T(this,Ut,l(this,Dt,Xt).call(this,`.${this.fieldKey}-dpd-hidden-input`)),T(this,we,l(this,Dt,Xt).call(this,`.${this.fieldKey}-opt-search-input`)),T(this,Ga,l(this,Dt,Xt).call(this,`.${this.fieldKey}-option-wrp`)),T(this,Te,l(this,Dt,Xt).call(this,`.${this.fieldKey}-dpd-wrp`)),T(this,Od,l(this,Dt,Xt).call(this,`.${this.fieldKey}-selected-opt-wrp`)),T(this,xe,l(this,Dt,Xt).call(this,`.${this.fieldKey}-selected-opt-img`)),T(this,Qi,l(this,Dt,Xt).call(this,`.${this.fieldKey}-selected-opt-lbl`)),T(this,$s,l(this,Dt,Xt).call(this,`.${this.fieldKey}-selected-opt-clear-btn`)),T(this,Ii,r(this,H).searchClearable?l(this,Dt,Xt).call(this,`.${this.fieldKey}-search-clear-btn`):{}),l(this,he,Oe).call(this,r(this,Te),"click",e=>{l(this,Kl,lm).call(this,e)}),l(this,he,Oe).call(this,r(this,Te),"keyup",e=>{l(this,Kl,lm).call(this,e)}),l(this,he,Oe).call(this,r(this,Te),"blur",e=>{l(this,Gd,Cb).call(this,e)}),l(this,he,Oe).call(this,r(this,Rt),"keydown",e=>{l(this,Ad,bb).call(this,e)}),l(this,zl,Kp).call(this),r(this,H).defaultValue&&this.setSelectedOption(r(this,H).defaultValue),r(this,H).defaultValue||l(this,Ld,gb).call(this),r(this,H).selectedOptImage&&(r(this,xe).src=r(this,Js)),r(this,H).searchClearable&&(l(this,te,ge).call(this,r(this,Ii),"display","none"),l(this,he,Oe).call(this,r(this,Ii),"click",()=>{this.searchOptions("")})),r(this,we).placeholder=r(this,H).searchPlaceholder,r(this,we).value="",l(this,he,Oe).call(this,r(this,we),"keyup",e=>{l(this,Fd,xb).call(this,e)}),T(this,As,r(this,H).allowCustomOption),r(this,Ba).observeElm(r(this,Ut),"value",(e,s)=>{l(this,$d,Eb).call(this,e,s,r(this,Dn))})}setSelectedOption(e){let s=null,i=e.split(r(this,H).separator);i=i.filter(n=>l(this,Fn,ea).call(this,n)),r(this,H).multipleSelect?(i.length===1?s=l(this,Fn,ea).call(this,i[0]):i.length>1&&(s={lbl:`${i.length} options selected`}),r(this,H).disableOnMax&&r(this,H).mx&&i.length>=r(this,H).mx?l(this,Ha,bh).call(this,!0):l(this,Ha,bh).call(this,!1)):s=l(this,Fn,ea).call(this,e),T(this,ce,e),r(this,ce)||l(this,Wa,Eh).call(this),s&&(this.value=e,r(this,H).selectedOptImage&&(r(this,H).multipleSelect?i.length>1?(r(this,xe).src=r(this,Js),l(this,_i,_n).call(this,r(this,xe))):i.length===1?(r(this,xe).src=s.icn||r(this,Js),l(this,_i,_n).call(this,r(this,xe),s.icn)):(r(this,xe).src=r(this,Js),l(this,_i,_n).call(this,r(this,xe))):(r(this,xe).src=s.icn||r(this,Js),l(this,_i,_n).call(this,r(this,xe),s.icn))),r(this,H).multipleSelect&&r(this,H).showChip&&l(this,Hl,em).call(this,i),r(this,H).showChip||l(this,Ks,Gi).call(this,r(this,Qi),s.lbl),r(this,H).closeOnSelect&&this.setMenu({open:!1}),r(this,H).selectedOptClearable&&(l(this,te,ge).call(this,r(this,$s),"display","grid"),l(this,he,Oe).call(this,r(this,$s),"click",n=>{l(this,Wa,Eh).call(this,n)})),r(this,H).onChange&&r(this,H).onChange(e),r(this,Dn)||l(this,Va,fh).call(this,r(this,Ut),"blur"))}searchOptions(e){l(this,jd,Sb).call(this,e);let s=[],i=!1;if(e){const n=r(this,H).options.length,a=[],o=e.toLowerCase();for(let h=0;h<n;h+=1){const d=r(this,H).options[h];if("type"in d)continue;const p=d.lbl.toLowerCase();if(p.includes(o)){if("groupIndex"in d&&!a.includes(d.groupIndex)){const m=d.groupIndex;a.push(m),s.push(r(this,H).options[m])}s.push(d),p===o&&(i=!0)}}const c=r(this,vi).length;for(let h=0;h<c;h+=1){const d=r(this,vi)[h],p=d.lbl.toLowerCase();p.includes(o)&&(s.push(d),p===o&&(i=!0))}s.length||(s=[{i:"not-found",lbl:"No Option Found"}]),T(this,Ct,r(this,As)?[r(this,H).options[0]]:[]),r(this,Ct).push(...s),r(this,H).searchClearable&&l(this,te,ge).call(this,r(this,Ii),"display","grid")}else T(this,Ct,r(this,H).options),r(this,H).searchClearable&&l(this,te,ge).call(this,r(this,Ii),"display","none"),r(this,As)&&(T(this,ms,l(this,Dt,Xt).call(this,`${l(this,tn,or).call(this)} .create-opt`)),l(this,te,ge).call(this,r(this,ms),"display","none"),T(this,Ct,r(this,Ct).concat(r(this,vi))));if(l(this,sn,cr).call(this),T(this,ms,l(this,Dt,Xt).call(this,`${l(this,tn,or).call(this)} .create-opt`)),i&&r(this,As))l(this,te,ge).call(this,r(this,ms),"display","none");else if(r(this,As)&&e.trim()){l(this,te,ge).call(this,r(this,ms),"display","block");const n=r(this,ms).querySelector(".opt-lbl");n.innerText=`Create: ${e}`,l(this,$t,Bt).call(this,r(this,ms),"data-value",e)}}setMenu({open:e}){l(this,te,ge).call(this,r(this,Ga),"max-height",`${e?r(this,H).maxHeight:0}px`),e?(l(this,kd,Rb).call(this),l(this,xt,Ot).call(this,r(this,Rt),"menu-open"),l(this,he,Oe).call(this,r(this,Ji),"click",s=>l(this,Jl,om).call(this,s)),l(this,de,Le).call(this,r(this,we),0),l(this,de,Le).call(this,r(this,Ii),0),r(this,Te).setAttribute("aria-expanded","true"),l(this,$t,Bt).call(this,r(this,Qs),"aria-hidden",!1),l(this,$t,Bt).call(this,r(this,we),"aria-hidden",!1),l(this,sn,cr).call(this)):(l(this,en,lr).call(this,r(this,Rt),"menu-open"),r(this,Ji).removeEventListener("click",l(this,Jl,om)),setTimeout(()=>{this.searchOptions("")},100),l(this,de,Le).call(this,r(this,we),-1),l(this,de,Le).call(this,r(this,Ii),-1),r(this,Te).setAttribute("aria-expanded","false"),l(this,$t,Bt).call(this,r(this,Qs),"aria-hidden",!0),l(this,$t,Bt).call(this,r(this,we),"aria-hidden",!0)),l(this,Pd,wb).call(this)}set activelist(e){const s=l(this,Dt,Xt).call(this,`.${this.fieldKey}-option-list[data-list="${e}"]`);if(s){const i=s.getAttribute("data-list-index");r(this,H).activeList=i,this.setSelectedOption(""),l(this,zl,Kp).call(this)}}set disabled(e){String(e).toLowerCase()==="true"?(r(this,Rt).classList.add("disabled"),r(this,Ut).disabled=!0,l(this,de,Le).call(this,r(this,Te),-1),l(this,de,Le).call(this,r(this,$s),-1),l(this,$t,Bt).call(this,r(this,Te),"aria-label","Dropdown disabled"),this.setMenu({open:!1})):String(e).toLowerCase()==="false"&&(l(this,en,lr).call(this,r(this,Rt),"disabled"),r(this,Ut).removeAttribute("disabled"),l(this,de,Le).call(this,r(this,Te),0),l(this,de,Le).call(this,r(this,$s),0),l(this,$t,Bt).call(this,r(this,Te),"aria-label",r(this,H).placeholder))}get disabled(){return r(this,Ut).disabled}set readonly(e){String(e).toLowerCase()==="true"?(l(this,xt,Ot).call(this,r(this,Rt),"disabled"),r(this,Ut).readOnly=!0,l(this,de,Le).call(this,r(this,Te),-1),l(this,de,Le).call(this,r(this,$s),-1),this.setMenu({open:!1})):String(e).toLowerCase()==="false"&&(l(this,en,lr).call(this,r(this,Rt),"disabled"),r(this,Ut).removeAttribute("readonly"),l(this,de,Le).call(this,r(this,Te),0),l(this,de,Le).call(this,r(this,$s),0))}get readonly(){return r(this,Ut).readOnly}set value(e){r(this,Ut).value=e,l(this,$t,Bt).call(this,r(this,Ut),"value",e)}get value(){return r(this,Ut).value}destroy(){this.value="",l(this,Bd,Ob).call(this)}reset(){T(this,Dn,!0),l(this,Wa,Eh).call(this),this.destroy(),this.init(),setTimeout(()=>{T(this,Dn,!1)},1)}}Rt=new WeakMap,$r=new WeakMap,Ut=new WeakMap,we=new WeakMap,Ga=new WeakMap,Te=new WeakMap,Od=new WeakMap,xe=new WeakMap,Qi=new WeakMap,$s=new WeakMap,Ii=new WeakMap,As=new WeakMap,ms=new WeakMap,Qs=new WeakMap,Js=new WeakMap,ce=new WeakMap,vi=new WeakMap,Ct=new WeakMap,Ji=new WeakMap,Ba=new WeakMap,Dn=new WeakMap,H=new WeakMap,Ul=new WeakMap,Ua=new WeakMap,Vl=new WeakMap,zl=new WeakSet,Kp=function(){const e=l(this,Dt,Xt).call(this,`.${this.fieldKey}-option-list[data-list-index="${r(this,H).activeList}"]`);T(this,Qs,l(this,Dt,Xt).call(this,`.${this.fieldKey}-option-list.active-list`)),r(this,Qs).innerHTML=e.innerHTML,l(this,Nd,_b).call(this),r(this,H).options=l(this,yd,Ib).call(this),T(this,Ct,[...r(this,H).options]),l(this,he,Oe).call(this,r(this,Qs),"scroll",s=>s.stopPropagation())},Dt=new WeakSet,Xt=function(e,s){return s?s.querySelector(e):r(this,Rt).querySelector(e)},Wl=new WeakSet,tm=function(e){return r(this,Rt).querySelectorAll(e)},he=new WeakSet,Oe=function(e,s,i){e==null||e.addEventListener(s,i),r(this,Vl).push({selector:e,eventType:s,cb:i})},Ki=new WeakSet,ar=function(e,s){e.appendChild(s)},Ld=new WeakSet,gb=function(){r(this,Ut).value&&(this.setSelectedOption(r(this,Ut).value),l(this,sn,cr).call(this))},Va=new WeakSet,fh=function(e,s){const i=new Event(s);e.dispatchEvent(i)},$d=new WeakSet,Eb=function(e,s){e!==s&&this.setSelectedOption(s),typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,Ut)})},Ar=new WeakSet,Ho=function(e=-1,s){if(s==="next"){const i=r(this,Ct).length;for(let n=e+1;n<i;n+=1){const a=r(this,Ct)[n];if(a.type!=="group"&&!a.disabled&&!a.disableOnMax)return n}}else if(s==="previous")for(let i=e-1;i>=0;i-=1){const n=r(this,Ct)[i];if(n.type!=="group"&&!n.disabled&&!n.disableOnMax)return i}},za=new WeakSet,gh=function(e){return l(this,Dt,Xt).call(this,`${l(this,tn,or).call(this)} .option[data-index="${e}"]`)},Ad=new WeakSet,bb=function(e){const s=r(this,Ji).activeElement;let i=null;if(l(this,jn,sa).call(this)){const a=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){e.preventDefault();let o=0,c=null;s===r(this,we)?(o=l(this,Ar,Ho).call(this,-1,"next"),r(this,As)&&o===0&&l(this,qa,Ih).call(this,r(this,ms))!=="block"&&(o=1),c=l(this,za,gh).call(this,o)):s.classList.contains("option")&&(o=l(this,Ar,Ho).call(this,a,"next"),c=l(this,za,gh).call(this,o)),c&&(i=c)}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,we))i=r(this,Te),l(this,jn,sa).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){let o=l(this,Ar,Ho).call(this,a,"previous");l(this,Ya,vh)&&o===0&&l(this,qa,Ih).call(this,r(this,ms))!=="block"&&(o=-1);const c=l(this,za,gh).call(this,o);c?i=c:c||(i=r(this,we))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,Ul)),T(this,Ua,r(this,Ua)+e.key),T(this,Ul,setTimeout(()=>{T(this,Ua,"")},300));const a=r(this,H).options.find(o=>o.type!=="group"&&!o.disabled&&o.lbl.toLowerCase().startsWith(r(this,Ua)));a&&this.setSelectedOption(a.val)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){if(r(this,H).multipleSelect)return;e.preventDefault();const a=l(this,Md,vb).call(this),o=e.key==="ArrowDown"?"next":"previous";let c=l(this,Ar,Ho).call(this,a,o);r(this,As)&&c===0&&(c=1),c>-1&&c<r(this,H).options.length&&(this.value=r(this,H).options[c].val)}else if((e.key==="ArrowRight"||e.key==="ArrowLeft")&&s.classList.contains("chip-clear-btn")){let o=null;e.key==="ArrowRight"?o=s.parentElement.nextElementSibling:e.key==="ArrowLeft"&&(o=s.parentElement.previousElementSibling),o&&(i=l(this,Dt,Xt).call(this,".chip-clear-btn",o))}i&&i.focus()},tn=new WeakSet,or=function(){return`.${this.fieldKey}-option-list.active-list`},yd=new WeakSet,Ib=function(){const e=Array.from(l(this,Wl,tm).call(this,`${l(this,tn,or).call(this)} .option`)),s=a=>{const o={},c=a.querySelector(".opt-lbl"),{value:h}=a.dataset;o.lbl=c.textContent,h?o.val=h:o.val=o.lbl,l(this,Yl,im).call(this,a,"disabled-opt")&&(o.disabled=!0);const d=a.querySelector(".opt-icn");r(this,H).optionIcon&&(d!=null&&d.src)&&(o.icn=d.src);const{attributes:p}=a,m=p.length;o.attributes={};for(let b=0;b<m;b+=1){const f=p[b].nodeName;o.attributes[f]=a.getAttribute(f)}return o},i=[],{length:n}=e;for(let a=0;a<n;a+=1){const o=e[a];let c={},h=null;if(o.classList.contains("opt-group-title")){c=s(o),c.type="group",i.push(c),h=a;for(let d=a+1;d<n;d+=1){const p=e[d];if(p.classList.contains("opt-group-child")){const m=s(p);m.groupIndex=h,a=d,i.push(m)}else{a=d-1;break}}}else c=s(o),i.push(c)}return i},Wa=new WeakSet,Eh=function(e){e==null||e.stopPropagation(),T(this,ce,""),r(this,H).selectedOptImage&&(r(this,xe).src=r(this,Js),l(this,_i,_n).call(this,r(this,xe))),this.value="",r(this,H).multipleSelect&&r(this,H).showChip&&l(this,Hl,em).call(this,[]),r(this,H).showChip||l(this,Ks,Gi).call(this,r(this,Qi),r(this,H).placeholder),r(this,H).selectedOptClearable&&l(this,te,ge).call(this,r(this,$s),"display","none"),l(this,Ha,bh).call(this),r(this,Dn)||l(this,Va,fh).call(this,r(this,Ut),"blur")},Fn=new WeakSet,ea=function(e){return[...r(this,H).options,...r(this,vi)].find(s=>s.val===e)},Hl=new WeakSet,em=function(e){if(l(this,Ks,Gi).call(this,r(this,Qi),""),T(this,$r,r(this,Rt).parentElement),!e.length){r(this,$r).style.removeProperty("min-height"),r(this,H).selectedOptImage&&l(this,te,ge).call(this,r(this,xe),"display","block"),l(this,Ks,Gi).call(this,r(this,Qi),r(this,H).placeholder);return}r(this,H).selectedOptImage&&l(this,te,ge).call(this,r(this,xe),"display","none"),e.forEach((s,i)=>{var g,v,_,R,w,S,C,L;const n=l(this,ys,hi).call(this,"div");l(this,xt,Ot).call(this,n,"chip-wrp");const a=(g=r(this,H).customClasses)==null?void 0:g["chip-wrp"];a&&l(this,ti,Bi).call(this,n,a);const o=(v=r(this,H).customAttributes)==null?void 0:v["chip-wrp"];if(o&&l(this,ze,hs).call(this,n,o),"chip-wrp"in r(this,H).attributes){const y=r(this,H).attributes["chip-wrp"];l(this,ze,hs).call(this,n,y)}if(r(this,H).selectedOptImage&&r(this,H).optionIcon){const y=l(this,ys,hi).call(this,"img");if(l(this,xt,Ot).call(this,y,"chip-icn"),"chip-icn"in r(this,H).attributes){const W=r(this,H).attributes["chip-icn"];l(this,ze,hs).call(this,y,W)}const P=l(this,Fn,ea).call(this,s);l(this,$t,Bt).call(this,y,"src",P.icn||r(this,Js)),l(this,_i,_n).call(this,y,P.icn),l(this,$t,Bt).call(this,y,"alt",P.lbl);const A=(_=r(this,H).customClasses)==null?void 0:_["chip-icn"];A&&l(this,ti,Bi).call(this,y,A);const F=(R=r(this,H).customAttributes)==null?void 0:R["chip-icn"];F&&l(this,ze,hs).call(this,y,F),l(this,Ki,ar).call(this,n,y)}const c=l(this,ys,hi).call(this,"span");if(l(this,xt,Ot).call(this,c,"chip-lbl"),"chip-lbl"in r(this,H).attributes){const y=r(this,H).attributes["chip-lbl"];l(this,ze,hs).call(this,c,y)}const h=(w=r(this,H).customClasses)==null?void 0:w["chip-lbl"];h&&l(this,ti,Bi).call(this,c,h);const d=(S=r(this,H).customAttributes)==null?void 0:S["chip-lbl"];d&&l(this,ze,hs).call(this,c,d);const p=l(this,Fn,ea).call(this,s);l(this,Ks,Gi).call(this,c,p?p.lbl:s),l(this,Ki,ar).call(this,n,c);const m=l(this,ys,hi).call(this,"button");if(l(this,xt,Ot).call(this,m,"chip-clear-btn"),"chip-clear-btn"in r(this,H).attributes){const y=r(this,H).attributes["chip-clear-btn"];l(this,ze,hs).call(this,m,y)}const b=(C=r(this,H).customClasses)==null?void 0:C["chip-clear-btn"];b&&l(this,ti,Bi).call(this,m,b);const f=(L=r(this,H).customAttributes)==null?void 0:L["chip-clear-btn"];f&&l(this,ze,hs).call(this,m,f),m.innerHTML=r(this,$s).innerHTML,l(this,he,Oe).call(this,m,"click",y=>{l(this,ql,sm).call(this,y,i)}),l(this,he,Oe).call(this,m,"keyup",y=>{y.key==="Backspace"&&l(this,ql,sm).call(this,y,i)}),l(this,Ki,ar).call(this,n,m),l(this,Ki,ar).call(this,r(this,Qi),n)}),T(this,$r,r(this,Rt).parentElement),l(this,te,ge).call(this,r(this,$r),"min-height",`${r(this,Rt).offsetHeight-r(this,Ga).offsetHeight}px`)},ql=new WeakSet,sm=function(e,s){e.stopPropagation();const i=r(this,ce).split(r(this,H).separator);i.splice(s,1),this.setSelectedOption(i.join(r(this,H).separator)),l(this,sn,cr).call(this)},_i=new WeakSet,_n=function(e=null,s=0){s?l(this,en,lr).call(this,e,"placeholder-img"):l(this,xt,Ot).call(this,e,"placeholder-img")},Ha=new WeakSet,bh=function(e=!1){if(e){const s=r(this,ce).split(r(this,H).separator);T(this,Ct,r(this,Ct).map(i=>{const n=i;return!i.disabled&&!s.includes(i.val)?n.disableOnMax=!0:n.disableOnMax=!1,n}))}else T(this,Ct,r(this,Ct).map(s=>{const i=s;return delete i.disableOnMax,i}));l(this,sn,cr).call(this)},Md=new WeakSet,vb=function(){return r(this,Ct).findIndex(e=>e.val===r(this,ce))},ys=new WeakSet,hi=function(e){return r(this,Ji).createElement(e)},de=new WeakSet,Le=function(e,s){e.tabIndex=s},xt=new WeakSet,Ot=function(e,s){e.classList.add(s)},en=new WeakSet,lr=function(e,s){e.classList.remove(s)},qa=new WeakSet,Ih=function(e){return(e==null?void 0:e.style.display)||""},Yl=new WeakSet,im=function(e,s){return e.classList.contains(s)},Ks=new WeakSet,Gi=function(e,s){e.textContent=s},te=new WeakSet,ge=function(e,s,i){e.style.setProperty(s,i,"important")},Xl=new WeakSet,nm=function(e){return e&&e.split(r(this,H).separator)||[]},Zl=new WeakSet,rm=function(e){return e.join(r(this,H).separator)},yr=new WeakSet,qo=function(e){e.stopPropagation();const s=e.currentTarget,i=s.dataset.value;if(r(this,As)&&s.classList.contains("create-opt")&&l(this,Ya,vh).call(this,i),r(this,H).multipleSelect){const n=l(this,Xl,nm).call(this,r(this,ce));if(n.includes(i)){const o=n.indexOf(i);n.splice(o,1),l(this,en,lr).call(this,s,"selected-opt")}else n.push(i),l(this,xt,Ot).call(this,s,"selected-opt");T(this,ce,l(this,Zl,rm).call(this,n))}else{const n=l(this,Dt,Xt).call(this,".selected-opt");n&&l(this,en,lr).call(this,n,"selected-opt"),l(this,xt,Ot).call(this,s,"selected-opt"),T(this,ce,i)}this.setSelectedOption(r(this,ce)),setTimeout(()=>{l(this,Dt,Xt).call(this,`${l(this,tn,or).call(this)} .option[data-value="${i}"]`).focus()},0)},sn=new WeakSet,cr=function(){l(this,Dd,Tb).call(this)},Ql=new WeakSet,am=function(){return l(this,Wl,tm).call(this,`${l(this,tn,or).call(this)} .option:not(.opt-group-title):not(.create-opt)`)},Nd=new WeakSet,_b=function(){const e=l(this,Ql,am).call(this),s=e.length;for(let i=0;i<s;i+=1){const n=e[i];l(this,he,Oe).call(this,n,"click",a=>{l(this,yr,qo).call(this,a)}),l(this,he,Oe).call(this,n,"keyup",a=>{a.key==="Enter"&&l(this,yr,qo).call(this,a)})}},Pd=new WeakSet,wb=function(){const e=l(this,Ql,am).call(this),s=l(this,jn,sa).call(this),i=e.length;for(let n=0;n<i;n+=1){const a=e[n];s?l(this,de,Le).call(this,a,0):l(this,de,Le).call(this,a,-1)}},$t=new WeakSet,Bt=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},ti=new WeakSet,Bi=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,xt,Ot).call(this,e,i))},ze=new WeakSet,hs=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,$t,Bt).call(this,e,s[n].key,s[n].value)},Dd=new WeakSet,Tb=function(){r(this,Qs).innerHTML="";const e=r(this,ce).split(r(this,H).separator),s=r(this,Ct).length;for(let i=0;i<s;i+=1){const n=r(this,Ct)[i],a=l(this,ys,hi).call(this,"li");if(n.i==="not-found"){l(this,Ks,Gi).call(this,a,n.lbl),l(this,xt,Ot).call(this,a,"opt-not-found"),l(this,Ki,ar).call(this,r(this,Qs),a);return}l(this,xt,Ot).call(this,a,"option");const o=l(this,ys,hi).call(this,"span");if(l(this,xt,Ot).call(this,o,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,H).classNames){const d=r(this,H).classNames["opt-lbl-wrp"];d&&l(this,ti,Bi).call(this,o,d)}if("opt-lbl-wrp"in r(this,H).attributes){const d=r(this,H).attributes["opt-lbl-wrp"];l(this,ze,hs).call(this,o,d)}if(r(this,H).optionIcon){const d=l(this,ys,hi).call(this,"img");if(l(this,xt,Ot).call(this,d,"opt-icn"),"opt-icn"in r(this,H).classNames){const p=r(this,H).classNames["opt-icn"];p&&l(this,ti,Bi).call(this,d,p)}if("opt-icn"in r(this,H).attributes){const p=r(this,H).attributes["opt-icn"];l(this,ze,hs).call(this,d,p)}d.src=n.icn||r(this,Js),l(this,_i,_n).call(this,d,n.icn),d.alt=n.lbl,d.loading="lazy",o.append(d)}const c=l(this,ys,hi).call(this,"span");if(l(this,xt,Ot).call(this,c,"opt-lbl"),"opt-lbl"in r(this,H).classNames){const d=r(this,H).classNames["opt-lbl"];d&&l(this,ti,Bi).call(this,c,d)}if("opt-lbl"in r(this,H).attributes){const d=r(this,H).attributes["opt-lbl"];l(this,ze,hs).call(this,c,d)}l(this,Ks,Gi).call(this,c,n.lbl),o.append(c);const h=l(this,ys,hi).call(this,"span");if(l(this,xt,Ot).call(this,h,"opt-prefix"),"opt-prefix"in r(this,H).classNames){const d=r(this,H).classNames["opt-prefix"];d&&l(this,ti,Bi).call(this,h,d)}if("opt-prefix"in r(this,H).attributes){const d=r(this,H).attributes["opt-prefix"];l(this,ze,hs).call(this,c,d)}l(this,Ks,Gi).call(this,h,n.code),a.append(o,h),Object.keys(n.attributes).map(d=>{l(this,$t,Bt).call(this,a,d,n.attributes[d])}),e.includes(n.val)?(l(this,xt,Ot).call(this,a,"selected-opt"),l(this,$t,Bt).call(this,a,"aria-selected",!0)):l(this,$t,Bt).call(this,a,"aria-selected",!1),n.type==="group"?l(this,xt,Ot).call(this,a,"opt-group-title"):("groupIndex"in n&&l(this,xt,Ot).call(this,a,"opt-group-child"),l(this,$t,Bt).call(this,a,"data-index",i),l(this,$t,Bt).call(this,a,"data-value",n.val),l(this,$t,Bt).call(this,a,"role","option"),l(this,$t,Bt).call(this,a,"aria-posinset",i+1),l(this,$t,Bt).call(this,a,"aria-setsize",r(this,Ct).length),l(this,de,Le).call(this,a,l(this,jn,sa).call(this)?"0":"-1"),n.disabled?l(this,xt,Ot).call(this,a,"disabled-opt"):n.disableOnMax?l(this,xt,Ot).call(this,a,"disable-on-max"):(l(this,he,Oe).call(this,a,"click",d=>{l(this,yr,qo).call(this,d)}),l(this,he,Oe).call(this,a,"keyup",d=>{d.key==="Enter"&&l(this,yr,qo).call(this,d)}))),l(this,Ki,ar).call(this,r(this,Qs),a)}},Fd=new WeakSet,xb=function(e){var s;if(e.stopPropagation(),e.key==="Enter"&&r(this,Ct).length){const i=(s=r(this,Ct))==null?void 0:s[0].i;if(i&&(this.setSelectedOption(i),this.searchOptions("")),r(this,As)&&l(this,qa,Ih).call(this,r(this,ms))!=="none"){const{value:n}=e.target;if(l(this,Ya,vh).call(this,n),r(this,H).multipleSelect){const a=l(this,Xl,nm).call(this,r(this,ce));a.push(n),T(this,ce,l(this,Zl,rm).call(this,a))}else T(this,ce,n);l(this,sn,cr).call(this),this.setSelectedOption(r(this,ce))}}else this.searchOptions(e.target.value)},Ya=new WeakSet,vh=function(e){let s=e.trim();if(s.includes&&s){const i=r(this,vi).length;for(let n=0;n<i;n+=1)if(r(this,vi)[n].lbl.toLowerCase()===s){s="";break}if(s){const n={lbl:s,val:s};n.attributes={},r(this,vi).push(n),r(this,Ct).push(n),this.searchOptions("")}}},jd=new WeakSet,Sb=function(e){r(this,we).value=e},Jl=new WeakSet,om=function(e){r(this,Rt).contains(e.target)||this.setMenu({open:!1})},jn=new WeakSet,sa=function(){return l(this,Yl,im).call(this,r(this,Rt),"menu-open")},kd=new WeakSet,Rb=function(){const e=r(this,Te).getBoundingClientRect(),s=e.top,i=r(this,Ba).innerHeight-e.bottom;i<s&&i<r(this,H).maxHeight?(l(this,te,ge).call(this,r(this,Rt),"flex-direction","column-reverse"),l(this,te,ge).call(this,r(this,Rt),"bottom","0%")):(l(this,te,ge).call(this,r(this,Rt),"flex-direction","column"),l(this,te,ge).call(this,r(this,Rt),"bottom","auto"))},Kl=new WeakSet,lm=function(e){e.code==="Space"&&(r(this,we).focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,jn,sa).call(this)?this.setMenu({open:!1}):(r(this,we).focus(),this.setMenu({open:!0})))},Gd=new WeakSet,Cb=function(e){var s;(s=e.target.parentElement)!=null&&s.contains(e.relatedTarget)||l(this,Va,fh).call(this,r(this,Ut),"blur")},Bd=new WeakSet,Ob=function(){r(this,Vl).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function zS({fieldKey:t,formID:e,styleClasses:s,attr:i,onBlurHandler:n,resetFieldValue:a,isBuilder:o}){const[c,h]=D.useState(null),d=D.useRef(null),m=J(Nt)[t],{optionsList:b,ph:f}=m,{activeList:g,optionIcon:v,allowCustomOption:_}=m.config;D.useEffect(()=>{if(!c)return;const w=d.current;w&&c&&"destroy"in w&&w.destroy();const{selectedOptImage:S,selectedOptClearable:C,searchClearable:L,searchPlaceholder:y,maxHeight:P,multipleSelect:A,showChip:F,selectedOptImgSrc:W,closeOnSelect:G}=m.config,B=document.getElementById("bit-grid-layout").contentWindow,X={fieldKey:t,selectedOptImage:S,selectedOptClearable:C,searchClearable:L,allowCustomOption:_,optionIcon:v,maxHeight:P,multipleSelect:A,showChip:F,placeholder:f,searchPlaceholder:y,selectedOptImgSrc:W,closeOnSelect:G,activeList:g,document:document.getElementById("bit-grid-layout").contentDocument,window:B,attributes:{"opt-lbl-wrp":bt(t,"opt-lbl-wrp"),"opt-icn":bt(t,"opt-icn"),"opt-lbl":bt(t,"opt-lbl"),"opt-prefix":bt(t,"opt-prefix"),"chip-wrp":bt(t,"chip-wrp"),"chip-lbl":bt(t,"chip-lbl"),"chip-icn":bt(t,"chip-icn"),"chip-clear-btn":bt(t,"chip-clear-btn")},classNames:{"opt-lbl-wrp":x(t,"opt-lbl-wrp"),"opt-icn":x(t,"opt-icn"),"opt-lbl":x(t,"opt-lbl"),"opt-prefix":x(t,"opt-prefix")}};B.observeElm||(B.observeElm=rp),d.current=new VS(c,X)},[m,c]);const R=b.reduce((w,S)=>{const[C,L]=Object.entries(S)[0];return O(I({},w),{[C]:L})},{});return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:s}),u.jsx(_t,{formID:e,fieldKey:t,fieldData:i,children:u.jsx("div",{className:`${t}-dpd-fld-container ${x(t,"dpd-fld-container")}`,children:u.jsxs("div",O(I({"data-dev-dpd-fld-wrp":t,className:`${t}-dpd-fld-wrp ${x(t,"dpd-fld-wrp")} ${m.valid.disabled?"disabled":""} ${m.valid.readonly?"readonly":""}`,ref:h},$(t,"dpd-fld-wrp")),{children:[u.jsx("input",I(I({"data-testid":`${t}-dpd-hdn-inp`,name:t,type:"hidden",className:`${t}-dpd-hidden-input ${x(t,"dpd-hidden-input")}`},"disabled"in m.valid&&{disabled:m.valid.disabled}),"readonly"in m.valid&&{readOnly:m.valid.readonly})),u.jsxs("div",O(I({"data-testid":`${t}-dpd-wrp`,"data-dev-dpd-wrp":t,className:`${t}-dpd-wrp ${x(t,"dpd-wrp")}`,role:"combobox","aria-controls":"","aria-live":"assertive","aria-expanded":"false",tabIndex:"0","aria-label":"Dropdown"},$(t,"dpd-wrp")),{children:[u.jsxs("div",{"data-testid":`${t}-slctd-opt-wrp`,className:`${t}-selected-opt-wrp ${x(t,"selected-opt-wrp")}`,children:[m.config.selectedOptImage&&u.jsx("img",I({"data-testid":`${t}-slctd-opt-img`,"data-dev-selected-opt-img":t,className:`${t}-selected-opt-img placeholder-img ${x(t,"selected-opt-img")}`,"aria-hidden":"true",alt:"selected option icon",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},$(t,"selected-opt-img"))),u.jsx("span",O(I({"data-testid":`${t}-slctd-opt-lbl`,"aria-label":"Selected Option Label","data-dev-selected-opt-lbl":t,className:`${t}-selected-opt-lbl ${m.config.multipleSelect&&m.config.showChip?"multi-chip":""} ${x(t,"selected-opt-lbl")}`},$(t,"selected-opt-lbl")),{children:f}))]}),u.jsxs("div",{"data-testid":`${t}-dpd-btn-wrp`,className:`${t}-dpd-btn-wrp ${x(t,"dpd-btn-wrp")}`,children:[u.jsx("button",O(I({"data-testid":`${t}-slctd-opt-clr-btn`,type:"button","aria-label":"Clear selected option value","data-dev-selected-opt-clear-btn":t,className:`${t}-selected-opt-clear-btn ${x(t,"selected-opt-clear-btn")}`},$(t,"selected-opt-clear-btn")),{children:u.jsxs("svg",{width:"15",height:"15",role:"img",title:"Cross icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})),u.jsx("div",{className:`${t}-dpd-down-btn ${x(t,"dpd-down-btn")}`,children:u.jsx("svg",{width:"15",height:"15",viewBox:"0 0 24 24",title:"Down icon",role:"img",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]})),u.jsx("div",O(I({className:`${t}-option-wrp ${x(t,"option-wrp")}`,"data-dev-option-wrp":t},$(t,"option-search-wrp")),{children:u.jsxs("div",{className:`${t}-option-inner-wrp ${x(t,"option-inner-wrp")}`,children:[u.jsxs("div",{"data-dev-option-search-wrp":t,className:`${t}-option-search-wrp ${x(t,"option-search-wrp")}`,children:[u.jsx("input",I({"data-testid":`${t}-opt-srch-inp`,type:"search","data-dev-opt-search-input":t,className:`${t}-opt-search-input ${x(t,"opt-search-input")}`,placeholder:"Search Country","aria-label":"Search Options","aria-hidden":"true",tabIndex:"-1"},$(t,"opt-search-input"))),u.jsxs("svg",O(I({"data-dev-opt-search-icn":t,className:`${t}-icn ${t}-opt-search-icn ${x(t,"opt-search-icn")}`,"aria-hidden":"true",width:"18",height:"18",role:"img",title:"Search icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},$(t,"opt-search-icn")),{children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),u.jsx("button",O(I({"data-testid":`${t}-srch-clr-btn`,type:"button","aria-label":"Clear search","data-dev-search-clear-btn":t,className:`${t}-icn ${t}-search-clear-btn ${x(t,"search-clear-btn")}`,tabIndex:"-1"},$(t,"search-clear-btn")),{children:u.jsxs("svg",{width:"13",height:"13",role:"img",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),Object.entries(R).map(([w,S],C)=>u.jsxs("ul",O(I({className:`${t}-option-list ${x(t,"option-list")}`,"aria-hidden":"true","aria-label":"Option List","data-list":w,"data-list-index":C,"data-dev-option-list":t,tabIndex:"-1",role:"listbox"},$(t,"option-list")),{children:[_&&u.jsxs("li",O(I({"data-testid":`${t}-opt-${C}`,"data-dev-option":t,"data-index":C,"data-value":"create-opt",className:"option create-opt",role:"option","aria-selected":"false",tabIndex:"-1"},$(t,"option")),{style:{display:"none"},children:[u.jsx("span",O(I({"data-dev-opt-lbl-wrp":t,className:`opt-lbl-wrp ${x(t,"opt-lbl-wrp")}`},$(t,"opt-lbl-wrp")),{children:u.jsx("span",{"data-dev-opt-lbl":t,className:"opt-lbl",children:"Create: "})})),u.jsx("span",{className:"opt-prefix"})]}),`option-${w}`),u.jsx(Lb,{opts:S,fieldKey:t,optionIcon:v})]}),w)),u.jsx("ul",I({className:`${t}-option-list ${x(t,"option-list")} active-list`,"aria-hidden":"true","aria-label":"Option List","data-dev-option-list":t,tabIndex:"-1",role:"listbox"},$(t,"option-list")))]})}))]}))})})]})}var WS=D.memo(zS);const Lb=({opts:t,fieldKey:e,optionIcon:s,isGroupChild:i})=>u.jsx(u.Fragment,{children:t.map((n,a)=>n.type==="group"?u.jsxs(D.Fragment,{children:[u.jsx("li",O(I({"data-testid":`${e}-opt-${a}`,"data-index":a,className:`option opt-group-title ${x(e,"opt-group-title")}`},$(e,"opt-group-title")),{children:u.jsx("span",{className:"opt-lbl",children:n.title})}),`option-grp-ttl-${n.title}`),u.jsx(Lb,{opts:n.childs,fieldKey:e,optionIcon:s,isGroupChild:!0})]},n.title):u.jsxs("li",O(I({"data-testid":`${e}-opt-${a}`,"data-dev-option":e,"data-index":a,"data-value":n.val||n.lbl,className:`option ${i?`opt-group-child ${x(e,"option-group-child")}`:""}`,role:"option","aria-selected":"false",tabIndex:"-1"},$(e,"option")),{children:[u.jsxs("span",O(I({"data-dev-opt-lbl-wrp":e,className:`opt-lbl-wrp ${x(e,"opt-lbl-wrp")}`},$(e,"opt-lbl-wrp")),{children:[s&&u.jsx("img",{className:`opt-icn ${x(e,"opt-icn")}`,src:(n==null?void 0:n.img)||"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"BD",loading:"lazy"}),u.jsx("span",{"data-dev-opt-lbl":e,className:"opt-lbl",children:n.lbl})]})),u.jsx("span",{className:"opt-prefix"})]}),`option-${n.val||n.lbl}}`))});var Mr,Ud,tc,ei,Xa,Vd,wi,Vt,Ti,rs,ec,Za,zd,Ms,At,We,si,kn,ee,Wd,$b,Hd,Ab,qd,yb,Qa,_h,Ja,wh,sc,cm,Yd,Mb,Xd,fs,Us,Zd,Nb,ic,hm,He,ds,Qd,Pb,Nr,Yo,ue,$e,Ka,Th,nn,hr,xi,wn,Ns,di,Ps,ui,Jd,Db,Kd,Fb,tu,jb;class HS{constructor(e,s){E(this,Wd);E(this,Hd);E(this,qd);E(this,Qa);E(this,Ja);E(this,sc);E(this,Yd);E(this,fs);E(this,Zd);E(this,ic);E(this,He);E(this,Qd);E(this,Nr);E(this,ue);E(this,Ka);E(this,nn);E(this,xi);E(this,Ns);E(this,Ps);E(this,Jd);E(this,Kd);E(this,tu);E(this,Mr,null);E(this,Ud,null);E(this,tc,null);E(this,ei,null);E(this,Xa,null);E(this,Vd,null);E(this,wi,null);E(this,Vt,null);E(this,Ti,null);E(this,rs,{});E(this,ec,[]);E(this,Za,null);E(this,zd,{});E(this,Ms,{});E(this,At,{});E(this,We,"");E(this,si,"");E(this,kn,[]);E(this,ee,{id:"upload",name:"upload",required:!0,multiple:!1,maxSize:0,sizeUnit:"KB",isItTotalMax:!1,showMaxSize:!0,showSelectStatus:!0,fileSelectStatus:"No Choosen File",allowedFileType:"",showFileList:!0,showFilePreview:!0,showFileSize:!0,accept:".pdf,.exe,.msi",duplicateAllow:!1,capture:"",minFile:0,maxFile:0,onchange:()=>{},oninput:()=>{}});E(this,Xd,e=>{const s=e.target.getAttribute("data-file-id");l(this,ic,hm).call(this,`#file-wrp-${s}`),delete r(this,rs)[s];const i=Object.keys(r(this,rs)).length;i?r(this,ei).innerText=`${i} file${i>1?"s":""} selected`:(r(this,ei).innerHTML=r(this,ee).fileSelectStatus,l(this,Ja,wh).call(this)),l(this,sc,cm).call(this)});Object.assign(r(this,ee),s),T(this,Za,s.document?s.document:document),T(this,zd,s.window?s.window:window),T(this,Ms,s.attributes||{}),T(this,At,s.classNames||{}),typeof e=="string"?T(this,Mr,r(this,Za).querySelector(e)):T(this,Mr,e),T(this,We,r(this,ee).fieldKey),this.fieldKey=r(this,We),T(this,si,s.assetsURL||""),this.init()}init(){var c;T(this,Ud,l(this,fs,Us).call(this,`.${r(this,We)}-label`)),T(this,tc,l(this,fs,Us).call(this,`.${r(this,We)}-inp-btn`)),T(this,ei,l(this,fs,Us).call(this,`.${r(this,We)}-file-select-status`)),T(this,Xa,l(this,fs,Us).call(this,`.${r(this,We)}-file-input-wrpr`)),T(this,Vd,l(this,fs,Us).call(this,`.${r(this,We)}-max-size-lbl`)),T(this,wi,l(this,fs,Us).call(this,`.${r(this,We)}-file-upload-input`)),T(this,Ti,l(this,fs,Us).call(this,`.${r(this,We)}-file-input-wrpr .err-wrp`));const{multiple:e,allowedFileType:s,accept:i,showSelectStatus:n,fileSelectStatus:a,oldFiles:o}=r(this,ee);r(this,wi).multiple=e,r(this,wi).accept=s?`${s}, ${i}`:i,n&&r(this,ei)?r(this,ei).innerHTML=a:(c=r(this,ei))==null||c.remove(),T(this,rs,{}),l(this,Ja,wh).call(this),o&&l(this,Wd,$b).call(this,o),l(this,Nr,Yo).call(this,r(this,wi),"change",h=>l(this,qd,yb).call(this,h)),l(this,Nr,Yo).call(this,r(this,tc),"click",()=>r(this,wi).click())}destroy(){r(this,Vt)&&(r(this,Vt).innerHTML=""),l(this,tu,jb).call(this)}reset(){this.destroy(),this.init()}}Mr=new WeakMap,Ud=new WeakMap,tc=new WeakMap,ei=new WeakMap,Xa=new WeakMap,Vd=new WeakMap,wi=new WeakMap,Vt=new WeakMap,Ti=new WeakMap,rs=new WeakMap,ec=new WeakMap,Za=new WeakMap,zd=new WeakMap,Ms=new WeakMap,At=new WeakMap,We=new WeakMap,si=new WeakMap,kn=new WeakMap,ee=new WeakMap,Wd=new WeakSet,$b=function(e){const s=JSON.parse(e);T(this,kn,JSON.parse(e)),r(this,Vt)||l(this,Qa,_h).call(this),s.forEach(n=>{l(this,Hd,Ab).call(this,n)});const i=l(this,He,ds).call(this,"input");i.type="hidden",i.name=`${r(this,We)}_old`,i.value=r(this,kn).toString(),r(this,Xa).appendChild(i)},Hd=new WeakSet,Ab=function(e){const s=l(this,He,ds).call(this,"div"),i=e.replace(/( |\.|\(|\))/g,"");if(s.id=`file-wrp-${i}`,l(this,ue,$e).call(this,s,"file-wrpr"),"file-wrpr"in r(this,At)){const c=r(this,At)["file-wrpr"];c&&l(this,Ns,di).call(this,s,c)}if("file-wrpr"in r(this,Ms)){const c=r(this,Ms)["file-wrpr"];l(this,Ps,ui).call(this,s,c)}const n=l(this,He,ds).call(this,"div");l(this,ue,$e).call(this,n,"file-details");const a=l(this,He,ds).call(this,"a");if(l(this,ue,$e).call(this,a,"file-title"),"file-title"in r(this,At)){const c=r(this,At)["file-title"];c&&l(this,Ns,di).call(this,a,c)}if("file-title"in r(this,ee).attributes){const c=r(this,ee).attributes["file-title"];l(this,Ps,ui).call(this,a,c)}l(this,xi,wn).call(this,a,"target","_blank"),l(this,xi,wn).call(this,a,"href",`${r(this,ee).baseDLURL}&fileID=${e}`),l(this,nn,hr).call(this,a,e),n.append(a),s.append(n);const o=l(this,He,ds).call(this,"button");if(l(this,ue,$e).call(this,o,"cross-btn"),"cross-btn"in r(this,At)){const c=r(this,At)["cross-btn"];c&&l(this,Ns,di).call(this,o,c)}if(l(this,xi,wn).call(this,o,"data-file-id",i),l(this,xi,wn).call(this,o,"data-file-name",e),l(this,xi,wn).call(this,o,"type","button"),"cross-btn"in r(this,ee).attributes){const c=r(this,ee).attributes["cross-btn"];l(this,Ps,ui).call(this,o,c)}l(this,nn,hr).call(this,o,"Ã—"),l(this,Nr,Yo).call(this,o,"click",c=>l(this,Yd,Mb).call(this,c)),s.append(o),r(this,Vt).appendChild(s)},qd=new WeakSet,yb=function(e){const{files:s}=r(this,wi),{sizeUnit:i,allowMaxSize:n,maxSize:a,maxSizeErrMsg:o,isItTotalMax:c,multiple:h,showFileList:d,fileExistMsg:p,showFilePreview:m,showFileSize:b,showSelectStatus:f,fileSelectStatus:g,minFile:v,minFileErrMsg:_,maxFile:R,maxFileErrMsg:w}=r(this,ee),S=l(this,Kd,Fb).call(this,i,a);let C=0;const L=[];l(this,Ka,Th).call(this,r(this,Ti),"active"),c&&Object.values(r(this,rs)).forEach(P=>{C+=P.size}),!h&&s.length>0&&(T(this,rs,{}),r(this,Vt)&&l(this,nn,hr).call(this,r(this,Vt),""));for(let P=0;P<s.length;P+=1){const A=s[P],F=A.name.replace(/( |\.|\(|\))/g,"");if(r(this,rs)[F])L.push(p);else if(!n||!a||A.size+C<=S)if(!(R>0)||Object.keys(r(this,rs)).length<R){if(r(this,rs)[F]=A,d){r(this,Vt)||l(this,Qa,_h).call(this);const W=l(this,He,ds).call(this,"div");if(W.id=`file-wrp-${F}`,l(this,ue,$e).call(this,W,"file-wrpr"),"file-wrpr"in r(this,At)){const M=r(this,At)["file-wrpr"];M&&l(this,Ns,di).call(this,W,M)}if("file-wrpr"in r(this,Ms)){const M=r(this,Ms)["file-wrpr"];l(this,Ps,ui).call(this,W,M)}if(m){const M=l(this,He,ds).call(this,"img");if(M.src=l(this,Qd,Pb).call(this,A),M.alt="Image Uploaded",l(this,ue,$e).call(this,M,"file-preview"),"file-preview"in r(this,At)){const q=r(this,At)["file-preview"];q&&l(this,Ns,di).call(this,M,q)}if("file-preview"in r(this,Ms)){const q=r(this,Ms)["file-preview"];l(this,Ps,ui).call(this,M,q)}W.append(M)}const G=l(this,He,ds).call(this,"div");l(this,ue,$e).call(this,G,"file-details");const B=l(this,He,ds).call(this,"span");if(l(this,ue,$e).call(this,B,"file-title"),"file-title"in r(this,At)){const M=r(this,At)["file-title"];M&&l(this,Ns,di).call(this,B,M)}if("file-title"in r(this,ee).attributes){const M=r(this,ee).attributes["file-title"];l(this,Ps,ui).call(this,B,M)}if(l(this,nn,hr).call(this,B,A.name),G.append(B),b){const M=l(this,He,ds).call(this,"span");if(l(this,ue,$e).call(this,M,"file-size"),"file-size"in r(this,At)){const q=r(this,At)["file-size"];q&&l(this,Ns,di).call(this,M,q)}if("file-size"in r(this,ee).attributes){const q=r(this,ee).attributes["file-size"];l(this,Ps,ui).call(this,M,q)}l(this,nn,hr).call(this,M,l(this,Jd,Db).call(this,A.size)),G.append(M)}W.append(G);const X=l(this,He,ds).call(this,"button");if(l(this,ue,$e).call(this,X,"cross-btn"),"cross-btn"in r(this,At)){const M=r(this,At)["cross-btn"];M&&l(this,Ns,di).call(this,X,M)}if(l(this,xi,wn).call(this,X,"data-file-id",F),"cross-btn"in r(this,ee).attributes){const M=r(this,ee).attributes["cross-btn"];l(this,Ps,ui).call(this,X,M)}l(this,nn,hr).call(this,X,"Ã—"),W.append(X),r(this,Vt).append(W)}c&&(C+=A.size)}else r(this,Ti).innerHTML=w,l(this,ue,$e).call(this,r(this,Ti),"active"),setTimeout(()=>{l(this,Ka,Th).call(this,r(this,Ti),"active")},3e3);else L.push(o)}l(this,Zd,Nb).call(this,`.${r(this,We)}-file-input-wrpr .cross-btn`).forEach(P=>{l(this,Nr,Yo).call(this,P,"click",A=>r(this,Xd).call(this,A))});const y=Object.keys(r(this,rs)).length;l(this,sc,cm).call(this),y&&f?r(this,ei).innerText=`${y} file${y>1?"s":""} selected`:f&&(r(this,ei).innerHTML=g),v>0&&y<v&&(r(this,Ti).innerHTML=_,l(this,ue,$e).call(this,r(this,Ti),"active")),!r(this,Vt)&&L.length>0&&l(this,Qa,_h).call(this),L.map((P,A)=>{r(this,Vt).insertAdjacentHTML("afterbegin",`
      <div id='err-${A}' class="err-wrp">
          ${P}
      </div>`);const F=l(this,fs,Us).call(this,`#err-${A}`);l(this,ue,$e).call(this,F,"active"),setTimeout(()=>{l(this,Ka,Th).call(this,F,"active")},3e3),setTimeout(()=>{F==null||F.remove(),Object.keys(r(this,rs)).length||l(this,Ja,wh).call(this)},5e3)})},Qa=new WeakSet,_h=function(){if(T(this,Vt,l(this,He,ds).call(this,"div")),l(this,ue,$e).call(this,r(this,Vt),"files-list"),"files-list"in r(this,At)){const e=r(this,At)["files-list"];e&&l(this,Ns,di).call(this,r(this,Vt),e)}if("files-list"in r(this,Ms)){const e=r(this,Ms)["files-list"];l(this,Ps,ui).call(this,r(this,Vt),e)}r(this,Xa).append(r(this,Vt))},Ja=new WeakSet,wh=function(){var e;(e=r(this,Vt))==null||e.remove(),T(this,Vt,null)},sc=new WeakSet,cm=function(){var s;const e=new DataTransfer;(s=Object.values(r(this,rs)))==null||s.forEach(i=>{e.items.add(i)}),r(this,wi).files=e.files},Yd=new WeakSet,Mb=function(e){const s=e.target.getAttribute("data-file-id"),i=e.target.getAttribute("data-file-name");l(this,ic,hm).call(this,`#file-wrp-${s}`),T(this,kn,r(this,kn).filter(n=>n!==i)),l(this,fs,Us).call(this,`input[name="${r(this,We)}_old"]`).value=r(this,kn).toString()},Xd=new WeakMap,fs=new WeakSet,Us=function(e){return r(this,Mr).querySelector(e)},Zd=new WeakSet,Nb=function(e){return r(this,Mr).querySelectorAll(e)},ic=new WeakSet,hm=function(e){var s;(s=l(this,fs,Us).call(this,e))==null||s.remove()},He=new WeakSet,ds=function(e){return r(this,Za).createElement(e)},Qd=new WeakSet,Pb=function(e){switch(e.name.substring(e.name.lastIndexOf(".")+1)){case"xbm":case"tif":case"pjp":case"pjpeg":case"svgz":case"jpg":case"jpeg":case"ico":case"tiff":case"gif":case"svg":case"bmp":case"png":case"jfif":case"webp":return URL.createObjectURL(e);case"7z":case"arj":case"deb":case"pkg":case"rar":case".rpm":case".gz":case"z":case"zip":return`${r(this,si)}/zip-compressed.svg`;case"key":case"odp":case"pps":case"ppt":case"pptx":return`${r(this,si)}/presentation.svg`;case"_RF_":case"doc":case"docx":case"odt":case"pdf":case"rtf":case"tex":case"txt":case"wks":case"wps":case"wpd":return`${r(this,si)}/document.svg`;case"csv":case"dat":case"db":case"dbf":case"log":case"mdb":case"sav":case"sql":case"tar":case"sqlite":case"xml":return`${r(this,si)}/database.svg`;case"opus":case"flac":case"webm":case"weba":case"wav":case"ogg":case"m4a":case"mp3":case"oga":case"mid":case"amr":case"aiff":case"wma":case"au":case"acc":case"wpl":return`${r(this,si)}/file-audio.svg`;case"ogm":case"wmv":case"mpg":case"ogv":case"mov":case"asx":case"mpeg":case"mp4":case"m4v":case"avi":case"3gp":case"flv":case"mkv":case"swf":return`${r(this,si)}/file-audio.svg`;default:return`${r(this,si)}/paperclip.svg`}},Nr=new WeakSet,Yo=function(e,s,i){e.addEventListener(s,i),r(this,ec).push({element:e,eventType:s,eventAction:i})},ue=new WeakSet,$e=function(e,s){e.classList.add(s)},Ka=new WeakSet,Th=function(e,s){e.classList.remove(s)},nn=new WeakSet,hr=function(e,s){e.textContent=s},xi=new WeakSet,wn=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Ns=new WeakSet,di=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,ue,$e).call(this,e,i))},Ps=new WeakSet,ui=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,xi,wn).call(this,e,s[n].key,s[n].value)},Jd=new WeakSet,Db=function(e){if(e<1024)return`${e}Bytes`;if(e>=1024&&e<1048576)return`${(e/1024).toFixed(1)}KB`;if(e>=1048576&&e<1073741824)return`${(e/1048576).toFixed(1)}MB`;if(e>=1073741824)return`${(e/1073741824).toFixed(1)}GB`},Kd=new WeakSet,Fb=function(e,s){switch(e){case"Bytes":return s;case"KB":return s*1024;case"MB":return s*1048576;case"GB":return s*1073741824;default:return 0}},tu=new WeakSet,jb=function(){r(this,ec).forEach(({element:e,eventType:s,eventAction:i})=>{e.removeEventListener(s,i)})};function qS({fieldKey:t,formID:e,styleClasses:s}){const i=D.useRef(null),n=D.useRef(null),o=J(Nt)[t],c=J(Gc),h=J(je),{styleMode:d}=h;return D.useEffect(()=>{var q,j,N,k,U,Y,z,ot,nt,lt,gt,Q,st,rt;i!=null&&i.current||(i.current=St(`.${t}-file-up-wrpr`));const p=n.current,m=i.current;p&&m&&"destroy"in p&&p.destroy();const{multiple:b,allowMaxSize:f,showMaxSize:g,maxSizeLabel:v,maxSize:_,sizeUnit:R,isItTotalMax:w,showSelectStatus:S,fileSelectStatus:C,allowedFileType:L,showFileList:y,fileExistMsg:P,showFilePreview:A,showFileSize:F,duplicateAllow:W,accept:G,minFile:B,maxFile:X}=o.config,M={fieldKey:t,multiple:b,allowMaxSize:f,maxSizeErrMsg:((j=(q=o==null?void 0:o.err)==null?void 0:q.maxSize)==null?void 0:j.msg)||((k=(N=o==null?void 0:o.err)==null?void 0:N.maxSize)==null?void 0:k.dflt),showMaxSize:g,maxSizeLabel:v,maxSize:_,sizeUnit:R,isItTotalMax:w,showSelectStatus:S,fileSelectStatus:C,allowedFileType:L,showFileList:y,fileExistMsg:P,showFilePreview:A,showFileSize:F,duplicateAllow:W,accept:G,minFile:B,minFileErrMsg:((Y=(U=o==null?void 0:o.err)==null?void 0:U.minFile)==null?void 0:Y.msg)||((ot=(z=o==null?void 0:o.err)==null?void 0:z.minFile)==null?void 0:ot.dflt),maxFile:X,maxFileErrMsg:((lt=(nt=o==null?void 0:o.err)==null?void 0:nt.maxFile)==null?void 0:lt.msg)||((Q=(gt=o==null?void 0:o.err)==null?void 0:gt.maxFile)==null?void 0:Q.dflt),assetsURL:`${c.assetsURL}/../static/file-upload/`,document:(st=document.getElementById("bit-grid-layout"))==null?void 0:st.contentDocument,window:(rt=document.getElementById("bit-grid-layout"))==null?void 0:rt.contentWindow,attributes:{"files-list":bt(t,"files-list"),"file-wrpr":bt(t,"file-wrpr"),"file-preview":bt(t,"file-preview"),"file-title":bt(t,"file-title"),"file-size":bt(t,"file-size"),"cross-btn":bt(t,"cross-btn")},classNames:{"files-list":x(t,"files-list"),"file-wrpr":x(t,"file-wrpr"),"file-preview":x(t,"file-preview"),"file-title":x(t,"file-title"),"file-size":x(t,"file-size"),"cross-btn":x(t,"cross-btn")}};n.current=new HS(m,M)},[o]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:s}),u.jsx(_t,{formID:e,fieldKey:t,fieldData:o,children:u.jsx("div",{className:`${t}-file-up-container ${x(t,"file-up-container")}`,children:u.jsx("div",O(I({"data-dev-file-up-wrpr":t,className:`${t}-file-up-wrpr ${o.valid.disabled?"disabled":""} ${o.valid.readonly?"readonly":""} ${x(t,"file-up-wrpr")}`,ref:i},$(t,"file-up-wrpr")),{children:u.jsxs("div",O(I({"data-dev-file-input-wrpr":t,"data-inp-wrp":!0,className:`${t}-file-input-wrpr ${x(t,"file-input-wrpr")}`},$(t,"file-input-wrpr")),{children:[u.jsxs("div",O(I({"data-dev-btn-wrpr":t,className:`${t}-btn-wrpr ${x(t,"btn-wrpr")}`},$(t,"btn-wrpr")),{children:[u.jsxs("button",O(I({"data-testid":`${t}-inp-btn`,"data-dev-inp-btn":t,type:"button",className:`${t}-inp-btn ${x(t,"inp-btn")}`},$(t,"inp-btn")),{children:[o.prefixIcn&&u.jsx("img",I({"data-dev-pre-i":t,className:`${t}-pre-i ${x(t,"pre-i")}`,src:`${o.prefixIcn}`,alt:"Upload icon",srcSet:""},$(t,"pre-i"))),u.jsx("span",O(I({"data-dev-btn-txt":t,className:`${t}-btn-txt ${x(t,"btn-txt")}`},$(t,"btn-txt")),{children:o.btnTxt})),o.suffixIcn&&u.jsx("img",I({"data-dev-suf-i":t,className:`${t}-suf-i ${x(t,"suf-i")}`,src:`${o.suffixIcn}`,alt:"Upload icon",srcSet:""},$(t,"suf-i")))]})),o.config.showSelectStatus&&u.jsx("div",O(I({"data-dev-file-select-status":t,className:`${t}-file-select-status ${x(t,"file-select-status")}`},$(t,"file-select-status")),{children:"No Choosen File"})),o.config.allowMaxSize&&o.config.showMaxSize&&o.config.maxSize!==0&&u.jsx("small",O(I({"data-dev-max-size-lbl":t,className:`${t}-max-size-lbl ${x(t,"max-size-lbl")}`},$(t,"max-size-lbl")),{children:o.config.maxSizeLabel||`(Max ${o.config.maxSize}${o.config.sizeUnit})`})),u.jsx("input",O(I(I(I(I(O(I({"data-testid":`${t}-fil-upld-inp`,type:"file",className:`${t}-file-upload-input ${x(t,"file-upload-input")}`},d&&{id:t}),{name:"file-upload"}),"req"in o.valid&&{required:o.valid.req}),"disabled"in o.valid&&{disabled:o.valid.disabled}),"readonly"in o.valid&&{readOnly:o.valid.readonly}),$(t,"file-upload-input")),{"aria-disabled":!0,tabIndex:-1}))]})),u.jsx("div",I({className:`err-wrp ${x(t,"err-wrp")}`},$(t,"err-wrp")))]}))}))})})]})}function YS({fieldKey:t,attr:e,onBlurHandler:s,resetFieldValue:i,formID:n,styleClasses:a}){const o=e.typ==="hidden"?"text":e.typ,c=D.useRef(null),[h,d]=D.useState(e.val!==void 0?e.val:"");return D.useEffect(()=>{e.val!==void 0&&!e.userinput?d(e.val):!e.val&&!e.userinput?d(e.defaultValue||""):e.conditional&&d(e.val)},[e.val,e.defaultValue,e.userinput,e.conditional]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:a}),u.jsx(_t,{formID:n,fieldKey:t,fieldData:e,noErrMsg:!0,children:u.jsx("div",O(I({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${x(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{children:u.jsx("input",I(O(I(I(I({"data-testid":t,"data-dev-fld":t,id:t,list:`${t}-datalist`,ref:c,className:`${t}-fld no-drg ${x(t,"fld")}`,type:o},"ph"in e&&{placeholder:e.ph}),"name"in e&&{name:e.name}),s&&{onInput:s}),{value:h}),$(t,"fld")))}))})]})}var XS=D.memo(YS);function ZS({fieldKey:t,attr:e,styleClasses:s}){var a,o;const{styleMode:i}=J(je),n=((a=e.valid)==null?void 0:a.hide)||!1;return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:s}),u.jsx("div",O(I({"data-dev-fld-wrp":t,className:`${t}-fld-wrp ${i?"":"drag"} ${x(t,"fld-wrp")} ${n?"fld-hide":""}`},$(t,"fld-wrp")),{children:u.jsx(Fe,{html:e.content||((o=e==null?void 0:e.info)==null?void 0:o.content)})}))]})}function QS({fieldKey:t,formID:e,styleClasses:s}){const n=J(Nt)[t];return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:s}),u.jsx(_t,{formID:e,fieldKey:t,fieldData:n,children:u.jsxs("select",O(I(I(I(I({"data-testid":t,"data-dev-fld":t,id:t,className:`${t}-fld ${x(t,"fld")} no-drg ${n.readonly?"readonly":""}`},"disabled"in n.valid&&{disabled:n.valid.disabled}),"readonly"in n.valid&&{readOnly:n.valid.readonly}),$(t,"fld")),"req"in n.valid&&{required:n.valid.req}),{children:[n.phHide&&u.jsx("option",O(I({"data-dev-slct-optn":t,className:`${t}-slct-optn ${x(t,"slct-optn")}`,value:""},$(t,"slct-optn")),{children:n.ph})),n.opt.map(a=>a.type?u.jsx("optgroup",O(I(I({"data-dev-slct-opt-grp":t,className:`${t}-slct-opt-grp ${x(t,"slct-opt-grp")}`,label:a.title},a.disabled&&{disabled:a.disabled}),I({},$(t,"slct-opt-grp"))),{children:a.childs.map(o=>u.jsx("option",O(I(I({"data-dev-slct-optn":t,className:`${t}-slct-optn ${x(t,"slct-optn")}`,value:o.val,selected:o.check},o.disabled&&{disabled:o.disabled}),I({},$(t,"slct-optn"))),{children:o.lbl}),o.val||o.lbl))}),a.title):u.jsx("option",O(I(I({"data-dev-slct-optn":t,className:`${t}-slct-optn ${x(t,"slct-optn")}`,value:a.val,selected:a.check},a.disabled&&{disabled:a.disabled}),I({},$(t,"slct-optn"))),{children:a.lbl}),a.val||a.lbl))]}))})]})}const sh=(t,e)=>`https://fakeimg.pl/${t}x${e}/?text=${t} x ${e}`;function JS({fieldKey:t,attr:e,styleClasses:s}){var v,_,R,w;const i=D.useRef(),n=D.useRef({extarnalSource:sh(100,40)}),a=J(Ro),o=J(sr),{styleMode:c}=J(je),h=fn(Yu),d=((v=e.valid.hidden)==null?void 0:v.includes(o))||!1,p=mn(s),m=fn(Nt),{width:b,height:f}=e,g=S=>`fields->${t}->classes->.${t}-fld-wrp->${S}`;return a.fieldKey===t&&(n.current.resize=!0,h(S=>De(S,C=>{ua(C,g("max-height"),"")}))),n.current.resize&&!a.fieldKey&&(n.current.resize=!1,h(S=>De(S,C=>{var L,y,P;ua(C,g("height"),`${(L=i==null?void 0:i.current)==null?void 0:L.parentElement.clientHeight}px`),ua(C,g("width"),`${(y=i==null?void 0:i.current)==null?void 0:y.parentElement.clientWidth}px`),ua(C,g("max-height"),`${(P=i==null?void 0:i.current)==null?void 0:P.parentElement.clientHeight}px`)})),m(S=>De(S,C=>{var L,y;C[t].height=(L=i==null?void 0:i.current)==null?void 0:L.parentElement.clientHeight,C[t].width=(y=i==null?void 0:i.current)==null?void 0:y.parentElement.clientWidth})),n.current.extarnalSource=sh((_=i==null?void 0:i.current)==null?void 0:_.parentElement.clientWidth,(R=i==null?void 0:i.current)==null?void 0:R.parentElement.clientHeight)),D.useEffect(()=>{var S,C;n.current.extarnalSource=sh((S=i==null?void 0:i.current)==null?void 0:S.parentElement.clientWidth,(C=i==null?void 0:i.current)==null?void 0:C.parentElement.clientHeight),m(L=>De(L,y=>{var P,A;y[t].height=(P=i==null?void 0:i.current)==null?void 0:P.parentElement.clientHeight,y[t].width=(A=i==null?void 0:i.current)==null?void 0:A.parentElement.clientWidth}))},[]),D.useEffect(()=>{!b||!f||(n.current.extarnalSource=sh(b,f))},[b,f]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:p}),u.jsx("div",O(I({"data-dev-fld-wrp":t,ref:i,className:`${t}-fld-wrp ${c?"":"drag"} ${d?"fld-hide":""} ${x(t,"fld-wrp")}`},$(t,"fld-wrp")),{children:u.jsx("img",O(I({"data-dev-img":t,className:`${t}-img ${x(t,"img")}`,src:(e==null?void 0:e.bg_img)||((w=n.current)==null?void 0:w.extarnalSource),alt:e==null?void 0:e.alt},$(t,"img")),{width:e==null?void 0:e.width,height:e==null?void 0:e.height,draggable:!1}))}))]})}function KS({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:a}){const[o,c]=D.useState(t.val||""),h=D.useRef([]),[d,p]=D.useState({checked:[]});h.current=t.opt.map((b,f)=>{var g;return(g=h.current[f])!=null?g:D.createRef()});const m=(b,f)=>{const{checked:g}=b.target;if(g&&t.inpType==="checkbox")d.checked.push(f),c(null);else{const v=d.checked.indexOf(f);d.checked.splice(v,1),p({checked:d.checked})}g&&t.inpType==="radio"?(d.checked=[],c(b.target.value)):c(""),Tt(n)};return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:a}),u.jsx(_t,{formID:i,fieldKey:n,fieldData:t,children:u.jsx("div",O(I({"data-testid":`${n}-inp-fld-wrp`,"data-dev-inp-fld-wrp":n,className:`${n}-inp-fld-wrp ${x(n,"inp-fld-wrp")}`},$(n,"inp-fld-wrp")),{children:u.jsx("div",O(I({"data-testid":`${n}-ic`,"data-dev-ic":n,className:`${n}-ic ${x(n,"ic")}`},$(n,"ic")),{children:t.opt.map((b,f)=>u.jsxs("div",O(I({"data-testid":`${n}-inp-opt`,"data-dev-inp-opt":n,className:`${n}-inp-opt ${x(n,"inp-opt")}`},$(n,"inp-opt")),{children:[u.jsx("input",O(I(O(I({className:`${n}-img-inp ${x(n,"img-inp")}`,type:t.inpType,"aria-label":b.lbl,id:`${n}-img-wrp-${f}`,name:n,value:b.val||b.lbl},t.valid.req&&{required:!0}),{checked:o===b.val||d.checked.includes(f)||(b==null?void 0:b.check),disabled:t.valid.disabled,onChange:g=>m(g,f)}),$(n,"img-inp")),{"data-dev-img-inp":n})),u.jsxs("label",O(I({"data-testid":`${n}-img-wrp`,"data-dev-img-wrp":n,htmlFor:`${n}-img-wrp-${f}`,className:`${n}-img-wrp ${x(n,"img-wrp")}`},$(n,"img-wrp")),{children:[u.jsx("span",O(I({"data-testid":`${n}-check-box`,"data-dev-check-box":n,className:`${n}-check-box ${x(n,"check-box")}`},$(n,"check-box")),{children:u.jsx("img",I({src:t.tickImgSrc,alt:"","data-testid":`${n}-check-img`,"data-dev-check-img":n,className:`${n}-check-img ${x(n,"check-img")}`},$(n,"check-img")))})),u.jsxs("span",O(I({"data-testid":`${n}-img-card-wrp`,"data-dev-img-card-wrp":n,className:`${n}-img-card-wrp ${x(n,"img-card-wrp")}`},$(n,"img-card-wrp")),{children:[u.jsx("img",I({src:b.img,alt:b.lbl,"aria-label":b.lbl,"data-testid":`${n}-select-img`,"data-dev-select-img":n,className:`${n}-select-img ${x(n,"select-img")}`},$(n,"select-img"))),!t.optLblHide&&u.jsx("div",O(I({"data-testid":`${n}-tc`,"data-dev-tc":n,className:`${n}-tc ${x(n,"tc")}`},$(n,"tc")),{children:u.jsx("span",O(I({"data-testid":`${n}-img-title`,"data-dev-img-title":n,className:`${n}-img-title ${x(n,"img-title")}`},$(n,"img-title")),{children:u.jsx(Fe,{html:b.lbl})}))}))]}))]}))]}),`opr-${f+22}`))}))}))})]})}function tR({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const a=J(Xu),[o,c]=D.useState(""),d=J(Nt)[t],[p,m]=D.useState(!1),b=Nm(),{currency:f,redirect_url:g}=d.config||{};return D.useEffect(()=>{if(!s.payIntegID){c(""),b(`field-settings/${t}`);return}const v=a==null?void 0:a.find(_=>_.id&&s.payIntegID&&Number(_.id)===Number(s.payIntegID));if(v){const _=v.apiKey;c(_)}},[s.payIntegID]),D.useEffect(()=>{if(!o){sl({fieldKey:t,errorKey:"mollieApiKeyMissing",errorMsg:yi("Mollie API key is missing"),errorUrl:`field-settings/${t}`});return}g||sl({fieldKey:t,errorKey:"mollieRedirectUrlMissing",errorMsg:yi("Mollie Redirect Url is not Selected"),errorUrl:`field-settings/${t}`}),m(!1),Zu(t,"mollieApiKeyMissing"),Tt(t)},[o,f,g]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:n}),u.jsxs(_t,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,isBuilder:i,children:[o&&!p&&u.jsx("div",{className:`${t}-mollie-wrp`,children:u.jsxs("button",{"data-dev-mollie-btn":t,type:"button",className:`${t}-mollie-btn`,children:[u.jsx("svg",{"data-dev-mollie-icn":t,version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 80 80",xmlSpace:"preserve",className:`${t}-mollie-icn`,children:u.jsx("path",{strokeWidth:"6",fill:"currentColor",d:"M74.79,39.15v21.4c0,0.36-0.07,0.46-0.44,0.46c-3.59-0.02-7.21-0.02-10.8,0c-0.41,0-0.51-0.1-0.51-0.51  c0.02-6.94,0-13.86,0.02-20.79c0-2.89-0.97-5.31-3.25-7.09c-2.62-2.06-5.56-2.5-8.64-1.21c-3.03,1.26-4.76,3.62-5.24,6.89  c-0.05,0.49-0.07,0.99-0.07,1.48c0,6.89,0,13.78,0.02,20.7c0,0.41-0.1,0.53-0.53,0.53c-3.57-0.02-7.16-0.02-10.75,0  c-0.36,0-0.46-0.1-0.46-0.49V39.73c0.02-2.89-0.97-5.34-3.28-7.13c-2.62-2.04-5.56-2.48-8.61-1.19c-3.03,1.26-4.76,3.62-5.22,6.87  c-0.07,0.51-0.07,1.02-0.07,1.53c0,6.89-0.02,13.81,0,20.7c0,0.41-0.1,0.51-0.51,0.51c-3.59-0.02-7.18-0.02-10.77,0  c-0.36,0-0.46-0.1-0.46-0.46c0.02-7.3-0.05-14.61,0.05-21.94c0.05-4.97,1.89-9.37,5.29-13.01c4.54-4.9,10.19-7.09,16.86-6.53  c4.76,0.39,8.83,2.35,12.28,5.63c0.24,0.24,0.36,0.24,0.61,0c4.78-4.46,10.41-6.38,16.91-5.53c8.83,1.14,15.8,7.93,17.28,16.72  C74.69,36.99,74.79,38.06,74.79,39.15z"})})," ",d.txt]})}),!p&&!o&&u.jsxs("p",{children:["Please select a Mollie account from",u.jsx("strong",{children:" Field Settings "}),"to load Mollie field."]}),p&&u.jsx("p",{children:"Loading mollie..."})]})]})}var Pr,to,yt,rn,Gn,ia,nc,dm,Ds,pi,eu,kb,su,Gb,iu,Bb,nu,Ub,ru,Vb,rc,um,eo,xh,au,zb,ou,Wb,so,Sh;class eR{constructor(e,s){E(this,Gn);E(this,nc);E(this,Ds);E(this,eu);E(this,su);E(this,iu);E(this,nu);E(this,ru);E(this,rc);E(this,eo);E(this,au);E(this,ou);E(this,so);E(this,Pr,"");E(this,to,"");E(this,yt,{namespace:"paypal",payType:"payment",currency:"USD",amount:1,shipping:0,tax:0,style:{label:"paypal",color:"gold",shape:"rect",layout:"vertical"}});E(this,rn,null);Object.assign(r(this,yt),s),typeof e=="string"?T(this,Pr,document.querySelector(e)):T(this,Pr,e),T(this,to,`#form-${l(this,Ds,pi).call(this)}`),this.init()}init(){const{namespace:e}=r(this,yt),s=window[e],i={style:l(this,ou,Wb).call(this)};l(this,nc,dm).call(this)&&(i.fundingSource=s.FUNDING[r(this,yt).style.payBtn]),l(this,Gn,ia).call(this)?i.createSubscription=(n,a)=>l(this,eu,kb).call(this,n,a):i.createOrder=(n,a)=>l(this,au,zb).call(this,n,a),i.onClick=(n,a)=>l(this,su,Gb).call(this,a),i.onApprove=(n,a)=>l(this,iu,Bb).call(this,n,a),r(this,yt).onInit&&(i.onInit=r(this,yt).onInit),s&&s.Buttons(i).render(r(this,Pr))}destroy(){r(this,Pr).innerHTML=""}reset(){this.destroy(),this.init()}}Pr=new WeakMap,to=new WeakMap,yt=new WeakMap,rn=new WeakMap,Gn=new WeakSet,ia=function(){return r(this,yt).payType==="subscription"},nc=new WeakSet,dm=function(){return r(this,yt).style.layout==="standalone"},Ds=new WeakSet,pi=function(){return r(this,yt).contentId},eu=new WeakSet,kb=function(e,s){if(typeof validateForm!="undefined"&&!validateForm({form:l(this,Ds,pi).call(this)}))throw new Error("form validation is failed!");return s.subscription.create({plan_id:r(this,yt).planId})},su=new WeakSet,Gb=function(e){return Mo(this,null,function*(){const s=l(this,Ds,pi).call(this);try{yield isFormValidatedWithoutError(s)}catch(a){return e.reject()}const i=yield saveFormProgress(s),n=i==null?void 0:i[s];return n!=null&&n.success?(n.entry_id&&T(this,rn,n.entry_id),e.resolve()):e.reject()})},iu=new WeakSet,Bb=function(e,s){const i=document.getElementById(`${l(this,Ds,pi).call(this)}`);i.classList.add("pos-rel","form-loading"),(l(this,Gn,ia).call(this)?s.subscription.get():s.order.capture()).then(a=>{const o=l(this,ru,Vb).call(this,a);o&&l(this,nu,Ub).call(this,o,a)}).catch(a=>{i.classList.remove("pos-rel","form-loading")}).finally(()=>{i.classList.remove("pos-rel","form-loading")})},nu=new WeakSet,Ub=function(e,s){var o;const i=bf_globals[l(this,Ds,pi).call(this)],n=document.getElementById(`form-${l(this,Ds,pi).call(this)}`),a=(o=l(this,Ds,pi).call(this))==null?void 0:o.split("_")[1];if(typeof n!="undefined"&&n!==null){r(this,rn)&&(i.entryId=r(this,rn));const c=bfSelect(`input[name="${r(this,yt).fieldKey}"]`,n);c?c.value=e:setHiddenFld({name:r(this,yt).fieldKey,value:e,type:"text"},n);let h=bfSelect('button[type="submit"]',n);h||(h=document.createElement("button"),h.setAttribute("type","submit"),h.style.display="none",n.append(h)),h.click();const d={formID:a,transactionID:e,payment_name:"paypal",payment_type:l(this,Gn,ia).call(this)?"subscription":"order",payment_response:s,entry_id:r(this,rn),fieldKey:r(this,yt).fieldKey},p=new URL(i==null?void 0:i.ajaxURL);p.searchParams.append("_ajax_nonce",i==null?void 0:i.nonce),p.searchParams.append("action","bitforms_payment_insert"),fetch(p,{method:"POST",body:JSON.stringify(d)}).then(()=>{T(this,rn,null);const m=bfSelect(`input[name="${r(this,yt).fieldKey}"]`,n);m&&(m.value="",m.setAttribute("value",""))})}},ru=new WeakSet,Vb=function(e){let s=null;if(l(this,Gn,ia).call(this)&&e.id)s=e.id;else if(e.purchase_units&&e.purchase_units[0]&&e.purchase_units[0].payments){const{payments:i}=e.purchase_units[0];i.captures&&i.captures[0]&&(s=i.captures[0].id)}return s},rc=new WeakSet,um=function(e,s){var i;return(i=document.querySelector(s))==null?void 0:i.querySelector(e)},eo=new WeakSet,xh=function(e){if(e){const s=window.bf_globals[l(this,Ds,pi).call(this)].fields[e].fieldName;let i=l(this,rc,um).call(this,`[name="${s}"]`,r(this,to));if(i&&i.type==="radio"&&(i=l(this,rc,um).call(this,`[name="${s}"]:checked`,r(this,to))),i&&i.value)return i.value}return""},au=new WeakSet,zb=function(e,s){var v;const{currency:i,amount:n,shipping:a,tax:o}=r(this,yt),c=l(this,eo,xh).call(this,r(this,yt).amountFld)||n,h=l(this,eo,xh).call(this,r(this,yt).shippingVal)||a,d=l(this,eo,xh).call(this,r(this,yt).taxVal)||o,p=l(this,so,Sh).call(this,c).toFixed(2)*1,m=l(this,so,Sh).call(this,h).toFixed(2)*1,b=(l(this,so,Sh).call(this,d)*p/100).toFixed(2)*1,f=(p+m+b).toFixed(2)*1,g=(v=l(this,Ds,pi).call(this))==null?void 0:v.split("_")[1];return s.order.create({purchase_units:[{description:`form-id:${g};entry-id:${r(this,rn)};field-key:${r(this,yt).fieldKey}`,amount:{currency_code:i,value:f,breakdown:{item_total:{currency_code:i,value:p},shipping:{currency_code:i,value:m},tax_total:{currency_code:i,value:b}}}}]})},ou=new WeakSet,Wb=function(){const{label:e,color:s,shape:i,layout:n,height:a}=r(this,yt).style,o={label:l(this,Gn,ia).call(this)?"subscribe":e,color:s,shape:i};return l(this,nc,dm).call(this)||(o.layout=n),a!==void 0&&(o.height=Number(a)),o},so=new WeakSet,Sh=function(e){const s=/[\d,.]*\d(?:\.\d+)?/,i=e==null?void 0:e.match(s);if(i){const n=i[0].replace(/,/g,"");return parseFloat(n)}return parseFloat(0)};function sR({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const a=J(Xu),[o,c]=D.useState(""),d=J(Nt)[t],p=D.useRef(null),m=D.useRef(null),[b,f]=D.useState(!1),[g,v]=D.useState(!1),_=(d==null?void 0:d.payType)==="subscription",{locale:R,currency:w,disableFunding:S}=d||{};return D.useEffect(()=>{if(!s.payIntegID){c("");return}const C=a==null?void 0:a.find(L=>L.id&&s.payIntegID&&Number(L.id)===Number(s.payIntegID));if(C){const L=C.clientID;c(L)}},[s.payIntegID]),D.useEffect(()=>{if(!o){sl({fieldKey:t,errorKey:"paypalClientIdMissing",errorMsg:yi("PayPal Client ID is missing"),errorUrl:`field-settings/${t}`});return}v(!0),Zu(t,"paypalClientIdMissing");const C={"client-id":o};d!=null&&d.locale&&(C.locale=d.locale),d!=null&&d.disableFunding&&(C["disable-funding"]=d.disableFunding),_&&(C.intent="subscription",C.vault="true"),!_&&(d!=null&&d.currency)&&(C.currency=d.currency);const y={src:`https://www.paypal.com/sdk/js?${new URLSearchParams(C).toString()}`,integrity:"",id:`bf-paypal-script-${t}`,scriptInGrid:!1,attr:{"data-namespace":t},callback:()=>{Tt(t),f(!0),v(!1)}};return Bc(y),()=>{Qu("bf-paypal-script")}},[o,R,w,S]),D.useEffect(()=>{if(!b||g)return;p!=null&&p.current||(p.current=St(`#${t}-paypal-wrp`));const C=m.current,L=p.current;if((!o||C&&L&&"destroy"in C)&&(C.destroy(),Tt(t)),!o)return f(!1);const{style:y,currency:P}=d,A={namespace:t,style:y,currency:P,payType:"payment",shipping:0,tax:0,onInit:()=>{Tt(t)}};m.current=new eR(L,A)},[b,g]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:n}),u.jsxs(_t,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,noErrMsg:!0,isBuilder:i,children:[b&&o&&!g&&u.jsx("div",{className:`${t}-paypal-wrp`,children:u.jsx("div",{ref:p,id:`${t}-paypal-wrp`})}),!g&&(!b||!o)&&u.jsxs("p",{children:["Please select a PayPal account from",u.jsx("strong",{children:" Field Settings "}),"to load PayPal field."]}),g&&u.jsx("p",{children:"Loading PayPal..."})]})]})}var io,lu,ym,qe,as,an,Bn,ac,no,on,cu,Se,oc,zt,Si,Ri,lc,ii,ro,ao,oo,cc,Ci,hc,K,lo,dc,co,ln,ni,hu,Hb,se,Ee,Ne,Je,du,qb,uu,Yb,pu,Xb,mu,Zb,ho,Rh,fu,Qb,Dr,Xo,uo,Ch,uc,pm,gu,Jb,Eu,Kb,po,Oh,pc,mm,cn,dr,mc,fm,fc,gm,bu,tI,Iu,eI,vu,sI,gc,Em,_u,Un,na,Ec,bm,wu,iI,bc,Im,Vn,ra,Tu,nI,zn,aa,gs,Vs,mo,Lh,Ft,Zt,Wn,oa,Hn,la,Pe,Ke,Mm,nR,Ic,vm,xu,rI,vc,_m,_c,wm,Su,aI,Ru,oI,qn,ca,Cu,lI,wc,Tm,Ou,cI;class iR{constructor(e,s){E(this,hu);E(this,se);E(this,Ne);E(this,du);E(this,uu);E(this,pu);E(this,mu);E(this,ho);E(this,fu);E(this,Dr);E(this,uo);E(this,uc);E(this,gu);E(this,Eu);E(this,po);E(this,pc);E(this,cn);E(this,mc);E(this,fc);E(this,bu);E(this,Iu);E(this,vu);E(this,gc);E(this,Un);E(this,Ec);E(this,wu);E(this,bc);E(this,Vn);E(this,Tu);E(this,zn);E(this,gs);E(this,mo);E(this,Ft);E(this,Wn);E(this,Hn);E(this,Pe);E(this,Mm);E(this,Ic);E(this,xu);E(this,vc);E(this,_c);E(this,Su);E(this,Ru);E(this,qn);E(this,Cu);E(this,wc);E(this,Ou);E(this,io,"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>");E(this,lu,"www.cloudflare.com/cdn-cgi/trace");E(this,ym,"api.geonames.org/countryCodeJSON?username=bitcodezoho1");E(this,qe,null);E(this,as,null);E(this,an,null);E(this,Bn,null);E(this,ac,null);E(this,no,null);E(this,on,null);E(this,cu,null);E(this,Se,null);E(this,oc,null);E(this,zt,null);E(this,Si,null);E(this,Ri,null);E(this,lc,30);E(this,ii,[]);E(this,ro,{});E(this,ao,{});E(this,oo,!1);E(this,cc,null);E(this,Ci,!1);E(this,hc,[]);E(this,K,{maxHeight:370,detectCountryByIp:!1,detectCountryByGeo:!1,optionFlagImage:!0,searchCountryPlaceholder:"Search Country",noCountryFoundText:"No Country Found",searchClearable:!0,defaultCountryKey:"",attributes:{},classNames:{}});E(this,lo,"");E(this,dc,null);E(this,co,"");E(this,ln,null);E(this,ni,null);E(this,_u,e=>/[0-9]/.test(e));Object.assign(r(this,K),s),T(this,ln,s.document||document),T(this,ni,s.window||window),T(this,lo,s.assetsURL||""),typeof e=="string"?T(this,qe,r(this,ln).querySelector(e)):T(this,qe,e),typeof r(this,K).options=="string"&&(r(this,K).options=l(this,hu,Hb).call(this,r(this,K).options)),r(this,K).options=r(this,K).options.filter(i=>!i.hide),T(this,ii,[...r(this,K).options]),T(this,ro,l(this,gu,Jb).call(this)),T(this,ao,l(this,Eu,Kb).call(this)),this.fieldKey=r(this,K).fieldKey,T(this,cc,r(this,K).contentId),this.init()}init(){T(this,oc,l(this,se,Ee).call(this,`.${this.fieldKey}-phone-inner-wrp`)),T(this,zt,l(this,se,Ee).call(this,`.${this.fieldKey}-phone-number-input`)),T(this,as,l(this,se,Ee).call(this,`.${this.fieldKey}-phone-hidden-input`)),T(this,an,l(this,se,Ee).call(this,`.${this.fieldKey}-input-clear-btn`)),T(this,no,l(this,se,Ee).call(this,`.${this.fieldKey}-selected-country-img`)),T(this,cu,l(this,se,Ee).call(this,`.${this.fieldKey}-option-search-wrp`)),T(this,Se,l(this,se,Ee).call(this,`.${this.fieldKey}-opt-search-input`)),T(this,Bn,l(this,se,Ee).call(this,`.${this.fieldKey}-dpd-wrp`)),T(this,ac,l(this,se,Ee).call(this,`.${this.fieldKey}-option-wrp`)),T(this,Si,l(this,se,Ee).call(this,`.${this.fieldKey}-search-clear-btn`)),T(this,Ri,l(this,se,Ee).call(this,`.${this.fieldKey}-option-list`)),this.setMenu({open:!1}),l(this,Ne,Je).call(this,r(this,qe),"keydown",e=>{l(this,mu,Zb).call(this,e)}),l(this,Ne,Je).call(this,r(this,Bn),"click",e=>{l(this,wc,Tm).call(this,e)}),l(this,Ne,Je).call(this,r(this,Bn),"keyup",e=>{l(this,wc,Tm).call(this,e)}),l(this,du,qb).call(this),r(this,K).defaultCountryKey&&this.setSelectedCountryItem(r(this,K).defaultCountryKey),l(this,Ne,Je).call(this,r(this,zt),"blur",e=>{l(this,bu,tI).call(this,e)}),l(this,Ne,Je).call(this,r(this,zt),"input",e=>{l(this,Iu,eI).call(this,e)}),l(this,Ne,Je).call(this,r(this,zt),"keydown",e=>{l(this,vu,sI).call(this,e)}),l(this,Ne,Je).call(this,r(this,zt),"focusout",e=>{l(this,Ec,bm).call(this,e)}),r(this,K).selectedCountryClearable&&l(this,Ne,Je).call(this,r(this,an),"click",e=>{l(this,fu,Qb).call(this,e)}),r(this,K).detectCountryByIp&&l(this,uu,Yb).call(this),r(this,K).detectCountryByGeo&&l(this,pu,Xb).call(this),r(this,K).searchClearable&&(l(this,Pe,Ke).call(this,r(this,Se),"padding-right","35px"),l(this,Pe,Ke).call(this,r(this,Si),"display","none"),l(this,Ne,Je).call(this,r(this,Si),"click",()=>{this.searchOptions("")})),r(this,Se)&&(r(this,Se).value=""),l(this,Ne,Je).call(this,r(this,Se),"keyup",e=>{l(this,Ru,oI).call(this,e)}),T(this,io,r(this,K).placeholderImage?r(this,K).placeholderImage:r(this,io)),r(this,ni).observeElm(r(this,as),"value",(e,s)=>{l(this,fc,gm).call(this,e,s)})}isValidated(){return l(this,Ec,bm).call(this,{target:r(this,as)})}setSelectedCountryItem(e){if(this.value="",T(this,on,e),!r(this,on)){l(this,vc,_m).call(this);return}const s=l(this,Vn,ra).call(this);s&&(r(this,K).selectedFlagImage&&(r(this,no).src=`${r(this,lo)}/${s.img}`),l(this,xu,rI).call(this,s.code),this.setMenu({open:!1}),r(this,Ci)&&r(this,zt).focus())}searchOptions(e){l(this,Su,aI).call(this,e);let s=[];e?(s=r(this,K).options.filter(i=>{const n=e.toLowerCase(),a=(i.lbl||"").toLowerCase(),o=(i.val||"").toLowerCase(),c=i.code||"";if(a.includes(n)||o.includes(n)||c.includes(n))return!0}),s.length||(s=[{i:0,lbl:r(this,K).noCountryFoundText}]),T(this,ii,s),r(this,K).searchClearable&&l(this,Pe,Ke).call(this,r(this,Si),"display","grid")):(T(this,ii,r(this,K).options),r(this,K).searchClearable&&l(this,Pe,Ke).call(this,r(this,Si),"display","none")),l(this,_c,wm).call(this)}setMenu({open:e}){l(this,Pe,Ke).call(this,r(this,ac),"max-height",`${e?r(this,K).maxHeight:0}px`),e?(l(this,Cu,lI).call(this),l(this,gs,Vs).call(this,r(this,qe),"menu-open"),l(this,Ne,Je).call(this,r(this,ln),"click",s=>l(this,uc,pm).call(this,s)),l(this,Ft,Zt).call(this,r(this,Se),"tabindex",0),l(this,Ft,Zt).call(this,r(this,Si),"tabindex",0),l(this,Ft,Zt).call(this,r(this,Bn),"aria-expanded",!0),l(this,_c,wm).call(this)):(r(this,qe).classList.remove("menu-open"),r(this,ln).removeEventListener("click",l(this,uc,pm)),setTimeout(()=>{this.searchOptions("")},100),l(this,Ft,Zt).call(this,r(this,Se),"tabindex",-1),l(this,Ft,Zt).call(this,r(this,Si),"tabindex",-1),l(this,Ft,Zt).call(this,r(this,Bn),"aria-expanded",!1))}set value(e){r(this,as).value=e||"",l(this,Ft,Zt).call(this,r(this,as),"value",e||"")}get value(){return r(this,as).value}destroy(){r(this,Ri)&&(r(this,Ri).innerHTML=""),this.value="",T(this,Ci,!1),l(this,Ou,cI).call(this)}reset(e){l(this,vc,_m).call(this),this.destroy(),this.value=e,this.init()}}io=new WeakMap,lu=new WeakMap,ym=new WeakMap,qe=new WeakMap,as=new WeakMap,an=new WeakMap,Bn=new WeakMap,ac=new WeakMap,no=new WeakMap,on=new WeakMap,cu=new WeakMap,Se=new WeakMap,oc=new WeakMap,zt=new WeakMap,Si=new WeakMap,Ri=new WeakMap,lc=new WeakMap,ii=new WeakMap,ro=new WeakMap,ao=new WeakMap,oo=new WeakMap,cc=new WeakMap,Ci=new WeakMap,hc=new WeakMap,K=new WeakMap,lo=new WeakMap,dc=new WeakMap,co=new WeakMap,ln=new WeakMap,ni=new WeakMap,hu=new WeakSet,Hb=function(e){const s=e.split("->");let i=r(this,ni);return s.forEach(n=>{i=i[n]}),i},se=new WeakSet,Ee=function(e){return r(this,qe).querySelector(e)},Ne=new WeakSet,Je=function(e,s,i){e&&(e.addEventListener(s,i),r(this,hc).push({selector:e,eventType:s,cb:i}))},du=new WeakSet,qb=function(){r(this,as).value&&(l(this,fc,gm).call(this,"",r(this,as).value),r(this,K).selectedCountryClearable&&l(this,Pe,Ke).call(this,r(this,an),"display","grid"))},uu=new WeakSet,Yb=function(){const{protocol:e}=r(this,ni).location;fetch(`${e}//${r(this,lu)}`).then(s=>s.text()).then(s=>{const i=s.trim().split(`
`).reduce((n,a)=>(a=a.split("="),n[a[0]]=a[1],n),{});this.setSelectedCountryItem(i.loc)})},pu=new WeakSet,Xb=function(){navigator.geolocation.getCurrentPosition(e=>{const{latitude:s,longitude:i}=e.coords,{protocol:n}=r(this,ni).location,a=n==="https:"?`${n}//secure`:`${n}//api`;fetch(`${a}.geonames.org/countryCodeJSON?username=bitcodezoho1&lat=${s}&lng=${i}`).then(o=>o.json()).then(o=>{this.setSelectedCountryItem(o.countryCode)})})},mu=new WeakSet,Zb=function(e){var a,o;const s=r(this,ln).activeElement;let i=null;const n=l(this,qn,ca).call(this);if(e.target!==r(this,zt)){if(n){const c=Number(s.dataset.index||-1);if(e.key==="ArrowDown"||!e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Se))i=l(this,se,Ee).call(this,".option:not(.disabled-opt)");else if(s.classList.contains("option")){const h=l(this,uo,Ch).call(this,c,"next"),d=l(this,Dr,Xo).call(this,h);d?i=d:h+1<r(this,ii).length&&((a=this.virtualOptionList)==null||a.scrollToIndex(h),setTimeout(()=>{const p=l(this,Dr,Xo).call(this,h);p&&p.focus()},50))}}else if(e.key==="ArrowUp"||e.shiftKey&&e.key==="Tab"){if(e.preventDefault(),s===r(this,Se))i=r(this,zt),l(this,qn,ca).call(this)&&this.setMenu({open:!1});else if(s.classList.contains("option")){const h=l(this,uo,Ch).call(this,c,"previous"),d=l(this,Dr,Xo).call(this,h);d?i=d:h>0?((o=this.virtualOptionList)==null||o.scrollToIndex(h),setTimeout(()=>{const p=l(this,Dr,Xo).call(this,h);p&&p.focus()},50)):d||(i=r(this,Se))}}else e.key==="Escape"&&this.setMenu({open:!1})}else if(e.key>="a"&&e.key<="z"){clearTimeout(r(this,dc)),T(this,co,r(this,co)+e.key),T(this,dc,setTimeout(()=>{T(this,co,"")},300));const c=r(this,K).options.find(h=>!h.disabled&&h.lbl.toLowerCase().startsWith(r(this,co)));c&&this.setSelectedCountryItem(c.i)}else if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();const c=l(this,bc,Im).call(this),h=e.key==="ArrowDown"?"next":"previous",d=l(this,uo,Ch).call(this,c,h);d>-1&&d<r(this,K).options.length&&(this.value=r(this,K).options[d].val)}i&&i.focus()}},ho=new WeakSet,Rh=function(e,s){const i=new Event(s);e.dispatchEvent(i)},fu=new WeakSet,Qb=function(){r(this,zt).value="",this.setSelectedCountryItem(""),l(this,ho,Rh).call(this,r(this,zt),"input"),l(this,ho,Rh).call(this,r(this,as),"blur")},Dr=new WeakSet,Xo=function(e){return l(this,se,Ee).call(this,`.${this.fieldKey}-option-list .option[data-index="${e}"]`)},uo=new WeakSet,Ch=function(e=-1,s){if(s==="next"){const i=r(this,K).options.length;for(let n=e+1;n<i;n+=1)if(!r(this,K).options[n].disabled)return n}else if(s==="previous"){for(let i=e-1;i>=0;i-=1)if(!r(this,K).options[i].disabled)return i}},uc=new WeakSet,pm=function(e){r(this,qe).contains(e.target)||this.setMenu({open:!1})},gu=new WeakSet,Jb=function(){return r(this,K).options.reduce((e,s)=>{if(!e[s.code]){let{code:i}=s;i[0]==="+"&&(i=i.substring(1)),!(i in e)&&s.ptrn&&(e[i]=s.i)}return e},{})},Eu=new WeakSet,Kb=function(){const e=r(this,K).options,s={},i={};return e.forEach(n=>{const a=n.code;s[a]||(s[a]=[]),s[a].push(n)}),Object.keys(s).forEach(n=>{s[n].length>1&&(i[n]=s[n])}),i},po=new WeakSet,Oh=function(e){let s=l(this,cn,dr).call(this,e);s[0]==="+"&&(s=s.substring(1,4));let i="";for(let n=3;n>0;n-=1)if(i=s.substring(0,n),i in r(this,ro))return i;return""},pc=new WeakSet,mm=function(e){let s=l(this,po,Oh).call(this,e);return s&&s[0]!=="+"&&(s=`+${s}`),s},cn=new WeakSet,dr=function(e){return e.replace(/[^\d+]/g,"")},mc=new WeakSet,fm=function(e){return e.replace(/[^\d]/g,"")},fc=new WeakSet,gm=function(e,s){l(this,pc,mm).call(this,s)&&e!==s&&l(this,gc,Em).call(this,l(this,cn,dr).call(this,s)),typeof bit_conditionals!="undefined"&&bit_conditionals({target:r(this,as)})},bu=new WeakSet,tI=function(){if(this.value.length>3){const e=l(this,cn,dr).call(this,this.value),s=l(this,po,Oh).call(this,e);r(this,zt).value=l(this,Un,na).call(this,s,e,r(this,K).inputFormat)}l(this,ho,Rh).call(this,r(this,as),"blur")},Iu=new WeakSet,eI=function(e){const{value:s}=e.target;s&&r(this,K).selectedCountryClearable?l(this,Pe,Ke).call(this,r(this,an),"display","grid"):r(this,K).selectedCountryClearable&&l(this,Pe,Ke).call(this,r(this,an),"display","none"),l(this,gc,Em).call(this,s)},vu=new WeakSet,sI=function(e){(e.key==="Backspace"||e.key==="Delete")&&T(this,oo,!0)},gc=new WeakSet,Em=function(e){let s=l(this,Vn,ra).call(this),i="";r(this,Ci)?i=s.code:i=l(this,pc,mm).call(this,e);const n=l(this,wu,iI).call(this,e);if((!r(this,Ci)||!n)&&n!==(s==null?void 0:s.i)&&(this.setSelectedCountryItem(n),s=l(this,Vn,ra).call(this)),i&&s){let a=s.frmt;const o=r(this,K).valueFormat||"";a||(a=r(this,K).inputFormat||"");const c=l(this,Un,na).call(this,i,e,a);if(o){const h=l(this,Un,na).call(this,i,e,o);this.value=h}else this.value=e;r(this,zt).value=c}},_u=new WeakMap,Un=new WeakSet,na=function(e,s,i=""){const n=l(this,cn,dr).call(this,s);let a="",o=0;const c=n[0]==="+"?n.substring(1):n;for(let h=0;h<i.length&&!(o>=c.length);h+=1){const d=i[h];if(d==="c"){const p=e[0]==="+"?e.substring(1):e;a+=p,o+=p.length,a+=/[ \-().+/*[\]{}~|\\x]/.test(i[h+1]||"")&&p.length===c.length&&!r(this,oo)?i[h+1]:""}else if(d==="#"){if(!r(this,_u).call(this,c[o]))break;a+=c[o],o+=1}else c[o]===d?(a+=d,o+=1):a+=d}return o<c.length&&(a+=c.substring(o)),T(this,oo,!1),a},Ec=new WeakSet,bm=function(e){const s=l(this,mc,fm).call(this,e.target.value),i=l(this,Tu,nI).call(this);let n="required";const a=l(this,Vn,ra).call(this);if(a){const o=s.substring(l(this,mc,fm).call(this,a.code).length);if(a.ptrn&&o){const c=a.ptrn.replace(/\$_bf_\$/g,"\\");n=new RegExp(`^(${c})$`).test(o)?"":"invalid"}o||(n="required")}return i.valid.regexr&&n&&(n=typeof regexPatternValidation!="undefined"?regexPatternValidation(s,i):n),n},wu=new WeakSet,iI=function(e){let s=l(this,po,Oh).call(this,e);s&&s[0]!=="+"&&(s=`+${s}`);let i=r(this,ro)[s.substring(1)]||"";if(r(this,ao)[s]){const n=r(this,ao)[s],a=l(this,cn,dr).call(this,e).substring(s.length);n.forEach(o=>{if(o.ptrn&&a){const c=o.ptrn.replace(/\$_bf_\$/g,"\\").trim();if(new RegExp(`^(${c})$`).test(a))return i=o.i,i}})}return i},bc=new WeakSet,Im=function(){const e=r(this,ii).findIndex(s=>s.i===r(this,on));return e===-1?0:e},Vn=new WeakSet,ra=function(){return r(this,K).options.find(e=>e.i===r(this,on))},Tu=new WeakSet,nI=function(){var e;return(e=r(this,ni).bf_globals[r(this,cc)])==null?void 0:e.fields[this.fieldKey]},zn=new WeakSet,aa=function(e){return r(this,ln).createElement(e)},gs=new WeakSet,Vs=function(e,s){e.classList.add(s)},mo=new WeakSet,Lh=function(e,s){e.textContent=s},Ft=new WeakSet,Zt=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Wn=new WeakSet,oa=function(e,s){s.trim().split(/\b\s+\b/g).forEach(i=>l(this,gs,Vs).call(this,e,i))},Hn=new WeakSet,la=function(e,s){const i=s.length;if(i)for(let n=0;n<i;n+=1)l(this,Ft,Zt).call(this,e,s[n].key,s[n].value)},Pe=new WeakSet,Ke=function(e,s,i){var n;(n=e==null?void 0:e.style)==null||n.setProperty(s,i,"important")},Mm=new WeakSet,nR=function(){const e=l(this,se,Ee).call(this,".option");if(!e)return;const s=r(this,ni).getComputedStyle(e),i=parseFloat(s.marginTop)+parseFloat(s.marginBottom),n=e.offsetHeight+i||0;n!==r(this,lc)&&(T(this,lc,n),r(this,Ri).innerHTML="",l(this,Ic,vm).call(this))},Ic=new WeakSet,vm=function(){var s;if(!r(this,Ri))return;r(this,Ri).innerHTML="";const e=r(this,ii).map((i,n)=>{const a=l(this,zn,aa).call(this,"li");if(l(this,Ft,Zt).call(this,a,"data-key",i.i),l(this,Ft,Zt).call(this,a,"data-index",n),"option"in r(this,K).attributes){const d=r(this,K).attributes.option;l(this,Hn,la).call(this,a,d)}if(!i.i)return l(this,mo,Lh).call(this,a,i.lbl),l(this,gs,Vs).call(this,a,"opt-not-found"),a;if(l(this,gs,Vs).call(this,a,"option"),"option"in r(this,K).classNames){const d=r(this,K).classNames.option;d&&l(this,Wn,oa).call(this,a,d)}const o=l(this,zn,aa).call(this,"span");if(l(this,gs,Vs).call(this,o,"opt-lbl-wrp"),"opt-lbl-wrp"in r(this,K).classNames){const d=r(this,K).classNames["opt-lbl-wrp"];d&&l(this,Wn,oa).call(this,o,d)}if("opt-lbl-wrp"in r(this,K).attributes){const d=r(this,K).attributes["opt-lbl-wrp"];l(this,Hn,la).call(this,o,d)}if(r(this,K).optionFlagImage){const d=l(this,zn,aa).call(this,"img");if(l(this,gs,Vs).call(this,d,"opt-icn"),"opt-icn"in r(this,K).classNames){const p=r(this,K).classNames["opt-icn"];p&&l(this,Wn,oa).call(this,d,p)}if("opt-icn"in r(this,K).attributes){const p=r(this,K).attributes["opt-icn"];l(this,Hn,la).call(this,d,p)}d.src=`${r(this,lo)}/${i.img}`,d.alt=`${i.lbl} flag image`,d.loading="lazy",l(this,Ft,Zt).call(this,d,"aria-hidden",!0),o.append(d)}const c=l(this,zn,aa).call(this,"span");if(l(this,gs,Vs).call(this,c,"opt-lbl"),"opt-lbl"in r(this,K).classNames){const d=r(this,K).classNames["opt-lbl"];d&&l(this,Wn,oa).call(this,c,d)}if("opt-lbl"in r(this,K).attributes){const d=r(this,K).attributes["opt-lbl"];l(this,Hn,la).call(this,c,d)}l(this,mo,Lh).call(this,c,i.lbl),o.append(c);const h=l(this,zn,aa).call(this,"span");if(l(this,gs,Vs).call(this,h,"opt-suffix"),"opt-suffix"in r(this,K).classNames){const d=r(this,K).classNames["opt-suffix"];d&&l(this,Wn,oa).call(this,h,d)}if(l(this,mo,Lh).call(this,h,i.code),l(this,Ft,Zt).call(this,h,"data-dev-opt-suffix",this.fieldKey),"opt-suffix"in r(this,K).attributes){const d=r(this,K).attributes["opt-suffix"];l(this,Hn,la).call(this,h,d)}return l(this,Ft,Zt).call(this,a,"tabindex",l(this,qn,ca).call(this)?"0":"-1"),l(this,Ft,Zt).call(this,a,"role","option"),l(this,Ft,Zt).call(this,a,"aria-posinset",n+1),l(this,Ft,Zt).call(this,a,"aria-setsize",r(this,ii).length),l(this,Ne,Je).call(this,a,"click",d=>{T(this,Ci,!0),this.setSelectedCountryItem(d.currentTarget.dataset.key)}),l(this,Ne,Je).call(this,a,"keyup",d=>{d.key==="Enter"&&(T(this,Ci,!0),this.setSelectedCountryItem(d.currentTarget.dataset.key))}),i.disabled&&l(this,gs,Vs).call(this,a,"disabled-opt"),a.append(o,h),r(this,on)===i.i?(l(this,gs,Vs).call(this,a,"selected-opt"),l(this,Ft,Zt).call(this,a,"aria-selected",!0)):l(this,Ft,Zt).call(this,a,"aria-selected",!1),a});return(s=r(this,Ri))==null||s.append(...e),!0},xu=new WeakSet,rI=function(e){const s=l(this,cn,dr).call(this,r(this,zt).value);if(s){let i=l(this,Vn,ra).call(this).frmt;i||(i=r(this,K).inputFormat||""),r(this,zt).value=l(this,Un,na).call(this,e,s,i)}else r(this,zt).value=e;if(!s)this.value=e;else{const i=r(this,K).valueFormat||"";this.value=i?l(this,Un,na).call(this,e,r(this,zt).value,i):r(this,zt).value}},vc=new WeakSet,_m=function(){T(this,on,""),r(this,K).selectedFlagImage&&(r(this,no).src=r(this,io)),T(this,Ci,!1),this.setMenu({open:!1}),this.value="",r(this,K).selectedCountryClearable&&l(this,Pe,Ke).call(this,r(this,an),"display","none")},_c=new WeakSet,wm=function(){if(!l(this,qn,ca).call(this))return;l(this,Ic,vm).call(this);const e=l(this,bc,Im).call(this),s=l(this,se,Ee).call(this,`.option[data-index="${e}"]`);return s&&s.scrollIntoView({block:"nearest",inline:"nearest"}),!0},Su=new WeakSet,aI=function(e){r(this,Se)&&(r(this,Se).value=e)},Ru=new WeakSet,oI=function(e){var s;if(e.key==="Enter"&&r(this,ii).length){const i=(s=l(this,se,Ee).call(this,".option"))==null?void 0:s.dataset.key;this.setSelectedCountryItem(i),this.searchOptions("")}else this.searchOptions(e.target.value)},qn=new WeakSet,ca=function(){return r(this,qe).classList.contains("menu-open")},Cu=new WeakSet,lI=function(){const e=r(this,oc).getBoundingClientRect(),s=e.top,i=r(this,ni).innerHeight-e.bottom;i<s&&i<r(this,K).maxHeight?(l(this,Pe,Ke).call(this,r(this,qe),"flex-direction","column-reverse"),l(this,Pe,Ke).call(this,r(this,qe),"bottom","0%")):(l(this,Pe,Ke).call(this,r(this,qe),"flex-direction","column"),l(this,Pe,Ke).call(this,r(this,qe),"bottom","auto"))},wc=new WeakSet,Tm=function(e){var s,i;e.code==="Space"&&((s=r(this,Se))==null||s.focus(),this.setMenu({open:!0})),e.type==="click"&&(l(this,qn,ca).call(this)?this.setMenu({open:!1}):((i=r(this,Se))==null||i.focus(),this.setMenu({open:!0})))},Ou=new WeakSet,cI=function(){r(this,hc).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function rR({fieldKey:t,formID:e,attr:s,styleClasses:i}){const n=D.useRef(null),a=D.useRef(null),c=J(Nt)[t],h=J(Gc),{selectedFlagImage:d,hideCountryList:p,selectedCountryClearable:m,searchClearable:b,optionFlagImage:f,detectCountryByIp:g,detectCountryByGeo:v,defaultCountryKey:_,searchPlaceholder:R,noCountryFoundText:w,inputFormat:S,valueFormat:C}=c.config;return D.useEffect(()=>{n!=null&&n.current||(n.current=St(`.${t}-phone-fld-wrp`));const L=a.current,y=n.current;L&&y&&"destroy"in L&&L.destroy();const P=document.getElementById("bit-grid-layout").contentWindow;P.bit_virtualized_list||(P.bit_virtualized_list=Jm),P.observeElm||(P.observeElm=rp);const{placeholderImage:A,options:F}=c,W={fieldKey:t,selectedFlagImage:d,hideCountryList:p,selectedCountryClearable:m,searchClearable:b,optionFlagImage:f,detectCountryByIp:g,detectCountryByGeo:v,defaultCountryKey:_,searchPlaceholder:R,noCountryFoundText:w,placeholderImage:A,options:F,inputFormat:S,valueFormat:C,assetsURL:`${h.assetsURL}/../static/countries/`,document:document.getElementById("bit-grid-layout").contentDocument,window:P,attributes:{option:bt(t,"option"),"opt-lbl-wrp":bt(t,"opt-lbl-wrp"),"opt-icn":bt(t,"opt-icn"),"opt-lbl":bt(t,"opt-lbl"),"opt-a":bt(t,"opt-prefix")},classNames:{option:x(t,"option"),"opt-lbl-wrp":x(t,"opt-lbl-wrp"),"opt-icn":x(t,"opt-icn"),"opt-lbl":x(t,"opt-lbl"),"opt-prefix":x(t,"opt-prefix")}};a.current=new iR(y,W)},[c]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:i}),u.jsx(_t,{formID:e,fieldKey:t,fieldData:s,children:u.jsx("div",{className:`${t}-phone-fld-container`,children:u.jsxs("div",O(I({"data-dev-phone-fld-wrp":t,className:`${t}-phone-fld-wrp ${x(t,"phone-fld-wrp")} ${c.valid.disabled?"disabled":""} ${c.valid.readonly?"readonly":""}`,ref:n},$(t,"phone-fld-wrp")),{children:[u.jsx("input",I(I({name:t,type:"hidden",className:`${t}-phone-hidden-input`},"disabled"in c.valid&&{disabled:c.valid.disabled}),"readonly"in c.valid&&{readOnly:c.valid.readonly})),u.jsxs("div",{className:`${t}-phone-inner-wrp`,children:[(!p||d)&&u.jsxs("div",{"data-testid":`${t}-dpd-wrp`,className:`${t}-dpd-wrp`,"data-dev-dpd-wrp":t,role:"combobox","aria-live":"assertive","aria-labelledby":"country-label-2","aria-expanded":"false",tabIndex:c.valid.disabled?"-1":"0",children:[d&&u.jsx("div",{className:`${t}-selected-country-wrp`,children:u.jsx("img",I({"data-dev-selected-phone-img":t,alt:"Selected Country image","aria-hidden":"true",className:`${t}-selected-country-img ${x(t,"selected-phone-img")}`,src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>"},$(t,"selected-phone-img")))}),!p&&u.jsx("div",{className:`${t}-dpd-down-btn`,children:u.jsx("svg",{width:"15",height:"15",role:"img",title:"Downarrow icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),u.jsx("input",O(I({"data-testid":`${t}-phone-nmbr-inp`,"data-dev-phone-number-input":t,"aria-label":"Phone Number"},"ph"in s&&{placeholder:s.ph}),{type:"tel",className:`${t}-phone-number-input`,autoComplete:"tel",tabIndex:c.valid.disabled?"-1":"0"})),m&&u.jsx("button",O(I({"data-testid":`${t}-inp-clr-btn`,"data-dev-input-clear-btn":t,type:"button",title:"Clear value",className:`${t}-input-clear-btn ${x(t,"input-clear-btn")}`},$(t,"input-clear-btn")),{children:u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]}),!p&&u.jsx("div",O(I({className:`${t}-option-wrp ${x(t,"option-wrp")}`,"data-dev-option-wrp":t},$(t,"option-search-wrp")),{children:u.jsxs("div",{className:`${t}-option-inner-wrp`,children:[u.jsxs("div",O(I({"data-dev-option-search-wrp":t,className:`${t}-option-search-wrp ${x(t,"option-search-wrp")}`},$(t,"option-search-wrp")),{children:[u.jsx("input",{"data-testid":`${t}-opt-srch-inp`,"data-dev-opt-search-input":t,"aria-label":"Search for countries",type:"search",className:`${t}-opt-search-input`,placeholder:R,autoComplete:"off",tabIndex:"-1"}),u.jsxs("svg",O(I({className:`${t}-icn ${t}-opt-search-icn ${x(t,"opt-search-icn")}`,"data-dev-opt-search-icn":t,"aria-hidden":"true",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},$(t,"opt-search-icn")),{children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})),b&&u.jsx("button",O(I({"data-testid":`${t}-srch-clr-btn`,type:"button","aria-label":"Clear search",className:`${t}-icn ${t}-search-clear-btn ${x(t,"search-clear-btn")}`,"data-dev-search-clear-btn":t,tabIndex:"-1"},$(t,"search-clear-btn")),{children:u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}))]})),u.jsx("ul",O(I({className:`${t}-option-list ${x(t,"option-list")}`,tabIndex:"-1",role:"listbox","aria-label":"country list","data-dev-option-list":t},$(t,"option-list")),{children:u.jsxs("li",{className:"option",children:[u.jsx("span",{className:"opt-prefix",children:"Prefix"}),u.jsxs("span",{className:"opt-lbl-wrp",children:[u.jsx("img",{className:"opt-icn",src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",alt:"Placeholder"}),u.jsx("span",{className:"opt-lbl",children:"Option"})]}),u.jsx("span",{className:"opt-suffix",children:"Suffix"})]})}))]})}))]}))})})]})}let Vi,Zo;function ap({form:t,input:e}){var o,c;if(t?Vi=t:(o=e==null?void 0:e.form)!=null&&o.id&&([,Vi]=e.form.id.split("form-")),typeof window[Vi]=="undefined")return!1;let s={};if(Zo=window[Vi].fields,t)s=aR();else if(e){if(!window[Vi].validateFocusLost)return!0;const h=hI(e.name);s={[h]:e.value},Zo={[h]:Zo[h]}}let i=!0;const n=Object.entries(Zo);let{length:a}=n;for(;a--;){const[h,d]=n[a],p=d.typ,m=typeof s[h]=="string"?s[h].trim():s[h],b=document.querySelector(`#form-${Vi} .${h}`);if(window.getComputedStyle(b).display==="none"){ih("",h);continue}let f="";if(!m){p==="check"&&(f=dI(m,d)),f=cR(d),ih(f,h,d),f&&(i=!1);continue}if(p==="number"?f=hR(m,d):p==="email"?f=dR(m,d):p==="url"?f=uR(m,d):p==="decision-box"?f=pR(m,d):p==="check"||p==="select"?f=gR(m,d):p==="file-up"&&(f=mR(m,d)),(c=d==null?void 0:d.valid)!=null&&c.regexr&&(f=fR(m,d),f)){ih(f,h,d),i=!1;continue}ih(f,h,d),f&&(i=!1)}return i}const hI=t=>t.slice(-2)==="[]"?t.slice(0,t.length-2):t,aR=()=>{const t=new FormData(document.getElementById(`form-${Vi}`)),e={};return Array.from(t.entries()).forEach(([i,n])=>{const a=hI(i);a in Zo&&(e[a]?(Array.isArray(e[a])||(e[a]=[e[a]]),e[a].push(n)):e[a]=n)}),e},ih=(t,e,s)=>{var n,a;const i=document.querySelector(`#form-${Vi} #${e}-error`);i&&"err"in(s||{})&&(t&&((a=(n=s==null?void 0:s.err)==null?void 0:n[t])!=null&&a.show)?(i.innerHTML=s.err[t].custom?s.err[t].msg:s.err[t].dflt,i.parentElement.style.marginTop="5px",i.parentElement.style.height=`${i.offsetHeight}px`,oR(e)):(i.parentElement.style.marginTop=0,i.parentElement.style.height=0))},oR=t=>{const e=document.querySelector(`#form-${Vi} .btcd-fld-itm.${t}`),s=document.body.getBoundingClientRect(),n=e.getBoundingClientRect().top-s.top;lR(e)||window.scroll({top:n,behavior:"smooth"})},lR=t=>{const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},cR=t=>{var e;return(e=t==null?void 0:t.valid)!=null&&e.req?"required":""},Km=t=>(t||"").split("$_bf_$").join("\\"),hR=(t,e)=>e.mn&&Number(t)<Number(e.mn)?"mn":e.mx&&Number(t)>Number(e.mx)?"mx":"",dR=(t,e)=>e.err.invalid.show?new RegExp(Km(e.pattern)).test(t)?"":"invalid":"",uR=(t,e)=>e.err.invalid.show?new RegExp(Km(e.attr.pattern)).test(t)?"":"invalid":"",pR=(t,e)=>e.valid.req&&t!==e.msg.checked?"req":"",dI=(t,e)=>{var s;return(s=e==null?void 0:e.opt)!=null&&s.find(i=>i.req&&!(t||[]).includes(i.lbl))?"req":""},mR=(t,e)=>e.valid.req&&!Array.isArray(t)&&!t.name?"req":"",fR=(t,e)=>new RegExp(Km(e.valid.regexr),e.valid.flags||"").test(t)?"":"regexr",gR=(t,e)=>{const s=Array.isArray(t)?t:(t||"").split(","),i=Number(e.mn)||0,n=Number(e.mx)||e.opt.length;return s.length<i?"mn":s.length>n?"mx":e.typ==="check"?dI(t,e):""};function ER({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:a}){const[o,c]=D.useState(t.val||""),h=D.useRef([]),[d,p]=D.useState("");h.current=t.opt.map((g,v)=>{var _;return(_=h.current[v])!=null?_:D.createRef()});const m=g=>{t.valid.disabled||(c(g.target.value),e&&e(g),Tt(n))},b=g=>{const{name:v,form:_}=g.target;ap({input:{name:v,form:_,value:o}})},f=g=>{c(g.target.value),p(g.target.value)};return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:a}),u.jsx(_t,{formID:i,fieldKey:n,fieldData:t,children:u.jsxs("div",O(I({"data-testid":`${n}-cc`,"data-dev-cc":n,className:`${n}-cc ${x(n,"cc")}`},$(n,"cc")),{children:[t.opt.map((g,v)=>u.jsxs("div",O(I({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${x(n,"cw")}`},$(n,"cw")),{children:[u.jsx("input",I(O(I(I(I(I({"data-testid":`${n}-ci`,id:`${n}-chk-${v}`,type:"radio",className:`${n}-ci ${x(n,"ci")}`,ref:h.current[v],name:n,value:g.val||g.lbl},g.check&&{checked:!0}),(t.valid.disabled||g.disabled)&&{disabled:!0}),t.valid.req&&{required:!0}),"name"in t&&{name:t.name}),{checked:o===(g.val||g.lbl)||!o&&g.check,onChange:m,onBlur:b}),$(n,"ci"))),u.jsxs("label",O(I({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${v}`,className:`${n}-cl ${x(n,"cl")}`},$(n,"cl")),{children:[u.jsx("span",O(I({"data-testid":`${n}-bx`,"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${x(n,"bx")}`},$(n,"bx")),{children:u.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${x(n,"svgwrp")}`,children:u.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${x(n,"ck-icn")}`})})})),u.jsx("span",O(I({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${x(n,"ct")}`},$(n,"ct")),{children:u.jsx(Fe,{html:g.lbl})}))]}))]}),`opr-${v+22}`)),t.addOtherOpt&&u.jsxs("div",O(I({"data-testid":`${n}-cw`,"data-dev-cw":n,className:`${n}-cw ${x(n,"cw")}`},$(n,"cw")),{children:[u.jsx("input",I(O(I(I({"data-testid":`${n}-ci`,"data-oopt":n,id:`${n}-chk-${t.opt.length}`,type:"radio",className:`${n}-ci ${x(n,"ci")}`,ref:h.current[t.opt.length],name:n,value:d},t.valid.req&&{required:!0}),"name"in t&&{name:t.name}),{disabled:t.valid.disabled,onChange:m,onBlur:b}),$(n,"ci"))),u.jsxs("label",O(I({"data-testid":`${n}-cl`,"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-chk-${t.opt.length}`,className:`${n}-cl ${x(n,"cl")}`},$(n,"cl")),{children:[u.jsx("span",O(I({"data-testid":`${n}-bx`,"data-dev-bx":n,"data-bx":!0,className:`${n}-bx  ${x(n,"bx")}`},$(n,"bx")),{children:u.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp ${x(n,"svgwrp")}`,children:u.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn ${x(n,"ck-icn")}`})})})),u.jsx("span",O(I({"data-testid":`${n}-ct`,"data-dev-ct":n,className:`${n}-ct ${x(n,"ct")}`},$(n,"ct")),{children:t.otherOptLbl||"Other..."}))]})),u.jsx("div",{"data-oinp-wrp":!0,className:`${n}-other-inp-wrp`,children:u.jsx("input",O(I(I(I({"data-testid":`${n}-other-inp`,"data-dev-other-inp":n,type:"text",className:`${n}-other-inp ${x(n,"other-inp")}`},t.valid.otherOptReq&&{required:!0}),"otherInpPh"in t&&{placeholder:t.otherInpPh}),!("otherInpPh"in t)&&{placeholder:"Other..."}),{value:d,onChange:f}))})]}),`opt-${t.opt.length+24}`)]}))})]})}var wt,Oi,Es,Tc,ri,Lu,fo,Fr,$u,hn,ft,Re,xc,go,Sc,jr,Yn,bs,Eo,Rc,Cc,kr,Au,uI,yu,pI,Li,Tn,Mu,mI,Oc,xm,Lc,Sm,Nu,fI,Pu,gI,$c,Rm,Xn,ha,Du,EI,dn,ur,Gr,Qo,un,pr,Is,zs,Ac,Cm,yc,Om;class bR{constructor(e,s){E(this,Au);E(this,yu);E(this,Li);E(this,Mu);E(this,Oc);E(this,Lc);E(this,Nu);E(this,Pu);E(this,$c);E(this,Xn);E(this,Du);E(this,dn);E(this,Gr);E(this,un);E(this,Is);E(this,Ac);E(this,yc);E(this,wt,null);E(this,Oi,null);E(this,Es,[]);E(this,Tc,null);E(this,ri,null);E(this,Lu,null);E(this,fo,!1);E(this,Fr,!1);E(this,$u,!1);E(this,hn,null);E(this,ft,{});E(this,Re,null);E(this,xc,null);E(this,go,null);E(this,Sc,null);E(this,jr,null);E(this,Yn,null);E(this,bs,null);E(this,Eo,null);E(this,Rc,[]);E(this,Cc,null);E(this,kr,!1);T(this,Tc,(s==null?void 0:s.document)||document),T(this,ri,s==null?void 0:s.fieldKey),T(this,ft,{status:!1,indx:null}),typeof e=="string"?T(this,hn,r(this,Tc).querySelector(e)):T(this,hn,e),T(this,Lu,s==null?void 0:s.contentId),T(this,Es,(s==null?void 0:s.options)||[]),T(this,fo,(s==null?void 0:s.showReviewLblOnHover)||!1),T(this,Fr,(s==null?void 0:s.showReviewLblOnSelect)||!1),T(this,$u,(s==null?void 0:s.selectedRating)||!1),T(this,Cc,(s==null?void 0:s.defaultValue)||null),this.init()}init(){l(this,Au,uI).call(this),T(this,wt,r(this,hn).querySelectorAll(r(this,xc))),T(this,Oi,l(this,Nu,fI).call(this,r(this,Sc))),l(this,yu,pI).call(this),l(this,Mu,mI).call(this),r(this,wt).forEach((e,s)=>{if(r(this,ft).status&&s<=r(this,ft).indx){const i=e.querySelector(r(this,Re));if(l(this,un,pr).call(this,i,r(this,bs)),r(this,Es)[s].check){const n=e.querySelector(r(this,go));n.checked=!0}}l(this,Li,Tn).call(this,e,"mouseover",()=>{const i=parseInt(e.dataset.indx);l(this,Pu,gI).call(this,i)}),l(this,Li,Tn).call(this,e,"mouseout",()=>{const{indx:i}=e.dataset;l(this,$c,Rm).call(this,i)}),l(this,Li,Tn).call(this,e,"click",i=>{const{indx:n}=e.dataset;i.preventDefault(),T(this,kr,!0),l(this,Xn,ha).call(this,n)}),l(this,Li,Tn).call(this,e,"touchstart",i=>{i.preventDefault();const{indx:n}=e.dataset;T(this,kr,!0),l(this,Xn,ha).call(this,n)}),l(this,Li,Tn).call(this,e,"touchend",()=>{const{indx:i}=e.dataset;l(this,$c,Rm).call(this,i)})})}set value(e){const s=r(this,Es).findIndex(i=>i.val===e);s!==-1&&l(this,Xn,ha).call(this,s)}get value(){const e=r(this,Es)[r(this,ft).indx];return e.val||e.lbl}destroy(){l(this,Ac,Cm).call(this),l(this,yc,Om).call(this),T(this,wt,null),T(this,Oi,null)}reset(){l(this,Ac,Cm).call(this),l(this,yc,Om).call(this),T(this,ft,{status:!1,indx:null}),T(this,Eo,null),this.init()}}wt=new WeakMap,Oi=new WeakMap,Es=new WeakMap,Tc=new WeakMap,ri=new WeakMap,Lu=new WeakMap,fo=new WeakMap,Fr=new WeakMap,$u=new WeakMap,hn=new WeakMap,ft=new WeakMap,Re=new WeakMap,xc=new WeakMap,go=new WeakMap,Sc=new WeakMap,jr=new WeakMap,Yn=new WeakMap,bs=new WeakMap,Eo=new WeakMap,Rc=new WeakMap,Cc=new WeakMap,kr=new WeakMap,Au=new WeakSet,uI=function(){T(this,Re,`.${r(this,ri)}-rating-img`),T(this,xc,`.${r(this,ri)}-rating-lbl`),T(this,go,`.${r(this,ri)}-rating-input`),T(this,Sc,`.${r(this,ri)}-rating-msg`),T(this,jr,`${r(this,ri)}-rating-hover`),T(this,Yn,`${r(this,ri)}-rating-scale`),T(this,bs,`${r(this,ri)}-rating-selected`)},yu=new WeakSet,pI=function(){r(this,Es).forEach((e,s)=>{(r(this,Cc)===e.val||e!=null&&e.check)&&(T(this,ft,{status:!0,indx:s}),r(this,Fr)?l(this,dn,ur).call(this,s):l(this,Gr,Qo).call(this))})},Li=new WeakSet,Tn=function(e,s,i){e.addEventListener(s,i),r(this,Rc).push({selector:e,eventType:s,cb:i})},Mu=new WeakSet,mI=function(){let e=-1;const s=r(this,Es).findIndex(i=>i.check);s!==-1&&(e=s),l(this,Li,Tn).call(this,r(this,hn),"keydown",i=>{if(i.key==="ArrowRight"){if(r(this,Es).length===e)return;e+=1;const n=i.target.children[e],a=parseInt(n.dataset.indx);if(r(this,ft).indx!==a&&l(this,Xn,ha).call(this,a),l(this,Oc,xm).call(this,a),r(this,Es).length===e+1)return!1}else if(i.key==="ArrowLeft"){if(e===0||e-1<0)return;e-=1,l(this,Xn,ha).call(this,e),l(this,Oc,xm).call(this,e)}}),l(this,Li,Tn).call(this,r(this,hn),"focusout",()=>{l(this,Lc,Sm).call(this)})},Oc=new WeakSet,xm=function(e){l(this,Lc,Sm).call(this);const s=r(this,wt)[e].querySelector(r(this,Re));l(this,un,pr).call(this,s,r(this,Yn))},Lc=new WeakSet,Sm=function(){for(let e=0;e<r(this,Es).length;e+=1){const s=r(this,wt)[e].querySelector(r(this,Re));l(this,Is,zs).call(this,s,r(this,Yn))}},Nu=new WeakSet,fI=function(e){return r(this,hn).querySelector(e)},Pu=new WeakSet,gI=function(e){var s,i;if(r(this,fo)&&l(this,dn,ur).call(this,e),r(this,ft).indx&&(s=r(this,wt))!=null&&s[r(this,ft).indx]){const n=r(this,wt).length-1;r(this,wt).forEach(a=>{const o=a.querySelector(r(this,Re));l(this,Is,zs).call(this,o,r(this,bs))});for(let a=0;a<=r(this,ft).indx;a+=1){const o=r(this,wt)[a].querySelector(r(this,Re));l(this,Is,zs).call(this,o,r(this,bs))}if(r(this,ft).indx===n)for(let a=0;a<=r(this,ft).indx;a+=1){const o=r(this,wt)[a].querySelector(r(this,Re));l(this,Is,zs).call(this,o,r(this,bs))}}for(let n=0;n<=e;n+=1)if(n<=e&&((i=r(this,wt))!=null&&i[n])){const a=r(this,wt)[n].querySelector(r(this,Re));l(this,un,pr).call(this,a,r(this,jr)),n===e&&l(this,un,pr).call(this,a,r(this,Yn))}},$c=new WeakSet,Rm=function(e){var s,i;r(this,fo)&&(r(this,ft).status&&r(this,ft).indx===e?l(this,dn,ur).call(this,e):r(this,ft).status?l(this,dn,ur).call(this,r(this,ft).indx):r(this,Oi)&&l(this,Gr,Qo).call(this));for(let n=0;n<=e;n+=1)if((s=r(this,wt))!=null&&s[n]){const a=r(this,wt)[n].querySelector(r(this,Re));l(this,Is,zs).call(this,a,r(this,jr)),l(this,Is,zs).call(this,a,r(this,Yn))}if(r(this,ft).status&&(i=r(this,wt))!=null&&i[r(this,ft).indx])for(let n=0;n<=r(this,ft).indx;n+=1){const a=r(this,wt)[n].querySelector(r(this,Re));l(this,un,pr).call(this,a,r(this,bs))}r(this,Fr)?l(this,dn,ur).call(this,r(this,ft).indx):l(this,Gr,Qo).call(this)},Xn=new WeakSet,ha=function(e){var i,n,a,o;if((i=r(this,wt))!=null&&i[r(this,ft).indx]){const c=r(this,wt)[r(this,ft).indx].querySelector(r(this,Re));l(this,Is,zs).call(this,c,r(this,bs))}const s=(n=r(this,wt))==null?void 0:n[e].querySelector(r(this,go));r(this,Eo)&&r(this,kr)?s!=null&&s.checked?(s.checked=!1,T(this,ft,{status:!1,indx:null})):(s.checked=!0,T(this,ft,{status:!0,indx:e})):(s.checked=!0,T(this,ft,{status:!0,indx:e}),T(this,Eo,s)),s.dispatchEvent(new Event("input")),(a=r(this,wt))==null||a.forEach(c=>{const h=c.querySelector(r(this,Re));l(this,Is,zs).call(this,h,r(this,jr))}),(o=r(this,wt))==null||o.forEach((c,h)=>{const d=c.querySelector(r(this,Re));h<=e&&r(this,ft).status?l(this,un,pr).call(this,d,r(this,bs)):l(this,Is,zs).call(this,d,r(this,bs))}),r(this,Fr)&&r(this,ft).status?l(this,dn,ur).call(this,e):l(this,Gr,Qo).call(this),T(this,kr,!1)},Du=new WeakSet,EI=function(e){return r(this,Es)[e]},dn=new WeakSet,ur=function(e){const s=l(this,Du,EI).call(this,e);r(this,Oi)&&s&&(r(this,Oi).innerText=s.lbl)},Gr=new WeakSet,Qo=function(){r(this,Oi)&&(r(this,Oi).innerHTML="")},un=new WeakSet,pr=function(e,s){e.classList.add(s)},Is=new WeakSet,zs=function(e,s){e.classList.remove(s)},Ac=new WeakSet,Cm=function(){r(this,wt).forEach(e=>{const s=e.querySelector(r(this,Re));l(this,Is,zs).call(this,s,r(this,bs))})},yc=new WeakSet,Om=function(){r(this,Rc).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})};function IR({attr:t,formID:e,fieldKey:s,styleClasses:i}){const{"*":n}=qu(),a=J(je),{styleMode:o}=a,[c,h]=n.split("/"),d=o&&c==="field-theme-customize"&&h==="rating-msg",m=J(Nt)[s],b=D.useRef(null),f=D.useRef(null);return D.useEffect(()=>{var R;b!=null&&b.current||(b.current=St(`.${s}-inp-fld-wrp`));const g=f.current,v=b.current;g&&v&&"destroy"in g&&g.destroy();const _={options:t.opt,showReviewLblOnHover:t.showReviewLblOnHover,showReviewLblOnSelect:t.showReviewLblOnSelect,selectedRating:t.selectedRating,fieldKey:s,document:(R=document.getElementById("bit-grid-layout"))==null?void 0:R.contentDocument};f.current=new bR(v,_)},[m]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:i}),u.jsx(_t,{formID:e,fieldKey:s,fieldData:t,children:u.jsxs("div",O(I({"data-testid":`${s}-inp-fld-wrp`,"data-dev-inp-fld-wrp":s,className:`${s}-inp-fld-wrp ${x(s,"inp-fld-wrp")}`},$(s,"inp-fld-wrp")),{ref:b,children:[u.jsx("div",O(I({"data-testid":`${s}-rating-wrp`,"data-dev-rating-wrp":s,className:`${s}-rating-wrp ${x(s,"rating-wrp")}`},$(s,"rating-wrp")),{children:t.opt.map((g,v)=>u.jsxs("label",O(I({className:`${s}-rating-lbl ${x(s,"rating-lbl")}`,"data-testid":`${s}-rating-lbl`,"data-dev-rating-lbl":s,htmlFor:`${s}-rating-${v}`},$(s,"rating-lbl")),{"data-indx":v,children:[u.jsx("input",O(I({type:"radio",className:`${s}-rating-input`,name:"rating",value:g.val,"aria-label":`rating-input-${v}`,id:`${s}-rating-${v}`},g.check&&{checked:!0}),{defaultChecked:g==null?void 0:g.check})),u.jsx("img",O(I({className:`${s}-rating-img  ${x(s,"rating-img")}`,src:g.img,alt:g==null?void 0:g.lbl,"aria-label":g==null?void 0:g.lbl},$(s,"rating-img")),{"data-testid":`${s}-rating-input`,"data-dev-rating-img":s}))]}),g.val))})),u.jsx("span",O(I({className:`${s}-rating-msg ${x(s,"rating-msg")}`,"data-testid":`${s}-rating-msg`,"data-dev-rating-msg":s},$(s,"rating-msg")),{children:d&&(m.showReviewLblOnSelect||m.showReviewLblOnHover)&&"Rating Message"}))]}))})]})}var bo,Io,ie,Mc,Zn,vo,Nc,_o,$h,Fu,bI,ju,II,Qn,da,ku,Gu,vI,Bu,_I,ai,Ui,Pc,Lm,Uu,wI;class vR{constructor(e,s){E(this,_o);E(this,Fu);E(this,ju);E(this,Qn);E(this,Gu);E(this,Bu);E(this,ai);E(this,Pc);E(this,Uu);E(this,bo,null);E(this,Io,"");E(this,ie,{clientId:"",options:{currency:"INR",amount:1,amountType:"fixed",theme:{},modal:{},prefill:{},notes:{}}});E(this,Mc,[]);E(this,Zn,null);E(this,vo,null);E(this,Nc,null);E(this,ku,e=>{var a;const s=document.getElementById(`${l(this,ai,Ui).call(this)}`);s.classList.add("pos-rel","form-loading");const i=document.getElementById(`form-${l(this,ai,Ui).call(this)}`),n=(a=l(this,ai,Ui).call(this))==null?void 0:a.split("_")[1];if(typeof i!="undefined"&&i!==null){const o=bf_globals[l(this,ai,Ui).call(this)];r(this,Zn)&&(o.entryId=r(this,Zn));let c=bfSelect(`input[name="${r(this,ie).fieldKey}"]`,i);c?c.value=e.razorpay_payment_id:setHiddenFld({name:r(this,ie).fieldKey,value:e.razorpay_payment_id,type:"text"},i);let h=bfSelect('button[type="submit"]',i);h||(h=document.createElement("button"),l(this,Pc,Lm).call(this,h,"type","submit"),h.style.display="none",i.append(h)),h.click();const d={formID:n,fieldKey:r(this,ie).fieldKey,transactionID:e.razorpay_payment_id,payment_type:r(this,ie).payType==="subscription"?"subscription":"order",entry_id:r(this,Zn)},p=new URL(o==null?void 0:o.ajaxURL);p.searchParams.append("_ajax_nonce",o==null?void 0:o.nonce),p.searchParams.append("action","bitforms_save_razorpay_details"),fetch(p,{method:"POST",body:JSON.stringify(d)}).then(()=>{s.classList.remove("pos-rel","form-loading"),T(this,Zn,null),c=bfSelect(`input[name="${r(this,ie).fieldKey}"]`,i),c&&(l(this,Pc,Lm).call(this,c,"value",""),c.value="")})}});Object.assign(r(this,ie),s),T(this,vo,s.document||document),T(this,Nc,s.window||window),T(this,Io,`#form-${l(this,ai,Ui).call(this)}`),typeof e=="string"?T(this,bo,r(this,vo).querySelector(e)):T(this,bo,e),this.init()}init(){l(this,Fu,bI).call(this,l(this,_o,$h).call(this,`.${r(this,ie).fieldKey}-razorpay-btn`),"click",()=>{l(this,Bu,_I).call(this)})}destroy(){l(this,ju,II).call(this)}reset(){this.destroy(),this.init()}}bo=new WeakMap,Io=new WeakMap,ie=new WeakMap,Mc=new WeakMap,Zn=new WeakMap,vo=new WeakMap,Nc=new WeakMap,_o=new WeakSet,$h=function(e,s){return s?r(this,vo).querySelector(s).querySelector(e):r(this,bo).querySelector(e)},Fu=new WeakSet,bI=function(e,s,i){e.addEventListener(s,i),r(this,Mc).push({selector:e,eventType:s,cb:i})},ju=new WeakSet,II=function(){r(this,Mc).forEach(({selector:e,eventType:s,cb:i})=>{e.removeEventListener(s,i)})},Qn=new WeakSet,da=function(e){if(e){const s=window.bf_globals[l(this,ai,Ui).call(this)].fields[e].fieldName;let i=l(this,_o,$h).call(this,`[name="${s}"]`,r(this,Io));if(i&&i.type==="radio"&&(i=l(this,_o,$h).call(this,`[name="${s}"]:checked`,r(this,Io))),i&&i.value)return i.value}return""},ku=new WeakMap,Gu=new WeakSet,vI=function(e){return Mo(this,null,function*(){var c;const s=bf_globals[l(this,ai,Ui).call(this)],i=document.getElementById(`${l(this,ai,Ui).call(this)}`);i.classList.add("pos-rel","form-loading");const n=new URL(s==null?void 0:s.ajaxURL);n.searchParams.append("_ajax_nonce",s==null?void 0:s.nonce),n.searchParams.append("action","bitforms_create_razorpay_order");const o=yield(yield fetch(n,{method:"POST",body:JSON.stringify(e)})).json();return i.classList.remove("pos-rel","form-loading"),(c=o.data)!=null&&c.error||!o.success?"":o.data.id})},Bu=new WeakSet,_I=function(){return Mo(this,null,function*(){const{currency:e,amount:s,amountType:i,amountFld:n,name:a,description:o,theme:c,prefill:h,modal:d,notes:p}=r(this,ie).options,{confirm_close:m}=d,{contentId:b}=r(this,ie);let f=p;typeof replaceFieldAndSmartValues!="undefined"&&f&&(f=JSON.parse(replaceFieldAndSmartValues(JSON.stringify(f),b))),typeof bf_modify_razorpay_notes!="undefined"&&(f=bf_modify_razorpay_notes(f));const g=l(this,Uu,wI).call(this,i==="dynamic"?l(this,Qn,da).call(this,n):s)*100;try{yield isFormValidatedWithoutError(b)}catch(C){return!1}const v=yield saveFormProgress(b),_=v==null?void 0:v[b];if(!(_!=null&&_.success))return;_.entry_id&&T(this,Zn,_.entry_id);let R="";if(r(this,ie).includeOrderId)if(!r(this,ie).newOrderId&&r(this,ie).orderIdFld!=="")R=l(this,Qn,da).call(this,r(this,ie).orderIdFld);else{const C={payIntegID:r(this,ie).payIntegID,currency:e,amount:g,notes:f};R=yield l(this,Gu,vI).call(this,C)}const w={key:r(this,ie).clientId,currency:e,amount:g,name:a,description:o,theme:c,order_id:R,prefill:{name:l(this,Qn,da).call(this,h.prefillNameFld),email:l(this,Qn,da).call(this,h.prefillEmailFld),contact:l(this,Qn,da).call(this,h.prefillContactFld)},notes:f,modal:{backdropclose:!1,escape:!1,confirm_close:m},handler:C=>Mo(this,null,function*(){return r(this,ku).call(this,C)})};new(r(this,Nc)).Razorpay(w).open()})},ai=new WeakSet,Ui=function(){return r(this,ie).contentId},Pc=new WeakSet,Lm=function(e,s,i){var n;(n=e==null?void 0:e.setAttribute)==null||n.call(e,s,i)},Uu=new WeakSet,wI=function(e){const s=/[\d,.]*\d(?:\.\d+)?/,i=e==null?void 0:e.match(s);if(i){const n=i[0].replace(/,/g,"");return parseFloat(n)}return parseFloat(0)};function _R({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const a=J(Xu),c=J(Nt)[t],[h,d]=D.useState(""),p=D.useRef(null),m=D.useRef(null),[b,f]=D.useState(!1);return D.useEffect(()=>{if(!h){sl({fieldKey:t,errorKey:"razorpayClientIdMissing",errorMsg:yi("Razorpay Client ID is missing"),errorUrl:`field-settings/${t}`});return}if(Zu(t,"razorpayClientIdMissing"),b)return;const v={src:"https://checkout.razorpay.com/v1/checkout.js",integrity:"",id:`bf-razorpay-script-${t}`,scriptInGrid:!1,callback:()=>{f(!0)}};Bc(v)},[h]),D.useEffect(()=>{if(!s.payIntegID){d("");return}const g=a==null?void 0:a.find(_=>_.id&&s.payIntegID&&Number(_.id)===Number(s.payIntegID));if(!g)return;const v=g.apiKey;d(v)},[s.payIntegID]),D.useEffect(()=>{if(!b)return;p!=null&&p.current||(p.current=St(`${t}-razorpay-wrp`));const g=p.current,v=m.current;if((!h||v&&g&&"destroy"in v)&&(v.destroy(),Tt(t)),!h)return;const _={clientId:h,fieldKey:t,options:c.options,onPaymentSuccess:R=>{},onPaymentFailed:()=>{}};m.current=new vR(g,_)},[b,c]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:n}),u.jsxs(_t,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,noErrMsg:!0,isBuilder:i,children:[b&&h&&u.jsx("div",{className:"bf-form",children:u.jsx("div",{ref:p,className:`${t}-razorpay-wrp`,children:u.jsxs("button",O(I({type:"button","data-dev-razorpay-btn":t,className:`${t}-razorpay-btn ${x(t,"razorpay-btn")}`},$(t,"razorpay-btn")),{children:[u.jsxs("svg",{width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M7.077 6.476l-.988 3.569 5.65-3.589-3.695 13.54 3.752.004 5.457-20L7.077 6.476z",fill:"#fff"}),u.jsx("path",{d:"M1.455 14.308L0 20h7.202L10.149 8.42l-8.694 5.887z",fill:"#fff"})]}),u.jsxs("div",O(I({"data-dev-razorpay-btn-text":t,className:`${t}-razorpay-btn-text ${x(t,"razorpay-btn-text")}`},$(t,"razorpay-btn-text")),{children:[u.jsx("span",O(I({"data-dev-razorpay-btn-title":t,className:`${t}-razorpay-btn-title ${x(t,"razorpay-btn-title")}`},$(t,"razorpay-btn-title")),{children:c.btnTxt})),c.subTitl&&u.jsx("span",O(I({"data-dev-razorpay-btn-sub-title":t,className:`${t}-razorpay-btn-sub-title ${x(t,"razorpay-btn-sub-title")}`},$(t,"razorpay-btn-sub-title")),{children:"Secured by Razorpay"}))]}))]}))})}),(!b||!h)&&u.jsxs("p",{children:["Please select a Razorpay account from",u.jsx("strong",{children:" Field Settings "}),"to load Razorpay field."]})]})]})}function wR({fieldKey:t,formId:e,styleClasses:s}){var g;const i=D.useRef(null),n=D.useRef(null),o=J(Nt)[t],c=J(sr),{styleMode:h}=J(je),d=((g=o.hidden)==null?void 0:g.includes(c))||!1,p=D.useRef(null),m=J(AI),{siteKey:b=""}=m||{};D.useEffect(()=>{window.renderGrecaptcha=f;const _={src:"https://www.google.com/recaptcha/api.js?onload=renderGrecaptcha&render=explicit",integrity:"",id:"bf-recaptcha-script",async:!0,defer:!0};return Bc(_),()=>{clearInterval(n.current),Qu(_.id)}},[]);function f(){let v=St(`.${t}-recaptcha`);p.current!==null&&(v==null||v.remove(),window.grecaptcha.reset(p.current),v=document.createElement("div"),v.classList.add(`${t}-recaptcha`),i.current.appendChild(v)),p.current=window.grecaptcha.render(v,{sitekey:b,theme:o.config.theme,size:o.config.size}),Tt(t),n.current&&clearInterval(n.current),n.current=setInterval(()=>{window.grecaptcha.reset(p.current)},3e4)}return D.useEffect(()=>{window.grecaptcha&&f()},[o]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:s}),u.jsx("div",{"data-dev-fld-wrp":t,className:`${t}-recaptcha-container ${t}-fld-wrp ${h?"":"drag"} ${d?"fld-hide":""}`,children:b!==""?u.jsx("div",{className:`${t}-recaptcha-wrp`,ref:i,children:u.jsx("div",{className:`${t}-recaptcha`})}):u.jsxs("div",{children:["To Load reCaptcha Field, Please Configure Site Key and Secret."," ",u.jsx("strong",{children:"Go to App Settings"})]})})]})}function TR({fieldKey:t,attr:e,styleClasses:s,formID:i}){var Di,Fi,ir;const{formType:n}=qu(),a=mn(s),[o,c]=Mi(gg),[h,d]=D.useState(mn(o[t]||{lg:[],md:[],sm:[]})),[p,m]=Mi(Eg),[b,f]=Mi(bg),g=fn(Ig),v=J(Nt),{styleMode:_}=J(je),[R,w]=Mi(Ro),S=D.useRef(null),{ref:C,isComponentVisible:L,setIsComponentVisible:y}=J(vg),P=J(sr),A=fn(_g),F=J(wg),{recalculateNestedField:W}=J(Pm),{fieldKey:G,parentFieldKey:B,counter:X}=W,M=Nm(),q=Tg(),{btnPosition:j}=e;D.useEffect(()=>{if(X>0&&t===B){const et=xg(h,G);d(et),D.startTransition(()=>{c(ct=>De(ct,Pt=>{Pt[t]=et})),Tt(t)})}},[X,B,G]),D.useEffect(()=>{d(mn(o[t]||{lg:[],md:[],sm:[]}))},[o[t]]);const N=et=>{et.findIndex(ct=>ct.i==="shadow_block")<0&&(d(ct=>O(I({},ct),{[P]:et})),D.startTransition(()=>{c(ct=>De(ct,Pt=>{Pt!=null&&Pt[t]&&(Pt[t][P]=et)}))}))},k=(et,ct)=>{const Pt=Ah(F.fieldData,"repeater");if(!Pt)return;const{newLayouts:Yt,historyData:le}=Lg(h,Pt,F.fieldSize,ct);d(Yt),D.startTransition(()=>{c(Gs=>De(Gs,ji=>{ji[t]=Yt})),A(!0),Tt(t),le.state.nestedLayouts=yh("nestedLayouts"),Mh(le)})},U=St(`.${t}-rpt-wrp`),Y=U&&nh(U),z=Y?Y.width-(Y.paddingLeft+Y.paddingRight+Y.borderLeft+Y.borderRight):0,ot=St(`.${t}-pair-btn-wrp`),nt=ot&&nh(ot),lt=nt&&["row","row-reverse"].includes(j)?nt.width:0,gt=St(`.${t}-rpt-grid-wrp`),Q=gt&&nh(gt),st=z-lt-(Q?Q.paddingLeft+Q.paddingRight+Q.borderLeft+Q.borderRight:0),rt=()=>{m({}),y(!1)},pt=()=>{M(q.pathname.replace(/style\/.+|style/g,"fs"),{replace:!0}),rt()},dt=et=>{M(`/form/builder/${n}/${i}/field-theme-customize/quick-tweaks/${et}`,{replace:!0}),rt()},ke=(et,ct)=>{et.preventDefault(),et.stopPropagation(),Gt(et,ct)},tt=(et,ct)=>{et.stopPropagation(),f(ct),il(p)||m({}),at(),!_&&M(`/form/builder/${n}/${i}/field-settings/${ct}`)},at=()=>{il(R)||(S.current!==null&&clearTimeout(S.current),S.current=setTimeout(()=>{w({}),S.current=null},700))},Gt=(et,ct)=>{var nf;const{button:Pt}=et;let Yt,le,Gs,ji;const nr=C.current.getBoundingClientRect().top+window.scrollY,bn=C.current.getBoundingClientRect().left+window.scrollX,Ao=St("#layout-wrapper"),yo=Number(Ao.style.width.match(/\d+/gi)),ef=Number(Ao.style.height.match(/\d+/gi)),sf=170,Vc=200;if(Pt===0){const rf=(nf=St(`[data-key="${ct}"]`))==null?void 0:nf.querySelector(".blk-wrp-down-btn"),op=30,af=rf.getBoundingClientRect().top+op,of=rf.getBoundingClientRect().left;if(Yt=of-bn+5,le=af-nr+2,Gs=Yt+sf>yo,ji=le+Vc>ef,Gs&&(Yt=of+op-bn-148),ji&&(le=af-nr-(Vc+op+7)),b!==ct&&(Yt+=3),L&&p.fldKey===ct&&p.x===Yt&&p.y===le){rt();return}}else Pt===2&&(Yt=et.clientX-bn+5,le=et.clientY-nr,Gs=Yt+sf>yo,ji=le+Vc>ef,Gs&&(Yt=et.clientX-bn-150),ji&&(le=et.clientY-nr-Vc));f(ct),m({fldKey:ct,x:Yt,y:le}),y(!0)},qt=et=>{if(!Rg){g(I({show:!0},Cg.fieldClone));return}const ct=v[et];if(!Ah(ct))return;const{newLayouts:Pt}=$g(et,h);d(Pt),D.startTransition(()=>{c(Yt=>De(Yt,le=>{le[t]=Pt})),Tt(t)})},oe=et=>{const{newLayouts:ct,historyData:Pt}=Ag(et,h);d(ct),D.startTransition(()=>{c(Yt=>De(Yt,le=>{le[t]=ct})),Tt(t),Pt.state.nestedLayouts=yh("nestedLayouts"),Mh(Pt)}),M(`/form/builder/${n}/${i}/fields-list`,{replace:!0})};return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:a}),u.jsx(_t,{formID:i,fieldKey:t,fieldData:e,noErrMsg:!0,children:u.jsx("div",O(I({"data-testid":`${t}-inp-fld-wrp`,"data-dev-inp-fld-wrp":t,className:`${t}-inp-fld-wrp ${x(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{children:u.jsxs("div",O(I({"data-testid":`${t}-rpt-fld-wrp`,"data-dev-rpt-fld-wrp":t,className:`${t}-rpt-fld-wrp ${x(t,"rpt-fld-wrp")}`},$(t,"rpt-fld-wrp")),{children:[u.jsxs("div",O(I({"data-testid":`${t}-rpt-wrp`,"data-dev-rpt-wrp":t,className:`${t}-rpt-wrp ${x(t,"rpt-wrp")}`},$(t,"rpt-wrp")),{children:[u.jsx("div",O(I({"data-testid":`${t}-rpt-grid-wrp`,"data-dev-rpt-grid-wrp":t,className:`${t}-rpt-grid-wrp ${x(t,"rpt-grid-wrp")}`},$(t,"rpt-grid-wrp")),{children:u.jsxs("div",{style:{width:st,display:"inline-block"},id:`${t}-layout-wrapper`,onDragOver:et=>et.preventDefault(),onDragEnter:et=>et.preventDefault(),onMouseMove:()=>D.startTransition(()=>{A(!1)}),onMouseLeave:()=>D.startTransition(()=>{A(!0)}),children:[_?u.jsx("div",{className:"_frm-g",children:(Fi=h==null?void 0:h[P])==null?void 0:Fi.map(et=>u.jsx("div",{"data-key":et.i,className:et.i,onClick:ct=>tt(ct,et.i),onKeyDown:ct=>tt(ct,et.i),role:"button",tabIndex:0,onContextMenu:ct=>ke(ct,et.i),children:u.jsx(D.Suspense,{fallback:u.jsx(Ph,{layout:et}),children:u.jsx(Wh,{layoutItem:et,removeLayoutItem:oe,cloneLayoutItem:qt,fields:v,formID:i,navigateToFieldSettings:pt,navigateToStyle:dt,handleContextMenu:ke,resizingFld:R})})},et.i))}):u.jsx(yg,{width:st,measureBeforeMount:!0,compactType:"vertical",useCSSTransforms:!0,isDroppable:F!==null&&P==="lg",className:"layout",style:{minHeight:F?Sg()+40:null},onDrop:k,resizeHandles:["e"],droppingItem:F==null?void 0:F.fieldSize,onLayoutChange:N,cols:60,rowHeight:1,margin:[0,0],draggableCancel:".no-drg",draggableHandle:".drag",layout:(h==null?void 0:h[P])||[],onDragStart:Nh,onDragStop:()=>{D.startTransition(()=>{A(!0),Tt(t),at()})},onResizeStart:Nh,onResize:Ep,onResizeStop:()=>{at(),Tt(t)},children:(Di=h==null?void 0:h[P])==null?void 0:Di.map(et=>u.jsx("div",{"data-key":et.i,className:`blk ${et.i===b&&"itm-focus"}`,onClick:ct=>tt(ct,et.i),onKeyDown:ct=>tt(ct,et.i),role:"button",tabIndex:0,onContextMenu:ct=>ke(ct,et.i),children:u.jsx(D.Suspense,{fallback:u.jsx(Ph,{layout:et}),children:u.jsx(Wh,{layoutItem:et,removeLayoutItem:oe,cloneLayoutItem:qt,fields:v,formID:i,navigateToFieldSettings:pt,navigateToStyle:dt,handleContextMenu:ke,resizingFld:R})})},et.i))}),!((ir=h==null?void 0:h[P])!=null&&ir.length)&&!F&&u.jsx("div",{className:"empty-layout",children:u.jsx("div",{className:"empty-layout-msg",children:u.jsx("div",{className:"empty-layout-msg-txt",children:u.jsx("span",{children:"Drag and drop fields here"})})})})]})})),u.jsxs("div",O(I({"data-testid":`${t}-pair-btn-wrp`,"data-dev-pair-btn-wrp":t,className:`${t}-pair-btn-wrp ${x(t,"pair-btn-wrp")}`},$(t,"pair-btn-wrp")),{children:[e.addBtn.show&&u.jsxs("button",O(I({"data-testid":t,"data-dev-rpt-add-btn":t,className:`${t}-rpt-add-btn ${x(t,"rpt-add-btn")}`},$(t,"rpt-add-btn")),{type:"button",children:[e.addBtnPreIcn&&u.jsx("img",I({"data-testid":`${t}-rpt-add-btn-pre-i`,"data-dev-rpt-add-btn-pre-i":t,className:`${t}-rpt-add-btn-pre-i ${x(t,"rpt-add-btn-pre-i")}`,src:`${e.addBtnPreIcn}`,alt:""},$(t,"rpt-add-btn-pre-i"))),u.jsx(Fe,{html:e.addBtn.txt||""}),e.addBtnSufIcn&&u.jsx("img",I({"data-testid":`${t}-rpt-add-btn-suf-i`,"data-dev-rpt-add-btn-suf-i":t,className:`${t}-rpt-add-btn-suf-i ${x(t,"rpt-add-btn-suf-i")}`,src:e.addBtnSufIcn,alt:""},$(t,"rpt-add-btn-suf-i")))]})),u.jsxs("button",O(I({"data-testid":t,"data-dev-rpt-rmv-btn":t,className:`${t}-rpt-rmv-btn ${x(t,"rpt-rmv-btn")}`},$(t,"rpt-rmv-btn")),{type:"button",children:[e.removeBtnPreIcn&&u.jsx("img",I({"data-testid":`${t}-rpt-rmv-btn-pre-i`,"data-dev-rpt-rmv-btn-pre-i":t,className:`${t}-rpt-rmv-btn-pre-i ${x(t,"rpt-rmv-btn-pre-i")}`,src:`${e.removeBtnPreIcn}`,alt:""},$(t,"rpt-rmv-btn-pre-i"))),u.jsx(Fe,{html:e.removeBtn.txt||""}),e.removeBtnSufIcn&&u.jsx("img",I({"data-testid":`${t}-rpt-rmv-btn-suf-i`,"data-dev-rpt-rmv-btn-suf-i":t,className:`${t}-rpt-rmv-btn-suf-i ${x(t,"rpt-rmv-btn-suf-i")}`,src:e.removeBtnSufIcn,alt:""},$(t,"rpt-btn-btn-suf-i")))]}))]}))]})),e.addToEndBtn.show&&u.jsx("div",O(I({"data-testid":`${t}-add-to-end-btn-wrp`,"data-dev-add-to-end-btn-wrp":t,className:`${t}-add-to-end-btn-wrp ${x(t,"add-to-end-btn-wrp")}`},$(t,"add-to-end-btn-wrp")),{children:u.jsxs("button",O(I({"data-testid":t,"data-dev-add-to-end-btn":t,className:`${t}-add-to-end-btn ${x(t,"add-to-end-btn")}`},$(t,"add-to-end-btn")),{type:"button",children:[e.addToEndBtnPreIcn&&u.jsx("img",I({"data-testid":`${t}-add-to-end-btn-pre-i`,"data-dev-add-to-end-btn-pre-i":t,className:`${t}-add-to-end-btn-pre-i ${x(t,"add-to-end-btn-pre-i")}`,src:e.addToEndBtnPreIcn,alt:""},$(t,"add-to-end-btn-pre-i"))),u.jsx(Fe,{html:e.addToEndBtn.txt||""}),e.addToEndBtnSufIcn&&u.jsx("img",I({"data-testid":`${t}-add-to-end-btn-suf-i`,"data-dev-add-to-end-btn-suf-i":t,className:`${t}-add-to-end-btn-suf-i ${x(t,"add-to-end-btn-suf-i")}`,src:e.addToEndBtnSufIcn,alt:""},$(t,"add-to-end-btn-suf-i")))]}))}))]}))}))})]})}var xR=D.memo(TR);function SR({fieldKey:t,attr:e,styleClasses:s,formID:i}){var dt,ke;const{formType:n}=qu(),a=mn(s),[o,c]=Mi(gg),[h,d]=D.useState(mn(o[t]||{lg:[],md:[],sm:[]})),[p,m]=Mi(Eg),[b,f]=Mi(bg),g=fn(Ig),v=J(Nt),{styleMode:_}=J(je),[R,w]=Mi(Ro),S=D.useRef(null),{ref:C,isComponentVisible:L,setIsComponentVisible:y}=J(vg),P=J(sr),{recalculateNestedField:A}=J(Pm),F=fn(_g),W=J(wg),{fieldKey:G,parentFieldKey:B,counter:X}=A,M=Nm(),q=Tg();D.useEffect(()=>{if(X>0&&t===B){const tt=xg(h,G);d(tt),D.startTransition(()=>{c(at=>De(at,Gt=>{Gt[t]=tt})),Tt(t)})}},[X,B,G]),D.useEffect(()=>{d(mn(o[t]||{lg:[],md:[],sm:[]}))},[o[t]]);const j=tt=>{tt.findIndex(at=>at.i==="shadow_block")<0&&(d(at=>O(I({},at),{[P]:tt})),D.startTransition(()=>{c(at=>De(at,Gt=>{Gt!=null&&Gt[t]&&(Gt[t][P]=tt)}))}))},N=(tt,at)=>{const Gt=Ah(W.fieldData,"section");if(!Gt)return;const{newLayouts:qt,historyData:oe}=Lg(h,Gt,W.fieldSize,at);d(qt),D.startTransition(()=>{F(!0),c(Di=>De(Di,Fi=>{Fi[t]=qt})),Tt(t),oe.state.nestedLayouts=yh("nestedLayouts"),Mh(oe)})},k=St(`.${t}-inp-fld-wrp`),U=k&&nh(k),Y=U?U.width-(U.paddingLeft+U.paddingRight+U.borderLeft+U.borderRight):0,z=()=>{m({}),y(!1)},ot=()=>{M(q.pathname.replace(/style\/.+|style/g,"fs"),{replace:!0}),z()},nt=tt=>{M(`/form/builder/${n}/${i}/field-theme-customize/quick-tweaks/${tt}`,{replace:!0}),z()},lt=(tt,at)=>{tt.preventDefault(),tt.stopPropagation(),st(tt,at)},gt=(tt,at)=>{tt.stopPropagation(),f(at),il(p)||m({}),Q(),!_&&M(`/form/builder/${n}/${i}/field-settings/${at}`)},Q=()=>{il(R)||(S.current!==null&&clearTimeout(S.current),S.current=setTimeout(()=>{w({}),S.current=null},700))},st=(tt,at)=>{var ji;const{button:Gt}=tt;let qt,oe,Di,Fi;const ir=C.current.getBoundingClientRect().top+window.scrollY,et=C.current.getBoundingClientRect().left+window.scrollX,ct=St("#layout-wrapper"),Pt=Number(ct.style.width.match(/\d+/gi)),Yt=Number(ct.style.height.match(/\d+/gi)),le=170,Gs=200;if(Gt===0){const nr=(ji=St(`[data-key="${at}"]`))==null?void 0:ji.querySelector(".blk-wrp-down-btn"),bn=30,Ao=nr.getBoundingClientRect().top+bn,yo=nr.getBoundingClientRect().left;if(qt=yo-et+5,oe=Ao-ir+2,Di=qt+le>Pt,Fi=oe+Gs>Yt,Di&&(qt=yo+bn-et-148),Fi&&(oe=Ao-ir-(Gs+bn+7)),b!==at&&(qt+=3),L&&p.fldKey===at&&p.x===qt&&p.y===oe){z();return}}else Gt===2&&(qt=tt.clientX-et+5,oe=tt.clientY-ir,Di=qt+le>Pt,Fi=oe+Gs>Yt,Di&&(qt=tt.clientX-et-150),Fi&&(oe=tt.clientY-ir-Gs));f(at),m({fldKey:at,x:qt,y:oe}),y(!0)},rt=tt=>{if(!Rg){g(I({show:!0},Cg.fieldClone));return}const at=v[tt];if(!Ah(at))return;const{newLayouts:Gt}=$g(tt,h);d(Gt),D.startTransition(()=>{c(qt=>De(qt,oe=>{oe[t]=Gt})),Tt(t)})},pt=tt=>{const{newLayouts:at,historyData:Gt}=Ag(tt,h);d(at),D.startTransition(()=>{c(qt=>De(qt,oe=>{oe[t]=at})),Tt(),Gt.state.nestedLayouts=yh("nestedLayouts"),Mh(Gt)}),M(`/form/builder/${n}/${i}/fields-list`,{replace:!0})};return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:a}),u.jsx(_t,{formID:i,fieldKey:t,fieldData:e,noErrMsg:!0,children:u.jsx("div",O(I({"data-testid":`${t}-inp-fld-wrp`,"data-dev-inp-fld-wrp":t,className:`${t}-inp-fld-wrp ${x(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{children:u.jsxs("div",{style:{width:Y,display:"inline-block"},id:`${t}-layout-wrapper`,onDragOver:tt=>tt.preventDefault(),onDragEnter:tt=>tt.preventDefault(),onMouseMove:()=>D.startTransition(()=>{F(!1)}),onMouseLeave:()=>D.startTransition(()=>{F(!0)}),children:[_?u.jsx("div",{className:"_frm-g",children:h==null?void 0:h[P].map(tt=>u.jsx("div",{"data-key":tt.i,className:tt.i,onClick:at=>gt(at,tt.i),onKeyDown:at=>gt(at,tt.i),role:"button",tabIndex:0,onContextMenu:at=>lt(at,tt.i),children:u.jsx(D.Suspense,{fallback:u.jsx(Ph,{layout:tt}),children:u.jsx(Wh,{layoutItem:tt,removeLayoutItem:pt,cloneLayoutItem:rt,navigateToFieldSettings:ot,navigateToStyle:nt,handleContextMenu:lt})})},tt.i))}):u.jsx(yg,{width:Y,measureBeforeMount:!0,compactType:"vertical",useCSSTransforms:!0,isDroppable:W!==null&&P==="lg",className:"layout",style:{minHeight:W?Sg()+40:null},onDrop:N,resizeHandles:["e"],droppingItem:W==null?void 0:W.fieldSize,onLayoutChange:j,cols:yI[P],rowHeight:1,margin:[0,0],draggableCancel:".no-drg",draggableHandle:".drag",layout:h==null?void 0:h[P],onDragStart:Nh,onDrag:Ep,onDragStop:()=>{D.startTransition(()=>{F(!0),Tt(t),Q()})},onResizeStart:Nh,onResize:Ep,onResizeStop:()=>{Q(),Tt(t)},children:(dt=h==null?void 0:h[P])==null?void 0:dt.map(tt=>u.jsx("div",{"data-key":tt.i,className:`blk ${tt.i===b&&"itm-focus"}`,onClick:at=>gt(at,tt.i),onKeyDown:at=>gt(at,tt.i),role:"button",tabIndex:0,onContextMenu:at=>lt(at,tt.i),children:u.jsx(D.Suspense,{fallback:u.jsx(Ph,{layout:tt}),children:u.jsx(Wh,{layoutItem:tt,removeLayoutItem:pt,cloneLayoutItem:rt,navigateToFieldSettings:ot,navigateToStyle:nt,handleContextMenu:lt})})},tt.i))}),!((ke=h==null?void 0:h[P])!=null&&ke.length)&&!W&&u.jsx("div",{className:"empty-layout",children:u.jsx("div",{className:"empty-layout-msg",children:u.jsx("div",{className:"empty-layout-msg-txt",children:u.jsx("span",{children:"Drag and drop fields here"})})})})]})}))})]})}var RR=D.memo(SR);function CR({fieldKey:t,attr:e,styleClasses:s}){var a,o;const{styleMode:i}=J(je),n=((a=e.valid)==null?void 0:a.hide)||!1;return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:s}),u.jsx("div",O(I({"data-dev-fld-wrp":t,className:`${t}-fld-wrp ${i?"":"drag"} ${x(t,"fld-wrp")} ${n?"fld-hide":""}`},$(t,"fld-wrp")),{children:u.jsx(Fe,{html:e.content||((o=e==null?void 0:e.info)==null?void 0:o.content)})}))]})}/*!
* Signature Pad v4.2.0 | https://github.com/szimek/signature_pad
* (c) 2024 Szymon Nowak | Released under the MIT license
*/class Vh{constructor(e,s,i,n){if(isNaN(e)||isNaN(s))throw new Error(`Point is invalid: (${e}, ${s})`);this.x=+e,this.y=+s,this.pressure=i||0,this.time=n||Date.now()}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}equals(e){return this.x===e.x&&this.y===e.y&&this.pressure===e.pressure&&this.time===e.time}velocityFrom(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}}class tf{static fromPoints(e,s){const i=this.calculateControlPoints(e[0],e[1],e[2]).c2,n=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new tf(e[1],i,n,e[2],s.start,s.end)}static calculateControlPoints(e,s,i){const n=e.x-s.x,a=e.y-s.y,o=s.x-i.x,c=s.y-i.y,h={x:(e.x+s.x)/2,y:(e.y+s.y)/2},d={x:(s.x+i.x)/2,y:(s.y+i.y)/2},p=Math.sqrt(n*n+a*a),m=Math.sqrt(o*o+c*c),b=h.x-d.x,f=h.y-d.y,g=m/(p+m),v={x:d.x+b*g,y:d.y+f*g},_=s.x-v.x,R=s.y-v.y;return{c1:new Vh(h.x+_,h.y+R),c2:new Vh(d.x+_,d.y+R)}}constructor(e,s,i,n,a,o){this.startPoint=e,this.control2=s,this.control1=i,this.endPoint=n,this.startWidth=a,this.endWidth=o}length(){let s=0,i,n;for(let a=0;a<=10;a+=1){const o=a/10,c=this.point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),h=this.point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){const d=c-i,p=h-n;s+=Math.sqrt(d*d+p*p)}i=c,n=h}return s}point(e,s,i,n,a){return s*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*n*(1-e)*e*e+a*e*e*e}}class OR{constructor(){try{this._et=new EventTarget}catch(e){this._et=document}}addEventListener(e,s,i){this._et.addEventListener(e,s,i)}dispatchEvent(e){return this._et.dispatchEvent(e)}removeEventListener(e,s,i){this._et.removeEventListener(e,s,i)}}function LR(t,e=250){let s=0,i=null,n,a,o;const c=()=>{s=Date.now(),i=null,n=t.apply(a,o),i||(a=null,o=[])};return function(...d){const p=Date.now(),m=e-(p-s);return a=this,o=d,m<=0||m>e?(i&&(clearTimeout(i),i=null),s=p,n=t.apply(a,o),i||(a=null,o=[])):i||(i=window.setTimeout(c,m)),n}}class zh extends OR{constructor(e,s={}){super(),this.canvas=e,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=i=>{i.buttons===1&&this._strokeBegin(i)},this._handleMouseMove=i=>{this._strokeMoveUpdate(i)},this._handleMouseUp=i=>{i.buttons===1&&this._strokeEnd(i)},this._handleTouchStart=i=>{if(i.cancelable&&i.preventDefault(),i.targetTouches.length===1){const n=i.changedTouches[0];this._strokeBegin(n)}},this._handleTouchMove=i=>{i.cancelable&&i.preventDefault();const n=i.targetTouches[0];this._strokeMoveUpdate(n)},this._handleTouchEnd=i=>{if(i.target===this.canvas){i.cancelable&&i.preventDefault();const a=i.changedTouches[0];this._strokeEnd(a)}},this._handlePointerStart=i=>{i.preventDefault(),this._strokeBegin(i)},this._handlePointerMove=i=>{this._strokeMoveUpdate(i)},this._handlePointerEnd=i=>{this._drawingStroke&&(i.preventDefault(),this._strokeEnd(i))},this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.dotSize=s.dotSize||0,this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=s.compositeOperation||"source-over",this.canvasContextOptions="canvasContextOptions"in s?s.canvasContextOptions:{},this._strokeMoveUpdate=this.throttle?LR(zh.prototype._strokeUpdate,this.throttle):zh.prototype._strokeUpdate,this._ctx=e.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){const{_ctx:e,canvas:s}=this;e.fillStyle=this.backgroundColor,e.clearRect(0,0,s.width,s.height),e.fillRect(0,0,s.width,s.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(e,s={}){return new Promise((i,n)=>{const a=new Image,o=s.ratio||window.devicePixelRatio||1,c=s.width||this.canvas.width/o,h=s.height||this.canvas.height/o,d=s.xOffset||0,p=s.yOffset||0;this._reset(this._getPointGroupOptions()),a.onload=()=>{this._ctx.drawImage(a,d,p,c,h),i()},a.onerror=m=>{n(m)},a.crossOrigin="anonymous",a.src=e,this._isEmpty=!1})}toDataURL(e="image/png",s){switch(e){case"image/svg+xml":return typeof s!="object"&&(s=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(s))}`;default:return typeof s!="number"&&(s=void 0),this.canvas.toDataURL(e,s)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const e=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!e?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(e,{clear:s=!0}={}){s&&this.clear(),this._fromData(e,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(e)}toData(){return this._data}_getPointGroupOptions(e){return{penColor:e&&"penColor"in e?e.penColor:this.penColor,dotSize:e&&"dotSize"in e?e.dotSize:this.dotSize,minWidth:e&&"minWidth"in e?e.minWidth:this.minWidth,maxWidth:e&&"maxWidth"in e?e.maxWidth:this.maxWidth,velocityFilterWeight:e&&"velocityFilterWeight"in e?e.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:e&&"compositeOperation"in e?e.compositeOperation:this.compositeOperation}}_strokeBegin(e){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:e,cancelable:!0})))return;this._drawingStroke=!0;const i=this._getPointGroupOptions(),n=Object.assign(Object.assign({},i),{points:[]});this._data.push(n),this._reset(i),this._strokeUpdate(e)}_strokeUpdate(e){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(e);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:e}));const s=e.clientX,i=e.clientY,n=e.pressure!==void 0?e.pressure:e.force!==void 0?e.force:0,a=this._createPoint(s,i,n),o=this._data[this._data.length-1],c=o.points,h=c.length>0&&c[c.length-1],d=h?a.distanceTo(h)<=this.minDistance:!1,p=this._getPointGroupOptions(o);if(!h||!(h&&d)){const m=this._addPoint(a,p);h?m&&this._drawCurve(m,p):this._drawDot(a,p),c.push({time:a.time,x:a.x,y:a.y,pressure:a.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:e}))}_strokeEnd(e){this._drawingStroke&&(this._strokeUpdate(e),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:e})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(e){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(e.minWidth+e.maxWidth)/2,this._ctx.fillStyle=e.penColor,this._ctx.globalCompositeOperation=e.compositeOperation}_createPoint(e,s,i){const n=this.canvas.getBoundingClientRect();return new Vh(e-n.left,s-n.top,i,new Date().getTime())}_addPoint(e,s){const{_lastPoints:i}=this;if(i.push(e),i.length>2){i.length===3&&i.unshift(i[0]);const n=this._calculateCurveWidths(i[1],i[2],s),a=tf.fromPoints(i,n);return i.shift(),a}return null}_calculateCurveWidths(e,s,i){const n=i.velocityFilterWeight*s.velocityFrom(e)+(1-i.velocityFilterWeight)*this._lastVelocity,a=this._strokeWidth(n,i),o={end:a,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=a,o}_strokeWidth(e,s){return Math.max(s.maxWidth/(e+1),s.minWidth)}_drawCurveSegment(e,s,i){const n=this._ctx;n.moveTo(e,s),n.arc(e,s,i,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(e,s){const i=this._ctx,n=e.endWidth-e.startWidth,a=Math.ceil(e.length())*2;i.beginPath(),i.fillStyle=s.penColor;for(let o=0;o<a;o+=1){const c=o/a,h=c*c,d=h*c,p=1-c,m=p*p,b=m*p;let f=b*e.startPoint.x;f+=3*m*c*e.control1.x,f+=3*p*h*e.control2.x,f+=d*e.endPoint.x;let g=b*e.startPoint.y;g+=3*m*c*e.control1.y,g+=3*p*h*e.control2.y,g+=d*e.endPoint.y;const v=Math.min(e.startWidth+d*n,s.maxWidth);this._drawCurveSegment(f,g,v)}i.closePath(),i.fill()}_drawDot(e,s){const i=this._ctx,n=s.dotSize>0?s.dotSize:(s.minWidth+s.maxWidth)/2;i.beginPath(),this._drawCurveSegment(e.x,e.y,n),i.closePath(),i.fillStyle=s.penColor,i.fill()}_fromData(e,s,i){for(const n of e){const{points:a}=n,o=this._getPointGroupOptions(n);if(a.length>1)for(let c=0;c<a.length;c+=1){const h=a[c],d=new Vh(h.x,h.y,h.pressure,h.time);c===0&&this._reset(o);const p=this._addPoint(d,o);p&&s(p,o)}else this._reset(o),i(a[0],o)}}toSVG({includeBackgroundColor:e=!1}={}){const s=this._data,i=Math.max(window.devicePixelRatio||1,1),n=0,a=0,o=this.canvas.width/i,c=this.canvas.height/i,h=document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.setAttribute("xmlns","http://www.w3.org/2000/svg"),h.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),h.setAttribute("viewBox",`${n} ${a} ${o} ${c}`),h.setAttribute("width",o.toString()),h.setAttribute("height",c.toString()),e&&this.backgroundColor){const d=document.createElement("rect");d.setAttribute("width","100%"),d.setAttribute("height","100%"),d.setAttribute("fill",this.backgroundColor),h.appendChild(d)}return this._fromData(s,(d,{penColor:p})=>{const m=document.createElement("path");if(!isNaN(d.control1.x)&&!isNaN(d.control1.y)&&!isNaN(d.control2.x)&&!isNaN(d.control2.y)){const b=`M ${d.startPoint.x.toFixed(3)},${d.startPoint.y.toFixed(3)} C ${d.control1.x.toFixed(3)},${d.control1.y.toFixed(3)} ${d.control2.x.toFixed(3)},${d.control2.y.toFixed(3)} ${d.endPoint.x.toFixed(3)},${d.endPoint.y.toFixed(3)}`;m.setAttribute("d",b),m.setAttribute("stroke-width",(d.endWidth*2.25).toFixed(3)),m.setAttribute("stroke",p),m.setAttribute("fill","none"),m.setAttribute("stroke-linecap","round"),h.appendChild(m)}},(d,{penColor:p,dotSize:m,minWidth:b,maxWidth:f})=>{const g=document.createElement("circle"),v=m>0?m:(b+f)/2;g.setAttribute("r",v.toString()),g.setAttribute("cx",d.x.toString()),g.setAttribute("cy",d.y.toString()),g.setAttribute("fill",p),h.appendChild(g)}),h.outerHTML}}var Wt,wo,$i,Fs,js,pe,To,Dc,xo,Fc,Ai,Jn,Vu,jc,kc,Kn,pn,mr,zu,TI,Wu,xI,Hu,SI,ne,be;class $R{constructor(e,s){E(this,pn);E(this,zu);E(this,Wu);E(this,Hu);E(this,ne);E(this,Wt,null);E(this,wo,null);E(this,$i,null);E(this,Fs,null);E(this,js,null);E(this,pe,null);E(this,To,null);E(this,Dc,{});E(this,xo,null);E(this,Fc,null);E(this,Ai,null);E(this,Jn,null);E(this,Vu,null);E(this,jc,null);E(this,kc,null);E(this,Kn,[]);T(this,xo,s.document||document),T(this,Fc,s.window||window),typeof e=="string"?T(this,To,r(this,xo).querySelector(e)):T(this,To,e),T(this,Dc,{maxWidth:s.maxWidth||2.5,penColor:s.penColor||"rgb(0, 0, 0)",backgroundColor:s.backgroundColor||"rgb(255, 255, 255)"}),T(this,Ai,s.fieldKey),T(this,wo,s.imgTyp||"image/png"),T(this,kc,(s==null?void 0:s.isBuilder)||!1),T(this,Vu,s==null?void 0:s.contentId),T(this,jc,s==null?void 0:s.assetsURL),this.init()}init(){T(this,Wt,l(this,pn,mr).call(this,`.${r(this,Ai)}-signature-pad`)),T(this,$i,l(this,pn,mr).call(this,`.${r(this,Ai)}-clr-btn`)),T(this,Fs,l(this,pn,mr).call(this,`.${r(this,Ai)}-undo-btn`)),T(this,js,l(this,pn,mr).call(this,`.${r(this,Ai)}-redo-btn`)),T(this,Jn,l(this,pn,mr).call(this,`.${r(this,Ai)}-signature-fld`)),r(this,Wt).style.cursor=`url(${r(this,jc)}pen.ico), crosshair`;const e=l(this,pn,mr).call(this,`.${r(this,Ai)}-signature-iframe`);e&&e.contentWindow.addEventListener("resize",()=>{this.resizeCanvas()}),T(this,pe,new zh(r(this,Wt),r(this,Dc))),this.resizeCanvas(),l(this,zu,TI).call(this),l(this,Wu,xI).call(this),l(this,Hu,SI).call(this),l(this,ne,be).call(this,r(this,Fs)),l(this,ne,be).call(this,r(this,js)),l(this,ne,be).call(this,r(this,$i)),r(this,pe).addEventListener("endStroke",()=>{T(this,Kn,[]),this.putSignature(),l(this,ne,be).call(this,r(this,$i),!1),l(this,ne,be).call(this,r(this,Fs),!1),l(this,ne,be).call(this,r(this,js))}),r(this,Wt).addEventListener("touchmove",s=>{s.preventDefault();const i=s.touches[0],n=new MouseEvent("mousemove",{clientX:i.clientX,clientY:i.clientY});r(this,Wt).dispatchEvent(n)})}resizeCanvas(){const e=Math.max(r(this,Fc).devicePixelRatio||1,1);r(this,Wt).width=r(this,Wt).offsetWidth*e,r(this,Wt).height=r(this,Wt).offsetHeight*e,r(this,Wt).getContext("2d").scale(e,e),r(this,pe).fromData(r(this,pe).toData())}putSignature(){if(r(this,kc)||r(this,pe).isEmpty())return;const e=r(this,pe).toDataURL(r(this,wo));r(this,Jn).value=e}destroy(){T(this,xo,null),T(this,Wt,null)}reset(){r(this,pe).clear(),r(this,Jn).value=""}setSignature(e){if(!r(this,pe))return;r(this,pe).clear();const s=new Image;s.onload=()=>{const i=r(this,Wt).getContext("2d");i.clearRect(0,0,r(this,Wt).width,r(this,Wt).height),i.drawImage(s,0,0,r(this,Wt).width,r(this,Wt).height);const n=r(this,Wt).toDataURL(r(this,wo));r(this,pe).fromDataURL(n),this.putSignature()},s.src=e,l(this,ne,be).call(this,r(this,$i),!1)}}Wt=new WeakMap,wo=new WeakMap,$i=new WeakMap,Fs=new WeakMap,js=new WeakMap,pe=new WeakMap,To=new WeakMap,Dc=new WeakMap,xo=new WeakMap,Fc=new WeakMap,Ai=new WeakMap,Jn=new WeakMap,Vu=new WeakMap,jc=new WeakMap,kc=new WeakMap,Kn=new WeakMap,pn=new WeakSet,mr=function(e,s=null){return(s||r(this,To)).querySelector(e)},zu=new WeakSet,TI=function(){r(this,$i)&&r(this,$i).addEventListener("click",()=>{r(this,pe).clear(),r(this,Jn).value="",l(this,ne,be).call(this,r(this,Fs)),l(this,ne,be).call(this,r(this,js)),l(this,ne,be).call(this,r(this,$i))})},Wu=new WeakSet,xI=function(){r(this,Fs)&&r(this,Fs).addEventListener("click",()=>{const e=r(this,pe).toData();if(e.length){const s=e.pop();r(this,Kn).push(s),r(this,pe).fromData(e),this.putSignature(),e.length===0&&(r(this,Jn).value=""),l(this,ne,be).call(this,r(this,js),!1),e.length||l(this,ne,be).call(this,r(this,Fs))}else l(this,ne,be).call(this,r(this,Fs))})},Hu=new WeakSet,SI=function(){r(this,js)&&r(this,js).addEventListener("click",()=>{const e=r(this,pe).toData();r(this,Kn).length?(e.push(r(this,Kn).pop()),r(this,pe).fromData(e),this.putSignature(),l(this,ne,be).call(this,r(this,Fs),!1),r(this,Kn).length||l(this,ne,be).call(this,r(this,js))):l(this,ne,be).call(this,r(this,js))})},ne=new WeakSet,be=function(e,s=!0){e&&(s?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled"))};function AR({fieldKey:t,attr:e,formID:s,styleClasses:i}){const n=D.useRef(null),a=D.useRef(null),o=J(Gc),c=J(Ro),h=D.useRef({resize:!1}),d=fn(Yu),p=D.useRef(null),m=D.useRef(0),f=J(Nt)[t];if(c.fieldKey===t){h.current.resize=!0;const g=St(`[data-key="${t}"]`),v=Og(g);if(c.wrpHeight>=c.fldHeight){const _=`${c.fldHeight+(v-c.wrpHeight)}px`;a.current.style.height=_}}if(h.current.resize&&!c.fieldKey){h.current.resize=!1;const g=v=>`fields->${t}->classes->.${t}-fld->${v}`;d(v=>De(v,_=>{ua(_,g("height"),a.current.style.height),m.current+=1}))}return D.useEffect(()=>{var C;a.current||(p.current=St(`.${t}-inp-fld-wrp`));const g=n.current,v=p.current;g&&v&&"destroy"in g&&g.destroy();const{maxWidth:_,penColor:R,backgroundColor:w}=f.config,S={maxWidth:_,penColor:R,backgroundColor:w,document:(C=document.getElementById("bit-grid-layout"))==null?void 0:C.contentDocument,fieldKey:t,assetsURL:`${o.assetsURL}/../static/signature/`,isBuilder:!0};n.current=new $R(v,S)},[f,m.current]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:i}),u.jsx(_t,{formID:s,fieldKey:t,fieldData:e,children:u.jsxs("div",O(I({"data-testid":`${t}-inp-fld-wrp`,"data-dev-inp-fld-wrp":t,className:`${t}-inp-fld-wrp ${x(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{ref:p,children:[u.jsx("canvas",O(I({ref:a,className:`${t}-signature-pad ${x(t,"signature")}`,id:"canvas"},$(t,"signature-pad")),{"data-testid":`${t}-signature-pad`,"data-dev-fld":t})),u.jsxs("div",{className:`${t}-ctrl`,children:[!(f!=null&&f.clrBtnHide)&&u.jsxs("button",{id:"clear",className:`${t}-clr-btn`,type:"button","data-testid":`${t}-clr-btn`,"data-dev-clr-btn":t,children:[f.clrPreIcn&&u.jsx("img",I({"data-testid":`${t}-clr-btn-pre-i`,"data-dev-clr-btn-pre-i":t,className:`${t}-clr-btn-pre-i ${x(t,"clr-btn-pre-i")}`,src:f.clrPreIcn,alt:""},$(t,"clr-btn-pre-i"))),f.clrBtn,f.clrSufIcn&&u.jsx("img",I({"data-testid":`${t}-clr-btn-suf-i`,"data-dev-clr-btn-suf-i":t,className:`${t}-clr-btn-suf-i ${x(t,"clr-btn-suf-i")}`,src:f.clrSufIcn,alt:""},$(t,"clr-btn-suf-i")))]}),!(f!=null&&f.undoBtnHide)&&u.jsxs("button",{id:"undo",className:`${t}-undo-btn`,type:"button","data-testid":`${t}-undo-btn`,"data-dev-undo-btn":t,children:[(f==null?void 0:f.undoPreIcn)&&u.jsx("img",I({"data-testid":`${t}-undo-btn-pre-i`,"data-dev-undo-btn-pre-i":t,className:`${t}-undo-btn-pre-i ${x(t,"undo-btn-pre-i")}`,src:f.undoPreIcn,alt:""},$(t,"undo-btn-pre-i"))),f.undoBtn,(f==null?void 0:f.undoSufIcn)&&u.jsx("img",I({"data-testid":`${t}-undo-btn-suf-i`,"data-dev-btn-suf-i":t,className:`${t}-undo-btn-suf-i ${x(t,"undo-btn-suf-i")}`,src:f.undoSufIcn,alt:""},$(t,"undo-btn-suf-i")))]}),!(f!=null&&f.redoBtnHide)&&u.jsxs("button",{id:"redo",className:`${t}-redo-btn`,type:"button","data-testid":`${t}-redo-btn`,"data-dev-redo-btn":t,children:[(f==null?void 0:f.redoPreIcn)&&u.jsx("img",I({"data-testid":`${t}-redo-btn-pre-i`,"data-dev-redo-btn-pre-i":t,className:`${t}-redo-btn-pre-i ${x(t,"redo-btn-pre-i")}`,src:f.redoPreIcn,alt:""},$(t,"redo-btn-pre-i"))),f.redoBtn,(f==null?void 0:f.redoSufIcn)&&u.jsx("img",I({"data-testid":`${t}-redo-btn-suf-i`,"data-dev-btn-suf-i":t,className:`${t}-redo-btn-suf-i ${x(t,"redo-btn-suf-i")}`,src:f.redoSufIcn,alt:""},$(t,"redo-btn-suf-i")))]})]})]}))})]})}function yR({fieldKey:t,attr:e,onBlurHandler:s,resetFieldValue:i,formID:n,styleClasses:a}){var g;const o=e.typ==="url"?"text":e.typ,c=D.useRef(null),h=J(MI),{"--dir":d}=h,[p,m]=D.useState(e.val!==void 0?e.val:"");D.useEffect(()=>{e.val!==void 0&&!e.userinput?m(e.val):!e.val&&!e.userinput?m(e.defaultValue||""):e.conditional&&m(e.val)},[e.val,e.defaultValue,e.userinput,e.conditional]),D.useEffect(()=>{if(e.hasWorkflow&&e.val===p&&s&&!e.userinput){const{current:v}=c;s(v)}},[p]);const b=v=>{const _=e.typ==="email"?v.target.value.toLowerCase():v.target.value;m(_)};D.useEffect(()=>{const v=Dm(`#${t}`);v&&Fm(v,"value",(_,R)=>m(e.typ==="email"?R.toLowerCase():R))},[]);const f=v=>ap({input:v.target});return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:a}),u.jsxs(_t,{formID:n,fieldKey:t,fieldData:e,children:[u.jsxs("div",O(I({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${x(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{style:{"--bfv-fld-val":`'${p||50}'`},children:[u.jsx("input",O(I(O(I(I(I(I(I(I(I(I({"data-testid":t,"data-dev-fld":t,id:t,list:`${t}-datalist`,ref:c,className:`${t}-fld no-drg ${x(t,"fld")}`,type:o},"req"in e.valid&&{required:e.valid.req}),"disabled"in e.valid&&{disabled:e.valid.disabled}),"mn"in e&&{min:e.mn}),"mx"in e&&{max:e.mx}),"step"in e&&{step:e.step}),"ac"in e&&{autoComplete:e.ac}),"name"in e&&{name:e.name}),s&&{onInput:s}),{onBlur:f,value:p,onChange:b}),$(t,"fld")),{style:{"--bfv-fill-lower-track":p?`${(p-(e.mn||0))/((e.mx||100)-(e.mn||0))*100}%`:"50%","--bfv-track-dir":d==="rtl"?"to left":"to right"}})),e.prefixIcn&&u.jsx("img",I({"data-testid":`${t}-pre-i`,"data-dev-pre-i":t,className:`${t}-pre-i ${x(t,"pre-i")}`,height:"90%",src:e.prefixIcn,alt:""},$(t,"pre-i"))),e.suffixIcn&&u.jsx("img",I({"data-testid":`${t}-suf-i`,"data-dev-suf-i":t,className:`${t}-suf-i ${x(t,"suf-i")}`,height:"90%",src:e.suffixIcn,alt:""},$(t,"suf-i"))),u.jsx("span",{className:`${t}-slider-val`,children:"Value: "})]})),((g=e.suggestions)==null?void 0:g.length)&&u.jsx("datalist",{id:`${t}-datalist`,children:e.suggestions.map(v=>u.jsx("option",{value:v.val||v.lbl,children:v.lbl},v.val||v.lbl))})]})]})}var MR=D.memo(yR);function NR({fieldKey:t,formID:e,attr:s,isBuilder:i,styleClasses:n}){const a=J(Xu),[o,c]=D.useState(""),d=J(Nt)[t],p=D.useRef(null),m=D.useRef(null),[b,f]=D.useState(!1),[g,v]=D.useState(!1);d==null||d.payType;const{locale:_,currency:R}=d||{};return D.useEffect(()=>{if(!s.payIntegID){c("");return}const w=a==null?void 0:a.find(S=>S.id&&s.payIntegID&&Number(S.id)===Number(s.payIntegID));if(w){const S=w.publishableKey;c(S)}},[s.payIntegID]),D.useEffect(()=>{if(!o){sl({fieldKey:t,errorKey:"publishableKeyMissing",errorMsg:yi("Stripe publishable key is missing"),errorUrl:`field-settings/${t}`});return}v(!0),Zu(t,"publishableKeyMissing");const S={src:"https://js.stripe.com/v3/",integrity:"",id:`bf-stripe-script-${t}`,scriptInGrid:!1,callback:()=>{Tt(t),f(!0),v(!1)}};return Bc(S),()=>{Qu(`bf-stripe-script-${t}`)}},[o,_,R]),D.useEffect(()=>{if(!b||g)return;p!=null&&p.current||(p.current=St(`#${t}-stripe-wrp`));const w=m.current,S=p.current;if((!o||w&&S&&"destroy"in w)&&(w.destroy(),Tt(t)),!o)return f(!1);I({},d.config.options),I({},d.config.layout)},[b,g]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:n}),u.jsxs(_t,{formID:e,fieldData:s,fieldKey:t,noLabel:!0,isBuilder:i,children:[b&&o&&!g&&u.jsxs("div",{className:`${t}-stripe-wrp`,children:[u.jsxs("button",{"data-dev-stripe-btn":t,type:"button",className:`${t}-stripe-btn`,children:[u.jsx("svg",{"data-dev-stripe-icn":t,xmlns:"http://www.w3.org/2000/svg",className:`${t}-stripe-icn`,viewBox:"0 0 24 24",children:u.jsxs("g",{fill:"none",fillRule:"evenodd",children:[u.jsx("path",{d:"M24 0v24H0V0h24ZM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018Zm.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022Zm-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01l-.184-.092Z"}),u.jsx("path",{fill:"currentColor",d:"M6.936 3.715C8.326 2.567 10.24 2 12.404 2c1.746 0 3.49.275 5.259.981a1 1 0 0 1 .629.929v3.64c0 1.244-1.286 1.916-2.291 1.5c-1.198-.494-2.532-.759-3.597-.759c-.217 0-.386.016-.512.04c-.05.01-.089.02-.12.03c.089.072.25.17.528.29c.309.134.68.263 1.129.416l.061.02c.42.144.892.305 1.367.495c.99.396 2.094.954 2.95 1.882c.885.957 1.445 2.241 1.45 3.954v.003c0 2.065-.835 3.755-2.305 4.904C15.511 21.454 13.542 22 11.34 22a14.62 14.62 0 0 1-5.777-1.21a1 1 0 0 1-.604-.918V16.18c0-1.241 1.297-1.937 2.322-1.47c1.39.636 2.901 1.038 4.059 1.038c.497 0 .761-.073.87-.134a.255.255 0 0 0 .017-.01a.352.352 0 0 0 .005-.062v-.005a.34.34 0 0 0-.04-.05c-.084-.086-.25-.205-.56-.353a13.21 13.21 0 0 0-1.112-.444a146.78 146.78 0 0 0-.22-.08c-.373-.135-.782-.283-1.189-.448c-.973-.395-2.066-.935-2.916-1.81c-.882-.908-1.453-2.127-1.453-3.753c0-2.026.782-3.717 2.194-4.883ZM8.21 5.257c-.918.758-1.467 1.866-1.467 3.34c0 1.104.366 1.824.888 2.361c.555.571 1.334.985 2.233 1.349c.369.15.736.283 1.107.417l.234.085c.437.16.888.329 1.288.519c.713.34 1.74.97 1.74 2.213c0 .375-.083.744-.277 1.077a2.015 2.015 0 0 1-.766.74c-.561.314-1.243.39-1.85.39c-1.373 0-2.957-.408-4.38-.998v2.447c1.503.562 3.001.803 4.38.803c1.898 0 3.388-.473 4.381-1.249c.964-.754 1.537-1.852 1.538-3.327c-.005-1.234-.39-2.03-.92-2.602c-.556-.603-1.334-1.026-2.223-1.382c-.426-.17-.855-.316-1.285-.463l-.047-.017a17.654 17.654 0 0 1-1.278-.473c-.387-.168-.809-.387-1.142-.703c-.362-.344-.634-.819-.634-1.424c0-.72.328-1.323.936-1.683c.52-.308 1.157-.385 1.739-.385c1.203 0 2.597.259 3.888.728V4.608C15.002 4.177 13.717 4 12.404 4c-1.836 0-3.255.481-4.195 1.257Z"})]})}),d.txt]}),u.jsx("button",{type:"button","data-dev-stripe-pay-btn":t,className:"stripe-pay-btn",children:d.config.payBtnTxt})]}),!g&&(!b||!o)&&u.jsxs("p",{children:["Please select a Stripe account from",u.jsx("strong",{children:" Field Settings "}),"to load Stripe field."]}),g&&u.jsx("p",{children:"Loading Stripe..."})]})]})}function PR({attr:t,buttonDisabled:e,handleReset:s,formID:i,fieldKey:n}){return u.jsx("div",O(I({className:`fld-wrp fld-wrp-${i} ${x(n,"fld-wrp")}`,"btcd-fld":"submit"},$(n,"fld-wrp")),{children:u.jsxs("div",O(I({className:`btcd-frm-sub ${t.align==="center"&&"j-c-c"} ${t.align==="right"&&"j-c-e"} ${x(n,"btcd-frm-sub")}`},$(n,"btcd-frm-sub")),{children:[u.jsxs("button",O(I({className:`btcd-sub-btn btcd-sub ${t.btnSiz==="md"&&"btcd-btn-md"} ${t.fulW&&"ful-w"} ${x(n,"btcd-sub-btn")}`,disabled:e,type:"submit"},$(n,"btcd-sub-btn")),{children:[t.subBtnTxt,e&&u.jsx(NI,{clr:"currentColor",size:12,style:{display:"inline-block",marginLeft:5}})]})),"rstBtnTxt"in t&&u.jsx("button",O(I(I({className:`btcd-sub-btn btcd-rst ${t.btnSiz==="md"&&"btcd-btn-md"} ${t.fulW&&"ful-w"} ${x(n,"btcd-rst")}`,type:"button"},s&&{onClick:s}),$(n,"btcd-rst")),{children:t.rstBtnTxt}))]}))}))}function DR({fieldKey:t,attr:e,onBlurHandler:s,resetFieldValue:i,formID:n,styleClasses:a}){const[o,c]=D.useState(e.val),h=J(Ro),d=D.useRef(null),p=D.useRef({resize:!1}),m=fn(Yu);if(h.fieldKey===t){p.current.resize=!0;const g=St(`[data-key="${t}"]`),v=Og(g);if(h.wrpHeight>=h.fldHeight){const _=`${h.fldHeight+(v-h.wrpHeight)}px`;d.current.style.height=_}}if(p.current.resize&&!h.fieldKey){p.current.resize=!1;const g=v=>`fields->${t}->classes->.${t}-fld->${v}`;m(v=>De(v,_=>{ua(_,g("height"),d.current.style.height)}))}D.useEffect(()=>{e.val!==void 0&&!e.userinput?c(e.val):!e.val&&!e.userinput?c(e.defaultValue||""):e.conditional&&c(e.val)},[e.val,e.defaultValue,e.userinput,e.conditional]),D.useEffect(()=>{i&&c("")},[i]),D.useEffect(()=>{if(e.hasWorkflow&&e.val===o&&s&&!e.userinput){const{current:g}=d;s(g)}},[o]);const b=g=>{c(g.target.value)};D.useEffect(()=>{const g=Dm(`#${t}`);g&&Fm(g,"value",(v,_)=>c(_))},[]);const f=g=>{ap({input:g.target})};return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:a}),u.jsx(_t,{formID:n,fieldKey:t,fieldData:e,children:u.jsxs("div",O(I({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${x(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{children:[u.jsx("textarea",O(I(I(I(I(I(I(I(I(O(I({"data-testid":t,"data-dev-fld":t,id:t,className:`${t}-fld ${x(t,"fld")}`},$(t,"fld")),{ref:d}),"disabled"in e&&{disabled:e.disabled}),"readonly"in e&&{readOnly:e.readonly}),"ph"in e&&{placeholder:e.ph}),"ac"in e&&{autoComplete:e.ac}),"req"in e.valid&&{required:e.valid.req}),"disabled"in e.valid&&{readOnly:e.valid.disabled}),"name"in e&&{name:e.name}),s&&{onInput:s}),{onBlur:f,value:o,onChange:b})),e.prefixIcn&&u.jsx("img",I({"data-dev-pre-i":t,className:`${t}-pre-i ${x(t,"pre-i")}`,height:"90%",src:e.prefixIcn,alt:""},$(t,"pre-i"))),e.suffixIcn&&u.jsx("img",I({"data-dev-suf-i":t,className:`${t}-suf-i ${x(t,"suf-i")}`,height:"90%",src:e.suffixIcn,alt:""},$(t,"suf-i")))]}))})]})}function FR({fieldKey:t,attr:e,onBlurHandler:s,resetFieldValue:i,formID:n,styleClasses:a}){var b;const o=e.typ==="url"?"text":e.typ,c=D.useRef(null),[h,d]=D.useState(e.val!==void 0?e.val:"");D.useEffect(()=>{e.val!==void 0&&!e.userinput?d(e.val):!e.val&&!e.userinput?d(e.defaultValue||""):e.conditional&&d(e.val)},[e.val,e.defaultValue,e.userinput,e.conditional]),D.useEffect(()=>{i&&d("")},[i]),D.useEffect(()=>{if(e.hasWorkflow&&e.val===h&&s&&!e.userinput){const{current:f}=c;s(f)}},[h]);const p=f=>{const g=e.typ==="email"?f.target.value.toLowerCase():f.target.value;d(g)};D.useEffect(()=>{const f=Dm(`#${t}`);f&&Fm(f,"value",(g,v)=>d(e.typ==="email"?v.toLowerCase():v))},[]);const m=f=>ap({input:f.target});return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:a}),u.jsxs(_t,{formID:n,fieldKey:t,fieldData:e,children:[u.jsxs("div",O(I({"data-testid":`${t}-inp-fld-wrp`,className:`${t}-inp-fld-wrp ${x(t,"inp-fld-wrp")}`},$(t,"inp-fld-wrp")),{children:[u.jsx("input",I(O(I(I(I(I(I(I(I(I(I(I({"data-testid":t,"data-dev-fld":t,id:t,list:`${t}-datalist`,ref:c,className:`${t}-fld no-drg ${x(t,"fld")}`,type:o},"req"in e.valid&&{required:e.valid.req}),"disabled"in e.valid&&{disabled:e.valid.disabled}),"readonly"in e.valid&&{readOnly:e.valid.readonly}),"ph"in e&&{placeholder:e.ph}),"mn"in e&&{min:e.mn}),"mx"in e&&{max:e.mx}),"ac"in e&&{autoComplete:e.ac}),"name"in e&&{name:e.name}),"inputMode"in e&&{inputMode:e.inputMode}),s&&{onInput:s}),{onBlur:m,value:h,onChange:p}),$(t,"fld"))),e.prefixIcn&&u.jsx("img",I({"data-testid":`${t}-pre-i`,"data-dev-pre-i":t,className:`${t}-pre-i ${x(t,"pre-i")}`,height:"90%",src:e.prefixIcn,alt:""},$(t,"pre-i"))),e.suffixIcn&&u.jsx("img",I({"data-testid":`${t}-suf-i`,"data-dev-suf-i":t,className:`${t}-suf-i ${x(t,"suf-i")}`,height:"90%",src:e.suffixIcn,alt:""},$(t,"suf-i")))]})),((b=e.suggestions)==null?void 0:b.length)&&u.jsx("datalist",{id:`${t}-datalist`,children:e.suggestions.map(f=>u.jsx("option",{value:f.val||f.lbl,children:f.lbl},f.val||f.lbl))})]})]})}var jR=D.memo(FR);function kR({fieldKey:t,attr:e,styleClasses:s}){var S;const{logo:i,title:n,subtitle:a,titleHide:o,subtitleHide:c,titleTag:h,subTitleTag:d}=e,p=J(sr),{styleMode:m}=J(je),b=((S=e.valid.hidden)==null?void 0:S.includes(p))||!1,f=(C,L,y,P,A)=>u.jsx(Fe,{html:`<${C} data-dev-${y}=${t} className="${t}-${y} ${x(t,y)}">
  ${P}${L}${A}
</${C}>`}),g=C=>{const L=e.customAttributes[C];if(L==="")return;let y="";if(L){const P=L.length;let A=0;for(;A<P;)L[A].key&&L[A].value&&(y+=`${L[A].key}=${L[A].value} `),A+=1}return y},v=e.titlePreIcn?`<img data-dev-title-pre-i="${t}" ${g("title-pre-i")} classname="${t}-title-pre-i ${x(t,"title-pre-i")}"  src="${e.titlePreIcn}" alt="Title Leading Icon" />`:"",_=e.titleSufIcn?`<img data-dev-title-suf-i="${t}" ${g("title-suf-i")} classname="${t}-title-suf-i ${x(t,"title-suf-i")}" src="${e.titleSufIcn}" alt="Title Trailing Icon" />`:"",R=e.subTitlPreIcn?`<img data-dev-sub-titl-pre-i="${t}" ${g("sub-titl-pre-i")} classname="${t}-sub-titl-pre-i ${x(t,"sub-titl-pre-i")}" src="${e.subTitlPreIcn}" alt="Subtitle Leading Icon" />`:"",w=e.subTitlSufIcn?`<img data-dev-sub-titl-suf-i="${t}" ${g("sub-titl-suf-i")} classname="${t}-sub-titl-suf-i ${x(t,"sub-titl-suf-i")}" src="${e.subTitlSufIcn}" alt="Subtitle Trailing Icon" />`:"";return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:s}),u.jsxs("div",O(I({"data-dev-fld-wrp":t},$(t,"fld-wrp")),{className:`${t}-fld-wrp ${m?"":"drag"} ${b?"fld-hide":""} ${x(t,"fld-wrp")}`,children:[i&&u.jsx("img",I({"data-dev-logo":t,className:`${t}-logo ${x(t,"logo")}`,src:i,alt:"img"},$(t,"logo"))),u.jsxs("div",O(I({"data-dev-titl-wrp":t,className:`${t}-titl-wrp ${x(t,"titl-wrp")}`},$(t,"titl-wrp")),{children:[!o&&f(h,n,"title",v,_),!c&&f(d,a,"sub-titl",R,w)]}))]}))]})}var GR=""+new URL("bf-478-67.svg",import.meta.url).href;function BR({fieldKey:t,styleClasses:e}){var h;const i=J(Nt)[t],n=J(sr),a=J(PI),{styleMode:o}=J(je),c=((h=i.hidden)==null?void 0:h.includes(n))||!1;return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:e}),u.jsx("div",{"data-dev-fld-wrp":t,className:`${t}-turnstile-container ${t}-fld-wrp ${o?"":"drag"} ${c?"fld-hide":""}`,children:u.jsx("div",{className:`${t}-turnstile-wrp`,children:a!=null&&a.siteKey&&(a!=null&&a.secretKey)?u.jsx("img",{height:"70",src:GR,alt:"cloudflare turnstile reCaptcha"}):u.jsxs("div",{children:["To Load Turnstile Field, Please Configure Site Key and Secret."," ",u.jsx("strong",{children:"Go to App Settings"})]})})})]})}function UR({attr:t,onBlurHandler:e,resetFieldValue:s,formID:i,fieldKey:n,styleClasses:a}){var m,b;let{checked:o}=t.valid;const c=t.val||(o?t.msg.checked:t.msg.unchecked),[h,d]=D.useState(c);h===t.msg.unchecked?o=!1:h===t.msg.checked&&(o=!0);const p=f=>{if(t.valid.disabled)return;f.target.checked?d(t.msg.checked):d(t.msg.unchecked);const{form:g}=f.target;validateForm({input:{name:t.name,form:g,value:f.target.checked?t.msg.checked:t.msg.unchecked}})};return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:a}),u.jsx(_t,{formID:i,fieldKey:n,fieldData:t,noLabel:!0,children:u.jsxs("div",O(I({"data-dev-cc":n,className:`${n}-cc ${x(n,"cc")}`},$(n,"cc")),{children:[u.jsx("svg",{className:`${n}-cks`,children:u.jsx("symbol",{id:`${n}-ck-svg`,viewBox:"0 0 12 10",children:u.jsx("polyline",{className:`${n}-ck-svgline`,points:"1.5 6 4.5 9 10.5 1"})})}),u.jsxs("div",O(I({"data-dev-cw":n,className:`${n}-cw ${x(n,"cw")}`},$(n,"cw")),{children:[u.jsx("input",O(I(O(I(I(I({"data-testid":n,id:`${n}-decision`,type:"checkbox",className:`${n}-ci`},"req"in t.valid&&{required:t.valid.req}),"disabled"in t.valid&&{disabled:t.valid.disabled}),"readonly"in t.valid&&{readOnly:t.valid.readonly}),{defaultValue:(m=t==null?void 0:t.info)==null?void 0:m.lbl}),"name"in t&&{name:t.name}),{checked:o,value:h,onChange:p})),u.jsxs("label",O(I({"data-dev-cl":n,"data-cl":!0,htmlFor:`${n}-decision`,className:`${n}-cl ${x(n,"cl")}`},$(n,"cl")),{children:[u.jsx("span",O(I({"data-dev-bx":n,"data-bx":!0,className:`${n}-bx ${x(n,"bx")}`},$(n,"bx")),{children:u.jsx("svg",{width:"12",height:"10",viewBox:"0 0 12 10",className:`${n}-svgwrp`,children:u.jsx("use",{"data-ck-icn":!0,href:`#${n}-ck-svg`,className:`${n}-ck-icn`})})})),u.jsx("span",O(I({"data-dev-ct":n,className:`${n}-ct ${x(n,"ct")}`},$(n,"ct")),{children:u.jsx(Fe,{html:t.lbl||((b=t==null?void 0:t.info)==null?void 0:b.lbl)})}))]}))]}))]}))})]})}function VR({fieldKey:t,formId:e,styleClasses:s}){var g;const i=D.useRef(null),n=D.useRef(null),o=J(Nt)[t],c=J(sr),{styleMode:h}=J(je),d=((g=o.hidden)==null?void 0:g.includes(c))||!1,p=D.useRef(null),m=J(DI),{siteKey:b=""}=m||{};D.useEffect(()=>{window.renderHCaptchaFunc=f;const _={src:"https://js.hcaptcha.com/1/api.js?onload=renderHCaptchaFunc&render=explicit",integrity:"",id:"bf-h-captcha-script",async:!0,defer:!0};return Bc(_),()=>{clearInterval(n.current),Qu(_.id)}},[]);function f(){let v=St(`.${t}-h-captcha`);p.current!==null&&(window.hcaptcha&&window.hcaptcha.widgets&&Object.keys(window.hcaptcha.widgets).includes(p.current)?window.hcaptcha.reset(p.current):window.hcaptcha.reset(),v==null||v.remove(),v=document.createElement("div"),v.id=`${t}-h-captcha`,v.classList.add(`${t}-h-captcha`,"h-captcha"),i.current.appendChild(v)),p.current=window.hcaptcha.render(v,{sitekey:b,theme:o.config.theme,size:o.config.size}),Tt(t),n.current&&clearInterval(n.current),n.current=setInterval(()=>{window.hcaptcha.reset(p.current)},3e4)}return D.useEffect(()=>{window.hcaptcha&&f()},[o]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:s}),u.jsx("div",{"data-dev-fld-wrp":t,className:`${t}-h-captcha-container ${t}-fld-wrp ${h?"":"drag"} ${d?"fld-hide":""}`,children:b!==""?u.jsx("div",{className:`${t}-h-captcha-wrp`,ref:i,children:u.jsx("div",{id:`${t}-h-captcha`,className:`${t}-h-captcha h-captcha`})}):u.jsxs("div",{children:["To Load hCaptcha Field, Please Configure Site Key and Secret."," ",u.jsx("strong",{children:"Go to App Settings"})]})})]})}function zR({attr:t,formID:e,fieldKey:s,styleClasses:i}){const[n]=Mi(Nt),a=n[s];t.typ;const[o,c]=D.useState(t.val!==void 0?t.val:""),h=D.useRef(null),d=D.useRef(null);return J(je),D.useEffect(()=>{const p=document.getElementById("bit-grid-layout"),m=p==null?void 0:p.contentWindow,b=p==null?void 0:p.contentDocument;if(!m||!b)return;if(!b.querySelector("style[data-flatpickr-style]")){const _=b.createElement("style");_.setAttribute("data-flatpickr-style","true"),_.textContent=FI,b.head.appendChild(_)}d!=null&&d.current||(d.current=St(`#${s}-advanced-datetime`));const g=h.current,v=d.current;g&&v!=null&&v.firstChild&&v.removeChild(v.firstChild)},[a==null?void 0:a.config]),u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:i}),u.jsx(_t,{formID:e,fieldKey:s,fieldData:t,children:u.jsxs("div",O(I({"data-testid":`${s}-inp-fld-wrp`,className:`${s}-inp-fld-wrp ${x(s,"inp-fld-wrp")}`},$(s,"inp-fld-wrp")),{children:[u.jsx("input",I(O(I(I(I(I(I(I({"data-testid":s,"data-dev-fld":s,id:`${s}-advanced-datetime`,list:`${s}-datalist`,ref:d,className:`${s}-advanced-datetime ${s}-fld no-drg ${x(s,"fld")} bf-advanced-datetime-hidden-input`,type:"text",autoComplete:"off"},"req"in t.valid&&{required:t.valid.req}),"disabled"in t.valid&&{disabled:t.valid.disabled}),"readonly"in t.valid&&{readOnly:t.valid.readonly}),"ph"in t&&{placeholder:t.ph}),"name"in t&&{name:t.name}),"ac"in t&&{autoComplete:t.ac}),{value:o}),$(s,"fld"))),t.prefixIcn&&u.jsx("img",I({"data-testid":`${s}-pre-i`,"data-dev-pre-i":s,className:`${s}-pre-i ${x(s,"pre-i")}`,height:"90%",src:t.prefixIcn,alt:""},$(s,"pre-i"))),t.suffixIcn&&u.jsx("img",I({"data-testid":`${s}-suf-i`,"data-dev-suf-i":s,className:`${s}-suf-i ${x(s,"suf-i")}`,height:"90%",src:t.suffixIcn,alt:""},$(s,"suf-i")))]}))})]})}function WR({fieldKey:t,attr:e,onBlurHandler:s,resetFieldValue:i,formID:n,styleClasses:a}){var h;const{styleMode:o}=J(je),c=((h=e.valid)==null?void 0:h.hide)||!1;return u.jsxs(u.Fragment,{children:[u.jsx(ht,{styleClasses:a}),u.jsx("div",O(I({"data-dev-fld-wrp":t,className:`${t}-fld-wrp drag ${o?"":"drag"} ${c?"fld-hide":""} spacer-field-bg ${x(t,"fld-wrp")}`},$(t,"fld-wrp")),{"data-admin-label":e.adminLbl||e.lbl||t}))]})}function HR({atts:t,fieldKey:e,formID:s,onBlurHandler:i,resetFieldValue:n,handleReset:a,fieldData:o,buttonDisabled:c,contentID:h,isBuilder:d,entryID:p,handleFormValidationErrorMessages:m}){var f,g,v,_,R,w,S,C,L,y,P,A,F,W,G,B,X,M,q,j,N,k,U,Y,z,ot,nt,lt,gt,Q,st,rt,pt,dt,ke,tt;const b=J(Yu);if(!(il(b)||!(t!=null&&t.typ))){switch(t==null?void 0:t.typ){case"text":case"number":case"password":case"username":case"email":case"url":case"date":case"datetime-local":case"time":case"month":case"week":case"color":return u.jsx(jR,{fieldKey:e,styleClasses:(f=b.fields[e])==null?void 0:f.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"textarea":return u.jsx(DR,{fieldKey:e,styleClasses:(g=b.fields[e])==null?void 0:g.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"check":return u.jsx(pS,{fieldKey:e,styleClasses:(v=b.fields[e])==null?void 0:v.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"radio":return u.jsx(ER,{fieldKey:e,styleClasses:(_=b.fields[e])==null?void 0:_.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"html-select":return u.jsx(QS,{fieldKey:e,styleClasses:(R=b.fields[e])==null?void 0:R.classes,isBuilder:d,formID:s,attr:t});case"select":return u.jsx(WS,{fieldKey:e,styleClasses:(w=b.fields[e])==null?void 0:w.classes,isBuilder:d,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"file-up":return u.jsx(qS,{fieldKey:e,styleClasses:(S=b.fields[e])==null?void 0:S.classes,formID:s,attr:t,entryID:p,resetFieldValue:n});case"advanced-file-up":return u.jsx(dS,{fieldKey:e,styleClasses:(C=b.fields[e])==null?void 0:C.classes,formID:s,attr:t,entryID:p,resetFieldValue:n});case"submit":return u.jsx(PR,{fieldKey:e,styleClasses:(L=b.fields[e])==null?void 0:L.classes,formID:s,attr:t,buttonDisabled:c,handleReset:a});case"hidden":return u.jsx(XS,{fieldKey:e,styleClasses:(y=b.fields[e])==null?void 0:y.classes,formID:s,attr:t});case"recaptcha":return u.jsx(wR,{fieldKey:e,styleClasses:(P=b.fields[e])==null?void 0:P.classes,formID:s,attr:t});case"decision-box":return u.jsx(BS,{fieldKey:e,styleClasses:(A=b.fields[e])==null?void 0:A.classes,formID:s,attr:t,fieldData:o,onBlurHandler:i,resetFieldValue:n});case"gdpr":return u.jsx(UR,{fieldKey:e,styleClasses:(F=b.fields[e])==null?void 0:F.classes,formID:s,attr:t,fieldData:o,onBlurHandler:i,resetFieldValue:n});case"html":return u.jsx(ZS,{fieldKey:e,styleClasses:(W=b.fields[e])==null?void 0:W.classes,formID:s,attr:t,fieldData:o,resetFieldValue:n});case"shortcode":return u.jsx(CR,{fieldKey:e,styleClasses:(G=b.fields[e])==null?void 0:G.classes,formID:s,attr:t,fieldData:o,resetFieldValue:n});case"button":return u.jsx(uS,{fieldKey:e,styleClasses:(B=b.fields[e])==null?void 0:B.classes,formID:s,attr:t,fieldData:o,buttonDisabled:c,handleReset:a});case"paypal":return u.jsx(sR,{isBuilder:d,styleClasses:(X=b.fields[e])==null?void 0:X.classes,fieldKey:e,formID:s,attr:t,contentID:h,fieldData:o,resetFieldValue:n,handleFormValidationErrorMessages:m});case"stripe":return u.jsx(NR,{isBuilder:d,styleClasses:(M=b.fields[e])==null?void 0:M.classes,fieldKey:e,formID:s,attr:t,contentID:h,fieldData:o,resetFieldValue:n,handleFormValidationErrorMessages:m});case"mollie":return u.jsx(tR,{isBuilder:d,styleClasses:(q=b.fields[e])==null?void 0:q.classes,fieldKey:e,formID:s,attr:t,contentID:h,fieldData:o,resetFieldValue:n,handleFormValidationErrorMessages:m});case"razorpay":return u.jsx(_R,{fieldKey:e,styleClasses:(j=b.fields[e])==null?void 0:j.classes,contentID:h,formID:s,attr:t,buttonDisabled:c,resetFieldValue:n,handleFormValidationErrorMessages:m});case"title":return u.jsx(kR,{fieldKey:e,styleClasses:(N=b.fields[e])==null?void 0:N.classes,formID:s,attr:t});case"image":return u.jsx(JS,{fieldKey:e,styleClasses:(k=b.fields[e])==null?void 0:k.classes,formID:s,attr:t});case"divider":return u.jsx(US,{fieldKey:e,styleClasses:(U=b.fields[e])==null?void 0:U.classes,formID:s,attr:t});case"spacer":return u.jsx(WR,{fieldKey:e,styleClasses:(Y=b.fields[e])==null?void 0:Y.classes,formID:s,attr:t});case"currency":return u.jsx(GS,{fieldKey:e,styleClasses:(z=b.fields[e])==null?void 0:z.classes,formID:s,attr:t,contentID:h});case"country":return u.jsx(FS,{fieldKey:e,styleClasses:(ot=b.fields[e])==null?void 0:ot.classes,formID:s,attr:t,contentID:h});case"phone-number":return u.jsx(rR,{fieldKey:e,styleClasses:(nt=b.fields[e])==null?void 0:nt.classes,formID:s,attr:t,contentID:h});case"section":return u.jsx(RR,{fieldKey:e,styleClasses:(lt=b.fields[e])==null?void 0:lt.classes,formID:s,attr:t});case"repeater":return u.jsx(xR,{fieldKey:e,styleClasses:(gt=b.fields[e])==null?void 0:gt.classes,formID:s,attr:t});case"rating":return u.jsx(IR,{fieldKey:e,styleClasses:(Q=b.fields[e])==null?void 0:Q.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"signature":return u.jsx(AR,{fieldKey:e,styleClasses:(st=b.fields[e])==null?void 0:st.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"image-select":return u.jsx(KS,{fieldKey:e,styleClasses:(rt=b.fields[e])==null?void 0:rt.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"turnstile":return u.jsx(BR,{fieldKey:e,styleClasses:(pt=b.fields[e])==null?void 0:pt.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"hcaptcha":return u.jsx(VR,{fieldKey:e,styleClasses:(dt=b.fields[e])==null?void 0:dt.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"range":return u.jsx(MR,{fieldKey:e,styleClasses:(ke=b.fields[e])==null?void 0:ke.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"advanced-datetime":return u.jsx(zR,{fieldKey:e,styleClasses:(tt=b.fields[e])==null?void 0:tt.classes,formID:s,attr:t,onBlurHandler:i,resetFieldValue:n});case"blank":return u.jsx("div",{className:"blnk-blk drag"})}return u.jsx("div",{children:"Loading..."})}}var qR=D.memo(HR);function Wh({layoutItem:t,removeLayoutItem:e,cloneLayoutItem:s,navigateToFieldSettings:i,navigateToStyle:n,handleContextMenu:a}){const o=J(Nt),c=J(GI),h=J(Ro),d=m=>{m.stopPropagation(),n(t.i)},p=fn(Pm);return D.useEffect(()=>{p(m=>O(I({},m),{reCalculateFieldHeights:m.reCalculateFieldHeights+1}))},[]),u.jsxs(u.Fragment,{children:[h.fieldKey===t.i&&u.jsx("span",{className:"resize-txt",children:`w: ${h.w||t.w}, x: ${h.x||t.x}`}),u.jsxs("div",{className:"blk-icn-wrp pos-abs flx",children:[u.jsx("button",{type:"button",className:"drag g-c us-n blk-wrp-btn",style:{cursor:"move"},title:yi("Move"),"data-testid":`${t.i}-move-btn`,children:u.jsx(VI,{size:"15",stroke:"3"})}),u.jsx("button",{type:"button",className:"g-c drag curp us-n no-drg blk-wrp-btn",title:yi("Style"),onClick:d,"data-testid":`${t.i}-style-btn`,children:u.jsx(BI,{stroke:2.3,height:"15",width:"13"})}),u.jsx("button",{type:"button",className:"g-c drag curp us-n no-drg blk-wrp-btn",title:yi("Settings"),onClick:i,"data-testid":`${t.i}-settings-btn`,children:u.jsx(jI,{size:"18",stroke:2})}),u.jsx("button",{type:"button",className:"g-c drag curp us-n no-drg blk-wrp-btn",title:yi("Clone"),onClick:()=>s(t.i),"data-testid":`${t.i}-copy-btn`,children:u.jsx(kI,{size:"17",stroke:2})}),u.jsx(zI,{className:"g-c drag us-n no-drg blk-wrp-btn",removeLayoutItem:e,fieldId:t.i}),u.jsx("button",{"data-close":!0,type:"button",className:"g-c us-n no-drg blk-wrp-btn blk-wrp-down-btn",draggable:"false",style:{cursor:"pointer"},title:yi("More Options"),onClick:m=>a(m,t.i),"data-testid":`${t.i}-more-options`,children:u.jsx(UI,{size:"21",stroke:2.2})})]}),u.jsx(YR,{fields:o,layoutItem:t,formID:c})]})}const YR=({layoutItem:t,formID:e,fields:s})=>{const i=s[t.i];return u.jsx(qR,{formID:e,atts:i,fieldKey:t.i})};export{Wh as default};
