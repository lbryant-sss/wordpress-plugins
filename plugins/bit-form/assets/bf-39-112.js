var T=(s,r,t)=>new Promise((p,i)=>{var m=a=>{try{o(t.next(a))}catch(d){i(d)}},u=a=>{try{o(t.throw(a))}catch(d){i(d)}},o=a=>a.done?p(a.value):Promise.resolve(a.value).then(m,u);o((t=t.apply(s,r)).next())});import{r as k,c3 as x,j,c4 as R}from"./main-461.js";import{S as B}from"./bf-440-172.js";import"./bf-908-79.js";function z({id:s,value:r,formFields:t,smartTags:p=!0,onChangeHandler:i,toolbarMnu:m,menubar:u,height:o,width:a,disabled:d,plugins:$,mapAllFieldWithTable:v,mapAllField:A}){const c=`${s}-settings`,f="https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.9.11",[g,F]=k.useState(typeof window.tinymce!="undefined"),M=g&&window.tinymce.baseURI.source===f,S=()=>T(this,null,function*(){yield R({src:f+"/tinymce.min.js",integrity:"sha256-SnRzknLClR3GaNw9oN4offMGFiPbXQTP7q0yFLPPwgY=",id:"tinymceCDN"});const e=setInterval(()=>{typeof window.tinymce!="undefined"&&(clearInterval(e),F(!0))},100)});k.useEffect(()=>(g||S(),_(),()=>{var n;const e=((n=window.tinymce)==null?void 0:n.get(c))||null;e&&e.remove()}),[g]);const y=e=>e.type==="signature"?`<img width="250" src="\${${e.key}}" alt="${e.key}" />`:`\${${e.key}}`,I=()=>{let e='<table border="1" style="border-collapse: collapse; width: 100%;">';return t==null||t.map(n=>{!x.includes(n.type)&&(e+=`<tr style="border: 1px solid #dddddd; text-align: left; padding: 8px;"><td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">${n.name}</td><td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">${y(n)}</td></tr>`)}),e+="</table>",e},E=()=>{let e="";return t==null||t.map(n=>{!x.includes(n.type)&&(e+=`<p>${n.name}: ${y(n)}</p>`)}),e},_=()=>{window&&window.tinymce&&window.tinymce.init({selector:`textarea#${c}`,menubar:u,height:o||150,width:a||"100%",branding:!1,resize:"verticle",convert_urls:!1,theme:"modern",plugins:$||`directionality fullscreen image link media charmap hr lists textcolor colorpicker ${M?"":"wordpress"}`,toolbar:m||"formatselect | fontsizeselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat toogleCode wp_code | addFormField | addSmartField | mapAllFieldWithTable | mapAllField",image_advtab:!0,default_link_target:"_blank",setup(e){var n;e.on("Paste Change input Undo Redo",()=>{i(e.getContent())}),t&&e.addButton("addFormField",{text:"Form Fields ",tooltip:"Add Form Field Value in Message",type:"menubutton",icon:!1,menu:t==null?void 0:t.map(l=>!x.includes(l.type)&&{text:l.name,onClick(){e.insertContent(y(l))}})}),p&&e.addButton("addSmartField",{text:"Smart Tag Fields",tooltip:"Add Smart Tag Field Value in Message",type:"menubutton",icon:!1,menu:(n=B)==null?void 0:n.map(l=>({text:l.label,onClick(){e.insertContent(`\${${l.name}}`)}}))}),v&&e.addButton("mapAllFieldWithTable",{text:"Map All Field With Table",tooltip:"Map All Field With Table",icon:!1,onclick(){e.insertContent(I())}}),A&&e.addButton("mapAllField",{text:"Map All Field",tooltip:"Map All Field",icon:!1,onclick(){e.insertContent(E())}}),e.addButton("toogleCode",{text:"</>",tooltip:"Toggle preview",icon:!1,onclick(l){const{$:b}=l.control,h=b(`#${c}`),L=b(e.iframeElement);if(h.value=e.getContent({source_view:!0}),L.toggleClass("btcd-mce-tinymce-hidden"),h.toggleClass("btcd-mce-tinymce-visible"),b("iframe.btcd-mce-tinymce-hidden").length>0){const C=e.getContainer().querySelector(".mce-edit-area");C&&C.prepend(h[0])}else{const w=document.getElementById(c);w instanceof HTMLTextAreaElement&&e.setContent(w.value)}}})}})};return j.jsx("textarea",{id:c,className:"btcd-paper-inp mt-1 w-10",rows:5,value:r,onChange:e=>i(e.target.value),style:{width:"95.5%",height:"auto"},disabled:d})}export{z as T};
