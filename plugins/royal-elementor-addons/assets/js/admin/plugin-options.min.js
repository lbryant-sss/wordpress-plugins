jQuery(document).ready(function(a){"use strict";a(".wpr-elements-toggle").find("input").on("change",function(){a(this).is(":checked")?a(".wpr-element").find("input").prop("checked",!0):a(".wpr-element").find("input").prop("checked",!1)});var s=".global-condition-select",o=".archives-condition-select",r=".singles-condition-select",l=".condition-input-ids",c=a(".wpr-condition-popup-wrap"),p=a(".nav-tab-active").attr("data-title");function d(){var t=p.replace(/\W+/g,"-").toLowerCase();return 0<a(".template-filters").length&&(t=(t=a(".template-filters .active-filter").last().attr("data-class")).substring(0,t.length-1)),t}function e(){var t="my-templates"===d()?"elementor_library":"wpr_templates",e=a(".user-template-title").val(),s="user-"+d()+"-"+e.replace(/\W+/g,"-").toLowerCase();"elementor_library"==t&&(s=d()+"-"+e.replace(/\W+/g,"-").toLowerCase());e={action:"wpr_create_template",user_template_library:t,user_template_title:e,user_template_slug:s,user_template_type:d()};a.post(ajaxurl,e,function(o){a(".user-template-popup-wrap").fadeOut(),setTimeout(function(){var t,e,i,n=o.substring(0,o.length-1);"my-templates"!==p.replace(/\W+/g,"-").toLowerCase()?(a(".save-conditions").attr("data-slug",s).attr("data-id",n),t=d(),e=a(".user-template-title").val(),i="",i+='<div class="wpr-'+t+' template-grid-item">',i+='<div class="wpr-screenshot">',i+='<img src="https://wp-royal.com/test/elementor/images/custom.png">',i+="</div>",i+="<footer>",i+='<div class="wpr-title">'+e+"</div>",i+='<div class="wpr-action-buttons">',i+='<span class="button wpr-activate" data-slug="'+(e=s)+'">Activate</span>',i+='<a href="post.php?post='+n+'&action=elementor" class="wpr-edit button">Edit</a>',i+='<span class="wpr-reset button" data-slug="'+e+'">Delete</span>',i+="</div>",i+="</footer>",i+="</div>",a(".template-grid-item.wpr-"+d()).first().before(i),h(),f(),w(s),c.addClass("editor-redirect")):window.location.href="post.php?post="+n+"&action=elementor"},500)})}function u(){a(".wpr-import").on("click",function(){var e=a(this),i=e.parent().find(".wpr-edit"),n=e.parent().find(".wpr-reset");a(".wrap").children("h1").text("Importing Template, Please be patient...");var t={action:"wpr_import_template",wpr_template:a(this).attr("data-slug")};a.post(ajaxurl,t,function(t){a(".wrap").children("h1").text("Howdy Nick! Template has been successfully imported :)"),e.removeClass("wpr-import").addClass("wpr-activate").text("Activate").unbind("click"),i.removeClass("hidden"),n.removeClass("hidden"),h(),t=t.split(";"),i.attr("href","post.php?post="+t[30].replace("i:","")+"&action=elementor")})})}function f(){a(".wpr-reset").on("click",function(){var e=a(this),i=e.parent().find(".wpr-activate"),n=e.parent().find(".wpr-edit"),t="my-templates"===d()?"elementor_library":"wpr_templates",o=e.attr("data-slug"),t={action:"wpr_reset_template",template_slug:o,template_library:t};a.post(ajaxurl,t,function(t){i.removeClass("wpr-activate").addClass("wpr-import").text("Import").unbind("click"),n.addClass("hidden"),e.addClass("hidden"),u(),0!==o.indexOf("user-")&&!e.closest("ul").hasClass("wpr-my-templates-list")||(e.closest(".template-grid-item").remove(),e.closest("li").remove())})})}function h(){a(".wpr-activate").on("click",function(){var t=a(this).attr("data-slug");a(".save-conditions").attr("data-slug",t),w(t)})}function i(){a(".delete-conditions, .add-conditions").css("display","inline-block"),a(".wpr-conditions-wrap").append('<div class="wpr-conditions">'+a(".wpr-conditions-sample").html()+"</div>"),a(".wpr-conditions").removeClass("wpr-tab-"+p).addClass("wpr-tab-"+p);var t=a(".wpr-conditions").last();t.find("select").not(":first-child").hide(),t.hide().fadeIn();var e=a(".template-filters .active-filter").attr("data-class");"blog-posts"===e||"custom-posts"===e?(t.find(".singles-condition-select").children(":nth-child(1),:nth-child(2),:nth-child(3)").remove(),t.find(".condition-input-ids").val("all").show()):"woocommerce-products"===e?(t.find(".singles-condition-select").children().filter(function(){return"product"!==a(this).val()}).remove(),t.find(".condition-input-ids").val("all").show()):"404-pages"===e?(t.find(".singles-condition-select").children().filter(function(){return"page_404"!==a(this).val()}).remove(),a(".delete-conditions, .add-conditions").hide()):"blog-archives"===e||"custom-archives"===e?t.find(".archives-condition-select").children().filter(function(){return"products"==a(this).val()||"product_cat"==a(this).val()||"product_tag"==a(this).val()}).remove():"woocommerce-archives"===e&&t.find(".archives-condition-select").children().filter(function(){return"products"!==a(this).val()&&"product_cat"!==a(this).val()&&"product_tag"!==a(this).val()}).remove()}function w(t){!function(n){var o=""!==(o=a("#wpr_"+p+"_conditions").val())?JSON.parse(o):{};if(a(".wpr-conditions").remove(),null!=o[n]&&0<o[n].length){for(var t=0;t<o[n].length;t++)i(),a(".wpr-conditions").find("select").hide();a(".wpr-conditions").length&&a(".wpr-conditions").each(function(t){for(var e=o[n][t].split("/"),i=0;i<e.length;i++)0===i?(a(this).find(s).val(e[i]).trigger("change"),a(this).find("."+e[i]+"s-condition-select").show()):1===i?a(this).find("."+e[i-1]+"s-condition-select").val(e[i]).trigger("change"):2===i&&a(this).find(l).val(e[i]).trigger("keyup").show()})}else i(),a(".wpr-conditions").find("select").hide()}(t),v(),m(),n();t=a(".wpr-conditions");("single"===p?t.find(r):"archive"===p?t.find(o):t.find(s)).show(),a(".wpr-conditions-wrap").addClass(a(".template-filters .active-filter").attr("data-class")),c.fadeIn()}function n(){a(".delete-conditions").on("click",function(){var t=a(this).parent(),e=""!==(e=a("#wpr_"+p+"_conditions").val())?JSON.parse(e):{};a("#wpr_"+p+"_conditions").val(JSON.stringify(g(e,_(t)))),t.fadeOut(500,function(){a(this).remove()})})}function v(){a(s).on("change",function(){var t=a(this).parent();t.find(o).hide(),t.find(r).hide(),t.find(l).hide(),t.find("."+a(this).val()+"s-condition-select").show()})}function m(){a(".archives-condition-select, .singles-condition-select").on("change",function(){var t=a(this).parent(),e=a("option:selected",this);e.hasClass("custom-ids")||e.hasClass("custom-type-ids")?t.find(l).val("all").trigger("keyup").show():t.find(l).hide()})}function g(t,e){var i,n=[];for(i in a(".wpr-activate").each(function(){n.push(a(this).attr("data-slug"))}),t)if(t.hasOwnProperty(i)){for(var o=0;o<t[i].length;o++)e==t[i][o]&&"popup"!==d()&&t[i].splice(o,1);-1===n.indexOf(i)&&delete t[i]}return t}function _(t){var e="none"!==t.find(s).css("display")?t.find(s).val():p,i=t.find(o).val(),n=t.find(r).val(),t=t.find(l);return"archive"===e?"none"!==t.css("display")?e+"/"+i+"/"+t.val():e+"/"+i:"single"===e?"none"!==t.css("display")?e+"/"+n+"/"+t.val():e+"/"+n:"global"}p=p.trim().toLowerCase(),a(".wpr-user-template").on("click",function(){a(".user-template-title").val(""),a(".user-template-popup-wrap").fadeIn()}),a(".user-template-popup").find(".close-popup").on("click",function(){a(".user-template-popup-wrap").fadeOut()}),a(".create-template").on("click",function(){e()}),a(".user-template-title").keypress(function(t){13==t.which&&(t.preventDefault(),e())}),u(),f(),h(),c.find(".close-popup").on("click",function(){c.fadeOut()}),a(".add-conditions").on("click",function(){i(),a(".wpr-conditions").last().find("input").hide(),n(),v(),m()}),a(".save-conditions").on("click",function(){var e,i,t=a(this).attr("data-slug"),n=(a(this).attr("data-id"),e=t,(i=""===(i=a("#wpr_"+p+"_conditions").val())||"[]"===i?{}:JSON.parse(i))[e]=[],a(".wpr-conditions").each(function(){var t=_(a(this));(i=g(i,t))[e].push(t)}),i);a("#wpr_"+p+"_conditions").val(JSON.stringify(n));t={action:"wpr_save_template_conditions"};t["wpr_"+p+"_conditions"]=JSON.stringify(n),a.post(ajaxurl,t,function(t){c.fadeOut(),c.hasClass("editor-redirect")&&(window.location.href="post.php?post="+a(".save-conditions").attr("data-id")+"&action=elementor")})}),a(".template-filters ul li span").on("click",function(){var t=a(this).parent();"back"!==t.data("role")&&(t.parent().find("li").removeClass("active-filter"),a(this).closest(".templates-grid").find(".column-3-wrap").hide(),t.addClass("active-filter"),a(this).closest(".templates-grid").find(".column-3-wrap."+t.data("class")).fadeIn())}),a(".template-filters ul li span").on("click",function(){var t=a(this).parent(),e=t.data("role");"parent"===e?(t.siblings().hide(),t.children("span").hide(),t.find(".sub-filters").show()):"back"===e&&(t.closest("ul").parent().siblings().show(),t.closest("ul").parent().children("span").show(),t.closest("ul").parent().find(".sub-filters").hide())}),jQuery(document).ready(function(t){t("#wpr_lb_bg_color").wpColorPicker(),t("#wpr_lb_toolbar_color").wpColorPicker(),t("#wpr_lb_caption_color").wpColorPicker(),t("#wpr_lb_gallery_color").wpColorPicker(),t("#wpr_lb_pb_color").wpColorPicker(),t("#wpr_lb_ui_color").wpColorPicker(),t("#wpr_lb_ui_hr_color").wpColorPicker(),t("#wpr_lb_text_color").wpColorPicker(),t(".wpr-settings").length&&(t(".wpr-settings").find(".wp-color-result-text").text("Select Color"),t(".wpr-settings").find(".wp-picker-clear").text("Clear"))}),a(".resett").on("click",function(t){var e={action:"wpr_save_template_conditions"};e["wpr_"+p+"_conditions"]="",a.post(ajaxurl,e,function(t){})})});