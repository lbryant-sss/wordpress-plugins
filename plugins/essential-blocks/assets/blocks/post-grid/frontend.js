(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.apiFetch;var r=e.n(t);const o=window.wp.i18n;function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var a=!!EssentialBlocksLocalize&&EssentialBlocksLocalize.rest_rootURL;function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"overlay";s(e);var r=function(){var e=document.createElement("div");return e.className="ebpg-loading-spinner",e.innerHTML='\n        <div class="ebpg-spinner-wrapper">\n            <div class="ebpg-spinner"></div>\n            <span class="ebpg-loading-text">Loading...</span>\n        </div>\n    ',e}();return"overlay"===t?(r.classList.add("ebpg-spinner-overlay"),e.style.position="relative"):"inline"===t&&r.classList.add("ebpg-spinner-inline"),e.appendChild(r),r}function s(e){e.querySelectorAll(".ebpg-loading-spinner").forEach(function(e){return e.remove()})}function p(e){var t=e.querySelector(".ebpg-button-spinner");t&&t.remove(),e.classList.remove("ebpg-loading"),e.disabled=!1}function l(e){if(document.getElementsByClassName("ebpg-pagination").length>0){var t=document.querySelectorAll(".ebpg-pagination button");t.length>0&&(document.querySelectorAll(".ebpostgrid-pagination").forEach(function(e){d(e)}),t.forEach(function(t){var o=1;t.addEventListener("click",function(){var t=this,i=c(this,"ebpg-pagination-button"),a=c(this,"ebpg-pagination-item-previous"),l=c(this,"ebpg-pagination-item-next");o=i?parseInt(o)+1:a?parseInt(g(this))-1:l?parseInt(g(this))+1:parseInt(this.dataset.pagenumber);var u=this.closest(".eb-post-grid-wrapper");if(u){var b=u.dataset,v=e||"",f=JSON.parse(b.attributes),y=null!=f&&f.version?null==f?void 0:f.version:"";if(i)!function(e){if(!e.querySelector(".ebpg-button-spinner")){var t=document.createElement("span");t.className="ebpg-button-spinner",t.innerHTML='<div class="ebpg-button-spinner-icon"></div>',e.classList.add("ebpg-loading"),e.insertBefore(t,e.firstChild),e.disabled=!0}}(this);else{var m="v2"===y?u.querySelector(".eb-post-grid-posts-wrapper"):u;m&&n(m,"overlay")}r()({path:"essential-blocks/v1/queries",method:"POST",data:{query_data:b.querydata,attributes:b.attributes,query_filter:v,pageNumber:o}}).then(function(e){if(i)if(p(t),e)if("v2"===y){var r=t.closest(".eb-post-grid-wrapper").querySelector(".eb-post-grid-posts-wrapper");r&&r.insertAdjacentHTML("beforeend",e)}else t.closest(".ebpostgrid-pagination")&&t.closest(".ebpostgrid-pagination").insertAdjacentHTML("beforebegin",e);else u.querySelector(".eb-loadmore-no-post").style.display="block",t.closest(".ebpostgrid-pagination").innerHTML="";else{var o="v2"===y?u.querySelector(".eb-post-grid-posts-wrapper"):u;if(o&&s(o),t.closest(".eb-post-grid-wrapper").querySelectorAll(".ebpg-grid-post").forEach(function(e){e.remove()}),"v2"===y){var a=t.closest(".eb-post-grid-wrapper").querySelector(".eb-post-grid-posts-wrapper");a&&(a.innerHTML=e)}else t.closest(".ebpostgrid-pagination")&&t.closest(".ebpostgrid-pagination").insertAdjacentHTML("beforebegin",e);c(t,"ebpg-pagination-item")&&(t.closest(".ebpostgrid-pagination").querySelectorAll(".ebpg-pagination-item").forEach(function(e){e.classList.remove("active")}),t.classList.add("active")),d(t.closest(".ebpostgrid-pagination"))}}).catch(function(e){if(i)p(t);else{var r="v2"===y?u.querySelector(".eb-post-grid-posts-wrapper"):u;r&&s(r)}console.error("Essential Blocks: Failed to load posts",e)})}})}))}}function c(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}function d(e){var t=e.querySelector(".ebpg-pagination-item.active");if(t){var r=parseInt(t.dataset.pagenumber),o=e.querySelectorAll(".ebpg-pagination-item"),i=o.length,a=1;o.forEach(function(e){a=parseInt(e.dataset.pagenumber),function(e){e.classList.remove("show"),e.classList.add("hide")}(e),(1===r&&a<=3||a>=r&&a<=r+2||a===i||1===a&&(r>=i-2||r>=4))&&function(e){e.classList.remove("hide"),e.classList.add("show")}(e)});var n=e.querySelectorAll(".ebpg-pagination-item-separator");n.length>0&&n.forEach(function(e){e.remove()});var s='<button class="ebpg-pagination-item-separator">...</button>';r<o.length-2&&o[o.length-1].insertAdjacentHTML("beforebegin",s),(r>=i-2||i>4&&r>=4)&&o[1].insertAdjacentHTML("afterend",s),1===r?(e.querySelector(".ebpg-pagination-item-previous").disabled=!0,e.querySelector(".ebpg-pagination-item-next").disabled=!1):r===i?(e.querySelector(".ebpg-pagination-item-previous").disabled=!1,e.querySelector(".ebpg-pagination-item-next").disabled=!0):(e.querySelector(".ebpg-pagination-item-previous").disabled=!1,e.querySelector(".ebpg-pagination-item-next").disabled=!1)}}function g(e){var t,r=1,o=null===(t=e.closest(".ebpostgrid-pagination"))||void 0===t?void 0:t.querySelector(".ebpg-pagination-item.active");if(o){if(r=o.dataset?o.dataset.pagenumber:1,c(e,"ebpg-pagination-item-next")){for(var i=o.nextElementSibling;i&&!i.classList.contains("ebpg-pagination-item");)i=i.nextElementSibling;i.classList.add("active"),o.classList.remove("active")}else if(c(e,"ebpg-pagination-item-previous")){for(var a=o.previousElementSibling;a&&!a.classList.contains("ebpg-pagination-item");)a=a.previousElementSibling;a.classList.add("active"),o.classList.remove("active")}d(e.closest(".ebpostgrid-pagination"))}return r}r().use(r().createRootURLMiddleware(a)),window.addEventListener("DOMContentLoaded",function(){l("")}),window.addEventListener("DOMContentLoaded",function(e){var t,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,p=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){p=!0,n=e},f:function(){try{s||null==r.return||r.return()}finally{if(p)throw n}}}}(document.getElementsByClassName("eb-post-grid-category-filter"));try{var p=function(){var e=t.value,i=e.dataset.ebpgtaxonomy;e.querySelectorAll(".ebpg-category-filter-list li").forEach(function(e){e.addEventListener("click",function(e){var t,a=this,p=e.target.getAttribute("data-ebpgCategory");t="all"===p?"&query_type=filter":"&taxonomy=".concat(i,"&category=").concat(p);var c=this.closest(".eb-post-grid-wrapper").dataset,d=JSON.parse(c.attributes),g=null!=d&&d.version?null==d?void 0:d.version:"",u="v2"===g?this.closest(".eb-post-grid-wrapper").querySelector(".eb-post-grid-posts-wrapper"):this.closest(".eb-post-grid-wrapper");u&&n(u,"overlay"),r()({path:"essential-blocks/v1/queries",method:"POST",data:{query_data:c.querydata,attributes:c.attributes,query_param_string:t},parse:!1}).then(function(e){var i=e.headers.get("X-WP-Total");if(i){var n=new FormData;n.append("action","post_grid_block_pagination"),n.append("post_grid_pagination_nonce",EssentialBlocksLocalize.post_grid_pagination_nonce),n.append("querydata",null==c?void 0:c.querydata),n.append("attributes",null==c?void 0:c.attributes),n.append("totalPosts",i),fetch(EssentialBlocksLocalize.ajax_url,{method:"POST",body:n}).then(function(e){return e.text()}).then(function(e){var r=a.closest(".eb-post-grid-wrapper").querySelector(".ebpostgrid-pagination");if(r)r.innerHTML=e;else{var o=document.createElement("div");o.className="ebpostgrid-pagination ebpg-pagination ",o.innerHTML=e,a.closest(".eb-post-grid-wrapper").appendChild(o)}l(t)}).catch(function(e){return console.log(e)}),r()({path:"essential-blocks/v1/queries",method:"POST",data:{query_data:c.querydata,attributes:c.attributes,query_param_string:t}}).then(function(e){var t="v2"===g?a.closest(".eb-post-grid-wrapper").querySelector(".eb-post-grid-posts-wrapper"):a.closest(".eb-post-grid-wrapper");if(t&&s(t),a.closest(".eb-post-grid-wrapper").querySelectorAll(".ebpg-grid-post").forEach(function(e){e.remove()}),a.closest(".eb-post-grid-wrapper").querySelector("p")&&a.closest(".eb-post-grid-wrapper").querySelector("p").remove(),"v2"===g){var r=a.closest(".eb-post-grid-wrapper").querySelector(".eb-post-grid-posts-wrapper");if(r)r.innerHTML=e;else{var o=document.createElement("div");o.className="eb-post-grid-posts-wrapper",o.innerHTML=e,a.closest(".eb-post-grid-category-filter").insertAdjacentHTML("afterend",o.outerHTML)}}else a.closest(".eb-post-grid-category-filter").insertAdjacentHTML("afterend",e);a.closest(".eb-post-grid-category-filter").querySelectorAll(".ebpg-category-filter-list-item").forEach(function(e){e.classList.remove("active")}),a.classList.add("active")}).catch(function(e){var t="v2"===g?a.closest(".eb-post-grid-wrapper").querySelector(".eb-post-grid-posts-wrapper"):a.closest(".eb-post-grid-wrapper");t&&s(t),console.error("Essential Blocks: Failed to load filtered posts",e)})}else{var p="v2"===g?a.closest(".eb-post-grid-wrapper").querySelector(".eb-post-grid-posts-wrapper"):a.closest(".eb-post-grid-wrapper");p&&s(p),a.closest(".eb-post-grid-category-filter").querySelectorAll(".ebpg-category-filter-list-item").forEach(function(e){e.classList.remove("active")}),a.classList.add("active"),a.closest(".eb-post-grid-wrapper").querySelectorAll(".ebpg-grid-post").forEach(function(e){e.remove()}),a.closest(".eb-post-grid-wrapper").querySelector(".ebpostgrid-pagination")&&(a.closest(".eb-post-grid-wrapper").querySelector(".ebpostgrid-pagination").innerHTML=""),a.closest(".eb-post-grid-wrapper").querySelector("p")&&a.closest(".eb-post-grid-wrapper").querySelectorAll("p").forEach(function(e){e.remove()}),a.closest(".eb-post-grid-wrapper").insertAdjacentHTML("beforeend","<p>".concat((0,o.__)("No Posts Found","essential-blocks"),"</p>"))}},function(e){var t="v2"===g?a.closest(".eb-post-grid-wrapper").querySelector(".eb-post-grid-posts-wrapper"):a.closest(".eb-post-grid-wrapper");t&&s(t),console.log("error",e)})})})};for(a.s();!(t=a.n()).done;)p()}catch(e){a.e(e)}finally{a.f()}})})();