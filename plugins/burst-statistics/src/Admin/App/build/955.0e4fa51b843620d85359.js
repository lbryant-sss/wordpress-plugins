"use strict";(globalThis.webpackChunkburst_statistics=globalThis.webpackChunkburst_statistics||[]).push([[955],{240:(t,e,r)=>{r.d(e,{c:()=>i});var n=r(1511),s=r(1932),a=r(7723),i=(0,n.v)((function(t,e){return{filters:{page_id:"",page_url:"",goal_id:"",referrer:"",device:"",browser:"",platform:"",country_code:""},filtersConf:{page_url:{label:(0,a.__)("Page","burst-statistics"),icon:"page"},goal_id:{label:(0,a.__)("Goal","burst-statistics"),icon:"goals"},referrer:{label:(0,a.__)("Referrer URL","burst-statistics"),icon:"referrer"},device:{label:(0,a.__)("Device","burst-statistics"),icon:"desktop"},browser:{label:(0,a.__)("Browser","burst-statistics"),icon:"browser"},platform:{label:(0,a.__)("Operating System","burst-statistics"),icon:"operating-system"},country_code:{label:(0,a.__)("Country","burst-statistics"),icon:"world"}},animate:null,setAnimate:function(e){return t({animate:e})},setFilters:function(r,n,a){void 0===a&&(a=!1),t((function(t){return(0,s.jM)(t,(function(t){t.filters[r]=n}))})),a&&e().setAnimate(r)},deleteFilter:function(e){t((function(t){return(0,s.jM)(t,(function(t){t.filters[e]=""}))}))}}}))},332:(t,e,r)=>{r.d(e,{G:()=>a});var n=r(1511),s=r(6275),a=(0,n.v)((function(t,e){return{metrics:["visitors","pageviews"],loaded:!1,getMetrics:function(){if(e().loaded)return e().metrics;var r=(0,s.Lg)("insights_metrics",["visitors","pageviews"]);return r=r.filter((function(t){return"conversions"!==t})),t({metrics:r,loaded:!0}),r},setMetrics:function(e){t({metrics:e}),(0,s.ZB)("insights_metrics",e)}}}))},900:(t,e,r)=>{r.d(e,{BM:()=>y,Ee:()=>A,Nj:()=>h,YP:()=>C,ZV:()=>j,cA:()=>O,cf:()=>S,fU:()=>w,fs:()=>_,gs:()=>g,ii:()=>N,oI:()=>m,qQ:()=>D,vd:()=>x});var n=r(8443),s=r(1127),a=r(6212),i=r(2998),o=r(543),c=r(2118),u=r(9312),l=r(7054),d=r(9317),f=r(3039),b=r(2346),p=r(1810),v=r(7723),g=function(t,e){if(void 0===e&&(e=new Date),"number"==typeof t&&(t=new Date(1e3*t)),!(t instanceof Date))return"-";var r={year:31536e6,month:2628e6,day:864e5,hour:36e5,minute:6e4,second:1e3},n=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),s=t-e;for(var a in r)if(Math.abs(s)>r[a]||"second"===a)return n.format(Math.round(s/r[a]),a)},h=function(t,e,r){void 0===r&&(r=!0);var n=(t=Number(t))/(e=Number(e));return isNaN(n)&&(n=0),r?new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1}).format(n):n};function _(t,e){var r={},n=((t=Number(t))-(e=Number(e)))/e;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}function m(t,e){var r={},n=((t=Number(t))-(e=Number(e)))/100;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}var y=function(t){return(0,n.dateI18n)(burst_settings.date_format,new Date(1e3*t))},x=function(t){return t&&("number"==typeof t||Date.parse(t)>=16409952e5)};function w(t){void 0===t&&(t=0);var e=Number(t);isNaN(e)&&(e=0);var r=Math.floor(e/1e3),n=Math.floor(r/3600),s=Math.floor((r-3600*n)/60);return[n,s,r-3600*n-60*s].map((function(t){return isNaN(t)?"00":String(t).padStart(2,"0")})).join(":")}function j(t,e){return void 0===e&&(e=1),t=Number(t),isNaN(t)&&(t=0),new Intl.NumberFormat(void 0,{style:"decimal",notation:"compact",compactDisplay:"short",maximumFractionDigits:e}).format(t)}function A(t,e){return void 0===e&&(e=1),t=Number(t)/100,isNaN(t)&&(t=0),new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:e}).format(t)}function D(t){return t&&burst_settings.countries[t.toUpperCase()]||(0,v.__)("Unknown","burst-statistics")}function N(t){void 0===t&&(t=new Date);var e=-60*t.getTimezoneOffset(),r=Math.floor(t.getTime()/1e3)+3600*burst_settings.gmt_offset-e;return new Date(1e3*r)}var k=N(),O={today:{label:(0,v.__)("Today","burst-statistics"),range:function(){return{startDate:(0,s.default)(k),endDate:(0,a.default)(k)}}},yesterday:{label:(0,v.__)("Yesterday","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,i.default)(k,-1)),endDate:(0,a.default)((0,i.default)(k,-1))}}},"last-7-days":{label:(0,v.__)("Last 7 days","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,i.default)(k,-7)),endDate:(0,a.default)((0,i.default)(k,-1))}}},"last-30-days":{label:(0,v.__)("Last 30 days","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,i.default)(k,-30)),endDate:(0,a.default)((0,i.default)(k,-1))}}},"last-90-days":{label:(0,v.__)("Last 90 days","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,i.default)(k,-90)),endDate:(0,a.default)((0,i.default)(k,-1))}}},"last-month":{label:(0,v.__)("Last month","burst-statistics"),range:function(){return{startDate:(0,o.default)((0,c.default)(k,-1)),endDate:(0,u.default)((0,c.default)(k,-1))}}},"week-to-date":{label:(0,v.__)("Week to date","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,i.default)(k,-k.getDay())),endDate:(0,a.default)(k)}}},"month-to-date":{label:(0,v.__)("Month to date","burst-statistics"),range:function(){return{startDate:(0,o.default)(k),endDate:(0,a.default)(k)}}},"year-to-date":{label:(0,v.__)("Year to date","burst-statistics"),range:function(){return{startDate:(0,l.A)(k),endDate:(0,a.default)(k)}}},"last-year":{label:(0,v.__)("Last year","burst-statistics"),range:function(){return{startDate:(0,l.A)((0,d.default)(k,-1)),endDate:(0,f.A)((0,d.default)(k,-1))}}}},S=function(t){return Object.values(t).filter(Boolean).map((function(t){var e=O[t];return e.isSelected=P,e}))},C=function(t,e){var r="MMMM d, yyyy";return{startDate:t?(0,b.default)(new Date(t),r):"",endDate:e?(0,b.default)(new Date(e),r):""}};function P(t){var e=this.range();return(0,p.default)(t.startDate,e.startDate)&&(0,p.default)(t.endDate,e.endDate)}},1955:(t,e,r)=>{r.r(e),r.d(e,{component:()=>Nt});var n=r(4848),s=r(240),a=r(7112),i=r(7723),o=r(3101),c=r(332),u=r(3392),l=function(){var t=(0,s.c)((function(t){return t.filters})),e=(0,s.c)((function(t){return t.filtersConf})),r=(0,s.c)((function(t){return t.setFilters})),l=(0,o.A)().getGoal,d=(0,c.G)((function(t){return t.setMetrics})),f=(0,c.G)((function(t){return t.getMetrics()})),b="";return(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.keys(e).map((function(s,o){if(""!==t[s])return"goal_id"===s?(p=t[s],v=l(p),b=v?v.title:""):"device"===s?b=function(t){switch(t){case"desktop":return(0,i.__)("Desktop","burst-statistics");case"tablet":return(0,i.__)("Tablet","burst-statistics");case"mobile":return(0,i.__)("Mobile","burst-statistics");default:return(0,i.__)("Other","burst-statistics")}}(t[s]):"country_code"===s?(c=t[s],b=c?(c=c.toUpperCase(),burst_settings.countries[c]||c):""):b=t[s],""!==e[s].icon&&e[s].icon,(0,n.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-2 bg-gray-100 border border-gray-400 shadow-md rounded-md text-sm",children:[(0,n.jsx)(a.A,{name:e[s].icon,size:"16"}),(0,n.jsx)("p",{className:"font-medium",children:e[s].label}),(0,n.jsx)("span",{className:"h-4 w-px bg-gray-400"}),(0,n.jsx)("p",{className:"text-gray-600",children:(0,u.S)(b)}),(0,n.jsx)("button",{onClick:function(){return function(t){r(t,""),"goal_id"===t&&d(f.filter((function(t){return"conversions"!==t})))}(s)},className:"rounded-full p-1 transition-colors hover:bg-gray-200",children:(0,n.jsx)(a.A,{name:"times",color:"var(--rsp-grey-500)",size:"16"})})]},o);var c,p,v}))})},d=r(1609),f=r(20),b=r(1806),p=r(2346),v=r(2895),g=r(900),h=r(9823),_="yyyy-MM-dd",m=new Date(2022,0,1),y=function(t){var e=t.range,r=t.display,s=t.isOpen,i=t.setIsOpen;return(0,n.jsxs)(h.l9,{className:"flex min-w-[200px] items-center gap-2 rounded-md border border-gray-400 bg-gray-100 px-3 py-2  shadow-md transition-all duration-200 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.1)]",onClick:function(){return i(!s)},children:[(0,n.jsx)(a.A,{name:"calendar",size:"18"}),(0,n.jsx)("span",{className:"w-full text-base",children:"custom"===e?"".concat(r.startDate," - ").concat(r.endDate):g.cA[e].label}),(0,n.jsx)(a.A,{name:"chevron-down"})]})};const x=function(){var t=(0,d.useState)(!1),e=t[0],r=t[1],s=(0,v.S)(),a=s.startDate,i=s.endDate,o=s.setStartDate,c=s.setEndDate,u=s.setRange,l=s.range,x=(0,d.useState)({startDate:(0,b.A)(a),endDate:(0,b.A)(i),key:"selection"}),w=x[0],j=x[1],A=(0,d.useRef)(0),D=burst_settings.date_ranges,N=(0,d.useMemo)((function(){return(0,g.cf)(D)}),[D]),k=(0,d.useMemo)((function(){return(0,g.YP)(a,i)}),[a,i]),O=(0,d.useCallback)((function(t){try{A.current++;var e=t.selection,n=e.startDate,s=e.endDate,a=(0,p.default)(n,_),i=(0,p.default)(s,_);j({startDate:(0,b.A)(a),endDate:(0,b.A)(i),key:"selection"});var l=Object.keys(g.cA).find((function(e){return g.cA[e].isSelected(t.selection)}))||"custom";(2===A.current||"custom"!==l||a!==i)&&(A.current=0,o(a),c(i),u(l),r(!1))}catch(t){console.error("Error updating date range:",t)}}),[o,c,u]);return(0,n.jsx)("div",{className:"ml-auto w-auto",children:(0,n.jsxs)(h.bL,{open:e,onOpenChange:r,children:[(0,n.jsx)(y,{range:l,display:k,isOpen:e,setIsOpen:r}),(0,n.jsx)(h.ZL,{children:(0,n.jsxs)(h.UC,{align:"end",sideOffset:10,arrowPadding:10,id:"burst-statistics",children:[(0,n.jsx)("span",{className:"absolute right-4 mt-1 h-4 w-4 -translate-y-2 rotate-45 transform bg-green-light"}),(0,n.jsx)("div",{className:"z-50 rounded-lg border border-gray-200 bg-white shadow-md",children:(0,n.jsx)(f.Ur,{ranges:[w],rangeColors:["#2B8133"],dateDisplayFormat:"dd MMMM yyyy",monthDisplayFormat:"MMMM",onChange:O,inputRanges:[],showSelectionPreview:!0,months:2,direction:"horizontal",minDate:m,maxDate:(0,g.ii)(),staticRanges:N})})]})})]})})};var w=r(7926),j=r(6744),A=r(3933),D=r(2731);const N=function(){return(0,n.jsx)("span",{className:"burst-pill burst-pill--green",children:(0,i.__)("Pro","burst-statistics")})},k=function(t){var e=t.title,r=t.children,s=t.footer,i=t.isOpen,o=t.setIsOpen;return(0,n.jsxs)(h.bL,{open:i,onOpenChange:o,children:[(0,n.jsx)(h.l9,{id:"burst-filter-button",className:"burst-filter-button".concat(i?" active":""," bg-gray-300 rounded-full p-3 cursor-pointer transition-all duration-200 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.1)]"),onClick:function(){return o(!i)},children:(0,n.jsx)(a.A,{name:"filter"})}),(0,n.jsx)(h.ZL,{children:(0,n.jsxs)(h.UC,{className:"burst burst-popover",align:"end",sideOffset:10,arrowPadding:10,children:[(0,n.jsx)("span",{className:"burst-popover__arrow"}),(0,n.jsx)("div",{className:"burst-popover__header",children:(0,n.jsx)("h5",{children:e})}),(0,n.jsx)("div",{className:"burst-popover__content",children:r}),(0,n.jsx)("div",{className:"burst-popover__footer",children:s})]})})]})};var O=r(4280),S=function(t,e,r){if(r||2===arguments.length)for(var n,s=0,a=e.length;s<a;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))};const C=function(t){var e=t.onApply,r=t.id,s=t.options,o=t.selectedOptions,c=(0,d.useState)(!1),u=c[0],l=c[1],f=(0,d.useState)(o),b=f[0],p=f[1];(0,d.useEffect)((function(){p(o)}),[o]);var v=(0,O.A)().isLicenseValid,g=function(t){e(t),l(!1)},h=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:function(){return function(t){g(t),l(!1)}(b)},className:"burst-button burst-button--primary",children:(0,i.__)("Apply","burst-statistics")}),(0,n.jsx)("button",{onClick:function(){return t=Object.keys(s).filter((function(t){return s[t].default})),p(t),g(t),void l(!1);var t},className:"burst-button burst-button--secondary",children:(0,i.__)("Reset to defaults","burst-statistics")})]});return(0,n.jsx)(k,{isOpen:u,setIsOpen:function(t){t?l(!0):(l(!1),p(o))},title:(0,i.__)("Select metrics","burst-statistics"),footer:h,children:Object.keys(s).map((function(t){return(0,n.jsxs)("div",{className:"burst-checkbox-group__item",children:[(0,n.jsx)(D.bL,{className:"burst-checkbox-group__checkbox",id:r+"_"+t,checked:b.includes(t),"aria-label":(0,i.__)("Change metrics","burst-statistics"),disabled:!0===s[t].disabled||s[t].pro&&!v,onCheckedChange:function(){return function(t){b.includes(t)?p(b.filter((function(e){return e!==t}))):p(S(S([],b,!0),[t],!1))}(t)},children:(0,n.jsx)(D.C1,{className:"burst-checkbox-group__indicator",children:(0,n.jsx)(a.A,{name:"check",size:14,color:"green"})})}),(0,n.jsx)("label",{className:"burst-checkbox-group__label",htmlFor:r+"_"+t,children:s[t].label}),(0,n.jsx)("div",{className:"burst-checkbox-group__item__pill",children:s[t].pro&&!v&&(0,n.jsx)(N,{})})]},t)}))})},P=function(t){var e=t.selectedMetrics,r=t.filters,s=(0,c.G)((function(t){return t.setMetrics})),a={pageviews:{label:(0,i.__)("Pageviews","burst-statistics"),default:!0},visitors:{label:(0,i.__)("Visitors","burst-statistics"),default:!0},sessions:{label:(0,i.__)("Sessions","burst-statistics")},bounces:{label:(0,i.__)("Bounces","burst-statistics")},conversions:{label:(0,i.__)("Conversions","burst-statistics"),default:0<r.goal_id}};return(0,n.jsx)(C,{selectedOptions:e,options:a,onApply:function(t){s(t)}})};var M=r(3050),F=r(6734);M.t1.register(M.PP,M.kc,M.FN,M.No,M.hE,M.m_,M.s$);const I=function(t){var e=t.data,r=t.loading,s=(0,d.useMemo)((function(){return{responsive:"true",maintainAspectRatio:!1,cubicInterpolationMode:"monotone",plugins:{legend:{labels:{usePointStyle:!0,padding:15,font:{size:13,weight:400}}}},scales:{y:{ticks:{beginAtZero:!0,stepSize:20,maxTicksLimit:6}},x:{ticks:{maxTicksLimit:8}}},layout:{padding:0}}}),[]),a=r?"burst-loading":"";return(0,n.jsx)(F.N1,{className:"burst-loading-container ".concat(a),options:s,data:e})};var T=r(8069),E=r(6275);const L=function(t){return e=void 0,r=[t],s=function(t){var e=t.startDate,r=t.endDate,n=t.range,s=t.args;return function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(t){switch(t.label){case 0:return[4,(0,E.bQ)("insights",e,r,n,s)];case 1:return[2,t.sent().data]}}))},new((n=void 0)||(n=Promise))((function(t,a){function i(t){try{c(s.next(t))}catch(t){a(t)}}function o(t){try{c(s.throw(t))}catch(t){a(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(i,o)}c((s=s.apply(e,r||[])).next())}));var e,r,n,s},V=function(){var t=(0,c.G)((function(t){return t.getMetrics()})),e=(0,v.S)((function(t){return t})),r=e.startDate,a=e.endDate,o=e.range,u=(0,s.c)((function(t){return t.filters})),l={filters:u,metrics:t},d=(0,T.I)({queryKey:["insights",t,r,a,l],queryFn:function(){return L({startDate:r,endDate:a,range:o,args:l})},placeholderData:{labels:["-","-","-","-","-","-","-"],datasets:[{data:[0,0,0,0,0,0,0],backgroundColor:"rgba(41, 182, 246, 0.2)",borderColor:"rgba(41, 182, 246, 1)",label:"-",fill:"false"},{data:[0,0,0,0,0,0,0],backgroundColor:"rgba(244, 191, 62, 0.2)",borderColor:"rgba(244, 191, 62, 1)",label:"-",fill:"false"}]}}),f=d.isLoading||d.isFetching;return(0,n.jsxs)(w.A,{className:"row-span-1 lg:col-span-12 xl:col-span-6 min-h-96",children:[(0,n.jsx)(j.A,{title:(0,i.__)("Insights","burst-statistics"),controls:(0,n.jsx)(P,{selectedMetrics:t,filters:u})}),(0,n.jsx)(A.A,{children:d.data&&I&&(0,n.jsx)(I,{loading:f,data:d.data})})]})};var U=r(4301);const G=function(t){var e=t.iconKey,r=t.title,s=t.subtitle,i=t.value,o=t.exactValue,c=t.change,u=t.changeStatus,l=1e3<o&&o;return(0,n.jsxs)("div",{className:"flex items-start gap-3 py-2",children:[(0,n.jsx)(a.A,{name:e,className:"mt-1"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"text-base font-semibold text-black",children:r}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:s})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)(U.A,{content:l,delayDuration:1e3,children:(0,n.jsx)("span",{className:"text-xl font-bold text-black",children:i})}),(0,n.jsx)("p",{className:"text-sm ".concat("positive"===u?"text-green":"text-red"),children:c})]})]})};var B=r(9045);const R=function(t){var e=t.noCompare,r=t.startDate,s=t.endDate,a="";if(e)a=(0,i.__)("No data available for comparison","burst-statistics");else{var o=(0,b.A)(r),c=(0,b.A)(s),u=(0,B.default)(c,o)+1;a=(1===u?(0,i.__)("vs. previous day","burst-statistics"):(0,i.__)("vs. previous %s days","burst-statistics")).replace("%s",u)}return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{className:"burst-small-text",children:a})})};var Z=function(){return Z=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Z.apply(this,arguments)},q={pageviews:(0,i.__)("Pageviews","burst-statistics"),sessions:(0,i.__)("Sessions","burst-statistics"),visitors:(0,i.__)("Visitors","burst-statistics"),bounce_rate:(0,i.__)("Bounce Rate","burst-statistics")},K={conversions:(0,i.__)("Conversions","burst-statistics"),pageviews:(0,i.__)("Pageviews","burst-statistics"),sessions:(0,i.__)("Sessions","burst-statistics"),visitors:(0,i.__)("Visitors","burst-statistics")},z={default:{pageviews:function(t,e){return{title:(0,i.__)("Pageviews","burst-statistics"),subtitle:(0,i.__)("%s pageviews per session","burst-statistics").replace("%s",(0,g.ZV)(t.pageviews/t.sessions)),value:(0,g.ZV)(t.pageviews),exactValue:t.pageviews}},sessions:function(t,e){return{title:(0,i.__)("Sessions","burst-statistics"),subtitle:(0,i.__)("%s per session","burst-statistics").replace("%s",(0,g.fU)(t.pageviews/t.sessions*t.avg_time_on_page)),value:(0,g.ZV)(t.sessions),exactValue:t.sessions}},visitors:function(t,e){return{title:(0,i.__)("Visitors","burst-statistics"),subtitle:(0,i.__)("%s are new visitors","burst-statistics").replace("%s",(0,g.Nj)(t.first_time_visitors,t.visitors)),value:(0,g.ZV)(t.visitors),exactValue:t.visitors}},bounce_rate:function(t,e){return{title:(0,i.__)("Bounce Rate","burst-statistics"),subtitle:(0,i.__)("%s visitors bounced","burst-statistics").replace("%s",t.bounced_sessions),value:(0,g.ZV)(t.bounce_rate)+"%",exactValue:t.bounce_rate}}},goalSelected:{conversions:function(t,e){return{title:(0,i.__)("Conversions","burst-statistics"),subtitle:(0,i.__)("%s of pageviews converted","burst-statistics").replace("%s",(0,g.Nj)(t.conversion_rate,100)),value:(0,g.ZV)(t.conversions),exactValue:t.conversions}},pageviews:function(t,e){return{title:(0,i.__)("Pageviews","burst-statistics"),subtitle:(0,i.__)("%s pageviews per conversion","burst-statistics").replace("%s",(0,g.ZV)(t.pageviews/t.conversions)),value:(0,g.ZV)(t.pageviews),exactValue:t.pageviews}},sessions:function(t,e){return{title:(0,i.__)("Sessions","burst-statistics"),subtitle:(0,i.__)("%s sessions per conversion","burst-statistics").replace("%s",(0,g.ZV)(t.sessions/t.conversions)),value:(0,g.ZV)(t.sessions),exactValue:t.sessions}},visitors:function(t,e){return{title:(0,i.__)("Visitors","burst-statistics"),subtitle:(0,i.__)("%s visitors per conversion","burst-statistics").replace("%s",(0,g.ZV)(t.visitors/t.conversions)),value:(0,g.ZV)(t.visitors),exactValue:t.visitors}}}},Q=function(t){var e={},r=t.current,n=t.previous,s="default",a=q;"goals"===t.view&&(s="goalSelected",a=K);var i=z[s];return Object.entries(a).forEach((function(t){var s=t[0],a=(t[1],i[s]||z.default[s]),o={};"bounce_rate"===s?(o=(0,g.oI)(r[s],n[s])).status="positive"===o.status?"negative":"positive":o=(0,g.fs)(r[s],n[s]),e[s]=Z(Z({},a(r,n)),{change:o.val,changeStatus:o.status})})),e};const J=function(t){return e=void 0,r=[t],s=function(t){var e,r=t.startDate,n=t.endDate,s=t.range,a=t.args;return function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(t){switch(t.label){case 0:return[4,(0,E.bQ)("compare",r,n,s,a)];case 1:return e=t.sent().data,[2,Q(e)]}}))},new((n=void 0)||(n=Promise))((function(t,a){function i(t){try{c(s.next(t))}catch(t){a(t)}}function o(t){try{c(s.throw(t))}catch(t){a(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(i,o)}c((s=s.apply(e,r||[])).next())}));var e,r,n,s};var $=r(2081);const W=function(){var t=(0,v.S)((function(t){return t})),e=t.startDate,r=t.endDate,a=t.range,o={filters:(0,s.c)((function(t){return t.filters}))},c={pageviews:(0,i.__)("Pageviews","burst-statistics"),sessions:(0,i.__)("Sessions","burst-statistics"),visitors:(0,i.__)("Visitors","burst-statistics"),bounce_rate:(0,i.__)("Bounce Rate","burst-statistics")},u={};Object.keys(c).forEach((function(t){u[t]={title:c[t],subtitle:"-",value:"-",exactValue:"-",change:"-",changeStatus:""}}));var l=(0,T.I)({queryKey:["compare",e,r,o],queryFn:function(){return J({startDate:e,endDate:r,range:a,args:o})},placeholderData:u}),d=l.data||{},f=!Object.keys(d).some((function(t){return""!==d[t].change}));return l.isLoading||l.isFetching,(0,n.jsxs)(w.A,{className:"row-span-1 lg:col-span-6 xl:col-span-3",children:[(0,n.jsx)(j.A,{title:(0,i.__)("Compare","burst-statistics")}),(0,n.jsx)(A.A,{children:Object.keys(d).map((function(t,e){var r=d[t];return(0,n.jsx)(G,{iconKey:t,title:r.title,subtitle:r.subtitle,value:r.value,exactValue:r.exactValue,change:r.change,changeStatus:r.changeStatus},e)}))}),(0,n.jsx)($.A,{children:(0,n.jsx)(R,{noCompare:f,startDate:e,endDate:r})})]})};var Y=r(9369),X=function(t,e,r,n){return new(r||(r=Promise))((function(s,a){function i(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,o)}c((n=n.apply(t,e||[])).next())}))},H=function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},tt={desktop:(0,i.__)("Desktop","burst-statistics"),tablet:(0,i.__)("Tablet","burst-statistics"),mobile:(0,i.__)("Mobile","burst-statistics"),other:(0,i.__)("Other","burst-statistics")},et=function(t){for(var e,r={},n=0,s=Object.entries(tt);n<s.length;n++){var a=s[n],i=a[0],o=a[1];Object.assign(r,((e={})[i]={title:o,value:(0,g.Nj)(t[i].count,t.all.count)},e))}return r},rt=function(t){for(var e,r={},n=0,s=Object.entries(tt);n<s.length;n++){var a=s[n][0],i=t[a].os?t[a].os:"",o=t[a].browser?t[a].browser:"";Object.assign(r,((e={})[a]={subtitle:""===i&&""===o?"-":i+" / "+o},e))}return r},nt=function(){return nt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},nt.apply(this,arguments)},st=(0,d.memo)((function(t){var e=t.deviceKey,r=t.deviceData;return(0,n.jsx)(Y.A,{filter:"device",filterValue:e,label:r.title,children:(0,n.jsx)(G,{iconKey:e,title:r.title,subtitle:r.subtitle,value:r.value,change:r.change,changeStatus:r.changeStatus})},e)}));const at=(0,d.memo)((function(){var t=(0,v.S)((function(t){return t})),e=t.startDate,r=t.endDate,a=t.range,o=(0,s.c)((function(t){return t.filters})),c=(0,d.useMemo)((function(){return{filters:o}}),[o]),u=(0,d.useMemo)((function(){return{desktop:(0,i.__)("Desktop","burst-statistics"),tablet:(0,i.__)("Tablet","burst-statistics"),mobile:(0,i.__)("Mobile","burst-statistics"),other:(0,i.__)("Other","burst-statistics")}}),[]),l=(0,d.useMemo)((function(){var t={},e={},r={};return Object.keys(u).forEach((function(n){t[n]={title:u[n],value:"-%"},e[n]={subtitle:"-"},r[n]={title:u[n],value:"-%",subtitle:"-"}})),{emptyDataTitleValue:t,emptyDataSubtitle:e,placeholderData:r}}),[u]),f=l.emptyDataTitleValue,b=l.emptyDataSubtitle,p=l.placeholderData,g=(0,T.I)({queryKey:["devicesTitleAndValue",e,r,c],queryFn:function(){return function(t){return X(void 0,[t],void 0,(function(t){var e,r=t.startDate,n=t.endDate,s=t.range,a=t.args;return H(this,(function(t){switch(t.label){case 0:return[4,(0,E.bQ)("devicesTitleAndValue",r,n,s,a)];case 1:return e=t.sent().data,[2,et(e)]}}))}))}({startDate:e,endDate:r,range:a,args:c})},placeholderData:f}),h=(0,T.I)({queryKey:["devicesSubtitle",e,r,c],queryFn:function(){return function(t){return X(void 0,[t],void 0,(function(t){var e,r=t.startDate,n=t.endDate,s=t.range,a=t.args;return H(this,(function(t){switch(t.label){case 0:return[4,(0,E.bQ)("devicesSubtitle",r,n,s,a)];case 1:return e=t.sent().data,[2,rt(e)]}}))}))}({startDate:e,endDate:r,range:a,args:c})},placeholderData:b}),_=(0,d.useMemo)((function(){if(g.data&&h.data){var t=nt({},g.data);return Object.keys(t).forEach((function(e){h.data[e]&&(t[e]=nt(nt({},t[e]),h.data[e]))})),t}return p}),[g.data,h.data,p]),m=(g.isLoading||g.isFetching,(0,d.useMemo)((function(){return Object.keys(_)}),[_]));return(0,n.jsxs)(w.A,{className:"row-span-1 lg:col-span-6 xl:col-span-3",children:[(0,n.jsx)(j.A,{title:(0,i.__)("Devices","burst-statistics")}),(0,n.jsx)(A.A,{children:m.map((function(t){return(0,n.jsx)(st,{deviceKey:t,deviceData:_[t]},t)}))})]})}));var it=r(585);const ot=function(t){var e=t.children,r=t.className,s=(t.onClick,t.show,t.title),o=t.subtitle,c=t.bulletPoints,u=void 0===c?[]:c,l=t.primaryButtonUrl,f=t.secondaryButtonUrl,b=(0,d.useState)(!1),p=b[0],v=b[1];return(0,n.jsxs)(h.bL,{open:p,onOpenChange:v,children:[(0,n.jsx)(h.l9,{className:"burst-pro-popover-trigger "+r,onMouseEnter:function(){return v(!0)},children:e}),(0,n.jsx)(h.ZL,{children:(0,n.jsxs)(h.UC,{className:"burst burst-pro-popover",align:"start",sideOffset:10,arrowPadding:10,style:{zIndex:9999},children:[(0,n.jsx)("span",{className:"burst-pro-popover__arrow"}),(0,n.jsxs)("div",{className:"burst-pro-popover__header",children:[(0,n.jsx)(h.bm,{className:"burst-pro-popover__close",children:(0,n.jsx)(a.A,{name:"times"})}),(0,n.jsx)("h5",{children:s}),(0,n.jsx)("h6",{children:o})]}),(0,n.jsxs)("div",{className:"burst-pro-popover__bullet-list",children:[(0,n.jsx)("p",{className:"burst-small-text",children:(0,i.__)("Pro features include:","burst-statistics")}),u.map((function(t){var e=t.text,r=t.icon;return(0,n.jsxs)("span",{children:[(0,n.jsx)(a.A,{name:r}),(0,n.jsx)("p",{children:e})]},e)}))]}),(0,n.jsxs)("div",{className:"burst-pro-popover__footer",children:[(0,n.jsx)("a",{href:l,target:"_blank",className:"burst-button burst-button--pro",children:(0,i.__)("Upgrade to Pro","burst-statistics")}),(0,n.jsx)("a",{href:f,target:"_blank",className:"burst-button burst-button--secondary",children:(0,i.__)("Learn More","burst-statistics")})]})]})})]})},ct=(0,d.memo)((function(t){var e=t.value,r=t.onChange,s=t.options,i=(0,d.useCallback)((function(t){r(t)}),[r]),o=(0,O.A)().isLicenseValid,c=burst_settings.is_pro&&o,u=(0,d.useMemo)((function(){return{hasProOptions:s.some((function(t){return t.pro})),firstOption:s[0]}}),[s]),l=u.hasProOptions,f=u.firstOption;return l&&!c?(0,n.jsxs)(ot,{title:f.upsellPopover.title,subtitle:f.upsellPopover.subtitle,bulletPoints:f.upsellPopover.bulletPoints,primaryButtonUrl:f.upsellPopover.primaryButtonUrl,secondaryButtonUrl:f.upsellPopover.secondaryButtonUrl,children:[(0,n.jsx)("h3",{className:"burst-grid-title burst-h4",children:f.label}),(0,n.jsx)(a.A,{name:"chevron-down"})]}):(0,n.jsxs)(it.bL,{value:e,onValueChange:i,children:[(0,n.jsxs)(it.l9,{className:"burst-datatable__select-trigger",children:[(0,n.jsx)(it.WT,{placeholder:"Select an optionâ€¦"}),(0,n.jsx)(it.In,{className:"burst-datatable__select-trigger__icon",children:(0,n.jsx)(a.A,{name:"chevron-down"})})]}),(0,n.jsx)(it.UC,{className:"burst-datatable__select-content",position:"popper",alignOffset:-10,children:(0,n.jsx)(it.LM,{children:s.map((function(t){return(0,n.jsx)(it.q7,{value:t.key,className:"burst-datatable__select-content__item",disabled:t.pro&&!burst_settings.is_pro,children:(0,n.jsx)(it.p4,{className:"burst-datatable__select-content__label",children:t.label})},t.key)}))})})]})})),ut=(0,d.memo)((function(t){var e=t.isLoading,r=t.error,s=t.noData;return e?(0,n.jsx)("div",{className:"burst-datatable-message burst-loading",children:(0,n.jsx)("p",{children:(0,i.__)("Loading data...","burst-statistics")})}):r?(0,n.jsx)("div",{className:"burst-datatable-message burst-error",children:(0,n.jsxs)("p",{children:[(0,i.__)("Error:","burst-statistics")," ",r.message]})}):s?(0,n.jsx)("div",{className:"burst-datatable-message burst-no-data",children:(0,n.jsx)("p",{children:(0,i.__)("No data available in table","burst-statistics")})}):(0,n.jsx)("div",{className:"burst-datatable-message burst-unexpected-error",children:(0,n.jsx)("p",{children:(0,i.__)("Unexpected error","burst-statistics")})})}));var lt=r(3757),dt=r(9464);const ft=function(t){var e=t.country,r=t.countryNiceName,s=void 0===r?"":r;if("string"!=typeof e)return(0,n.jsx)("span",{className:"burst-flag-wrapper",children:s});""===s&&(s=e),""===s&&(s=__("Unknown","burst-statistics")),e=e.toLowerCase();var a="".concat(burst_settings.plugin_url,"src/Pro/assets/flags/4x3/").concat(e,".svg");return(0,n.jsxs)("span",{className:"burst-flag-wrapper",children:[(0,n.jsx)(dt.k,{src:a,className:"burst-flag burst-flag-".concat(e),title:s})," ",s]})};var bt=function(){return bt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},bt.apply(this,arguments)},pt=function(t,e,r){if(r||2===arguments.length)for(var n,s=0,a=e.length;s<a;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))},vt=(0,d.memo)(Y.A),gt=(0,d.memo)((function(t){var e=t.value;return(0,n.jsx)(vt,{filter:"country_code",filterValue:e,children:(0,n.jsx)(ft,{country:e,countryNiceName:(0,g.qQ)(e)})})})),ht=(0,d.memo)((function(t){var e=t.value;return(0,n.jsx)(vt,{filter:"page_url",filterValue:e,children:(0,u.S)(e)})})),_t=new Map,mt=new Map;const yt=function(t){return e=void 0,r=[t],a=function(t){var e,r,s,a,o,c=t.startDate,u=t.endDate,l=t.range,d=t.args,f=t.columnsOptions;return function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=function(t,e,r,n){return"".concat(t,":").concat(e,":").concat(r,":").concat(JSON.stringify(n))}(c,u,l,d),mt.has(e)?[2,mt.get(e)]:[4,(0,E.bQ)("datatable",c,u,l,d)];case 1:return r=t.sent().data,s=function(t,e){if(!t||!t.columns)return{columns:[],data:[]};var r=bt(bt({},t),{columns:[],data:Array.isArray(t.data)?pt([],t.data,!0):[]}),s={};return t.columns.forEach((function(t){var r;s[t.id]=(null===(r=e[t.id])||void 0===r?void 0:r.format)||"integer"})),r.columns=t.columns.map((function(t){var r;if(!e[t.id])return t;var a="left"!==(null===(r=e[t.id])||void 0===r?void 0:r.align),o=s[t.id],c=bt(bt({},t),{selector:function(e){return e[t.id]},right:a});"percentage"===o||"time"===o||"integer"===o?c.sortFunction=function(e,r){if(null===e[t.id]||void 0===e[t.id])return 1;if(null===r[t.id]||void 0===r[t.id])return-1;var n=parseFloat(e[t.id]),s=parseFloat(r[t.id]);return isNaN(n)?1:isNaN(s)?-1:n-s}:"url"!==o&&"text"!==o||(c.sortFunction=function(e,r){if(!e[t.id])return 1;if(!r[t.id])return-1;var n=String(e[t.id]).toLowerCase(),s=String(r[t.id]).toLowerCase();return n.localeCompare(s)});var u="".concat(t.id,":").concat(o);return _t.has(u)||_t.set(u,(function(e){var r=e[t.id];switch(o){case"percentage":return(0,g.Ee)(r);case"time":return(0,g.fU)(r);case"country":return null==r?(0,i.__)("Not set","burst-statistics"):(0,n.jsx)(gt,{value:r});case"url":return(0,n.jsx)(ht,{value:r});case"text":default:return r;case"integer":return parseInt(r,10)}})),c.cell=_t.get(u),c})),r}(r,f),mt.set(e,s),20<mt.size&&(a=mt.keys().next().value,mt.delete(a)),[2,s];case 2:return o=t.sent(),console.error("Error fetching data table data:",o),[2,{columns:[],data:[]}];case 3:return[2]}}))},new((s=void 0)||(s=Promise))((function(t,n){function i(t){try{c(a.next(t))}catch(t){n(t)}}function o(t){try{c(a.throw(t))}catch(t){n(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof s?r:new s((function(t){t(r)}))).then(i,o)}c((a=a.apply(e,r||[])).next())}));var e,r,s,a};var xt=function(){return xt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},xt.apply(this,arguments)},wt={pageviews:{label:(0,i.__)("Pageviews","burst-statistics"),default:!0},sessions:{label:(0,i.__)("Sessions","burst-statistics"),pro:!0},visitors:{label:(0,i.__)("Visitors","burst-statistics"),pro:!0},conversions:{label:(0,i.__)("Conversions","burst-statistics"),pro:!0},bounce_rate:{label:(0,i.__)("Bounce rate","burst-statistics"),format:"percentage",pro:!0},avg_time_on_page:{label:(0,i.__)("Time on page","burst-statistics"),pro:!0,format:"time"}},jt={pages:{label:(0,i.__)("Pages","burst-statistics"),searchable:!0,defaultColumns:["page_url","pageviews"],columnsOptions:xt({page_url:{label:(0,i.__)("Page URL","burst-statistics"),default:!0,format:"url",align:"left",group_by:!0}},wt),upsellPopover:{title:(0,i.__)("Unlock Campaign Insights with Pro","burst-statistics"),subtitle:(0,i.__)("Get in-depth analysis of your marketing efforts.","burst-statistics"),bulletPoints:[{text:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("b",{children:(0,i.__)("Track URL parameters:","burst-statistics")})," ",(0,i.__)("Understand visitors patterns.","burst-statistics")]}),icon:"world"},{text:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("b",{children:(0,i.__)("UTM Analytics:","burst-statistics")})," ",(0,i.__)("Measure the success of your UTM campaigns.","burst-statistics")]}),icon:"goals"},{text:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("b",{children:(0,i.__)("Filter data:","burst-statistics")})," ",(0,i.__)("By device, page, goal, or country.","burst-statistics")]}),icon:"filter"}],primaryButtonUrl:(0,u.U)("/pricing/",{burst_source:"params-campaigns-upsell",burst_content:"upgrade"}),secondaryButtonUrl:(0,u.U)("/",{burst_source:"params-campaigns-upsell",burst_content:"more-info"})}},referrers:{label:(0,i.__)("Referrers","burst-statistics"),searchable:!0,defaultColumns:["referrer","pageviews"],columnsOptions:xt({referrer:{label:(0,i.__)("Referrer","burst-statistics"),default:!0,format:"url",align:"left",group_by:!0}},wt),upsellPopover:{title:(0,i.__)("Unlock Country Insights with Pro","burst-statistics"),subtitle:(0,i.__)("Get detailed information on your users","burst-statistics"),bulletPoints:[{text:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("b",{children:(0,i.__)("See Countries:","burst-statistics")})," ",(0,i.__)("Know where your visitors are from.","burst-statistics")]}),icon:"world"},{text:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("b",{children:(0,i.__)("Track More Goals:","burst-statistics")})," ",(0,i.__)("Follow different things at the same time.","burst-statistics")]}),icon:"goals"},{text:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("b",{children:(0,i.__)("Filter by Country:","burst-statistics")})," ",(0,i.__)("Only see data from specific places.","burst-statistics")]}),icon:"filter"}],primaryButtonUrl:(0,u.U)("/pricing/",{burst_source:"countries-upsell",burst_content:"upgrade"}),secondaryButtonUrl:(0,u.U)("/",{burst_source:"countries-upsell",burst_content:"more-info"})}},countries:{label:(0,i.__)("Countries","burst-statistics"),pro:!0,searchable:!1,defaultColumns:["country_code","pageviews"],columnsOptions:xt({country_code:{label:(0,i.__)("Country","burst-statistics"),default:!0,format:"country",align:"left",group_by:!0}},wt)},campaigns:{label:(0,i.__)("Campaigns","burst-statistics"),pro:!0,searchable:!0,defaultColumns:["source","pageviews"],columnsOptions:xt({campaign:{label:(0,i.__)("Campaign","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},source:{label:(0,i.__)("Source","burst-statistics"),format:"text",align:"left",group_by:!0},medium:{label:(0,i.__)("Medium","burst-statistics"),format:"text",align:"left",group_by:!0},term:{label:(0,i.__)("Term","burst-statistics"),format:"text",align:"left",group_by:!0},content:{label:(0,i.__)("Content","burst-statistics"),format:"text",align:"left",group_by:!0}},wt)},parameters:{label:(0,i.__)("Parameters","burst-statistics"),searchable:!0,pro:!0,defaultColumns:["parameter","pageviews"],columnsOptions:xt({parameter:{label:(0,i.__)("Parameter","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},parameters:{label:(0,i.__)("Parameters","burst-statistics"),format:"text",align:"left",group_by:!0}},wt)}};const At=(0,d.memo)((function(t){var e=t.allowedConfigs,r=void 0===e?["pages","referrers"]:e,a=t.id,o=(0,v.S)((function(t){return t})),c=o.startDate,u=o.endDate,l=o.range,f=(0,s.c)((function(t){return t.filters})),b=r[0],p=(0,d.useState)((function(){return(0,E.Lg)("datatable_config_"+a,b)})),g=p[0],h=p[1],_=(0,d.useMemo)((function(){return jt[g]}),[g]),m=(0,d.useMemo)((function(){return(null==_?void 0:_.columnsOptions)||{}}),[_]),y=(0,d.useMemo)((function(){return(null==_?void 0:_.defaultColumns)||[]}),[_]),x=(0,d.useState)((function(){var t=(0,E.Lg)("datatable_columns_".concat(g),y),e=Object.keys(m);return t.filter((function(t){return e.includes(t)}))})),D=x[0],N=x[1],k=(0,d.useCallback)((function(t){var e=t.filter((function(t){return Object.keys(m).includes(t)}));JSON.stringify(e)!==JSON.stringify(D)&&(N(e),(0,E.ZB)("datatable_columns_".concat(g),e))}),[g,D,m]),O=(0,d.useCallback)((function(t){return e=void 0,r=void 0,s=function(){return function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(e){return h(t),(0,E.ZB)("datatable_config_"+a,t),[2]}))},new((n=void 0)||(n=Promise))((function(t,a){function i(t){try{c(s.next(t))}catch(t){a(t)}}function o(t){try{c(s.throw(t))}catch(t){a(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(i,o)}c((s=s.apply(e,r||[])).next())}));var e,r,n,s}),[a]);(0,d.useEffect)((function(){var t,e=(0,E.Lg)("datatable_columns_"+g,(null===(t=jt[g])||void 0===t?void 0:t.defaultColumns)||[]);k(e)}),[g,k]);var S=(0,d.useState)(""),P=S[0],M=S[1],F=(0,d.useMemo)((function(){return Object.keys(jt).filter((function(t){return r.includes(t)})).map((function(t){return{key:t,label:jt[t].label,pro:!!jt[t].pro,upsellPopover:jt[t].upsellPopover||null}}))}),[r]),I=(0,d.useMemo)((function(){var t={filters:f,metrics:Object.keys(m).filter((function(t){return D.includes(t)})),group_by:[]};return D.forEach((function(e){var r;(null===(r=m[e])||void 0===r?void 0:r.group_by)&&t.group_by.push(e)})),t}),[f,m,D]),L=(0,T.I)({queryKey:[g,c,u,I],queryFn:function(){return yt({type:"datatable",startDate:c,endDate:u,range:l,args:I,columnsOptions:m})},enabled:!!g}),V=L.data||{},U=V.data,G=V.columns,B=(0,d.useMemo)((function(){var t;return t=(null==_?void 0:_.searchable)&&Array.isArray(U)?""===P.trim()?U:U.filter((function(t){var e=Object.keys(t)[0];return(null===t[e]?"":t[e].toString().toLowerCase()).includes(P.toLowerCase())})):U,Array.isArray(t)?t:[]}),[U,P,null==_?void 0:_.searchable]),R=L.isLoading||L.isFetching,Z=L.error,q=0===B.length,K=(0,d.useMemo)((function(){if(!G||!m)return[];var t=Object.keys(m);return G.sort((function(e,r){return t.indexOf(e.selector)-t.indexOf(r.selector)}))}),[G,m]);if(!_)return null;var z=(0,d.useMemo)((function(){return{columns:K,data:B,defaultSortFieldId:2,defaultSortAsc:!1,pagination:!0,paginationRowsPerPageOptions:[10,25,50,100,200],paginationPerPage:10,paginationComponentOptions:{rowsPerPageText:"",rangeSeparatorText:(0,i.__)("of","burst-statistics"),noRowsPerPage:!1,selectAllRowsItem:!0,selectAllRowsItemText:(0,i.__)("All","burst-statistics")},noDataComponent:(0,n.jsx)(ut,{noData:q,data:[],isLoading:R,error:Z}),progressPending:R,progressComponent:(0,n.jsx)(ut,{noData:q,data:[],isLoading:R,error:Z})}}),[K,B,q,R,Z]);return(0,n.jsxs)(w.A,{className:"row-span-2 xl:col-span-6",children:[(0,n.jsx)(j.A,{title:(0,n.jsx)(ct,{value:g,onChange:O,options:F,disabled:[]}),controls:(0,n.jsxs)(n.Fragment,{children:[_.searchable&&(0,n.jsx)("input",{className:"burst-datatable-search ml-auto",type:"text",placeholder:(0,i.__)("Search","burst-statistics"),value:P,onChange:function(t){return M(t.target.value)}}),(0,n.jsx)(C,{selectedOptions:D,options:m,onApply:k})]})}),(0,n.jsx)(A.A,{className:"px-0 py-0",children:(0,n.jsx)(lt.Ay,xt({},z))})]})}));var Dt=r(6850),Nt=(r(4901),function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"col-span-12 flex justify-between items-center",children:[(0,n.jsx)(Dt.A,{children:(0,n.jsx)(l,{})}),(0,n.jsx)(Dt.A,{children:(0,n.jsx)(x,{})})]}),(0,n.jsx)(Dt.A,{children:(0,n.jsx)(V,{})}),(0,n.jsx)(Dt.A,{children:(0,n.jsx)(W,{})}),(0,n.jsx)(Dt.A,{children:(0,n.jsx)(at,{})}),(0,n.jsx)(Dt.A,{children:(0,n.jsx)(At,{allowedConfigs:["pages","parameters","campaigns"],id:1})}),(0,n.jsx)(Dt.A,{children:(0,n.jsx)(At,{allowedConfigs:["referrers","countries"],id:2})})]})})},2081:(t,e,r)=>{r.d(e,{A:()=>o});var n=r(4848),s=r(1609),a=r(4164),i=function(t){var e=t.children,r=t.className,s=void 0===r?"":r;return(0,n.jsx)("div",{className:(0,a.A)(s,"flex items-center justify-between px-6 py-3"),children:e})};i.displayName="BlockFooter";const o=(0,s.memo)(i)},2895:(t,e,r)=>{r.d(e,{S:()=>d});var n=r(1511),s=r(2346),a=r(1127),i=r(979),o=r(6212),c=r(900),u=r(6275),l=function(t){if(c.cA[t]){var e=c.cA[t].range(),r=e.startDate,n=e.endDate;return{startDate:(0,s.default)(r,"yyyy-MM-dd"),endDate:(0,s.default)(n,"yyyy-MM-dd"),range:t}}return null},d=(0,n.v)((function(t){var e=(0,u.Lg)("selectedRangeKey"),r=e?l(e):null;return{startDate:r?r.startDate:(0,s.default)((0,a.default)((0,i.A)(new Date,7)),"yyyy-MM-dd"),endDate:r?r.endDate:(0,s.default)((0,o.default)((0,i.A)(new Date,1)),"yyyy-MM-dd"),range:r?r.range:"last-7-days",setStartDate:function(e){return t((function(t){return{startDate:e}}))},setEndDate:function(e){return t((function(t){return{endDate:e}}))},setRange:function(e){if("custom"!==e){(0,u.ZB)("selectedRangeKey",e);var r=l(e);r&&t(r)}else t({range:e})}}}))},3101:(t,e,r)=>{r.d(e,{A:()=>p,l:()=>b});var n=r(7665),s=r(8069),a=r(7097),i=r(6275),o=r(5446),c=r(7723),u=r(1932),l=function(){return l=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},l.apply(this,arguments)},d=function(t,e,r,n){return new(r||(r=Promise))((function(s,a){function i(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,o)}c((n=n.apply(t,e||[])).next())}))},f=function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},b=function(t){return t.map((function(e){var r=l({},e);if(e.react_conditions){var n=function(t,e){return!t||0===Object.keys(t).length||Object.entries(t).some((function(t){var r=t[0],n=t[1],s=e.find((function(t){return t.id===r}));if(!s)return!1;var a=s.value;return!!a&&n.includes(a)}))}(e.react_conditions,t);"disable"===e.condition_action?r.disabled=!n:r.conditionallyDisabled=!n}return r}))};const p=function(){var t,e,r,b=(0,n.jE)(),p=(0,s.I)({queryKey:["goals_data"],queryFn:function(){return d(void 0,void 0,void 0,(function(){var t;return f(this,(function(e){switch(e.label){case 0:return[4,(0,i.DX)()];case 1:return[2,{goals:(t=e.sent()).goals||[],predefinedGoals:t.predefinedGoals||[],goalFields:Object.values(t.goalFields||{})}]}}))}))},retry:1}),v=(0,a.n)({mutationFn:function(){return d(void 0,void 0,void 0,(function(){var t,e;return f(this,(function(r){switch(r.label){case 0:return t=(null===(e=b.getQueryData(["goals_data"]))||void 0===e?void 0:e.goals)||[],[4,(0,i.d2)({goals:t})];case 1:return[2,r.sent()]}}))}))},onSuccess:function(){},onError:function(t){console.error(t),o.toast.error((0,c.__)("Failed to save goals","burst-statistics"))}}),g=(0,a.n)({mutationFn:function(t){return d(void 0,[t],void 0,(function(t){var e,r=t.id,n=t.value;return f(this,(function(t){switch(t.label){case 0:return e=[{id:r,title:n}],[4,(0,i.d2)({goals:e})];case 1:return[2,t.sent()]}}))}))},onError:function(t){console.error(t),o.toast.error((0,c.__)("Failed to save goal title","burst-statistics"))}}),h=(0,a.n)({mutationFn:function(){return d(void 0,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,(0,i.D)()];case 1:return[2,t.sent()]}}))}))},onSuccess:function(t){b.setQueryData(["goals_data"],(function(e){return e?(0,u.jM)(e,(function(e){e.goals.push(t.goal)})):e})),o.toast.success((0,c.__)("Goal added successfully!","burst-statistics"))},onError:function(t){console.error(t),o.toast.error((0,c.__)("Failed to add goal","burst-statistics"))}}),_=(0,a.n)({mutationFn:function(t){return d(void 0,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,(0,i.$x)(t)];case 1:return[2,e.sent()]}}))}))},onSuccess:function(t,e){t.deleted&&(b.setQueryData(["goals_data"],(function(t){return t?(0,u.jM)(t,(function(t){if(1===t.goals.length)t.goals=[];else{var r=t.goals.findIndex((function(t){return t.id===e}));-1!==r&&t.goals.splice(r,1)}})):t})),o.toast.success((0,c.__)("Goal deleted successfully!","burst-statistics")))},onError:function(t){console.error(t),o.toast.error((0,c.__)("Failed to delete goal","burst-statistics"))}}),m=(0,a.n)({mutationFn:function(t){return d(void 0,[t],void 0,(function(t){var e=t.predefinedGoalId,r=t.type,n=t.cookieless;return f(this,(function(t){switch(t.label){case 0:if("hook"===r&&n)throw new Error((0,c.__)("Cannot add server side goals in combination with cookieless tracking","burst-statistics"));if(!burst_settings.is_pro)throw new Error((0,c.__)("Predefined goals are a premium feature.","burst-statistics"));return[4,(0,i.ZI)(e)];case 1:return[2,t.sent()]}}))}))},onSuccess:function(t){b.setQueryData(["goals_data"],(function(e){return e?(0,u.jM)(e,(function(e){e.goals.push(t.goal)})):e})),o.toast.success((0,c.__)("Successfully added predefined goal!","burst-statistics"))},onError:function(t){console.error(t),o.toast.error(t.message||(0,c.__)("Failed to add predefined goal","burst-statistics"))}});return{goals:(null===(t=p.data)||void 0===t?void 0:t.goals)||[],goalFields:(null===(e=p.data)||void 0===e?void 0:e.goalFields)||[],predefinedGoals:(null===(r=p.data)||void 0===r?void 0:r.predefinedGoals)||[],isLoading:p.isLoading,isError:p.isError,getGoal:function(t){var e,r=(null===(e=p.data)||void 0===e?void 0:e.goals)||[];if(!Array.isArray(r))return!1;var n=r.findIndex((function(e){return e.id==t}));return-1!==n&&r[n]},setGoalValue:function(t,e,r){b.setQueryData(["goals_data"],(function(n){return n?(0,u.jM)(n,(function(n){var s=n.goals.findIndex((function(e){return e.id===t}));-1!==s&&(n.goals[s][e]=r)})):n}))},updateGoal:function(t,e){b.setQueryData(["goals_data"],(function(r){return r?(0,u.jM)(r,(function(r){var n=r.goals.findIndex((function(e){return e.id===t}));-1!==n&&(r.goals[n]=l(l({},r.goals[n]),e))})):r}))},saveGoals:v.mutateAsync,saveGoalTitle:function(t,e){return g.mutateAsync({id:t,value:e})},addGoal:h.mutateAsync,deleteGoal:_.mutateAsync,addPredefinedGoal:function(t,e,r){return m.mutateAsync({predefinedGoalId:t,type:e,cookieless:r})},invalidateGoals:function(){return b.invalidateQueries(["goals_data"])}}}},3933:(t,e,r)=>{r.d(e,{A:()=>o});var n=r(4848),s=r(1609),a=r(4164),i=function(t){var e=t.children,r=t.className,s=void 0===r?"":r,i=/\bp-\S+/.test(s);return(0,n.jsx)("div",{className:(0,a.A)("flex-grow",{"p-6":!i},s),children:e})};i.displayName="BlockContent";const o=(0,s.memo)(i)},4280:(t,e,r)=>{r.d(e,{A:()=>n});const n=(0,r(1511).v)((function(t,e){return{licenseStatus:burst_settings.licenseStatus,setLicenseStatus:function(e){t({licenseStatus:e})},get isLicenseValid(){return console.log(e().licenseStatus),console.log(burst_settings.is_pro),"valid"===e().licenseStatus&&"1"===burst_settings.is_pro}}}))},4301:(t,e,r)=>{r.d(e,{A:()=>a});var n=r(4848),s=(r(1609),r(3881));const a=function(t){var e=t.children,r=t.content,a=t.delayDuration,i=void 0===a?400:a;return r?(0,n.jsx)(s.Kq,{children:(0,n.jsxs)(s.bL,{delayDuration:i,children:[(0,n.jsx)(s.l9,{asChild:!0,children:e}),(0,n.jsx)(s.ZL,{children:(0,n.jsxs)(s.UC,{className:"burst-tooltip-content",sideOffset:5,children:[r,(0,n.jsx)(s.i3,{className:"burst-tooltip-arrow"})]})})]})}):(0,n.jsx)(n.Fragment,{children:e})}},6275:(t,e,r)=>{r.d(e,{$x:()=>A,D:()=>D,DX:()=>j,Eo:()=>k,Ey:()=>x,K5:()=>S,Lg:()=>C,ZB:()=>P,ZI:()=>N,bQ:()=>O,d2:()=>w,qN:()=>m,ww:()=>y});var n=r(4848),s=r(1455),a=r.n(s),i=r(7723),o=r(5446),c=function(){return c=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},c.apply(this,arguments)},u=function(t,e,r,n){return new(r||(r=Promise))((function(s,a){function i(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,o)}c((n=n.apply(t,e||[])).next())}))},l=function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},d=function(t,e,r){if(r||2===arguments.length)for(var n,s=0,a=e.length;s<a;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))},f=function(){return-1!==burst_settings.site_url.indexOf("?")?"&":"?"},b=function(){return"nonce="+burst_settings.burst_nonce+"&token="+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)},p=function(t,e){void 0===e&&(e=!1);var r=(0,i.__)("Server error","burst-statistics");if(t=t.replace(/(<([^>]+)>)/gi,""),e){var s=e.split("?")[0].split("/"),a=s.indexOf("v1")+1;r=(0,i.__)("Server error in","burst-statistics")+" "+s[a]+"/"+s[a+1]}r+=": "+t;var c=(0,n.jsx)("div",{title:(0,i.__)("Click to copy","burst-statistics"),onClick:function(){navigator.clipboard.writeText(r),o.toast.success((0,i.__)("Error copied to clipboard","burst-statistics"))},children:r});o.toast.error(c,{autoClose:15e3})},v=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return u(void 0,d([t],e,!0),void 0,(function(t,e,r){var n;return void 0===e&&(e="GET"),void 0===r&&(r={}),l(this,(function(s){return n={path:t,method:e},"POST"===e&&(r.nonce=burst_settings.burst_nonce,n.data=r),[2,a()(n).then((function(t){if(!t.request_success)throw new Error("invalid data error");if(t.code)throw new Error(t.message);return delete t.request_success,t})).catch((function(s){return g(e,t,r).catch((function(){throw p(s.message,n.path),s}))}))]}))}))},g=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return u(void 0,d([t,e],r,!0),void 0,(function(t,e,r){var n,s,a,i;return void 0===r&&(r=null),l(this,(function(o){switch(o.label){case 0:n="GET"===t?"".concat(_("ajax"),"&rest_action=").concat(e.replace("?","&")):_("ajax"),s={method:t,headers:{"Content-Type":"application/json; charset=UTF-8"}},"POST"===t&&(s.body=JSON.stringify({path:e,data:r},h)),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch(n,s)];case 2:if(!(a=o.sent()).ok)throw p(!1,a.statusText),new Error(a.statusText);return[4,a.json()];case 3:if(!(i=o.sent()).data||!Object.prototype.hasOwnProperty.call(i.data,"request_success"))throw new Error("Invalid data error");return delete i.data.request_success,[2,Promise.resolve(i.data)];case 4:return o.sent(),[2,Promise.reject(new Error("AJAX request failed"))];case 5:return[2]}}))}))},h=function(t,e){return t?t&&t.includes("Control")?void 0:"object"==typeof e?JSON.parse(JSON.stringify(e,h)):e:e},_=function(t){var e;return e=void 0===t?burst_settings.site_url:burst_settings.admin_ajax_url,"https:"===window.location.protocol&&-1===e.indexOf("https://")?e.replace("http://","https://"):e},m=function(t,e){return v("burst/v1/options/set"+f()+b(),"POST",{option:{option:t,value:e}})},y=function(){return v("burst/v1/fields/get"+f()+b())},x=function(t){return v("burst/v1/fields/set"+f(),"POST",{fields:t})},w=function(t){return v("burst/v1/goals/set"+f()+b(),"POST",t)},j=function(){return v("burst/v1/goals/get"+f()+b())},A=function(t){return v("burst/v1/goals/delete"+f()+b(),"POST",{id:t})},D=function(){return v("burst/v1/goals/add"+f()+b(),"POST",{})},N=function(t){return v("burst/v1/goals/add_predefined"+f()+b(),"POST",{id:t})},k=function(t,e){return void 0===e&&(e={}),v("burst/v1/do_action/".concat(t),"POST",{action_data:e}).then((function(t){return Object.prototype.hasOwnProperty.call(t,"data")?t.data:[]}))},O=function(t,e,r,n){for(var s=[],a=4;a<arguments.length;a++)s[a-4]=arguments[a];return u(void 0,d([t,e,r,n],s,!0),void 0,(function(t,e,r,n,s){var a,i,o,u,d,b;return void 0===s&&(s={}),l(this,(function(l){switch(l.label){case 0:return a=s.filters,i=s.metrics,o=s.group_by,u=c(c(c({date_start:e,date_end:r,date_range:n,nonce:burst_settings.burst_nonce,goal_id:s.goal_id,token:Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)},a&&{filters:a}),i&&{metrics:i}),o&&{group_by:o}),p=u,d=Object.keys(p).filter((function(t){return void 0!==p[t]&&null!==p[t]})).map((function(t){var e=function(t){return Array.isArray(t)?t:"object"==typeof t&&null!==t?JSON.stringify(t):t}(p[t]);return Array.isArray(e)?e.map((function(e){return"".concat(encodeURIComponent(t),"[]=").concat(encodeURIComponent(e))})).join("&"):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))})).join("&"),b="burst/v1/data/".concat(t).concat(f()).concat(d),[4,v(b,"GET")];case 1:return[2,l.sent()]}var p}))}))},S=function(t){return v("burst/v1/posts/".concat(f()).concat(b(),"&search=").concat(t)).then((function(t){return Object.prototype.hasOwnProperty.call(t,"posts")?t.posts:[]}))},C=function(t,e){if("undefined"!=typeof Storage){var r=localStorage.getItem("burst_"+t);if(r&&0<r.length)return JSON.parse(r)}return e},P=function(t,e){"undefined"!=typeof Storage&&localStorage.setItem("burst_"+t,JSON.stringify(e))}},6744:(t,e,r)=>{r.d(e,{A:()=>o});var n=r(4848),s=r(1609),a=r(4164),i=function(t){var e=t.title,r=t.controls,s=t.className,i=void 0===s?"":s;return(0,n.jsxs)("div",{className:(0,a.A)(i,"flex min-h-16 items-center justify-between px-6 gap-4"),children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:e}),r]})};i.displayName="BlockHeading";const o=(0,s.memo)(i)},7112:(t,e,r)=>{r.d(e,{A:()=>ut});var n=r(4848),s=r(1609),a=r(4301),i=r(8309),o=r(613),c=r(8007),u=r(5773),l=r(418),d=r(7946),f=r(8697),b=r(4471),p=r(180),v=r(2102),g=r(5107),h=r(7677),_=r(250),m=r(697),y=r(6241),x=r(5977),w=r(9137),j=r(4021),A=r(827),D=r(7962),N=r(9108),k=r(2307),O=r(6050),S=r(8641),C=r(4997),P=r(5404),M=r(1839),F=r(8686),I=r(3893),T=r(7235),E=r(3160),L=r(2853),V=r(8397),U=r(5042),G=r(5899),B=r(6844),R=r(541),Z=r(4080),q=r(8818),K=r(5742),z=r(6523),Q=r(9798),J=r(4179),$=r(2105),W=r(9574),Y=r(99),X=r(3194),H=r(3291),tt=r(73),et=r(4539),rt=r(1233),nt=r(5333),st=r(8931),at=r(72),it=function(){return it=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},it.apply(this,arguments)},ot={black:"var(--rsp-black)",green:"var(--rsp-green)",yellow:"var(--rsp-yellow)",red:"var(--rsp-red)",blue:"var(--rsp-blue)",gray:"var(--rsp-grey-400)",white:"var(--rsp-white)"},ct={bullet:i.A,dot:i.A,circle:o.A,period:c.A,check:u.A,warning:l.A,error:d.A,times:f.A,"circle-check":b.A,"circle-times":p.A,"chevron-up":v.A,"chevron-down":g.A,"chevron-right":h.A,"chevron-left":_.A,plus:m.A,minus:y.A,sync:x.A,"sync-error":w.A,shortcode:j.A,file:A.A,"file-disabled":D.A,"file-download":N.A,calendar:k.A,"calendar-error":O.A,website:S.A,help:C.A,copy:P.A,trash:M.A,visitor:F.A,visitors:I.A,"visitors-crowd":I.A,time:T.A,pageviews:E.A,referrer:L.A,sessions:V.A,bounces:U.A,bounced_sessions:U.A,bounce_rate:U.A,winner:G.A,live:B.A,total:R.A,graph:Z.A,conversion_rate:q.A,goals:K.A,conversions:K.A,"goals-empty":c.A,filter:z.A,loading:Q.A,desktop:J.A,tablet:$.A,mobile:W.A,other:Y.A,mouse:X.A,eye:E.A,page:H.A,hashtag:tt.A,sun:et.A,world:rt.A,filters:nt.A,referrers:st.A,hook:at.A};const ut=(0,s.memo)((function(t){var e=t.name,r=void 0===e?"bullet":e,s=t.color,o=void 0===s?"black":s,c=t.size,u=void 0===c?18:c,l=t.strokeWidth,d=void 0===l?1.5:l,f=t.tooltip,b=t.onClick,p=(t.className,ot[o]||o),v=ct[r]||i.A,g={size:u,color:p,strokeWidth:d},h=(0,n.jsx)("div",{onClick:function(){b&&b()},className:"flex items-center justify-center",children:"bullet"!==r&&"dot"!==r||v!==i.A?(0,n.jsx)(v,it({},g)):(0,n.jsx)(i.A,it({},g,{fill:p}))});return f?(0,n.jsx)(a.A,{content:f,children:h}):h}))},7926:(t,e,r)=>{r.d(e,{A:()=>c});var n=r(4848),s=r(1609),a=r(4164),i=r(6850),o=(0,s.memo)((function(t){var e=t.className,r=void 0===e?"":e,s=t.children;return(0,n.jsx)(i.A,{children:(0,n.jsx)("div",{className:(0,a.A)("col-span-12 flex flex-col overflow-hidden rounded-xl bg-white shadow-md relative border border-gray-100",r),children:s})})}));o.displayName="Block";const c=o},9369:(t,e,r)=>{r.d(e,{A:()=>v});var n=r(4848),s=r(1609),a=r.n(s),i=r(240),o=r(3101),c=r(332),u=r(2895),l=r(4301),d=r(7723),f=r(5446),b=r(900),p=function(t,e,r){if(r||2===arguments.length)for(var n,s=0,a=e.length;s<a;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))};const v=a().memo((function(t){var e=t.filter,r=t.filterValue,a=t.label,v=t.children,g=t.startDate,h=t.endDate,_=(0,i.c)((function(t){return t.setFilters})),m=(0,i.c)((function(t){return t.setAnimate})),y=(0,o.A)().getGoal,x=(0,c.G)((function(t){return t.setMetrics})),w=(0,c.G)((function(t){return t.getMetrics()})),j=(0,u.S)((function(t){return t.setStartDate})),A=(0,u.S)((function(t){return t.setEndDate})),D=(0,u.S)((function(t){return t.setRange})),N=(0,s.useMemo)((function(){return a?(0,d.__)("Click to filter by:","burst-statistics")+" "+a:(0,d.__)("Click to filter","burst-statistics")}),[a]),k=(0,s.useCallback)((function(){var t="",e="";if(/^\d+$/.test(g)){var r=10===g.toString().length?1e3*g:g;t=new Date(r).toISOString().split("T")[0]}else/\d{4}-\d{2}-\d{2}/.test(g)&&(t=g);h?/^\d+$/.test(h)?(r=10===h.toString().length?1e3*h:h,e=new Date(r).toISOString().split("T")[0]):/\d{4}-\d{2}-\d{2}/.test(h)&&(e=h):e=(new Date).toISOString().split("T")[0],(0,b.vd)(t)&&(0,b.vd)(e)&&(j(t),A(e),D("custom"))}),[g,h,j,A,D]),O=(0,s.useCallback)((function(t){return n=void 0,s=void 0,i=function(){var t;return function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(n){switch(n.label){case 0:return window.location.href="#statistics","goal_id"!==e?[3,1]:((t=y(r))&&t.goal_specific_page?(_("page_url",t.goal_specific_page),_(e,r),f.toast.info((0,d.__)("Filtering by goal & goal specific page","burst-statistics"))):(_(e,r),f.toast.info((0,d.__)("Filtering by goal","burst-statistics"))),w.includes("conversions")||x(p(p([],w,!0),["conversions"],!1)),[3,3]);case 1:return _(e,""),[4,new Promise((function(t){return setTimeout(t,10)}))];case 2:n.sent(),_(e,r,!0),m(!1),n.label=3;case 3:return k(),[2]}}))},new((a=void 0)||(a=Promise))((function(t,e){function r(t){try{c(i.next(t))}catch(t){e(t)}}function o(t){try{c(i.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,o)}c((i=i.apply(n,s||[])).next())}));var n,s,a,i}),[e,r,y,_,w,x,m,k]);return e&&r?(0,n.jsx)(l.A,{content:N,children:(0,n.jsx)("span",{onClick:O,className:"burst-click-to-filter",children:v})}):(0,n.jsx)(n.Fragment,{children:v})}))}}]);