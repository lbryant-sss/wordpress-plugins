"use strict";(globalThis.webpackChunkburst_statistics=globalThis.webpackChunkburst_statistics||[]).push([[18],{18:(e,t,r)=>{r.r(t),r.d(t,{component:()=>qt});var n=r(4848),a=r(1609),i=r.n(a),o=r(6850),s=r(3101),l=r(7926),c=r(6744),u=r(3933),d=r(9785),f=function(){return f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},f.apply(this,arguments)},p=(0,a.forwardRef)((function(e,t){var r=e.type,a=void 0===r?"text":r,i=e.className,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["type","className"]);return(0,n.jsx)("input",f({ref:t,type:a,className:"w-full rounded-md border border-gray-400 p-2 focus:border-primary-dark focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(i||"")},o))}));p.displayName="TextInput";const b=p;var h=r(5920),v=r(7723),y=r(4164),m=r(4280),g=function(e){return e&&"object"==typeof e&&!i().isValidElement(e)},x=(0,a.memo)((function(e){var t=e.label,r=e.context,a=e.help,i=e.error,o=e.reverseLabel,s=void 0!==o&&o,l=e.alignWithLabel,c=void 0!==l&&l,u=e.className,d=void 0===u?"":u,f=e.inputId,p=e.required,b=void 0!==p&&p,x=e.children,j=e.pro,w=(0,m.A)().isLicenseValid,_=(0,y.$)(d,"w-full py-4 px-6 box-border ",i&&"bg-red-100"),O=c?"flex flex-row items-center justify-between":"flex flex-col",N=s?"order-2":"order-1",k=s?"order-1":"order-2",S=c?s?"ml-4":"":s?"mt-2":"",A=c?s?"":"ml-4":s?"":"mt-2",P=(0,n.jsxs)("div",{className:(0,y.$)("flex items-center gap-2",S),children:[(0,n.jsx)(h.b,{className:"cursor-pointer text-md font-medium text-black",htmlFor:f,children:t}),b&&(0,n.jsxs)("span",{className:"text-gray ml-1 text-xs font-normal",children:["(",(0,v.__)("Required","burst-statistics"),")"]}),j&&j.url&&!w&&(0,n.jsx)("a",{href:j.url,className:"bg-primary text-white px-2 py-0.5 rounded-full text-sm cursor-pointer hover:transform hover:scale-110 transition-transform duration-300",children:(0,v.__)("Pro","burst-statistics")}),a&&(0,n.jsx)("span",{className:"text-gray ml-2 text-sm font-light",children:a})]}),C=(0,n.jsx)("div",{className:(0,y.$)("w-full",A),children:x});return(0,n.jsxs)("div",{className:_,children:[(0,n.jsxs)("div",{className:O,children:[(0,n.jsx)("div",{className:(0,y.$)(N),children:P}),(0,n.jsx)("div",{className:(0,y.$)(k),children:C})]}),i&&(0,n.jsx)("p",{className:"text-red mt-2 text-sm font-semibold",role:"alert",children:i}),r&&(0,n.jsxs)("p",{className:"text-gray mt-2 text-sm font-normal",children:[g(r)?r.text:r,g(r)&&r.url&&" ",g(r)&&r.url&&(0,n.jsx)("a",{className:"text-blue underline",href:r.url,target:"_blank",children:(0,v.__)("More info","burst-statistics")})]})]})}));x.displayName="FieldWrapper";const j=x;var w=function(){return w=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},w.apply(this,arguments)},_=(0,a.forwardRef)((function(e,t){var r,a,i=e.field,o=e.fieldState,s=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState","label","help","context","className"]),f=d.id||i.name;return(0,n.jsx)(j,{label:s,help:l,error:null===(r=null==o?void 0:o.error)||void 0===r?void 0:r.message,context:c,className:u,inputId:f,required:d.required,children:(0,n.jsx)(b,w({id:f,type:"text","aria-invalid":!!(null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.message)},i,d))})}));_.displayName="TextField";const O=_;var N=function(){return N=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},N.apply(this,arguments)},k=(0,a.forwardRef)((function(e,t){e.type,e.className;var r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["type","className"]);return(0,n.jsx)("input",N({ref:t,type:"hidden"},r))}));k.displayName="HiddenInput";const S=k;var A=function(){return A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},A.apply(this,arguments)},P=(0,a.forwardRef)((function(e,t){var r,a=e.field,i=e.fieldState,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState"]),s=o.id||a.name;return(0,n.jsx)(S,A({},a,{id:s,type:"hidden","aria-invalid":!!(null===(r=null==i?void 0:i.error)||void 0===r?void 0:r.message)},o))}));P.displayName="HiddenField";const C=P;var I=function(){return I=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},I.apply(this,arguments)},E=(0,a.forwardRef)((function(e,t){var r=e.className,a=e.rows,i=void 0===a?4:a,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["className","rows"]);return(0,n.jsx)("textarea",I({ref:t,rows:i,className:"w-full rounded-md border border-gray-400 p-2 focus:border-primary-dark focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(r||"")},o))}));E.displayName="TextAreaInput";const D=E;var F=function(){return F=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},F.apply(this,arguments)},L=(0,a.forwardRef)((function(e,t){var r,a,i=e.field,o=e.fieldState,s=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState","label","help","context","className"]),f=d.id||i.name;return(0,n.jsx)(j,{label:s,help:l,error:null===(r=null==o?void 0:o.error)||void 0===r?void 0:r.message,context:c,className:u,inputId:f,required:d.required,children:(0,n.jsx)(D,F({id:f,"aria-invalid":!!(null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.message)},i,d))})}));L.displayName="TextAreaField";const T=L;var q=r(6512),z=function(){return z=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},z.apply(this,arguments)},G=(0,a.forwardRef)((function(e,t){var r,a,i=e.field,o=e.fieldState,s=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState","label","help","context","className"]),f=d.id||i.name,p=burst_settings.current_ip,b=i.value||"";return(0,n.jsx)(j,{label:s,help:l,error:null===(r=null==o?void 0:o.error)||void 0===r?void 0:r.message,context:c,className:u,inputId:f,required:d.required,children:(0,n.jsxs)("div",{className:"space-y-2 w-full",children:[(0,n.jsx)(D,z({ref:t,id:f,placeholder:"127.0.0.1\n192.168.0.1","aria-invalid":!!(null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.message),onChange:function(e){var t=e.target.value;i.onChange(t)},value:b,rows:4},d)),(0,n.jsx)(q.A,{onClick:function(){if(p){var e,t=(b||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");e=0===t.split("\n").map((function(e){return e.trim()})).filter((function(e){return""!==e})).length||""===t.trim()?p:t.endsWith("\n")?t+p:t+"\n"+p,i.onChange(e)}},disabled:!p||!p||b.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n").map((function(e){return e.trim()})).filter((function(e){return""!==e})).includes(p),btnVariant:"tertiary",size:"md",children:(0,v.__)("Add current IP address","burst-statistics")})]})})}));G.displayName="IpBlockField";const R=G;var V=r(9014),M=function(){return M=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},M.apply(this,arguments)},U=(0,a.forwardRef)((function(e,t){var r=e.value,a=e.onChange,i=e.disabled,o=e.required,s=e.size,l=void 0===s?"default":s,c=e.className,u=void 0===c?"":c,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["value","onChange","disabled","required","size","className"]),f="string"==typeof r?"1"===r:Boolean(r),p="small"===l?"w-8 h-5":"w-10 h-6",b="small"===l?"w-3 h-3 translate-x-1 data-[state=checked]:translate-x-4":"w-4 h-4 translate-x-1 data-[state=checked]:translate-x-5";return(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(V.bL,M({ref:t,className:"".concat(p," bg-gray-400 rounded-full relative focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed data-[state=checked]:bg-primary ").concat(u),checked:f,onCheckedChange:a,disabled:i,required:o},d,{children:(0,n.jsx)(V.zi,{className:"block ".concat(b," bg-white rounded-full shadow transform transition-transform duration-200")})}))})}));U.displayName="SwitchInput";const B=U;var X=function(){return X=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},X.apply(this,arguments)},W=(0,a.forwardRef)((function(e,t){var r,a,i=e.field,o=e.fieldState,s=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState","label","help","context","className"]),f=d.id||i.name;return(0,n.jsx)(j,{label:s,help:l,error:null===(r=null==o?void 0:o.error)||void 0===r?void 0:r.message,context:c,className:u+" flex-row",inputId:f,required:d.required,alignWithLabel:!0,children:(0,n.jsx)(B,X({},i,{id:f,"aria-invalid":!!(null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.message),ref:t},d))})}));W.displayName="SwitchField";const K=W;var Q=r(990),$=r(7112);const H=function(e){var t=e.title,r=e.content,i=e.footer,o=e.triggerClassName,s=e.children,l=e.isOpen,c=e.onClose,u=(0,a.useState)(null);return u[0],u[1],(0,n.jsxs)(Q.bL,{open:l,onOpenChange:function(e){e||null==c||c()},children:[o&&(0,n.jsx)(Q.l9,{className:o,children:s}),(0,n.jsxs)(Q.ZL,{container:document.getElementById("modal-root"),children:[(0,n.jsx)(Q.hJ,{className:"bg-black/50 fixed inset-0 z-50"}),(0,n.jsxs)(Q.UC,{className:"fixed px-4 py-3 left-1/2 top-1/2 max-h-[85vh] w-[90vw] max-w-[500px] -translate-x-1/2 -translate-y-1/2 rounded-md z-50 bg-gray-100 p-2 shadow-md focus:outline-none data-[state=open]:animate-contentShow",children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,n.jsx)(Q.hE,{className:"text-lg font-semibold text-black",children:t}),(0,n.jsx)(Q.bm,{asChild:!0,children:(0,n.jsx)("button",{"aria-label":"Close",onClick:c,className:"bg-gray-200 rounded-full p-2 w-8 h-8 cursor-pointer hover:bg-gray-300 transition-colors duration-150",children:(0,n.jsx)($.A,{name:"times",size:18,color:"gray"})})})]}),(0,n.jsx)(Q.VY,{className:"text-base text-black mb-6 mt-4",children:r}),(0,n.jsx)("div",{className:"flex flex-row justify-end gap-2",children:i})]})]})]})};var Z=r(5446),J=r(6275),Y=function(){return Y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Y.apply(this,arguments)},ee=function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},te=function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const re=function(e){var t=e.label,r=e.action,i=e.buttonText,o=e.warnTitle,s=e.warnContent,l=e.warnType,c=e.url,u=e.disabled,d=e.onClick,f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["label","action","buttonText","warnTitle","warnContent","warnType","url","disabled","onClick"]),p=(0,a.useState)(!1),b=p[0],h=p[1],y=(0,a.useState)(!1),m=y[0],g=y[1],x=i||t,j=function(){return ee(void 0,void 0,void 0,(function(){var e,t;return te(this,(function(n){switch(n.label){case 0:if(!r)return[2];g(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,J.Eo(r,{})];case 2:return(e=n.sent()).success?Z.toast.success(e.message||(0,v.__)("Action completed successfully","burst-statistics")):Z.toast.error(e.message||(0,v.__)("Action failed","burst-statistics")),[3,5];case 3:return t=n.sent(),Z.toast.error((0,v.__)("An error occurred while executing the action","burst-statistics")),console.error("Action execution error:",t),[3,5];case 4:return g(!1),[7];case 5:return[2]}}))}))},w=function(){h(!1)};return r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.A,Y({onClick:function(e){return function(e){return ee(void 0,void 0,void 0,(function(){return te(this,(function(t){switch(t.label){case 0:return o?(h(!0),[3,4]):[3,1];case 1:return r?[4,j()]:[3,3];case 2:t.sent(),t.label=3;case 3:d&&d(e),t.label=4;case 4:return[2]}}))}))}(e)},disabled:u||m,btnVariant:"danger"===l?"danger":"secondary"},f,{children:m?(0,v.__)("Processing...","burst-statistics"):x})),o&&(0,n.jsx)(H,{title:o,content:s||"",isOpen:b,onClose:w,triggerClassName:"",children:null,footer:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.A,{onClick:w,btnVariant:"tertiary",children:(0,v.__)("Cancel","burst-statistics")}),(0,n.jsx)(q.A,{onClick:function(){return ee(void 0,void 0,void 0,(function(){return te(this,(function(e){switch(e.label){case 0:return h(!1),r?[4,j()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},btnVariant:"danger"===l?"danger":"secondary",disabled:m,children:m?(0,v.__)("Processing...","burst-statistics"):(0,v.__)("Confirm","burst-statistics")})]})})]}):c?(0,n.jsx)(q.A,Y({link:{to:c,from:"/"},disabled:u},f,{btnVariant:"tertiary",children:x})):(0,n.jsx)(q.A,Y({onClick:d,disabled:u},f,{btnVariant:"tertiary",children:x}))};var ne=function(){return ne=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ne.apply(this,arguments)},ae=(0,a.forwardRef)((function(e,t){var r,a,i,o,s,l,c,u,d=e.field,f=e.fieldState,p=e.label,b=e.help,h=e.context,v=e.className,y=e.setting,m=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState","label","help","context","className","setting"]),g=m.id||d.name;return(0,n.jsx)(j,{label:p,help:b,error:null===(r=null==f?void 0:f.error)||void 0===r?void 0:r.message,context:h,inputId:g,className:v,alignWithLabel:!0,children:(0,n.jsx)(re,ne({},d,{id:g,"aria-invalid":!!(null===(a=null==f?void 0:f.error)||void 0===a?void 0:a.message),ref:t,buttonText:null!==(i=y.button_text)&&void 0!==i?i:"",action:null!==(o=y.action)&&void 0!==o?o:"",url:null!==(s=y.url)&&void 0!==s?s:"",warnTitle:null!==(l=y.warnTitle)&&void 0!==l?l:"",warnContent:null!==(c=y.warnContent)&&void 0!==c?c:"",warnType:null!==(u=y.warnType)&&void 0!==u?u:""},m))})}));ae.displayName="ButtonControlField";const ie=ae;var oe=r(8221),se=r.n(oe);const le=function(e,t,r){return void 0===r&&(r=[]),(0,a.useCallback)(se()((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.apply(void 0,t)}),t),function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([t],r,!0))};var ce=r(585),ue=function(){return ue=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ue.apply(this,arguments)};const de=i().forwardRef((function(e,t){var r,a=e.value,i=e.onChange,o=e.options,s=(void 0===(r=void 0===o?[]:o)&&(r=[]),Array.isArray(r)?r:Object.entries(r).map((function(e){var t=e[0],r=e[1];return{value:t,label:String(r)}})));return(0,n.jsxs)(ce.bL,{value:a,onValueChange:function(e){return i(e)},children:[(0,n.jsxs)(ce.l9,{ref:t,className:"inline-flex items-center justify-center gap-1 rounded bg-white text-base leading-none outline outline-gray-400 px-2 py-2 hover:bg-gray-100 focus:shadow-[0_0_0_2px]",children:[(0,n.jsx)(ce.WT,{placeholder:"Select an option…"}),(0,n.jsx)(ce.In,{className:"text-base",children:(0,n.jsx)($.A,{name:"chevron-down",color:"black",size:16,tooltip:"",onClick:function(){},className:""})})]}),(0,n.jsxs)(ce.UC,{className:"bg-gray-100 text-black border border-gray-400 rounded-md shadow-lg ring-1 ring-black/5 overflow-hidden z-10 shadow-gray-400/50",position:"item-aligned",children:[(0,n.jsx)(ce.PP,{className:"",children:(0,n.jsx)($.A,{name:"chevron-up",color:"black",size:16,tooltip:"",onClick:function(){},className:""})}),(0,n.jsx)(ce.LM,{className:"",children:s.map((function(e){return(0,n.jsx)(fe,{value:e.value,children:e.label},e.value)}))}),(0,n.jsx)(ce.wn,{className:"text-base",children:(0,n.jsx)($.A,{name:"chevron-down",color:"white",size:16,tooltip:"",onClick:function(){},className:""})})]})]})}));var fe=i().forwardRef((function(e,t){var r=e.children,a=e.className,i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["children","className"]);return(0,n.jsxs)(ce.q7,ue({ref:t,className:(0,y.$)("cursor-default px-2 py-2 text-base select-none flex items-center gap-1 flex-row overflow-hidden","hover:bg-gray-300 hover:text-black","focus:bg-gray-300","transition-all duration-200",a)},i,{children:[(0,n.jsx)("div",{className:"w-4 flex items-center",children:(0,n.jsx)(ce.VF,{children:(0,n.jsx)($.A,{name:"check",color:"black",size:16,tooltip:"",onClick:function(){},className:""})})}),(0,n.jsx)(ce.p4,{children:r}),(0,n.jsx)("div",{className:"w-4 flex items-center"})]}))})),pe=r(3757),be=function(){return be=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},be.apply(this,arguments)},he=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},ve=(0,a.forwardRef)((function(e,t){var r,i=e.field,o=e.fieldState,s=e.help,l=e.context,c=e.className,u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState","help","context","className"]).id||i.name,d=i.value||[],f=(0,a.useState)(""),p=f[0],h=f[1],y=(0,a.useState)(""),m=y[0],g=y[1],x=[{value:"weekly",label:(0,v.__)("Weekly","burst-statistics")},{value:"monthly",label:(0,v.__)("Monthly","burst-statistics")}],w=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},_=le((function(e){e.length&&!w(e)?g((0,v.__)("Invalid email address","burst-statistics")):g("")}),1e3),O=function(){return e=void 0,t=void 0,n=function(){var e;return function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(t){return(e=p.trim())?w(e)?10<=d.length?(g((0,v.__)("Maximum 10 emails allowed","burst-statistics")),[2]):d.find((function(t){return t.email===e}))?(g((0,v.__)("Email address already added","burst-statistics")),[2]):(g(""),i.onChange(he(he([],d,!0),[{email:e,frequency:"monthly"}],!1)),h(""),[2]):(g((0,v.__)("Invalid email address","burst-statistics")),[2]):(g((0,v.__)("Email address is required","burst-statistics")),[2])}))},new((r=void 0)||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}));var e,t,r,n},N=[{name:(0,v.__)("Email","burst-statistics"),selector:function(e){return e.email}},{name:(0,v.__)("Frequency","burst-statistics"),cell:function(e){return(0,n.jsx)(de,{value:e.frequency,onChange:function(t){return function(e,t){var r=d.map((function(r){return r.email===e?be(be({},r),{frequency:t}):r}));i.onChange(r)}(e.email,t)},options:x})},right:"true"},{name:(0,v.__)("Remove","burst-statistics"),cell:function(e){return(0,n.jsx)(q.A,{onClick:function(){return t=e.email,r=d.filter((function(e){return e.email!==t})),void i.onChange(r);var t,r},btnVariant:"tertiary",children:(0,v.__)("Remove","burst-statistics")})},right:"true"}];return(0,n.jsx)(j,{label:"",help:s,error:null===(r=null==o?void 0:o.error)||void 0===r?void 0:r.message,context:l,inputId:u,className:c?c+" !px-0":"!px-0",children:(0,n.jsxs)("div",{className:"space-y-4 w-full",children:[(0,n.jsx)("p",{className:"text-sm text-gray-600 px-6",children:(0,v.__)("Recipients will receive weekly or monthly reports with statistics about your website. Add or remove email addresses in the list below.","burst-statistics")}),(0,n.jsx)(pe.Ay,{noDataComponent:(0,v.__)("No emails added yet","burst-statistics"),columns:N,data:d,customStyles:{headCells:{style:{paddingLeft:"1.5rem",paddingRight:"1.5rem"}},cells:{style:{paddingLeft:"1.5rem",paddingRight:"1.5rem"}}}}),(0,n.jsxs)(j,{label:"Add emails to receive weekly or monthly reports",error:m,className:"justify-start",children:[(0,n.jsx)(b,{name:u,autoComplete:"email",id:u,type:"email",value:p,onChange:function(e){var t=e.target.value;h(t),_(t)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),O())},placeholder:(0,v.__)("Enter email address","burst-statistics"),className:"mt-1 block w-full sm:w-64"}),(0,n.jsx)(q.A,{onClick:O,btnVariant:"tertiary",className:"mt-2",type:"button",children:(0,v.__)("Add to list","burst-statistics")})]})]})})}));ve.displayName="EmailReportsField";const ye=ve;var me=r(2731),ge=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};const xe=(0,a.memo)((function(e){var t=e.indeterminate,r=e.label,i=e.value,o=e.id,s=e.onChange,l=e.required,c=e.disabled,u=e.options,d=void 0===u?{}:u,f=(0,a.useState)(!1),p=f[0],b=f[1],h=i;Array.isArray(h)||(h=""===h?[]:[h]);var y=1===Object.keys(d).length&&"true"===Object.keys(d)[0],m=!!t||i,g=Array.isArray(h)?h:[],x=Object.keys(d).length>10,j=function(){b(!p)},w=!(!c||Array.isArray(c))&&c;return 0===Object.keys(d).length?(0,n.jsx)(n.Fragment,{children:(0,v.__)("No options found","burst-statistics")}):(0,n.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object.entries(d).map((function(e,a){var i,u=e[0],d=e[1];return(0,n.jsxs)("div",{className:"".concat(!p&&a>9?"hidden":""," flex items-center"),children:[(0,n.jsx)(me.bL,{className:"w-4 h-4 border border-gray-400 rounded flex-shrink-0 disabled:opacity-50",id:"".concat(o,"_").concat(u),checked:(i=u,y?m:g.includes(""+i)||g.includes(parseInt(i))),"aria-label":r,disabled:w||Array.isArray(c)&&c.includes(u),required:l,onCheckedChange:function(e){return function(e,t){if(y)s(!m);else{var r=g.includes(""+t)||g.includes(parseInt(t))?g.filter((function(e){return e!==""+t&&e!==parseInt(t)})):ge(ge([],g,!0),[t],!1);s(r)}}(0,u)},children:(0,n.jsx)(me.C1,{className:"flex items-center justify-center",children:(0,n.jsx)($.A,{name:t?"indeterminate":"check",size:14,color:"dark-blue",tooltip:"",onClick:function(){},className:""})})}),(0,n.jsx)("label",{className:"ml-2",htmlFor:"".concat(o,"_").concat(u),children:d})]},u)})),x&&!p&&(0,n.jsx)("div",{className:"flex justify-start",children:(0,n.jsx)("button",{onClick:j,className:"underline w-fit",children:(0,v.__)("Show more","burst-statistics")})}),x&&p&&(0,n.jsx)("div",{className:"flex justify-start",children:(0,n.jsx)("button",{onClick:j,className:"underline w-fit",children:(0,v.__)("Show less","burst-statistics")})})]})}));var je=function(){return je=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},je.apply(this,arguments)},we=(0,a.forwardRef)((function(e,t){var r,a=e.field,i=e.fieldState,o=e.label,s=e.help,l=e.context,c=e.className,u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState","label","help","context","className"]),d=u.id||a.name;return(0,n.jsx)(j,{label:o,help:s,error:null===(r=null==i?void 0:i.error)||void 0===r?void 0:r.message,context:l,className:c,inputId:d,required:u.required,children:(0,n.jsx)(xe,je({},a,{id:d,label:o,ref:t},u))})}));we.displayName="CheckboxGroupField";const _e=we;var Oe=r(4301),Ne=r(7972),ke=r(8069),Se=r(900),Ae=r(1511);const Pe=(0,Ae.v)((function(e,t){return{postsLoaded:!1,fetching:!1,posts:[],search:"",maxPostCount:100,filterPosts:function(e,t){return e.filter((function(e){return Object.values(e).some((function(e){return e.toString().toLowerCase().includes(t.toLowerCase())}))}))},fetchPosts:function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return a=void 0,i=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([],r,!0),s=function(r){var n,a,i,o,s,l;return void 0===r&&(r=""),function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(c){switch(c.label){case 0:return n=t().search,a=!1,i=t().posts.length<t().maxPostCount,0<n.length&&0===r.length&&(a=!0),n.length>r.length&&(a=!0),o=!1,0<n.length&&0===r.indexOf(n)&&(o=!0),!a&&t().postsLoaded&&o&&i?(e({fetching:!1}),[2,t().filterPosts(t().posts,r)]):(e({search:r,fetching:!0}),!a&&t().postsLoaded&&r===n||!a&&t().postsLoaded&&3>r.length&&o?(e({fetching:!1}),[2,t().filterPosts(t().posts,r)]):[4,(0,J.K5)(r)]);case 1:return s=c.sent(),l=(s||[]).map((function(e){return{value:e.page_url,label:e.page_url,page_id:e.page_id,post_title:0<e.post_title.length?e.post_title:(0,v.__)("Untitled","burst-statistics"),pageviews:e.pageviews}})),e({posts:l,postsLoaded:!0,maxPostsCount:s.max_post_count,fetching:!1}),[2,t().filterPosts(l,r)]}}))},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{l(s.next(e))}catch(e){t(e)}}function n(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(r,n)}l((s=s.apply(a,i||[])).next())}));var a,i,o,s}}}));var Ce=function(){return Ce=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ce.apply(this,arguments)};const Ie=(0,a.forwardRef)((function(e,t){var r,i=e.field,o=e.fieldState,s=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState","label","help","context","className"]),f=d.id||i.name,p=Pe().fetchPosts,b=(0,a.useState)(""),h=b[0],v=b[1],y=(0,ke.I)({queryKey:["defaultPosts",h],queryFn:function(){return p(h)}}),m=se()((function(e,t){return r=void 0,n=void 0,i=function(){var r;return function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(n){switch(n.label){case 0:return v(e),[4,p(e)];case 1:return r=n.sent(),t(r),[2]}}))},new((a=void 0)||(a=Promise))((function(e,t){function o(e){try{l(i.next(e))}catch(e){t(e)}}function s(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a((function(e){e(r)}))).then(o,s)}l((i=i.apply(r,n||[])).next())}));var r,n,a,i}),500);return(0,n.jsx)(j,{label:s,help:l,error:null===(r=null==o?void 0:o.error)||void 0===r?void 0:r.message,context:c,className:u,inputId:f,required:d.required,children:(0,n.jsx)(Ne.A,{classNamePrefix:"burst-select",onChange:function(e){d.onChange(e.value)},isLoading:y.isLoading,isSearchable:!0,name:"selectPage",cacheOptions:!0,defaultValue:i.value,defaultInputValue:i.value,defaultOptions:y.data||[],loadOptions:m,components:{Option:Ee},theme:function(e){return Ce(Ce({},e),{borderRadius:"var(--rsp-border-radius-input)",colors:Ce(Ce({},e.colors),{text:"orangered",primary25:"var(--rsp-green-faded)",primary:"var(--rsp-green)"})})},createOptionPosition:"none",styles:{control:function(e,t){return Ce(Ce({},e),{borderColor:t.isFocused?"var(--rsp-green)":"var(--rsp-input-border-color)"})}}})})}));var Ee=function(e){var t=e.innerProps,r=e.innerRef,a=e.data;return(0,n.jsxs)("article",Ce({ref:r},t,{className:"burst-select__custom-option",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h6",{className:"burst-select__title",children:a.label}),"Untitled"!==a.post_title&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:" - "}),(0,n.jsx)("p",{className:"burst-select__subtitle",children:a.post_title})]})]}),0<a.pageviews&&(0,n.jsxs)("div",{className:"burst-select__pageview-count",children:[(0,n.jsx)($.A,{name:"eye",size:12}),(0,n.jsx)("span",{children:(0,Se.ZV)(a.pageviews)})]})]}))},De=(0,a.forwardRef)((function(e,t){var r=e.inputId,a=e.options,i=e.value,o=e.disabled,s=void 0!==o&&o,l=e.goalId,c=e.onChange,u=(e.className,l?"".concat(l,"-").concat(r):r);return(0,n.jsx)("div",{className:"burst-radio-buttons__list grid grid-cols-2 gap-4",children:Object.keys(a).map((function(e){var t=a[e],r="".concat(u,"-").concat(t.type);return(0,n.jsxs)("div",{className:"burst-radio-buttons__list__item",children:[(0,n.jsx)("input",{type:"radio",checked:t.type===i,name:r,id:r,value:t.type,disabled:s,onChange:function(e){c(e.target.value)}}),(0,n.jsxs)("label",{htmlFor:r,children:[(0,n.jsx)($.A,{name:t.icon,size:18,color:"black",tooltip:"",onClick:function(){},className:""}),(0,n.jsx)("h5",{children:t.label}),t.description&&t.description.length>1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"burst-divider"}),(0,n.jsx)("p",{children:t.description})]})]})]},r)}))})}));De.displayName="RadioButtonsInput";const Fe=De;var Le=function(){return Le=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Le.apply(this,arguments)},Te=(0,a.forwardRef)((function(e,t){var r,a=e.field,i=e.fieldState,o=e.label,s=e.help,l=e.context,c=e.className,u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState","label","help","context","className"]),d=u.id||a.name;return(0,n.jsx)(j,{label:o,help:s,error:null===(r=null==i?void 0:i.error)||void 0===r?void 0:r.message,context:l,className:c,inputId:d,required:u.required,children:(0,n.jsx)(Fe,Le({id:d,options:a.options,value:a.value,disabled:u.settingsIsUpdating||a.disabled,goalId:a.goal_id},u))})}));Te.displayName="RadioButtonsField";const qe=Te,ze=function(e){var t=e.field,r=void 0===t?{}:t,i=e.goal,o=e.value,s=e.setGoalValue,l=(0,a.useState)(!1),c=l[0],u=l[1];(0,a.useEffect)((function(){f(r,o)}));var d=function(e){f(r,e),c&&("type"===r.id&&"visits"===e&&s(i.id,"page_or_website","page"),s(i.id,r.id,e))},f=function(e,t){var r=!0;e.required&&(r=0!==t.length),r&&"url"===e.type&&(r=!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)),u(r)},p="burst-"+r.type,b=r.disabled;return"hidden"===r.type||r.conditionallyDisabled?null:"text"===r.type||"url"===r.type?(0,n.jsxs)("div",{className:p,children:[r.parent_label&&(0,n.jsx)("div",{className:"burst-parent-label",children:(0,n.jsx)("label",{children:r.parent_label})}),c&&(0,n.jsx)($.A,{name:"success",color:"green"}),!c&&(0,n.jsx)($.A,{name:"times"}),(0,n.jsx)(O,{help:r.comment,placeholder:r.placeholder,label:r.label,onChange:function(e){return d(e.target.value)},value:o,disabled:b})]}):"radio-buttons"===r.type?(0,n.jsx)("div",{className:p,children:(0,n.jsx)(qe,{disabled:b,field:r,goalId:i.id,inputId:r.id,id:r.id,label:r.label,help:r.comment,value:i[r.id],onChange:function(e){return d(e)},className:"radio-buttons"})}):"hook"===r.type?(0,n.jsx)("div",{className:p,children:(0,n.jsx)(O,{disabled:b,field:r,goal:i,label:r.label,help:r.comment,value:i.hook,onChange:function(e){return d(e.target.value)}})}):"class-id"===r.type?(0,n.jsx)("div",{className:p,children:(0,n.jsx)(O,{disabled:b,field:r,goal:i,label:r.label,help:r.comment,value:i.selector,onChange:function(e){return d(e.target.value)}})}):"select-page"===r.type?(0,n.jsx)("div",{className:p,children:(0,n.jsx)(Ie,{disabled:b,field:r,goal_id:i.id,label:r.label,help:r.comment,value:!1===i.url||"*"===i.url?"":i.url,onChange:function(e){return d(e)}})}):void 0};function Ge(e){var t=e.value,r=(e.id,e.onChange),i=(0,a.useState)(t),o=i[0],s=i[1],l=(0,a.useState)(!1),c=l[0],u=l[1],d=(0,a.useRef)(null);return(0,a.useEffect)((function(){c&&d.current&&d.current.focus()}),[c]),(0,n.jsx)("div",{className:"burst-click-to-edit",children:c?(0,n.jsx)("input",{type:"text",value:o,onChange:function(e){e.preventDefault(),s(e.target.value)},onBlur:function(){return e=this,t=void 0,a=function(){return function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(e){switch(e.label){case 0:return u(!1),[4,r(o)];case 1:return e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function s(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}));var e,t,n,a},onKeyDown:function(e){" "===e.key&&(e.preventDefault(),s(e.target.value+" ")),"Enter"===e.key&&(e.preventDefault(),u(!1),r(o))},ref:d}):(0,n.jsx)(Oe.A,{content:(0,v.__)("Click to edit","burst-statistics"),children:(0,n.jsx)("h5",{className:"burst-tooltip-clicktoedit",tabIndex:"0",onClick:function(e){e.preventDefault(),u(!0)},onFocus:function(){u(!0)},children:""!==o?o:(0,n.jsx)("i",{children:(0,v.__)("Untitled goal","burst-statistics")})})})})}var Re=function(e){var t=e.goal;return(0,n.jsxs)(n.Fragment,{children:[(0,v.__)("Are you sure you want to delete this goal?","burst-statistics")+" "+(0,v.__)("This action cannot be undone.","burst-statistics"),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("strong",{children:[(0,v.__)("Goal name","burst-statistics"),":"]})," ",t.name,(0,n.jsx)("br",{}),(0,n.jsxs)("strong",{children:[(0,v.__)("Status","burst-statistics"),":"]})," ",t.status,(0,n.jsx)("br",{}),(0,n.jsxs)("strong",{children:[(0,v.__)("Date created","burst-statistics"),":"]})," ",(0,Se.BM)(t.dateCreated)]})},Ve=function(e){var t=e.deleteGoal,r=e.onClose,a=e.isDisabled;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Q.bm,{asChild:!0,"aria-label":"Close",children:(0,n.jsx)("button",{className:"burst-button burst-button--secondary",onClick:r,children:(0,v.__)("Cancel","burst-statistics")})}),(0,n.jsx)("button",{disabled:a,className:"burst-button burst-button--tertiary",onClick:function(){return t()},children:(0,v.__)("Delete goal","burst-statistics")})]})};const Me=function(e){var t=e.goal,r=e.deleteGoal,i=(0,a.useState)(!1),o=i[0],s=i[1],l=(0,a.useState)(!1),c=l[0],u=l[1],d=function(){s(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H,{isOpen:o,onClose:d,title:(0,v.__)("Delete goal","burst-statistics"),content:(0,n.jsx)(Re,{goal:t}),footer:(0,n.jsx)(Ve,{deleteGoal:function(){return e=void 0,t=void 0,a=function(){return function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(e){switch(e.label){case 0:return u(!0),[4,r()];case 1:return e.sent(),u(!1),s(!1),[2]}}))},new((n=void 0)||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function s(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}));var e,t,n,a},onClose:d,isDisabled:c})}),(0,n.jsx)("button",{className:"burst-button-icon burst-button-icon--delete",onClick:function(e){return function(e){e.preventDefault(),s(!0)}(e)},children:(0,n.jsx)($.A,{name:"trash",size:18})})]})};var Ue=function(){return Ue=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ue.apply(this,arguments)};const Be=function(e){var t=e.goal,r=e.goalFields,i=e.setGoalValue,o=e.deleteGoal,l=e.saveGoalTitle,c=(0,a.useState)("active"===t.status),u=c[0],d=c[1],f=(0,a.useMemo)((function(){if(!r||0===r.length)return[];var e=r.map((function(e){var r=Ue({},e);return r.value=t[r.id],r}));return(0,s.l)(e)}),[r,t]);return r?(0,n.jsx)("div",{className:"burst-settings-goals__list__item",children:(0,n.jsxs)("details",{children:[(0,n.jsxs)("summary",{children:[(0,n.jsx)($.A,{name:t.type&&f[1]&&f[1].options&&f[1].options[t.type]?f[1].options[t.type].icon:"eye",size:20}),(0,n.jsx)("span",{children:(0,n.jsx)(Ge,{value:t.title&&0<t.title.length?t.title:" ",id:t.id,defaultValue:(0,v.__)("New goal","burst-statistics"),onChange:function(e){i(t.id,"title",e),l(t.id,e)}})}),(0,n.jsx)(Me,{goal:{name:t.title&&0<t.title.length?t.title:" ",status:u?(0,v.__)("Active","burst-statistics"):(0,v.__)("Inactive","burst-statistics"),dateCreated:t&&void 0!==t.date_created&&1<t.date_created?t.date_created:1},deleteGoal:function(){o(t.id)}}),(0,n.jsx)(Oe.A,{content:u?(0,v.__)("Click to de-activate","burst-statistics"):(0,v.__)("Click to activate","burst-statistics"),children:(0,n.jsx)("span",{className:"burst-click-to-filter burst-goal-toggle",children:(0,n.jsx)(B,{size:"small",value:u,onChange:function(e){d(e),i(t.id,"status",e?"active":"inactive")}})})}),(0,n.jsx)($.A,{name:"chevron-down",size:18})]}),0<f.length&&f.map((function(e,r){return(0,n.jsx)(ze,{field:e,goal:t,value:e.value,setGoalValue:i},r)}))]})}):null};var Xe=r(3392),We=r(9823),Ke=r(7665),Qe=r(7097),$e=function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},He=function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const Ze=function(){var e=(0,Ke.jE)(),t=(0,ke.I)({queryKey:["settings_fields"],queryFn:function(){return $e(void 0,void 0,void 0,(function(){return He(this,(function(e){switch(e.label){case 0:return[4,(0,J.ww)()];case 1:return[2,e.sent().fields]}}))}))},staleTime:3e5,initialData:window.burst_settings&&window.burst_settings.fields,retry:0,select:function(e){return function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([],e,!0)}}),r=(0,Qe.n)({mutationFn:function(t){return $e(void 0,void 0,void 0,(function(){return He(this,(function(r){switch(r.label){case 0:return[4,(0,J.Ey)(t)];case 1:return r.sent(),[4,e.invalidateQueries(["settings_fields"])];case 2:return r.sent(),[2]}}))}))},onSuccess:function(){Z.toast.success("Settings saved")}}),n=r.mutateAsync,a=r.isLoading;return{settings:t.data,saveSettings:n,getValue:function(e){var r;return null===(r=t.data.find((function(t){return t.id===e})))||void 0===r?void 0:r.value},setValue:function(e,r){var n=t.data.find((function(t){return t.id===e}));n&&(n.value=r)},isSavingSettings:a,invalidateSettings:function(){return e.invalidateQueries(["settings_fields"])}}},Je=function(){var e=(0,s.A)(),t=e.goals,r=e.goalFields,i=e.predefinedGoals,o=e.addGoal,l=e.deleteGoal,c=e.updateGoal,u=e.addPredefinedGoal,d=e.setGoalValue,f=e.saveGoalTitle,p=(0,m.A)().isLicenseValid,b=(0,a.useState)(!1),h=b[0],y=b[1],g=(0,Ze().getValue)("enable_cookieless_tracking");console.log(p);var x=i&&0!==i.length?"":"burst-inactive";return(0,n.jsxs)("div",{className:"w-full p-6 box-border",children:[(0,n.jsxs)("p",{className:"text-base",children:[(0,v.__)("Goals are a great way to track your progress and keep you motivated.","burst-statistics"),!p&&" "+(0,v.__)("While free users can create one goal, Burst Pro lets you set unlimited goals to plan, measure, and achieve more.","burst-statistics")]}),(0,n.jsxs)("div",{className:"burst-settings-goals__list",children:[0<t.length&&t.map((function(e,t){return(0,n.jsx)(Be,{goal:e,goalFields:r,setGoalValue:d,deleteGoal:l,onUpdate:c,saveGoalTitle:f},t)})),(p||0===t.length)&&(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("button",{className:"burst-button burst-button--secondary",type:"button",onClick:o,children:(0,v.__)("Add goal","burst-statistics")}),i&&1<=i.length&&(0,n.jsxs)(We.bL,{open:h,onOpenChange:function(){y(!h)},children:[(0,n.jsxs)(We.l9,{type:"button",className:x+" burst-button burst-button--secondary",onClick:function(){y(!h)},children:[(0,v.__)("Add predefined goal","burst-statistics")," ",(0,n.jsx)($.A,{name:h?"chevron-up":"chevron-down",color:"gray"})]}),(0,n.jsx)(We.UC,{sideOffset:5,align:"end",className:"z-50 flex flex-col gap-2 bg-white rounded-lg p-2 border border-gray-400",children:i.map((function(e,t){return(0,n.jsxs)("div",{className:"hook"===e.type&&g?"flex gap-1 flex-row p-2 bg-gray-100 rounded-lg border border-gray-400 z-50 relative cursor-not-allowed pointer-events-none opacity-50":"flex gap-1 flex-row p-2 bg-gray-100 rounded-lg border border-gray-400 z-50 relative cursor-pointer",onClick:function(){return function(e){u(e.id,e.type,g),y(!1)}(e)},children:[(0,n.jsx)($.A,{name:"plus",size:18,color:"gray"}),e.title,"hook"===e.type&&(g?(0,n.jsx)($.A,{name:"error",color:"black",tooltip:(0,v.__)("Not available in combination with cookieless tracking","burst-statistics")}):null)]},t)}))})]}),(0,n.jsx)("div",{className:"ml-auto text-right",children:(0,n.jsx)("p",{className:"bg-gray-300 p-1 rounded-lg px-3 text-sm text-gray-500",children:p?(0,n.jsxs)(n.Fragment,{children:[" ",t.length," / ∞ "]}):(0,n.jsxs)(n.Fragment,{children:[t.length," / 1"]})})})]}),!burst_settings.is_pro&&(0,n.jsxs)("div",{className:"burst-settings-goals__upgrade",children:[(0,n.jsx)($.A,{name:"goals",size:24,color:"gray"}),(0,n.jsx)("h4",{children:(0,v.__)("Want more goals?","burst-statistics")}),(0,n.jsx)("div",{className:"burst-divider"}),(0,n.jsx)("p",{children:(0,v.__)("Upgrade to Burst Pro","burst-statistics")}),(0,n.jsx)("a",{href:(0,Xe.U)("/pricing/",{burst_source:"goals-setting",burst_content:"more-goals"}),target:"_blank",className:"burst-button burst-button--pro",children:(0,v.__)("Upgrade to Pro","burst-statistics")})]})]})]})};var Ye=function(){return Ye=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ye.apply(this,arguments)},et=(0,a.forwardRef)((function(e,t){var r=e.field,a=e.fieldState,i=e.label,o=e.help,s=(e.context,e.className),l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState","label","help","context","className"]),c=(0,Ke.jE)(),u=(0,m.A)(),d=u.setLicenseStatus,f=(u.isLicenseValid,u.licenseStatus),p=Ze().saveSettings,h=(0,ke.I)({queryKey:["licenseNotices"],queryFn:function(){return(0,J.Eo)("license_notices",{})}}),y=h.data,g=h.isLoading;y&&y.licenseStatus!==f&&d(y.licenseStatus);var x,w=i||(0,v.__)("Enter your license key","burst-statistics"),_=l.id||r.name,O=(0,Qe.n)({mutationFn:function(e){var t,n;return p("activate"===e?((t={})[r.name]=r.value,t):((n={})[r.name]="",n))},onSuccess:function(){c.invalidateQueries({queryKey:["licenseNotices"]})}}),N=O.mutate,k=O.isPending;return x=void 0===y||k?[{label:"loading",msg:"Loading..."}]:y.notices,function(){var e,i,c=(0,n.jsxs)(n.Fragment,{children:[(0,v.__)("Activating your license gives you automatic updates and support.","burst-statistics")," ",(0,n.jsx)("a",{href:"https://burst-statistics.com/how-to-install-burst-pro/",className:"underline",children:(0,v.__)("Having trouble? Check our installing guide","burst-statistics")})," ",(0,v.__)("or","burst-statistics")," ",(0,n.jsx)("a",{href:"https://burst-statistics.com/support",className:"underline",children:(0,v.__)("open a support ticket","burst-statistics")}),"."]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(j,{label:w,help:o,error:null===(e=null==a?void 0:a.error)||void 0===e?void 0:e.message,context:c,className:s,inputId:_,required:l.required,children:[(0,n.jsx)(b,Ye({id:_,"aria-invalid":!!(null===(i=null==a?void 0:a.error)||void 0===i?void 0:i.message),type:"password",placeholder:"XXXXXXXXXXXXXXXXXXXX"},r,l,{ref:t})),(0,n.jsxs)("div",{className:"flex flex-row gap-2 mt-2",children:[!g&&"valid"===y.licenseStatus&&(0,n.jsx)(q.A,{btnVariant:"tertiary",onClick:function(){return N("deactivate")},disabled:k,children:(0,v.__)("Deactivate License","burst-statistics")}),!g&&"valid"!==y.licenseStatus&&(0,n.jsx)(q.A,{btnVariant:"primary",onClick:function(){return N("activate")},disabled:k,children:(0,v.__)("Activate License","burst-statistics")}),k&&(0,n.jsx)($.A,{name:"loading",size:20})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 p-6",children:[(0,n.jsx)("h3",{className:"text-md font-medium text-black",children:(0,v.__)("License status","burst-statistics")}),!g&&x&&x.map((function(e,t){return(0,n.jsx)(rt,{notice:e},t)}))]})]})}()}));et.displayName="LicenseField";const tt=et;var rt=function(e){var t=e.notice,r={warning:"red",open:"blue",success:"green"}[t.icon]||"green";return(0,n.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,n.jsx)($.A,{name:"bullet",color:r}),(0,n.jsx)("p",{children:t.msg}),t.url&&(0,n.jsx)("a",{href:t.url,target:"_blank",children:(0,v.__)("More info","burst-statistics")})]})},nt=function(){return nt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},nt.apply(this,arguments)},at=(0,a.forwardRef)((function(e,t){var r,a,i=e.field,o=e.fieldState,s=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState","label","help","context","className"]),f=d.id||i.name;return(0,n.jsx)(j,{label:s,help:l,error:null===(r=null==o?void 0:o.error)||void 0===r?void 0:r.message,context:c,className:u,inputId:f,required:d.required,alignWithLabel:!0,children:(0,n.jsx)(de,nt({},i,{id:f,"aria-invalid":!!(null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.message),ref:t,value:i.value||"",onChange:function(e){return i.onChange(e)},options:d.options||[],disabled:d.disabled}))})}));at.displayName="SelectField";const it=at;var ot=function(){return ot=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ot.apply(this,arguments)},st=(0,a.forwardRef)((function(e,t){var r,a,i=e.field,o=e.fieldState,s=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState","label","help","context","className"]),f=d.id||i.name,p=""===i.value?void 0:i.value;return(0,n.jsx)(j,{label:s,help:l,error:null===(r=null==o?void 0:o.error)||void 0===r?void 0:r.message,context:c,className:u,inputId:f,required:d.required,children:(0,n.jsx)(b,ot({},i,{value:p,id:f,type:"number","aria-invalid":!!(null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.message),ref:t,min:d.min,max:d.max,step:d.step,placeholder:d.placeholder,disabled:d.disabled}))})}));st.displayName="NumberField";const lt=st;const ct=(0,a.forwardRef)((function(e){var t,r,a,i,o,s,l,c=e.field,u=e.fieldState,d=e.label,f=e.help,p=e.className,b=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["field","fieldState","label","help","className"]),h=burst_settings.plugin_url+"assets/img/burst-email-logo.png",y=(0,ke.I)({queryKey:["attachment",c.value],queryFn:function(){return e=void 0,t=void 0,n=function(){return function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(e){switch(e.label){case 0:return"0"===c.value||0===c.value?[3,2]:[4,wp.media.attachment(c.value).fetch()];case 1:return[2,e.sent()];case 2:return[2,null]}}))},new((r=void 0)||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}));var e,t,r,n}}),m=y.data,g=y.isLoading,x=(null===(r=null===(t=null==m?void 0:m.sizes)||void 0===t?void 0:t.medium)||void 0===r?void 0:r.url)||(null===(i=null===(a=null==m?void 0:m.sizes)||void 0===a?void 0:a.large)||void 0===i?void 0:i.url)||(null===(s=null===(o=null==m?void 0:m.sizes)||void 0===o?void 0:o.full)||void 0===s?void 0:s.url)||h;return(0,n.jsxs)(j,{label:d,help:f,className:p,error:u.error,pro:b.setting.pro,context:b.setting.context,children:[(0,n.jsx)("div",{className:"flex items-center justify-center bg-gray-100 rounded-md p-4 border-dashed border-2 border-gray-500 cursor-pointer max-w-72 max-h-24 ".concat(b.disabled?"opacity-50 disabled pointer-events-none":""),onClick:function(){b.disabled||(l||(l=wp.media({title:(0,v.__)("Select a logo","burst-statistics"),button:{text:(0,v.__)("Set logo","burst-statistics")},multiple:!1})).on("select",(function(){var e=l.state().get("selection").first(),t=e.id;(e.attributes.sizes.medium||e.attributes.sizes.thumbnail||e.attributes.sizes.full)&&c.onChange(t)})),l.open())},children:x&&!g?(0,n.jsx)("img",{src:x,alt:"Logo",className:"max-w-64 max-h-20"}):(0,n.jsx)($.A,{name:"loading",size:18})}),(0,n.jsx)(q.A,{btnVariant:"tertiary",size:"sm",className:"mt-2",onClick:function(){c.onChange(0)},disabled:b.disabled||0===c.value||"0"===c.value,children:(0,v.__)("Reset to Default","burst-statistics")})]})}));var ut=function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},dt=function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const ft=(0,Ae.v)((function(e,t){return{archivesLoaded:!1,fetching:!1,restoring:!1,progress:!1,archives:[],downloadUrl:"",fields:[],noData:!1,deleteArchives:function(r){return ut(void 0,void 0,void 0,(function(){var n,a;return dt(this,(function(i){switch(i.label){case 0:return n=t().archives.filter((function(e){return r.includes(e.id)})),e((function(e){return{archives:e.archives.filter((function(e){return!r.includes(e.id)}))}})),(a={}).archives=n,[4,Z.toast.promise((0,J.Eo)("delete_archives",a),{pending:(0,v.__)("Deleting...","burst-statistics"),success:(0,v.__)("Archives deleted successfully!","burst-statistics"),error:(0,v.__)("Failed to delete archive","burst-statistics")})];case 1:return i.sent(),[2]}}))}))},fetchData:function(){return ut(void 0,void 0,void 0,(function(){var r,n,a,i;return dt(this,(function(o){switch(o.label){case 0:return t().fetching?[2]:(e({fetching:!0}),r={},[4,(0,J.Eo)("get_archives",r).then((function(e){return e})).catch((function(e){console.error(e)}))]);case 1:return n=o.sent(),a=n.archives,i=n.downloadUrl,e((function(){return{archivesLoaded:!0,archives:a,downloadUrl:i,fetching:!1}})),[2]}}))}))},startRestoreArchives:function(t){return ut(void 0,void 0,void 0,(function(){return dt(this,(function(r){switch(r.label){case 0:return e({restoring:!0,progress:0}),e((function(e){return{archives:e.archives.map((function(e){return t.includes(e.id)&&(e.restoring=!0),e}))}})),[4,Z.toast.promise((0,J.Eo)("start_restore_archives",{archives:t}),{pending:(0,v.__)("Starting restore...","burst-statistics"),success:(0,v.__)("Restore successfully started!","burst-statistics"),error:(0,v.__)("Failed to start restore process.","burst-statistics")})];case 1:return r.sent(),[2]}}))}))},fetchRestoreArchivesProgress:function(){return ut(void 0,void 0,void 0,(function(){var r,n,a,i,o;return dt(this,(function(s){switch(s.label){case 0:return e({restoring:!0}),[4,(0,J.Eo)("get_restore_progress",{}).then((function(e){return e})).catch((function(e){console.error(e)}))];case 1:return r=s.sent(),n=r.progress,a=r.noData,i=!1,100>n&&(i=!0),e({progress:n,restoring:i,noData:a}),100===n&&(o=t().archives.filter((function(e){return!e.restoring})),e({archives:o})),[2]}}))}))}}}));var pt=function(){return pt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},pt.apply(this,arguments)},bt=function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},ht=function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},vt=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},yt=(0,a.forwardRef)((function(e){!function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}}(e,[]);var t=(0,a.useState)(""),r=t[0],i=t[1],o=(0,a.useState)([]),s=o[0],l=o[1],c=(0,a.useState)(!1),u=c[0],d=c[1],f=(0,a.useState)({}),p=f[0],b=f[1],h=(0,a.useState)(!1),y=h[0],m=h[1],g=(0,a.useState)(!1),x=g[0],j=g[1],w=(0,a.useState)("title"),_=w[0],O=w[1],N=(0,a.useState)("asc"),k=N[0],S=N[1],A=ft((function(e){return e.archives})),P=ft((function(e){return e.archivesLoaded})),C=(ft((function(e){return e.fetching})),ft((function(e){return e.fetchData}))),I=ft((function(e){return e.deleteArchives})),E=ft((function(e){return e.downloadUrl})),D=ft((function(e){return e.startRestoreArchives})),F=ft((function(e){return e.fetchRestoreArchivesProgress})),L=ft((function(e){return e.restoring})),T=ft((function(e){return e.progress}));(0,a.useEffect)((function(){F()}),[]),(0,a.useEffect)((function(){P||C()}),[P]);var q=function(e){var t=vt([],e,!0);return(t=z(t,_,k)).filter((function(e){return e.title.toLowerCase().includes(r.toLowerCase())}))},z=function(e,t,r){if(0===e.length)return e;var n="asc"===r?1:-1;r!==k&&S(r);var a=function(e){var t=e.split(" "),r=t[0],n=t[1];return parseFloat(r)*{B:1,KB:1024,MB:1048576}[n]};return-1!==t.toString().indexOf("title")&&"title"!==_?O("title"):-1!==t.toString().indexOf("size")&&"size"!==_&&O("size"),"title"===_?e.sort((function(e,t){var r=e.id.replace(".zip","").split("-").map(Number),a=r[0],i=r[1],o=t.id.replace(".zip","").split("-").map(Number),s=o[0],l=o[1];return a!==s?n*(a-s):n*(i-l)})):"size"===_&&e.sort((function(e,t){var r=a(e.size),i=a(t.size);return n*(r-i)})),e},G=[{name:(0,n.jsx)("input",{type:"checkbox",className:y?"burst-indeterminate":"",checked:x,onChange:function(e){return function(e){if(e){j(!0);var t=p.currentPage?p.currentPage:1,r=q(A).slice(10*(t-1),10*t);l(r.map((function(e){return e.id})))}else j(!1),l([]);m(!1)}(e.target.checked)}}),selector:function(e){return e.selectControl},grow:1},{name:(0,v.__)("Archive","burst-statistics"),selector:function(e){return e.title},sortable:!0,grow:6},{name:(0,v.__)("Size","burst-statistics"),selector:function(e){return e.size},sortable:!0,grow:2,right:1}],R=q(A),V=[];R.forEach((function(e){var t=pt({},e);t.selectControl=(0,n.jsx)("input",{type:"checkbox",disabled:t.restoring||L,checked:s.includes(t.id),onChange:function(e){return function(e,t){var r=vt([],s,!0);e?r.includes(t)||(r.push(t),l(r)):(r=vt([],s.filter((function(e){return e!==t})),!0),l(r));var n=p.currentPage?p.currentPage:1,a=q(A).slice(10*(n-1),10*n),i=!0,o=!1;a.forEach((function(e){r.includes(e.id)?o=!0:i=!1})),i?(j(!0),m(!1)):o?(j(!1),m(!0)):m(!1)}(e.target.checked,t.id)}}),V.push(t)}));var M=1<s.length;if(!M&&1===s.length){var U=A.filter((function(e){return s.includes(e.id)}));M=U.hasOwnProperty(0)&&""!==U[0].download_url}return(0,n.jsxs)("div",{className:"w-full p-6",children:[(0,n.jsx)("div",{className:"burst-table-header",children:(0,n.jsx)("div",{className:"burst-table-header-controls",children:(0,n.jsx)("input",{className:"burst-datatable-search",type:"text",placeholder:(0,v.__)("Search","burst-statistics"),value:r,onChange:function(e){return i(e.target.value)}})})}),0<s.length&&(0,n.jsxs)("div",{className:"burst-selected-archive",children:[1<s.length&&(0,v.__)("%s items selected","burst-statistics").replace("%s",s.length),1===s.length&&(0,v.__)("1 item selected","burst-statistics"),(0,n.jsxs)("div",{className:"burst-selected-archive-controls",children:[M&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("button",{disabled:u||T&&100>T,className:"burst-button burst-button--secondary",onClick:function(){return bt(void 0,void 0,void 0,(function(){var e,t;return ht(this,(function(r){switch(r.label){case 0:return e=A.filter((function(e){return s.includes(e.id)})),d(!0),t=function(){return bt(void 0,void 0,void 0,(function(){var r,n,a,i;return ht(this,(function(o){switch(o.label){case 0:if(!(0<e.length))return[3,5];r=e.shift(),n=E+r.id,o.label=1;case 1:return o.trys.push([1,3,,4]),(a=new XMLHttpRequest).responseType="blob",a.open("get",n,!0),a.send(),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=window.URL.createObjectURL(this.response),n=window.document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",r.title),window.document.body.appendChild(n),n.click(),l(e),d(!1),setTimeout((function(){window.URL.revokeObjectURL(t)}),6e4)}},[4,t()];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),console.error(i),d(!1),[3,4];case 4:return[3,6];case 5:d(!1),o.label=6;case 6:return[2]}}))}))},[4,t()];case 1:return r.sent(),[2]}}))}))},children:[(0,v.__)("Download","burst-statistics"),u&&(0,n.jsx)($.A,{name:"loading",color:"gray"})]})}),(0,n.jsxs)("button",{disabled:T&&100>T,className:"burst-button burst-button--primary",onClick:function(){return e=s,bt(void 0,void 0,void 0,(function(){return ht(this,(function(t){switch(t.label){case 0:return l([]),[4,D(e)];case 1:return t.sent(),addHelpNotice("archive_data","warning",(0,v.__)("Because restoring files can conflict with the archiving functionality, archiving has been disabled.","burst-statistics"),(0,v.__)("Archiving disabled","burst-statistics")),[2]}}))}));var e},children:[(0,v.__)("Restore","burst-statistics"),100>T&&(0,n.jsx)($.A,{name:"loading",color:"gray"})]}),(0,n.jsx)("button",{disabled:T&&100>T,className:"burst-button burst-button--tertiary",onClick:function(){return e=s,bt(void 0,void 0,void 0,(function(){return ht(this,(function(t){switch(t.label){case 0:return l([]),[4,I(e)];case 1:return t.sent(),[2]}}))}));var e},children:(0,v.__)("Delete","burst-statistics")})]})]}),0<T&&100>T&&(0,n.jsx)("div",{className:"burst-selected-archive",children:(0,v.__)("Restore in progress, %s complete","burst-statistics").replace("%s",T+"%")}),pe.Ay&&(0,n.jsx)(pe.Ay,{columns:G,data:V,dense:!0,paginationPerPage:10,onChangePage:function(e){b(pt(pt({},p),{currentPage:e}))},paginationState:p,persistTableHead:!0,defaultSortFieldId:2,pagination:!0,paginationRowsPerPageOptions:[10,25,50],paginationComponentOptions:{rowsPerPageText:"",rangeSeparatorText:(0,v.__)("of","burst-statistics"),noRowsPerPage:!1,selectAllRowsItem:!0,selectAllRowsItemText:(0,v.__)("All","burst-statistics")},noDataComponent:(0,n.jsx)("div",{className:"burst-no-archives",children:(0,v.__)("No archives","burst-statistics")}),sortFunction:z})]})})),mt=function(){return mt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},mt.apply(this,arguments)},gt={text:O,number:lt,api:C,hidden:C,checkbox:K,textarea:T,ip_blocklist:R,button:ie,email_reports:ye,checkbox_group:_e,goals:Je,license:tt,select:it,logo_editor:ct,restore_archives:yt},xt=(0,a.memo)((function(e){var t,r=e.setting,i=e.control,s=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["setting","control"]),l=(0,m.A)().isLicenseValid;if("goals"===r.type)return(0,n.jsx)(o.A,{children:(0,n.jsx)(Je,{})});var c=gt[r.type];if(!c)return(0,n.jsxs)("div",{className:"w-full",children:["Unknown field type: ",r.type," ",r.id]});var u={};r.react_conditions&&Object.keys(r.react_conditions).forEach((function(e){var t;u[e]=(0,d.FH)({control:i,name:e,defaultValue:null===(t=s.defaultValues)||void 0===t?void 0:t[e]})}));var f=(0,a.useMemo)((function(){return!r.react_conditions||0===Object.keys(u).length||Object.entries(r.react_conditions).every((function(e){var t=e[0],r=e[1],n=u[t];return!!Array.isArray(r)&&r.includes(n)}))}),[r.react_conditions,u]),p=mt(mt(mt(mt(mt(mt(mt({},r.required&&{required:{value:!0,message:r.requiredMessage||(0,v.__)("This field is required","burst-statistics")}}),(null===(t=r.validation)||void 0===t?void 0:t.regex)&&{pattern:{value:new RegExp(r.validation.regex),message:r.validation.message||(0,v.__)("Invalid format","burst-statistics")}}),function(){var e;return"ip_blocklist"===r.type?{validate:{validIps:function(e){if(!e)return!0;var t=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,r=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n").filter((function(e){return""!==e.trim()})).map((function(e){return e.trim()}));if(0===r.length)return!0;var n=r.filter((function(e){return!t.test(e)}));return 0===n.length||(0,v.__)("Invalid IP address format: ","burst-statistics")+n.join(", ")},noDuplicates:function(e){if(!e)return!0;var t=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n").filter((function(e){return""!==e.trim()})).map((function(e){return e.trim()}));if(0===t.length)return!0;if(new Set(t).size!==t.length){var r={};t.forEach((function(e){r[e]=(r[e]||0)+1}));var n=Object.keys(r).filter((function(e){return r[e]>1}));return(0,v.__)("Duplicate IP addresses found: ","burst-statistics")+n.join(", ")}return!0}}}:(null===(e=r.validation)||void 0===e?void 0:e.validate)?{validate:r.validation.validate}:{}}()),r.min&&{min:r.min}),r.max&&{max:r.max}),r.minLength&&{minLength:r.minLength}),r.maxLength&&{maxLength:r.maxLength}),b=(0,a.useMemo)((function(){return!!r.disabled||!(!r.pro||l)||s.settingsIsUpdating}),[r.disabled,s.settingsIsUpdating]);return f?(0,n.jsx)(o.A,{children:(0,n.jsx)(d.xI,{name:r.id,control:i,rules:p,defaultValue:r.value||r.default,render:function(e){var t=e.field,a=e.fieldState;return(0,n.jsx)(c,mt({field:t,fieldState:a,control:i,required:r.required,label:r.label||r.id,disabled:b,context:r.context,help:r.help,options:r.options,setting:r},s))}})}):null}));xt.displayName="Field";const jt=xt;var wt=r(84),_t=(0,a.memo)((function(e){var t=e.group,r=e.fields,a=e.control,i=e.isLastGroup?"rounded-b-none":"mb-5",s=r.filter((function(e){return e.group_id===t.id})),d=(0,m.A)().isLicenseValid;return(0,n.jsxs)(l.A,{className:i,children:[t.pro&&!d&&(0,n.jsx)(wt.A,{className:"backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("h4",{children:(0,v.__)("Unlock Advanced Features with Burst Pro","burst-statistics")}),(0,n.jsxs)("p",{children:[(0,v.__)("This setting is exclusive to Pro users.","burst-statistics"),t.pro&&t.pro.text&&" "+t.pro.text]}),t.pro.url&&(0,n.jsx)(q.A,{to:t.pro.url,btnVariant:"primary",btnSize:"small",children:(0,v.__)("Upgrade to Pro","burst-statistics")})]})}),(0,n.jsx)(c.A,{title:t.title,className:"burst-settings-group-block"}),(0,n.jsxs)(u.A,{className:"p-0 pb-4",children:[t.description&&(0,n.jsx)("h3",{className:"mb-5 text-sm",children:t.description}),(0,n.jsx)("div",{className:"flex flex-wrap",children:s.map((function(e,t){return(0,n.jsx)(o.A,{fallback:"Could not load field",children:(0,n.jsx)(jt,{index:t,setting:e,control:a},t)},t)}))})]})]},t.id)}));_t.displayName="SettingsGroupBlock";const Ot=_t;var Nt=function(){var e=(0,a.useState)(0),t=e[0],r=e[1],i=(0,a.useState)(!1),o=i[0],s=i[1],l=(0,a.useCallback)((function(){var e=document.documentElement.scrollHeight-window.innerHeight;0<e?(r(Math.round(window.scrollY/e*100)),s(!0)):s(!1)}),[]);return(0,a.useEffect)((function(){l();var e=["scroll","resize","load"];e.forEach((function(e){return window.addEventListener(e,l)}));var t=new MutationObserver(l);return t.observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1}),function(){e.forEach((function(e){return window.removeEventListener(e,l)})),t.disconnect()}}),[l]),o?(0,n.jsx)("div",{className:"h-1 w-full bg-gray-400",children:(0,n.jsx)("div",{className:"h-full bg-blue transition-all duration-300 ease-out",style:{width:"".concat(10+Math.min(t,90),"%")}})}):null};Nt.displayName="FormScrollProgressLine";const kt=Nt;function St(e){var t=e.onSubmit,r=e.control,a=(0,d.lN)({control:r}),i=a.isDirty,o=a.isSubmitting,s=a.isValidating,l=[{condition:o,message:(0,v.__)("Saving...","burst-statistics"),color:"black"},{condition:s,message:(0,v.__)("Validating...","burst-statistics"),color:"black"},{condition:i,message:(0,v.__)("You have unsaved changes","burst-statistics"),color:"black"}].find((function(e){return e.condition}));return(0,n.jsxs)("div",{className:"sticky bottom-0 start-0 z-10 rounded-b-md bg-gray-100 border-t border-gray-200 shadow-[0_-8px_15px_-3px_rgba(0,0,0,0.05),0_4px_6px_-2px_rgba(0,0,0,0.05)]",children:[(0,n.jsx)(kt,{}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2 p-5",children:[(null==l?void 0:l.message)&&(0,n.jsx)("div",{className:"flex gap-2 items-center py-1 px-2 rounded-md transition-opacity duration-150"+((null==l?void 0:l.message)?" opacity-100":" opacity-0")+("red"===(null==l?void 0:l.color)?" bg-red-light border border-red":""),children:(0,n.jsx)("span",{className:"text-sm"+("red"===(null==l?void 0:l.color)?" font-semibold text-red":" italic text-gray-900"),children:null==l?void 0:l.message})}),(0,n.jsx)(q.A,{className:"",onClick:t,children:(0,v.__)("Save","burst-statistics")})]})]})}St.displayName="FormFooter";const At=St,Pt=function(e){var t,r=e.currentSettingPage,i=Ze(),l=i.settings,c=i.saveSettings,u=(0,s.A)().saveGoals,f=r.id,p=(0,a.useMemo)((function(){return Ct(l,f)}),[l,f]),b=(0,a.useMemo)((function(){return Ct(l,f,"value")}),[l,f]),h=(0,a.useMemo)((function(){var e,t;return(null===(e=null==r?void 0:r.groups)||void 0===e?void 0:e[(null===(t=null==r?void 0:r.groups)||void 0===t?void 0:t.length)-1])||null}),[null==r?void 0:r.groups]),v=(0,d.mN)({defaultValues:p,values:b}),y=v.handleSubmit,m=v.control,g=v.formState.dirtyFields,x=function(e,t,r){var n=e.filter((function(e){return e.menu_id===t}));return n.forEach((function(e){if(e.react_conditions){var t=Object.entries(e.react_conditions).every((function(e){var t=e[0],n=e[1],a=r[t];return n.includes(a)}));t||(e.visible=!0)}})),n}(l,f,b);return(0,n.jsx)("form",{children:(0,n.jsxs)(o.A,{fallback:"Could not load Settings",children:[null===(t=r.groups)||void 0===t?void 0:t.map((function(e){var t=h.id===e.id,r=x.filter((function(t){return t.group_id===e.id}));return(0,n.jsx)(Ot,{group:e,fields:r,control:m,isLastGroup:t},e.id)})),"license"!==f&&(0,n.jsx)(At,{onSubmit:y((function(e){var t=Object.keys(g).reduce((function(t,r){return t[r]=e[r],t}),{});c(t),u()})),control:m})]})})};var Ct=function(e,t,r){void 0===r&&(r="default");var n={};return e.forEach((function(e){e.menu_id===t&&(n[e.id]=e[r])})),n},It=r(9681),Et=(0,a.memo)((function(e){var t=e.className,r=void 0===t?"":t,a=e.children,i=e.title,o=e.isOpen,s=e.onToggle;return(0,n.jsx)(l.A,{className:r,children:(0,n.jsxs)("details",{className:"group",open:o,onToggle:function(e){return s(e.currentTarget.open)},children:[(0,n.jsxs)("summary",{className:"hover:bg-gray-50 flex cursor-pointer items-center justify-between p-4",children:[(0,n.jsx)("span",{className:"text-gray-900 text-base font-medium",children:i}),(0,n.jsx)("svg",{className:"text-gray-500 h-5 w-5 transition-transform group-open:rotate-180",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})]}),(0,n.jsx)("div",{className:"p-4 pt-0",children:a})]})})}));Et.displayName="CollapsableBlock";const Dt=Et;var Ft=function(e){var t=e.settingsGroup,r=Ze().settings.filter((function(e){return e.notice&&e.menu_id===t.id})),i=(0,a.useState)(r.map((function(){return!1}))),o=i[0],s=i[1];if(!r.length)return null;var l=o.filter((function(e){return e})).length>r.length/2?(0,v.__)("Collapse all","burst-statistics"):(0,v.__)("Expand all","burst-statistics");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between  w-full",children:[(0,n.jsx)("h2",{className:"py-4 text-base font-bold",children:(0,v.__)("Notifications","burst-statistics")}),(0,n.jsx)("button",{className:"text-gray-500 cursor-pointer text-sm underline",onClick:function(){var e=o.filter((function(e){return e})).length<=r.length/2;s(r.map((function(){return e})))},children:l})]}),0<r.length&&r.map((function(e,t){return(0,n.jsx)(Dt,{title:e.notice.title,className:"mb-4 w-full flex-1 !bg-accent-light",isOpen:o[t],onToggle:function(e){return function(e,t){s((function(r){var n=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([],r,!0);return n[e]=t,n}))}(t,e)},children:(0,n.jsxs)("div",{className:"flex flex-col justify-start",children:[(0,n.jsx)("p",{className:"font-normal text-base",children:e.notice.description}),(0,n.jsx)(It.N_,{className:"text-gray-500 mt-2 text-base underline",to:e.notice.url,from:"/",children:(0,v.__)("Learn more","burst-statistics")})]})},t)}))]})};Ft.displayName="SettingsNotices";const Lt=Ft;var Tt=r(9089),qt=function(){var e=Tt.q.useLoaderData().currentItem;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"col-span-12 lg:col-span-6 flex flex-col",children:(0,n.jsx)(Pt,{currentSettingPage:e})}),(0,n.jsx)("div",{className:"col-span-12 lg:col-span-3",children:(0,n.jsx)(Lt,{settingsGroup:e})})]})}},84:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(4848);const a=function(e){var t=e.children,r=e.className,a=void 0===r?"":r;return(0,n.jsx)("div",{className:"absolute inset-0 flex items-end justify-center bg-black/10 z-50 py-4 px-4 ".concat(a),children:(0,n.jsx)("div",{className:"bg-white rounded-lg px-5 py-3  w-[90%] max-w-md relative shadow-md",children:t})})}},900:(e,t,r)=>{r.d(t,{BM:()=>x,Ee:()=>O,Nj:()=>y,YP:()=>C,ZV:()=>_,cA:()=>A,cf:()=>P,fU:()=>w,fs:()=>m,gs:()=>v,ii:()=>k,oI:()=>g,qQ:()=>N,vd:()=>j});var n=r(8443),a=r(1127),i=r(6212),o=r(2998),s=r(543),l=r(2118),c=r(9312),u=r(7054),d=r(9317),f=r(3039),p=r(2346),b=r(1810),h=r(7723),v=function(e,t){if(void 0===t&&(t=new Date),"number"==typeof e&&(e=new Date(1e3*e)),!(e instanceof Date))return"-";var r={year:31536e6,month:2628e6,day:864e5,hour:36e5,minute:6e4,second:1e3},n=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),a=e-t;for(var i in r)if(Math.abs(a)>r[i]||"second"===i)return n.format(Math.round(a/r[i]),i)},y=function(e,t,r){void 0===r&&(r=!0);var n=(e=Number(e))/(t=Number(t));return isNaN(n)&&(n=0),r?new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1}).format(n):n};function m(e,t){var r={},n=((e=Number(e))-(t=Number(t)))/t;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}function g(e,t){var r={},n=((e=Number(e))-(t=Number(t)))/100;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}var x=function(e){return(0,n.dateI18n)(burst_settings.date_format,new Date(1e3*e))},j=function(e){return e&&("number"==typeof e||Date.parse(e)>=16409952e5)};function w(e){void 0===e&&(e=0);var t=Number(e);isNaN(t)&&(t=0);var r=Math.floor(t/1e3),n=Math.floor(r/3600),a=Math.floor((r-3600*n)/60);return[n,a,r-3600*n-60*a].map((function(e){return isNaN(e)?"00":String(e).padStart(2,"0")})).join(":")}function _(e,t){return void 0===t&&(t=1),e=Number(e),isNaN(e)&&(e=0),new Intl.NumberFormat(void 0,{style:"decimal",notation:"compact",compactDisplay:"short",maximumFractionDigits:t}).format(e)}function O(e,t){return void 0===t&&(t=1),e=Number(e)/100,isNaN(e)&&(e=0),new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:t}).format(e)}function N(e){return e&&burst_settings.countries[e.toUpperCase()]||(0,h.__)("Unknown","burst-statistics")}function k(e){void 0===e&&(e=new Date);var t=-60*e.getTimezoneOffset(),r=Math.floor(e.getTime()/1e3)+3600*burst_settings.gmt_offset-t;return new Date(1e3*r)}var S=k(),A={today:{label:(0,h.__)("Today","burst-statistics"),range:function(){return{startDate:(0,a.default)(S),endDate:(0,i.default)(S)}}},yesterday:{label:(0,h.__)("Yesterday","burst-statistics"),range:function(){return{startDate:(0,a.default)((0,o.default)(S,-1)),endDate:(0,i.default)((0,o.default)(S,-1))}}},"last-7-days":{label:(0,h.__)("Last 7 days","burst-statistics"),range:function(){return{startDate:(0,a.default)((0,o.default)(S,-7)),endDate:(0,i.default)((0,o.default)(S,-1))}}},"last-30-days":{label:(0,h.__)("Last 30 days","burst-statistics"),range:function(){return{startDate:(0,a.default)((0,o.default)(S,-30)),endDate:(0,i.default)((0,o.default)(S,-1))}}},"last-90-days":{label:(0,h.__)("Last 90 days","burst-statistics"),range:function(){return{startDate:(0,a.default)((0,o.default)(S,-90)),endDate:(0,i.default)((0,o.default)(S,-1))}}},"last-month":{label:(0,h.__)("Last month","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,l.default)(S,-1)),endDate:(0,c.default)((0,l.default)(S,-1))}}},"week-to-date":{label:(0,h.__)("Week to date","burst-statistics"),range:function(){return{startDate:(0,a.default)((0,o.default)(S,-S.getDay())),endDate:(0,i.default)(S)}}},"month-to-date":{label:(0,h.__)("Month to date","burst-statistics"),range:function(){return{startDate:(0,s.default)(S),endDate:(0,i.default)(S)}}},"year-to-date":{label:(0,h.__)("Year to date","burst-statistics"),range:function(){return{startDate:(0,u.A)(S),endDate:(0,i.default)(S)}}},"last-year":{label:(0,h.__)("Last year","burst-statistics"),range:function(){return{startDate:(0,u.A)((0,d.default)(S,-1)),endDate:(0,f.A)((0,d.default)(S,-1))}}}},P=function(e){return Object.values(e).filter(Boolean).map((function(e){var t=A[e];return t.isSelected=I,t}))},C=function(e,t){var r="MMMM d, yyyy";return{startDate:e?(0,p.default)(new Date(e),r):"",endDate:t?(0,p.default)(new Date(t),r):""}};function I(e){var t=this.range();return(0,b.default)(e.startDate,t.startDate)&&(0,b.default)(e.endDate,t.endDate)}},3101:(e,t,r)=>{r.d(t,{A:()=>b,l:()=>p});var n=r(7665),a=r(8069),i=r(7097),o=r(6275),s=r(5446),l=r(7723),c=r(1932),u=function(){return u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},u.apply(this,arguments)},d=function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},f=function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},p=function(e){return e.map((function(t){var r=u({},t);if(t.react_conditions){var n=function(e,t){return!e||0===Object.keys(e).length||Object.entries(e).some((function(e){var r=e[0],n=e[1],a=t.find((function(e){return e.id===r}));if(!a)return!1;var i=a.value;return!!i&&n.includes(i)}))}(t.react_conditions,e);"disable"===t.condition_action?r.disabled=!n:r.conditionallyDisabled=!n}return r}))};const b=function(){var e,t,r,p=(0,n.jE)(),b=(0,a.I)({queryKey:["goals_data"],queryFn:function(){return d(void 0,void 0,void 0,(function(){var e;return f(this,(function(t){switch(t.label){case 0:return[4,(0,o.DX)()];case 1:return[2,{goals:(e=t.sent()).goals||[],predefinedGoals:e.predefinedGoals||[],goalFields:Object.values(e.goalFields||{})}]}}))}))},retry:1}),h=(0,i.n)({mutationFn:function(){return d(void 0,void 0,void 0,(function(){var e,t;return f(this,(function(r){switch(r.label){case 0:return e=(null===(t=p.getQueryData(["goals_data"]))||void 0===t?void 0:t.goals)||[],[4,(0,o.d2)({goals:e})];case 1:return[2,r.sent()]}}))}))},onSuccess:function(){},onError:function(e){console.error(e),s.toast.error((0,l.__)("Failed to save goals","burst-statistics"))}}),v=(0,i.n)({mutationFn:function(e){return d(void 0,[e],void 0,(function(e){var t,r=e.id,n=e.value;return f(this,(function(e){switch(e.label){case 0:return t=[{id:r,title:n}],[4,(0,o.d2)({goals:t})];case 1:return[2,e.sent()]}}))}))},onError:function(e){console.error(e),s.toast.error((0,l.__)("Failed to save goal title","burst-statistics"))}}),y=(0,i.n)({mutationFn:function(){return d(void 0,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,(0,o.D)()];case 1:return[2,e.sent()]}}))}))},onSuccess:function(e){p.setQueryData(["goals_data"],(function(t){return t?(0,c.jM)(t,(function(t){t.goals.push(e.goal)})):t})),s.toast.success((0,l.__)("Goal added successfully!","burst-statistics"))},onError:function(e){console.error(e),s.toast.error((0,l.__)("Failed to add goal","burst-statistics"))}}),m=(0,i.n)({mutationFn:function(e){return d(void 0,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,(0,o.$x)(e)];case 1:return[2,t.sent()]}}))}))},onSuccess:function(e,t){e.deleted&&(p.setQueryData(["goals_data"],(function(e){return e?(0,c.jM)(e,(function(e){if(1===e.goals.length)e.goals=[];else{var r=e.goals.findIndex((function(e){return e.id===t}));-1!==r&&e.goals.splice(r,1)}})):e})),s.toast.success((0,l.__)("Goal deleted successfully!","burst-statistics")))},onError:function(e){console.error(e),s.toast.error((0,l.__)("Failed to delete goal","burst-statistics"))}}),g=(0,i.n)({mutationFn:function(e){return d(void 0,[e],void 0,(function(e){var t=e.predefinedGoalId,r=e.type,n=e.cookieless;return f(this,(function(e){switch(e.label){case 0:if("hook"===r&&n)throw new Error((0,l.__)("Cannot add server side goals in combination with cookieless tracking","burst-statistics"));if(!burst_settings.is_pro)throw new Error((0,l.__)("Predefined goals are a premium feature.","burst-statistics"));return[4,(0,o.ZI)(t)];case 1:return[2,e.sent()]}}))}))},onSuccess:function(e){p.setQueryData(["goals_data"],(function(t){return t?(0,c.jM)(t,(function(t){t.goals.push(e.goal)})):t})),s.toast.success((0,l.__)("Successfully added predefined goal!","burst-statistics"))},onError:function(e){console.error(e),s.toast.error(e.message||(0,l.__)("Failed to add predefined goal","burst-statistics"))}});return{goals:(null===(e=b.data)||void 0===e?void 0:e.goals)||[],goalFields:(null===(t=b.data)||void 0===t?void 0:t.goalFields)||[],predefinedGoals:(null===(r=b.data)||void 0===r?void 0:r.predefinedGoals)||[],isLoading:b.isLoading,isError:b.isError,getGoal:function(e){var t,r=(null===(t=b.data)||void 0===t?void 0:t.goals)||[];if(!Array.isArray(r))return!1;var n=r.findIndex((function(t){return t.id==e}));return-1!==n&&r[n]},setGoalValue:function(e,t,r){p.setQueryData(["goals_data"],(function(n){return n?(0,c.jM)(n,(function(n){var a=n.goals.findIndex((function(t){return t.id===e}));-1!==a&&(n.goals[a][t]=r)})):n}))},updateGoal:function(e,t){p.setQueryData(["goals_data"],(function(r){return r?(0,c.jM)(r,(function(r){var n=r.goals.findIndex((function(t){return t.id===e}));-1!==n&&(r.goals[n]=u(u({},r.goals[n]),t))})):r}))},saveGoals:h.mutateAsync,saveGoalTitle:function(e,t){return v.mutateAsync({id:e,value:t})},addGoal:y.mutateAsync,deleteGoal:m.mutateAsync,addPredefinedGoal:function(e,t,r){return g.mutateAsync({predefinedGoalId:e,type:t,cookieless:r})},invalidateGoals:function(){return p.invalidateQueries(["goals_data"])}}}},3933:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(4848),a=r(1609),i=r(4164),o=function(e){var t=e.children,r=e.className,a=void 0===r?"":r,o=/\bp-\S+/.test(a);return(0,n.jsx)("div",{className:(0,i.A)("flex-grow",{"p-6":!o},a),children:t})};o.displayName="BlockContent";const s=(0,a.memo)(o)},4280:(e,t,r)=>{r.d(t,{A:()=>n});const n=(0,r(1511).v)((function(e,t){return{licenseStatus:burst_settings.licenseStatus,setLicenseStatus:function(t){e({licenseStatus:t})},get isLicenseValid(){return console.log(t().licenseStatus),console.log(burst_settings.is_pro),"valid"===t().licenseStatus&&"1"===burst_settings.is_pro}}}))},4301:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(4848),a=(r(1609),r(3881));const i=function(e){var t=e.children,r=e.content,i=e.delayDuration,o=void 0===i?400:i;return r?(0,n.jsx)(a.Kq,{children:(0,n.jsxs)(a.bL,{delayDuration:o,children:[(0,n.jsx)(a.l9,{asChild:!0,children:t}),(0,n.jsx)(a.ZL,{children:(0,n.jsxs)(a.UC,{className:"burst-tooltip-content",sideOffset:5,children:[r,(0,n.jsx)(a.i3,{className:"burst-tooltip-arrow"})]})})]})}):(0,n.jsx)(n.Fragment,{children:t})}},6275:(e,t,r)=>{r.d(t,{$x:()=>O,D:()=>N,DX:()=>_,Eo:()=>S,Ey:()=>j,K5:()=>P,Lg:()=>C,ZB:()=>I,ZI:()=>k,bQ:()=>A,d2:()=>w,qN:()=>g,ww:()=>x});var n=r(4848),a=r(1455),i=r.n(a),o=r(7723),s=r(5446),l=function(){return l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)},c=function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},d=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},f=function(){return-1!==burst_settings.site_url.indexOf("?")?"&":"?"},p=function(){return"nonce="+burst_settings.burst_nonce+"&token="+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)},b=function(e,t){void 0===t&&(t=!1);var r=(0,o.__)("Server error","burst-statistics");if(e=e.replace(/(<([^>]+)>)/gi,""),t){var a=t.split("?")[0].split("/"),i=a.indexOf("v1")+1;r=(0,o.__)("Server error in","burst-statistics")+" "+a[i]+"/"+a[i+1]}r+=": "+e;var l=(0,n.jsx)("div",{title:(0,o.__)("Click to copy","burst-statistics"),onClick:function(){navigator.clipboard.writeText(r),s.toast.success((0,o.__)("Error copied to clipboard","burst-statistics"))},children:r});s.toast.error(l,{autoClose:15e3})},h=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return c(void 0,d([e],t,!0),void 0,(function(e,t,r){var n;return void 0===t&&(t="GET"),void 0===r&&(r={}),u(this,(function(a){return n={path:e,method:t},"POST"===t&&(r.nonce=burst_settings.burst_nonce,n.data=r),[2,i()(n).then((function(e){if(!e.request_success)throw new Error("invalid data error");if(e.code)throw new Error(e.message);return delete e.request_success,e})).catch((function(a){return v(t,e,r).catch((function(){throw b(a.message,n.path),a}))}))]}))}))},v=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return c(void 0,d([e,t],r,!0),void 0,(function(e,t,r){var n,a,i,o;return void 0===r&&(r=null),u(this,(function(s){switch(s.label){case 0:n="GET"===e?"".concat(m("ajax"),"&rest_action=").concat(t.replace("?","&")):m("ajax"),a={method:e,headers:{"Content-Type":"application/json; charset=UTF-8"}},"POST"===e&&(a.body=JSON.stringify({path:t,data:r},y)),s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(n,a)];case 2:if(!(i=s.sent()).ok)throw b(!1,i.statusText),new Error(i.statusText);return[4,i.json()];case 3:if(!(o=s.sent()).data||!Object.prototype.hasOwnProperty.call(o.data,"request_success"))throw new Error("Invalid data error");return delete o.data.request_success,[2,Promise.resolve(o.data)];case 4:return s.sent(),[2,Promise.reject(new Error("AJAX request failed"))];case 5:return[2]}}))}))},y=function(e,t){return e?e&&e.includes("Control")?void 0:"object"==typeof t?JSON.parse(JSON.stringify(t,y)):t:t},m=function(e){var t;return t=void 0===e?burst_settings.site_url:burst_settings.admin_ajax_url,"https:"===window.location.protocol&&-1===t.indexOf("https://")?t.replace("http://","https://"):t},g=function(e,t){return h("burst/v1/options/set"+f()+p(),"POST",{option:{option:e,value:t}})},x=function(){return h("burst/v1/fields/get"+f()+p())},j=function(e){return h("burst/v1/fields/set"+f(),"POST",{fields:e})},w=function(e){return h("burst/v1/goals/set"+f()+p(),"POST",e)},_=function(){return h("burst/v1/goals/get"+f()+p())},O=function(e){return h("burst/v1/goals/delete"+f()+p(),"POST",{id:e})},N=function(){return h("burst/v1/goals/add"+f()+p(),"POST",{})},k=function(e){return h("burst/v1/goals/add_predefined"+f()+p(),"POST",{id:e})},S=function(e,t){return void 0===t&&(t={}),h("burst/v1/do_action/".concat(e),"POST",{action_data:t}).then((function(e){return Object.prototype.hasOwnProperty.call(e,"data")?e.data:[]}))},A=function(e,t,r,n){for(var a=[],i=4;i<arguments.length;i++)a[i-4]=arguments[i];return c(void 0,d([e,t,r,n],a,!0),void 0,(function(e,t,r,n,a){var i,o,s,c,d,p;return void 0===a&&(a={}),u(this,(function(u){switch(u.label){case 0:return i=a.filters,o=a.metrics,s=a.group_by,c=l(l(l({date_start:t,date_end:r,date_range:n,nonce:burst_settings.burst_nonce,goal_id:a.goal_id,token:Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)},i&&{filters:i}),o&&{metrics:o}),s&&{group_by:s}),b=c,d=Object.keys(b).filter((function(e){return void 0!==b[e]&&null!==b[e]})).map((function(e){var t=function(e){return Array.isArray(e)?e:"object"==typeof e&&null!==e?JSON.stringify(e):e}(b[e]);return Array.isArray(t)?t.map((function(t){return"".concat(encodeURIComponent(e),"[]=").concat(encodeURIComponent(t))})).join("&"):"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t))})).join("&"),p="burst/v1/data/".concat(e).concat(f()).concat(d),[4,h(p,"GET")];case 1:return[2,u.sent()]}var b}))}))},P=function(e){return h("burst/v1/posts/".concat(f()).concat(p(),"&search=").concat(e)).then((function(e){return Object.prototype.hasOwnProperty.call(e,"posts")?e.posts:[]}))},C=function(e,t){if("undefined"!=typeof Storage){var r=localStorage.getItem("burst_"+e);if(r&&0<r.length)return JSON.parse(r)}return t},I=function(e,t){"undefined"!=typeof Storage&&localStorage.setItem("burst_"+e,JSON.stringify(t))}},6744:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(4848),a=r(1609),i=r(4164),o=function(e){var t=e.title,r=e.controls,a=e.className,o=void 0===a?"":a;return(0,n.jsxs)("div",{className:(0,i.A)(o,"flex min-h-16 items-center justify-between px-6 gap-4"),children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:t}),r]})};o.displayName="BlockHeading";const s=(0,a.memo)(o)},7112:(e,t,r)=>{r.d(t,{A:()=>ce});var n=r(4848),a=r(1609),i=r(4301),o=r(8309),s=r(613),l=r(8007),c=r(5773),u=r(418),d=r(7946),f=r(8697),p=r(4471),b=r(180),h=r(2102),v=r(5107),y=r(7677),m=r(250),g=r(697),x=r(6241),j=r(5977),w=r(9137),_=r(4021),O=r(827),N=r(7962),k=r(9108),S=r(2307),A=r(6050),P=r(8641),C=r(4997),I=r(5404),E=r(1839),D=r(8686),F=r(3893),L=r(7235),T=r(3160),q=r(2853),z=r(8397),G=r(5042),R=r(5899),V=r(6844),M=r(541),U=r(4080),B=r(8818),X=r(5742),W=r(6523),K=r(9798),Q=r(4179),$=r(2105),H=r(9574),Z=r(99),J=r(3194),Y=r(3291),ee=r(73),te=r(4539),re=r(1233),ne=r(5333),ae=r(8931),ie=r(72),oe=function(){return oe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},oe.apply(this,arguments)},se={black:"var(--rsp-black)",green:"var(--rsp-green)",yellow:"var(--rsp-yellow)",red:"var(--rsp-red)",blue:"var(--rsp-blue)",gray:"var(--rsp-grey-400)",white:"var(--rsp-white)"},le={bullet:o.A,dot:o.A,circle:s.A,period:l.A,check:c.A,warning:u.A,error:d.A,times:f.A,"circle-check":p.A,"circle-times":b.A,"chevron-up":h.A,"chevron-down":v.A,"chevron-right":y.A,"chevron-left":m.A,plus:g.A,minus:x.A,sync:j.A,"sync-error":w.A,shortcode:_.A,file:O.A,"file-disabled":N.A,"file-download":k.A,calendar:S.A,"calendar-error":A.A,website:P.A,help:C.A,copy:I.A,trash:E.A,visitor:D.A,visitors:F.A,"visitors-crowd":F.A,time:L.A,pageviews:T.A,referrer:q.A,sessions:z.A,bounces:G.A,bounced_sessions:G.A,bounce_rate:G.A,winner:R.A,live:V.A,total:M.A,graph:U.A,conversion_rate:B.A,goals:X.A,conversions:X.A,"goals-empty":l.A,filter:W.A,loading:K.A,desktop:Q.A,tablet:$.A,mobile:H.A,other:Z.A,mouse:J.A,eye:T.A,page:Y.A,hashtag:ee.A,sun:te.A,world:re.A,filters:ne.A,referrers:ae.A,hook:ie.A};const ce=(0,a.memo)((function(e){var t=e.name,r=void 0===t?"bullet":t,a=e.color,s=void 0===a?"black":a,l=e.size,c=void 0===l?18:l,u=e.strokeWidth,d=void 0===u?1.5:u,f=e.tooltip,p=e.onClick,b=(e.className,se[s]||s),h=le[r]||o.A,v={size:c,color:b,strokeWidth:d},y=(0,n.jsx)("div",{onClick:function(){p&&p()},className:"flex items-center justify-center",children:"bullet"!==r&&"dot"!==r||h!==o.A?(0,n.jsx)(h,oe({},v)):(0,n.jsx)(o.A,oe({},v,{fill:b}))});return f?(0,n.jsx)(i.A,{content:f,children:y}):y}))},7926:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(4848),a=r(1609),i=r(4164),o=r(6850),s=(0,a.memo)((function(e){var t=e.className,r=void 0===t?"":t,a=e.children;return(0,n.jsx)(o.A,{children:(0,n.jsx)("div",{className:(0,i.A)("col-span-12 flex flex-col overflow-hidden rounded-xl bg-white shadow-md relative border border-gray-100",r),children:a})})}));s.displayName="Block";const l=s}}]);