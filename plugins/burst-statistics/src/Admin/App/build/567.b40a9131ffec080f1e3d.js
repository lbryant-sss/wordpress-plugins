"use strict";(globalThis.webpackChunkburst_statistics=globalThis.webpackChunkburst_statistics||[]).push([[567],{240:(t,e,r)=>{r.d(e,{c:()=>u});var n=r(71511),s=r(87134),a=r(1932),i=r(27723),o=function(){return o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},o.apply(this,arguments)},c={page_url:{label:(0,i.__)("Page","burst-statistics"),icon:"page"},goal_id:{label:(0,i.__)("Goal","burst-statistics"),icon:"goals"},referrer:{label:(0,i.__)("Referrer URL","burst-statistics"),icon:"referrer"},device:{label:(0,i.__)("Device","burst-statistics"),icon:"desktop"},browser:{label:(0,i.__)("Browser","burst-statistics"),icon:"browser"},platform:{label:(0,i.__)("Operating System","burst-statistics"),icon:"operating-system"},country_code:{label:(0,i.__)("Country","burst-statistics"),icon:"world"},continent_code:{label:(0,i.__)("Continent","burst-statistics"),icon:"world"},county:{label:(0,i.__)("County","burst-statistics"),icon:"world"},city:{label:(0,i.__)("City","burst-statistics"),icon:"world"}},l=Object.keys(c).reduce((function(t,e){return t[e]="",t}),{}),u=(0,n.v)((0,s.Zr)((function(t){return{filters:l,filtersConf:c,setFilters:function(e,r){t((function(t){return(0,a.jM)(t,(function(t){t.filters[e]=r}))}))},deleteFilter:function(e){t((function(t){return(0,a.jM)(t,(function(t){t.filters[e]=""}))}))},clearAllFilters:function(){t((function(t){return(0,a.jM)(t,(function(t){t.filters=o({},l)}))}))},getActiveFilters:function(){var t=u.getState().filters;return Object.entries(t).filter((function(t){return t[0],""!==t[1]})).reduce((function(t,e){var r=e[0],n=e[1];return t[r]=n,t}),{})},hasActiveFilters:function(){var t=u.getState().filters;return Object.values(t).some((function(t){return""!==t}))}}}),{name:"burst-filters-storage",partialize:function(t){return{filters:t.filters}}}))},332:(t,e,r)=>{r.d(e,{G:()=>a});var n=r(71511),s=r(87134),a=(0,n.v)((0,s.Zr)((function(t,e){return{metrics:["visitors","pageviews"],loaded:!1,getMetrics:function(){if(e().loaded)return e().metrics;var r=e().metrics||["visitors","pageviews"];return r=r.filter((function(t){return"conversions"!==t})),t({metrics:r,loaded:!0}),r},setMetrics:function(e){t({metrics:e})}}}),{name:"burst-insights-storage",partialize:function(t){return{metrics:t.metrics}},onRehydrateStorage:function(){return function(t){t&&t.metrics&&(t.metrics=t.metrics.filter((function(t){return"conversions"!==t})))}}}))},681:(t,e,r)=>{r.d(e,{A:()=>c});var n=r(74848),s=r(51609),a=r(27723),i=r(57112),o=(0,s.forwardRef)((function(t,e){var r=t.id,s=t.name,o=t.value,c=t.label,l=t.checked,u=t.disabled,f=void 0!==u&&u,d=t.onChange,b=t.className,p=void 0===b?"":b,g=t.tooltip,v=void 0===g?"":g,h=t.recommended,m=void 0!==h&&h,y=t.children;return(0,n.jsxs)("div",{className:"flex items-center gap-2 ".concat(p),children:[(0,n.jsx)("input",{ref:e,type:"radio",id:r,name:s,value:o,checked:l,disabled:f,onChange:function(t){return d(t.target.value)},className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 my-1 mx-0"}),(0,n.jsxs)("label",{htmlFor:r,className:"text-sm text-gray cursor-pointer",children:[c," ",y," ",m&&(0,n.jsxs)("span",{className:"text-xs font-semibold",children:["(",(0,a.__)("Recommended","burst-statistics"),")"]})]}),v&&(0,n.jsx)(i.A,{tooltip:v,color:"blue",name:"help",size:16,className:"bg-blue-light rounded-full"})]})}));o.displayName="RadioInput";const c=o},17926:(t,e,r)=>{r.d(e,{e:()=>i});var n=r(74848),s=r(34164),a=r(96850),i=(0,r(51609).memo)((function(t){var e=t.className,r=void 0===e?"":e,i=t.children;return(0,n.jsx)(a.A,{children:(0,n.jsx)("div",{className:(0,s.A)("col-span-12 flex flex-col rounded-xl bg-white shadow-md relative border border-gray-100",r),children:i})})}));i.displayName="Block"},22895:(t,e,r)=>{r.d(e,{S:()=>f});var n=r(71511),s=r(87134),a=r(72346),i=r(31127),o=r(979),c=r(66212),l=r(80900),u=function(t){if(l.cA[t]){var e=l.cA[t].range(),r=e.startDate,n=e.endDate;return{startDate:(0,a.default)(r,"yyyy-MM-dd"),endDate:(0,a.default)(n,"yyyy-MM-dd"),range:t}}return null},f=(0,n.v)((0,s.Zr)((function(t,e){return{startDate:(0,a.default)((0,i.default)((0,o.A)(new Date,7)),"yyyy-MM-dd"),endDate:(0,a.default)((0,c.default)((0,o.A)(new Date,1)),"yyyy-MM-dd"),range:"last-7-days",setStartDate:function(e){return t({startDate:e})},setEndDate:function(e){return t({endDate:e})},setRange:function(e){if("custom"!==e){var r=u(e);r&&t(r)}else t({range:e})}}}),{name:"burst-date-storage",partialize:function(t){return{range:t.range,startDate:t.startDate,endDate:t.endDate}},onRehydrateStorage:function(){return function(t){if(t&&t.range&&"custom"!==t.range){var e=u(t.range);e&&Object.assign(t,e)}}}}))},29369:(t,e,r)=>{r.d(e,{A:()=>g});var n=r(74848),s=r(51609),a=r.n(s),i=r(240),o=r(83101),c=r(332),l=r(22895),u=r(44301),f=r(27723),d=r(55446),b=r(80900),p=function(t,e,r){if(r||2===arguments.length)for(var n,s=0,a=e.length;s<a;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))};const g=a().memo((function(t){var e=t.filter,r=t.filterValue,a=t.label,g=t.children,v=t.startDate,h=t.endDate,m=(0,i.c)((function(t){return t.setFilters})),y=(0,i.c)((function(t){return t.filtersConf})),_=(0,o.A)().getGoal,x=(0,c.G)((function(t){return t.setMetrics})),w=(0,c.G)((function(t){return t.getMetrics()})),j=(0,l.S)((function(t){return t.setStartDate})),A=(0,l.S)((function(t){return t.setEndDate})),N=(0,l.S)((function(t){return t.setRange})),D=(0,s.useMemo)((function(){return e&&y&&Object.prototype.hasOwnProperty.call(y,e)}),[e,y]);if(!D)return(0,n.jsx)(n.Fragment,{children:g});var O=(0,s.useMemo)((function(){return a?"".concat((0,f.__)("Click to filter by:","burst-statistics")," ").concat(a):(0,f.__)("Click to filter","burst-statistics")}),[a,D]),k=(0,s.useCallback)((function(){if(v){var t="",e="";if(/^\d+$/.test(v)){var r=10===v.toString().length?1e3*v:v;t=new Date(r).toISOString().split("T")[0]}else/\d{4}-\d{2}-\d{2}/.test(v)&&(t=v);h?/^\d+$/.test(h)?(r=10===h.toString().length?1e3*h:h,e=new Date(r).toISOString().split("T")[0]):/\d{4}-\d{2}-\d{2}/.test(h)&&(e=h):e=(new Date).toISOString().split("T")[0],(0,b.vd)(t)&&(0,b.vd)(e)&&(j(t),A(e),N("custom"))}}),[v,h,j,A,N]),C=(0,s.useCallback)((function(t){var e=_(t);(null==e?void 0:e.goal_specific_page)?(m("page_url",e.goal_specific_page),m("goal_id",t),d.toast.info((0,f.__)("Filtering by goal & goal specific page","burst-statistics"))):(m("goal_id",t),d.toast.info((0,f.__)("Filtering by goal","burst-statistics"))),w.includes("conversions")||x(p(p([],w,!0),["conversions"],!1))}),[_,m,w,x]),S=(0,s.useCallback)((function(){D?("goal_id"===e?C(r):m(e,r),k()):console.warn('ClickToFilter: Invalid filter "'.concat(e,'" - not found in filter configuration'))}),[e,r,D,C,m,k]);return e&&r&&D?(0,n.jsx)(u.A,{content:O,children:(0,n.jsx)("span",{onClick:S,className:"burst-click-to-filter",children:g})}):(0,n.jsx)(n.Fragment,{children:g})}))},41437:(t,e,r)=>{r.d(e,{A:()=>g});var n=r(74848),s=r(51609),a=r(30020),i=r(1806),o=r(72346),c=r(57112),l=r(22895),u=r(80900),f=r(9823),d="yyyy-MM-dd",b=new Date(2022,0,1),p=function(t){var e=t.range,r=t.display,s=t.isOpen,a=t.setIsOpen;return(0,n.jsxs)(f.l9,{className:"flex min-w-[200px] items-center gap-2 rounded-md border border-gray-400 bg-gray-100 px-3 py-2  shadow-md transition-all duration-200 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.1)]",onClick:function(){return a(!s)},children:[(0,n.jsx)(c.A,{name:"calendar",size:"18"}),(0,n.jsx)("span",{className:"w-full text-base",children:"custom"===e?"".concat(r.startDate," - ").concat(r.endDate):u.cA[e].label}),(0,n.jsx)(c.A,{name:"chevron-down"})]})};const g=function(){var t=(0,s.useState)(!1),e=t[0],r=t[1],c=(0,l.S)(),g=c.startDate,v=c.endDate,h=c.setStartDate,m=c.setEndDate,y=c.setRange,_=c.range,x=(0,s.useState)({startDate:(0,i.A)(g),endDate:(0,i.A)(v),key:"selection"}),w=x[0],j=x[1],A=(0,s.useRef)(0),N=burst_settings.date_ranges,D=(0,s.useMemo)((function(){return(0,u.cf)(N)}),[N]),O=(0,s.useMemo)((function(){return(0,u.YP)(g,v)}),[g,v]),k=(0,s.useCallback)((function(t){try{A.current++;var e=t.selection,n=e.startDate,s=e.endDate,a=(0,o.default)(n,d),c=(0,o.default)(s,d);j({startDate:(0,i.A)(a),endDate:(0,i.A)(c),key:"selection"});var l=Object.keys(u.cA).find((function(e){return u.cA[e].isSelected(t.selection)}))||"custom";(2===A.current||"custom"!==l||a!==c)&&(A.current=0,h(a),m(c),y(l),r(!1))}catch(t){console.error("Error updating date range:",t)}}),[h,m,y]);return(0,n.jsx)("div",{className:"ml-auto w-auto",children:(0,n.jsxs)(f.bL,{open:e,onOpenChange:r,children:[(0,n.jsx)(p,{range:_,display:O,isOpen:e,setIsOpen:r}),(0,n.jsx)(f.ZL,{container:document.querySelector(".burst"),children:(0,n.jsxs)(f.UC,{align:"end",sideOffset:10,arrowPadding:10,id:"burst-statistics",children:[(0,n.jsx)("span",{className:"absolute right-4 mt-1 h-4 w-4 -translate-y-2 rotate-45 transform bg-green-light"}),(0,n.jsx)("div",{className:"z-50 rounded-lg border border-gray-200 bg-white shadow-md",children:(0,n.jsx)(a.Ur,{ranges:[w],rangeColors:["#2B8133"],dateDisplayFormat:"dd MMMM yyyy",monthDisplayFormat:"MMMM",onChange:k,inputRanges:[],showSelectionPreview:!0,months:2,direction:"horizontal",minDate:b,maxDate:(0,u.ii)(),staticRanges:D})})]})})]})})}},43933:(t,e,r)=>{r.d(e,{t:()=>i});var n=r(74848),s=r(51609),a=r(34164),i=(0,s.memo)((function(t){var e=t.children,r=t.className,s=void 0===r?"":r,i=/\bp-\S+/.test(s);return(0,n.jsx)("div",{className:(0,a.A)("flex-grow",{"p-6":!i},s),children:e})}));i.displayName="BlockContent"},44301:(t,e,r)=>{r.d(e,{A:()=>a});var n=r(74848),s=(r(51609),r(3881));const a=function(t){var e=t.children,r=t.content,a=t.delayDuration,i=void 0===a?400:a;return r?(0,n.jsx)(s.Kq,{children:(0,n.jsxs)(s.bL,{delayDuration:i,children:[(0,n.jsx)(s.l9,{asChild:!0,children:e}),(0,n.jsxs)(s.UC,{className:"burst-tooltip-content z-53",sideOffset:5,children:[r,(0,n.jsx)(s.i3,{className:"burst-tooltip-arrow"})]})]})}):(0,n.jsx)(n.Fragment,{children:e})}},46241:(t,e,r)=>{r.d(e,{A:()=>K});var n=r(74848),s=r(27723),a=r(51609),i=r(75500),o=r(40585),c=r(57112),l=r(9823);const u=function(t){var e=t.children,r=t.className,i=(t.onClick,t.show,t.title),o=t.subtitle,u=t.bulletPoints,f=void 0===u?[]:u,d=t.primaryButtonUrl,b=t.secondaryButtonUrl,p=(0,a.useState)(!1),g=p[0],v=p[1];return(0,n.jsxs)(l.bL,{open:g,onOpenChange:v,children:[(0,n.jsx)(l.l9,{className:"cursor-pointer ".concat(r),onMouseEnter:function(){return v(!0)},children:e}),(0,n.jsx)(l.ZL,{children:(0,n.jsxs)(l.UC,{className:"z-[9999] min-w-[320px] max-w-[400px] rounded-lg border border-gray-200 bg-white p-0 shadow-xl",align:"start",sideOffset:10,arrowPadding:10,children:[(0,n.jsx)(l.i3,{className:"fill-white drop-shadow-sm"}),(0,n.jsxs)("div",{className:"relative border-b border-gray-100 px-6 py-4",children:[(0,n.jsx)(l.bm,{className:"absolute right-3 top-3 rounded-full p-1 transition-colors hover:bg-gray-100",children:(0,n.jsx)(c.A,{name:"times",size:16})}),(0,n.jsx)("h5",{className:"mb-1 pr-8 text-lg font-semibold text-black",children:i}),(0,n.jsx)("h6",{className:"m-0 text-sm text-gray",children:o})]}),(0,n.jsxs)("div",{className:"px-6 py-4",children:[(0,n.jsx)("p",{className:"mb-3 text-xs font-medium uppercase tracking-wide text-gray",children:(0,s.__)("Pro features include:","burst-statistics")}),(0,n.jsx)("div",{className:"space-y-2",children:f.map((function(t){var e=t.text,r=t.icon;return(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"flex h-5 w-5 flex-shrink-0 items-center justify-center",children:(0,n.jsx)(c.A,{name:r,size:16,color:"#2B8133"})}),(0,n.jsx)("p",{className:"m-0 text-sm text-gray",children:e})]},e)}))})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 rounded-b-lg border-t border-gray-100 bg-gray-50 px-6 py-4",children:[(0,n.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"w-full rounded bg-primary px-4 py-1 text-center text-base font-normal text-white no-underline transition-all duration-200 hover:bg-primary hover:[box-shadow:0_0_0_3px_rgba(43,129,51,0.5)]",children:(0,s.__)("Upgrade to Pro","burst-statistics")}),(0,n.jsx)("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"w-full rounded border border-gray-400 bg-gray-100 px-4 py-1 text-center text-base font-normal text-gray no-underline transition-all duration-200 hover:bg-gray-200 hover:text-gray hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.1)]",children:(0,s.__)("Learn More","burst-statistics")})]})]})})]})};var f=r(76870);const d=(0,a.memo)((function(t){var e=t.value,r=t.onChange,s=t.options,i=(0,a.useCallback)((function(t){r(t)}),[r]),l=(0,f.A)(),d=l.isLicenseValid,b=l.isPro,p=b&&d(),g=(0,a.useMemo)((function(){return{hasProOptions:s.some((function(t){return t.pro})),firstOption:s[0]}}),[s]),v=g.hasProOptions,h=g.firstOption;return v&&!p&&(null==h?void 0:h.upsellPopover)?(0,n.jsxs)(u,{title:h.upsellPopover.title,subtitle:h.upsellPopover.subtitle,bulletPoints:h.upsellPopover.bulletPoints,primaryButtonUrl:h.upsellPopover.primaryButtonUrl,secondaryButtonUrl:h.upsellPopover.secondaryButtonUrl,children:[(0,n.jsx)("h3",{className:"burst-grid-title burst-h4",children:h.label}),(0,n.jsx)(c.A,{name:"chevron-down"})]}):1===s.length?(0,n.jsx)("span",{className:"text-lg font-semibold",children:s[0].label}):(0,n.jsxs)(o.bL,{value:e,onValueChange:i,children:[(0,n.jsxs)(o.l9,{className:"burst-datatable__select-trigger",children:[(0,n.jsx)(o.WT,{placeholder:"Select an optionâ€¦"}),(0,n.jsx)(o.In,{className:"burst-datatable__select-trigger__icon",children:(0,n.jsx)(c.A,{name:"chevron-down"})})]}),(0,n.jsx)(o.UC,{className:"burst-datatable__select-content",position:"popper",alignOffset:-10,children:(0,n.jsx)(o.LM,{children:s.map((function(t){return(0,n.jsx)(o.q7,{value:t.key,className:"burst-datatable__select-content__item",disabled:t.pro&&!b,children:(0,n.jsx)(o.p4,{className:"burst-datatable__select-content__label",children:t.label})},t.key)}))})})]})}));var b=r(71511),p=r(87134),g=function(){return g=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},g.apply(this,arguments)},v=(0,b.v)((0,p.Zr)((function(t,e){return{selectedConfigs:{},setSelectedConfig:function(e,r){t((function(t){var n;return{selectedConfigs:g(g({},t.selectedConfigs),(n={},n[e]=r,n))}}))},getSelectedConfig:function(t,r){return e().selectedConfigs[t]||r},columnConfigs:{},setColumns:function(e,r){t((function(t){var n;return{columnConfigs:g(g({},t.columnConfigs),(n={},n[e]=r,n))}}))},getColumns:function(t,r){return e().columnConfigs[t]||r},filterTexts:{},setFilterText:function(e,r){t((function(t){var n;return{filterTexts:g(g({},t.filterTexts),(n={},n[e]=r,n))}}))},getFilterText:function(t){return e().filterTexts[t]||""},clearTableData:function(e){t((function(t){var r=g({},t.selectedConfigs),n=g({},t.filterTexts);return delete r[e],delete n[e],{selectedConfigs:r,filterTexts:n}}))},resetAll:function(){t({selectedConfigs:{},columnConfigs:{},filterTexts:{}})}}}),{name:"burst-datatable-storage",partialize:function(t){return{selectedConfigs:t.selectedConfigs,columnConfigs:t.columnConfigs}}}));const h=(0,a.memo)((function(t){var e=t.isLoading,r=t.error,a=t.noData;return e?(0,n.jsx)("div",{className:"burst-datatable-message burst-loading",children:(0,n.jsx)("p",{children:(0,s.__)("Loading data...","burst-statistics")})}):r?(0,n.jsx)("div",{className:"burst-datatable-message burst-error",children:(0,n.jsxs)("p",{children:[(0,s.__)("Error:","burst-statistics")," ",r.message]})}):a?(0,n.jsx)("div",{className:"burst-datatable-message burst-no-data",children:(0,n.jsx)("p",{children:(0,s.__)("No data available in table","burst-statistics")})}):(0,n.jsx)("div",{className:"burst-datatable-message burst-unexpected-error",children:(0,n.jsx)("p",{children:(0,s.__)("Unexpected error","burst-statistics")})})}));var m,y=r(83757),_=r(22895),x=r(240),w=r(48069),j=r(86275),A=r(80900),N=r(51456),D=r(29369),O=r(23392),k=function(){return k=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},k.apply(this,arguments)},C=function(t,e,r){if(r||2===arguments.length)for(var n,s=0,a=e.length;s<a;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))},S={PERCENTAGE:"percentage",TIME:"time",COUNTRY:"country",CONTINENT:"continent",URL:"url",TEXT:"text",INTEGER:"integer"},P=(0,a.memo)(D.A),M=(0,a.memo)((function(t){var e=t.value;return(0,n.jsx)(P,{filter:"country_code",filterValue:e,children:(0,n.jsx)(N.A,{country:e,countryNiceName:(0,A.qQ)(e)})})})),T=(0,a.memo)((function(t){var e=t.value;return(0,n.jsx)(P,{filter:"page_url",filterValue:e,children:(0,O.S)(e)})})),E=((0,a.memo)((function(t){var e=t.value;return(0,n.jsx)(P,{filter:"referrer",filterValue:e,children:(0,O.S)(e)})})),new Map,P=(0,a.memo)(D.A),M=(0,a.memo)((function(t){var e=t.value;return(0,n.jsx)(P,{filter:"country_code",filterValue:e,children:(0,n.jsx)(N.A,{country:e,countryNiceName:(0,A.qQ)(e)})})})),(0,a.memo)((function(t){var e=t.value;return(0,n.jsx)(P,{filter:"continent_code",filterValue:e,children:(0,n.jsx)(n.Fragment,{children:(0,A.Iq)(e)})})}))),I=(T=(0,a.memo)((function(t){var e=t.filter,r=t.value;return(0,n.jsx)(P,{filter:e,filterValue:r,children:(0,O.S)(r)})})),(0,a.memo)((function(t){var e=t.filter,r=t.value;return(0,n.jsx)(P,{filter:e,filterValue:r,children:r})}))),F=((m={})[S.PERCENTAGE]=function(t){return(0,A.Ee)(t)},m[S.TIME]=function(t){return(0,A.fU)(t)},m[S.INTEGER]=function(t){return parseInt(t,10)},m[S.COUNTRY]=function(t){return t&&""!==t?(0,n.jsx)(M,{value:t}):(0,s.__)("Not set","burst-statistics")},m[S.CONTINENT]=function(t){return(0,n.jsx)(E,{value:t})},m[S.URL]=function(t,e){return(0,n.jsx)(T,{filter:e,value:t})},m[S.TEXT]=function(t,e){return(0,n.jsx)(I,{filter:e,value:t})},m),V=function(t,e){var r=[S.PERCENTAGE,S.TIME,S.INTEGER].includes(e);return function(e,n){var s=e[t],a=n[t];if(null==s&&null==a)return 0;if(null==s)return 1;if(null==a)return-1;if(r){var i=parseFloat(s),o=parseFloat(a);return isNaN(i)&&isNaN(o)?0:isNaN(i)?1:isNaN(o)?-1:i-o}return String(s).toLowerCase().localeCompare(String(a).toLowerCase())}},G=function(t,e){var r=F[t];return r?function(t){var n;try{var s=null!==(n=t[e])&&void 0!==n?n:"";return r(s,e)}catch(r){return console.error("Error formatting cell value for column ".concat(e,":"),r),t[e]||""}}:(console.warn("Unknown column format: ".concat(t,". Using default text formatter.")),function(t){return t[e]||""})},R=function(t,e){try{return function(t){if(!t||"object"!=typeof t)throw new Error("Invalid response: expected object");if(!Array.isArray(t.columns))throw new Error("Invalid response: columns must be an array");if(!Array.isArray(t.data))throw new Error("Invalid response: data must be an array")}(t),{columns:t.columns.map((function(t){return function(t,e){var r=e[t.id];if(!r)return t;var n=r.format||S.INTEGER,s=r.align||"left";return k(k({},t),{selector:function(e){return e[t.id]},right:"left"!==s,sortFunction:V(t.id,n),cell:G(n,t.id)})}(t,e)})),data:C([],t.data,!0)}}catch(t){return console.error("Data transformation error:",t),{columns:[],data:[],error:t.message}}};const L=function(t){return e=void 0,r=void 0,s=function(){var e,r,n,s,a,i,o;return function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),function(t){var e=t.startDate,r=t.endDate,n=t.range,s=t.columnsOptions;if(!e||!r||!n)throw new Error("Missing required parameters: startDate, endDate, range");if(!s||"object"!=typeof s)throw new Error("Missing or invalid columnsOptions parameter")}(t),e=t.startDate,r=t.endDate,n=t.range,s=t.args,a=t.columnsOptions,[4,(0,j.bQ)("datatable",e,r,n,s)];case 1:if(!(i=c.sent().data))throw new Error("No data received from API");return[2,R(i,a)];case 2:return o=c.sent(),console.error("Error fetching data table data:",o),[2,{columns:[],data:[],error:o.message}];case 3:return[2]}}))},new((n=void 0)||(n=Promise))((function(t,a){function i(t){try{c(s.next(t))}catch(t){a(t)}}function o(t){try{c(s.throw(t))}catch(t){a(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(i,o)}c((s=s.apply(e,r||[])).next())}));var e,r,n,s};var U=r(17926),q=r(96744),z=r(43933),Z=function(){return Z=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Z.apply(this,arguments)},B={pageviews:{label:(0,s.__)("Pageviews","burst-statistics"),default:!0,align:"right"},sessions:{label:(0,s.__)("Sessions","burst-statistics"),pro:!0,align:"right"},visitors:{label:(0,s.__)("Visitors","burst-statistics"),pro:!0,align:"right"},conversions:{label:(0,s.__)("Conversions","burst-statistics"),pro:!0,align:"right"},bounce_rate:{label:(0,s.__)("Bounce rate","burst-statistics"),format:"percentage",pro:!0,align:"right"},avg_time_on_page:{label:(0,s.__)("Time on page","burst-statistics"),pro:!0,format:"time",align:"right"}},Q={pages:{label:(0,s.__)("Pages","burst-statistics"),searchable:!0,defaultColumns:["page_url","pageviews"],columnsOptions:Z({page_url:{label:(0,s.__)("Page URL","burst-statistics"),default:!0,format:"url",align:"left",group_by:!0}},B)},referrers:{label:(0,s.__)("Referrers","burst-statistics"),searchable:!0,defaultColumns:["referrer","pageviews"],columnsOptions:Z({referrer:{label:(0,s.__)("Referrer","burst-statistics"),default:!0,format:"referrer",align:"left",group_by:!0}},B)},countries:{label:(0,s.__)("Locations","burst-statistics"),pro:!0,searchable:!0,defaultColumns:["country_code","state","city","pageviews"],columnsOptions:Z({country_code:{label:(0,s.__)("Country","burst-statistics"),default:!0,format:"country",align:"left",group_by:!0},state:{label:(0,s.__)("State","burst-statistics"),format:"text",align:"left",group_by:!0},city:{label:(0,s.__)("City","burst-statistics"),format:"text",align:"left",group_by:!0},continent:{label:(0,s.__)("Continent","burst-statistics"),format:"continent",align:"left",group_by:!0}},B)},campaigns:{label:(0,s.__)("Campaigns","burst-statistics"),pro:!0,searchable:!0,defaultColumns:["source","pageviews"],columnsOptions:Z({campaign:{label:(0,s.__)("Campaign","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},source:{label:(0,s.__)("Source","burst-statistics"),format:"text",align:"left",group_by:!0},medium:{label:(0,s.__)("Medium","burst-statistics"),format:"text",align:"left",group_by:!0},term:{label:(0,s.__)("Term","burst-statistics"),format:"text",align:"left",group_by:!0},content:{label:(0,s.__)("Content","burst-statistics"),format:"text",align:"left",group_by:!0}},B)},parameters:{label:(0,s.__)("Parameters","burst-statistics"),searchable:!0,pro:!0,defaultColumns:["parameter","pageviews"],columnsOptions:Z({parameter:{label:(0,s.__)("Parameter","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},parameters:{label:(0,s.__)("Parameters","burst-statistics"),format:"text",align:"left",group_by:!0}},B)},ghost:{label:(0,s.__)("Ghost","burst-statistics"),searchable:!0,defaultColumns:["pageviews"],columnsOptions:Z({},B)}};const K=(0,a.memo)((function(t){var e=t.allowedConfigs,r=void 0===e?["pages","referrers"]:e,o=t.id,c=(0,_.S)((function(t){return t})),l=c.startDate,u=c.endDate,f=c.range,b=(0,x.c)((function(t){return t.filters})),p=r[0],g=v(),m=g.getSelectedConfig,j=g.setSelectedConfig,A=g.getColumns,N=g.setColumns,D=(0,a.useState)((function(){return m(o,p)})),O=D[0],k=D[1],C=(0,a.useMemo)((function(){return Q[O]}),[O]),S=(0,a.useMemo)((function(){return(null==C?void 0:C.columnsOptions)||{}}),[C]),P=(0,a.useMemo)((function(){return(null==C?void 0:C.defaultColumns)||[]}),[C]),M=(0,a.useState)((function(){var t=A(O,P),e=Object.keys(S);return t.filter((function(t){return e.includes(t)}))})),T=M[0],E=M[1],I=(0,a.useCallback)((function(t){var e=t.filter((function(t){return Object.keys(S).includes(t)}));JSON.stringify(e)!==JSON.stringify(T)&&(E(e),N(O,e))}),[O,T,S,N]),F=(0,a.useCallback)((function(t){return e=void 0,r=void 0,s=function(){return function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(e){return k(t),j(o,t),[2]}))},new((n=void 0)||(n=Promise))((function(t,a){function i(t){try{c(s.next(t))}catch(t){a(t)}}function o(t){try{c(s.throw(t))}catch(t){a(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(i,o)}c((s=s.apply(e,r||[])).next())}));var e,r,n,s}),[o,j]);(0,a.useEffect)((function(){var t,e=A(O,(null===(t=Q[O])||void 0===t?void 0:t.defaultColumns)||[]);I(e)}),[O,I,A]);var V=(0,a.useState)(""),G=V[0],R=V[1],B=(0,a.useMemo)((function(){return Object.keys(Q).filter((function(t){return r.includes(t)})).map((function(t){return{key:t,label:Q[t].label,pro:!!Q[t].pro,upsellPopover:Q[t].upsellPopover||null}}))}),[r]),K=(0,a.useMemo)((function(){var t={filters:b,metrics:Object.keys(S).filter((function(t){return T.includes(t)})),group_by:[]};return T.forEach((function(e){var r;(null===(r=S[e])||void 0===r?void 0:r.group_by)&&t.group_by.push(e)})),t}),[b,S,T]),J=(0,w.I)({queryKey:[O,l,u,K],queryFn:function(){return L({type:"datatable",startDate:l,endDate:u,range:f,args:K,columnsOptions:S})},enabled:!!O}),Y=J.data||{},W=Y.data,X=Y.columns,$=(0,a.useMemo)((function(){var t=[];if((null==C?void 0:C.searchable)&&Array.isArray(W))if(""===G.trim())t=W;else{var e=G.toLowerCase(),r=Object.keys(S).filter((function(t){var e;return null===(e=S[t])||void 0===e?void 0:e.group_by}));t=W.filter((function(t){return r.some((function(r){var n=t[r];return null!=n&&n.toString().toLowerCase().includes(e)}))}))}else t=W;return Array.isArray(t)?t:[]}),[W,G,null==C?void 0:C.searchable,S]),H=J.isLoading||J.isFetching,tt=J.error,et=0===$.length,rt=(0,a.useMemo)((function(){if(!X||!S)return[];var t=Object.keys(S);return X.sort((function(e,r){return t.indexOf(e.selector)-t.indexOf(r.selector)}))}),[X,S]);if(!C)return null;var nt=(0,a.useMemo)((function(){return{columns:rt,data:$,defaultSortFieldId:2,defaultSortAsc:!1,pagination:!0,paginationRowsPerPageOptions:[10,25,50,100,200],paginationPerPage:10,paginationComponentOptions:{rowsPerPageText:"",rangeSeparatorText:(0,s.__)("of","burst-statistics"),noRowsPerPage:!1,selectAllRowsItem:!0,selectAllRowsItemText:(0,s.__)("All","burst-statistics")},noDataComponent:(0,n.jsx)(h,{noData:et,data:[],isLoading:H,error:tt}),progressPending:H,progressComponent:(0,n.jsx)(h,{noData:et,data:[],isLoading:H,error:tt})}}),[rt,$,et,H,tt]);return(0,n.jsxs)(U.e,{className:"row-span-2 overflow-hidden xl:col-span-6",children:[(0,n.jsx)(q.q,{title:(0,n.jsx)(d,{value:O,onChange:F,options:B,disabled:[]}),controls:(0,n.jsxs)(n.Fragment,{children:[C.searchable&&(0,n.jsx)("input",{className:"burst-datatable-search ml-auto",type:"text",placeholder:(0,s.__)("Search","burst-statistics"),value:G,onChange:function(t){return R(t.target.value)}}),(0,n.jsx)(i.A,{selectedOptions:T,options:S,onApply:I})]})}),(0,n.jsx)(z.t,{className:"px-0 py-0",children:(0,n.jsx)(y.Ay,Z({},nt))})]})}))},47307:(t,e,r)=>{r.d(e,{y:()=>u});var n=r(74848),s=r(240),a=r(57112),i=r(27723),o=r(83101),c=r(332),l=r(23392),u=function(){var t=(0,s.c)((function(t){return t.filters})),e=(0,s.c)((function(t){return t.filtersConf})),r=(0,s.c)((function(t){return t.setFilters})),u=(0,o.A)().getGoal,f=(0,c.G)((function(t){return t.setMetrics})),d=(0,c.G)((function(t){return t.getMetrics()})),b="";return(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.keys(e).map((function(s,o){if(""!==t[s])return"goal_id"===s?(p=t[s],g=u(p),b=g?g.title:""):"device"===s?b=function(t){switch(t){case"desktop":return(0,i.__)("Desktop","burst-statistics");case"tablet":return(0,i.__)("Tablet","burst-statistics");case"mobile":return(0,i.__)("Mobile","burst-statistics");default:return(0,i.__)("Other","burst-statistics")}}(t[s]):"country_code"===s?(c=t[s],b=c?(c=c.toUpperCase(),burst_settings.countries[c]||c):""):b=t[s],""!==e[s].icon&&e[s].icon,(0,n.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-2 bg-gray-100 border border-gray-400 shadow-md rounded-md text-sm",children:[(0,n.jsx)(a.A,{name:e[s].icon,size:"16"}),(0,n.jsx)("p",{className:"font-medium",children:e[s].label}),(0,n.jsx)("span",{className:"h-4 w-px bg-gray-400"}),(0,n.jsx)("p",{className:"text-gray",children:(0,l.S)(b)}),(0,n.jsx)("button",{onClick:function(){return function(t){r(t,""),"goal_id"===t&&f(d.filter((function(t){return"conversions"!==t})))}(s)},className:"rounded-full p-1 transition-colors hover:bg-gray-200",children:(0,n.jsx)(a.A,{name:"times",color:"var(--rsp-grey-500)",size:"16"})})]},o);var c,p,g}))})}},47567:(t,e,r)=>{r.r(e),r.d(e,{component:()=>W});var n=r(74848),s=r(47307),a=r(41437),i=r(27723),o=r(17926),c=r(96744),l=r(43933),u=r(332),f=r(75500);const d=function(t){var e=t.selectedMetrics,r=t.filters,s=(0,u.G)((function(t){return t.setMetrics})),a={pageviews:{label:(0,i.__)("Pageviews","burst-statistics"),default:!0},visitors:{label:(0,i.__)("Visitors","burst-statistics"),default:!0},sessions:{label:(0,i.__)("Sessions","burst-statistics")},bounces:{label:(0,i.__)("Bounces","burst-statistics")},conversions:{label:(0,i.__)("Conversions","burst-statistics"),default:0<r.goal_id}};return(0,n.jsx)(f.A,{selectedOptions:e,options:a,onApply:function(t){s(t)}})};var b=r(51609),p=r(33050),g=r(46734);p.t1.register(p.PP,p.kc,p.FN,p.No,p.hE,p.m_,p.s$);const v=function(t){var e=t.data,r=t.loading,s=(0,b.useMemo)((function(){return{responsive:"true",maintainAspectRatio:!1,cubicInterpolationMode:"monotone",plugins:{legend:{labels:{usePointStyle:!0,padding:15,font:{size:13,weight:400}}}},scales:{y:{ticks:{beginAtZero:!0,stepSize:20,maxTicksLimit:6}},x:{ticks:{maxTicksLimit:8}}},layout:{padding:0}}}),[]),a=r?"burst-loading":"";return(0,n.jsx)(g.N1,{className:"burst-loading-container ".concat(a),options:s,data:e})};var h=r(22895),m=r(48069),y=r(86275);const _=function(t){return e=void 0,r=[t],s=function(t){var e=t.startDate,r=t.endDate,n=t.range,s=t.args;return function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(t){switch(t.label){case 0:return[4,(0,y.bQ)("insights",e,r,n,s)];case 1:return[2,t.sent().data]}}))},new((n=void 0)||(n=Promise))((function(t,a){function i(t){try{c(s.next(t))}catch(t){a(t)}}function o(t){try{c(s.throw(t))}catch(t){a(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(i,o)}c((s=s.apply(e,r||[])).next())}));var e,r,n,s};var x=r(240);const w=function(){var t=(0,u.G)((function(t){return t.getMetrics()})),e=(0,h.S)((function(t){return t})),r=e.startDate,s=e.endDate,a=e.range,f=(0,x.c)((function(t){return t.filters})),b={filters:f,metrics:t},p=(0,m.I)({queryKey:["insights",t,r,s,b],queryFn:function(){return _({startDate:r,endDate:s,range:a,args:b})},placeholderData:{labels:["-","-","-","-","-","-","-"],datasets:[{data:[0,0,0,0,0,0,0],backgroundColor:"rgba(41, 182, 246, 0.2)",borderColor:"rgba(41, 182, 246, 1)",label:"-",fill:"false"},{data:[0,0,0,0,0,0,0],backgroundColor:"rgba(244, 191, 62, 0.2)",borderColor:"rgba(244, 191, 62, 1)",label:"-",fill:"false"}]}}),g=p.isLoading||p.isFetching;return(0,n.jsxs)(o.e,{className:"row-span-1 lg:col-span-12 xl:col-span-6 min-h-96",children:[(0,n.jsx)(c.q,{title:(0,i.__)("Insights","burst-statistics"),className:"border-b border-gray-300",controls:(0,n.jsx)(d,{selectedMetrics:t,filters:f})}),(0,n.jsx)(l.t,{children:p.data&&v&&(0,n.jsx)(v,{loading:g,data:p.data})})]})};var j=r(57112),A=r(44301);const N=function(t){var e=t.iconKey,r=t.title,s=t.subtitle,a=t.value,i=t.exactValue,o=t.change,c=t.changeStatus,l=1e3<i&&i;return(0,n.jsxs)("div",{className:"flex items-start gap-3 py-2",children:[(0,n.jsx)(j.A,{name:e,className:"mt-1"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"text-base font-semibold text-black",children:r}),(0,n.jsx)("p",{className:"text-sm text-gray",children:s})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)(A.A,{content:l,delayDuration:1e3,children:(0,n.jsx)("span",{className:"text-xl font-bold text-black",children:a})}),(0,n.jsx)("p",{className:"text-sm ".concat("positive"===c?"text-green":"text-red"),children:o})]})]})};var D=r(1806),O=r(89045);const k=function(t){var e=t.noCompare,r=t.startDate,s=t.endDate,a="";if(e)a=(0,i.__)("No data available for comparison","burst-statistics");else{var o=(0,D.A)(r),c=(0,D.A)(s),l=(0,O.default)(c,o)+1;a=(1===l?(0,i.__)("vs. previous day","burst-statistics"):(0,i.__)("vs. previous %s days","burst-statistics")).replace("%s",l)}return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{className:"burst-small-text",children:a})})};var C=r(80900),S=function(){return S=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},S.apply(this,arguments)},P={pageviews:(0,i.__)("Pageviews","burst-statistics"),sessions:(0,i.__)("Sessions","burst-statistics"),visitors:(0,i.__)("Visitors","burst-statistics"),bounce_rate:(0,i.__)("Bounce Rate","burst-statistics")},M={conversions:(0,i.__)("Conversions","burst-statistics"),pageviews:(0,i.__)("Pageviews","burst-statistics"),sessions:(0,i.__)("Sessions","burst-statistics"),visitors:(0,i.__)("Visitors","burst-statistics")},T={default:{pageviews:function(t,e){return{title:(0,i.__)("Pageviews","burst-statistics"),subtitle:(0,i.__)("%s pageviews per session","burst-statistics").replace("%s",(0,C.ZV)(t.pageviews/t.sessions)),value:(0,C.ZV)(t.pageviews),exactValue:t.pageviews}},sessions:function(t,e){return{title:(0,i.__)("Sessions","burst-statistics"),subtitle:(0,i.__)("%s per session","burst-statistics").replace("%s",(0,C.fU)(t.pageviews/t.sessions*t.avg_time_on_page)),value:(0,C.ZV)(t.sessions),exactValue:t.sessions}},visitors:function(t,e){return{title:(0,i.__)("Visitors","burst-statistics"),subtitle:(0,i.__)("%s are new visitors","burst-statistics").replace("%s",(0,C.Nj)(t.first_time_visitors,t.visitors)),value:(0,C.ZV)(t.visitors),exactValue:t.visitors}},bounce_rate:function(t,e){return{title:(0,i.__)("Bounce Rate","burst-statistics"),subtitle:(0,i.__)("%s visitors bounced","burst-statistics").replace("%s",t.bounced_sessions),value:(0,C.ZV)(t.bounce_rate)+"%",exactValue:t.bounce_rate}}},goalSelected:{conversions:function(t,e){return{title:(0,i.__)("Conversions","burst-statistics"),subtitle:(0,i.__)("%s of pageviews converted","burst-statistics").replace("%s",(0,C.Nj)(t.conversion_rate,100)),value:(0,C.ZV)(t.conversions),exactValue:t.conversions}},pageviews:function(t,e){return{title:(0,i.__)("Pageviews","burst-statistics"),subtitle:(0,i.__)("%s pageviews per conversion","burst-statistics").replace("%s",(0,C.ZV)(t.pageviews/t.conversions)),value:(0,C.ZV)(t.pageviews),exactValue:t.pageviews}},sessions:function(t,e){return{title:(0,i.__)("Sessions","burst-statistics"),subtitle:(0,i.__)("%s sessions per conversion","burst-statistics").replace("%s",(0,C.ZV)(t.sessions/t.conversions)),value:(0,C.ZV)(t.sessions),exactValue:t.sessions}},visitors:function(t,e){return{title:(0,i.__)("Visitors","burst-statistics"),subtitle:(0,i.__)("%s visitors per conversion","burst-statistics").replace("%s",(0,C.ZV)(t.visitors/t.conversions)),value:(0,C.ZV)(t.visitors),exactValue:t.visitors}}}},E=function(t){var e={},r=t.current,n=t.previous,s="default",a=P;"goals"===t.view&&(s="goalSelected",a=M);var i=T[s];return Object.entries(a).forEach((function(t){var s=t[0],a=(t[1],i[s]||T.default[s]),o={};"bounce_rate"===s?(o=(0,C.oI)(r[s],n[s])).status="positive"===o.status?"negative":"positive":o=(0,C.fs)(r[s],n[s]),e[s]=S(S({},a(r,n)),{change:o.val,changeStatus:o.status})})),e};const I=function(t){return e=void 0,r=[t],s=function(t){var e,r=t.startDate,n=t.endDate,s=t.range,a=t.args;return function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(t){switch(t.label){case 0:return[4,(0,y.bQ)("compare",r,n,s,a)];case 1:return e=t.sent().data,[2,E(e)]}}))},new((n=void 0)||(n=Promise))((function(t,a){function i(t){try{c(s.next(t))}catch(t){a(t)}}function o(t){try{c(s.throw(t))}catch(t){a(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(i,o)}c((s=s.apply(e,r||[])).next())}));var e,r,n,s};var F=r(62081);const V=function(){var t=(0,h.S)((function(t){return t})),e=t.startDate,r=t.endDate,s=t.range,a={filters:(0,x.c)((function(t){return t.filters}))},u={pageviews:(0,i.__)("Pageviews","burst-statistics"),sessions:(0,i.__)("Sessions","burst-statistics"),visitors:(0,i.__)("Visitors","burst-statistics"),bounce_rate:(0,i.__)("Bounce Rate","burst-statistics")},f={};Object.keys(u).forEach((function(t){f[t]={title:u[t],subtitle:"-",value:"-",exactValue:"-",change:"-",changeStatus:""}}));var d=(0,m.I)({queryKey:["compare",e,r,a],queryFn:function(){return I({startDate:e,endDate:r,range:s,args:a})},placeholderData:f}),b=d.data||{},p=!Object.keys(b).some((function(t){return""!==b[t].change}));return d.isLoading||d.isFetching,(0,n.jsxs)(o.e,{className:"row-span-1 lg:col-span-6 xl:col-span-3",children:[(0,n.jsx)(c.q,{title:(0,i.__)("Compare","burst-statistics")}),(0,n.jsx)(l.t,{children:Object.keys(b).map((function(t,e){var r=b[t];return(0,n.jsx)(N,{iconKey:t,title:r.title,subtitle:r.subtitle,value:r.value,exactValue:r.exactValue,change:r.change,changeStatus:r.changeStatus},e)}))}),(0,n.jsx)(F.p,{children:(0,n.jsx)(k,{noCompare:p,startDate:e,endDate:r})})]})};var G=r(29369),R=function(t,e,r,n){return new(r||(r=Promise))((function(s,a){function i(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,o)}c((n=n.apply(t,e||[])).next())}))},L=function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},U={desktop:(0,i.__)("Desktop","burst-statistics"),tablet:(0,i.__)("Tablet","burst-statistics"),mobile:(0,i.__)("Mobile","burst-statistics"),other:(0,i.__)("Other","burst-statistics")},q=function(t){for(var e,r={},n=0,s=Object.entries(U);n<s.length;n++){var a=s[n],i=a[0],o=a[1];Object.assign(r,((e={})[i]={title:o,value:(0,C.Nj)(t[i].count,t.all.count)},e))}return r},z=function(t){for(var e,r={},n=0,s=Object.entries(U);n<s.length;n++){var a=s[n][0],i=t[a].os?t[a].os:"",o=t[a].browser?t[a].browser:"";Object.assign(r,((e={})[a]={subtitle:""===i&&""===o?"-":i+" / "+o},e))}return r},Z=function(){return Z=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Z.apply(this,arguments)},B=(0,b.memo)((function(t){var e=t.deviceKey,r=t.deviceData;return(0,n.jsx)(G.A,{filter:"device",filterValue:e,label:r.title,children:(0,n.jsx)(N,{iconKey:e,title:r.title,subtitle:r.subtitle,value:r.value,change:r.change,changeStatus:r.changeStatus})},e)}));const Q=(0,b.memo)((function(){var t=(0,h.S)((function(t){return t})),e=t.startDate,r=t.endDate,s=t.range,a=(0,x.c)((function(t){return t.filters})),u=(0,b.useMemo)((function(){return{filters:a}}),[a]),f=(0,b.useMemo)((function(){return{desktop:(0,i.__)("Desktop","burst-statistics"),tablet:(0,i.__)("Tablet","burst-statistics"),mobile:(0,i.__)("Mobile","burst-statistics"),other:(0,i.__)("Other","burst-statistics")}}),[]),d=(0,b.useMemo)((function(){var t={},e={},r={};return Object.keys(f).forEach((function(n){t[n]={title:f[n],value:"-%"},e[n]={subtitle:"-"},r[n]={title:f[n],value:"-%",subtitle:"-"}})),{emptyDataTitleValue:t,emptyDataSubtitle:e,placeholderData:r}}),[f]),p=d.emptyDataTitleValue,g=d.emptyDataSubtitle,v=d.placeholderData,_=(0,m.I)({queryKey:["devicesTitleAndValue",e,r,u],queryFn:function(){return function(t){return R(void 0,[t],void 0,(function(t){var e,r=t.startDate,n=t.endDate,s=t.range,a=t.args;return L(this,(function(t){switch(t.label){case 0:return[4,(0,y.bQ)("devicesTitleAndValue",r,n,s,a)];case 1:return e=t.sent().data,[2,q(e)]}}))}))}({startDate:e,endDate:r,range:s,args:u})},placeholderData:p}),w=(0,m.I)({queryKey:["devicesSubtitle",e,r,u],queryFn:function(){return function(t){return R(void 0,[t],void 0,(function(t){var e,r=t.startDate,n=t.endDate,s=t.range,a=t.args;return L(this,(function(t){switch(t.label){case 0:return[4,(0,y.bQ)("devicesSubtitle",r,n,s,a)];case 1:return e=t.sent().data,[2,z(e)]}}))}))}({startDate:e,endDate:r,range:s,args:u})},placeholderData:g}),j=(0,b.useMemo)((function(){if(_.data&&w.data){var t=Z({},_.data);return Object.keys(t).forEach((function(e){w.data[e]&&(t[e]=Z(Z({},t[e]),w.data[e]))})),t}return v}),[_.data,w.data,v]),A=(_.isLoading||_.isFetching,(0,b.useMemo)((function(){return Object.keys(j)}),[j]));return(0,n.jsxs)(o.e,{className:"row-span-1 lg:col-span-6 xl:col-span-3",children:[(0,n.jsx)(c.q,{title:(0,i.__)("Devices","burst-statistics")}),(0,n.jsx)(l.t,{children:A.map((function(t){return(0,n.jsx)(B,{deviceKey:t,deviceData:j[t]},t)}))})]})}));var K=r(46241),J=r(96850),Y=r(76870),W=(r(74901),function(){var t=(0,Y.A)().isPro?["parameters"]:["referrers"];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"col-span-12 flex justify-between items-center",children:[(0,n.jsx)(J.A,{children:(0,n.jsx)(s.y,{})}),(0,n.jsx)(J.A,{children:(0,n.jsx)(a.A,{})})]}),(0,n.jsx)(J.A,{children:(0,n.jsx)(w,{})}),(0,n.jsx)(J.A,{children:(0,n.jsx)(V,{})}),(0,n.jsx)(J.A,{children:(0,n.jsx)(Q,{})}),(0,n.jsx)(J.A,{children:(0,n.jsx)(K.A,{allowedConfigs:["pages"],id:1})}),(0,n.jsx)(J.A,{children:(0,n.jsx)(K.A,{allowedConfigs:t,id:2})})]})})},51456:(t,e,r)=>{r.d(e,{A:()=>a});var n=r(74848),s=r(19809);const a=function(t){var e=t.country,r=t.countryNiceName,a=void 0===r?"":r;if("string"!=typeof e)return(0,n.jsx)("span",{className:"burst-flag-wrapper",children:a});""===a&&(a=e),""===a&&(a=__("Unknown","burst-statistics")),e=e.toLowerCase();var i="".concat(burst_settings.plugin_url,"src/Pro/assets/flags/4x3/").concat(e,".svg");return(0,n.jsxs)("span",{className:"burst-flag-wrapper",children:[(0,n.jsx)(s.k,{src:i,className:"burst-flag burst-flag-".concat(e),title:a})," ",a]})}},57112:(t,e,r)=>{r.d(e,{A:()=>ut});var n=r(74848),s=r(51609),a=r(44301),i=r(68309),o=r(20613),c=r(88007),l=r(45773),u=r(418),f=r(37946),d=r(48697),b=r(79804),p=r(50180),g=r(72102),v=r(75107),h=r(87677),m=r(60250),y=r(80697),_=r(86241),x=r(15977),w=r(69137),j=r(14021),A=r(80827),N=r(7962),D=r(89108),O=r(32307),k=r(46050),C=r(58641),S=r(64997),P=r(35404),M=r(1839),T=r(48686),E=r(93893),I=r(27235),F=r(3160),V=r(82853),G=r(68397),R=r(55042),L=r(45899),U=r(96844),q=r(50541),z=r(44080),Z=r(38818),B=r(45742),Q=r(8904),K=r(89798),J=r(4179),Y=r(52105),W=r(39574),X=r(70099),$=r(83194),H=r(73291),tt=r(40073),et=r(14539),rt=r(41233),nt=r(75333),st=r(18931),at=r(80072),it=r(6443),ot=function(){return ot=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},ot.apply(this,arguments)},ct={black:"var(--rsp-black)",green:"var(--rsp-green)",yellow:"var(--rsp-yellow)",red:"var(--rsp-red)",blue:"var(--rsp-blue)",gray:"var(--rsp-grey-400)",lightgray:"var(--rsp-grey-350)",white:"var(--rsp-white)"},lt={"circle-open":i.A,bullet:i.A,dot:i.A,circle:o.A,period:c.A,check:l.A,warning:u.A,error:f.A,times:d.A,"circle-check":b.A,"circle-times":p.A,"chevron-up":g.A,"chevron-down":v.A,"chevron-right":h.A,"chevron-left":m.A,plus:y.A,minus:_.A,sync:x.A,"sync-error":w.A,shortcode:j.A,file:A.A,"file-disabled":N.A,"file-download":D.A,calendar:O.A,"calendar-error":k.A,website:C.A,help:S.A,copy:P.A,trash:M.A,visitor:T.A,visitors:E.A,"visitors-crowd":E.A,time:I.A,pageviews:F.A,referrer:V.A,sessions:G.A,bounces:R.A,bounced_sessions:R.A,bounce_rate:R.A,winner:L.A,live:U.A,total:q.A,graph:z.A,conversion_rate:Z.A,goals:B.A,conversions:B.A,"goals-empty":c.A,filter:Q.A,loading:K.A,desktop:J.A,tablet:Y.A,mobile:W.A,other:X.A,mouse:$.A,eye:F.A,page:H.A,hashtag:tt.A,sun:et.A,world:rt.A,filters:nt.A,referrers:st.A,hook:at.A,"log-in":it.A,"log-out":R.A,alert:f.A};const ut=(0,s.memo)((function(t){var e=t.name,r=void 0===e?"bullet":e,s=t.color,o=void 0===s?"black":s,c=t.size,l=void 0===c?18:c,u=t.strokeWidth,f=void 0===u?1.5:u,d=t.tooltip,b=t.onClick,p=t.className,g=ct[o]||o,v=lt[r]||i.A,h={size:l,color:g,strokeWidth:f},m=(0,n.jsx)("div",{onClick:function(){b&&b()},className:"flex items-center justify-center",children:"bullet"!==r&&"dot"!==r||v!==i.A?(0,n.jsx)(v,ot({className:p},h)):(0,n.jsx)(i.A,ot({},h,{fill:g}))});return d?(0,n.jsx)(a.A,{content:d,children:m}):m}))},62081:(t,e,r)=>{r.d(e,{p:()=>i});var n=r(74848),s=r(51609),a=r(34164),i=(0,s.memo)((function(t){var e=t.children,r=t.className,s=void 0===r?"":r;return(0,n.jsx)("div",{className:(0,a.A)(s,"flex items-center justify-between px-6 py-3"),children:e})}));i.displayName="BlockFooter"},75500:(t,e,r)=>{r.d(e,{A:()=>g});var n=r(74848),s=r(51609),a=r(92731),i=r(681),o=r(46512),c=r(57112),l=r(27723),u=r(9292),f=r(9823);const d=function(t){var e=t.title,r=t.children,s=t.footer,a=t.isOpen,i=t.setIsOpen;return(0,n.jsxs)(f.bL,{open:a,onOpenChange:i,children:[(0,n.jsx)(f.l9,{id:"burst-filter-button",className:"".concat(a?"bg-gray-400 shadow-lg":"bg-gray-300"," focus:ring-blue-500 cursor-pointer rounded-full p-3 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2"),onClick:function(){return i(!a)},children:(0,n.jsx)(c.A,{name:"filter"})}),(0,n.jsx)(f.ZL,{container:document.querySelector(".burst"),children:(0,n.jsxs)(f.UC,{className:"z-50 min-w-[280px] max-w-[400px] rounded-lg border border-gray-200 bg-white p-0 shadow-xl",align:"end",sideOffset:10,arrowPadding:10,children:[(0,n.jsx)(f.i3,{className:"fill-white drop-shadow-sm"}),(0,n.jsx)("div",{className:"border-b border-gray-100 px-4 py-3",children:(0,n.jsx)("h5",{className:"m-0 text-base font-semibold text-black",children:e})}),(0,n.jsx)("div",{className:"px-4 py-2",children:r}),s&&(0,n.jsx)("div",{className:"flex gap-2 rounded-b-lg border-t border-gray-100 bg-gray-50 px-4 py-3",children:s})]})})]})};var b=r(76870),p=function(t,e,r){if(r||2===arguments.length)for(var n,s=0,a=e.length;s<a;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))};const g=function(t){var e=t.onApply,r=t.id,f=t.options,g=t.selectedOptions,v=t.selectionMode,h=void 0===v?"multiple":v,m=(0,s.useState)(!1),y=m[0],_=m[1],x=(0,s.useState)(g),w=x[0],j=x[1];(0,s.useEffect)((function(){j(g)}),[g]);var A=(0,b.A)().isLicenseValid,N=function(t){if("single"!==h||t&&0!==t.length)e(t);else{var r=Object.keys(f)[0];r&&e([r])}_(!1)},D=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.A,{onClick:function(){return N(w),void _(!1)},btnVariant:"primary",size:"sm",className:"flex-1",children:(0,l.__)("Apply","burst-statistics")}),(0,n.jsx)(o.A,{onClick:function(){return function(){var t=Object.keys(f).filter((function(t){return f[t].default}));if("single"===h){var e=0<t.length?t[0]:Object.keys(f)[0];j([e]),N([e])}else j(t),N(t);_(!1)}()},btnVariant:"tertiary",size:"sm",className:"flex-1",children:(0,l.__)("Reset to defaults","burst-statistics")})]});return(0,n.jsx)(d,{isOpen:y,setIsOpen:function(t){t?_(!0):(_(!1),j(g))},title:"single"===h?(0,l.__)("Select metric","burst-statistics"):(0,l.__)("Select metrics","burst-statistics"),footer:D,children:"single"===h?(0,n.jsx)("div",{className:"flex flex-col gap-2",children:Object.keys(f).map((function(t){return(0,n.jsx)(i.A,{id:r+"_"+t,name:r+"_radio_group",value:t,label:f[t].label,checked:w[0]===t,disabled:!0===f[t].disabled||f[t].pro&&!A(),onChange:function(t){return j([t])},children:f[t].pro&&!A()&&(0,n.jsx)(u.A,{label:"Pro"})},t)}))}):Object.keys(f).map((function(t){return(0,n.jsxs)("div",{className:"flex items-center gap-3 py-1",children:[(0,n.jsx)(a.bL,{className:"focus:ring-blue-500 flex h-4 w-4 items-center justify-center rounded border-2 border-gray-300 bg-white transition-colors hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2",id:r+"_"+t,checked:w.includes(t),"aria-label":(0,l.__)("Change metrics","burst-statistics"),disabled:!0===f[t].disabled||f[t].pro&&!A(),onCheckedChange:function(){return function(t){"single"===h?j([t]):w.includes(t)?j(w.filter((function(e){return e!==t}))):j(p(p([],w,!0),[t],!1))}(t)},children:(0,n.jsx)(a.C1,{children:(0,n.jsx)(c.A,{name:"check",size:14,color:"green",strokeWidth:2})})}),(0,n.jsx)("label",{className:"flex-1 cursor-pointer text-sm text-gray",htmlFor:r+"_"+t,children:f[t].label}),(0,n.jsx)("div",{className:"flex-shrink-0",children:f[t].pro&&!A()&&(0,n.jsx)(u.A,{label:"Pro"})})]},t)}))})}},80900:(t,e,r)=>{r.d(e,{Ad:()=>T,BM:()=>_,Ee:()=>A,Iq:()=>D,Nj:()=>h,YP:()=>P,ZV:()=>j,cA:()=>C,cf:()=>S,fU:()=>w,fs:()=>m,gs:()=>v,ii:()=>O,oI:()=>y,qQ:()=>N,vd:()=>x});var n=r(38443),s=r(31127),a=r(66212),i=r(92998),o=r(20543),c=r(2118),l=r(19312),u=r(17054),f=r(49317),d=r(53039),b=r(72346),p=r(81810),g=r(27723),v=function(t,e){if(void 0===e&&(e=new Date),"number"==typeof t&&(t=new Date(1e3*t)),!(t instanceof Date))return"-";var r={year:31536e6,month:2628e6,day:864e5,hour:36e5,minute:6e4,second:1e3},n=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),s=t-e;for(var a in r)if(Math.abs(s)>r[a]||"second"===a)return n.format(Math.round(s/r[a]),a)},h=function(t,e,r){void 0===r&&(r=!0);var n=(t=Number(t))/(e=Number(e));return isNaN(n)&&(n=0),r?new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1}).format(n):n};function m(t,e){var r={},n=((t=Number(t))-(e=Number(e)))/e;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}function y(t,e){var r={},n=((t=Number(t))-(e=Number(e)))/100;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}var _=function(t){return(0,n.dateI18n)(burst_settings.date_format,new Date(1e3*t))},x=function(t){return t&&("number"==typeof t||Date.parse(t)>=16409952e5)};function w(t){void 0===t&&(t=0);var e=Number(t);isNaN(e)&&(e=0);var r=Math.floor(e/1e3),n=Math.floor(r/3600),s=Math.floor((r-3600*n)/60),a=r-3600*n-60*s,i=function(t){return isNaN(t)?"00":String(t).padStart(2,"0")};return 0===n?[s,a].map(i).join(":"):[n,s,a].map(i).join(":")}function j(t,e){return void 0===e&&(e=1),t=Number(t),isNaN(t)&&(t=0),t<1e3&&(e=0),new Intl.NumberFormat(void 0,{style:"decimal",notation:"compact",compactDisplay:"short",maximumFractionDigits:e}).format(t)}function A(t,e){return void 0===e&&(e=1),t=Number(t),isNaN(t)&&(t=0),0===t?"0%":t>0&&t<.1?"<0.1%":new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:e}).format(t/100)}function N(t){return t?burst_settings.countries[t.toUpperCase()]||(0,g.__)("Not set","burst-statistics"):(0,g.__)("Unknown","burst-statistics")}function D(t){return t?burst_settings.continents[t.toUpperCase()]||(0,g.__)("Not set","burst-statistics"):(0,g.__)("Unknown","burst-statistics")}function O(t){void 0===t&&(t=new Date);var e=-60*t.getTimezoneOffset(),r=Math.floor(t.getTime()/1e3)+3600*burst_settings.gmt_offset-e;return new Date(1e3*r)}var k=O(),C={today:{label:(0,g.__)("Today","burst-statistics"),range:function(){return{startDate:(0,s.default)(k),endDate:(0,a.default)(k)}}},yesterday:{label:(0,g.__)("Yesterday","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,i.default)(k,-1)),endDate:(0,a.default)((0,i.default)(k,-1))}}},"last-7-days":{label:(0,g.__)("Last 7 days","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,i.default)(k,-7)),endDate:(0,a.default)((0,i.default)(k,-1))}}},"last-30-days":{label:(0,g.__)("Last 30 days","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,i.default)(k,-30)),endDate:(0,a.default)((0,i.default)(k,-1))}}},"last-90-days":{label:(0,g.__)("Last 90 days","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,i.default)(k,-90)),endDate:(0,a.default)((0,i.default)(k,-1))}}},"last-month":{label:(0,g.__)("Last month","burst-statistics"),range:function(){return{startDate:(0,o.default)((0,c.default)(k,-1)),endDate:(0,l.default)((0,c.default)(k,-1))}}},"week-to-date":{label:(0,g.__)("Week to date","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,i.default)(k,-k.getDay())),endDate:(0,a.default)(k)}}},"month-to-date":{label:(0,g.__)("Month to date","burst-statistics"),range:function(){return{startDate:(0,o.default)(k),endDate:(0,a.default)(k)}}},"year-to-date":{label:(0,g.__)("Year to date","burst-statistics"),range:function(){return{startDate:(0,u.A)(k),endDate:(0,a.default)(k)}}},"last-year":{label:(0,g.__)("Last year","burst-statistics"),range:function(){return{startDate:(0,u.A)((0,f.default)(k,-1)),endDate:(0,d.A)((0,f.default)(k,-1))}}}},S=function(t){return Object.values(t).filter(Boolean).map((function(t){var e=C[t];return e.isSelected=M,e}))},P=function(t,e){var r="MMMM d, yyyy";return{startDate:t?(0,b.default)(new Date(t),r):"",endDate:e?(0,b.default)(new Date(e),r):""}};function M(t){var e=this.range();return(0,p.default)(t.startDate,e.startDate)&&(0,p.default)(t.endDate,e.endDate)}function T(t,e){if(void 0===e&&(e={}),!t||!e[t])return function(t){return j(t)};var r=e[t],n=r.isPercentage,s=r.isTime,a=r.precision,i=r.suffix;return function(t){if(null==t)return"";if(n)return A(t,a);if(s)return w(t);var e=j(t,a);return i&&(e+=i),e}}},83101:(t,e,r)=>{r.d(e,{A:()=>g,l:()=>p});var n=r(97665),s=r(48069),a=r(57097),i=r(86275),o=r(55446),c=r(27723),l=r(1932),u=r(76870),f=function(){return f=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},f.apply(this,arguments)},d=function(t,e,r,n){return new(r||(r=Promise))((function(s,a){function i(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,o)}c((n=n.apply(t,e||[])).next())}))},b=function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},p=function(t){return t.map((function(e){var r=f({},e);if(e.react_conditions){var n=function(t,e){return!t||0===Object.keys(t).length||Object.entries(t).some((function(t){var r=t[0],n=t[1],s=e.find((function(t){return t.id===r}));if(!s)return!1;var a=s.value;return!!a&&n.includes(a)}))}(e.react_conditions,t);"disable"===e.condition_action?r.disabled=!n:r.conditionallyDisabled=!n}return r}))};const g=function(){var t,e,r,p=(0,n.jE)(),g=(0,s.I)({queryKey:["goals_data"],queryFn:function(){return d(void 0,void 0,void 0,(function(){var t;return b(this,(function(e){switch(e.label){case 0:return[4,(0,i.DX)()];case 1:return[2,{goals:(t=e.sent()).goals||[],predefinedGoals:t.predefinedGoals||[],goalFields:Object.values(t.goalFields||{})}]}}))}))},retry:1}),v=(0,a.n)({mutationFn:function(){return d(void 0,void 0,void 0,(function(){var t,e;return b(this,(function(r){switch(r.label){case 0:return t=(null===(e=p.getQueryData(["goals_data"]))||void 0===e?void 0:e.goals)||[],[4,(0,i.d2)({goals:t})];case 1:return[2,r.sent()]}}))}))},onSuccess:function(){},onError:function(t){console.error(t),o.toast.error((0,c.__)("Failed to save goals","burst-statistics"))}}),h=(0,a.n)({mutationFn:function(t){return d(void 0,[t],void 0,(function(t){var e,r=t.id,n=t.value;return b(this,(function(t){switch(t.label){case 0:return e=[{id:r,title:n}],[4,(0,i.d2)({goals:e})];case 1:return[2,t.sent()]}}))}))},onError:function(t){console.error(t),o.toast.error((0,c.__)("Failed to save goal title","burst-statistics"))}}),m=(0,a.n)({mutationFn:function(){return d(void 0,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:return[4,(0,i.D)()];case 1:return[2,t.sent()]}}))}))},onSuccess:function(t){p.setQueryData(["goals_data"],(function(e){return e?(0,l.jM)(e,(function(e){e.goals.push(t.goal)})):e})),o.toast.success((0,c.__)("Goal added successfully!","burst-statistics"))},onError:function(t){console.error(t),o.toast.error((0,c.__)("Failed to add goal","burst-statistics"))}}),y=(0,a.n)({mutationFn:function(t){return d(void 0,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return[4,(0,i.$x)(t)];case 1:return[2,e.sent()]}}))}))},onSuccess:function(t,e){t.deleted&&(p.setQueryData(["goals_data"],(function(t){return t?(0,l.jM)(t,(function(t){if(1===t.goals.length)t.goals=[];else{var r=t.goals.findIndex((function(t){return t.id===e}));-1!==r&&t.goals.splice(r,1)}})):t})),o.toast.success((0,c.__)("Goal deleted successfully!","burst-statistics")))},onError:function(t){console.error(t),o.toast.error((0,c.__)("Failed to delete goal","burst-statistics"))}}),_=(0,a.n)({mutationFn:function(t){return d(void 0,[t],void 0,(function(t){var e=t.predefinedGoalId,r=t.type,n=t.cookieless;return b(this,(function(t){switch(t.label){case 0:if("hook"===r&&n)throw new Error((0,c.__)("Cannot add server side goals in combination with cookieless tracking","burst-statistics"));if(!u.A.getState().isPro)throw new Error((0,c.__)("Predefined goals are a premium feature.","burst-statistics"));return[4,(0,i.ZI)(e)];case 1:return[2,t.sent()]}}))}))},onSuccess:function(t){p.setQueryData(["goals_data"],(function(e){return e?(0,l.jM)(e,(function(e){e.goals.push(t.goal)})):e})),o.toast.success((0,c.__)("Successfully added predefined goal!","burst-statistics"))},onError:function(t){console.error(t),o.toast.error(t.message||(0,c.__)("Failed to add predefined goal","burst-statistics"))}});return{goals:(null===(t=g.data)||void 0===t?void 0:t.goals)||[],goalFields:(null===(e=g.data)||void 0===e?void 0:e.goalFields)||[],predefinedGoals:(null===(r=g.data)||void 0===r?void 0:r.predefinedGoals)||[],isLoading:g.isLoading,isError:g.isError,getGoal:function(t){var e,r=(null===(e=g.data)||void 0===e?void 0:e.goals)||[];if(!Array.isArray(r))return!1;var n=r.findIndex((function(e){return e.id==t}));return-1!==n&&r[n]},setGoalValue:function(t,e,r){p.setQueryData(["goals_data"],(function(n){return n?(0,l.jM)(n,(function(n){var s=n.goals.findIndex((function(e){return e.id===t}));-1!==s&&(n.goals[s][e]=r)})):n}))},updateGoal:function(t,e){p.setQueryData(["goals_data"],(function(r){return r?(0,l.jM)(r,(function(r){var n=r.goals.findIndex((function(e){return e.id===t}));-1!==n&&(r.goals[n]=f(f({},r.goals[n]),e))})):r}))},saveGoals:v.mutateAsync,saveGoalTitle:function(t,e){return h.mutateAsync({id:t,value:e})},addGoal:m.mutateAsync,deleteGoal:y.mutateAsync,addPredefinedGoal:function(t,e,r){return _.mutateAsync({predefinedGoalId:t,type:e,cookieless:r})},invalidateGoals:function(){return p.invalidateQueries(["goals_data"])}}}},86275:(t,e,r)=>{r.d(e,{$x:()=>A,D:()=>N,DX:()=>j,Eo:()=>O,Ey:()=>x,K5:()=>C,ZI:()=>D,bQ:()=>k,d2:()=>w,nd:()=>S,qN:()=>y,ww:()=>_});var n=r(74848),s=r(1455),a=r.n(s),i=r(27723),o=r(55446),c=function(){return c=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},c.apply(this,arguments)},l=function(t,e,r,n){return new(r||(r=Promise))((function(s,a){function i(t){try{c(n.next(t))}catch(t){a(t)}}function o(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,o)}c((n=n.apply(t,e||[])).next())}))},u=function(t,e){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},f=function(t,e,r){if(r||2===arguments.length)for(var n,s=0,a=e.length;s<a;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))},d=function(){return-1!==burst_settings.site_url.indexOf("?")?"&":"?"},b=function(){return"nonce="+burst_settings.burst_nonce+"&token="+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)},p=function(t,e){void 0===e&&(e=!1);var r=(0,i.__)("Server error","burst-statistics");if(t=t.replace(/(<([^>]+)>)/gi,""),e){var s=e.split("?")[0].split("/"),a=s.indexOf("v1")+1;r=(0,i.__)("Server error in","burst-statistics")+" "+s[a]+"/"+s[a+1]}r+=": "+t;var c=(0,n.jsx)("div",{title:(0,i.__)("Click to copy","burst-statistics"),onClick:function(){navigator.clipboard.writeText(r),o.toast.success((0,i.__)("Error copied to clipboard","burst-statistics"))},children:r});o.toast.error(c,{autoClose:15e3})},g=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return l(void 0,f([t],e,!0),void 0,(function(t,e,r){var n;return void 0===e&&(e="GET"),void 0===r&&(r={}),u(this,(function(s){return n={path:t,method:e},"POST"===e&&(r.nonce=burst_settings.burst_nonce,n.data=r),[2,a()(n).then((function(t){if(!t.request_success)throw t.hasOwnProperty("message")?new Error(t.message):new Error("Received unexpected response from server. Please check if the Rest API is enabled.");if(t.code&&200!==t.code)throw new Error(t.message);return delete t.request_success,t})).catch((function(s){return v(e,t,r).catch((function(){throw p(s.message,n.path),s}))}))]}))}))},v=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return l(void 0,f([t,e],r,!0),void 0,(function(t,e,r){var n,s,a,i;return void 0===r&&(r=null),u(this,(function(o){switch(o.label){case 0:n="GET"===t?"".concat(m("ajax"),"&rest_action=").concat(e.replace("?","&")):m("ajax"),s={method:t,headers:{"Content-Type":"application/json; charset=UTF-8"}},"POST"===t&&(s.body=JSON.stringify({path:e,data:r},h)),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch(n,s)];case 2:if(!(a=o.sent()).ok)throw p(!1,a.statusText),new Error(a.statusText);return[4,a.json()];case 3:if(!(i=o.sent()).data||!Object.prototype.hasOwnProperty.call(i.data,"request_success"))throw new Error("Invalid data error");return delete i.data.request_success,[2,Promise.resolve(i.data)];case 4:return o.sent(),[2,Promise.reject(new Error("AJAX request failed"))];case 5:return[2]}}))}))},h=function(t,e){return t?t&&t.includes("Control")?void 0:"object"==typeof e?JSON.parse(JSON.stringify(e,h)):e:e},m=function(t){var e;return e=void 0===t?burst_settings.site_url:burst_settings.admin_ajax_url,"https:"===window.location.protocol&&-1===e.indexOf("https://")?e.replace("http://","https://"):e},y=function(t,e){return g("burst/v1/options/set"+d()+b(),"POST",{option:{option:t,value:e}})},_=function(){return g("burst/v1/fields/get"+d()+b())},x=function(t){return g("burst/v1/fields/set"+d(),"POST",{fields:t})},w=function(t){return g("burst/v1/goals/set"+d()+b(),"POST",t)},j=function(){return g("burst/v1/goals/get"+d()+b())},A=function(t){return g("burst/v1/goals/delete"+d()+b(),"POST",{id:t})},N=function(){return g("burst/v1/goals/add"+d()+b(),"POST",{})},D=function(t){return g("burst/v1/goals/add_predefined"+d()+b(),"POST",{id:t})},O=function(t,e){return void 0===e&&(e={}),g("burst/v1/do_action/".concat(t),"POST",{action_data:e}).then((function(t){return Object.prototype.hasOwnProperty.call(t,"data")?t.data:[]}))},k=function(t,e,r,n){for(var s=[],a=4;a<arguments.length;a++)s[a-4]=arguments[a];return l(void 0,f([t,e,r,n],s,!0),void 0,(function(t,e,r,n,s){var a,i,o,l,f,b,p;return void 0===s&&(s={}),u(this,(function(u){switch(u.label){case 0:return a=s.filters,i=s.metrics,o=s.group_by,l=s.currentView,f=c(c(c(c({date_start:e,date_end:r,date_range:n,nonce:burst_settings.burst_nonce,goal_id:s.goal_id,token:Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)},a&&{filters:a}),i&&{metrics:i}),o&&{group_by:o}),l&&{currentView:l}),v=f,b=Object.keys(v).filter((function(t){return void 0!==v[t]&&null!==v[t]})).map((function(t){var e=function(t){return Array.isArray(t)?t:"object"==typeof t&&null!==t?JSON.stringify(t):t}(v[t]);return Array.isArray(e)?e.map((function(e){return"".concat(encodeURIComponent(t),"[]=").concat(encodeURIComponent(e))})).join("&"):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))})).join("&"),p="burst/v1/data/".concat(t).concat(d()).concat(b),[4,g(p,"GET")];case 1:return[2,u.sent()]}var v}))}))},C=function(t){return g("burst/v1/posts/".concat(d()).concat(b(),"&search=").concat(t)).then((function(t){return Object.prototype.hasOwnProperty.call(t,"posts")?t.posts:[]}))},S=function(t){return l(void 0,void 0,void 0,(function(){var e,r;return u(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch(t)];case 1:if(!(e=n.sent()).ok)throw new Error("HTTP error! Status: ".concat(e.status));return[4,e.json()];case 2:return[2,n.sent()];case 3:throw r=n.sent(),console.error("Error fetching JSON data:",r),r;case 4:return[2]}}))}))}},96744:(t,e,r)=>{r.d(e,{q:()=>i});var n=r(74848),s=r(51609),a=r(34164),i=(0,s.memo)((function(t){var e=t.title,r=t.controls,s=t.className,i=void 0===s?"":s;return(0,n.jsxs)("div",{className:(0,a.A)(i,"flex min-h-16 items-center justify-between px-6 gap-4"),children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:e}),r]})}));i.displayName="BlockHeading"}}]);