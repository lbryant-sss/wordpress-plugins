"use strict";(globalThis.webpackChunkburst_statistics=globalThis.webpackChunkburst_statistics||[]).push([[64],{84:(t,e,n)=>{n.d(e,{A:()=>s});var r=n(4848);const s=function(t){var e=t.children,n=t.className,s=void 0===n?"":n;return(0,r.jsx)("div",{className:"absolute inset-0 flex items-end justify-center bg-black/10 z-50 py-4 px-4 ".concat(s),children:(0,r.jsx)("div",{className:"bg-white rounded-lg px-5 py-3  w-[90%] max-w-md relative shadow-md",children:e})})}},240:(t,e,n)=>{n.d(e,{c:()=>a});var r=n(1511),s=n(1932),i=n(7723),a=(0,r.v)((function(t,e){return{filters:{page_id:"",page_url:"",goal_id:"",referrer:"",device:"",browser:"",platform:"",country_code:""},filtersConf:{page_url:{label:(0,i.__)("Page","burst-statistics"),icon:"page"},goal_id:{label:(0,i.__)("Goal","burst-statistics"),icon:"goals"},referrer:{label:(0,i.__)("Referrer URL","burst-statistics"),icon:"referrer"},device:{label:(0,i.__)("Device","burst-statistics"),icon:"desktop"},browser:{label:(0,i.__)("Browser","burst-statistics"),icon:"browser"},platform:{label:(0,i.__)("Operating System","burst-statistics"),icon:"operating-system"},country_code:{label:(0,i.__)("Country","burst-statistics"),icon:"world"}},animate:null,setAnimate:function(e){return t({animate:e})},setFilters:function(n,r,i){void 0===i&&(i=!1),t((function(t){return(0,s.jM)(t,(function(t){t.filters[n]=r}))})),i&&e().setAnimate(n)},deleteFilter:function(e){t((function(t){return(0,s.jM)(t,(function(t){t.filters[e]=""}))}))}}}))},332:(t,e,n)=>{n.d(e,{G:()=>i});var r=n(1511),s=n(6275),i=(0,r.v)((function(t,e){return{metrics:["visitors","pageviews"],loaded:!1,getMetrics:function(){if(e().loaded)return e().metrics;var n=(0,s.Lg)("insights_metrics",["visitors","pageviews"]);return n=n.filter((function(t){return"conversions"!==t})),t({metrics:n,loaded:!0}),n},setMetrics:function(e){t({metrics:e}),(0,s.ZB)("insights_metrics",e)}}}))},900:(t,e,n)=>{n.d(e,{BM:()=>x,Ee:()=>k,Nj:()=>g,YP:()=>S,ZV:()=>j,cA:()=>O,cf:()=>M,fU:()=>w,fs:()=>m,gs:()=>p,ii:()=>N,oI:()=>y,qQ:()=>A,vd:()=>_});var r=n(8443),s=n(1127),i=n(6212),a=n(2998),o=n(543),l=n(2118),c=n(9312),u=n(7054),d=n(9317),f=n(3039),v=n(2346),h=n(1810),b=n(7723),p=function(t,e){if(void 0===e&&(e=new Date),"number"==typeof t&&(t=new Date(1e3*t)),!(t instanceof Date))return"-";var n={year:31536e6,month:2628e6,day:864e5,hour:36e5,minute:6e4,second:1e3},r=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),s=t-e;for(var i in n)if(Math.abs(s)>n[i]||"second"===i)return r.format(Math.round(s/n[i]),i)},g=function(t,e,n){void 0===n&&(n=!0);var r=(t=Number(t))/(e=Number(e));return isNaN(r)&&(r=0),n?new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1}).format(r):r};function m(t,e){var n={},r=((t=Number(t))-(e=Number(e)))/e;return isNaN(r)&&(r=0),n.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(r),n.status=0<r?"positive":"negative",r===1/0&&(n.val="",n.status="positive"),n}function y(t,e){var n={},r=((t=Number(t))-(e=Number(e)))/100;return isNaN(r)&&(r=0),n.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(r),n.status=0<r?"positive":"negative",r===1/0&&(n.val="",n.status="positive"),n}var x=function(t){return(0,r.dateI18n)(burst_settings.date_format,new Date(1e3*t))},_=function(t){return t&&("number"==typeof t||Date.parse(t)>=16409952e5)};function w(t){void 0===t&&(t=0);var e=Number(t);isNaN(e)&&(e=0);var n=Math.floor(e/1e3),r=Math.floor(n/3600),s=Math.floor((n-3600*r)/60);return[r,s,n-3600*r-60*s].map((function(t){return isNaN(t)?"00":String(t).padStart(2,"0")})).join(":")}function j(t,e){return void 0===e&&(e=1),t=Number(t),isNaN(t)&&(t=0),new Intl.NumberFormat(void 0,{style:"decimal",notation:"compact",compactDisplay:"short",maximumFractionDigits:e}).format(t)}function k(t,e){return void 0===e&&(e=1),t=Number(t)/100,isNaN(t)&&(t=0),new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:e}).format(t)}function A(t){return t&&burst_settings.countries[t.toUpperCase()]||(0,b.__)("Unknown","burst-statistics")}function N(t){void 0===t&&(t=new Date);var e=-60*t.getTimezoneOffset(),n=Math.floor(t.getTime()/1e3)+3600*burst_settings.gmt_offset-e;return new Date(1e3*n)}var D=N(),O={today:{label:(0,b.__)("Today","burst-statistics"),range:function(){return{startDate:(0,s.default)(D),endDate:(0,i.default)(D)}}},yesterday:{label:(0,b.__)("Yesterday","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,a.default)(D,-1)),endDate:(0,i.default)((0,a.default)(D,-1))}}},"last-7-days":{label:(0,b.__)("Last 7 days","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,a.default)(D,-7)),endDate:(0,i.default)((0,a.default)(D,-1))}}},"last-30-days":{label:(0,b.__)("Last 30 days","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,a.default)(D,-30)),endDate:(0,i.default)((0,a.default)(D,-1))}}},"last-90-days":{label:(0,b.__)("Last 90 days","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,a.default)(D,-90)),endDate:(0,i.default)((0,a.default)(D,-1))}}},"last-month":{label:(0,b.__)("Last month","burst-statistics"),range:function(){return{startDate:(0,o.default)((0,l.default)(D,-1)),endDate:(0,c.default)((0,l.default)(D,-1))}}},"week-to-date":{label:(0,b.__)("Week to date","burst-statistics"),range:function(){return{startDate:(0,s.default)((0,a.default)(D,-D.getDay())),endDate:(0,i.default)(D)}}},"month-to-date":{label:(0,b.__)("Month to date","burst-statistics"),range:function(){return{startDate:(0,o.default)(D),endDate:(0,i.default)(D)}}},"year-to-date":{label:(0,b.__)("Year to date","burst-statistics"),range:function(){return{startDate:(0,u.A)(D),endDate:(0,i.default)(D)}}},"last-year":{label:(0,b.__)("Last year","burst-statistics"),range:function(){return{startDate:(0,u.A)((0,d.default)(D,-1)),endDate:(0,f.A)((0,d.default)(D,-1))}}}},M=function(t){return Object.values(t).filter(Boolean).map((function(t){var e=O[t];return e.isSelected=T,e}))},S=function(t,e){var n="MMMM d, yyyy";return{startDate:t?(0,v.default)(new Date(t),n):"",endDate:e?(0,v.default)(new Date(e),n):""}};function T(t){var e=this.range();return(0,h.default)(t.startDate,e.startDate)&&(0,h.default)(t.endDate,e.endDate)}},979:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(2998),s=n(551),i=n(4188);function a(t,e){(0,s.A)(2,arguments);var n=(0,i.A)(e);return(0,r.default)(t,-n)}},1064:(t,e,n)=>{n.r(e),n.d(e,{component:()=>gt});var r=n(4848),s=n(1609),i=n(7723),a=n(7112),o=n(4164);const l=function(t){var e=t.task;return(0,r.jsxs)("div",{className:"burst-task-element",children:[(0,r.jsx)(c,{task:e}),"skeleton"!==e.icon&&(0,r.jsx)("p",{className:"burst-task-message",dangerouslySetInnerHTML:{__html:e.msg}}),"skeleton"===e.icon&&(0,r.jsx)("div",{className:"burst-task-message",children:(0,r.jsx)(a.A,{name:"loading"})}),e.url&&(0,r.jsx)("a",{target:e.url.startsWith("#")?"_self":"_blank",href:e.url,className:"text-blue underline",children:"sale"===e.icon?(0,i.__)("Get 40% Off","burst-statistics"):(0,i.__)("More info","burst-statistics")}),e.highlight_field_id&&(0,r.jsx)("span",{className:"burst-task-enable",onClick:function(){t.highLightField(t.task.highlight_field_id)},children:(0,i.__)("Fix","burst-statistics")}),e.plusone&&(0,r.jsx)("span",{className:"burst-plusone",children:"1"}),e.dismissible&&"completed"!==e.status&&(0,r.jsx)("div",{className:"burst-task-dismiss",children:(0,r.jsx)("button",{type:"button","data-id":e.id,onClick:t.onCloseTaskHandler,children:(0,r.jsx)("span",{className:"burst-close-warning-x",children:(0,r.jsx)("svg",{width:"20",height:"20",viewBox:"0, 0, 400,400",children:(0,r.jsx)("path",{id:"path0",d:"M55.692 37.024 C 43.555 40.991,36.316 50.669,36.344 62.891 C 36.369 73.778,33.418 70.354,101.822 138.867 L 162.858 200.000 101.822 261.133 C 33.434 329.630,36.445 326.135,36.370 337.109 C 36.270 351.953,47.790 363.672,62.483 363.672 C 73.957 363.672,68.975 367.937,138.084 298.940 L 199.995 237.127 261.912 298.936 C 331.022 367.926,326.053 363.672,337.517 363.672 C 351.804 363.672,363.610 352.027,363.655 337.891 C 363.689 326.943,367.629 331.524,299.116 262.841 C 265.227 228.868,237.500 200.586,237.500 199.991 C 237.500 199.395,265.228 171.117,299.117 137.150 C 367.625 68.484,363.672 73.081,363.672 62.092 C 363.672 48.021,351.832 36.371,337.500 36.341 C 326.067 36.316,331.025 32.070,261.909 101.066 L 199.990 162.877 138.472 101.388 C 87.108 50.048,76.310 39.616,73.059 38.191 C 68.251 36.083,60.222 35.543,55.692 37.024 ",stroke:"none",fill:"#000000"})})})})})]})};var c=function(t){return(0,r.jsx)("span",{className:(0,o.A)("burst-task-status","open"===t.task.status&&"bg-blue text-white","completed"===t.task.icon&&"bg-green text-white","warning"===t.task.icon&&"bg-yellow text-white","error"===t.task.icon&&"bg-red text-white","new"===t.task.icon&&"bg-blue text-white","skeleton"===t.task.icon&&"bg-gray-200 text-black"),children:t.task.label})},u=n(1511),d=n(6275),f=function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function o(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}l((r=r.apply(t,e||[])).next())}))},v=function(t,e){var n,r,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const h=(0,u.v)((function(t,e){return{filter:(0,d.Lg)("task_filter","all"),tasks:[],filteredTasks:[],error:!1,loading:!0,setFilter:function(e){(0,d.ZB)("task_filter",e),t((function(t){return{filter:e}}))},filterTasks:function(){var n=[];e().tasks.map((function(t,e){"completed"!==t.icon&&n.push(t)})),t((function(t){return{filteredTasks:n}}))},getTasks:function(){return f(void 0,void 0,void 0,(function(){var n,r;return v(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(0,d.Eo)("tasks")];case 1:if(n=s.sent().tasks,!Array.isArray(n))throw console.error("Tasks is not an array"),new Error("Tasks is not an array");return t((function(t){return{tasks:n,loading:!1}})),e().filterTasks(),[3,3];case 2:return r=s.sent(),t((function(t){return{error:r.message}})),[3,3];case 3:return[2]}}))}))},dismissTask:function(n){return f(void 0,void 0,void 0,(function(){var r;return v(this,(function(s){switch(s.label){case 0:return r=(r=e().tasks).filter((function(t){return t.id!==n})),t((function(t){return{tasks:r}})),[4,(0,d.Eo)("dismiss_task",{id:n}).then((function(t){t.error&&console.error(t.error)}))];case 1:return s.sent(),[2]}}))}))}}}));var b=n(7926),p=n(6744),g=n(3933),m=n(2081),y=n(4301),x=n(900),_=n(6512);const w=function(t){var e=(0,s.useState)("loading"),n=e[0],o=e[1],l=(0,s.useState)(0),c=l[0],u=l[1];(0,s.useMemo)((function(){d.Eo("tracking").then((function(t){if("beacon"===t.status||"rest"===t.status||"disabled"===t.status){var e=t.status?t.status:"error",n=t.last_test?t.last_test:(0,i.__)("Just now","burst-statistics");o(e),u(n)}else o("error"),u(!1)}))}),[]);var f=(0,i.__)("Last checked:","burst-statistics")+" "+(0,x.gs)(new Date(1e3*c)),v={loading:(0,i.__)("Loading tracking status...","burst-statistics"),error:(0,i.__)("Error checking tracking status","burst-statistics"),rest:(0,i.__)("Tracking with REST API","burst-statistics"),beacon:(0,i.__)("Tracking with an endpoint","burst-statistics"),disabled:(0,i.__)("Tracking is disabled","burst-statistics")},h={loading:{icon:"loading",color:"black"},error:{icon:"circle-times",color:"red"},rest:{icon:"circle-check",color:"green"},beacon:{icon:"circle-check",color:"green"},disabled:{icon:"circle-times",color:"red"}},b={loading:"",error:(0,i.__)("Tracking does not seem to work. Check manually or contact support.","burst-statistics"),rest:(0,i.__)("Tracking is working. You are using the REST API to collect statistics.","burst-statistics"),beacon:(0,i.__)("Tracking is working. You are using the Burst endpoint to collect statistics. This type of tracking is accurate and lightweight.","burst-statistics"),disabled:(0,i.__)("Tracking is disabled","burst-statistics")}[n]+" "+f,p=v[n],g=h[n].icon,m=h[n].color;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.A,{btnVariant:"tertiary",link:{to:"/statistics"},children:(0,i.__)("View my statistics","burst-statistics")}),(0,r.jsx)(y.A,{content:b,children:(0,r.jsxs)("div",{className:"burst-legend burst-flex-push-right burst-tooltip-trackingtext",children:[(0,r.jsx)(a.A,{name:g,color:m}),(0,r.jsx)("div",{children:p})]})})]})};var j=function(){return(0,r.jsxs)("div",{className:"burst-task-element",children:[(0,r.jsx)("span",{className:"burst-task-status burst-loading",children:(0,i.__)("Loading...","burst-statistics")}),(0,r.jsx)("p",{className:"burst-task-message",children:(0,i.__)("Loading tasks...","burst-statistics")})]})},k=function(){return(0,r.jsxs)("div",{className:"burst-task-element",children:[(0,r.jsx)("span",{className:"burst-task-status burst-completed",children:(0,i.__)("Completed","burst-statistics")}),(0,r.jsx)("p",{className:"burst-task-message",children:(0,i.__)("No remaining tasks to show","burst-statistics")})]})},A=function(t){var e=t.filter,n=t.setFilter;return(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("button",{className:"py-1.5 text-sm rounded-md transition-colors ".concat("all"===e?"text-gray-700 underline font-bold":""),onClick:function(){return n("all")},children:(0,i.__)("All tasks","burst-statistics")}),(0,r.jsx)("span",{className:"text-gray-400",children:"|"}),(0,r.jsx)("button",{className:"py-1.5 text-sm rounded-md transition-colors text-gray-700 ".concat("remaining"===e?"text-gray-700 underline font-bold":""),onClick:function(){return n("remaining")},children:(0,i.__)("Remaining tasks","burst-statistics")})]})};const N=function(t){var e=t.highLightField,n=h((function(t){return t.loading})),a=h((function(t){return t.filter})),o=h((function(t){return t.setFilter})),c=h((function(t){return t.tasks})),u=h((function(t){return t.getTasks})),d=h((function(t){return t.filteredTasks})),f=h((function(t){return t.dismissTask}));(0,s.useEffect)((function(){u()}),[u]);var v="remaining"===a?d:c;return(0,r.jsxs)(b.A,{className:"row-span-2 lg:col-span-12 xl:col-span-6",children:[(0,r.jsx)(p.A,{title:(0,i.__)("Progress","burst-statistics"),controls:(0,r.jsx)(A,{filter:a,setFilter:o})}),(0,r.jsx)(g.A,{className:"px-0 py-0",children:(0,r.jsx)("div",{className:"burst-progress-block",children:(0,r.jsx)("div",{className:"burst-scroll-container",children:n?(0,r.jsx)(j,{}):0===v.length?(0,r.jsx)(k,{}):v.map((function(t){return(0,r.jsx)(l,{task:t,onCloseTaskHandler:function(){return f(t.id)},highLightField:e},t.id)}))})})}),(0,r.jsx)(m.A,{children:(0,r.jsx)(w,{})})]})};var D=n(8069);const O=function(t){return e=void 0,n=void 0,s=function(){var e,n,r,s,i;return function(t,e){var n,r,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,(function(a){switch(a.label){case 0:return e=t.startDate,n=t.endDate,r=t.range,s=t.filters,[4,(0,d.bQ)("live-visitors",e,n,r,{filters:s})];case 1:return i=a.sent().data,[2,(0,x.ZV)(i)]}}))},new((r=void 0)||(r=Promise))((function(t,i){function a(t){try{l(s.next(t))}catch(t){i(t)}}function o(t){try{l(s.throw(t))}catch(t){i(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,o)}l((s=s.apply(e,n||[])).next())}));var e,n,r,s};var M=function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e].value="timeOnPage"===e?(0,x.fU)(t[e].value):(0,x.ZV)(t[e].value));return t};const S=function(t){return e=void 0,n=void 0,s=function(){var e,n,r,s,i;return function(t,e){var n,r,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,(function(a){switch(a.label){case 0:return e=t.startDate,n=t.endDate,r=t.range,s=t.filters,[4,(0,d.bQ)("today",e,n,r,{filters:s})];case 1:return i=a.sent().data,[2,M(i)]}}))},new((r=void 0)||(r=Promise))((function(t,i){function a(t){try{l(s.next(t))}catch(t){i(t)}}function o(t){try{l(s.throw(t))}catch(t){i(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,o)}l((s=s.apply(e,n||[])).next())}));var e,n,r,s};var T=n(2346),E=n(1127),P=n(6212),C=n(3392);function I(t){return 100<(t=parseInt(t))?"visitors-crowd":10<t?"visitors":"visitor"}const F=function(){var t=(0,s.useRef)(5e3),e=function(e){t.current=e},n=(0,s.useMemo)((function(){return(0,x.ii)()}),[]),o=(0,s.useMemo)((function(){return(0,T.default)((0,E.default)(n),"yyyy-MM-dd")}),[n]),l=(0,s.useMemo)((function(){return(0,T.default)((0,P.default)(n),"yyyy-MM-dd")}),[n]),c=(0,s.useMemo)((function(){return{live:{title:(0,i.__)("Live","burst-statistics"),icon:"visitor"},today:{title:(0,i.__)("Total","burst-statistics"),value:"-",icon:"visitor"},mostViewed:{title:"-",value:"-"},pageviews:{title:"-",value:"-"},referrer:{title:"-",value:"-"},timeOnPage:{title:"-",value:"-"}}}),[]),u=(0,D.I)({queryKey:["live-visitors"],queryFn:O,refetchInterval:t.current,placeholderData:"-",onError:function(){return e(0)},gcTime:1e4}),d=(0,D.I)({queryKey:["today",o,l],queryFn:function(){return S({startDate:o,endDate:l})},refetchInterval:2*t.current,placeholderData:c,onError:function(){return e(0)},gcTime:2e4}),f=u.data,v=d.data;[u,d].some((function(t){return t.isError}))&&(v=c);var h=I(f||0),m="loading";return v&&v.today&&(m=I(v.today.value?v.today.value:0)),(0,r.jsxs)(b.A,{className:"row-span-2 lg:col-span-6 xl:col-span-3",children:[(0,r.jsx)(p.A,{title:(0,i.__)("Today","burst-statistics"),controls:void 0}),(0,r.jsx)(g.A,{className:"px-0 py-0",children:(0,r.jsxs)("div",{className:"burst-today",children:[(0,r.jsxs)("div",{className:"burst-today-select",children:[(0,r.jsx)(y.A,{content:v.live.tooltip,children:(0,r.jsxs)("div",{className:"burst-today-select-item burst-tooltip-live",children:[(0,r.jsx)(a.A,{name:h,size:"26"}),(0,r.jsx)("h2",{children:f}),(0,r.jsxs)("span",{children:[(0,r.jsx)(a.A,{name:"live",size:"12",color:"red"})," ",(0,i.__)("Live","burst-statistics")]})]})}),(0,r.jsx)(y.A,{content:v.today.tooltip,children:(0,r.jsxs)("div",{className:"burst-today-select-item burst-tooltip-today",children:[(0,r.jsx)(a.A,{name:m,size:"26"}),(0,r.jsx)("h2",{children:v.today.value}),(0,r.jsxs)("span",{children:[(0,r.jsx)(a.A,{name:"total",size:"13",color:"green"})," ",(0,i.__)("Total","burst-statistics")]})]})})]}),(0,r.jsxs)("div",{className:"burst-today-list",children:[(0,r.jsx)(y.A,{content:v.mostViewed.tooltip,children:(0,r.jsxs)("div",{className:"burst-today-list-item burst-tooltip-mostviewed",children:[(0,r.jsx)(a.A,{name:"winner"}),(0,r.jsx)("p",{className:"burst-today-list-item-text",children:(0,C.S)(v.mostViewed.title)}),(0,r.jsx)("p",{className:"burst-today-list-item-number",children:v.mostViewed.value})]})}),(0,r.jsx)(y.A,{content:v.referrer.tooltip,children:(0,r.jsxs)("div",{className:"burst-today-list-item burst-tooltip-referrer",children:[(0,r.jsx)(a.A,{name:"referrer"}),(0,r.jsx)("p",{className:"burst-today-list-item-text",children:(0,C.S)(v.referrer.title)}),(0,r.jsx)("p",{className:"burst-today-list-item-number",children:v.referrer.value})]})}),(0,r.jsx)(y.A,{content:v.pageviews.tooltip,children:(0,r.jsxs)("div",{className:"burst-today-list-item burst-tooltip-pageviews",children:[(0,r.jsx)(a.A,{name:"pageviews"}),(0,r.jsx)("p",{className:"burst-today-list-item-text",children:v.pageviews.title}),(0,r.jsx)("p",{className:"burst-today-list-item-number",children:v.pageviews.value})]})}),(0,r.jsx)(y.A,{content:v.timeOnPage.tooltip,children:(0,r.jsxs)("div",{className:"burst-today-list-item burst-tooltip-timeOnPage",children:[(0,r.jsx)(a.A,{name:"time"}),(0,r.jsx)("p",{className:"burst-today-list-item-text",children:v.timeOnPage.title}),(0,r.jsx)("p",{className:"burst-today-list-item-number",children:v.timeOnPage.value})]})})]})]})})]})};var G=n(9369);const R=function(t){var e=t.data,n=e.dateStart,s=(e.dateEnd,e.dateCreated),o=e.status,l=function(t){return"active"===t?"green":"gray"}(o),c=n||s,u=(n?(0,i.__)("Started","burst-statistics"):(0,i.__)("Created","burst-statistics"),(0,x.gs)(c),function(t){switch(t){case"active":return(0,i.__)("Active","burst-statistics");case"inactive":return(0,i.__)("Inactive","burst-statistics");default:return(0,i.__)("Unknown","burst-statistics")}}(o));return(0,r.jsxs)("div",{className:"burst-goal-status",children:[(0,r.jsx)(a.A,{name:"dot",color:l,size:12}),(0,r.jsx)("p",{children:u})]})};var L=n(3101);const q=function(t){var e=t.goals,n=t.goalId,s=t.setGoalId;return 0===e.length?(0,r.jsx)(a.A,{name:"loading"}):(0,r.jsxs)("div",{className:"burst-goals-controls-flex",children:[1===e.length&&e[0]&&(0,r.jsx)("p",{children:e[0].title}),1<e.length&&(0,r.jsx)("select",{onChange:function(t){s(t.target.value)},value:n||"",children:Object.entries(e).map((function(t){var e=t[0],n=t[1];return n&&"string"==typeof n.title?(0,r.jsx)("option",{value:n.id,children:n.title},e):(0,r.jsx)("option",{value:e,children:(0,i.__)("Untitled goal","burst-statistics")},e)}))})]})};var Q=n(6261),U=n(1651),V=n(6500),z=n(4880);function B(t,e){return t.filter((t=>!e.includes(t)))}var Z=class extends V.Q{#t;#e;#n;#r;#s;#i;#a;#o;#l=[];constructor(t,e,n){super(),this.#t=t,this.#r=n,this.#n=[],this.#s=[],this.#e=[],this.setQueries(e)}onSubscribe(){1===this.listeners.size&&this.#s.forEach((t=>{t.subscribe((e=>{this.#c(t,e)}))}))}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#s.forEach((t=>{t.destroy()}))}setQueries(t,e){this.#n=t,this.#r=e,Q.jG.batch((()=>{const t=this.#s,e=this.#u(this.#n);this.#l=e,e.forEach((t=>t.observer.setOptions(t.defaultedQueryOptions)));const n=e.map((t=>t.observer)),r=n.map((t=>t.getCurrentResult())),s=n.some(((e,n)=>e!==t[n]));(t.length!==n.length||s)&&(this.#s=n,this.#e=r,this.hasListeners()&&(B(t,n).forEach((t=>{t.destroy()})),B(n,t).forEach((t=>{t.subscribe((e=>{this.#c(t,e)}))})),this.#d()))}))}getCurrentResult(){return this.#e}getQueries(){return this.#s.map((t=>t.getCurrentQuery()))}getObservers(){return this.#s}getOptimisticResult(t,e){const n=this.#u(t),r=n.map((t=>t.observer.getOptimisticResult(t.defaultedQueryOptions)));return[r,t=>this.#f(t??r,e),()=>this.#v(r,n)]}#v(t,e){return e.map(((n,r)=>{const s=t[r];return n.defaultedQueryOptions.notifyOnChangeProps?s:n.observer.trackResult(s,(t=>{e.forEach((e=>{e.observer.trackProp(t)}))}))}))}#f(t,e){return e?(this.#i&&this.#e===this.#o&&e===this.#a||(this.#a=e,this.#o=this.#e,this.#i=(0,z.BH)(this.#i,e(t))),this.#i):t}#u(t){const e=new Map(this.#s.map((t=>[t.options.queryHash,t]))),n=[];return t.forEach((t=>{const r=this.#t.defaultQueryOptions(t),s=e.get(r.queryHash);s?n.push({defaultedQueryOptions:r,observer:s}):n.push({defaultedQueryOptions:r,observer:new U.$(this.#t,r)})})),n}#c(t,e){const n=this.#s.indexOf(t);-1!==n&&(this.#e=function(t,e,n){const r=t.slice(0);return r[e]=n,r}(this.#e,n,e),this.#d())}#d(){if(this.hasListeners()){const t=this.#i,e=this.#v(this.#e,this.#l);t!==this.#f(e,this.#r?.combine)&&Q.jG.batch((()=>{this.listeners.forEach((t=>{t(this.#e)}))}))}}},H=n(7665),K=n(8378),J=n(6672),W=n(8590),$=n(791),Y=n(4362);const X=function(t){return e=void 0,n=void 0,s=function(){var e,n,r,s,i;return function(t,e){var n,r,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,(function(a){switch(a.label){case 0:return e=t.startDate,n=t.endDate,r=t.range,t.filters,(s=t.goal_id)?[4,(0,d.bQ)("live-goals",e,n,r,{goal_id:s})]:[2,"-"];case 1:return i=a.sent().data,[2,(0,x.ZV)(i)]}}))},new((r=void 0)||(r=Promise))((function(t,i){function a(t){try{l(s.next(t))}catch(t){i(t)}}function o(t){try{l(s.throw(t))}catch(t){i(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,o)}l((s=s.apply(e,n||[])).next())}));var e,n,r,s};var tt=function(){return tt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},tt.apply(this,arguments)},et=function(t){var e,n,r,s,a,o,l,c,u,d,f;if(!t||"object"!=typeof t)return nt;var v=tt(tt(tt({},nt),t),{conversionPercentage:tt({title:(null===(e=null==t?void 0:t.conversionPercentage)||void 0===e?void 0:e.title)||"-",value:(null===(n=null==t?void 0:t.conversionPercentage)||void 0===n?void 0:n.value)||"-"},(null==t?void 0:t.conversionPercentage)||{}),conversionMetric:tt({title:(null===(r=null==t?void 0:t.conversionMetric)||void 0===r?void 0:r.title)||"-",value:(null===(s=null==t?void 0:t.conversionMetric)||void 0===s?void 0:s.value)||"-",icon:(null===(a=null==t?void 0:t.conversionMetric)||void 0===a?void 0:a.icon)||"visitors"},(null==t?void 0:t.conversionMetric)||{}),total:tt({title:(null===(o=null==t?void 0:t.total)||void 0===o?void 0:o.title)||(0,i.__)("Total","burst-statistics"),value:(null===(l=null==t?void 0:t.total)||void 0===l?void 0:l.value)||"-",icon:(null===(c=null==t?void 0:t.total)||void 0===c?void 0:c.icon)||"goals"},(null==t?void 0:t.total)||{}),bestDevice:tt({title:(null===(u=null==t?void 0:t.bestDevice)||void 0===u?void 0:u.title)||"-",value:(null===(d=null==t?void 0:t.bestDevice)||void 0===d?void 0:d.value)||"-",icon:(null===(f=null==t?void 0:t.bestDevice)||void 0===f?void 0:f.icon)||"desktop"},(null==t?void 0:t.bestDevice)||{})});for(var h in v.total.value&&"-"!==v.total.value&&v.conversionMetric.value&&"-"!==v.conversionMetric.value&&(v.conversionPercentage.value=(0,x.Nj)(v.total.value,v.conversionMetric.value)),v.bestDevice.value&&"-"!==v.bestDevice.value&&(v.bestDevice.value=(0,x.Ee)(v.bestDevice.value)),v)Object.prototype.hasOwnProperty.call(v,h)&&"conversionPercentage"!==h&&"bestDevice"!==h&&"object"==typeof v[h]&&null!==v[h]&&v[h].value&&"-"!==v[h].value&&!isNaN(Number(v[h].value))&&(v[h].value=(0,x.ZV)(v[h].value));return v.total.value&&v.conversionMetric.value&&v.conversionMetric.title?v.conversionPercentage.tooltip=(0,i.__)("Calculated by:","burst-statistics")+" "+(0,i.__)("Total amount of goals reached ","burst-statistics")+" / "+(0,i.__)("Total amount of","burst-statistics")+" "+v.conversionMetric.title+" ("+v.total.value+" / "+v.conversionMetric.value+")":v.conversionPercentage.tooltip=(0,i.__)("No data available yet","burst-statistics"),v},nt={today:{title:(0,i.__)("Today","burst-statistics"),icon:"goals"},total:{title:(0,i.__)("Total","burst-statistics"),value:"-",icon:"goals"},topPerformer:{title:"-",value:"-"},conversionMetric:{title:"-",value:"-",icon:"visitors"},conversionPercentage:{title:"-",value:"-"},bestDevice:{title:"-",value:"-",icon:"desktop"},dateCreated:0,dateStart:0,dateEnd:0,status:"inactive"};const rt=function(t){return e=void 0,n=void 0,s=function(){var e,n,r,s,i,a;return function(t,e){var n,r,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,(function(o){switch(o.label){case 0:if(e=t.startDate,n=t.endDate,r=t.range,t.filters,!(s=t.goal_id))return[2,nt];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,d.bQ)("goals",e,n,r,{goal_id:s})];case 2:return i=o.sent().data,[2,et(i)];case 3:return a=o.sent(),console.error("Error fetching goals data:",a),[2,nt];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(t,i){function a(t){try{l(s.next(t))}catch(t){i(t)}}function o(t){try{l(s.throw(t))}catch(t){i(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,o)}l((s=s.apply(e,n||[])).next())}));var e,n,r,s};var st=n(84),it=function(){return it=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},it.apply(this,arguments)},at=function(t){return 10<(t=parseInt(t))||0<t?"goals":"goals-empty"},ot=(0,s.memo)((function(t){var e=t.filter,n=t.filterValue,s=t.label,o=t.startDate,l=t.icon,c=t.count;return(0,r.jsx)(G.A,{filter:e,filterValue:n,label:s,startDate:o,children:(0,r.jsxs)("div",{className:"burst-goals-select-item",children:[(0,r.jsx)(a.A,{name:l,size:"26"}),(0,r.jsx)("h2",{children:c}),(0,r.jsxs)("span",{children:[(0,r.jsx)(a.A,{name:"sun",color:"yellow",size:"13"})," ",(0,i.__)("Today","burst-statistics")]})]})})})),lt=(0,s.memo)((function(t){var e=t.filter,n=t.filterValue,s=t.label,o=t.startDate,l=t.icon,c=t.count,u=t.endDate;return(0,r.jsx)(G.A,{filter:e,filterValue:n,label:s,startDate:o,endDate:u,children:(0,r.jsxs)("div",{className:"burst-goals-select-item",children:[(0,r.jsx)(a.A,{name:l,size:"26"}),(0,r.jsx)("h2",{children:c}),(0,r.jsxs)("span",{children:[(0,r.jsx)(a.A,{name:"calendar",size:"13"})," ",(0,i.__)("Total","burst-statistics")]})]})})}));const ct=(0,s.memo)((function(){var t,e,n,o,l,c,u,f,v,h,w,j,k,A,N,D,O,M,S=(0,s.useState)(15e3),I=S[0],F=S[1],G=(0,s.useState)(!1),V=G[0],z=G[1],B=(0,L.A)(),tt=B.goals,et=B.isLoading,nt=(0,s.useMemo)((function(){return(0,x.ii)()}),[]),ct=(0,s.useMemo)((function(){return(0,T.default)((0,E.default)(nt),"yyyy-MM-dd")}),[nt]),ut=(0,s.useMemo)((function(){return(0,T.default)((0,P.default)(nt),"yyyy-MM-dd")}),[nt]),dt=(0,s.useMemo)((function(){return(0,T.default)(nt,"yyyy-MM-dd")}),[nt]),ft=(0,s.useMemo)((function(){return!V&&0<tt.length?(setTimeout((function(){z(tt[0].id)}),0),tt[0].id):V}),[tt,V]),_x=(0,s.useMemo)((function(){var t,e,n=null===(t=tt[ft||V])||void 0===t?void 0:t.date_start,r=null===(e=tt[ft||V])||void 0===e?void 0:e.date_end;return 0!=n&&void 0!==n||(n=ct),0!=r&&void 0!==r||(r=ut),{goalStart:n,goalEnd:r}}),[ft,V,tt,ct,ut]),vt=_x.goalStart,ht=_x.goalEnd,bt=(0,s.useMemo)((function(){return{goal_id:ft||V,startDate:ct,endDate:ut}}),[ft,V,ct,ut]),pt=(0,s.useMemo)((function(){return{today:{title:(0,i.__)("Today","burst-statistics"),icon:"goals"},total:{title:(0,i.__)("Total","burst-statistics"),value:"-",icon:"goals"},topPerformer:{title:"-",value:"-"},conversionMetric:{title:"-",value:"-",icon:"visitors"},conversionPercentage:{title:"-",value:"-"},bestDevice:{title:"-",value:"-",icon:"desktop"},dateCreated:0,dateStart:0,dateEnd:0,status:"inactive"}}),[]),gt=function({queries:t,...e},n){const r=(0,H.jE)(n),i=(0,K.w)(),a=(0,J.h)(),o=s.useMemo((()=>t.map((t=>{const e=r.defaultQueryOptions(t);return e._optimisticResults=i?"isRestoring":"optimistic",e}))),[t,r,i]);o.forEach((t=>{(0,$.jv)(t),(0,W.LJ)(t,a)})),(0,W.wZ)(a);const[l]=s.useState((()=>new Z(r,o,e))),[c,u,d]=l.getOptimisticResult(o,e.combine),f=!i&&!1!==e.subscribed;s.useSyncExternalStore(s.useCallback((t=>f?l.subscribe(Q.jG.batchCalls(t)):Y.l),[l,f]),(()=>l.getCurrentResult()),(()=>l.getCurrentResult())),s.useEffect((()=>{l.setQueries(o,e)}),[o,e,l]);const v=c.some(((t,e)=>(0,$.EU)(o[e],t)))?c.flatMap(((t,e)=>{const n=o[e];if(n){const e=new U.$(r,n);if((0,$.EU)(n,t))return(0,$.iL)(n,e,a);(0,$.nE)(t,i)&&(0,$.iL)(n,e,a)}return[]})):[];if(v.length>0)throw Promise.all(v);const h=c.find(((t,e)=>{const n=o[e];return n&&(0,W.$1)({result:t,errorResetBoundary:a,throwOnError:n.throwOnError,query:r.getQueryCache().get(n.queryHash),suspense:n.suspense})}));if(h?.error)throw h.error;return u(d())}({queries:[{queryKey:["live-goals",ft||V],queryFn:function(){return ft||V?X(bt):"0"},refetchInterval:I,placeholderData:"-",onError:function(t){console.error("Error fetching live goals:",t),F(0)},enabled:!!ft||!!V},{queryKey:["goals",ft||V],queryFn:function(){return ft||V?rt(bt):pt},refetchInterval:I,placeholderData:pt,onError:function(t){console.error("Error fetching goals data:",t),F(0)},enabled:!!ft||!!V}]}),mt=(0,s.useMemo)((function(){return function(){burst_settings.goals_information_shown="1",(0,d.qN)("goals_information_shown",!0),window.location.hash="#settings/goals"}}),[]),yt=gt.some((function(t){return t.isLoading}))||et,xt=gt.some((function(t){return t.isError})),_t=gt[0].data||"-",wt=xt?pt:gt[1].data||pt,jt=at(_t),kt=at(null===(t=wt.today)||void 0===t?void 0:t.value),At=(0,s.useMemo)((function(){var t;return{filter:"goal_id",filterValue:wt.goalId,label:(null===(t=wt.today)||void 0===t?void 0:t.tooltip)+(0,i.__)("Goal and today","burst-statistics"),startDate:dt,icon:jt,count:_t}}),[wt.goalId,null===(e=wt.today)||void 0===e?void 0:e.tooltip,dt,jt,_t]),Nt=(0,s.useMemo)((function(){var t,e;return{filter:"goal_id",filterValue:wt.goalId,label:(null===(t=wt.today)||void 0===t?void 0:t.tooltip)+(0,i.__)("Goal and the start date","burst-statistics"),startDate:vt,endDate:ht,icon:kt,count:(null===(e=wt.total)||void 0===e?void 0:e.value)||"-"}}),[wt.goalId,null===(n=wt.today)||void 0===n?void 0:n.tooltip,vt,ht,kt,null===(o=wt.total)||void 0===o?void 0:o.value]);return(0,r.jsxs)(b.A,{className:"row-span-2 lg:col-span-6 xl:col-span-3",children:["0"===burst_settings.goals_information_shown&&(0,r.jsxs)(st.A,{children:[(0,r.jsx)("h4",{className:"mb-4 text-lg font-bold",children:(0,i.__)("Goals","burst-statistics")}),(0,r.jsx)("p",{className:"mb-4",children:(0,i.__)("Keep track of customizable goals and get valuable insights. Add your first goal!","burst-statistics")}),(0,r.jsx)("p",{className:"mb-4",children:(0,r.jsx)("a",{className:"text-blue underline",href:(0,C.U)("how-to-set-goals",{burst_source:"goals-block-overlay"}),children:(0,i.__)("Learn how to set your first goal","burst-statistics")})}),(0,r.jsx)(_.A,{onClick:mt(),btnVariant:"secondary",btnSize:"small",children:(0,i.__)("Create my first goal","burst-statistics")})]}),(0,r.jsx)(p.A,{title:(0,i.__)("Goals","burst-statistics"),controls:(0,r.jsx)(q,{goalId:ft||V,goals:tt,setGoalId:z})}),(0,r.jsx)(g.A,{className:"px-0 py-0 relative",children:xt?(0,r.jsx)("div",{className:"burst-error-message p-4",children:(0,i.__)("Error loading goals data. Please try again later.","burst-statistics")}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"burst-goals-select bg-yellow-light",children:[(0,r.jsx)(ot,it({},At)),(0,r.jsx)(lt,it({},Nt))]}),(0,r.jsxs)("div",{className:"burst-goals-list",children:[(0,r.jsx)(y.A,{content:null===(l=wt.topPerformer)||void 0===l?void 0:l.tooltip,children:(0,r.jsxs)("div",{className:"burst-goals-list-item burst-tooltip-topPerformer",children:[(0,r.jsx)(a.A,{name:"winner"}),(0,r.jsx)("p",{className:"burst-goals-list-item-text",children:(0,C.S)((null===(c=wt.topPerformer)||void 0===c?void 0:c.title)||"-")}),(0,r.jsx)("p",{className:"burst-goals-list-item-number",children:(null===(u=wt.topPerformer)||void 0===u?void 0:u.value)||"-"})]})}),(0,r.jsx)(y.A,{arrow:!0,title:null===(f=wt.conversionMetric)||void 0===f?void 0:f.tooltip,children:(0,r.jsxs)("div",{className:"burst-goals-list-item",children:[(0,r.jsx)(a.A,{name:(null===(v=wt.conversionMetric)||void 0===v?void 0:v.icon)||"visitors"}),(0,r.jsx)("p",{className:"burst-goals-list-item-text",children:(null===(h=wt.conversionMetric)||void 0===h?void 0:h.title)||"-"}),(0,r.jsx)("p",{className:"burst-goals-list-item-number",children:(null===(w=wt.conversionMetric)||void 0===w?void 0:w.value)||"-"})]})}),(0,r.jsx)(y.A,{content:null===(j=wt.conversionPercentage)||void 0===j?void 0:j.tooltip,children:(0,r.jsxs)("div",{className:"burst-goals-list-item burst-tooltip-conversionPercentage",children:[(0,r.jsx)(a.A,{name:"graph"}),(0,r.jsx)("p",{className:"burst-goals-list-item-text",children:(null===(k=wt.conversionPercentage)||void 0===k?void 0:k.title)||"-"}),(0,r.jsx)("p",{className:"burst-goals-list-item-number",children:(null===(A=wt.conversionPercentage)||void 0===A?void 0:A.value)||"-"})]})}),(0,r.jsx)(y.A,{content:null===(N=wt.bestDevice)||void 0===N?void 0:N.tooltip,children:(0,r.jsxs)("div",{className:"burst-goals-list-item burst-tooltip-bestDevice",children:[(0,r.jsx)(a.A,{name:(null===(D=wt.bestDevice)||void 0===D?void 0:D.icon)||"desktop"}),(0,r.jsx)("p",{className:"burst-goals-list-item-text",children:(null===(O=wt.bestDevice)||void 0===O?void 0:O.title)||"-"}),(0,r.jsx)("p",{className:"burst-goals-list-item-number",children:(null===(M=wt.bestDevice)||void 0===M?void 0:M.value)||"-"})]})})]})]})}),0!==tt.length&&(0,r.jsxs)(m.A,{children:[(0,r.jsx)("a",{className:"burst-button burst-button--secondary",href:"#settings/goals",children:(0,i.__)("View setup","burst-statistics")}),(0,r.jsx)("div",{className:"burst-flex-push-right",children:!yt&&!xt&&(0,r.jsx)(R,{data:wt})})]})]})})),ut=function(t){var e=[{content:"Hidden Features of the Insights Graph",link:(0,C.U)("hidden-features-of-the-insights-graph/",{burst_source:"tips-tricks"})},{content:"What is Cookieless tracking?",link:(0,C.U)("definition/what-is-cookieless-tracking/",{burst_source:"tips-tricks"})},{content:"Why is Burst Privacy-Friendly?",link:(0,C.U)("why-is-burst-privacy-friendly/",{burst_source:"tips-tricks"})},{content:"How can I compare metrics?",link:(0,C.U)("how-can-i-compare-metrics/",{burst_source:"tips-tricks"})},{content:"What is Bounce Rate?",link:(0,C.U)("definition/what-is-bounce-rate/",{burst_source:"tips-tricks"})},{content:"How to set goals?",link:(0,C.U)("how-to-set-goals/",{burst_source:"tips-tricks"})}];return(0,r.jsxs)(b.A,{className:"row-span-1 lg:col-span-6",children:[(0,r.jsx)(p.A,{title:(0,i.__)("Tips & Tricks","burst-statistics")}),(0,r.jsx)(g.A,{className:"px-6 py-0",children:(0,r.jsx)("div",{className:"burst-tips-tricks-container",children:e.map((function(t,e){return(0,r.jsx)("div",{className:"burst-tips-tricks-element",children:(0,r.jsxs)("a",{href:t.link,target:"_blank",title:t.content,children:[(0,r.jsx)("div",{className:"burst-bullet medium"}),(0,r.jsx)("div",{className:"burst-tips-tricks-content",children:t.content})]})},e)}))})}),(0,r.jsx)(m.A,{children:(0,r.jsx)(_.A,{link:{to:(0,C.U)("docs",{burst_source:"tips-tricks",burst_content:"view-all"})},btnVariant:"tertiary",children:(0,i.__)("View all","burst-statistics")})})]})};var dt=n(7097),ft=function(){return ft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},ft.apply(this,arguments)},vt=function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function o(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}l((r=r.apply(t,e||[])).next())}))},ht=function(t,e){var n,r,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},bt=function(t,e,n){if(n||2===arguments.length)for(var r,s=0,i=e.length;s<i;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))};const pt=function(){var t=(0,H.jE)(),e=function(t){return{download:(0,i.__)("Install","burst-statistics"),activate:(0,i.__)("Activate","burst-statistics"),activating:(0,i.__)("Activating...","burst-statistics"),downloading:(0,i.__)("Downloading...","burst-statistics"),"upgrade-to-pro":(0,i.__)("Downloading...","burst-statistics")}[t]},n=(0,D.I)({queryKey:["otherPluginsData"],queryFn:function(){return vt(void 0,void 0,void 0,(function(){return ht(this,(function(t){switch(t.label){case 0:return[4,d.Eo("otherpluginsdata")];case 1:return[2,t.sent().map((function(t){return ft(ft({},t),{pluginActionNice:e(t.pluginAction)})}))]}}))}))},staleTime:1/0,refetchOnWindowFocus:!1}),s=n.data,a=void 0===s?[]:s,o=n.isLoading,l=(0,dt.n)({mutationFn:function(t){return vt(void 0,void 0,void 0,(function(){return ht(this,(function(e){switch(e.label){case 0:return[4,d.Eo("plugin_actions",t)];case 1:return[2,e.sent()]}}))}))},onSuccess:function(n,r){var s=r.slug;t.setQueryData(["otherPluginsData"],(function(t){return t.map((function(t){return t.slug===s?ft(ft({},n),{pluginActionNice:e(n.pluginAction)}):t}))})),n.pluginAction&&"installed"!==n.pluginAction&&"upgrade-to-pro"!==n.pluginAction&&c(s,n.pluginAction)}}),c=function(n,r,s){if(s&&s.preventDefault(),"installed"!==r&&"upgrade-to-pro"!==r){var i=function(t){return a.find((function(e){return e.slug===t}))}(n);i&&(t.setQueryData(["otherPluginsData"],(function(t){return t.map((function(t){if(t.slug===n){var s="download"===r?"downloading":"activate"===r?"activating":r;return ft(ft({},t),{pluginAction:s,pluginActionNice:e(s)})}return t}))})),l.mutate({slug:n,pluginAction:r}))}};return o?(0,r.jsxs)(b.A,{className:"bg-wp-gray row-span-1 shadow-none lg:col-span-6",children:[(0,r.jsx)(p.A,{className:"burst-column-2 no-border no-background",title:(0,i.__)("Other plugins","burst-statistics")}),(0,r.jsx)(g.A,{className:"px-6 py-0",children:(0,r.jsx)("div",{className:"burst-other-plugins-container",children:bt([],Array(3),!0).map((function(t,e){return(0,r.jsxs)("div",{className:"burst-other-plugins-element",children:[(0,r.jsxs)("a",{children:[(0,r.jsx)("div",{className:"burst-bullet"}),(0,r.jsx)("div",{className:"burst-other-plugins-content",children:(0,i.__)("Loading..","burst-statistics")})]}),(0,r.jsx)("div",{className:"burst-other-plugin-status",children:(0,i.__)("Activate","burst-statistics")})]},e)}))})})]}):(0,r.jsxs)(b.A,{className:"bg-wp-gray row-span-1 shadow-none lg:col-span-6",children:[(0,r.jsx)(p.A,{title:(0,i.__)("Other plugins","burst-statistics")}),(0,r.jsx)(g.A,{className:"px-6 py-0",children:(0,r.jsx)("div",{className:"burst-other-plugins-container",children:a.map((function(t,e){return function(t,e){return(0,r.jsxs)("div",{className:"burst-other-plugins-element burst-"+t.slug,children:[(0,r.jsxs)("a",{href:t.wordpress_url,target:"_blank",title:t.title,children:[(0,r.jsx)("div",{className:"burst-bullet"}),(0,r.jsx)("div",{className:"burst-other-plugins-content",children:t.title})]}),(0,r.jsxs)("div",{className:"burst-other-plugin-status",children:["upgrade-to-pro"===t.pluginAction&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("a",{target:"_blank",href:t.upgrade_url,children:(0,i.__)("Upgrade","burst-statistics")})}),"upgrade-to-pro"!==t.pluginAction&&"installed"!==t.pluginAction&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("a",{href:"#",onClick:function(e){return c(t.slug,t.pluginAction,e)},children:t.pluginActionNice})}),"installed"===t.pluginAction&&(0,r.jsx)(r.Fragment,{children:(0,i.__)("Installed","burst-statistics")})]})]},e)}(t,e)}))})})]})};n(1310);var gt=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N,{}),(0,r.jsx)(F,{}),(0,r.jsx)(ct,{}),(0,r.jsx)(ut,{}),(0,r.jsx)(pt,{})]})}},2081:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(4848),s=n(1609),i=n(4164),a=function(t){var e=t.children,n=t.className,s=void 0===n?"":n;return(0,r.jsx)("div",{className:(0,i.A)(s,"flex items-center justify-between px-6 py-3"),children:e})};a.displayName="BlockFooter";const o=(0,s.memo)(a)},2895:(t,e,n)=>{n.d(e,{S:()=>d});var r=n(1511),s=n(2346),i=n(1127),a=n(979),o=n(6212),l=n(900),c=n(6275),u=function(t){if(l.cA[t]){var e=l.cA[t].range(),n=e.startDate,r=e.endDate;return{startDate:(0,s.default)(n,"yyyy-MM-dd"),endDate:(0,s.default)(r,"yyyy-MM-dd"),range:t}}return null},d=(0,r.v)((function(t){var e=(0,c.Lg)("selectedRangeKey"),n=e?u(e):null;return{startDate:n?n.startDate:(0,s.default)((0,i.default)((0,a.A)(new Date,7)),"yyyy-MM-dd"),endDate:n?n.endDate:(0,s.default)((0,o.default)((0,a.A)(new Date,1)),"yyyy-MM-dd"),range:n?n.range:"last-7-days",setStartDate:function(e){return t((function(t){return{startDate:e}}))},setEndDate:function(e){return t((function(t){return{endDate:e}}))},setRange:function(e){if("custom"!==e){(0,c.ZB)("selectedRangeKey",e);var n=u(e);n&&t(n)}else t({range:e})}}}))},3101:(t,e,n)=>{n.d(e,{A:()=>h,l:()=>v});var r=n(7665),s=n(8069),i=n(7097),a=n(6275),o=n(5446),l=n(7723),c=n(1932),u=function(){return u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},u.apply(this,arguments)},d=function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function o(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}l((r=r.apply(t,e||[])).next())}))},f=function(t,e){var n,r,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},v=function(t){return t.map((function(e){var n=u({},e);if(e.react_conditions){var r=function(t,e){return!t||0===Object.keys(t).length||Object.entries(t).some((function(t){var n=t[0],r=t[1],s=e.find((function(t){return t.id===n}));if(!s)return!1;var i=s.value;return!!i&&r.includes(i)}))}(e.react_conditions,t);"disable"===e.condition_action?n.disabled=!r:n.conditionallyDisabled=!r}return n}))};const h=function(){var t,e,n,v=(0,r.jE)(),h=(0,s.I)({queryKey:["goals_data"],queryFn:function(){return d(void 0,void 0,void 0,(function(){var t;return f(this,(function(e){switch(e.label){case 0:return[4,(0,a.DX)()];case 1:return[2,{goals:(t=e.sent()).goals||[],predefinedGoals:t.predefinedGoals||[],goalFields:Object.values(t.goalFields||{})}]}}))}))},retry:1}),b=(0,i.n)({mutationFn:function(){return d(void 0,void 0,void 0,(function(){var t,e;return f(this,(function(n){switch(n.label){case 0:return t=(null===(e=v.getQueryData(["goals_data"]))||void 0===e?void 0:e.goals)||[],[4,(0,a.d2)({goals:t})];case 1:return[2,n.sent()]}}))}))},onSuccess:function(){},onError:function(t){console.error(t),o.toast.error((0,l.__)("Failed to save goals","burst-statistics"))}}),p=(0,i.n)({mutationFn:function(t){return d(void 0,[t],void 0,(function(t){var e,n=t.id,r=t.value;return f(this,(function(t){switch(t.label){case 0:return e=[{id:n,title:r}],[4,(0,a.d2)({goals:e})];case 1:return[2,t.sent()]}}))}))},onError:function(t){console.error(t),o.toast.error((0,l.__)("Failed to save goal title","burst-statistics"))}}),g=(0,i.n)({mutationFn:function(){return d(void 0,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,(0,a.D)()];case 1:return[2,t.sent()]}}))}))},onSuccess:function(t){v.setQueryData(["goals_data"],(function(e){return e?(0,c.jM)(e,(function(e){e.goals.push(t.goal)})):e})),o.toast.success((0,l.__)("Goal added successfully!","burst-statistics"))},onError:function(t){console.error(t),o.toast.error((0,l.__)("Failed to add goal","burst-statistics"))}}),m=(0,i.n)({mutationFn:function(t){return d(void 0,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,(0,a.$x)(t)];case 1:return[2,e.sent()]}}))}))},onSuccess:function(t,e){t.deleted&&(v.setQueryData(["goals_data"],(function(t){return t?(0,c.jM)(t,(function(t){if(1===t.goals.length)t.goals=[];else{var n=t.goals.findIndex((function(t){return t.id===e}));-1!==n&&t.goals.splice(n,1)}})):t})),o.toast.success((0,l.__)("Goal deleted successfully!","burst-statistics")))},onError:function(t){console.error(t),o.toast.error((0,l.__)("Failed to delete goal","burst-statistics"))}}),y=(0,i.n)({mutationFn:function(t){return d(void 0,[t],void 0,(function(t){var e=t.predefinedGoalId,n=t.type,r=t.cookieless;return f(this,(function(t){switch(t.label){case 0:if("hook"===n&&r)throw new Error((0,l.__)("Cannot add server side goals in combination with cookieless tracking","burst-statistics"));if(!burst_settings.is_pro)throw new Error((0,l.__)("Predefined goals are a premium feature.","burst-statistics"));return[4,(0,a.ZI)(e)];case 1:return[2,t.sent()]}}))}))},onSuccess:function(t){v.setQueryData(["goals_data"],(function(e){return e?(0,c.jM)(e,(function(e){e.goals.push(t.goal)})):e})),o.toast.success((0,l.__)("Successfully added predefined goal!","burst-statistics"))},onError:function(t){console.error(t),o.toast.error(t.message||(0,l.__)("Failed to add predefined goal","burst-statistics"))}});return{goals:(null===(t=h.data)||void 0===t?void 0:t.goals)||[],goalFields:(null===(e=h.data)||void 0===e?void 0:e.goalFields)||[],predefinedGoals:(null===(n=h.data)||void 0===n?void 0:n.predefinedGoals)||[],isLoading:h.isLoading,isError:h.isError,getGoal:function(t){var e,n=(null===(e=h.data)||void 0===e?void 0:e.goals)||[];if(!Array.isArray(n))return!1;var r=n.findIndex((function(e){return e.id==t}));return-1!==r&&n[r]},setGoalValue:function(t,e,n){v.setQueryData(["goals_data"],(function(r){return r?(0,c.jM)(r,(function(r){var s=r.goals.findIndex((function(e){return e.id===t}));-1!==s&&(r.goals[s][e]=n)})):r}))},updateGoal:function(t,e){v.setQueryData(["goals_data"],(function(n){return n?(0,c.jM)(n,(function(n){var r=n.goals.findIndex((function(e){return e.id===t}));-1!==r&&(n.goals[r]=u(u({},n.goals[r]),e))})):n}))},saveGoals:b.mutateAsync,saveGoalTitle:function(t,e){return p.mutateAsync({id:t,value:e})},addGoal:g.mutateAsync,deleteGoal:m.mutateAsync,addPredefinedGoal:function(t,e,n){return y.mutateAsync({predefinedGoalId:t,type:e,cookieless:n})},invalidateGoals:function(){return v.invalidateQueries(["goals_data"])}}}},3933:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(4848),s=n(1609),i=n(4164),a=function(t){var e=t.children,n=t.className,s=void 0===n?"":n,a=/\bp-\S+/.test(s);return(0,r.jsx)("div",{className:(0,i.A)("flex-grow",{"p-6":!a},s),children:e})};a.displayName="BlockContent";const o=(0,s.memo)(a)},4301:(t,e,n)=>{n.d(e,{A:()=>i});var r=n(4848),s=(n(1609),n(3881));const i=function(t){var e=t.children,n=t.content,i=t.delayDuration,a=void 0===i?400:i;return n?(0,r.jsx)(s.Kq,{children:(0,r.jsxs)(s.bL,{delayDuration:a,children:[(0,r.jsx)(s.l9,{asChild:!0,children:e}),(0,r.jsx)(s.ZL,{children:(0,r.jsxs)(s.UC,{className:"burst-tooltip-content",sideOffset:5,children:[n,(0,r.jsx)(s.i3,{className:"burst-tooltip-arrow"})]})})]})}):(0,r.jsx)(r.Fragment,{children:e})}},6275:(t,e,n)=>{n.d(e,{$x:()=>k,D:()=>A,DX:()=>j,Eo:()=>D,Ey:()=>_,K5:()=>M,Lg:()=>S,ZB:()=>T,ZI:()=>N,bQ:()=>O,d2:()=>w,qN:()=>y,ww:()=>x});var r=n(4848),s=n(1455),i=n.n(s),a=n(7723),o=n(5446),l=function(){return l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},l.apply(this,arguments)},c=function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function a(t){try{l(r.next(t))}catch(t){i(t)}}function o(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}l((r=r.apply(t,e||[])).next())}))},u=function(t,e){var n,r,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},d=function(t,e,n){if(n||2===arguments.length)for(var r,s=0,i=e.length;s<i;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))},f=function(){return-1!==burst_settings.site_url.indexOf("?")?"&":"?"},v=function(){return"nonce="+burst_settings.burst_nonce+"&token="+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)},h=function(t,e){void 0===e&&(e=!1);var n=(0,a.__)("Server error","burst-statistics");if(t=t.replace(/(<([^>]+)>)/gi,""),e){var s=e.split("?")[0].split("/"),i=s.indexOf("v1")+1;n=(0,a.__)("Server error in","burst-statistics")+" "+s[i]+"/"+s[i+1]}n+=": "+t;var l=(0,r.jsx)("div",{title:(0,a.__)("Click to copy","burst-statistics"),onClick:function(){navigator.clipboard.writeText(n),o.toast.success((0,a.__)("Error copied to clipboard","burst-statistics"))},children:n});o.toast.error(l,{autoClose:15e3})},b=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return c(void 0,d([t],e,!0),void 0,(function(t,e,n){var r;return void 0===e&&(e="GET"),void 0===n&&(n={}),u(this,(function(s){return r={path:t,method:e},"POST"===e&&(n.nonce=burst_settings.burst_nonce,r.data=n),[2,i()(r).then((function(t){if(!t.request_success)throw new Error("invalid data error");if(t.code)throw new Error(t.message);return delete t.request_success,t})).catch((function(s){return p(e,t,n).catch((function(){throw h(s.message,r.path),s}))}))]}))}))},p=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return c(void 0,d([t,e],n,!0),void 0,(function(t,e,n){var r,s,i,a;return void 0===n&&(n=null),u(this,(function(o){switch(o.label){case 0:r="GET"===t?"".concat(m("ajax"),"&rest_action=").concat(e.replace("?","&")):m("ajax"),s={method:t,headers:{"Content-Type":"application/json; charset=UTF-8"}},"POST"===t&&(s.body=JSON.stringify({path:e,data:n},g)),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch(r,s)];case 2:if(!(i=o.sent()).ok)throw h(!1,i.statusText),new Error(i.statusText);return[4,i.json()];case 3:if(!(a=o.sent()).data||!Object.prototype.hasOwnProperty.call(a.data,"request_success"))throw new Error("Invalid data error");return delete a.data.request_success,[2,Promise.resolve(a.data)];case 4:return o.sent(),[2,Promise.reject(new Error("AJAX request failed"))];case 5:return[2]}}))}))},g=function(t,e){return t?t&&t.includes("Control")?void 0:"object"==typeof e?JSON.parse(JSON.stringify(e,g)):e:e},m=function(t){var e;return e=void 0===t?burst_settings.site_url:burst_settings.admin_ajax_url,"https:"===window.location.protocol&&-1===e.indexOf("https://")?e.replace("http://","https://"):e},y=function(t,e){return b("burst/v1/options/set"+f()+v(),"POST",{option:{option:t,value:e}})},x=function(){return b("burst/v1/fields/get"+f()+v())},_=function(t){return b("burst/v1/fields/set"+f(),"POST",{fields:t})},w=function(t){return b("burst/v1/goals/set"+f()+v(),"POST",t)},j=function(){return b("burst/v1/goals/get"+f()+v())},k=function(t){return b("burst/v1/goals/delete"+f()+v(),"POST",{id:t})},A=function(){return b("burst/v1/goals/add"+f()+v(),"POST",{})},N=function(t){return b("burst/v1/goals/add_predefined"+f()+v(),"POST",{id:t})},D=function(t,e){return void 0===e&&(e={}),b("burst/v1/do_action/".concat(t),"POST",{action_data:e}).then((function(t){return Object.prototype.hasOwnProperty.call(t,"data")?t.data:[]}))},O=function(t,e,n,r){for(var s=[],i=4;i<arguments.length;i++)s[i-4]=arguments[i];return c(void 0,d([t,e,n,r],s,!0),void 0,(function(t,e,n,r,s){var i,a,o,c,d,v;return void 0===s&&(s={}),u(this,(function(u){switch(u.label){case 0:return i=s.filters,a=s.metrics,o=s.group_by,c=l(l(l({date_start:e,date_end:n,date_range:r,nonce:burst_settings.burst_nonce,goal_id:s.goal_id,token:Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)},i&&{filters:i}),a&&{metrics:a}),o&&{group_by:o}),h=c,d=Object.keys(h).filter((function(t){return void 0!==h[t]&&null!==h[t]})).map((function(t){var e=function(t){return Array.isArray(t)?t:"object"==typeof t&&null!==t?JSON.stringify(t):t}(h[t]);return Array.isArray(e)?e.map((function(e){return"".concat(encodeURIComponent(t),"[]=").concat(encodeURIComponent(e))})).join("&"):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))})).join("&"),v="burst/v1/data/".concat(t).concat(f()).concat(d),[4,b(v,"GET")];case 1:return[2,u.sent()]}var h}))}))},M=function(t){return b("burst/v1/posts/".concat(f()).concat(v(),"&search=").concat(t)).then((function(t){return Object.prototype.hasOwnProperty.call(t,"posts")?t.posts:[]}))},S=function(t,e){if("undefined"!=typeof Storage){var n=localStorage.getItem("burst_"+t);if(n&&0<n.length)return JSON.parse(n)}return e},T=function(t,e){"undefined"!=typeof Storage&&localStorage.setItem("burst_"+t,JSON.stringify(e))}},6744:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(4848),s=n(1609),i=n(4164),a=function(t){var e=t.title,n=t.controls,s=t.className,a=void 0===s?"":s;return(0,r.jsxs)("div",{className:(0,i.A)(a,"flex min-h-16 items-center justify-between px-6 gap-4"),children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:e}),n]})};a.displayName="BlockHeading";const o=(0,s.memo)(a)},7112:(t,e,n)=>{n.d(e,{A:()=>ct});var r=n(4848),s=n(1609),i=n(4301),a=n(8309),o=n(613),l=n(8007),c=n(5773),u=n(418),d=n(7946),f=n(8697),v=n(4471),h=n(180),b=n(2102),p=n(5107),g=n(7677),m=n(250),y=n(697),x=n(6241),_=n(5977),w=n(9137),j=n(4021),k=n(827),A=n(7962),N=n(9108),D=n(2307),O=n(6050),M=n(8641),S=n(4997),T=n(5404),E=n(1839),P=n(8686),C=n(3893),I=n(7235),F=n(3160),G=n(2853),R=n(8397),L=n(5042),q=n(5899),Q=n(6844),U=n(541),V=n(4080),z=n(8818),B=n(5742),Z=n(6523),H=n(9798),K=n(4179),J=n(2105),W=n(9574),$=n(99),Y=n(3194),X=n(3291),tt=n(73),et=n(4539),nt=n(1233),rt=n(5333),st=n(8931),it=n(72),at=function(){return at=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},at.apply(this,arguments)},ot={black:"var(--rsp-black)",green:"var(--rsp-green)",yellow:"var(--rsp-yellow)",red:"var(--rsp-red)",blue:"var(--rsp-blue)",gray:"var(--rsp-grey-400)",white:"var(--rsp-white)"},lt={bullet:a.A,dot:a.A,circle:o.A,period:l.A,check:c.A,warning:u.A,error:d.A,times:f.A,"circle-check":v.A,"circle-times":h.A,"chevron-up":b.A,"chevron-down":p.A,"chevron-right":g.A,"chevron-left":m.A,plus:y.A,minus:x.A,sync:_.A,"sync-error":w.A,shortcode:j.A,file:k.A,"file-disabled":A.A,"file-download":N.A,calendar:D.A,"calendar-error":O.A,website:M.A,help:S.A,copy:T.A,trash:E.A,visitor:P.A,visitors:C.A,"visitors-crowd":C.A,time:I.A,pageviews:F.A,referrer:G.A,sessions:R.A,bounces:L.A,bounced_sessions:L.A,bounce_rate:L.A,winner:q.A,live:Q.A,total:U.A,graph:V.A,conversion_rate:z.A,goals:B.A,conversions:B.A,"goals-empty":l.A,filter:Z.A,loading:H.A,desktop:K.A,tablet:J.A,mobile:W.A,other:$.A,mouse:Y.A,eye:F.A,page:X.A,hashtag:tt.A,sun:et.A,world:nt.A,filters:rt.A,referrers:st.A,hook:it.A};const ct=(0,s.memo)((function(t){var e=t.name,n=void 0===e?"bullet":e,s=t.color,o=void 0===s?"black":s,l=t.size,c=void 0===l?18:l,u=t.strokeWidth,d=void 0===u?1.5:u,f=t.tooltip,v=t.onClick,h=(t.className,ot[o]||o),b=lt[n]||a.A,p={size:c,color:h,strokeWidth:d},g=(0,r.jsx)("div",{onClick:function(){v&&v()},className:"flex items-center justify-center",children:"bullet"!==n&&"dot"!==n||b!==a.A?(0,r.jsx)(b,at({},p)):(0,r.jsx)(a.A,at({},p,{fill:h}))});return f?(0,r.jsx)(i.A,{content:f,children:g}):g}))},7926:(t,e,n)=>{n.d(e,{A:()=>l});var r=n(4848),s=n(1609),i=n(4164),a=n(6850),o=(0,s.memo)((function(t){var e=t.className,n=void 0===e?"":e,s=t.children;return(0,r.jsx)(a.A,{children:(0,r.jsx)("div",{className:(0,i.A)("col-span-12 flex flex-col overflow-hidden rounded-xl bg-white shadow-md relative border border-gray-100",n),children:s})})}));o.displayName="Block";const l=o},9369:(t,e,n)=>{n.d(e,{A:()=>b});var r=n(4848),s=n(1609),i=n.n(s),a=n(240),o=n(3101),l=n(332),c=n(2895),u=n(4301),d=n(7723),f=n(5446),v=n(900),h=function(t,e,n){if(n||2===arguments.length)for(var r,s=0,i=e.length;s<i;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))};const b=i().memo((function(t){var e=t.filter,n=t.filterValue,i=t.label,b=t.children,p=t.startDate,g=t.endDate,m=(0,a.c)((function(t){return t.setFilters})),y=(0,a.c)((function(t){return t.setAnimate})),x=(0,o.A)().getGoal,_=(0,l.G)((function(t){return t.setMetrics})),w=(0,l.G)((function(t){return t.getMetrics()})),j=(0,c.S)((function(t){return t.setStartDate})),k=(0,c.S)((function(t){return t.setEndDate})),A=(0,c.S)((function(t){return t.setRange})),N=(0,s.useMemo)((function(){return i?(0,d.__)("Click to filter by:","burst-statistics")+" "+i:(0,d.__)("Click to filter","burst-statistics")}),[i]),D=(0,s.useCallback)((function(){var t="",e="";if(/^\d+$/.test(p)){var n=10===p.toString().length?1e3*p:p;t=new Date(n).toISOString().split("T")[0]}else/\d{4}-\d{2}-\d{2}/.test(p)&&(t=p);g?/^\d+$/.test(g)?(n=10===g.toString().length?1e3*g:g,e=new Date(n).toISOString().split("T")[0]):/\d{4}-\d{2}-\d{2}/.test(g)&&(e=g):e=(new Date).toISOString().split("T")[0],(0,v.vd)(t)&&(0,v.vd)(e)&&(j(t),k(e),A("custom"))}),[p,g,j,k,A]),O=(0,s.useCallback)((function(t){return r=void 0,s=void 0,a=function(){var t;return function(t,e){var n,r,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,(function(r){switch(r.label){case 0:return window.location.href="#statistics","goal_id"!==e?[3,1]:((t=x(n))&&t.goal_specific_page?(m("page_url",t.goal_specific_page),m(e,n),f.toast.info((0,d.__)("Filtering by goal & goal specific page","burst-statistics"))):(m(e,n),f.toast.info((0,d.__)("Filtering by goal","burst-statistics"))),w.includes("conversions")||_(h(h([],w,!0),["conversions"],!1)),[3,3]);case 1:return m(e,""),[4,new Promise((function(t){return setTimeout(t,10)}))];case 2:r.sent(),m(e,n,!0),y(!1),r.label=3;case 3:return D(),[2]}}))},new((i=void 0)||(i=Promise))((function(t,e){function n(t){try{l(a.next(t))}catch(t){e(t)}}function o(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var r;e.done?t(e.value):(r=e.value,r instanceof i?r:new i((function(t){t(r)}))).then(n,o)}l((a=a.apply(r,s||[])).next())}));var r,s,i,a}),[e,n,x,m,w,_,y,D]);return e&&n?(0,r.jsx)(u.A,{content:N,children:(0,r.jsx)("span",{onClick:O,className:"burst-click-to-filter",children:b})}):(0,r.jsx)(r.Fragment,{children:b})}))}}]);