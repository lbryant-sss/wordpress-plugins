"use strict";(globalThis.webpackChunkburst_statistics=globalThis.webpackChunkburst_statistics||[]).push([[447],{8353:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(91637),s=r(51609),a=r.n(s),i=r(71752),o=r(61445),l=r(39988),c=r(88887),u=r(97813),d=r(55648),f=r(27723),p=r(21587),b=r(91788),g=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const v=a().memo(function(e){var t=e.filter,r=e.filterValue,a=e.label,v=e.children,m=e.startDate,h=e.endDate,y=(0,i.c)(function(e){return e.setFilters}),x=(0,i.c)(function(e){return e.filtersConf}),_=(0,o.A)().getGoal,w=(0,l.G)(function(e){return e.setMetrics}),j=(0,l.G)(function(e){return e.getMetrics()}),N=(0,c.S)(function(e){return e.setStartDate}),A=(0,c.S)(function(e){return e.setEndDate}),k=(0,c.S)(function(e){return e.setRange}),C=(0,s.useMemo)(function(){return t&&x&&Object.prototype.hasOwnProperty.call(x,t)},[t,x]),O=(0,s.useMemo)(function(){if(!r)return!1;if(["page_url","referrer"].includes(t))return!0;try{return/^https?:\/\/.+/i.test(r)}catch(e){return!1}},[t,r]);if(!C)return(0,n.jsx)(n.Fragment,{children:v});var S=(0,s.useCallback)(function(e){var n;e.stopPropagation();var s=r;if("page_url"===t&&!r.startsWith("http")){var a=(null===(n=window.burst_admin)||void 0===n?void 0:n.site_url)||window.location.origin;s="".concat(a).concat(r.startsWith("/")?"":"/").concat(r)}"referrer"!==t||r.startsWith("http")||(s="https://".concat(r)),window.open(s,"_blank","noopener,noreferrer")},[t,r]),D=(0,s.useMemo)(function(){return a?"".concat((0,f.__)("Click to filter by:","burst-statistics")," ").concat(a):(0,f.__)("Click to filter","burst-statistics")},[a]),E=(0,s.useMemo)(function(){return(0,f.__)("Open in new tab","burst-statistics")},[]),P=(0,s.useCallback)(function(){if(m){var e="",t="";if(/^\d+$/.test(m)){var r=10===m.toString().length?1e3*m:m;e=new Date(r).toISOString().split("T")[0]}else/\d{4}-\d{2}-\d{2}/.test(m)&&(e=m);h?/^\d+$/.test(h)?(r=10===h.toString().length?1e3*h:h,t=new Date(r).toISOString().split("T")[0]):/\d{4}-\d{2}-\d{2}/.test(h)&&(t=h):t=(new Date).toISOString().split("T")[0],(0,b.vd)(e)&&(0,b.vd)(t)&&(N(e),A(t),k("custom"))}},[m,h,N,A,k]),F=(0,s.useCallback)(function(e){var t=_(e);(null==t?void 0:t.goal_specific_page)?(y("page_url",t.goal_specific_page),y("goal_id",e),p.toast.info((0,f.__)("Filtering by goal & goal specific page","burst-statistics"))):(y("goal_id",e),p.toast.info((0,f.__)("Filtering by goal","burst-statistics"))),j.includes("conversions")||w(g(g([],j,!0),["conversions"],!1))},[_,y,j,w]),I=(0,s.useCallback)(function(e){e.stopPropagation(),C?("goal_id"===t?F(r):y(t,r),P()):console.warn('ClickToFilter: Invalid filter "'.concat(t,'" - not found in filter configuration'))},[t,r,C,F,y,P]);return t&&r&&C?(0,n.jsxs)("div",{className:"group flex items-center gap-2",children:[(0,n.jsx)("div",{className:"flex-1",children:v}),(0,n.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[(0,n.jsx)(u.A,{content:D,children:(0,n.jsx)("div",{onClick:I,className:"flex items-center justify-center w-6 h-6 bg-white/90 hover:bg-white border border-gray-200 rounded shadow-sm hover:shadow-md transition-all duration-150 cursor-pointer",children:(0,n.jsx)(d.A,{name:"filter",size:14,color:"black"})})}),O&&(0,n.jsx)(u.A,{content:E,children:(0,n.jsx)("div",{onClick:S,className:"flex items-center justify-center w-6 h-6 bg-white/90 hover:bg-white border border-gray-200 rounded shadow-sm hover:shadow-md transition-all duration-150 cursor-pointer",children:(0,n.jsx)(d.A,{name:"referrers",size:14,color:"black"})})})]})]}):(0,n.jsx)(n.Fragment,{children:v})})},10371:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(91637),s=r(51609),a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},a.apply(this,arguments)},i=(0,s.forwardRef)(function(e,t){var r=e.type,s=void 0===r?"text":r,i=e.className,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["type","className"]);return(0,n.jsx)("input",a({ref:t,type:s,className:"w-full rounded-md border border-gray-400 p-2 focus:border-primary-dark focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(i||"")},o))});i.displayName="TextInput";const o=i},11989:(e,t,r)=>{r.d(t,{t:()=>i});var n=r(91637),s=r(51609),a=r(2573),i=(0,s.memo)(function(e){var t=e.children,r=e.className,s=void 0===r?"":r,i=/\bp-\S+/.test(s);return(0,n.jsx)("div",{className:(0,a.A)("flex-grow",{"p-6":!i},s),children:t})});i.displayName="BlockContent"},21899:(e,t,r)=>{r.d(t,{$x:()=>N,D:()=>A,DX:()=>j,Eo:()=>C,Ey:()=>_,K5:()=>S,ZI:()=>k,bQ:()=>O,d2:()=>w,nd:()=>D,qN:()=>y,ww:()=>x});var n=r(91637),s=r(1455),a=r.n(s),i=r(27723),o=r(21587),l=function(){return l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},l.apply(this,arguments)},c=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},u=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},d=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},f=function(){return-1!==burst_settings.site_url.indexOf("?")?"&":"?"},p=function(){return"nonce="+burst_settings.burst_nonce+"&token="+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)},b=function(e,t){void 0===t&&(t=!1);var r=(0,i.__)("Server error","burst-statistics");if(e=e.replace(/(<([^>]+)>)/gi,""),t){var s=t.split("?")[0].split("/"),a=s.indexOf("v1")+1;r=(0,i.__)("Server error in","burst-statistics")+" "+s[a]+"/"+s[a+1]}r+=": "+e;var l=(0,n.jsx)("div",{title:(0,i.__)("Click to copy","burst-statistics"),onClick:function(){navigator.clipboard.writeText(r),o.toast.success((0,i.__)("Error copied to clipboard","burst-statistics"))},children:r});o.toast.error(l,{autoClose:15e3})},g=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return c(void 0,d([e],t,!0),void 0,function(e,t,r){var n;return void 0===t&&(t="GET"),void 0===r&&(r={}),u(this,function(s){return n={path:e,method:t},"POST"===t&&(r.nonce=burst_settings.burst_nonce,n.data=r),[2,a()(n).then(function(e){if(!e.request_success)throw e.hasOwnProperty("message")?new Error(e.message):new Error("Received unexpected response from server. Please check if the Rest API is enabled.");if(e.code&&200!==e.code)throw new Error(e.message);return delete e.request_success,e}).catch(function(s){return v(t,e,r).catch(function(){throw b(s.message,n.path),s})})]})})},v=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return c(void 0,d([e,t],r,!0),void 0,function(e,t,r){var n,s,a,i;return void 0===r&&(r=null),u(this,function(o){switch(o.label){case 0:n="GET"===e?"".concat(h("ajax"),"&rest_action=").concat(t.replace("?","&")):h("ajax"),s={method:e,headers:{"Content-Type":"application/json; charset=UTF-8"}},"POST"===e&&(s.body=JSON.stringify({path:t,data:r},m)),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch(n,s)];case 2:if(!(a=o.sent()).ok)throw b(!1,a.statusText),new Error(a.statusText);return[4,a.json()];case 3:if(!(i=o.sent()).data||!Object.prototype.hasOwnProperty.call(i.data,"request_success"))throw new Error("Invalid data error");return delete i.data.request_success,[2,Promise.resolve(i.data)];case 4:return o.sent(),[2,Promise.reject(new Error("AJAX request failed"))];case 5:return[2]}})})},m=function(e,t){return e?e&&e.includes("Control")?void 0:"object"==typeof t?JSON.parse(JSON.stringify(t,m)):t:t},h=function(e){var t;return t=void 0===e?burst_settings.site_url:burst_settings.admin_ajax_url,"https:"===window.location.protocol&&-1===t.indexOf("https://")?t.replace("http://","https://"):t},y=function(e,t){return g("burst/v1/options/set"+f()+p(),"POST",{option:{option:e,value:t}})},x=function(){return g("burst/v1/fields/get"+f()+p())},_=function(e){return g("burst/v1/fields/set"+f(),"POST",{fields:e})},w=function(e){return g("burst/v1/goals/set"+f()+p(),"POST",e)},j=function(){return g("burst/v1/goals/get"+f()+p())},N=function(e){return g("burst/v1/goals/delete"+f()+p(),"POST",{id:e})},A=function(){return g("burst/v1/goals/add"+f()+p(),"POST",{})},k=function(e){return g("burst/v1/goals/add_predefined"+f()+p(),"POST",{id:e})},C=function(e,t){return void 0===t&&(t={}),g("burst/v1/do_action/".concat(e),"POST",{action_data:t}).then(function(e){return Object.prototype.hasOwnProperty.call(e,"data")?e.data:[]})},O=function(e,t,r,n){for(var s=[],a=4;a<arguments.length;a++)s[a-4]=arguments[a];return c(void 0,d([e,t,r,n],s,!0),void 0,function(e,t,r,n,s){var a,i,o,c,d,p,b;return void 0===s&&(s={}),u(this,function(u){switch(u.label){case 0:return a=s.filters,i=s.metrics,o=s.group_by,c=s.currentView,d=l(l(l(l({date_start:t,date_end:r,date_range:n,nonce:burst_settings.burst_nonce,goal_id:s.goal_id,token:Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)},a&&{filters:a}),i&&{metrics:i}),o&&{group_by:o}),c&&{currentView:c}),v=d,p=Object.keys(v).filter(function(e){return void 0!==v[e]&&null!==v[e]}).map(function(e){var t=function(e){return Array.isArray(e)?e:"object"==typeof e&&null!==e?JSON.stringify(e):e}(v[e]);return Array.isArray(t)?t.map(function(t){return"".concat(encodeURIComponent(e),"[]=").concat(encodeURIComponent(t))}).join("&"):"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t))}).join("&"),b="burst/v1/data/".concat(e).concat(f()).concat(p),[4,g(b,"GET")];case 1:return[2,u.sent()]}var v})})},S=function(e){return g("burst/v1/posts/".concat(f()).concat(p(),"&search=").concat(e)).then(function(e){return Object.prototype.hasOwnProperty.call(e,"posts")?e.posts:[]})},D=function(e){return c(void 0,void 0,void 0,function(){var t,r;return u(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch(e)];case 1:if(!(t=n.sent()).ok)throw new Error("HTTP error! Status: ".concat(t.status));return[4,t.json()];case 2:return[2,n.sent()];case 3:throw r=n.sent(),console.error("Error fetching JSON data:",r),r;case 4:return[2]}})})}},22858:(e,t,r)=>{r.d(t,{A:()=>W});var n=r(91637),s=r(27723),a=r(51609),i=r(41631),o=r(55648);const l=function(e){var t=e.value,r=void 0===t?"":t,i=e.onChange,l=e.placeholder,c=void 0===l?(0,s.__)("Search","burst-statistics"):l,u=e.className,d=void 0===u?"":u,f=(0,a.useState)(!1),p=f[0],b=f[1],g=(0,a.useRef)(null),v=(0,a.useCallback)(function(){b(function(e){var t=!e;return t?setTimeout(function(){var e;null===(e=g.current)||void 0===e||e.focus()},0):null==i||i(""),t})},[i]),m=(0,a.useCallback)(function(){""===r.trim()&&b(!1)},[r]),h=(0,a.useCallback)(function(e){null==i||i(e.target.value)},[i]),y=(0,a.useCallback)(function(){var e;null==i||i(""),null===(e=g.current)||void 0===e||e.focus()},[i]),x=p||""!==r.trim();return(0,n.jsx)("div",{className:"relative ".concat(d),children:x?(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{ref:g,className:"bg-white border border-gray-300 rounded-full px-4 py-2 pr-10 min-w-48 transition-all duration-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none",type:"text",placeholder:c,value:r,onChange:h,onBlur:m,onKeyDown:function(e){"Escape"===e.key&&(null==i||i(""),b(!1))}}),r&&(0,n.jsx)("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200",onClick:y,onMouseDown:function(e){return e.preventDefault()},tabIndex:-1,"aria-label":(0,s.__)("Clear search","burst-statistics"),children:(0,n.jsx)(o.A,{name:"times",size:16})})]}):(0,n.jsx)("div",{className:"bg-gray-300 focus:ring-blue-500 cursor-pointer rounded-full p-3 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2",onClick:v,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),v())},tabIndex:0,role:"button","aria-label":c,children:(0,n.jsx)(o.A,{name:"search"})})})};var c=r(42617),u=r(65162);const d=function(e){var t=e.children,r=e.className,i=(e.onClick,e.show,e.title),l=e.subtitle,c=e.bulletPoints,d=void 0===c?[]:c,f=e.primaryButtonUrl,p=e.secondaryButtonUrl,b=(0,a.useState)(!1),g=b[0],v=b[1];return(0,n.jsxs)(u.bL,{open:g,onOpenChange:v,children:[(0,n.jsx)(u.l9,{className:"cursor-pointer ".concat(r),onMouseEnter:function(){return v(!0)},children:t}),(0,n.jsx)(u.ZL,{children:(0,n.jsxs)(u.UC,{className:"z-[9999] min-w-[320px] max-w-[400px] rounded-lg border border-gray-200 bg-white p-0 shadow-xl",align:"start",sideOffset:10,arrowPadding:10,children:[(0,n.jsx)(u.i3,{className:"fill-white drop-shadow-sm"}),(0,n.jsxs)("div",{className:"relative border-b border-gray-100 px-6 py-4",children:[(0,n.jsx)(u.bm,{className:"absolute right-3 top-3 rounded-full p-1 transition-colors hover:bg-gray-100",children:(0,n.jsx)(o.A,{name:"times",size:16})}),(0,n.jsx)("h5",{className:"mb-1 pr-8 text-lg font-semibold text-black",children:i}),(0,n.jsx)("h6",{className:"m-0 text-sm text-gray",children:l})]}),(0,n.jsxs)("div",{className:"px-6 py-4",children:[(0,n.jsx)("p",{className:"mb-3 text-xs font-medium uppercase tracking-wide text-gray",children:(0,s.__)("Pro features include:","burst-statistics")}),(0,n.jsx)("div",{className:"space-y-2",children:d.map(function(e){var t=e.text,r=e.icon;return(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"flex h-5 w-5 flex-shrink-0 items-center justify-center",children:(0,n.jsx)(o.A,{name:r,size:16,color:"#2B8133"})}),(0,n.jsx)("p",{className:"m-0 text-sm text-gray",children:t})]},t)})})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 rounded-b-lg border-t border-gray-100 bg-gray-50 px-6 py-4",children:[(0,n.jsx)("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"w-full rounded bg-primary px-4 py-1 text-center text-base font-normal text-white no-underline transition-all duration-200 hover:bg-primary hover:[box-shadow:0_0_0_3px_rgba(43,129,51,0.5)]",children:(0,s.__)("Upgrade to Pro","burst-statistics")}),(0,n.jsx)("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"w-full rounded border border-gray-400 bg-gray-100 px-4 py-1 text-center text-base font-normal text-gray no-underline transition-all duration-200 hover:bg-gray-200 hover:text-gray hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.1)]",children:(0,s.__)("Learn More","burst-statistics")})]})]})})]})};var f=r(11102);const p=(0,a.memo)(function(e){var t=e.value,r=e.onChange,s=e.options,i=(0,a.useCallback)(function(e){r(e)},[r]),l=(0,f.A)(),u=l.isLicenseValid,p=l.isPro,b=p&&u(),g=(0,a.useMemo)(function(){return{hasProOptions:s.some(function(e){return e.pro}),firstOption:s[0]}},[s]),v=g.hasProOptions,m=g.firstOption;return v&&!b&&(null==m?void 0:m.upsellPopover)?(0,n.jsxs)(d,{title:m.upsellPopover.title,subtitle:m.upsellPopover.subtitle,bulletPoints:m.upsellPopover.bulletPoints,primaryButtonUrl:m.upsellPopover.primaryButtonUrl,secondaryButtonUrl:m.upsellPopover.secondaryButtonUrl,children:[(0,n.jsx)("h3",{className:"burst-grid-title burst-h4",children:m.label}),(0,n.jsx)(o.A,{name:"chevron-down"})]}):1===s.length?(0,n.jsx)("span",{className:"text-lg font-semibold",children:s[0].label}):(0,n.jsxs)(c.bL,{value:t,onValueChange:i,children:[(0,n.jsxs)(c.l9,{className:"burst-datatable__select-trigger",children:[(0,n.jsx)(c.WT,{placeholder:"Select an option…"}),(0,n.jsx)(c.In,{className:"burst-datatable__select-trigger__icon",children:(0,n.jsx)(o.A,{name:"chevron-down"})})]}),(0,n.jsx)(c.UC,{className:"burst-datatable__select-content",position:"popper",alignOffset:-10,children:(0,n.jsx)(c.LM,{children:s.map(function(e){return(0,n.jsx)(c.q7,{value:e.key,className:"burst-datatable__select-content__item",disabled:e.pro&&!p,children:(0,n.jsx)(c.p4,{className:"burst-datatable__select-content__label",children:e.label})},e.key)})})})]})});var b=r(30346),g=r(14243),v=function(){return v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},v.apply(this,arguments)},m=(0,b.v)((0,g.Zr)(function(e,t){return{selectedConfigs:{},setSelectedConfig:function(t,r){e(function(e){var n;return{selectedConfigs:v(v({},e.selectedConfigs),(n={},n[t]=r,n))}})},getSelectedConfig:function(e,r){return t().selectedConfigs[e]||r},columnConfigs:{},setColumns:function(t,r){e(function(e){var n;return{columnConfigs:v(v({},e.columnConfigs),(n={},n[t]=r,n))}})},getColumns:function(e,r){return t().columnConfigs[e]||r},filterTexts:{},setFilterText:function(t,r){e(function(e){var n;return{filterTexts:v(v({},e.filterTexts),(n={},n[t]=r,n))}})},getFilterText:function(e){return t().filterTexts[e]||""},clearTableData:function(t){e(function(e){var r=v({},e.selectedConfigs),n=v({},e.filterTexts);return delete r[t],delete n[t],{selectedConfigs:r,filterTexts:n}})},resetAll:function(){e({selectedConfigs:{},columnConfigs:{},filterTexts:{}})}}},{name:"burst-datatable-storage",version:1.1,partialize:function(e){return{selectedConfigs:e.selectedConfigs,columnConfigs:e.columnConfigs}}}));const h=(0,a.memo)(function(e){var t=e.isLoading,r=e.error,a=e.noData;return t?(0,n.jsx)("div",{className:"burst-datatable-message burst-loading",children:(0,n.jsx)("p",{children:(0,s.__)("Loading data...","burst-statistics")})}):r?(0,n.jsx)("div",{className:"burst-datatable-message burst-error",children:(0,n.jsxs)("p",{children:[(0,s.__)("Error:","burst-statistics")," ",r.message]})}):a?(0,n.jsx)("div",{className:"burst-datatable-message burst-no-data",children:(0,n.jsx)("p",{children:(0,s.__)("No data available in table","burst-statistics")})}):(0,n.jsx)("div",{className:"burst-datatable-message burst-unexpected-error",children:(0,n.jsx)("p",{children:(0,s.__)("Unexpected error","burst-statistics")})})});var y,x=r(99696),_=r(88887),w=r(71752),j=r(61626),N=r(21899),A=r(91788),k=r(42552),C=r(8353),O=r(50616),S=function(){return S=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},S.apply(this,arguments)},D=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},E={PERCENTAGE:"percentage",TIME:"time",COUNTRY:"country",CONTINENT:"continent",URL:"url",TEXT:"text",INTEGER:"integer",REFERRER:"referrer"},P=(0,a.memo)(C.A),F=(0,a.memo)(function(e){var t=e.value;return(0,n.jsx)(P,{filter:"country_code",filterValue:t,children:(0,n.jsx)(k.A,{country:t,countryNiceName:(0,A.qQ)(t)})})}),I=(0,a.memo)(function(e){var t=e.value;return(0,n.jsx)(P,{filter:"page_url",filterValue:t,children:(0,O.S)(t)})}),T=(0,a.memo)(function(e){var t=e.value;return(0,n.jsx)(P,{filter:"referrer",filterValue:t,children:(0,O.S)(t)})}),M=(new Map,P=(0,a.memo)(C.A),F=(0,a.memo)(function(e){var t=e.value;return(0,n.jsx)(P,{filter:"country_code",filterValue:t,children:(0,n.jsx)(k.A,{country:t,countryNiceName:(0,A.qQ)(t)})})}),(0,a.memo)(function(e){var t=e.value;return(0,n.jsx)(P,{filter:"continent_code",filterValue:t,children:(0,n.jsx)(n.Fragment,{children:(0,A.Iq)(t)})})})),R=(I=(0,a.memo)(function(e){var t=e.filter,r=e.value;return(0,n.jsx)(P,{filter:t,filterValue:r,children:(0,O.S)(r)})}),(0,a.memo)(function(e){var t=e.filter,r=e.value;return(0,n.jsx)(P,{filter:t,filterValue:r,children:r})})),V=((y={})[E.PERCENTAGE]=function(e){return(0,A.Ee)(e)},y[E.TIME]=function(e){return(0,A.fU)(e)},y[E.INTEGER]=function(e){return parseInt(e,10)},y[E.COUNTRY]=function(e){return e&&""!==e?(0,n.jsx)(F,{value:e}):(0,s.__)("Not set","burst-statistics")},y[E.CONTINENT]=function(e){return(0,n.jsx)(M,{value:e})},y[E.URL]=function(e,t){return(0,n.jsx)(I,{filter:t,value:e})},y[E.TEXT]=function(e,t){return(0,n.jsx)(R,{filter:t,value:e})},y[E.REFERRER]=function(e,t){return(0,n.jsx)(T,{value:e})},y),L=function(e,t){var r=[E.PERCENTAGE,E.TIME,E.INTEGER].includes(t);return function(t,n){var s=t[e],a=n[e];if(null==s&&null==a)return 0;if(null==s)return 1;if(null==a)return-1;if(r){var i=parseFloat(s),o=parseFloat(a);return isNaN(i)&&isNaN(o)?0:isNaN(i)?1:isNaN(o)?-1:i-o}return String(s).toLowerCase().localeCompare(String(a).toLowerCase())}},z=function(e,t){var r=V[e];return r?function(e){var n;try{var s=null!==(n=e[t])&&void 0!==n?n:"";return r(s,t)}catch(r){return console.error("Error formatting cell value for column ".concat(t,":"),r),e[t]||""}}:(console.warn("Unknown column format: ".concat(e,". Using default text formatter.")),function(e){return e[t]||""})},B=function(e,t){try{return function(e){if(!e||"object"!=typeof e)throw new Error("Invalid response: expected object");if(!Array.isArray(e.columns))throw new Error("Invalid response: columns must be an array");if(!Array.isArray(e.data))throw new Error("Invalid response: data must be an array")}(e),{columns:e.columns.map(function(e){return function(e,t){var r=t[e.id];if(!r)return e;var n=r.format||E.INTEGER,s=r.align||"left";return S(S({},e),{selector:function(t){return t[e.id]},right:"left"!==s,sortFunction:L(e.id,n),cell:z(n,e.id)})}(e,t)}),data:D([],e.data,!0)}}catch(e){return console.error("Data transformation error:",e),{columns:[],data:[],error:e.message}}};const G=function(e){return t=void 0,r=void 0,s=function(){var t,r,n,s,a,i,o;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),function(e){var t=e.startDate,r=e.endDate,n=e.range,s=e.columnsOptions;if(!t||!r||!n)throw new Error("Missing required parameters: startDate, endDate, range");if(!s||"object"!=typeof s)throw new Error("Missing or invalid columnsOptions parameter")}(e),t=e.startDate,r=e.endDate,n=e.range,s=e.args,a=e.columnsOptions,[4,(0,N.bQ)("datatable",t,r,n,s)];case 1:if(!(i=l.sent().data))throw new Error("No data received from API");return[2,B(i,a)];case 2:return o=l.sent(),console.error("Error fetching data table data:",o),[2,{columns:[],data:[],error:o.message}];case 3:return[2]}})},new((n=void 0)||(n=Promise))(function(e,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s};var U=r(77902),q=r(67744),K=r(11989),Z=function(){return Z=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Z.apply(this,arguments)},Q={pageviews:{label:(0,s.__)("Pageviews","burst-statistics"),default:!0,align:"right"},sessions:{label:(0,s.__)("Sessions","burst-statistics"),pro:!0,align:"right"},visitors:{label:(0,s.__)("Visitors","burst-statistics"),pro:!0,align:"right"},conversions:{label:(0,s.__)("Conversions","burst-statistics"),pro:!0,align:"right"},conversion_rate:{label:(0,s.__)("Conversion Rate","burst-statistics"),format:"percentage",pro:!0,align:"right"},bounce_rate:{label:(0,s.__)("Bounce rate","burst-statistics"),format:"percentage",pro:!0,align:"right"},avg_time_on_page:{label:(0,s.__)("Time on page","burst-statistics"),pro:!0,format:"time",align:"right"}},H={pages:{label:(0,s.__)("Pages","burst-statistics"),searchable:!0,defaultColumns:["page_url","pageviews"],columnsOptions:Z({page_url:{label:(0,s.__)("Page URL","burst-statistics"),default:!0,format:"url",align:"left",group_by:!0}},Q)},referrers:{label:(0,s.__)("Referrers","burst-statistics"),searchable:!0,defaultColumns:["referrer","pageviews"],columnsOptions:Z({referrer:{label:(0,s.__)("Referrer","burst-statistics"),default:!0,format:"referrer",align:"left",group_by:!0}},Q)},countries:{label:(0,s.__)("Locations","burst-statistics"),pro:!0,searchable:!0,defaultColumns:["country_code","state","city","pageviews"],columnsOptions:Z({country_code:{label:(0,s.__)("Country","burst-statistics"),default:!0,format:"country",align:"left",group_by:!0},state:{label:(0,s.__)("State","burst-statistics"),format:"text",align:"left",group_by:!0},city:{label:(0,s.__)("City","burst-statistics"),format:"text",align:"left",group_by:!0},continent:{label:(0,s.__)("Continent","burst-statistics"),format:"continent",align:"left",group_by:!0}},Q)},campaigns:{label:(0,s.__)("Campaigns","burst-statistics"),pro:!0,searchable:!0,defaultColumns:["source","pageviews"],columnsOptions:Z({campaign:{label:(0,s.__)("Campaign","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},source:{label:(0,s.__)("Source","burst-statistics"),format:"text",align:"left",group_by:!0},medium:{label:(0,s.__)("Medium","burst-statistics"),format:"text",align:"left",group_by:!0},term:{label:(0,s.__)("Term","burst-statistics"),format:"text",align:"left",group_by:!0},content:{label:(0,s.__)("Content","burst-statistics"),format:"text",align:"left",group_by:!0}},Q)},parameters:{label:(0,s.__)("Parameters","burst-statistics"),searchable:!0,pro:!0,defaultColumns:["parameter","pageviews"],columnsOptions:Z({parameter:{label:(0,s.__)("Parameter","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},parameters:{label:(0,s.__)("Parameters","burst-statistics"),format:"text",align:"left",group_by:!0}},Q)},ghost:{label:(0,s.__)("Dummy","burst-statistics"),searchable:!0,defaultColumns:["pageviews"],columnsOptions:Z({},Q)}};const W=(0,a.memo)(function(e){var t=e.allowedConfigs,r=void 0===t?["pages","referrers"]:t,o=e.id,c=(0,_.S)(function(e){return e}),u=c.startDate,d=c.endDate,f=c.range,b=(0,w.c)(function(e){return e.filters}),g=r[0],v=m(),y=v.getSelectedConfig,N=v.setSelectedConfig,A=v.getColumns,k=v.setColumns,C=(0,a.useState)(function(){return y(o,g)}),O=C[0],S=C[1],D=(0,a.useMemo)(function(){return H[O]},[O]),E=(0,a.useMemo)(function(){return(null==D?void 0:D.columnsOptions)||{}},[D]),P=(0,a.useMemo)(function(){return(null==D?void 0:D.defaultColumns)||[]},[D]),F=(0,a.useState)(function(){var e=A(O,P),t=Object.keys(E);return e.filter(function(e){return t.includes(e)})}),I=F[0],T=F[1],M=(0,a.useCallback)(function(e){var t=e.filter(function(e){return Object.keys(E).includes(e)});JSON.stringify(t)!==JSON.stringify(I)&&(T(t),k(O,t))},[O,I,E,k]),R=(0,a.useCallback)(function(e){return t=void 0,r=void 0,s=function(){return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(t){return S(e),N(o,e),[2]})},new((n=void 0)||(n=Promise))(function(e,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s},[o,N]);(0,a.useEffect)(function(){var e,t=A(O,(null===(e=H[O])||void 0===e?void 0:e.defaultColumns)||[]);M(t)},[O,M,A]);var V=(0,a.useState)(""),L=V[0],z=V[1],B=(0,a.useMemo)(function(){return Object.keys(H).filter(function(e){return r.includes(e)}).map(function(e){return{key:e,label:H[e].label,pro:!!H[e].pro,upsellPopover:H[e].upsellPopover||null}})},[r]),Q=(0,a.useMemo)(function(){var e={filters:b,metrics:Object.keys(E).filter(function(e){return I.includes(e)}),group_by:[]};return I.forEach(function(t){var r;(null===(r=E[t])||void 0===r?void 0:r.group_by)&&e.group_by.push(t)}),e},[b,E,I]),W=(0,j.I)({queryKey:[O,u,d,Q],queryFn:function(){return G({type:"datatable",startDate:u,endDate:d,range:f,args:Q,columnsOptions:E})},enabled:!!O}),J=W.data||{},Y=J.data,X=J.columns,$=(0,a.useMemo)(function(){var e=[];if((null==D?void 0:D.searchable)&&Array.isArray(Y))if(""===L.trim())e=Y;else{var t=L.toLowerCase(),r=Object.keys(E).filter(function(e){var t;return null===(t=E[e])||void 0===t?void 0:t.group_by});e=Y.filter(function(e){return r.some(function(r){var n=e[r];return null!=n&&n.toString().toLowerCase().includes(t)})})}else e=Y;return Array.isArray(e)?e:[]},[Y,L,null==D?void 0:D.searchable,E]),ee=W.isLoading||W.isFetching,te=W.error,re=0===$.length,ne=(0,a.useMemo)(function(){if(!X||!E)return[];var e=Object.keys(E);return X.sort(function(t,r){return e.indexOf(t.selector)-e.indexOf(r.selector)})},[X,E]);if(!D)return null;var se=(0,a.useMemo)(function(){return{columns:ne,data:$,defaultSortFieldId:2,defaultSortAsc:!1,pagination:!0,paginationRowsPerPageOptions:[10,25,50,100,200],paginationPerPage:10,paginationComponentOptions:{rowsPerPageText:"",rangeSeparatorText:(0,s.__)("of","burst-statistics"),noRowsPerPage:!1,selectAllRowsItem:!0,selectAllRowsItemText:(0,s.__)("All","burst-statistics")},noDataComponent:(0,n.jsx)(h,{noData:re,data:[],isLoading:ee,error:te}),progressPending:ee,progressComponent:(0,n.jsx)(h,{noData:re,data:[],isLoading:ee,error:te})}},[ne,$,re,ee,te]);return(0,n.jsxs)(U.e,{className:"row-span-2 overflow-hidden xl:col-span-6",children:[(0,n.jsx)(q.q,{title:(0,n.jsx)(p,{value:O,onChange:R,options:B,disabled:[]}),controls:(0,n.jsxs)(n.Fragment,{children:[(null==D?void 0:D.searchable)&&(0,n.jsx)(l,{value:L,onChange:z,className:"ml-auto"}),(0,n.jsx)(i.A,{selectedOptions:I,options:E,onApply:M})]})}),(0,n.jsx)(K.t,{className:"px-0 py-0",children:(0,n.jsx)(x.Ay,Z({},se))})]})})},24454:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(91637),s=r(51609),a=r(29436),i=r(66087),o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},o.apply(this,arguments)},l=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},c=(0,s.forwardRef)(function(e,t){var r=e.value,c=e.onChange,u=e.loadOptions,d=e.defaultOptions,f=void 0===d?[]:d,p=e.isLoading,b=void 0!==p&&p,g=e.isSearchable,v=void 0===g||g,m=e.name,h=e.disabled,y=void 0!==h&&h,x=e.placeholder,_=void 0===x?"Select an option...":x,w=e.insideModal,j=void 0!==w&&w,N=e.maxSelections,A=void 0===N?1:N,k=e.showRemoveButton,C=void 0===k||k,O=e.allowCustomValue,S=void 0===O||O,D=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["value","onChange","loadOptions","defaultOptions","isLoading","isSearchable","name","disabled","placeholder","insideModal","maxSelections","showRemoveButton","allowCustomValue"]),E=(0,s.useState)([]),P=E[0],F=E[1],I=(0,s.useState)(""),T=I[0],M=I[1],R=(0,s.useState)(b),V=R[0],L=R[1],z=(0,s.useCallback)((0,i.debounce)(function(e){u&&(L(!0),u(e,function(e){F(e),L(!1)}))},150),[u]);(0,s.useEffect)(function(){return function(){z.cancel()}},[z]),(0,s.useEffect)(function(){Array.isArray(f)?F(f):!0===f&&u&&(L(!0),u("",function(e){F(e),L(!1)}))},[f,u]);var B=function(){if(!r)return[];if(Array.isArray(r))return r.map(function(e){return"object"==typeof e&&e.hasOwnProperty("value")&&e.hasOwnProperty("label")?e:P.find(function(t){return t.value===e})||{value:e,label:e.toString()}});if("object"==typeof r&&r.hasOwnProperty("value")&&r.hasOwnProperty("label"))return[r];var e=P.find(function(e){return e.value===r});return e?[e]:[{value:r,label:r.toString()}]}(),G=P.filter(function(e){return!B.some(function(t){return t.value===e.value})});console.log("inputValue ",T,P);var U=S&&""!==T.trim()&&(0===P.length||!P.some(function(e){var t;return(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase()===T.toLowerCase()})&&!B.some(function(e){var t;return(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase()===T.toLowerCase()}));U&&(G=l([{value:T.trim(),label:T.trim(),isCustom:!0}],G,!0));var q=(0,a.mH)({selectedItems:B,onStateChange:function(e){var t=e.selectedItems;switch(e.type){case a.mH.stateChangeTypes.SelectedItemKeyDownBackspace:case a.mH.stateChangeTypes.SelectedItemKeyDownDelete:case a.mH.stateChangeTypes.DropdownKeyDownBackspace:case a.mH.stateChangeTypes.FunctionRemoveSelectedItem:t&&c(1===A?t.length>0?t[0]:null:t)}}}),K=q.getSelectedItemProps,Z=q.getDropdownProps,Q=(q.addSelectedItem,q.removeSelectedItem,(0,a.Bp)({items:G,selectedItem:null,inputValue:T,stateReducer:function(e,t){var r=t.changes;switch(t.type){case a.Bp.stateChangeTypes.InputKeyDownEnter:case a.Bp.stateChangeTypes.ItemClick:return o(o({},r),{isOpen:A>1,highlightedIndex:0,inputValue:""});default:return r}},onStateChange:function(e){var t=e.type,r=e.selectedItem,n=e.inputValue;switch(t){case a.Bp.stateChangeTypes.InputKeyDownEnter:case a.Bp.stateChangeTypes.ItemClick:if(r)if(1===A)c(r),M("");else if(B.length<A){var s=l(l([],B,!0),[r],!1);c(s),M("")}break;case a.Bp.stateChangeTypes.InputChange:M(n||""),u&&v&&z(n||"")}},itemToString:function(e){return e?e.label:""}})),H=Q.isOpen,W=Q.getToggleButtonProps,J=Q.getInputProps,Y=Q.getMenuProps,X=Q.getItemProps,$=Q.highlightedIndex,ee=Q.getComboboxProps,te=function(e){var t=B.filter(function(t){return t.value!==e.value});c(1===A?t.length>0?t[0]:null:t)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",o({},ee(),{className:"flex min-h-[2.5rem] w-full rounded-md border border-gray-400 bg-white focus-within:border-primary-dark focus-within:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-wrap items-center gap-1 p-1",children:[B.map(function(e,t){return(0,n.jsxs)("span",o({},K({selectedItem:e,index:t}),{className:"inline-flex items-center gap-1 rounded bg-primary-light px-2 py-1 text-xs text-primary-dark focus:bg-primary focus:text-white focus:outline-none",children:[e.label,C&&(0,n.jsx)("button",{type:"button",onClick:function(t){t.stopPropagation(),te(e)},className:"ml-1 rounded-full hover:bg-primary hover:text-white focus:bg-primary focus:text-white focus:outline-none","aria-label":"Remove ".concat(e.label),children:(0,n.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),"selected-item-".concat(t))}),(1===A||B.length<A)&&(0,n.jsx)("input",o({},J(Z(o(o(o({preventKeyAction:H},t?{ref:t}:{}),{name:m,disabled:y,placeholder:0===B.length?_:A>1?"Add ".concat(A-B.length," more..."):"",readOnly:!v,onKeyDown:function(e){if("Backspace"===e.key&&""===T&&B.length>0){e.preventDefault();var t=B[B.length-1];te(t)}}}),D))),{className:"flex-1 min-w-[120px] border-none bg-transparent p-1 focus:outline-none disabled:cursor-not-allowed",style:{outline:"none"}}))]}),(0,n.jsxs)("div",{className:"flex items-center border-l border-gray-300",children:[A>0&&(0,n.jsxs)("span",{className:"px-2 text-xs text-gray-500 border-r border-gray-200",children:[B.length,"/",A]}),(0,n.jsx)("button",o({type:"button"},W({disabled:y}),{className:"flex items-center justify-center bg-transparent px-2 py-2 hover:bg-gray-100 focus:border-primary-dark focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-200","aria-label":"Toggle menu",children:V?(0,n.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-primary"}):(0,n.jsx)("svg",{className:"h-4 w-4 transition-transform ".concat(H?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}))]})]})),(0,n.jsx)("div",o({},Y(),{className:"w-full ".concat(j?"fixed":""," ").concat(H?"":"hidden"),children:(0,n.jsxs)("ul",{className:"relative top-0 z-[9999] max-h-60 overflow-y-auto w-full rounded-md border border-gray-300 bg-white shadow-lg ".concat(H&&G.length?"":"hidden"),children:[G.map(function(e,t){return(0,n.jsx)("li",o({},X({item:e,index:t}),{className:"cursor-pointer px-3 py-2 text-sm first:rounded-t-md last:rounded-b-md ".concat($===t?"bg-primary-light text-primary-dark":"hover:bg-gray-100"),children:e.isCustom?(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)("svg",{className:"h-4 w-4 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),'Create "',e.label,'"']}):e.label}),e.value)}),0===G.length&&!V&&(0,n.jsx)("li",{className:"px-3 py-2 text-sm text-gray-500",children:B.length>=A?"Maximum ".concat(A," selection").concat(A>1?"s":""," reached"):"No options found"})]})}))]})});c.displayName="AsyncSelectInput";const u=c},27257:(e,t,r)=>{r.d(t,{p:()=>i});var n=r(91637),s=r(51609),a=r(2573),i=(0,s.memo)(function(e){var t=e.children,r=e.className,s=void 0===r?"":r;return(0,n.jsx)("div",{className:(0,a.A)(s,"flex items-center justify-between px-6 py-3"),children:t})});i.displayName="BlockFooter"},39988:(e,t,r)=>{r.d(t,{G:()=>a});var n=r(30346),s=r(14243),a=(0,n.v)((0,s.Zr)(function(e,t){return{metrics:["visitors","pageviews"],loaded:!1,getMetrics:function(){if(t().loaded)return t().metrics;var r=t().metrics||["visitors","pageviews"];return r=r.filter(function(e){return"conversions"!==e}),e({metrics:r,loaded:!0}),r},setMetrics:function(t){e({metrics:t})}}},{name:"burst-insights-storage",partialize:function(e){return{metrics:e.metrics}},onRehydrateStorage:function(){return function(e){e&&e.metrics&&(e.metrics=e.metrics.filter(function(e){return"conversions"!==e}))}}}))},41013:(e,t,r)=>{r.d(t,{y:()=>B});var n=r(91637),s=r(51609),a=r.n(s),i=r(71752),o=r(39988),l=r(56910),c=r(27723),u=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},d=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const f=function(){var e=(0,i.c)(),t=e.filters,r=e.filtersConf,n=e.setFilters,a=(0,l.A)().getFilterOptionById,f=(0,o.G)(),p=f.setMetrics,b=f.getMetrics,g=(0,s.useState)([]),v=g[0],m=g[1];(0,s.useEffect)(function(){u(void 0,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return[4,h()];case 1:return e=t.sent(),m(e),[2]}})})},[t]);var h=(0,s.useCallback)(function(){return u(void 0,void 0,void 0,function(){var e;return d(this,function(n){switch(n.label){case 0:return e=Object.entries(t).filter(function(e){return e[0],""!==e[1]}),[4,Promise.all(e.map(function(e){return u(void 0,[e],void 0,function(e){var t,n=e[0],s=e[1];return d(this,function(e){switch(e.label){case 0:return[4,y(n,s)];case 1:return t=e.sent(),[2,{key:n,value:s,displayValue:t,config:(null==r?void 0:r[n])||null}]}})})}))];case 1:return[2,n.sent()]}})})},[t,r]),y=function(e,t){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];return u(void 0,function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}([e,t],n,!0),void 0,function(e,t,n){var s,i,o,l,f;return void 0===n&&(n={}),d(this,function(n){switch(n.label){case 0:return t?r.hasOwnProperty(e)&&(s=(null===(o=r[e])||void 0===o?void 0:o.options)||!1)?"string"!=typeof t||-1===t.indexOf(",")?[3,2]:(t=t.split(",").map(function(e){return e.trim()}),[4,Promise.all(t.map(function(e){return u(void 0,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return[4,a(e,s)];case 1:return[2,t.sent()||e]}})})}))]):[3,4]:[2,""];case 1:return t=(t=n.sent()).join(", "),[3,4];case 2:return[4,a(t,s)];case 3:t=n.sent()||t,n.label=4;case 4:switch(e){case"country_code":return t?(i=t.toUpperCase(),[2,(null===(f=null===(l=window.burst_settings)||void 0===l?void 0:l.countries)||void 0===f?void 0:f[i])||i]):[2,""];case"bounces":return[2,"include"===t?(0,c.__)("Bounced visitors","burst-statistics"):(0,c.__)("Active visitors","burst-statistics")];case"new_visitor":return[2,"true"===t?(0,c.__)("New visitors","burst-statistics"):(0,c.__)("Returning visitors","burst-statistics")];default:return[2,t]}return[2]}})})},x=(0,s.useCallback)(function(e){if(n(e,""),"goal_id"===e){var t=b().filter(function(e){return"conversions"!==e});p(t)}},[n,p,b]),_=(0,s.useMemo)(function(){return Array.isArray(v)&&v.length>0},[v]),w=(0,s.useCallback)(function(e){return r[e]||null},[r]);return{activeFilters:v,hasActiveFilters:_,removeFilter:x,getFilterConfig:w,setFilter:n,filters:t,filtersConf:r}};var p=r(55648),b=r(50616);const g=function(e){var t=e.filter,r=e.onRemove,s=e.onClick,a=e.className,i=void 0===a?"":a,o=e.showRemoveButton,l=void 0===o||o,u="".concat("inline-flex items-center gap-2 px-3 py-2 bg-gray-100 border border-gray-400 hover:bg-gray-200 shadow-md rounded-md text-sm transition-all duration-200 hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)] cursor-pointer"," ").concat(i).trim(),d=function(e){e.target.closest(".remove-button")||s&&s(t)};return t&&t.config?t.key?(0,n.jsxs)("div",{className:u,onClick:d,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),d(e))},role:"button",tabIndex:0,"aria-label":(0,c.__)("Edit %s filter","burst-statistics").replace("%s",t.config.label),title:(0,c.__)("Click to edit filter","burst-statistics"),children:[(0,n.jsx)(p.A,{name:t.config.icon,size:"16"}),(0,n.jsx)("p",{className:"font-medium",children:t.config.label}),(0,n.jsx)("span",{className:"h-4 w-px bg-gray-400"}),(0,n.jsx)("p",{className:"text-gray",children:(0,b.S)(t.displayValue)}),l&&r&&(0,n.jsx)("button",{onClick:function(){return r(t.key)},className:"remove-button rounded-full p-1 transition-colors hover:bg-gray-200","aria-label":(0,c.__)("Remove filter","burst-statistics"),title:(0,c.__)("Remove filter","burst-statistics"),children:(0,n.jsx)(p.A,{name:"times",color:"var(--rsp-grey-500)",size:"16"})})]}):null:(localStorage.removeItem("burst-filters-storage"),null)},v=function(e){var t=e.filters,r=void 0===t?[]:t,s=e.onRemove,a=e.onClick,i=e.className,o=void 0===i?"flex flex-wrap gap-2":i,l=e.showRemoveButton,c=void 0===l||l,u=e.emptyMessage,d=void 0===u?null:u;return Array.isArray(r)&&0!==r.length||d?0===r.length&&d?(0,n.jsx)("div",{className:"text-gray-500 text-sm",children:d}):(0,n.jsx)("div",{className:o,children:r.map(function(e){return(0,n.jsx)(g,{filter:e,onRemove:s,onClick:a,showRemoveButton:c},e.key)})}):null},m=function(e){var t=e.onClick,r=e.className,s=void 0===r?"":r,a=e.label,i=void 0===a?(0,c.__)("Add filter","burst-statistics"):a,o="".concat("inline-flex items-center gap-2 px-3 py-2 bg-gray-100 border border-gray-400 hover:bg-gray-200 shadow-md rounded-md text-sm transition-all duration-200 hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)] border-dashed cursor-pointer transition-colors"," ").concat(s).trim();return(0,n.jsxs)("div",{className:o,onClick:t,role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),null==t||t(e))},"aria-label":i,children:[(0,n.jsx)(p.A,{name:"plus",size:"16"}),(0,n.jsx)("p",{className:"font-medium",children:i})]})};var h=r(98371),y=r(2573),x=r(11102),_=r(35812);const w=function(e){var t,r=e.filterKey,s=e.config,a=e.isActive,o=void 0!==a&&a,l=e.onClick,u=e.gridPosition,d=(0,x.A)().isLicenseValid,f=(0,i.c)(),b=f.isFavorite,g=f.toggleFavorite,v=s.pro&&!d()||s.coming_soon,m=b(r),h=function(e){e.stopPropagation(),e.preventDefault(),v||g(r)},w=function(){v||l()};return(0,n.jsxs)("div",{className:(0,y.A)("relative rounded-lg border-2 p-4 transition-all duration-200 bg-white w-full group","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2",{"border-primary bg-primary-light":o,"border-gray-300 hover:border-gray-400":!o&&!v,"bg-gray-100 border-gray-200":v,"hover:shadow-md":!v,"bg-gray-300 opacity-90":s.coming_soon}),role:u?"gridcell":void 0,"aria-posinset":null==u?void 0:u.position,"aria-setsize":null==u?void 0:u.total,children:[(0,n.jsx)("button",{onClick:w,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),w())},disabled:v,"aria-label":(t="".concat(s.label," filter"),o&&(t+=", ".concat((0,c.__)("currently active","burst-statistics"))),s.pro&&(t+=", ".concat((0,c.__)("Pro feature","burst-statistics"))),s.coming_soon&&(t+=", ".concat((0,c.__)("coming soon","burst-statistics"))),v&&(t+=", ".concat((0,c.__)("disabled","burst-statistics"))),t),"aria-pressed":o,className:(0,y.A)("w-full h-full absolute inset-0 rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",{"cursor-not-allowed":v,"cursor-pointer hover:bg-black hover:bg-opacity-5":!v}),tabIndex:v?-1:0}),(0,n.jsx)("div",{className:"absolute top-2 right-2 z-20 opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity duration-200",children:(0,n.jsx)("button",{onClick:h,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),h(e))},disabled:v,className:(0,y.A)("p-1 rounded-full transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1","hover:bg-gray-200 active:bg-gray-300",{"text-yellow-500":m,"text-gray-400 hover:text-gray-600":!m,"cursor-not-allowed opacity-50":v}),"aria-label":m?(0,c.__)("Remove %s from favorites","burst-statistics").replace("%s",s.label):(0,c.__)("Add %s to favorites","burst-statistics").replace("%s",s.label),"aria-pressed":m,tabIndex:v?-1:0,children:(0,n.jsx)(p.A,{name:m?"star-filled":"star-outline",size:16,color:m?"yellow":"gray","aria-hidden":"true"})})}),o&&(0,n.jsx)("div",{className:"absolute top-2 left-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-3 relative z-10 pointer-events-none",children:[(0,n.jsx)("div",{className:(0,y.A)("flex h-12 w-12 items-center justify-center rounded-lg",{"bg-gray-100":!o,"bg-primary-light":o}),"aria-hidden":"true",children:(0,n.jsx)(p.A,{name:s.icon,color:"gray",size:24,"aria-hidden":"true"})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:s.label}),s.pro&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(_.A,{label:(0,c.__)("Pro","burst-statistics")})}),s.coming_soon&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("span",{className:"inline-flex items-center rounded bg-blue-light px-2 py-0.5 text-xs font-medium text-gray",children:(0,c.__)("Coming soon","burst-statistics")})})]})]})]})};var j=function(){return j=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},j.apply(this,arguments)};const N=function(e){var t=e.onSelectFilter,r=(0,i.c)(function(e){return e.filtersConf}),a=(0,i.c)(function(e){return e.filterCategories}),o=(0,i.c)(function(e){return e.getActiveFilters}),l=(0,i.c)(function(e){return e.getFiltersByCategory}),u=(0,i.c)(function(e){return e.getFavoriteFilters}),d=(0,s.useState)("favorites"),f=d[0],b=d[1],g=(0,s.useState)(""),v=g[0],m=g[1],h=(0,s.useRef)(null),x=o(),_=l(),N=u();(0,s.useEffect)(function(){h.current&&h.current.focus()},[]);var A=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}([{key:"favorites",label:(0,c.__)("Favorites","burst-statistics"),icon:"star-outline"},{key:"all",label:(0,c.__)("All","burst-statistics"),icon:"grid"}],Object.entries(a).sort(function(e,t){var r=e[1],n=t[1];return r.order-n.order}).map(function(e){var t=e[0],r=e[1];return{key:t,label:r.label,icon:r.icon}}),!0),k=function(e){if(!e.trim())return null;var t=e.toLowerCase(),n=Object.entries(r).filter(function(e){return e[0],e[1].type}).map(function(e){var t=e[0],r=e[1];return j({key:t},r)}),s=function(e){return e.label.toLowerCase().includes(t)||e.key.toLowerCase().includes(t)},a=("favorites"===f?N:"all"===f?n:_[f]||[]).filter(s);return a.length>0?{results:a,source:f,isFromCurrentTab:!0}:{results:n.filter(s),source:"all",isFromCurrentTab:!1}}(v),C=function(e,r){return 0===e.length?(0,n.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,n.jsx)(p.A,{name:"empty",size:48,color:"gray"}),(0,n.jsx)("p",{className:"mt-2",children:v.trim()?(0,c.__)("No filters match your search.","burst-statistics"):"favorites"===f?(0,c.__)("No favorite filters yet. Pin filters to add them here.","burst-statistics"):"all"===f?(0,c.__)("No filters available.","burst-statistics"):(0,c.__)("No filters in this category.","burst-statistics")})]}):(0,n.jsxs)("div",{children:[r&&!r.isFromCurrentTab&&(0,n.jsx)("div",{className:"mb-4 p-3 bg-blue-light border border-blue-200 rounded-lg",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(p.A,{name:"help",size:16,color:"blue"}),(0,n.jsx)("span",{className:"text-sm text-blue-700",children:(0,c.__)("No results found in current tab. Showing results from all filters.","burst-statistics")})]})}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 justify-items-center",role:"grid","aria-label":(0,c.__)("Available filters","burst-statistics"),children:e.map(function(r,s){return(0,n.jsx)(w,{filterKey:r.key,config:r,isActive:x.hasOwnProperty(r.key),onClick:function(){return t(r.key,r)},gridPosition:{position:s+1,total:e.length}},r.key)})})]})};return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"filter-search",className:"sr-only",children:(0,c.__)("Search filters","burst-statistics")}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,n.jsx)(p.A,{name:"search",size:16,className:"text-gray-400","aria-hidden":"true"})}),(0,n.jsx)("input",{id:"filter-search",type:"text",placeholder:(0,c.__)("Search filters...","burst-statistics"),value:v,onChange:function(e){return m(e.target.value)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary text-sm","aria-describedby":k?"search-results-info":void 0,ref:h}),v&&(0,n.jsx)("button",{onClick:function(){return m("")},className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-900","aria-label":(0,c.__)("Clear search","burst-statistics"),type:"button",children:(0,n.jsx)(p.A,{name:"times",size:16,"aria-hidden":"true"})})]})]}),(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)("div",{className:"border-b border-gray-200",children:(0,n.jsx)("nav",{className:"-mb-px flex space-x-8 overflow-x-auto scrollbar-hide",role:"tablist","aria-label":(0,c.__)("Filter categories","burst-statistics"),children:A.map(function(e){return(0,n.jsxs)("button",{id:"tab-".concat(e.key),onClick:function(){return b(e.key)},role:"tab","aria-selected":f===e.key,"aria-controls":"tabpanel-".concat(e.key),className:(0,y.A)("flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap flex-shrink-0","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",{"border-primary text-primary":f===e.key,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":f!==e.key}),children:[(0,n.jsx)("span",{className:(0,y.A)("flex items-center justify-center w-6 h-6 rounded-full transition-all duration-200",{"bg-primary-light text-white shadow-sm border-primary border-0.5":f===e.key,"bg-transparent":f!==e.key}),"aria-hidden":"true",children:(0,n.jsx)(p.A,{name:e.icon,size:16})}),(0,n.jsx)("span",{children:e.label})]},e.key)})})})}),(0,n.jsx)("div",{role:"tabpanel",id:"tabpanel-".concat(f),"aria-labelledby":"tab-".concat(f),children:k?(0,n.jsxs)("div",{children:[k.results.length>0&&(0,n.jsx)("div",{id:"search-results-info",className:"sr-only",children:(0,c.__)("Showing %d search results","burst-statistics").replace("%d",k.results.length.toString())}),C(k.results,k)]}):C("favorites"===f?N:"all"===f?Object.entries(r).filter(function(e){return e[0],e[1].type}).map(function(e){var t=e[0],r=e[1];return j({key:t},r)}):_[f]||[])})]})};var A=r(24454),k=r(10371);const C=function(e){var t=e.filterKey,r=e.config,a=e.initialValue,i=void 0===a?"":a,o=e.onChange,u=(0,s.useState)(i),d=u[0],f=u[1],p=(0,s.useRef)(null),b=(0,s.useRef)(null),g=(0,s.useState)([]),v=g[0],m=g[1],h=(0,l.A)(),y=h.getFilterOptions,x=h.isLoading,_=h.isError;(0,s.useEffect)(function(){f(i)},[i]),(0,s.useEffect)(function(){var e,t,n,s;e=void 0,t=void 0,s=function(){var e,t,n;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(s){switch(s.label){case 0:return r.options?[4,y(r.options)]:[3,2];case 1:return t=s.sent(),[3,3];case 2:t=[],s.label=3;case 3:return e=t,n=Array.isArray(e)?e.map(function(e){return{value:e.id||e.title,label:e.title}}):[],m(n),[2]}})},new((n=void 0)||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})},[r.options,y]),(0,s.useEffect)(function(){var e=setTimeout(function(){var e,t;r.options&&p.current?p.current.focus?p.current.focus():(null===(t=null===(e=p.current.select)||void 0===e?void 0:e.inputRef)||void 0===t?void 0:t.current)&&p.current.select.inputRef.current.focus():!r.options&&b.current&&b.current.focus()},100);return function(){return clearTimeout(e)}},[r.options]);var w=function(){if(r.options)return(0,c.__)("Search or select an option...","burst-statistics");switch(t){case"page_url":return(0,c.__)("Enter page URL (e.g., /about)","burst-statistics");case"referrer":return(0,c.__)("Enter referrer URL (e.g., google.com)","burst-statistics");case"campaign":return(0,c.__)("Enter campaign name","burst-statistics");case"source":return(0,c.__)("Enter traffic source","burst-statistics");case"medium":return(0,c.__)("Enter traffic medium","burst-statistics");case"term":return(0,c.__)("Enter search term","burst-statistics");case"content":return(0,c.__)("Enter content identifier","burst-statistics");case"url_parameter":return(0,c.__)("Enter URL parameter (e.g., utm_campaign)","burst-statistics");default:return(0,c.__)("Enter filter value...","burst-statistics")}};return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{className:"space-y-2 relative",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,c.__)("Filter value","burst-statistics")}),r.options?(0,n.jsx)(A.A,{ref:p,value:d?v.find(function(e){return e.value===d})||{value:d,label:d}:null,onChange:function(e){var t=e?e.value:"";f(t),o(t)},loadOptions:function(e,t){if(x)t([]);else if(_)t([]);else if(v.length){var r=v.filter(function(t){var r,n,s=(null!==(r=t.label)&&void 0!==r?r:"").toLowerCase(),a=(null!==(n=t.value)&&void 0!==n?n:"").toLowerCase(),i=e.toLowerCase();return s.includes(i)||a.includes(i)});t(r)}else t([])},defaultOptions:v,placeholder:w(),isSearchable:!0,isLoading:x,disabled:!1,insideModal:!0}):(0,n.jsx)(k.A,{ref:b,value:d,onChange:function(e){var t=e.target.value;f(t),o(t)},placeholder:w(),className:"w-full"})]})})};var O=r(78548);const S=function(e){var t=e.filterKey,r=(e.config,e.initialValue),a=void 0===r?"":r,i=e.onChange,o=(0,s.useState)(a),l=o[0],u=o[1];(0,s.useEffect)(function(){u(a)},[a]);var d="bounces"===t?{"":{type:"",icon:"user",label:(0,c.__)("All visitors (default)","burst-statistics")},include:{type:"include",icon:"bounce",label:(0,c.__)("Bounced visitors","burst-statistics")},exclude:{type:"exclude",icon:"user-check",label:(0,c.__)("Active visitors","burst-statistics")}}:"new_visitor"===t?{"":{type:"",icon:"user",label:(0,c.__)("All visitors (default)","burst-statistics")},include:{type:"include",icon:"user-plus",label:(0,c.__)("New visitors","burst-statistics")},exclude:{type:"exclude",icon:"user-check",label:(0,c.__)("Returning visitors","burst-statistics")}}:{"":{type:"",icon:"user",label:(0,c.__)("All visitors (default)","burst-statistics"),description:(0,c.__)("Show all visitors without filtering","burst-statistics")},include:{type:"include",icon:"check",label:(0,c.__)("Include","burst-statistics"),description:(0,c.__)("Include visitors matching this criteria","burst-statistics")},exclude:{type:"exclude",icon:"times",label:(0,c.__)("Exclude","burst-statistics"),description:(0,c.__)("Exclude visitors matching this criteria","burst-statistics")}};return(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,c.__)("Filter option","burst-statistics")}),(0,n.jsx)(O.A,{inputId:"".concat(t,"-boolean"),options:d,value:l,onChange:function(e){u(e),i(e)},columns:1})]})})};var D=r(90160),E=function(){return E=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},E.apply(this,arguments)},P=(0,s.forwardRef)(function(e,t){var r=e.min,a=void 0===r?0:r,i=e.max,o=void 0===i?100:i,l=e.step,u=void 0===l?1:l,d=e.value,f=void 0===d?[a,o]:d,p=e.onChange,b=e.formatValue,g=void 0===b?function(e){return e.toString()}:b,v=e.className,m=void 0===v?"":v,h=e.disabled,y=void 0!==h&&h,x=e.label,_=e.showLabels,w=void 0===_||_,j=e.showCurrentValue,N=void 0===j||j,A=e.allowSingleValue,k=void 0!==A&&A,C=e.rangeSeparator,O=void 0===C?" - ":C,S=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["min","max","step","value","onChange","formatValue","className","disabled","label","showLabels","showCurrentValue","allowSingleValue","rangeSeparator"]),P=(0,s.useState)(f),F=P[0],I=P[1];return(0,s.useEffect)(function(){I(f)},[f]),(0,n.jsxs)("div",E({ref:t,className:"space-y-3 ".concat(m)},S,{children:[x&&(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:x}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)(D.bL,{className:"relative flex items-center select-none touch-none w-full h-5",value:k&&F[0]===F[1]?[F[0]]:F,onValueChange:function(e){var t=k&&1===e.length?[e[0],e[0]]:[e[0],e[1]];I(t),null==p||p(t)},min:a,max:o,step:u,disabled:y,children:[(0,n.jsx)(D.CC,{className:"bg-gray-200 relative grow rounded-full h-2",children:(0,n.jsx)(D.Q6,{className:"absolute bg-primary rounded-full h-full"})}),(0,n.jsx)(D.zi,{className:"block w-5 h-5 bg-white border-2 border-primary rounded-full shadow-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":(0,c.__)("Minimum value","burst-statistics")}),(!k||F[0]!==F[1])&&(0,n.jsx)(D.zi,{className:"block w-5 h-5 bg-white border-2 border-primary rounded-full shadow-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":(0,c.__)("Maximum value","burst-statistics")})]}),w&&(0,n.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,n.jsx)("span",{children:g(a)}),N&&(0,n.jsx)("span",{className:"font-medium text-primary",children:k&&F[0]===F[1]?g(F[0]):"".concat(g(F[0])).concat(O).concat(g(F[1]))}),(0,n.jsx)("span",{children:g(o)})]})]})]}))});P.displayName="RangeSliderInput";const F=P,I=function(e){var t=e.filterKey,r=(e.config,e.initialValue),a=void 0===r?"":r,i=e.onChange,o=function(e){if(!e||""===e)return[0,100];if("string"==typeof e&&e.includes("-")){var t=e.split("-").map(function(e){return parseFloat(e.trim())});return[t[0]||0,t[1]||100]}return[0,parseFloat(e)||0]},l=(0,s.useState)(o(a)),u=l[0],d=l[1],f=(0,s.useState)(0),p=f[0],b=f[1],g=(0,s.useState)(100),v=g[0],m=g[1];(0,s.useEffect)(function(){d(o(a))},[a]),(0,s.useEffect)(function(){switch(t){case"bounce_rate":case"conversion_rate":default:b(0),m(100);break;case"time_per_session":b(0),m(3600)}},[t]);var h=function(e){d(e);var t=e[0]===e[1]?e[0].toString():"".concat(e[0],"-").concat(e[1]);i(t)};return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(F,{min:p,max:v,value:u,onChange:h,formatValue:function(e){if(""===e||null==e)return"";var r="string"==typeof e?parseFloat(e):e;switch(t){case"bounce_rate":case"conversion_rate":return"".concat(r,"%");case"time_per_session":var n=Math.floor(r/60),s=r%60;return n>0?"".concat(n,"m ").concat(s,"s"):"".concat(s,"s");default:return r.toString()}},label:(0,c.__)("Filter range","burst-statistics"),showLabels:!0,showCurrentValue:!0,rangeSeparator:" - "}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,c.__)("Exact range values","burst-statistics")}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(k.A,{type:"number",value:u[0],onChange:function(e){var t=e.target.value,r=parseFloat(t);if(""===t||!isNaN(r)&&r>=p&&r<=v){var n=[r||0,u[1]];d(n),h(n)}},placeholder:(0,c.__)("Min value...","burst-statistics"),min:p,max:v,className:"w-full"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,c.__)("Minimum value","burst-statistics")})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(k.A,{type:"number",value:u[1],onChange:function(e){var t=e.target.value,r=parseFloat(t);if(""===t||!isNaN(r)&&r>=p&&r<=v){var n=[u[0],r||v];d(n),h(n)}},placeholder:(0,c.__)("Max value...","burst-statistics"),min:p,max:v,className:"w-full"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,c.__)("Maximum value","burst-statistics")})]}),(0,n.jsx)("button",{type:"button",onClick:function(){d([p,v]),i("")},className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:(0,c.__)("Clear","burst-statistics")})]}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:(0,c.__)("Clear to remove this filter","burst-statistics")})]})]})})};var T=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const M=function(e){e.filterKey,e.config;var t=e.initialValue,r=void 0===t?"":t,a=e.onChange,i=(0,l.A)().getFilterOptions,o=(0,s.useState)([]),u=o[0],d=o[1];(0,s.useEffect)(function(){var e,t,r,n;e=void 0,t=void 0,n=function(){var e;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(t){switch(t.label){case 0:return[4,i("devices")];case 1:return e=t.sent()||[],d(e),[2]}})},new((r=void 0)||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},[]);var f,b=(0,s.useState)((f=r)&&""!==f.trim()?f.split(",").map(function(e){return e.trim().toLowerCase()}).filter(Boolean):[]),g=b[0],v=b[1];(0,s.useEffect)(function(){var e=g.length>0?g.join(","):"";a(e)},[g,a]);var m=function(e){v(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):T(T([],t,!0),[e],!1)})},h=function(e){return g.includes(e)},x=function(e){var t="".concat(e.title," device filter"),r=h(e.id)?(0,c.__)("selected","burst-statistics"):(0,c.__)("not selected","burst-statistics");return"".concat(t,", ").concat(r)};return u&&0!==u.length?(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 justify-items-center",role:"group","aria-label":(0,c.__)("Device selection options","burst-statistics"),children:u.map(function(e){var t=h(e.id);return(0,n.jsxs)("button",{onClick:function(){return m(e.id)},onKeyDown:function(t){return function(e,t){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m(t))}(t,e.id)},className:(0,y.A)("relative rounded-lg border-2 p-4 transition-all duration-200 bg-white w-full group","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","hover:shadow-md",{"border-primary bg-primary-light":t,"border-gray-300 hover:border-gray-400":!t}),"aria-label":x(e),"aria-pressed":t,type:"button",children:[t&&(0,n.jsx)("div",{className:"absolute top-2 right-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,n.jsx)("div",{className:(0,y.A)("flex h-12 w-12 items-center justify-center rounded-lg transition-colors",{"bg-primary-light":t,"bg-gray-100 group-hover:bg-gray-200":!t}),"aria-hidden":"true",children:(0,n.jsx)(p.A,{name:e.key,color:"gray",size:24,"aria-hidden":"true"})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("h3",{className:(0,y.A)("text-sm font-medium transition-colors",{"text-gray-900":t,"text-gray-700":!t}),children:e.title})})]}),(0,n.jsx)("div",{className:"absolute bottom-2 left-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:(0,y.A)("h-4 w-4 rounded border-2 transition-all duration-200 flex items-center justify-center",{"bg-primary border-primary":t,"bg-white border-gray-300 group-hover:border-gray-400":!t}),children:t&&(0,n.jsx)(p.A,{name:"check",size:12,color:"white","aria-hidden":"true"})})})]},e.id)})})}):null};var R=function(){return R=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},R.apply(this,arguments)};const V=function(e){var t=e.filterKey,r=e.config,s=(e.onBack,e.tempValue),a=e.onTempValueChange;return(0,n.jsx)("div",{className:"h-full",children:function(){var e={filterKey:t,config:r,initialValue:s,onChange:a};if("device_id"===t)return(0,n.jsx)(M,R({},e));switch(r.type){case"string":default:return(0,n.jsx)(C,R({},e));case"boolean":return(0,n.jsx)(S,R({},e));case"int":return(0,n.jsx)(I,R({},e))}}()})};var L=r(50552);const z=function(e){var t=e.isOpen,r=e.setIsOpen,o=e.initialFilter,l=(0,i.c)(function(e){return e.setFilters}),u=(0,i.c)(function(e){return e.deleteFilter}),d=(0,i.c)(function(e){return e.clearAllFilters}),f=(0,i.c)(function(e){return e.getActiveFilters}),b=(0,s.useState)("selection"),g=b[0],v=b[1],m=(0,s.useState)(null),y=m[0],x=m[1],_=(0,s.useState)(null),w=_[0],j=_[1],A=(0,s.useState)(""),k=A[0],C=A[1];a().useEffect(function(){t&&(o?(v("setup"),x(o.key),j(o.config),C(o.value)):(v("selection"),x(null),j(null),C("")))},[t,o]);var O=function(){v("selection"),x(null),j(null),C("")};return(0,n.jsx)(h.A,{isOpen:t,onClose:function(){return r(!1)},title:"selection"===g?"selection"===g?(0,c.__)("Select a filter","burst-statistics"):(0,c.__)("Setup Filter","burst-statistics"):void 0,subtitle:"selection"===g?"selection"===g?(0,c.__)("Choose a filter to apply to your analytics data","burst-statistics"):(0,c.__)("Setup filter","burst-statistics"):void 0,customHeader:"setup"===g&&"setup"===g&&w?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex items-center space-x-3 mb-4",children:(0,n.jsxs)("button",{onClick:O,className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded transition-all duration-200","aria-label":(0,c.__)("Back to filters","burst-statistics"),type:"button",children:[(0,n.jsx)(p.A,{name:"chevron-left",size:16,"aria-hidden":"true"}),(0,n.jsx)("span",{children:(0,c.__)("Back to filters","burst-statistics")})]})}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary-light",children:(0,n.jsx)(p.A,{name:w.icon,color:"gray",size:20})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:w.label}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"setup"===g&&w?"string"===w.type?w.options?(0,c.__)("Start typing to search or select from available options","burst-statistics"):(0,c.__)("Enter the value you want to filter by","burst-statistics"):"int"===w.type?(0,c.__)("Set the range for this filter","burst-statistics"):"boolean"===w.type?(0,c.__)("Select the option you want to filter by","burst-statistics"):"":""})]})]})]}):null,content:"selection"===g?(0,n.jsx)(N,{onSelectFilter:function(e,t){x(e),j(t),v("setup");var r=f();C(r[e]||"")}}):(0,n.jsx)(V,{filterKey:y,config:w,onBack:O,tempValue:k,onTempValueChange:function(e){C(e)}}),footer:"selection"===g?(0,n.jsx)(L.A,{onClick:function(){d(),r(!1)},btnVariant:"tertiary",size:"sm",className:"w-full",ariaLabel:(0,c.__)("Reset all active filters to default settings","burst-statistics"),children:(0,c.__)("Reset all filters","burst-statistics")}):"setup"===g?(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)(L.A,{onClick:function(){var e,t;y&&(e=y,""===(t=k)||null==t?u(e):l(e,t),r(!1))},btnVariant:"primary",size:"sm",className:"flex-1",ariaLabel:w?(0,c.__)("Apply %s filter","burst-statistics").replace("%s",w.label):(0,c.__)("Apply filter","burst-statistics"),children:(0,c.__)("Apply Filter","burst-statistics")}),(0,n.jsx)(L.A,{onClick:function(){var e,t;y&&(e=y,""===(t=k)||null==t?u(e):l(e,t),O())},btnVariant:"secondary",size:"sm",className:"flex-1",ariaLabel:w?(0,c.__)("Apply %s filter and continue adding more filters","burst-statistics").replace("%s",w.label):(0,c.__)("Apply filter and add more","burst-statistics"),children:(0,c.__)("Apply & Add More","burst-statistics")})]}):null,triggerClassName:"",children:null})};var B=function(){var e=(0,s.useState)(!1),t=e[0],r=e[1],a=(0,s.useState)(null),i=a[0],o=a[1],l=f(),c=l.activeFilters,u=l.removeFilter;return(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,n.jsx)(v,{filters:c,onRemove:u,onClick:function(e){o({key:e.key,config:e.config,value:e.value}),r(!0)},className:"flex flex-wrap gap-2"}),(0,n.jsx)(m,{onClick:function(){o(null),r(!0)}}),(0,n.jsx)(z,{isOpen:t,setIsOpen:function(){r(!1),o(null)},initialFilter:i})]})}},41631:(e,t,r)=>{r.d(t,{A:()=>g});var n=r(91637),s=r(51609),a=r(89668),i=r(65825),o=r(50552),l=r(55648),c=r(27723),u=r(35812),d=r(65162);const f=function(e){var t=e.title,r=e.children,s=e.footer,a=e.isOpen,i=e.setIsOpen,o=e.showFilterIcon,c=void 0===o||o;return e.size,(0,n.jsxs)(d.bL,{open:a,onOpenChange:i,children:[(0,n.jsx)(d.l9,{id:"burst-filter-button",onClick:function(){return i(!a)},children:c&&(0,n.jsx)("div",{className:"".concat(a?"bg-gray-400 shadow-lg":"bg-gray-300"," focus:ring-blue-500 cursor-pointer rounded-full p-3 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2"),children:(0,n.jsx)(l.A,{name:"filter"})})}),(0,n.jsx)(d.ZL,{container:document.querySelector(".burst"),children:(0,n.jsxs)(d.UC,{className:"z-50 min-w-[280px] max-w-[600px] rounded-lg border border-gray-200 bg-white p-0 shadow-xl",align:"start",sideOffset:10,arrowPadding:10,children:[(0,n.jsx)(d.i3,{className:"fill-white drop-shadow-sm"}),(0,n.jsx)("div",{className:"border-b border-gray-100 px-4 py-3",children:(0,n.jsx)("h5",{className:"m-0 text-base font-semibold text-black",children:t})}),(0,n.jsx)("div",{className:"px-4 py-2",children:r}),s&&(0,n.jsx)("div",{className:"flex gap-2 rounded-b-lg border-t border-gray-100 bg-gray-50 px-4 py-3",children:s})]})})]})};var p=r(11102),b=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const g=function(e){var t=e.onApply,r=e.id,d=e.options,g=e.selectedOptions,v=e.selectionMode,m=void 0===v?"multiple":v,h=(0,s.useState)(!1),y=h[0],x=h[1],_=(0,s.useState)(g),w=_[0],j=_[1];(0,s.useEffect)(function(){j(g)},[g]);var N=(0,p.A)().isLicenseValid,A=function(e){if("single"!==m||e&&0!==e.length)t(e);else{var r=Object.keys(d)[0];r&&t([r])}x(!1)},k=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.A,{onClick:function(){return A(w),void x(!1)},btnVariant:"primary",size:"sm",className:"flex-1",children:(0,c.__)("Apply","burst-statistics")}),(0,n.jsx)(o.A,{onClick:function(){return function(){var e=Object.keys(d).filter(function(e){return d[e].default});if("single"===m){var t=0<e.length?e[0]:Object.keys(d)[0];j([t]),A([t])}else j(e),A(e);x(!1)}()},btnVariant:"tertiary",size:"sm",className:"flex-1",children:(0,c.__)("Reset to defaults","burst-statistics")})]});return(0,n.jsx)(f,{isOpen:y,setIsOpen:function(e){e?x(!0):(x(!1),j(g))},title:"single"===m?(0,c.__)("Select metric","burst-statistics"):(0,c.__)("Select metrics","burst-statistics"),footer:k,children:"single"===m?(0,n.jsx)("div",{className:"flex flex-col gap-2",children:Object.keys(d).map(function(e){return(0,n.jsx)(i.A,{id:r+"_"+e,name:r+"_radio_group",value:e,label:d[e].label,checked:w[0]===e,disabled:!0===d[e].disabled||d[e].pro&&!N(),onChange:function(e){return j([e])},children:d[e].pro&&!N()&&(0,n.jsx)(u.A,{label:"Pro"})},e)})}):Object.keys(d).map(function(e){return(0,n.jsxs)("div",{className:"flex items-center gap-3 py-1",children:[(0,n.jsx)(a.bL,{className:"focus:ring-blue-500 flex h-4 w-4 items-center justify-center rounded border-2 border-gray-300 bg-white transition-colors hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2",id:r+"_"+e,checked:w.includes(e),"aria-label":(0,c.__)("Change metrics","burst-statistics"),disabled:!0===d[e].disabled||d[e].pro&&!N(),onCheckedChange:function(){return function(e){"single"===m?j([e]):w.includes(e)?j(w.filter(function(t){return t!==e})):j(b(b([],w,!0),[e],!1))}(e)},children:(0,n.jsx)(a.C1,{children:(0,n.jsx)(l.A,{name:"check",size:14,color:"green",strokeWidth:2})})}),(0,n.jsx)("label",{className:"flex-1 cursor-pointer text-sm text-gray",htmlFor:r+"_"+e,children:d[e].label}),(0,n.jsx)("div",{className:"flex-shrink-0",children:d[e].pro&&!N()&&(0,n.jsx)(u.A,{label:"Pro"})})]},e)})})}},42552:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(91637),s=r(85155);const a=function(e){var t=e.country,r=e.countryNiceName,a=void 0===r?"":r;if("string"!=typeof t)return(0,n.jsx)("span",{className:"burst-flag-wrapper",children:a});""===a&&(a=t),""===a&&(a=__("Unknown","burst-statistics")),t=t.toLowerCase();var i="".concat(burst_settings.plugin_url,"src/Pro/assets/flags/4x3/").concat(t,".svg");return(0,n.jsxs)("span",{className:"burst-flag-wrapper",children:[(0,n.jsx)(s.k,{src:i,className:"burst-flag burst-flag-".concat(t),title:a})," ",a]})}},48677:(e,t,r)=>{r.d(t,{A:()=>g});var n=r(91637),s=r(51609),a=r(33597),i=r(89717),o=r(20467),l=r(55648),c=r(88887),u=r(91788),d=r(65162),f="yyyy-MM-dd",p=new Date(2022,0,1),b=function(e){var t=e.range,r=e.display,s=e.isOpen,a=e.setIsOpen;return(0,n.jsxs)(d.l9,{className:"flex min-w-[200px] items-center gap-2 rounded-md border border-gray-400 bg-gray-100 px-3 py-2 shadow-md transition-all duration-200 hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)]",onClick:function(){return a(!s)},children:[(0,n.jsx)(l.A,{name:"calendar",size:"18"}),(0,n.jsx)("span",{className:"w-full text-base",children:"custom"===t?"".concat(r.startDate," - ").concat(r.endDate):u.cA[t].label}),(0,n.jsx)(l.A,{name:"chevron-down"})]})};const g=function(){var e=(0,s.useState)(!1),t=e[0],r=e[1],l=(0,c.S)(),g=l.startDate,v=l.endDate,m=l.setStartDate,h=l.setEndDate,y=l.setRange,x=l.range,_=(0,s.useState)({startDate:(0,o.A)(g),endDate:(0,o.A)(v),key:"selection"}),w=_[0],j=_[1],N=(0,s.useRef)(0),A=burst_settings.date_ranges,k=(0,s.useMemo)(function(){return(0,u.cf)(A)},[A]),C=(0,s.useMemo)(function(){return(0,u.YP)(g,v)},[g,v]),O=(0,s.useCallback)(function(e){try{N.current++;var t=e.selection,n=t.startDate,s=t.endDate,a=(0,i.default)(n,f),l=(0,i.default)(s,f);j({startDate:(0,o.A)(a),endDate:(0,o.A)(l),key:"selection"});var c=Object.keys(u.cA).find(function(t){return u.cA[t].isSelected(e.selection)})||"custom";(2===N.current||"custom"!==c||a!==l)&&(N.current=0,m(a),h(l),y(c),r(!1))}catch(e){console.error("Error updating date range:",e)}},[m,h,y]);return(0,n.jsx)("div",{className:"ml-auto w-auto",children:(0,n.jsxs)(d.bL,{open:t,onOpenChange:r,children:[(0,n.jsx)(b,{range:x,display:C,isOpen:t,setIsOpen:r}),(0,n.jsx)(d.ZL,{container:document.querySelector(".burst"),children:(0,n.jsxs)(d.UC,{align:"end",sideOffset:10,arrowPadding:10,id:"burst-statistics",children:[(0,n.jsx)("span",{className:"absolute right-4 mt-1 h-4 w-4 -translate-y-2 rotate-45 transform bg-green-light"}),(0,n.jsx)("div",{className:"z-50 rounded-lg border border-gray-200 bg-white shadow-md",children:(0,n.jsx)(a.Ur,{ranges:[w],rangeColors:["#2B8133"],dateDisplayFormat:"dd MMMM yyyy",monthDisplayFormat:"MMMM",onChange:O,inputRanges:[],showSelectionPreview:!0,months:2,direction:"horizontal",minDate:p,maxDate:(0,u.ii)(),staticRanges:k})})]})})]})})}},55648:(e,t,r)=>{r.d(t,{A:()=>Oe});var n=r(91637),s=r(51609),a=r(97813),i=r(99537),o=r(59373),l=r(39982),c=r(87267),u=r(76059),d=r(38385),f=r(40031),p=r(90736),b=r(13040),g=r(96167),v=r(87416),m=r(4038),h=r(94071),y=r(92672),x=r(67068),_=r(19093),w=r(31239),j=r(67964),N=r(72826),A=r(54513),k=r(98880),C=r(76942),O=r(82712),S=r(82172),D=r(76541),E=r(84444),P=r(4041),F=r(47628),I=r(40718),T=r(422),M=r(42786),R=r(12719),V=r(46774),L=r(14774),z=r(57313),B=r(68169),G=r(90766),U=r(7909),q=r(69404),K=r(84025),Z=r(47429),Q=r(99918),H=r(12566),W=r(95878),J=r(62409),Y=r(89332),X=r(32603),$=r(80588),ee=r(66325),te=r(35918),re=r(69474),ne=r(74672),se=r(34390),ae=r(3999),ie=r(74300),oe=r(18090),le=r(44559),ce=r(83090),ue=r(55798),de=r(69275),fe=r(21763),pe=r(29593),be=r(73998),ge=r(68958),ve=r(11934),me=r(33884),he=r(27995),ye=r(61194),xe=r(75632),_e=r(98873),we=r(37276),je=r(9605),Ne=r(44104),Ae=function(){return Ae=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Ae.apply(this,arguments)},ke={black:"var(--rsp-black)",green:"var(--rsp-green)",yellow:"var(--rsp-yellow)",red:"var(--rsp-red)",blue:"var(--rsp-blue)",gray:"var(--rsp-grey-500)",lightgray:"var(--rsp-grey-300)",white:"var(--rsp-white)"},Ce={"circle-open":T.A,bullet:T.A,dot:T.A,circle:I.A,period:F.A,check:O.A,warning:_.A,error:d.A,times:Ne.A,"circle-check":f.A,"circle-times":g.A,"chevron-up":P.A,"chevron-down":S.A,"chevron-right":E.A,"chevron-left":D.A,plus:oe.A,minus:ne.A,sync:ce.A,"sync-error":x.A,shortcode:l.A,file:G.A,"file-disabled":U.A,"file-download":B.A,calendar:k.A,"calendar-error":A.A,website:ie.A,help:p.A,copy:R.A,trash:ye.A,visitor:_e.A,visitors:we.A,"visitors-crowd":we.A,time:M.A,pageviews:z.A,referrer:W.A,sessions:b.A,bounces:X.A,bounced_sessions:X.A,bounce_rate:X.A,winner:xe.A,live:w.A,total:H.A,graph:c.A,conversion_rate:u.A,goals:Z.A,conversions:Z.A,"goals-empty":F.A,filter:fe.A,loading:J.A,desktop:se.A,tablet:ve.A,mobile:pe.A,other:y.A,mouse:ae.A,eye:z.A,page:q.A,hashtag:Q.A,sun:ge.A,world:v.A,filters:m.A,referrers:L.A,hook:je.A,"log-in":Y.A,"log-out":X.A,alert:d.A,search:ue.A,bounce:X.A,user:_e.A,conversion:he.A,parameters:de.A,campaign:te.A,source:re.A,medium:le.A,term:me.A,content:G.A,location:$.A,city:N.A,"operating-system":se.A,browser:K.A,traffic:C.A,behavior:j.A,technology:V.A,"star-filled":be.A,"star-outline":be.A,"map-pinned":ee.A,empty:I.A,grid:h.A,"user-check":i.A,"user-plus":o.A};const Oe=(0,s.memo)(function(e){var t=e.name,r=void 0===t?"bullet":t,s=e.color,i=void 0===s?"black":s,o=e.size,l=void 0===o?18:o,c=e.strokeWidth,u=void 0===c?1.5:c,d=e.tooltip,f=e.onClick,p=e.className,b=ke[i]||i,g=Ce[r]||T.A,v={size:l,color:b,strokeWidth:u},m=(0,n.jsx)("div",{onClick:function(){f&&f()},className:"flex items-center justify-center",children:"bullet"!==r&&"dot"!==r||g!==T.A?"star-filled"===r&&g===be.A?(0,n.jsx)(be.A,Ae({},v,{fill:b})):(0,n.jsx)(g,Ae({className:p},v)):(0,n.jsx)(T.A,Ae({},v,{fill:b}))});return d?(0,n.jsx)(a.A,{content:d,children:m}):m})},56910:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(61626),s=r(70802),a=r(21899),i=r(61445),o=r(51609),l=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},c=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const u=function(){var e=(0,s.jE)(),t=(0,i.A)(),r=t.goals,u=t.getGoalAsync,d=function(e){return l(void 0,void 0,void 0,function(){var t,r;return c(this,function(n){switch(n.label){case 0:return[4,(0,a.Eo)("get_filter_options",{data_type:e})];case 1:return t=n.sent(),[2,(null===(r=t.data)||void 0===r?void 0:r[e])||[]]}})})},f=(0,n.I)({queryKey:["filters_data","goals"],queryFn:function(){return d("goals")},staleTime:3e5,cacheTime:18e5}),p=(0,o.useCallback)(function(t){return l(void 0,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return"goals"===t?[2,r]:[4,e.fetchQuery({queryKey:["filters_data",t],queryFn:function(){return d(t)},staleTime:3e5,cacheTime:18e5})];case 1:return[2,(n.sent()||[]).map(function(e){return{id:e.ID,title:e.name,key:e.key||e.ID}})]}})})},[e,r]);return{isLoading:f.isLoading,isError:f.isError,getFilterOptions:p,getFilterOptionById:function(e,t){return l(void 0,void 0,void 0,function(){var r,n,s;return c(this,function(a){switch(a.label){case 0:return"goals"!==t?[3,2]:[4,u(e)];case 1:return[2,(r=a.sent())?r.title:e];case 2:return[4,p(t)];case 3:return n=a.sent(),[2,(null==(s=Array.isArray(n)?n.find(function(t){return String(t.id)===String(e)}):null)?void 0:s.title)||e]}})})},getFilterIdByTitle:function(e,t){return l(void 0,void 0,void 0,function(){var r,n;return c(this,function(s){switch(s.label){case 0:return[4,p(t)];case 1:return r=s.sent(),[2,(null==(n=Array.isArray(r)?r.find(function(t){return t.title===e}):null)?void 0:n.id)||null]}})})}}}},61445:(e,t,r)=>{r.d(t,{A:()=>g,l:()=>b});var n=r(61626),s=r(70802),a=r(78280),i=r(21899),o=r(21587),l=r(27723),c=r(89085),u=r(11102),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},d.apply(this,arguments)},f=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},p=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},b=function(e){return e.map(function(t){var r=d({},t);if(t.react_conditions){var n=function(e,t){return!e||0===Object.keys(e).length||Object.entries(e).some(function(e){var r=e[0],n=e[1],s=t.find(function(e){return e.id===r});if(!s)return!1;var a=s.value;return!!a&&n.includes(a)})}(t.react_conditions,e);"disable"===t.condition_action?r.disabled=!n:r.conditionallyDisabled=!n}return r})};const g=function(){var e,t,r,b=(0,s.jE)(),g=(0,n.I)({queryKey:["goals_data"],queryFn:function(){return f(void 0,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,(0,i.DX)()];case 1:return[2,{goals:(e=t.sent()).goals||[],predefinedGoals:e.predefinedGoals||[],goalFields:Object.values(e.goalFields||{})}]}})})},retry:1}),v=(0,a.n)({mutationFn:function(){return f(void 0,void 0,void 0,function(){var e,t;return p(this,function(r){switch(r.label){case 0:return e=(null===(t=b.getQueryData(["goals_data"]))||void 0===t?void 0:t.goals)||[],[4,(0,i.d2)({goals:e})];case 1:return[2,r.sent()]}})})},onSuccess:function(){},onError:function(e){console.error(e),o.toast.error((0,l.__)("Failed to save goals","burst-statistics"))}}),m=(0,a.n)({mutationFn:function(e){return f(void 0,[e],void 0,function(e){var t,r=e.id,n=e.value;return p(this,function(e){switch(e.label){case 0:return t=[{id:r,title:n}],[4,(0,i.d2)({goals:t})];case 1:return[2,e.sent()]}})})},onError:function(e){console.error(e),o.toast.error((0,l.__)("Failed to save goal title","burst-statistics"))}}),h=(0,a.n)({mutationFn:function(){return f(void 0,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,(0,i.D)()];case 1:return[2,e.sent()]}})})},onSuccess:function(e){b.setQueryData(["goals_data"],function(t){return t?(0,c.jM)(t,function(t){t.goals.push(e.goal)}):t}),o.toast.success((0,l.__)("Goal added successfully!","burst-statistics"))},onError:function(e){console.error(e),o.toast.error((0,l.__)("Failed to add goal","burst-statistics"))}}),y=(0,a.n)({mutationFn:function(e){return f(void 0,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,(0,i.$x)(e)];case 1:return[2,t.sent()]}})})},onSuccess:function(e,t){e.deleted&&(b.setQueryData(["goals_data"],function(e){return e?(0,c.jM)(e,function(e){if(1===e.goals.length)e.goals=[];else{var r=e.goals.findIndex(function(e){return e.id===t});-1!==r&&e.goals.splice(r,1)}}):e}),o.toast.success((0,l.__)("Goal deleted successfully!","burst-statistics")))},onError:function(e){console.error(e),o.toast.error((0,l.__)("Failed to delete goal","burst-statistics"))}}),x=(0,a.n)({mutationFn:function(e){return f(void 0,[e],void 0,function(e){var t=e.predefinedGoalId,r=e.type,n=e.cookieless;return p(this,function(e){switch(e.label){case 0:if("hook"===r&&n)throw new Error((0,l.__)("Cannot add server side goals in combination with cookieless tracking","burst-statistics"));if(!u.A.getState().isPro)throw new Error((0,l.__)("Predefined goals are a premium feature.","burst-statistics"));return[4,(0,i.ZI)(t)];case 1:return[2,e.sent()]}})})},onSuccess:function(e){b.setQueryData(["goals_data"],function(t){return t?(0,c.jM)(t,function(t){t.goals.push(e.goal)}):t}),o.toast.success((0,l.__)("Successfully added predefined goal!","burst-statistics"))},onError:function(e){console.error(e),o.toast.error(e.message||(0,l.__)("Failed to add predefined goal","burst-statistics"))}});return{goals:(null===(e=g.data)||void 0===e?void 0:e.goals)||[],goalFields:(null===(t=g.data)||void 0===t?void 0:t.goalFields)||[],predefinedGoals:(null===(r=g.data)||void 0===r?void 0:r.predefinedGoals)||[],isLoading:g.isLoading,isError:g.isError,getGoal:function(e){var t,r=(null===(t=g.data)||void 0===t?void 0:t.goals)||[];if(!Array.isArray(r))return!1;var n=r.findIndex(function(t){return t.id==e});return-1!==n&&r[n]},setGoalValue:function(e,t,r){b.setQueryData(["goals_data"],function(n){return n?(0,c.jM)(n,function(n){var s=n.goals.findIndex(function(t){return t.id===e});-1!==s&&(n.goals[s][t]=r)}):n})},updateGoal:function(e,t){b.setQueryData(["goals_data"],function(r){return r?(0,c.jM)(r,function(r){var n=r.goals.findIndex(function(t){return t.id===e});-1!==n&&(r.goals[n]=d(d({},r.goals[n]),t))}):r})},getGoalAsync:function(e){return f(void 0,void 0,void 0,function(){var t,r;return p(this,function(n){switch(n.label){case 0:return[4,b.ensureQueryData({queryKey:["goals_data"],queryFn:i.DX})];case 1:return t=n.sent(),[2,(null===(r=null==t?void 0:t.goals)||void 0===r?void 0:r.find(function(t){return String(t.id)===String(e)}))||null]}})})},saveGoals:v.mutateAsync,saveGoalTitle:function(e,t){return m.mutateAsync({id:e,value:t})},addGoal:h.mutateAsync,deleteGoal:y.mutateAsync,addPredefinedGoal:function(e,t,r){return x.mutateAsync({predefinedGoalId:e,type:t,cookieless:r})},invalidateGoals:function(){return b.invalidateQueries(["goals_data"])}}}},65825:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(91637),s=r(51609),a=r(27723),i=r(55648),o=(0,s.forwardRef)(function(e,t){var r=e.id,s=e.name,o=e.value,l=e.label,c=e.checked,u=e.disabled,d=void 0!==u&&u,f=e.onChange,p=e.className,b=void 0===p?"":p,g=e.tooltip,v=void 0===g?"":g,m=e.recommended,h=void 0!==m&&m,y=e.children;return(0,n.jsxs)("div",{className:"flex items-center gap-2 ".concat(b),children:[(0,n.jsx)("input",{ref:t,type:"radio",id:r,name:s,value:o,checked:c,disabled:d,onChange:function(e){return f(e.target.value)},className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 my-1 mx-0"}),(0,n.jsxs)("label",{htmlFor:r,className:"text-sm text-gray cursor-pointer",children:[l," ",y," ",h&&(0,n.jsxs)("span",{className:"text-xs font-semibold",children:["(",(0,a.__)("Recommended","burst-statistics"),")"]})]}),v&&(0,n.jsx)(i.A,{tooltip:v,color:"blue",name:"help",size:16,className:"bg-blue-light rounded-full"})]})});o.displayName="RadioInput";const l=o},67744:(e,t,r)=>{r.d(t,{q:()=>i});var n=r(91637),s=r(51609),a=r(2573),i=(0,s.memo)(function(e){var t=e.title,r=e.controls,s=e.className,i=void 0===s?"":s;return(0,n.jsxs)("div",{className:(0,a.A)(i,"flex min-h-16 items-center justify-between px-6 gap-4"),children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:t}),r]})});i.displayName="BlockHeading"},70447:(e,t,r)=>{r.r(t),r.d(t,{component:()=>J});var n=r(91637),s=r(41013),a=r(48677),i=r(27723),o=r(77902),l=r(67744),c=r(11989),u=r(39988),d=r(41631);const f=function(e){var t=e.selectedMetrics,r=e.filters,s=(0,u.G)(function(e){return e.setMetrics}),a={pageviews:{label:(0,i.__)("Pageviews","burst-statistics"),default:!0},visitors:{label:(0,i.__)("Visitors","burst-statistics"),default:!0},sessions:{label:(0,i.__)("Sessions","burst-statistics")},bounces:{label:(0,i.__)("Bounces","burst-statistics")},conversions:{label:(0,i.__)("Conversions","burst-statistics"),default:0<r.goal_id}};return(0,n.jsx)(d.A,{selectedOptions:t,options:a,onApply:function(e){s(e)}})};var p=r(51609),b=r(39887),g=r(49457);b.t1.register(b.PP,b.kc,b.FN,b.No,b.hE,b.m_,b.s$);const v=function(e){var t=e.data,r=e.loading,s=(0,p.useMemo)(function(){return{responsive:"true",maintainAspectRatio:!1,cubicInterpolationMode:"monotone",plugins:{legend:{labels:{usePointStyle:!0,padding:15,font:{size:13,weight:400}}}},scales:{y:{ticks:{beginAtZero:!0,stepSize:20,maxTicksLimit:6}},x:{ticks:{maxTicksLimit:8}}},layout:{padding:0}}},[]),a=r?"burst-loading":"";return(0,n.jsx)(g.N1,{className:"burst-loading-container ".concat(a),options:s,data:t})};var m=r(88887),h=r(61626),y=r(21899);const x=function(e){return t=void 0,r=[e],s=function(e){var t=e.startDate,r=e.endDate,n=e.range,s=e.args;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(e){switch(e.label){case 0:return[4,(0,y.bQ)("insights",t,r,n,s)];case 1:return[2,e.sent().data]}})},new((n=void 0)||(n=Promise))(function(e,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s};var _=r(71752);const w=function(){var e=(0,u.G)(function(e){return e.getMetrics()}),t=(0,m.S)(function(e){return e}),r=t.startDate,s=t.endDate,a=t.range,d=(0,_.c)(function(e){return e.filters}),p={filters:d,metrics:e},b=(0,h.I)({queryKey:["insights",e,r,s,p],queryFn:function(){return x({startDate:r,endDate:s,range:a,args:p})},placeholderData:{labels:["-","-","-","-","-","-","-"],datasets:[{data:[0,0,0,0,0,0,0],backgroundColor:"rgba(41, 182, 246, 0.2)",borderColor:"rgba(41, 182, 246, 1)",label:"-",fill:"false"},{data:[0,0,0,0,0,0,0],backgroundColor:"rgba(244, 191, 62, 0.2)",borderColor:"rgba(244, 191, 62, 1)",label:"-",fill:"false"}]}}),g=b.isLoading||b.isFetching;return(0,n.jsxs)(o.e,{className:"row-span-1 lg:col-span-12 xl:col-span-6 min-h-96",children:[(0,n.jsx)(l.q,{title:(0,i.__)("Insights","burst-statistics"),className:"border-b border-gray-300",controls:(0,n.jsx)(f,{selectedMetrics:e,filters:d})}),(0,n.jsx)(c.t,{children:b.data&&v&&(0,n.jsx)(v,{loading:g,data:b.data})})]})};var j=r(55648),N=r(97813);const A=function(e){var t=e.iconKey,r=e.title,s=e.subtitle,a=e.value,i=e.exactValue,o=e.change,l=e.changeStatus,c=1e3<i&&i;return(0,n.jsxs)("div",{className:"flex items-start gap-3 py-2",children:[(0,n.jsx)(j.A,{name:t,className:"mt-1"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"text-base font-semibold text-black",children:r}),(0,n.jsx)("p",{className:"text-sm text-gray",children:s})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)(N.A,{content:c,delayDuration:1e3,children:(0,n.jsx)("span",{className:"text-xl font-bold text-black",children:a})}),(0,n.jsx)("p",{className:"text-sm ".concat("positive"===l?"text-green":"text-red"),children:o})]})]})};var k=r(20467),C=r(97884);const O=function(e){var t=e.noCompare,r=e.startDate,s=e.endDate,a="";if(t)a=(0,i.__)("No data available for comparison","burst-statistics");else{var o=(0,k.A)(r),l=(0,k.A)(s),c=(0,C.default)(l,o)+1;a=(1===c?(0,i.__)("vs. previous day","burst-statistics"):(0,i.__)("vs. previous %s days","burst-statistics")).replace("%s",c)}return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{className:"burst-small-text",children:a})})};var S=r(91788),D=function(){return D=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},D.apply(this,arguments)},E={pageviews:(0,i.__)("Pageviews","burst-statistics"),sessions:(0,i.__)("Sessions","burst-statistics"),visitors:(0,i.__)("Visitors","burst-statistics"),bounce_rate:(0,i.__)("Bounce Rate","burst-statistics")},P={conversions:(0,i.__)("Conversions","burst-statistics"),pageviews:(0,i.__)("Pageviews","burst-statistics"),sessions:(0,i.__)("Sessions","burst-statistics"),visitors:(0,i.__)("Visitors","burst-statistics")},F={default:{pageviews:function(e,t){return{title:(0,i.__)("Pageviews","burst-statistics"),subtitle:(0,i.__)("%s pageviews per session","burst-statistics").replace("%s",(0,S.ZV)(e.pageviews/e.sessions)),value:(0,S.ZV)(e.pageviews),exactValue:e.pageviews}},sessions:function(e,t){return{title:(0,i.__)("Sessions","burst-statistics"),subtitle:(0,i.__)("%s per session","burst-statistics").replace("%s",(0,S.fU)(e.pageviews/e.sessions*e.avg_time_on_page)),value:(0,S.ZV)(e.sessions),exactValue:e.sessions}},visitors:function(e,t){return{title:(0,i.__)("Visitors","burst-statistics"),subtitle:(0,i.__)("%s are new visitors","burst-statistics").replace("%s",(0,S.Nj)(e.first_time_visitors,e.visitors)),value:(0,S.ZV)(e.visitors),exactValue:e.visitors}},bounce_rate:function(e,t){return{title:(0,i.__)("Bounce Rate","burst-statistics"),subtitle:(0,i.__)("%s visitors bounced","burst-statistics").replace("%s",e.bounced_sessions),value:(0,S.ZV)(e.bounce_rate)+"%",exactValue:e.bounce_rate}}},goalSelected:{conversions:function(e,t){return{title:(0,i.__)("Conversions","burst-statistics"),subtitle:(0,i.__)("%s of pageviews converted","burst-statistics").replace("%s",(0,S.Nj)(e.conversion_rate,100)),value:(0,S.ZV)(e.conversions),exactValue:e.conversions}},pageviews:function(e,t){return{title:(0,i.__)("Pageviews","burst-statistics"),subtitle:(0,i.__)("%s pageviews per conversion","burst-statistics").replace("%s",(0,S.ZV)(e.pageviews/e.conversions)),value:(0,S.ZV)(e.pageviews),exactValue:e.pageviews}},sessions:function(e,t){return{title:(0,i.__)("Sessions","burst-statistics"),subtitle:(0,i.__)("%s sessions per conversion","burst-statistics").replace("%s",(0,S.ZV)(e.sessions/e.conversions)),value:(0,S.ZV)(e.sessions),exactValue:e.sessions}},visitors:function(e,t){return{title:(0,i.__)("Visitors","burst-statistics"),subtitle:(0,i.__)("%s visitors per conversion","burst-statistics").replace("%s",(0,S.ZV)(e.visitors/e.conversions)),value:(0,S.ZV)(e.visitors),exactValue:e.visitors}}}},I=function(e){var t={},r=e.current,n=e.previous,s="default",a=E;"goals"===e.view&&(s="goalSelected",a=P);var i=F[s];return Object.entries(a).forEach(function(e){var s=e[0],a=(e[1],i[s]||F.default[s]),o={};"bounce_rate"===s?(o=(0,S.oI)(r[s],n[s])).status="positive"===o.status?"negative":"positive":o=(0,S.fs)(r[s],n[s]),t[s]=D(D({},a(r,n)),{change:o.val,changeStatus:o.status})}),t};const T=function(e){return t=void 0,r=[e],s=function(e){var t,r=e.startDate,n=e.endDate,s=e.range,a=e.args;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(e){switch(e.label){case 0:return[4,(0,y.bQ)("compare",r,n,s,a)];case 1:return t=e.sent().data,[2,I(t)]}})},new((n=void 0)||(n=Promise))(function(e,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s};var M=r(27257);const R=function(){var e=(0,m.S)(function(e){return e}),t=e.startDate,r=e.endDate,s=e.range,a={filters:(0,_.c)(function(e){return e.filters})},u={pageviews:(0,i.__)("Pageviews","burst-statistics"),sessions:(0,i.__)("Sessions","burst-statistics"),visitors:(0,i.__)("Visitors","burst-statistics"),bounce_rate:(0,i.__)("Bounce Rate","burst-statistics")},d={};Object.keys(u).forEach(function(e){d[e]={title:u[e],subtitle:"-",value:"-",exactValue:"-",change:"-",changeStatus:""}});var f=(0,h.I)({queryKey:["compare",t,r,a],queryFn:function(){return T({startDate:t,endDate:r,range:s,args:a})},placeholderData:d}),p=f.data||{},b=!Object.keys(p).some(function(e){return""!==p[e].change});return f.isLoading||f.isFetching,(0,n.jsxs)(o.e,{className:"row-span-1 lg:col-span-6 xl:col-span-3",children:[(0,n.jsx)(l.q,{title:(0,i.__)("Compare","burst-statistics")}),(0,n.jsx)(c.t,{children:Object.keys(p).map(function(e,t){var r=p[e];return(0,n.jsx)(A,{iconKey:e,title:r.title,subtitle:r.subtitle,value:r.value,exactValue:r.exactValue,change:r.change,changeStatus:r.changeStatus},t)})}),(0,n.jsx)(M.p,{children:(0,n.jsx)(O,{noCompare:b,startDate:t,endDate:r})})]})};var V=r(8353),L=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},z=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},B={desktop:(0,i.__)("Desktop","burst-statistics"),tablet:(0,i.__)("Tablet","burst-statistics"),mobile:(0,i.__)("Mobile","burst-statistics"),other:(0,i.__)("Other","burst-statistics")},G=function(e){for(var t,r={},n=0,s=Object.entries(B);n<s.length;n++){var a=s[n],i=a[0],o=a[1];Object.assign(r,((t={})[i]={title:o,value:(0,S.Nj)(e[i].count,e.all.count)},t))}return r},U=function(e){for(var t,r={},n=0,s=Object.entries(B);n<s.length;n++){var a=s[n][0],i=e[a].os?e[a].os:"",o=e[a].browser?e[a].browser:"";Object.assign(r,((t={})[a]={subtitle:""===i&&""===o?"-":i+" / "+o},t))}return r},q=function(){return q=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},q.apply(this,arguments)},K=(0,p.memo)(function(e){var t=e.deviceKey,r=e.deviceData;return(0,n.jsx)(V.A,{filter:"device",filterValue:t,label:r.title,children:(0,n.jsx)(A,{iconKey:t,title:r.title,subtitle:r.subtitle,value:r.value,change:r.change,changeStatus:r.changeStatus})},t)});const Z=(0,p.memo)(function(){var e=(0,m.S)(function(e){return e}),t=e.startDate,r=e.endDate,s=e.range,a=(0,_.c)(function(e){return e.filters}),u=(0,p.useMemo)(function(){return{filters:a}},[a]),d=(0,p.useMemo)(function(){return{desktop:(0,i.__)("Desktop","burst-statistics"),tablet:(0,i.__)("Tablet","burst-statistics"),mobile:(0,i.__)("Mobile","burst-statistics"),other:(0,i.__)("Other","burst-statistics")}},[]),f=(0,p.useMemo)(function(){var e={},t={},r={};return Object.keys(d).forEach(function(n){e[n]={title:d[n],value:"-%"},t[n]={subtitle:"-"},r[n]={title:d[n],value:"-%",subtitle:"-"}}),{emptyDataTitleValue:e,emptyDataSubtitle:t,placeholderData:r}},[d]),b=f.emptyDataTitleValue,g=f.emptyDataSubtitle,v=f.placeholderData,x=(0,h.I)({queryKey:["devicesTitleAndValue",t,r,u],queryFn:function(){return function(e){return L(void 0,[e],void 0,function(e){var t,r=e.startDate,n=e.endDate,s=e.range,a=e.args;return z(this,function(e){switch(e.label){case 0:return[4,(0,y.bQ)("devicesTitleAndValue",r,n,s,a)];case 1:return t=e.sent().data,[2,G(t)]}})})}({startDate:t,endDate:r,range:s,args:u})},placeholderData:b}),w=(0,h.I)({queryKey:["devicesSubtitle",t,r,u],queryFn:function(){return function(e){return L(void 0,[e],void 0,function(e){var t,r=e.startDate,n=e.endDate,s=e.range,a=e.args;return z(this,function(e){switch(e.label){case 0:return[4,(0,y.bQ)("devicesSubtitle",r,n,s,a)];case 1:return t=e.sent().data,[2,U(t)]}})})}({startDate:t,endDate:r,range:s,args:u})},placeholderData:g}),j=(0,p.useMemo)(function(){if(x.data&&w.data){var e=q({},x.data);return Object.keys(e).forEach(function(t){w.data[t]&&(e[t]=q(q({},e[t]),w.data[t]))}),e}return v},[x.data,w.data,v]),N=(x.isLoading||x.isFetching,(0,p.useMemo)(function(){return Object.keys(j)},[j]));return(0,n.jsxs)(o.e,{className:"row-span-1 lg:col-span-6 xl:col-span-3",children:[(0,n.jsx)(l.q,{title:(0,i.__)("Devices","burst-statistics")}),(0,n.jsx)(c.t,{children:N.map(function(e){return(0,n.jsx)(K,{deviceKey:e,deviceData:j[e]},e)})})]})});var Q=r(22858),H=r(23130),W=r(11102),J=(r(89211),function(){var e=(0,W.A)().isPro?["parameters"]:["referrers"];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"col-span-12 flex justify-between items-center",children:[(0,n.jsx)(H.A,{children:(0,n.jsx)(s.y,{})}),(0,n.jsx)(H.A,{children:(0,n.jsx)(a.A,{})})]}),(0,n.jsx)(H.A,{children:(0,n.jsx)(w,{})}),(0,n.jsx)(H.A,{children:(0,n.jsx)(R,{})}),(0,n.jsx)(H.A,{children:(0,n.jsx)(Z,{})}),(0,n.jsx)(H.A,{children:(0,n.jsx)(Q.A,{allowedConfigs:["pages"],id:1})}),(0,n.jsx)(H.A,{children:(0,n.jsx)(Q.A,{allowedConfigs:e,id:2})})]})})},71752:(e,t,r)=>{r.d(t,{c:()=>f});var n=r(30346),s=r(14243),a=r(89085),i=r(27723),o=(r(56910),function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},o.apply(this,arguments)}),l={content:{label:(0,i.__)("Context","burst-statistics"),icon:"content",order:1},sources:{label:(0,i.__)("Sources","burst-statistics"),icon:"source",order:2},behavior:{label:(0,i.__)("Behavior","burst-statistics"),icon:"behavior",order:3},location:{label:(0,i.__)("Location","burst-statistics"),icon:"location",order:4}},c={page_url:{label:(0,i.__)("Page URL","burst-statistics"),icon:"page",type:"string",options:"pages",pro:!1,category:"content"},referrer:{label:(0,i.__)("Referrer","burst-statistics"),icon:"referrer",type:"string",options:"referrers",pro:!1,category:"sources"},goal_id:{label:(0,i.__)("Goal","burst-statistics"),icon:"goals",type:"string",options:"goals",pro:!1,category:"content"},bounces:{label:(0,i.__)("Bounced Visitors","burst-statistics"),icon:"bounce",type:"boolean",pro:!1,category:"behavior"},device_id:{label:(0,i.__)("Device","burst-statistics"),icon:"desktop",type:"string",options:"devices",pro:!1,category:"content"},new_visitor:{label:(0,i.__)("New Visitors","burst-statistics"),icon:"user",type:"boolean",pro:!0,category:"behavior"},bounce_rate:{label:(0,i.__)("Bounce Rate","burst-statistics"),icon:"bounce",type:"int",pro:!0,category:"behavior",coming_soon:!0},conversion_rate:{label:(0,i.__)("Conversion Rate","burst-statistics"),icon:"conversion",type:"int",pro:!0,category:"behavior",coming_soon:!0},url_parameter:{label:(0,i.__)("URL Parameter","burst-statistics"),icon:"parameters",type:"string",pro:!0,category:"sources",coming_soon:!0},campaign:{label:(0,i.__)("Campaign","burst-statistics"),icon:"campaign",type:"string",options:"campaigns",pro:!0,category:"sources"},source:{label:(0,i.__)("Source","burst-statistics"),icon:"source",type:"string",options:"contents",pro:!0,category:"sources"},medium:{label:(0,i.__)("Medium","burst-statistics"),icon:"medium",type:"string",options:"mediums",pro:!0,category:"sources"},term:{label:(0,i.__)("Term","burst-statistics"),icon:"term",type:"string",options:"terms",pro:!0,category:"sources"},content:{label:(0,i.__)("Content","burst-statistics"),icon:"content",type:"string",options:"contents",pro:!0,category:"sources"},country_code:{label:(0,i.__)("Country","burst-statistics"),icon:"world",type:"string",options:"countries",pro:!0,category:"location"},state:{label:(0,i.__)("State","burst-statistics"),icon:"map-pinned",type:"string",options:"states",pro:!0,category:"location"},city:{label:(0,i.__)("City","burst-statistics"),icon:"city",type:"string",options:"cities",pro:!0,category:"location"},time_per_session:{label:(0,i.__)("Time per Session","burst-statistics"),icon:"time",type:"int",pro:!0,category:"behavior",coming_soon:!0},platform_id:{label:(0,i.__)("Operating System","burst-statistics"),icon:"operating-system",type:"string",options:"platforms",pro:!0,category:"content"},browser_id:{label:(0,i.__)("Browser","burst-statistics"),icon:"browser",type:"string",options:"browsers",pro:!0,category:"content"}},u=["page_url","referrer","bounces","device"],d=Object.keys(c).reduce(function(e,t){return e[t]="",e},{}),f=(0,n.v)((0,s.Zr)(function(e,t){return{filters:d,filtersConf:c,filterCategories:l,favorites:u,setFilters:function(t,r){"string"==typeof t&&t.length&&e(function(e){return(0,a.jM)(e,function(e){e.filters&&"object"==typeof e.filters&&(e.filters[t]=r)})})},deleteFilter:function(t){e(function(e){return(0,a.jM)(e,function(e){e.filters[t]=""})})},clearAllFilters:function(){e(function(e){return(0,a.jM)(e,function(e){e.filters=o({},d)})})},getActiveFilters:function(){var e=t().filters;return Object.entries(e).filter(function(e){return e[0],""!==e[1]}).reduce(function(e,t){var r=t[0],n=t[1];return e[r]=n,e},{})},hasActiveFilters:function(){var e=t().filters;return Object.values(e).some(function(e){return""!==e})},getFiltersByCategory:function(){var e=t(),r=e.filtersConf,n=e.filterCategories,s={};return Object.keys(n).forEach(function(e){s[e]=[]}),Object.entries(r).forEach(function(e){var t=e[0],r=e[1];r.category&&s[r.category]&&s[r.category].push(o({key:t},r))}),s},addToFavorites:function(t){e(function(e){return(0,a.jM)(e,function(e){e.favorites.includes(t)||e.favorites.push(t)})})},removeFromFavorites:function(t){e(function(e){return(0,a.jM)(e,function(e){e.favorites=e.favorites.filter(function(e){return e!==t})})})},toggleFavorite:function(e){t().favorites.includes(e)?t().removeFromFavorites(e):t().addToFavorites(e)},isFavorite:function(e){return t().favorites.includes(e)},getFavoriteFilters:function(){var e=t(),r=e.favorites,n=e.filtersConf;return r.filter(function(e){return n[e]}).map(function(e){return o({key:e},n[e])})}}},{name:"burst-filters-storage",version:1.2,partialize:function(e){return{filters:e.filters,favorites:e.favorites}}}))},77902:(e,t,r)=>{r.d(t,{e:()=>i});var n=r(91637),s=r(2573),a=r(23130),i=(0,r(51609).memo)(function(e){var t=e.className,r=void 0===t?"":t,i=e.children;return(0,n.jsx)(a.A,{children:(0,n.jsx)("div",{className:(0,s.A)("col-span-12 flex flex-col rounded-xl bg-white shadow-md relative border border-gray-100",r),children:i})})});i.displayName="Block"},78548:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(91637),s=r(51609),a=r(2573),i=r(55648),o=(0,s.forwardRef)(function(e,t){var r=e.inputId,s=e.options,o=e.value,l=e.columns,c=void 0===l?2:l,u=e.disabled,d=void 0!==u&&u,f=e.goalId,p=e.onChange,b=e.className,g=void 0===b?"":b,v=f?"".concat(f,"-").concat(r):r;return(0,n.jsx)("div",{className:(0,a.A)("burst-radio-buttons__list grid gap-4",function(e){switch(e){case 1:return"grid-cols-1";case 2:default:return"grid-cols-2";case 3:return"grid-cols-3";case 4:return"grid-cols-4"}}(c),g),ref:t,children:Object.keys(s).map(function(e){var t=s[e],r="".concat(v,"-").concat(t.type),l=t.type===o;return(0,n.jsxs)("div",{className:"burst-radio-buttons__list__item",children:[(0,n.jsx)("input",{type:"radio",checked:l,name:v,id:r,value:t.type,disabled:d,onChange:function(e){p(e.target.value)},className:"sr-only"}),(0,n.jsxs)("label",{htmlFor:r,className:(0,a.A)("flex items-start space-x-3 p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2",{"border-primary bg-primary-light":l,"border-gray-300 hover:border-gray-400 bg-white hover:bg-gray-50":!l,"opacity-50 cursor-not-allowed":d}),children:[(0,n.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,n.jsx)("div",{className:(0,a.A)("w-4 h-4 rounded-full border-2 transition-all duration-200 flex items-center justify-center",{"border-primary bg-primary":l,"border-gray-300 bg-white":!l}),children:l&&(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})})}),(0,n.jsxs)("div",{className:"flex items-center flex-row min-w-0 gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(i.A,{name:t.icon,size:18,className:"flex-shrink-0"}),(0,n.jsx)("h5",{className:(0,a.A)("text-base font-medium transition-colors text-gray-900"),children:t.label})]}),t.description&&t.description.length>1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-px bg-gray-400 mx-3 h-5"}),(0,n.jsx)("p",{className:(0,a.A)("text-sm transition-colors",{"text-gray-600":l,"text-gray-500":!l}),children:t.description})]})]})]})]},r)})})});o.displayName="RadioButtonsInput";const l=o},88887:(e,t,r)=>{r.d(t,{S:()=>d});var n=r(30346),s=r(14243),a=r(67201),i=r(89717),o=r(72442),l=r(67072),c=r(91788),u=function(e){if(c.cA[e]){var t=c.cA[e].range(),r=t.startDate,n=t.endDate;return{startDate:(0,i.default)(r,"yyyy-MM-dd"),endDate:(0,i.default)(n,"yyyy-MM-dd"),range:e}}return null},d=(0,n.v)((0,s.Zr)(function(e,t){return{startDate:(0,i.default)((0,o.default)((0,l.A)(new Date,7)),"yyyy-MM-dd"),endDate:(0,i.default)((0,a.default)((0,l.A)(new Date,1)),"yyyy-MM-dd"),range:"last-7-days",setStartDate:function(t){return e({startDate:t})},setEndDate:function(t){return e({endDate:t})},setRange:function(t){if("custom"!==t){var r=u(t);r&&e(r)}else e({range:t})}}},{name:"burst-date-storage",partialize:function(e){return{range:e.range,startDate:e.startDate,endDate:e.endDate}},onRehydrateStorage:function(){return function(e){if(e&&e.range&&"custom"!==e.range){var t=u(e.range);t&&Object.assign(e,t)}}}}))},91788:(e,t,r)=>{r.d(t,{Ad:()=>F,BM:()=>x,Ee:()=>N,Iq:()=>k,Nj:()=>m,YP:()=>E,ZV:()=>j,cA:()=>S,cf:()=>D,fU:()=>w,fs:()=>h,gs:()=>v,ii:()=>C,oI:()=>y,qQ:()=>A,vd:()=>_});var n=r(38443),s=r(71109),a=r(18553),i=r(44184),o=r(67201),l=r(73177),c=r(52368),u=r(89717),d=r(48145),f=r(72442),p=r(6374),b=r(58357),g=r(27723),v=function(e,t){if(void 0===t&&(t=new Date),"number"==typeof e&&(e=new Date(1e3*e)),!(e instanceof Date))return"-";var r={year:31536e6,month:2628e6,day:864e5,hour:36e5,minute:6e4,second:1e3},n=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),s=e-t;for(var a in r)if(Math.abs(s)>r[a]||"second"===a)return n.format(Math.round(s/r[a]),a)},m=function(e,t,r){void 0===r&&(r=!0);var n=(e=Number(e))/(t=Number(t));return isNaN(n)&&(n=0),r?new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1}).format(n):n};function h(e,t){var r={},n=((e=Number(e))-(t=Number(t)))/t;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}function y(e,t){var r={},n=((e=Number(e))-(t=Number(t)))/100;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}var x=function(e){return(0,n.dateI18n)(burst_settings.date_format,new Date(1e3*e))},_=function(e){return e&&("number"==typeof e||Date.parse(e)>=16409952e5)};function w(e){void 0===e&&(e=0);var t=Number(e);isNaN(t)&&(t=0);var r=Math.floor(t/1e3),n=Math.floor(r/3600),s=Math.floor((r-3600*n)/60),a=r-3600*n-60*s,i=function(e){return isNaN(e)?"00":String(e).padStart(2,"0")};return 0===n?[s,a].map(i).join(":"):[n,s,a].map(i).join(":")}function j(e,t){return void 0===t&&(t=1),e=Number(e),isNaN(e)&&(e=0),e<1e3&&(t=0),new Intl.NumberFormat(void 0,{style:"decimal",notation:"compact",compactDisplay:"short",maximumFractionDigits:t}).format(e)}function N(e,t){return void 0===t&&(t=1),e=Number(e),isNaN(e)&&(e=0),0===e?"0%":e>0&&e<.1?"<0.1%":new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:t}).format(e/100)}function A(e){return e?burst_settings.countries[e.toUpperCase()]||(0,g.__)("Not set","burst-statistics"):(0,g.__)("Unknown","burst-statistics")}function k(e){return e?burst_settings.continents[e.toUpperCase()]||(0,g.__)("Not set","burst-statistics"):(0,g.__)("Unknown","burst-statistics")}function C(e){void 0===e&&(e=new Date);var t=-60*e.getTimezoneOffset(),r=Math.floor(e.getTime()/1e3)+3600*burst_settings.gmt_offset-t;return new Date(1e3*r)}var O=C(),S={today:{label:(0,g.__)("Today","burst-statistics"),range:function(){return{startDate:(0,f.default)(O),endDate:(0,o.default)(O)}}},yesterday:{label:(0,g.__)("Yesterday","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(O,-1)),endDate:(0,o.default)((0,s.default)(O,-1))}}},"last-7-days":{label:(0,g.__)("Last 7 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(O,-7)),endDate:(0,o.default)((0,s.default)(O,-1))}}},"last-30-days":{label:(0,g.__)("Last 30 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(O,-30)),endDate:(0,o.default)((0,s.default)(O,-1))}}},"last-90-days":{label:(0,g.__)("Last 90 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(O,-90)),endDate:(0,o.default)((0,s.default)(O,-1))}}},"last-month":{label:(0,g.__)("Last month","burst-statistics"),range:function(){return{startDate:(0,p.default)((0,a.default)(O,-1)),endDate:(0,l.default)((0,a.default)(O,-1))}}},"week-to-date":{label:(0,g.__)("Week to date","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(O,-O.getDay())),endDate:(0,o.default)(O)}}},"month-to-date":{label:(0,g.__)("Month to date","burst-statistics"),range:function(){return{startDate:(0,p.default)(O),endDate:(0,o.default)(O)}}},"year-to-date":{label:(0,g.__)("Year to date","burst-statistics"),range:function(){return{startDate:(0,b.A)(O),endDate:(0,o.default)(O)}}},"last-year":{label:(0,g.__)("Last year","burst-statistics"),range:function(){return{startDate:(0,b.A)((0,i.default)(O,-1)),endDate:(0,c.A)((0,i.default)(O,-1))}}}},D=function(e){return Object.values(e).filter(Boolean).map(function(e){var t=S[e];return t.isSelected=P,t})},E=function(e,t){var r="MMMM d, yyyy";return{startDate:e?(0,u.default)(new Date(e),r):"",endDate:t?(0,u.default)(new Date(t),r):""}};function P(e){var t=this.range();return(0,d.default)(e.startDate,t.startDate)&&(0,d.default)(e.endDate,t.endDate)}function F(e,t){if(void 0===t&&(t={}),!e||!t[e])return function(e){return j(e)};var r=t[e],n=r.isPercentage,s=r.isTime,a=r.precision,i=r.suffix;return function(e){if(null==e)return"";if(n)return N(e,a);if(s)return w(e);var t=j(e,a);return i&&(t+=i),t}}},97813:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(91637),s=(r(51609),r(9564));const a=function(e){var t=e.children,r=e.content,a=e.delayDuration,i=void 0===a?400:a;return r?(0,n.jsx)(s.Kq,{children:(0,n.jsxs)(s.bL,{delayDuration:i,children:[(0,n.jsx)(s.l9,{asChild:!0,children:t}),(0,n.jsxs)(s.UC,{className:"burst-tooltip-content z-53",sideOffset:5,children:[r,(0,n.jsx)(s.i3,{className:"burst-tooltip-arrow"})]})]})}):(0,n.jsx)(n.Fragment,{children:t})}},98371:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(91637),s=r(85373),a=r(55648);const i=function(e){var t=e.title,r=e.subtitle,i=void 0===r?"":r,o=e.customHeader,l=void 0===o?null:o,c=e.content,u=e.footer,d=e.triggerClassName,f=e.children,p=e.isOpen,b=e.onClose;return(0,n.jsxs)(s.bL,{open:p,onOpenChange:function(e){e||null==b||b()},children:[d&&(0,n.jsx)(s.l9,{className:d,children:f}),(0,n.jsxs)(s.ZL,{container:document.getElementById("modal-root"),children:[(0,n.jsx)(s.hJ,{className:"bg-black/50 fixed inset-0 z-50"}),(0,n.jsxs)(s.UC,{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full max-w-[720px] max-h-[90vh] m-3 px-4 py-3 rounded-md z-50 bg-gray-100 shadow-md focus:outline-none data-[state=open]:animate-contentShow flex flex-col overflow-x-visible",children:[(0,n.jsx)("div",{className:"flex flex-row justify-between items-center flex-shrink-0",children:l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex-1",children:l}),(0,n.jsx)(s.bm,{asChild:!0,children:(0,n.jsx)("button",{"aria-label":"Close",onClick:b,className:"bg-gray-200 rounded-full p-2 w-8 h-8 cursor-pointer hover:bg-gray-300 transition-colors duration-150 ml-4",children:(0,n.jsx)(a.A,{name:"times",size:18,color:"gray"})})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(s.hE,{className:"text-lg font-semibold text-black",children:t}),i&&(0,n.jsx)("p",{className:"text-sm text-gray-600",children:i})]}),(0,n.jsx)(s.bm,{asChild:!0,children:(0,n.jsx)("button",{"aria-label":"Close",onClick:b,className:"bg-gray-200 rounded-full p-2 w-8 h-8 cursor-pointer hover:bg-gray-300 transition-colors duration-150",children:(0,n.jsx)(a.A,{name:"times",size:18,color:"gray"})})})]})}),(0,n.jsx)(s.VY,{className:"text-base text-black mb-6 mt-4 flex-1 overflow-y-auto overflow-x-visible min-h-0",children:c}),u&&(0,n.jsx)("div",{className:"flex flex-row justify-end gap-2 flex-shrink-0 bottom-0 bg-gray-100 pt-4 border-t border-gray-200 -mx-4 px-4",children:u})]})]})]})}}}]);