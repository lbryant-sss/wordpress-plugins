import{r as e,c as a,h as t,a as i}from"./p-e97fde0a.js";import{s as o,g as s,b as r,a as l}from"./p-94f536d6.js";const d=new Set;function n(e){d.add(e);document.body.classList.add("sc-scroll-lock")}function c(e){d.delete(e);if(d.size===0){document.body.classList.remove("sc-scroll-lock")}}const h=":host{--width:31rem;--header-spacing:var(--sc-spacing-large);--body-spacing:var(--sc-spacing-large);--footer-spacing:var(--sc-spacing-large);display:contents}[hidden]{display:none !important}.dialog{display:flex;align-items:center;justify-content:center;position:fixed;top:0;right:0;bottom:0;left:0;z-index:var(--sc-z-index-dialog);box-sizing:border-box;text-align:left}.dialog__panel{display:flex;flex-direction:column;z-index:2;width:var(--width);max-width:100vw;max-height:100vh;background-color:var(--sc-panel-background-color);border-radius:var(--sc-border-radius-medium);box-shadow:var(--sc-shadow-x-large);position:relative}.dialog__panel:focus{outline:none}@media screen and (max-width: 420px){.dialog__panel{max-height:80vh}}.dialog--open .dialog__panel{display:flex;opacity:1;transform:none}.dialog__header{flex:0 0 auto;display:flex;border-bottom:1px solid var(--sc-color-gray-300)}.dialog__title{flex:1 1 auto;font:inherit;font-size:var(--sc-font-size-large);line-height:var(--sc-line-height-dense);padding:var(--header-spacing);margin:0}.dialog__close{flex:0 0 auto;display:flex;align-items:center;font-size:var(--sc-font-size-x-large);padding:0 calc(var(--header-spacing) / 2);z-index:2}.dialog__body{flex:1 1 auto;padding:var(--body-spacing);overflow:var(--dialog-body-overflow, auto);-webkit-overflow-scrolling:touch}.dialog__footer{flex:0 0 auto;text-align:right;padding:var(--footer-spacing)}.dialog__footer ::slotted(sl-button:not(:first-of-type)){margin-left:var(--sc-spacing-x-small)}.dialog:not(.dialog--has-footer) .dialog__footer{display:none}.dialog__overlay{position:fixed;top:0;right:0;bottom:0;left:0;background-color:var(--sc-overlay-background-color)}";const f=h;const g=class{constructor(t){e(this,t);this.scRequestClose=a(this,"scRequestClose",7);this.scShow=a(this,"scShow",7);this.scAfterShow=a(this,"scAfterShow",7);this.scHide=a(this,"scHide",7);this.scAfterHide=a(this,"scAfterHide",7);this.scInitialFocus=a(this,"scInitialFocus",7);this.open=false;this.label="";this.noHeader=false;this.hasFooter=false}async show(){if(this.open){return undefined}this.open=true}async hide(){if(!this.open){return undefined}this.open=false}requestClose(e){const a=this.scRequestClose.emit(e);if(a.defaultPrevented){const e=s(this.el,"dialog.denyClose");r(this.panel,e.keyframes,e.options);return}this.hide()}handleKeyDown(e){if(e.key==="Escape"){e.stopPropagation();this.requestClose("keyboard")}}async handleOpenChange(){if(this.open){this.scShow.emit();n(this.el);const e=this.el.querySelector("[autofocus]");if(e){e.removeAttribute("autofocus")}await Promise.all([l(this.dialog),l(this.overlay)]);this.dialog.hidden=false;requestAnimationFrame((()=>{const a=this.scInitialFocus.emit();if(!a.defaultPrevented){if(e){e.focus({preventScroll:true})}else{this.panel.focus({preventScroll:true})}}if(e){e.setAttribute("autofocus","")}}));const a=s(this.el,"dialog.show");const t=s(this.el,"dialog.overlay.show");await Promise.all([r(this.panel,a.keyframes,a.options),r(this.overlay,t.keyframes,t.options)]);this.scAfterShow.emit()}else{this.scHide.emit();await Promise.all([l(this.dialog),l(this.overlay)]);const e=s(this.el,"dialog.hide");const a=s(this.el,"dialog.overlay.hide");await Promise.all([r(this.panel,e.keyframes,e.options),r(this.overlay,a.keyframes,a.options)]);this.dialog.hidden=true;c(this.el);const t=this.originalTrigger;if(typeof(t===null||t===void 0?void 0:t.focus)==="function"){setTimeout((()=>t.focus()))}this.scAfterHide.emit()}}componentDidLoad(){this.hasFooter=!!this.el.querySelector('[slot="footer"]');this.dialog.hidden=!this.open;if(this.open){n(this.el)}}disconnectedCallback(){c(this.el)}render(){return t("div",{key:"a97cccbb58294275635c1901fa94220e737c6e4e",part:"base",ref:e=>this.dialog=e,class:{dialog:true,"dialog--open":this.open,"dialog--has-footer":this.hasFooter},onKeyDown:e=>this.handleKeyDown(e)},t("div",{key:"f04a9db772b132f8a3d249fe5f07027361f8e552",part:"overlay",class:"dialog__overlay",onClick:e=>{e.preventDefault();e.stopImmediatePropagation();this.requestClose("overlay")},ref:e=>this.overlay=e,tabindex:"-1"}),t("div",{key:"db28dad6216ac1cd078aab2c94e742e4356fbda6",part:"panel",class:"dialog__panel",role:"dialog","aria-modal":"true","aria-hidden":this.open?"false":"true","aria-label":this.noHeader||this.label,"aria-labelledby":!this.noHeader||"title",ref:e=>this.panel=e,tabindex:"0"},!this.noHeader&&t("header",{key:"7ea50ef887bdb8d83961cfc0fb997d07ebd15546",part:"header",class:"dialog__header"},t("h2",{key:"7a306284a5a1a84cf64eacd7a3a723e1cc85ebed",part:"title",class:"dialog__title",id:"title"},t("slot",{key:"43db41c648fb00333453adf3225a477e096e3ebd",name:"label"}," ",this.label.length>0?this.label:String.fromCharCode(65279)," ")),t("sc-button",{key:"836e73aa7e7ab7d219008324bb0babe2d1b612a6",class:"dialog__close",type:"text",circle:true,part:"close-button",exportparts:"base:close-button__base",onClick:e=>{e.preventDefault();e.stopImmediatePropagation();this.requestClose("close-button")}},t("sc-icon",{key:"dc9e98171c260b6ca0a416ccfed7c0b26004cf55",name:"x",label:wp.i18n.__("Close","surecart")}))),t("div",{key:"9bb22395e0da1ffbdbc92689d2dde5ac839e0ede",part:"body",class:"dialog__body"},t("slot",{key:"ff7335588d3411fa0ff06d181d789fdd9a8c1253"})),t("footer",{key:"d359b463b41a3e2b96ed3d4b023ad92ae1b10d21",part:"footer",class:"dialog__footer"},t("slot",{key:"757fc88cfab5fe88ec36038c7f0142c74f6ce87e",name:"footer"}))))}get el(){return i(this)}static get watchers(){return{open:["handleOpenChange"]}}};o("dialog.show",{keyframes:[{opacity:0,transform:"scale(0.8)"},{opacity:1,transform:"scale(1)"}],options:{duration:150,easing:"ease"}});o("dialog.hide",{keyframes:[{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.8)"}],options:{duration:150,easing:"ease"}});o("dialog.denyClose",{keyframes:[{transform:"scale(1)"},{transform:"scale(1.02)"},{transform:"scale(1)"}],options:{duration:150}});o("dialog.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:150}});o("dialog.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:150}});g.style=f;export{g as sc_dialog};
//# sourceMappingURL=p-a0bcc877.entry.js.map