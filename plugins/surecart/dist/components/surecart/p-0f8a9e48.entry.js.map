{"version":3,"names":["scSwapCss","ScSwapStyle0","ScSwap","onSwapToggleChange","e","updateFormState","checkoutState","checkout","toggleSwap","id","_a","this","lineItem","action","target","checked","createErrorNotice","message","console","error","render","_b","price","current_swap","_c","swap","_d","_f","_e","swap_price","h","class","_g","onScChange","description","display_amount","short_interval_text","interval_count_text"],"sources":["src/components/controllers/checkout-form/sc-swap/sc-swap.scss?tag=sc-swap&encapsulation=shadow","src/components/controllers/checkout-form/sc-swap/sc-swap.tsx"],"sourcesContent":[".swap {\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n\n  &__price {\n    color: var(--sc-swap-price-color, var(--sc-input-label-color));\n    line-height: var(--sc-line-height-dense);\n    font-size: var(--sc-font-size-small);\n    white-space: nowrap;\n  }\n}\n","import { Component, h, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { LineItem, Price } from '../../../../types';\nimport { state as checkoutState } from '@store/checkout';\nimport { toggleSwap } from '@services/session';\nimport { updateFormState } from '@store/form/mutations';\nimport { createErrorNotice } from '@store/notices/mutations';\n\n@Component({\n  tag: 'sc-swap',\n  styleUrl: 'sc-swap.scss',\n  shadow: true,\n})\nexport class ScSwap {\n  /** The product id. */\n  @Prop() lineItem: LineItem;\n\n  async onSwapToggleChange(e) {\n    try {\n      updateFormState('FETCH');\n      checkoutState.checkout = await toggleSwap({ id: this.lineItem?.id, action: e.target.checked ? 'swap' : 'unswap' });\n      updateFormState('RESOLVE');\n    } catch (e) {\n      updateFormState('REJECT');\n      createErrorNotice(e.message);\n      console.error(e);\n    }\n  }\n\n  render() {\n    if (!this?.lineItem?.price?.current_swap && !this?.lineItem?.swap) {\n      return null;\n    }\n\n    const swap = this?.lineItem?.swap || this?.lineItem?.price?.current_swap;\n    const price = (swap?.swap_price as Price) || this.lineItem.price;\n\n    return (\n      <div class=\"swap\">\n        <sc-switch checked={!!this?.lineItem?.swap} onScChange={e => this.onSwapToggleChange(e)}>\n          {swap?.description}\n        </sc-switch>\n        {!!price?.display_amount && (\n          <div class=\"swap__price\">\n            {price?.display_amount} {price?.short_interval_text} {price?.interval_count_text}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"],"mappings":"8YAAA,MAAMA,EAAY,mPAClB,MAAAC,EAAeD,E,MCYFE,EAAM,M,iDAIjB,wBAAMC,CAAmBC,G,MACvB,IACEC,EAAgB,SAChBC,EAAcC,eAAiBC,EAAW,CAAEC,IAAIC,EAAAC,KAAKC,YAAQ,MAAAF,SAAA,SAAAA,EAAED,GAAII,OAAQT,EAAEU,OAAOC,QAAU,OAAS,WACvGV,EAAgB,U,CAChB,MAAOD,GACPC,EAAgB,UAChBW,EAAkBZ,EAAEa,SACpBC,QAAQC,MAAMf,E,EAIlB,MAAAgB,G,kBACE,MAAKC,GAAAX,EAAAC,OAAI,MAAJA,YAAI,SAAJA,KAAMC,YAAQ,MAAAF,SAAA,SAAAA,EAAEY,SAAK,MAAAD,SAAA,SAAAA,EAAEE,kBAAiBC,EAAAb,OAAI,MAAJA,YAAI,SAAJA,KAAMC,YAAQ,MAAAY,SAAA,SAAAA,EAAEC,MAAM,CACjE,OAAO,I,CAGT,MAAMA,IAAOC,EAAAf,OAAI,MAAJA,YAAI,SAAJA,KAAMC,YAAQ,MAAAc,SAAA,SAAAA,EAAED,SAAQE,GAAAC,EAAAjB,OAAI,MAAJA,YAAI,SAAJA,KAAMC,YAAQ,MAAAgB,SAAA,SAAAA,EAAEN,SAAK,MAAAK,SAAA,SAAAA,EAAEJ,cAC5D,MAAMD,GAASG,IAAI,MAAJA,SAAI,SAAJA,EAAMI,aAAwBlB,KAAKC,SAASU,MAE3D,OACEQ,EAAA,OAAKC,MAAM,QACTD,EAAA,aAAWf,YAAWiB,EAAArB,OAAI,MAAJA,YAAI,SAAJA,KAAMC,YAAQ,MAAAoB,SAAA,SAAAA,EAAEP,MAAMQ,WAAY7B,GAAKO,KAAKR,mBAAmBC,IAClFqB,IAAI,MAAJA,SAAI,SAAJA,EAAMS,gBAENZ,IAAK,MAALA,SAAK,SAALA,EAAOa,iBACRL,EAAA,OAAKC,MAAM,eACRT,IAAK,MAALA,SAAK,SAALA,EAAOa,eAAc,IAAGb,IAAK,MAALA,SAAK,SAALA,EAAOc,oBAAmB,IAAGd,IAAK,MAALA,SAAK,SAALA,EAAOe,qB","ignoreList":[]}