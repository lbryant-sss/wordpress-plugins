{"version":3,"file":"sc-product-line-item-note.js","sourceRoot":"","sources":["../../../../src/components/ui/product-line-item-note/sc-product-line-item-note.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Prop, State, Element } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\n\n@Component({\n  tag: 'sc-product-line-item-note',\n  styleUrl: 'sc-product-line-item-note.scss',\n  shadow: true,\n})\nexport class ScProductLineItemNote {\n  @Element() el: HTMLElement;\n  @Prop() note: string;\n  @State() expanded = false;\n  @State() isOverflowing = false;\n\n  private noteEl?: HTMLDivElement;\n  private resizeObserver?: ResizeObserver;\n  private mutationObserver?: MutationObserver;\n\n  componentDidLoad() {\n    this.setupObservers();\n    this.checkOverflow();\n  }\n\n  disconnectedCallback() {\n    this.cleanupObservers();\n  }\n\n  setupObservers() {\n    if (!this.noteEl) return;\n\n    // ResizeObserver for container size changes\n    if (typeof ResizeObserver !== 'undefined') {\n      this.resizeObserver = new ResizeObserver(() => {\n        this.checkOverflow();\n      });\n      this.resizeObserver.observe(this.noteEl);\n    }\n\n    // MutationObserver for content changes\n    if (typeof MutationObserver !== 'undefined') {\n      this.mutationObserver = new MutationObserver(() => {\n        this.checkOverflow();\n      });\n      this.mutationObserver.observe(this.noteEl, {\n        characterData: true,\n        subtree: true,\n        childList: true,\n      });\n    }\n  }\n\n  cleanupObservers() {\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n      this.resizeObserver = undefined;\n    }\n    if (this.mutationObserver) {\n      this.mutationObserver.disconnect();\n      this.mutationObserver = undefined;\n    }\n  }\n\n  checkOverflow() {\n    if (!this.noteEl) return;\n    this.isOverflowing = this.noteEl.scrollHeight > this.noteEl.clientHeight;\n  }\n\n  toggle() {\n    this.expanded = !this.expanded;\n  }\n\n  render() {\n    if (!this.note) return null;\n\n    return (\n      <div class=\"base\" part=\"base\">\n        <div\n          class={{\n            'line-item-note': true,\n            'line-item-note--is-expanded': this.expanded,\n            'line-item-note--clickable': this.isOverflowing || this.expanded,\n          }}\n          tabIndex={this.isOverflowing || this.expanded ? 0 : undefined}\n          onClick={() => (this.isOverflowing || this.expanded) && this.toggle()}\n        >\n          <div ref={el => (this.noteEl = el as HTMLDivElement)} class=\"line-item-note__text\">\n            {this.note}\n          </div>\n\n          {(this.isOverflowing || this.expanded) && (\n            <button\n              class=\"line-item-note__toggle\"\n              type=\"button\"\n              onClick={e => {\n                e.stopPropagation();\n                this.toggle();\n              }}\n              title={this.expanded ? __('Collapse note', 'surecart') : __('Expand note', 'surecart')}\n            >\n              <slot name=\"icon\">\n                <sc-icon name={this.expanded ? 'chevron-up' : 'chevron-down'} style={{ width: '16px', height: '16px' }}></sc-icon>\n              </slot>\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n"]}