import{h}from"@stencil/core";import{getAnimation,setDefaultAnimation}from"../../../functions/animation-registry";import{animateTo,shimKeyframesHeightAuto,stopAnimations}from"../../../functions/animate";import{isRtl}from"../../../functions/page-align";import{speak}from"@wordpress/a11y";import{__}from"@wordpress/i18n";export class ScToggle{constructor(){this.open=!1,this.summary=void 0,this.disabled=!1,this.borderless=!1,this.shady=!1,this.showControl=!1,this.showIcon=!0,this.collapsible=!0}componentDidLoad(){this.body.hidden=!this.open,this.body.style.height=this.open?"auto":"0"}async show(){this.open||this.disabled||(this.open=!0,speak(__("Summary Shown","surecart")))}async hide(){this.open&&!this.disabled&&this.collapsible&&(this.open=!1,speak(__("Summary Hidden","surecart")))}handleSummaryClick(){this.disabled||(this.open?this.hide():this.show(),this.header.focus())}handleSummaryKeyDown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.open?this.hide():this.show()),"ArrowUp"!==e.key&&"ArrowLeft"!==e.key||(e.preventDefault(),this.hide()),"ArrowDown"!==e.key&&"ArrowRight"!==e.key||(e.preventDefault(),this.show())}async handleOpenChange(){if(this.open){this.scShow.emit(),await stopAnimations(this.body),this.body.hidden=!1,this.body.style.overflow="hidden";const{keyframes:e,options:t}=getAnimation(this.el,"details.show");await animateTo(this.body,shimKeyframesHeightAuto(e,this.body.scrollHeight),t),this.body.style.height="auto",this.body.style.overflow="visible"}else{this.scHide.emit(),await stopAnimations(this.body),this.body.style.overflow="hidden";const{keyframes:e,options:t}=getAnimation(this.el,"details.hide");await animateTo(this.body,shimKeyframesHeightAuto(e,this.body.scrollHeight),t),this.body.hidden=!0,this.body.style.height="auto",this.body.style.overflow="visible"}}render(){return h("div",{key:"4f7e60e13082b6bc381ecb488de64902813fe88a",part:"base",class:{details:!0,"details--open":this.open,"details--disabled":this.disabled,"details--borderless":this.borderless,"details--shady":this.shady,"details--is-rtl":isRtl()}},h("header",{key:"dc48114172a3cac02c86eaebb3956728ed72bd10",ref:e=>this.header=e,part:"header",id:"header",class:"details__header",role:"button","aria-expanded":this.open?"true":"false","aria-controls":"content","aria-disabled":this.disabled?"true":"false",tabindex:this.disabled?"-1":"0",onClick:()=>this.handleSummaryClick(),onKeyDown:e=>this.handleSummaryKeyDown(e)},this.showControl&&h("span",{key:"b2ea60e40c832d913b48daa49aa0a7d45143d268",part:"radio",class:"details__radio"},h("svg",{key:"b4d2f6a27c269402ad34a4bd457823ec466c4b76",viewBox:"0 0 16 16"},h("g",{key:"ca54f1a897447a44673acf5ec2798d9e623ff99b",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},h("g",{key:"fde41771e1fa16c542dc4d9896a6314fd1689962",fill:"currentColor"},h("circle",{key:"fba9474f2a4bd98a7529397c3f2ed663915c2550",cx:"8",cy:"8",r:"3.42857143"}))))),h("div",{key:"61bb920a0db6c3318aac00d64286ac3a1a8ed415",part:"summary",class:"details__summary"},h("slot",{key:"2d30b79bea39f49db200dce124d791d3dfe05e4c",name:"summary"},this.summary)),this.showIcon&&h("span",{key:"5c329e78aa42b86690661aa9c9ec428a9fcc81ec",part:"summary-icon",class:"details__summary-icon"},h("slot",{key:"bc0cb13335a2d39fcc80c192d6fe78fe7ac305eb",name:"icon"},h("sc-icon",{key:"7a2fff29d5f344d11f4993e4d2ba45edff6c80c9",name:"chevron-right"})))),h("div",{key:"35544000f0eca7aa7ac62d7e5f3c121284a0aa2c",class:"details__body",ref:e=>this.body=e,part:"body"},h("div",{key:"86673fe7e01eb8a375f00eebc269d0be912b3e7e",part:"content",id:"content",class:"details__content",role:"region","aria-labelledby":"header"},h("slot",{key:"5cda0c1279b610b7777ab928eb36abc255d68fcb"}))))}static get is(){return"sc-toggle"}static get encapsulation(){return"shadow"}static get originalStyleUrls(){return{$:["sc-toggle.scss"]}}static get styleUrls(){return{$:["sc-toggle.css"]}}static get properties(){return{open:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Indicates whether or not the details is open. You can use this in lieu of the show/hide methods."},attribute:"open",reflect:!0,defaultValue:"false"},summary:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:"The summary to show in the details header. If you need to display HTML, use the `summary` slot instead."},attribute:"summary",reflect:!1},disabled:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Disables the details so it can't be toggled."},attribute:"disabled",reflect:!0,defaultValue:"false"},borderless:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Is this a borderless toggle?"},attribute:"borderless",reflect:!0,defaultValue:"false"},shady:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Is this a shady"},attribute:"shady",reflect:!0,defaultValue:"false"},showControl:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Should we show a radio control?"},attribute:"show-control",reflect:!1,defaultValue:"false"},showIcon:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Should we show the arrow icon?"},attribute:"show-icon",reflect:!1,defaultValue:"true"},collapsible:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Are these collapsible?"},attribute:"collapsible",reflect:!1,defaultValue:"true"}}}static get events(){return[{method:"scShow",name:"scShow",bubbles:!0,cancelable:!0,composed:!0,docs:{tags:[],text:"Show the toggle"},complexType:{original:"void",resolved:"void",references:{}}},{method:"scHide",name:"scHide",bubbles:!0,cancelable:!0,composed:!0,docs:{tags:[],text:"Show the toggle"},complexType:{original:"void",resolved:"void",references:{}}}]}static get elementRef(){return"el"}static get watchers(){return[{propName:"open",methodName:"handleOpenChange"}]}}setDefaultAnimation("details.show",{keyframes:[{height:"0",opacity:"0"},{height:"auto",opacity:"1"}],options:{duration:250,easing:"ease"}}),setDefaultAnimation("details.hide",{keyframes:[{height:"auto",opacity:"1"},{height:"0",opacity:"0"}],options:{duration:250,easing:"ease"}});