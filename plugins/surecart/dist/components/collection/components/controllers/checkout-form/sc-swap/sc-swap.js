import{h}from"@stencil/core";import{state as checkoutState}from"../../../../store/checkout/index";import{toggleSwap}from"../../../../services/session/index";import{updateFormState}from"../../../../store/form/mutations";import{createErrorNotice}from"../../../../store/notices/mutations";export class ScSwap{constructor(){this.lineItem=void 0}async onSwapToggleChange(t){var e;try{updateFormState("FETCH"),checkoutState.checkout=await toggleSwap({id:null===(e=this.lineItem)||void 0===e?void 0:e.id,action:t.target.checked?"swap":"unswap"}),updateFormState("RESOLVE")}catch(t){updateFormState("REJECT"),createErrorNotice(t.message),console.error(t)}}render(){var t,e,i,o,s,r,n;if(!(null===(e=null===(t=null==this?void 0:this.lineItem)||void 0===t?void 0:t.price)||void 0===e?void 0:e.current_swap)&&!(null===(i=null==this?void 0:this.lineItem)||void 0===i?void 0:i.swap))return null;const l=(null===(o=null==this?void 0:this.lineItem)||void 0===o?void 0:o.swap)||(null===(r=null===(s=null==this?void 0:this.lineItem)||void 0===s?void 0:s.price)||void 0===r?void 0:r.current_swap),a=(null==l?void 0:l.swap_price)||this.lineItem.price;return h("div",{class:"swap"},h("sc-switch",{checked:!!(null===(n=null==this?void 0:this.lineItem)||void 0===n?void 0:n.swap),onScChange:t=>this.onSwapToggleChange(t)},null==l?void 0:l.description),!!(null==a?void 0:a.display_amount)&&h("div",{class:"swap__price"},null==a?void 0:a.display_amount," ",null==a?void 0:a.short_interval_text," ",null==a?void 0:a.interval_count_text))}static get is(){return"sc-swap"}static get encapsulation(){return"shadow"}static get originalStyleUrls(){return{$:["sc-swap.scss"]}}static get styleUrls(){return{$:["sc-swap.css"]}}static get properties(){return{lineItem:{type:"unknown",mutable:!1,complexType:{original:"LineItem",resolved:"LineItem",references:{LineItem:{location:"import",path:"../../../../types",id:"src/types.ts::LineItem"}}},required:!1,optional:!1,docs:{tags:[],text:"The product id."}}}}}