{"version":3,"file":"wpm-public.p1.min.js","mappings":"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CA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,wBACA,wBACA,iBACA,mBACA,mBACA,kBACA,iBACA,mBACA,oBACA,oBACA,mBACA,kBACA,oBACA,kBACA,mBACA,mBACA,mBACA,gBACA,iBACA,mBACA,iBACA,iBACA,iBACA,kBACA,kBACA,oBACA,iBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,kBACA,kBACA,oBACA,oBACA,oBACA,oBACA,mBACA,mBACA,mBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,kBACA,oBACA,oBACA,oBACA,oBACA,mBACA,mBACA,mBACA,kBACA,oBACA,oBACA,oBACA,oBACA,mBACA,mBACA,mBACA,kBACA,mBACA,mBACA,kBACA,oBACA,oBACA,oBACA,oBACA,mBACA,mBACA,mBACA,kBACA,oBACA,oBACA,oBACA,oBACA,mBACA,mBACA,mBACA,kBACA,oBACA,mBACA,mBACA,mBACA,kBACA,oBACA,oBACA,oBACA,oBACA,mBACA,mBACA,mBACA,kBACA,oBAGgB,CAChB,iBACA,kBACA,kBACA,iBACA,iBACA,iBACA,kBACA,kBACA,kBACA,kBACA,gBACA,kBACA,gBACA,gBACA,kBACA,kBACA,kBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,kBACA,iBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,gBACA,kBACA,kBACA,kBACA,kBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,kBACA,iBACA,mBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,kBACA,mBACA,kBACA,mBACA,mBACA,mBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,mBACA,mBACA,mBACA,kBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,iBACA,iBACA,iBACA,kBACA,iBACA,mBACA,iBACA,sBACA,sBACA,mBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,iBACA,iBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,mBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,iBACA,iBACA,mBACA,mBACA,mBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBACA,sBACA,sBACA,mBACA,mBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,mBACA,mBACA,sBACA,sBACA,sBACA,sBACA,oBACA,mBACA,oBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,oBACA,oBACA,oBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,oBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,oBACA,yBACA,kBAGe,CACf,kBACA,kBACA,mBAGY,CACZ,iBACA,iBACA,iBACA,iBACA,iBACA,kBACA,iBACA,kBACA,mBACA,kBACA,qBACA,kBACA,kBACA,mBACA,mBACA,kBACA,mBACA,iBACA,mBACA,iBACA,iBACA,iBACA,iBACA,iBACA,kBAGiB,CACjB,gBACA,gBACA,gBACA,gBACA,iBACA,iBACA,iBACA,mBAGc,CACd,eACA,iBACA,iBAGa,CACb,kBACA,kBAGc,CACd,iBACA,eAGa,CACb,iBACA,kBACA,mBACA,kBACA,kBACA,kBACA,gBACA,gBACA,gBACA,kBACA,mBACA,kBACA,kBACA,oBACA,oBACA,kBACA,mBACA,mBACA,mBACA,mBACA,iBACA,kBACA,mBACA,mBACA,mBAGkB,CAClB,gBACA,eACA,gBACA,cACA,eACA,gBACA,eACA,gBACA,gBACA,eACA,gBACA,iBAGa,CACb,iBACA,eACA,iBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,iBACA,iBACA,iBACA,iBACA,gBACA,cACA,eACA,eACA,eACA,eACA,eACA,gBACA,eACA,gBACA,kBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,iBACA,iBACA,mBACA,kBAGc,CACd,iBACA,gBACA,kBACA,gBACA,gBACA,gBACA,gBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,oBACA,kBACA,kBACA,iBACA,kBACA,iBACA,mBACA,qBACA,iBACA,kBACA,mBACA,mBACA,mBACA,mBACA,cACA,eACA,iBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,kBACA,iBACA,gBACA,iBACA,kBACA,kBACA,iBACA,iBACA,iBACA,iBACA,qBACA,qBACA,qBACA,qBAGa,CACb,mB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","sources":["webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/facebook/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/borlabs.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/complianz.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/cookiebot.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/cookiefirst.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/cookieyes.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/onetrust.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/real-cookie-banner.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/cookie-compliance.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/cookie-script.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/iubenda.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/moove-cookie-compliance.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/termly.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/usercentrics.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/wp-auto-terms.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/wp-consent-api.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/cmps/wp-cookie-consent.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/consent.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/hotjar/loader.js","webpack://Pixel-Manager-for-WooCommerce/../../src/ipv6.ts","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/geo/geo.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/console.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/functions_loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/hotjar/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/functions_main.js","webpack://Pixel-Manager-for-WooCommerce/../../src/index.ts","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/listeners/doofinder.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/base/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/base/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/base/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/wc_hooks.js","webpack://Pixel-Manager-for-WooCommerce/../../src/ipRange.ts","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/version.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/ads/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/../../src/util.ts","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/ip_services.js","webpack://Pixel-Manager-for-WooCommerce/../../src/ipv4.ts","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/analytics/ga4/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/facebook/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/analytics/ga4/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/event_listeners_on_ready.js","webpack://Pixel-Manager-for-WooCommerce/../node_modules/ipaddr.js/lib/ipaddr.js","webpack://Pixel-Manager-for-WooCommerce/../node_modules/ip6/ip6.js","webpack://Pixel-Manager-for-WooCommerce/../src/range-check.ts","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/hotjar/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/ads/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/facebook/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/ads/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/analytics/ga4/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/consent/api.mjs","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/pixels/google/analytics/loader.js","webpack://Pixel-Manager-for-WooCommerce/webpack/bootstrap","webpack://Pixel-Manager-for-WooCommerce/webpack/runtime/define property getters","webpack://Pixel-Manager-for-WooCommerce/webpack/runtime/global","webpack://Pixel-Manager-for-WooCommerce/webpack/runtime/hasOwnProperty shorthand","webpack://Pixel-Manager-for-WooCommerce/webpack/runtime/make namespace object","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/main.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/deprecated.mjs"],"sourcesContent":["/**\n * All event listeners\n *\n * https://developers.facebook.com/docs/meta-pixel/reference\n * */\n\n// Load pixel event\njQuery(document).on(\"pmw:load-pixels\", () => {\n\n\tif (\n\t\twpmDataLayer?.pixels?.facebook?.pixel_id\n\t\t&& !wpmDataLayer?.pixels?.facebook?.loaded\n\t\t&& !wpm.doesUrlContainPatterns(wpmDataLayer?.pixels?.facebook?.exclusion_patterns)\n\t) {\n\t\tif (wpm.consent.canPixelBeFired(\"marketing\", \"Facebook\")) wpm.loadFacebookPixel();\n\t}\n});\n\n// PageView event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"pmw:s2s:page-view\", (event, payload) => {\n\n\ttry {\n\t\tif (wpm.canNotFireFbq()) return;\n\n\t\tfbq(\"track\", \"PageView\", payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t});\n\t\t// pmw.console.log(\"Facebook: PageView event sent\", payload.facebook);\n\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n});\n\n// AddToCart event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"pmw:s2s:add-to-cart\", (event, payload) => {\n\n\ttry {\n\t\tif (wpm.canNotFireFbq()) return;\n\n\t\tfbq(\"track\", \"AddToCart\", payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t});\n\t\tpmw.console.log(\"Facebook Pixel: AddToCart event sent\", payload.facebook);\n\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n});\n\n// InitiateCheckout event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"pmw:s2s:begin-checkout\", (event, payload) => {\n\n\ttry {\n\t\tif (wpm.canNotFireFbq()) return;\n\n\t\tfbq(\"track\", \"InitiateCheckout\", payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t});\n\t\tpmw.console.log(\"Facebook Pixel: InitiateCheckout event sent\", payload.facebook);\n\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n});\n\n// AddPaymentInfo event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"pmw:s2s:add-payment-info\", (event, payload) => {\n\n\ttry {\n\t\tif (wpm.canNotFireFbq()) return;\n\n\t\tconst eventName = \"AddPaymentInfo\";\n\n\t\tfbq(\"track\", eventName, payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t});\n\t\tpmw.console.log(`Facebook Pixel: ${eventName} event sent`, payload.facebook);\n\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n});\n\n// AddToWishlist event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"pmw:s2s:add-to-wishlist\", (event, payload) => {\n\n\ttry {\n\t\tif (wpm.canNotFireFbq()) return;\n\n\t\tfbq(\"track\", \"AddToWishlist\", payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t});\n\t\tpmw.console.log(\"Facebook Pixel: AddToWishlist event sent\", payload.facebook);\n\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n});\n\n// ViewContent event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"pmw:s2s:view-item\", (event, payload) => {\n\n\ttry {\n\t\tif (wpm.canNotFireFbq()) return;\n\n\t\tfbq(\"track\", \"ViewContent\", payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t});\n\t\tpmw.console.log(\"Facebook Pixel: ViewContent event sent\", payload.facebook);\n\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n});\n\n\n// view search event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"pmw:s2s:search\", (event, payload) => {\n\n\ttry {\n\t\tif (wpm.canNotFireFbq()) return;\n\n\t\tfbq(\"track\", \"Search\", payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t});\n\t\tpmw.console.log(\"Facebook Pixel: Search event sent\", payload.facebook);\n\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n});\n\n// load always event\njQuery(document).on(\"pmw:load-always\", () => {\n\n\ttry {\n\t\tif (wpm.canNotFireFbq()) return;\n\n\t\twpm.setFbUserData();\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n});\n\n// view order received page event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"pmw:s2s:view-order-received-page\", (event, payload) => {\n\n\ttry {\n\t\tif (wpm.canNotFireFbq()) return;\n\n\t\tfbq(\"track\", \"Purchase\", payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t});\n\t\tpmw.console.log(\"Facebook Pixel: Purchase event sent\", payload.facebook);\n\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n});\n\ndocument.addEventListener(\"pmw:consent:update\", ({detail}) => {\n\n\tconst consent = detail;\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return;\n\n\t\tconst consentUpdate = consent.marketing ? \"grant\" : \"revoke\";\n\n\t\tfbq(\"consent\", consentUpdate);\n\t\tpmw.console.log(`Facebook Consent Mode updated: ${consentUpdate}`);\n\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n}, true);\n","/**\n * Load Google\n */\n\n// Load base\nrequire(\"./base/loader\")\n\n//Load additional Google libraries\nrequire(\"./ads/loader\")\nrequire(\"./analytics/loader\")\n\n","/**\n * Borlabs Cookie\n *\n * The PMW only supports the Borlabs Cookie version 2.x.\n * And it only supports category based consent.\n *\n * https://borlabs.io/borlabs-cookie/\n */\nexport const borlabs = {\n\n\t/**\n\t * Get the Borlabs Cookie cookie.\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t **/\n\tgetConsent: () => {\n\n\t\tlet consent = wpm.getCookie(\"borlabs-cookie\")\n\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"Borlabs Cookie CMP consent detected\")\n\n\t\t\tconsole.log(\"Pixel Manger: We deprecated direct support for Borlabs Cookie. Borlabs Cookie still can pass consent to PMW by using Google Consent Mode update calls which will be processd by the Pixel Manager.\")\n\n\t\t\tconsent = decodeURI(consent)\n\t\t\tconsent = JSON.parse(consent)\n\n\t\t\treturn {\n\t\t\t\tstatistics : consent?.consents?.statistics ?? true,\n\t\t\t\tmarketing  : consent?.consents?.marketing ?? true,\n\t\t\t\tpreferences: true,\n\t\t\t\tnecessary  : true,\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\t/**\n\t * Borlabs Cookie\n\t * If the visitor accepts cookies in Borlabs Cookie unblock the scripts.\n\t *\n\t * @returns {void}\n\t **/\n\tloadEventListeners: () => {\n\t\tdocument.addEventListener(\"borlabs-cookie-consent-saved\", () => {\n\t\t\t/**\n\t\t\t * Don't reload the page! (CMPs might emit the events on each page load, leading to a page reload loop)\n\t\t\t * Only try to save the consent in the PMW.\n\t\t\t */\n\t\t}, true)\n\t},\n}\n","/**\n * Complianz Cookie\n * https://wordpress.org/plugins/complianz-gdpr/\n *\n * TODO: Inform the developers. The event listener fires four times and has inconsistent data. As a consequence PMW has to update the consent status also four times which is inefficient.\n */\n\nexport const complianz = {\n\n\t/**\n\t * Get the Complianz cookies\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\t// console.log(\"getComplianzCookies\")\n\n\t\tlet cmplz_statistics     = wpm.getCookie(\"cmplz_statistics\") || wpm.getCookie(\"cmplz_rt_statistics\")\n\t\tlet cmplz_marketing      = wpm.getCookie(\"cmplz_marketing\") || wpm.getCookie(\"cmplz_rt_marketing\")\n\t\tlet cmplz_preferences    = wpm.getCookie(\"cmplz_preferences\") || wpm.getCookie(\"cmplz_rt_preferences\")\n\t\tlet cmplz_necessary      = wpm.getCookie(\"cmplz_functional\") || wpm.getCookie(\"cmplz_rt_functional\")\n\t\tlet cmplz_consent_status = wpm.getCookie(\"cmplz_consent_status\") || wpm.getCookie(\"cmplz_banner-status\") || wpm.getCookie(\"cmplz_rt_banner-status\")\n\n\t\tif (cmplz_consent_status) {\n\n\t\t\tpmw.console.log(\"Complianz CMP consent detected\")\n\n\t\t\treturn {\n\t\t\t\tstatistics : cmplz_statistics === \"\" || cmplz_statistics === \"allow\" ? true : false,\n\t\t\t\tmarketing  : cmplz_marketing === \"\" || cmplz_marketing === \"allow\" ? true : false,\n\t\t\t\tpreferences: cmplz_preferences === \"\" || cmplz_preferences === \"allow\" ? true : false,\n\t\t\t\tnecessary  : cmplz_necessary === \"\" || cmplz_necessary === \"allow\" ? true : false,\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\t/**\n\t * Complianz Cookie\n\t *\n\t * If visitor accepts cookies in Complianz unblock the scripts\n\t */\n\tloadEventListeners: () => {\n\t\tdocument.addEventListener(\"cmplz_fire_categories\", cmplzStatusChange, true)\n\t},\n}\n\n/**\n * Complianz\n *\n * @param consent\n */\nconst cmplzStatusChange = (consent) => {\n\n\tlet data = {\n\t\tstatistics : consent.detail.categories.includes(\"statistics\"),\n\t\tmarketing  : consent.detail.categories.includes(\"marketing\"),\n\t\tpreferences: consent.detail.categories.includes(\"preferences\"),\n\t\tnecessary  : consent.detail.categories.includes(\"functional\"),\n\t}\n\n\tpmw.consent.api.updateSelectively(data)\n}\n","/**\n * Cookiebot\n * https://wordpress.org/plugins/cookiebot/\n * https://support.cookiebot.com/hc/en-us/articles/360016047000-Cookiebot-and-Google-Consent-Mode\n */\nexport const cookiebot = {\n\n\t/**\n\t * Get the Cookiebot cookie.\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\t// let consent = \"{stamp:%27z5ZnyohzGbbYMhDdKsdXYMG3VT5a4l7mPBcyMeFe8vasPesmw/X1sQ==%27%2Cnecessary:true%2Cpreferences:true%2Cstatistics:false%2Cmarketing:true%2Cmethod:%27explicit%27%2Cver:1%2Cutc:1712435323862%2Cregion:%27ch%27}\"\n\t\tlet consent = wpm.getCookie(\"CookieConsent\")\n\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"Cookiebot CMP consent detected\")\n\n\t\t\tif (isValidJson(consent)) {\n\t\t\t\tconsent = JSON.parse(consent)\n\t\t\t} else {\n\t\t\t\tconsent = decodeURI(consent)\n\t\t\t\tconsent = consent.replace(/'/g, \"\\\"\") // Replace single quotes with double quotes as JSON requires double quotes\n\t\t\t\tconsent = decodeURIComponent(consent)\n\t\t\t\tconsent = consent.replace(/(\\w+):/g, \"\\\"$1\\\":\") // Add double quotes to keys\n\t\t\t\tconsent = JSON.parse(consent)\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tstatistics : consent.statistics ?? true,\n\t\t\t\tmarketing  : consent.marketing ?? true,\n\t\t\t\tpreferences: consent.preferences ?? true,\n\t\t\t\tnecessary  : consent.necessary ?? true,\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\t/**\n\t * Cookiebot\n\t * \tIf visitor accepts cookies in Cookiebot unblock the scripts\n\t *\n\t * \tCookiebot requires the events to be attached to the window object not the document object\n\t *\n\t * \thttps://www.cookiebot.com/en/developer/\n\t */\n\tloadEventListeners: () => {\n\n\t\twindow.addEventListener(\"CookiebotOnAccept\", (e) => {\n\n\t\t\tlet data = {\n\t\t\t\tstatistics : e.currentTarget.CookieConsent.consent.statistics ?? true,\n\t\t\t\tmarketing  : e.currentTarget.CookieConsent.consent.marketing ?? true,\n\t\t\t\tpreferences: e.currentTarget.CookieConsent.consent.preferences ?? true,\n\t\t\t\tnecessary  : e.currentTarget.CookieConsent.consent.necessary ?? true,\n\t\t\t}\n\n\t\t\tpmw.consent.api.updateSelectively(data)\n\t\t}, true)\n\t},\n}\n\nconst isValidJson = (str) => {\n\ttry {\n\t\tJSON.parse(str)\n\t} catch (e) {\n\t\treturn false\n\t}\n\treturn true\n}\n\n\n","/**\n * Cookiefirst CMP\n * https://cookiefirst.com\n * https://cookiefirst.com/wordpress-cookie-consent-plugin/\n * https://support.cookiefirst.com/hc/de/articles/360011568738-Javascript-API\n */\nexport const cookiefirst = {\n\n\t/**\n\t * Get the Cookiefirst cookie.\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\t// let consent = \"{\"necessary\":true,\"performance\":true,\"functional\":true,\"advertising\":true,\"timestamp\":1731043717,\"type\":\"category\",\"version\":\"73d03af8-0302-48f4-8d17-802e03d4959b\"}\"\n\t\tlet consent = wpm.getCookie(\"cookiefirst-consent\")\n\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"Cookiefirst CMP consent detected\")\n\n\t\t\tif (isValidJson(consent)) {\n\t\t\t\tconsent = JSON.parse(consent)\n\t\t\t} else {\n\t\t\t\tconsent = decodeURI(consent)\n\t\t\t\tconsent = consent.replace(/'/g, \"\\\"\") // Replace single quotes with double quotes as JSON requires double quotes\n\t\t\t\tconsent = decodeURIComponent(consent)\n\t\t\t\tconsent = consent.replace(/(\\w+):/g, \"\\\"$1\\\":\") // Add double quotes to keys\n\t\t\t\tconsent = JSON.parse(consent)\n\t\t\t}\n\n\t\t\tconsole.log(\"cookiefirst consent object\", consent)\n\n\t\t\treturn {\n\t\t\t\tstatistics : consent.performance ?? true,\n\t\t\t\tmarketing  : consent.advertising ?? true,\n\t\t\t\tpreferences: consent.functional ?? true,\n\t\t\t\tnecessary  : consent.necessary ?? true,\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\t/**\n\t * Cookiefirst\n\t *\n\t * \tIf visitor accepts cookies in Cookiefirst unblock the scripts\n\t */\n\tloadEventListeners: () => {\n\n\t\twindow.addEventListener(\"cf_consent\", function(event) {\n\t\t\tlet data = {\n\t\t\t\tstatistics : consent.performance ?? true,\n\t\t\t\tmarketing  : consent.advertising ?? true,\n\t\t\t\tpreferences: consent.functional ?? true,\n\t\t\t\tnecessary  : consent.necessary ?? true,\n\t\t\t}\n\n\t\t\tpmw.consent.api.updateSelectively(data)\n\t\t}, true);\n\t},\n}\n\nconst isValidJson = (str) => {\n\ttry {\n\t\tJSON.parse(str)\n\t} catch (e) {\n\t\treturn false\n\t}\n\treturn true\n}\n\n\n","/**\n * CookieYes, GDPR Cookie Consent (Cookie Law Info)\n * https://wordpress.org/plugins/cookie-law-info/\n */\n\nexport const cookieyes = {\n\n\t/**\n\t * Get the CookieYes cookies\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\t/**\n\t\t * Process the new cookieyes-consent cookie that contains all the information\n\t\t */\n\n\t\t    // on first load CookieYes sets the categories with now values (facepalm)\n\t\t    // let consent = \"consentid:cWZkOGRjNzFzb1R3a0I4VlJMYXM1ZEJjVEs5aU4zcTQ,consent:,action:,necessary:,functional:,analytics:,performance:,advertisement:,other:\"\n\t\t\t// let consent = \"consentid:cnpZSGg2SDZzWXJodEc3TWF3UTdKVVM3UmtKWHc3SEk,consent:yes,action:yes,necessary:yes,functional:yes,analytics:no,performance:yes,advertisement:yes\"\n\t\tlet consent = wpm.getCookie(\"cookieyes-consent\")\n\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"CookieYes CMP consent detected\")\n\n\t\t\t// This cookie has the following structure:\n\t\t\t// consentid:cnpZSGg2SDZzWXJodEc3TWF3UTdKVVM3UmtKWHc3SEk,consent:yes,action:yes,necessary:yes,functional:yes,analytics:no,performance:yes,advertisement:yes\n\t\t\t// First split the comma-separated values into an array\n\t\t\t// Then split each array item into a key value pair. The key and the value are separated by a colon.\n\t\t\t// Then create an object from the key value pairs.\n\t\t\t// Then console.log the object to see what it looks like.\n\n\t\t\tconsent = consentToJson(consent)\n\n\t\t\treturn {\n\t\t\t\tstatistics : consent.analytics ?? true,\n\t\t\t\tmarketing  : consent.advertisement ?? true,\n\t\t\t\tpreferences: consent.functional ?? true,\n\t\t\t\tnecessary  : consent.necessary ?? true,\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Check if at least one of the cookies is set\n\t\t *\n\t\t * @param cookieNames\n\t\t * @returns {boolean}\n\t\t */\n\t\tconst isOneCookieSet = (cookieNames) => {\n\t\t\tfor (let key in cookieNames) {\n\t\t\t\tfor (let cookieName of cookieNames[key]) {\n\t\t\t\t\tif (wpm.getCookie(cookieName)) {\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t\t}\n\n\t\t/**\n\t\t * Process the old cookieyes-* cookies\n\t\t *\n\t\t * @param cookieNames\n\t\t * @returns {boolean}\n\t\t */\n\t\tconst getCookieValue = (cookieNames) => {\n\n\t\t\tfor (let cookieName of cookieNames) {\n\t\t\t\tlet value = wpm.getCookie(cookieName)\n\t\t\t\tif (value === \"yes\") {\n\t\t\t\t\treturn true\n\t\t\t\t} else if (value === \"no\") {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true\n\t\t}\n\n\t\tconst cookieNames = {\n\t\t\tstatistics : [\n\t\t\t\t\"cookielawinfo-checkbox-analytics\",\n\t\t\t\t\"cookielawinfo-checkbox-analytiques\",\n\t\t\t\t\"cookieyes-analytics\",\n\t\t\t],\n\t\t\tmarketing  : [\n\t\t\t\t\"cookielawinfo-checkbox-advertisement\",\n\t\t\t\t\"cookielawinfo-checkbox-performance\",\n\t\t\t\t\"cookielawinfo-checkbox-publicite\",\n\t\t\t\t\"cookieyes-advertisement\",\n\t\t\t],\n\t\t\tpreferences: [\n\t\t\t\t\"cookielawinfo-checkbox-functional\",\n\t\t\t\t\"cookielawinfo-checkbox-preferences\",\n\t\t\t\t\"cookieyes-functional\",\n\t\t\t],\n\t\t\tnecessary  : [\n\t\t\t\t\"cookielawinfo-checkbox-necessary\",\n\t\t\t\t\"cookielawinfo-checkbox-necessaire\",\n\t\t\t\t\"cookieyes-necessary\",\n\t\t\t],\n\t\t}\n\n\t\t// If at least one of the cookies is set to \"yes\" or \"no\", then return the CookieYes consent\n\t\tif (isOneCookieSet(cookieNames)) {\n\n\t\t\tpmw.console.log(\"CookieYes CMP consent detected\")\n\n\t\t\treturn  {\n\t\t\t\tstatistics : getCookieValue(cookieNames.statistics),\n\t\t\t\tmarketing  : getCookieValue(cookieNames.marketing),\n\t\t\t\tpreferences: getCookieValue(cookieNames.preferences),\n\t\t\t\tnecessary  : getCookieValue(cookieNames.necessary),\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\tloadEventListeners: () => {\n\n\t\tdocument.addEventListener(\"cookieyes_consent_update\", (e) => {\n\n\t\t\tlet data = {\n\t\t\t\tstatistics : e.detail.accepted.includes(\"analytics\"),\n\t\t\t\tmarketing  : e.detail.accepted.includes(\"advertisement\"),\n\t\t\t\tpreferences: e.detail.accepted.includes(\"functional\"),\n\t\t\t\tnecessary  : e.detail.accepted.includes(\"necessary\"),\n\t\t\t}\n\n\t\t\tpmw.consent.api.updateSelectively(data)\n\t\t}, true)\n\t},\n}\n\n\nconst consentToJson = (consent) => {\n\n\tconsent = consent.split(\",\")\n\n\tlet consentObj = {}\n\n\tconsent.forEach((item) => {\n\t\tlet [key, value] = item.split(\":\")\n\t\tconsentObj[key]  = value\n\t})\n\n\tconsent = consentObj\n\n\t// Make every yes or no to boolean\n\t// On first load CookieYes sets the categories with no values, just empty strings. Not \"yes\" or \"no\". (facepalm)\n\tfor (let key in consent) {\n\t\tif (consent[key] === \"yes\") {\n\t\t\tconsent[key] = true\n\t\t} else if (consent[key] === \"no\" || consent[key] === \"\") {\n\t\t\tconsent[key] = false\n\t\t}\n\t}\n\n\treturn consent\n}\n","/**\n * OneTrust\n *\n * https://www.onetrust.com/\n */\n\nexport const onetrust = {\n\n\t/**\n\t * Get the OneTrust cookie.\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\t// let consent = \"isGpcEnabled=0&datestamp=Sun+Apr+07+2024+06%3A58%3A30+GMT%2B0200+(Central+European+Summer+Time)&version=202401.1.0&browserGpcFlag=0&isIABGlobal=false&hosts=&consentId=ddb816ea-097a-4590-a2dc-17120c6c412c&interactionCount=2&landingPath=NotLandingPage&groups=1%3A1%2C2%3A0%2C3%3A1%2C4%3A1&geolocation=CH%3BZH&AwaitingReconsent=false\"\n\t\tlet consent = wpm.getCookie(\"OptanonConsent\")\n\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"OneTrust CMP consent detected\")\n\n\t\t\tconsent = consentToJSON(consent)\n\n\t\t\t// group mapping\n\t\t\t// 1 = necessary\n\t\t\t// 2 = analytics\n\t\t\t// 3 = functional\n\t\t\t// 4 = ads\n\n\t\t\treturn {\n\t\t\t\tstatistics : consent[\"2\"] ?? true,\n\t\t\t\tmarketing  : consent[\"4\"] ?? true,\n\t\t\t\tpreferences: consent[\"3\"] ?? true,\n\t\t\t\tnecessary  : consent[\"1\"] ?? true,\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\t/**\n\t * OneTrust Event Listeners\n\t */\n\tloadEventListeners: () => {\n\n\t\tdocument.addEventListener(\"consent.onetrust\", (e) => {\n\n\t\t\tlet data = {\n\t\t\t\tstatistics : e.detail.includes(\"2\"),\n\t\t\t\tmarketing  : e.detail.includes(\"4\"),\n\t\t\t\tpreferences: e.detail.includes(\"3\"),\n\t\t\t\tnecessary  : e.detail.includes(\"1\"),\n\t\t\t}\n\n\t\t\tpmw.consent.api.updateSelectively(data)\n\t\t}, true)\n\t},\n}\n\nconst consentToJSON = (consent) => {\n\n\tconsent = decodeURIComponent(consent);\n\n\tlet consentObject = consent.split(\"&\").reduce((obj, item) => {\n\t\tlet [key, value] = item.split(\"=\");\n\t\tobj[key] = value;\n\t\treturn obj;\n\t}, {});\n\n\tconsentObject.groups = consentObject.groups.split(\",\").reduce((obj, item) => {\n\t\tlet [key, value] = item.split(\":\");\n\t\tobj[key] = value === '1';\n\t\treturn obj;\n\t}, {});\n\n\treturn consentObject.groups\n}\n","/**\n * Real Cookie Banner\n *\n * https://devowl.io/wordpress-real-cookie-banner/\n */\nexport const realCookieBanner = {\n\n\t/**\n\t * Get the Real Cookie Banner cookie.\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\tif (!isRcbCookieSet()) return null\n\n\t\twpm.waitForLibrary(\"consentApi\")\n\n\t\tif (!window.consentApi) return null\n\n\t\tpmw.console.log(\"Real Cookie Banner CMP consent detected\")\n\n\t\tlet consent = {\n\t\t\tstatistics : undefined,\n\t\t\tmarketing  : undefined,\n\t\t\tpreferences: true,\n\t\t\tnecessary  : true,\n\t\t}\n\n\t\t// For each service in settings\n\t\t// and each cookie in service.cookies\n\t\t// check if consentApi.consentSync(\"http\", cookie, \"*\") returns an object that contains a not empty object called \"cookie\"\n\t\t// If one of the cookies returns true, then push service.service to wpmConsentValues.pixels\n\t\trcbSettings.forEach((service) => {\n\n\t\t\tservice.cookies.forEach((cookie) => {\n\n\t\t\t\tlet rcbConsent = window.consentApi.consentSync(\"http\", cookie, \"*\")\n\n\t\t\t\tif (rcbConsent?.cookie && rcbConsent?.cookieOptIn) {\n\n\t\t\t\t\tswitch (service.type) {\n\t\t\t\t\t\tcase \"statistics\":\n\t\t\t\t\t\t\tconsent.statistics = true\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase \"marketing\":\n\t\t\t\t\t\t\tconsent.marketing = true\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase \"preferences\":\n\t\t\t\t\t\t\tconsent.preferences = true\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase \"necessary\":\n\t\t\t\t\t\t\tconsent.necessary = true\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\n\t\treturn consent\n\t},\n\n\t/**\n\t * Real Cookie Banner\n\t * If the visitor accepts cookies in Real Cookie Banner unblock the scripts.\n\t */\n\tloadEventListeners: () => {\n\n\n\t\tdocument.addEventListener(\"RCB/OptIn/All\", (e) => {\n\n\t\t\t/**\n\t\t\t * Don't reload the page! RCB fires the event on each page load. Not just when the banner is clicked.\n\t\t\t */\n\t\t}, true)\n\t},\n}\n\nconst isRcbCookieSet = () => {\n\n\t// Find a cookie that has a prefix of real_cookie_banner\n\t// If one is found, then return true\n\t// If none is found, then return false\n\n\tlet cookies = document.cookie.split(\";\")\n\n\tfor (let i = 0; i < cookies.length; i++) {\n\t\tlet cookie = cookies[i].trim()\n\n\t\tif (cookie.startsWith(\"real_cookie_banner\")) {\n\t\t\treturn true\n\t\t}\n\t}\n\n\treturn false\n}\n\nconst rcbSettings = [\n\t{\n\t\t\"service\": \"adroll-ads\",\n\t\t\"type\"   : \"marketing\",\n\t\t\"cookies\": [\"__adroll_fpc\", \"_ar_v4\", \"_adroll\"],\n\t},\n\t{\n\t\t\"service\": \"bing-ads\",\n\t\t\"type\"   : \"marketing\",\n\t\t\"cookies\": [\"_uetsid\", \"_uetvid\"],\n\t},\n\t{\n\t\t\"service\": \"facebook-ads\",\n\t\t\"type\"   : \"marketing\",\n\t\t\"cookies\": [\"_fbp\"],\n\t},\n\t{\n\t\t\"service\": \"google-analytics\",\n\t\t\"type\"   : \"statistics\",\n\t\t\"cookies\": [\"_ga\", \"_gid\", \"_gat\", \"_gat_gtag_UA_*\"],\n\t},\n\t{\n\t\t\"service\": \"google-optimize\",\n\t\t\"type\"   : \"statistics\",\n\t\t\"cookies\": [\"_ga\", \"_gid\", \"_gat\", \"_gat_gtag_UA_*\"],\n\t},\n\t{\n\t\t\"service\": \"google-ads\",\n\t\t\"type\"   : \"marketing\",\n\t\t\"cookies\": [\"_gcl_au\", \"_gcl_aw\", \"_gcl_dc\", \"_gac_*\"],\n\t},\n\t{\n\t\t\"service\": \"hotjar\",\n\t\t\"type\"   : \"statistics\",\n\t\t\"cookies\": [\"_hj*\", \"_hjid\"],\n\t},\n\t{\n\t\t\"service\": \"linkedin-ads\",\n\t\t\"type\"   : \"marketing\",\n\t\t\"cookies\": [\"_li_ss\", \"_li_id\", \"_li_mk_*\"],\n\t},\n\t{\n\t\t\"service\": \"microsoft-ads\",\n\t\t\"type\"   : \"marketing\",\n\t\t\"cookies\": [\"_uetsid\", \"_uetvid\"],\n\t},\n\t{\n\t\t\"service\": \"outbrain-ads\",\n\t\t\"type\"   : \"marketing\",\n\t\t\"cookies\": [],\n\t},\n\t{\n\t\t\"service\": \"pinterest-ads\",\n\t\t\"type\"   : \"marketing\",\n\t\t\"cookies\": [\"_pinterest_ct_ua\", \"_pinterest_ct_rt\", \"_pin_unauth\", \"_derived_epik\", \"_pinterest_sess\"],\n\t},\n\t{\n\t\t\"service\": \"reddit-ads\",\n\t\t\"type\"   : \"marketing\",\n\t\t\"cookies\": [\"_rdt_uuid\"],\n\t},\n\t{\n\t\t\"service\": \"snapchat-ads\",\n\t\t\"type\"   : \"marketing\",\n\t\t\"cookies\": [\"sc_at\", \"sc_anonymous_id\", \"sc_id\", \"_scid\", \"_scid_r\"],\n\t},\n\t{\n\t\t\"service\": \"taboola-ads\",\n\t\t\"type\"   : \"marketing\",\n\t\t\"cookies\": [],\n\t},\n\t{\n\t\t\"service\": \"tiktok-ads\",\n\t\t\"type\"   : \"marketing\",\n\t\t\"cookies\": [\"_ttp\", \"_ttclid\", \"ttwid\"],\n\t},\n\t{\n\t\t\"service\": \"twitter-ads\",\n\t\t\"type\"   : \"marketing\",\n\t\t\"cookies\": [\"twitter_ads_id\", \"twid\", \"_twclid\", \"muc_ads\"],\n\t},\n]\n","import {borlabs} from \"./cmps/borlabs.mjs\"\nimport {complianz} from \"./cmps/complianz.mjs\"\nimport {cookieCompliance} from \"./cmps/cookie-compliance.mjs\"\nimport {cookieScript} from \"./cmps/cookie-script.mjs\"\nimport {cookiebot} from \"./cmps/cookiebot.mjs\"\nimport {cookiefirst} from \"./cmps/cookiefirst.mjs\"\nimport {cookieyes} from \"./cmps/cookieyes.mjs\"\nimport {iubenda} from \"./cmps/iubenda.mjs\"\nimport {mooveCookieCompliance} from \"./cmps/moove-cookie-compliance.mjs\"\nimport {onetrust} from \"./cmps/onetrust.mjs\"\nimport {realCookieBanner} from \"./cmps/real-cookie-banner.mjs\"\nimport {termly} from \"./cmps/termly.mjs\"\nimport {usercentrics} from \"./cmps/usercentrics.mjs\"\nimport {wpAutoTerms} from \"./cmps/wp-auto-terms.mjs\"\nimport {wpConsentApi} from \"./cmps/wp-consent-api.mjs\"\nimport {wpCookieConsent} from \"./cmps/wp-cookie-consent.mjs\"\n\nexport default [\n\tborlabs,\n\tcomplianz,\n\tcookieCompliance,\n\tcookieScript,\n\tcookiebot,\n\tcookiefirst,\n\tcookieyes,\n\tiubenda,\n\tmooveCookieCompliance,\n\tonetrust,\n\trealCookieBanner,\n\ttermly,\n\tusercentrics,\n\twpAutoTerms,\n\twpConsentApi,\n\twpCookieConsent,\n]\n","/**\n * Cookie Compliance (free version)\n * https://wordpress.org/plugins/cookie-notice/\n */\nexport const cookieCompliance = {\n\n\t/**\n\t * Get the Cookie Compliance cookie.\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\t// Free version\n\t\tlet consent = wpm.getCookie(\"cookie_notice_accepted\")\n\n\t\t// If the cookie is set, it contains the string \"true\" or \"false\"\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"Cookie Compliance CMP (by hu-manity.co) consent detected\")\n\n\t\t\t// Convert the string \"true\" to true and \"false\" to false\n\t\t\tconsent = consent === \"true\"\n\n\t\t\treturn {\n\t\t\t\tstatistics : consent,\n\t\t\t\tmarketing  : consent,\n\t\t\t\tpreferences: consent,\n\t\t\t\tnecessary  : true,\n\t\t\t}\n\t\t}\n\n\t\t// Paid version\n\t\tconsent = wpm.getCookie(\"hu-consent\")\n\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"Cookie Compliance CMP (by hu-manity.co) consent detected\")\n\n\t\t\tconsent = JSON.parse(consent)\n\n\t\t\treturn {\n\t\t\t\tstatistics : consent.categories[\"3\"] ?? true,\n\t\t\t\tmarketing  : consent.categories[\"4\"] ?? true,\n\t\t\t\tpreferences: consent.categories[\"2\"] ?? true,\n\t\t\t\tnecessary  : consent.categories[\"1\"] ?? true,\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\t/**\n\t * Cookie Compliance by hu-manity.co (free and pro)\n\t * If visitor accepts cookies in Cookie Notice by hu-manity.co unblock the scripts (free version)\n\t * https://wordpress.org/support/topic/events-on-consent-change/#post-15202792\n\t */\n\tloadEventListeners: () => {\n\t\tdocument.addEventListener(\"set-consent.hu\", (e) => {\n\n\t\t\t// Validate that e.detail.categories exists\n\t\t\tif (!e.detail.categories) return\n\n\t\t\tlet data = {\n\t\t\t\tstatistics : e.detail.categories[\"3\"],\n\t\t\t\tmarketing  : e.detail.categories[\"4\"],\n\t\t\t\tpreferences: e.detail.categories[\"2\"],\n\t\t\t\tnecessary  : e.detail.categories[\"1\"],\n\t\t\t}\n\n\t\t\tpmw.consent.api.updateSelectively(data)\n\t\t}, true)\n\t},\n}\n","/**\n * Cookie Script\n * https://wordpress.org/plugins/cookie-script-com/\n */\nexport const cookieScript = {\n\n\t/**\n\t * Get the Cookie Script cookie.\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\tlet consent = wpm.getCookie(\"CookieScriptConsent\")\n\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"Cookie Script CMP consent detected\")\n\n\t\t\tconsent = JSON.parse(consent)\n\n\t\t\t// if cookie.categories is not an array, but a string, parse it\n\t\t\tif (typeof consent.categories === \"string\") consent.categories = JSON.parse(consent.categories)\n\n\t\t\tif (\n\t\t\t\tconsent.action\n\t\t\t\t&& consent.action === \"reject\"\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tstatistics : false,\n\t\t\t\t\tmarketing  : false,\n\t\t\t\t\tpreferences: false,\n\t\t\t\t\tnecessary  : true,\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tconsent.categories\n\t\t\t\t&& consent.categories.length > 0\n\t\t\t) {\n\n\t\t\t\treturn {\n\t\t\t\t\tstatistics : consent.categories.indexOf(\"performance\") >= 0,\n\t\t\t\t\tmarketing  : consent.categories.indexOf(\"targeting\") >= 0,\n\t\t\t\t\tpreferences: consent.categories.indexOf(\"functionality\") >= 0,\n\t\t\t\t\tnecessary  : true,\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tstatistics : true,\n\t\t\t\tmarketing  : true,\n\t\t\t\tpreferences: true,\n\t\t\t\tnecessary  : true,\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\t/**\n\t * Cookie Script\n\t * If visitor accepts cookies in Cookie Script unblock the scripts\n\t * https://support.cookie-script.com/article/20-custom-events\n\t */\n\n\tloadEventListeners: () => {\n\n\t\tdocument.addEventListener(\"CookieScriptAccept\", e => {\n\n\t\t\tlet data = {\n\t\t\t\tstatistics : e.detail.categories.includes(\"performance\"),\n\t\t\t\tmarketing  : e.detail.categories.includes(\"targeting\"),\n\t\t\t\tpreferences: e.detail.categories.includes(\"functionality\"),\n\t\t\t\tnecessary  : true,\n\t\t\t}\n\n\t\t\tpmw.consent.api.updateSelectively(data)\n\t\t}, true)\n\n\t\tdocument.addEventListener(\"CookieScriptAcceptAll\", () => {\n\t\t\tpmw.consent.api.acceptAll()\n\t\t}, true)\n\n\t\tdocument.addEventListener(\"CookieScriptReject\", () => {\n\t\t\tpmw.consent.api.revokeAll()\n\t\t}, true)\n\t},\n}\n","export const iubenda = {\n\n\t/**\n\t * Get the Iubenda cookie.\n\t * Then parse it and return the analytics and marketing values.\n\t *\n\t * 1 = Necessary\n\t * 2 = Functionality\n\t * 3 = n/a\n\t * 4 = Measurement\n\t * 5 = Marketing\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t * */\n\tgetConsent: () => {\n\n\t\t// Regex that matches _iub_cs-59340121 but not _iub_cs-59340121-granular\n\n\t\tlet regex = new RegExp(\"_iub_cs-\\\\d{8,}\")\n\n\t\t// let cookie = wpm.getCookieThatContainsRegex(\"_iub_cs-\")\n\t\tlet consent = wpm.getCookieThatContainsRegex(regex)\n\n\t\t// Parse the cookie into an object\n\t\t// The structure looks like this:\n\t\t// %7B%22timestamp%22%3A%222023-07-11T06%3A43%3A40.886Z%22%2C%22version%22%3A%221.48.0%22%2C%22purposes%22%3A%7B%221%22%3Atrue%2C%222%22%3Atrue%2C%224%22%3Atrue%2C%225%22%3Atrue%7D%2C%22id%22%3A63374232%7D\n\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"Iubenda CMP consent detected\")\n\n\t\t\tconsent = decodeURIComponent(consent)\n\n\t\t\t// Now the structure looks like this:\n\t\t\t// _iub_cs-63374232={\"timestamp\":\"2023-07-11T06:43:40.886Z\",\"version\":\"1.48.0\",\"purposes\":{\"1\":true,\"2\":true,\"4\":true,\"5\":true},\"id\":63374232}\n\t\t\t// Remove the _iub_cs- prefix until and with the equal sign. The rest is the object we want to keep and parse.\n\t\t\tconsent = consent.replace(/_iub_cs-.*=/, \"\")\n\n\t\t\tconsent = JSON.parse(consent)\n\n\t\t\t/**\n\t\t\t * 1: necessary\n\t\t\t * 2: functionality\n\t\t\t * 3: experience\n\t\t\t * 4: measurement\n\t\t\t * 5: marketing\n\t\t\t */\n\n\t\t\treturn {\n\t\t\t\tstatistics : consent.purposes[\"4\"] ?? true,\n\t\t\t\tmarketing  : consent.purposes[\"5\"] ?? true,\n\t\t\t\tpreferences: consent.purposes[\"2\"] ?? true,\n\t\t\t\tnecessary  : consent.purposes[\"1\"] ?? true,\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\t/**\n\t * Iubenda CMP has no intelligent way of letting us know when the user has clicked the \"Accept\" button.\n\t * We have to resort to a MutationObserver to listen for changes in the DOM.\n\t * This is also why we have to reload the page when the user clicks the \"Accept\" button.\n\t * Reading the cookies on the same page will not work because the cookies are not set in time when the observer is triggered.\n\t */\n\tloadEventListeners: () => {\n\n\t\t// If the Iubenda CMP is not present, there's no need to continue\n\t\tif (!window._iub) return\n\n\t\twpm.consent.cmpConsentClickObserver({\n\t\t\tids    : [\"iubFooterBtn\"],\n\t\t\tclasses: [\"iubenda-cs-reject-btn\", \"iubenda-cs-accept-btn\"],\n\t\t})\n\t},\n}\n\n\n","/**\n * GDPR Cookie Compliance Plugin by Moove Agency\n * https://wordpress.org/plugins/gdpr-cookie-compliance/\n *\n * TODO write documentation on how to set up the plugin in order for this to work properly\n */\nexport const mooveCookieCompliance = {\n\n\t/**\n\t * Get the GDPR Cookie Compliance Plugin by Moove Agency cookie.\n\t *\n\t * example cookie: %7B%22strict%22%3A%221%22%2C%22thirdparty%22%3A%220%22%2C%22advanced%22%3A%221%22%7D\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\tlet consent = wpm.getCookie(\"moove_gdpr_popup\")\n\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"GDPR Cookie Compliance CMP (by Moove Agency) consent detected\")\n\n\t\t\tconsent = JSON.parse(consent)\n\n\t\t\treturn {\n\t\t\t\tstatistics: consent.thirdparty !== \"0\",\n\t\t\t\tmarketing : consent.advanced !== \"0\",\n\t\t\t\tpreferences: true,\n\t\t\t\tnecessary: consent.strict !== \"0\"\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\tloadEventListeners: () => {\n\n\t\tif (!window.moove_frontend_gdpr_scripts) return\n\n\t\t// If the button with class moove-gdpr-infobar-allow-all is clicked reload the page\n\t\tconst allowAllButton = document.querySelector(\".mgbutton\")\n\t\tif (allowAllButton) {\n\t\t\tallowAllButton.addEventListener(\"click\", () => {\n\t\t\t\t/**\n\t\t\t\t * Don't reload the page! (CMPs might emit the events on each page load, leading to a page reload loop)\n\t\t\t\t * Only try to save the consent in the PMW.\n\t\t\t\t */\n\t\t\t}, true)\n\t\t}\n\n\t\twpm.consent.cmpConsentClickObserver({classes: [\"moove-gdpr-infobar-allow-all\", \"moove-gdpr-modal-allow-all\", \"moove-gdpr-modal-save-settings\"]})\n\t},\n}\n","/**\n * Termly\n *\n * https://www.termly.io/\n *\n * TODO: Inform the developers. The cookie works with the new Google categories. However, the event listener is using different categories.\n */\nexport const termly = {\n\n\t/**\n\t * Get the Termly cookie.\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\t// Get Termly cookies from localStorage from termly_gtm_template_default_consents for ad_storage and for analytics_storage\n\t\t// let consent = `{\"ad_personalization\":\"granted\",\"ad_storage\":\"granted\",\"ad_user_data\":\"granted\",\"analytics_storage\":\"denied\",\"functionality_storage\":\"granted\",\"personalization_storage\":\"granted\",\"security_storage\":\"granted\",\"social_storage\":\"granted\",\"unclassified_storage\":\"granted\"}`\n\t\tlet consent = localStorage.getItem(\"termly_gtm_template_default_consents\")\n\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"Termly CMP consent detected\")\n\n\t\t\tconsent = JSON.parse(consent)\n\n\t\t\treturn {\n\t\t\t\tstatistics : consent.analytics_storage !== \"denied\",\n\t\t\t\tmarketing  : consent.ad_storage !== \"denied\",\n\t\t\t\tpreferences: consent.functionality_storage !== \"denied\",\n\t\t\t\tnecessary  : consent.security_storage !== \"denied\",\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t},\n\n\t/**\n\t * Termly Event Listeners\n\t *\n\t * The event listener is within /sources/termly_web/resource-blocker/src/constants/lifeCycle.js\n\t *\n\t * statistics = analytics\n\t * marketing = advertising\n\t * preferences = performance\n\t * necessary = essential\n\t */\n\tloadEventListeners: () => {\n\n\t\tdocument.addEventListener(\"termlyConsent\", function (e) {\n\n\t\t\t// const consent = e.detail\n\n\t\t\tconst consent = [\n\t\t\t\t\"analytics\",\n\t\t\t\t\"advertising\",\n\t\t\t\t\"performance\",\n\t\t\t]\n\n\t\t\tif (\n\t\t\t\tconsent.includes(\"analytics\")\n\t\t\t\t&& consent.includes(\"advertising\")\n\t\t\t\t&& consent.includes(\"performance\")\n\t\t\t) {\n\t\t\t\tpmw.consent.api.acceptAll()\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!consent.includes(\"analytics\")\n\t\t\t\t&& !consent.includes(\"advertising\")\n\t\t\t\t&& !consent.includes(\"performance\")\n\t\t\t) {\n\t\t\t\tpmw.consent.api.revokeAll()\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tpmw.consent.api.updateSelectively({\n\t\t\t\tstatistics : consent.includes(\"analytics\"),\n\t\t\t\tmarketing  : consent.includes(\"advertising\"),\n\t\t\t\tpreferences: consent.includes(\"performance\"),\n\t\t\t\tnecessary  : consent.includes(\"essential\"),\n\t\t\t})\n\n\t\t}, true)\n\t},\n}\n","/**\n * Usercentrics\n *\n * https://usercentrics.com/\n * https://docs.usercentrics.com/#/cmp-v2-ui-api\n * https://docs.usercentrics.com/#/cmp-v2-ui-api?id=getservicesbaseinfo\n *\n * Although Usercentrics adopts some of the Google consent categories,\n * they don't process and save the \"preferences\" category.\n */\nexport const usercentrics = {\n\n\t/**\n\t * Get the Usercentrics cookie.\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\tlet consent = window.localStorage.getItem(\"ucData\")\n\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"Usercentrics CMP consent detected\")\n\n\t\t\tconsent = JSON.parse(consent).gcm\n\n\t\t\treturn {\n\t\t\t\tstatistics : consent.analyticsStorage !== \"denied\",\n\t\t\t\tmarketing  : consent.adStorage !== \"denied\",\n\t\t\t\tpreferences: true,\n\t\t\t\tnecessary  : true,\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\t/**\n\t * Usercentrics Event Listeners\n\t *\n\t * https://docs.usercentrics.com/#/v2-events?id=usage-as-window-event\n\t */\n\tloadEventListeners: () => {\n\n\t\t// ucCategory: {functional: true, marketing: true, essential: true, customcategory03: true}\n\t\t// statistics seem to be customcategory03 on their website.\n\t\t// document.addEventListener(\"ucEvent\", e => {\n\t\t// \tif (e.detail && e.detail.event == \"consent_status\") {\n\t\t// \t\t// check for consent status of service \"Google Ads Remarketing\"\n\t\t// \t\tif (e.detail[\"Google Ads Remarketing\"] === true) {\n\t\t// \t\t\tpmw.console.log(\"Google Ads Remarketing has consent\")\n\t\t// \t\t} else {\n\t\t// \t\t\tpmw.console.log(\"Google Ads Remarketing has no consent\")\n\t\t// \t\t}\n\t\t// \t}\n\t\t// }, true)\n\n\t\t// https://docs.usercentrics.com/#/v2-events?id=uc_ui_cmp_event\n\t\tdocument.addEventListener(\"UC_UI_CMP_EVENT\", event => {\n\n\t\t\tif (event.detail.type === \"ACCEPT_ALL\") pmw.consent.api.acceptAll()\n\n\t\t\tif (event.detail.type === \"DENY_ALL\") pmw.consent.api.revokeAll()\n\n\t\t\tif (event.detail.type === \"SAVE\") {\n\n\t\t\t\tlet consent = JSON.parse(e.currentTarget.localStorage.ucData).gcm\n\n\t\t\t\tif (consent) {\n\t\t\t\t\tpmw.consent.api.updateSelectively({\n\t\t\t\t\t\tstatistics : consent.analyticsStorage === \"granted\",\n\t\t\t\t\t\tmarketing  : consent.adStorage === \"granted\",\n\t\t\t\t\t\tpreferences: true,\n\t\t\t\t\t\tnecessary  : true,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}, true)\n\t},\n}\n","/**\n * WP AutoTerms\n * https://wordpress.org/plugins/auto-terms-of-service-and-privacy-policy/\n */\nexport const wpAutoTerms = {\n\n\t/**\n\t * Get the WP AutoTerms cookie.\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\tlet consent = wpm.getCookie(\"wpautoterms-cookies-notice\")\n\n\t\tif (consent && consent === \"1\") {\n\n\t\t\tpmw.console.log(\"WP AutoTerms CMP consent detected\")\n\n\t\t\treturn {\n\t\t\t\tstatistics : true,\n\t\t\t\tmarketing  : true,\n\t\t\t\tpreferences: true,\n\t\t\t\tnecessary  : true,\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\tloadEventListeners: () => {\n\n\t\t// Add an event listener to the button with the class wpautoterms-notice-close\n\t\tlet button = document.querySelectorAll(\".wpautoterms-notice-close\")[0]\n\n\t\tif (button) {\n\n\t\t\tbutton.addEventListener(\"click\", event => {\n\t\t\t\tpmw.consent.api.acceptAll()\n\t\t\t}, true)\n\t\t}\n\t}\n}\n","/**\n * WP Consent API\n * https://github.com/rlankhorst/wp-consent-level-api\n * https://wordpress.org/plugins/wp-consent-api/\n *\n * TODO: add check return for necessary and preferences\n */\nexport const wpConsentApi = {\n\n\t/**\n\t * Get the WP Consent API cookie.\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\t// If a at least one cookie exists that starts with wp_consent_ then the visitor has chosen\n\t\tlet consent = wpm.getCookieThatContainsRegex(/^wp_consent_/)\n\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"WP Consent API CMP consent detected\")\n\n\t\t\treturn {\n\t\t\t\tstatistics : wpm.getCookie(\"wp_consent_statistics\") !== \"deny\",\n\t\t\t\tmarketing  : wpm.getCookie(\"wp_consent_marketing\") !== \"deny\",\n\t\t\t\tpreferences: wpm.getCookie(\"wp_consent_preferences\") !== \"deny\",\n\t\t\t\tnecessary  : wpm.getCookie(\"wp_consent_functional\") !== \"deny\",\n\t\t\t}\n\n\t\t\treturn null\n\t\t}\n\t},\n\n\t/**\n\t * WP Consent API\n\t * https://github.com/rlankhorst/wp-consent-level-api\n\t * https://wordpress.org/plugins/wp-consent-api/\n\t */\n\tloadEventListeners: () => {\n\n\t\tdocument.addEventListener(\"wp_listen_for_consent_change\", e => {\n\n\t\t\tconst consent = e.detail\n\n\t\t\tlet data = {\n\t\t\t\tstatistics : consent[\"statistics\"] !== \"deny\",\n\t\t\t\tmarketing  : consent[\"marketing\"] !== \"deny\",\n\t\t\t\tpreferences: consent[\"preferences\"] !== \"deny\",\n\t\t\t\tnecessary  : consent[\"functional\"] !== \"deny\",\n\t\t\t}\n\n\t\t\tpmw.consent.api.updateSelectively(data)\n\t\t}, true)\n\t},\n}\n","/**\n * WP Cookie Consent\n *\n * Source: https://wordpress.org/plugins/gdpr-cookie-consent/\n */\n\nexport const wpCookieConsent = {\n\n\t/**\n\t * Get the WP Cookie Consent cookie.\n\t *\n\t * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean}|null}\n\t */\n\tgetConsent: () => {\n\n\t\tlet consent = wpm.getCookie(\"wpl_user_preference\")\n\n\t\tif (consent) {\n\n\t\t\tpmw.console.log(\"WP Cookie Consent CMP (by wpeka.com) consent detected\")\n\n\t\t\tconsent = JSON.parse(consent)\n\n\t\t\treturn {\n\t\t\t\tstatistics : consent.analytics !== \"no\",\n\t\t\t\tmarketing  : consent.marketing !== \"no\",\n\t\t\t\tpreferences: consent.preferences !== \"no\",\n\t\t\t\tnecessary  : consent.necessary !== \"no\",\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\t/**\n\t * WP Cookie Consent Event Listeners\n\t *\n\t * Source: https://club.wpeka.com/docs/wp-cookie-consent/settings/integrating-your-actions/\n\t * Support ticket: https://wordpress.org/support/topic/gdprcookieconsentonaccept-event-never-triggered/\n\t */\n\tloadEventListeners: () => {\n\n\t\t// WP Cookie Consent emits a custom event called GdprCookieConsentOnAccept\n\t\t// The event doesn't work. Probably it is not bubbling up.\n\t\t// document.addEventListener(\"GdprCookieConsentOnAccept\", function (e) {\n\t\t// \tconsole.log(\"GdprCookieConsentOnAccept\", e.detail)\n\t\t// }, true)\n\n\t\tconst buttonIds = [\n\t\t\t\"cookie_action_accept\",\n\t\t\t\"cookie_action_reject\",\n\t\t]\n\n\t\tbuttonIds.forEach((buttonId) => {\n\t\t\tconst buttonElement = document.getElementById(buttonId)\n\n\t\t\tif (buttonElement) {\n\t\t\t\tbuttonElement.addEventListener(\"click\", () => {\n\t\t\t\t\t/**\n\t\t\t\t\t * Don't reload the page! (CMPs might emit the events on each page load, leading to a page reload loop)\n\t\t\t\t\t * Only try to save the consent in the PMW.\n\t\t\t\t\t */\n\t\t\t\t}, true)\n\t\t\t}\n\t\t})\n\n\t},\n}\n","/**\n * Consent Management\n **/\n\n/**\n * Load modules\n */\nimport cmps from \"./cmps.mjs\"\n\n/**\n * Initialize and set default values\n */\nexport let settings = {\n\tcategories      : {\n\t\tstatistics : true,\n\t\tmarketing  : true,\n\t\tpreferences: true,\n\t\tnecessary  : true, // Necessary cookies are always allowed\n\t},\n\tvisitorHasChosen: false,\n\n\tget: (data = null) => {\n\n\t\tif (data === null) {\n\t\t\treturn settings\n\t\t}\n\n\t\tlet result = {}\n\n\t\tfor (let key of data) {\n\t\t\tresult[key] = settings[key]\n\t\t}\n\n\t\treturn result\n\t},\n\n\tset: (data) => {\n\t\tfor (let key in data) {\n\t\t\tsettings[key] = data[key]\n\t\t}\n\t},\n}\n\n/**\n * Load the consent management\n *\n * @returns {Promise<void>}\n * @public\n */\nexport const load = async () => {\n\n\t/** Load the event listeners for each CMP */\n\tloadCmpEventListeners()\n\n\t/** Set the default values */\n\t// console.log(\"setDefaultValues\")\n\tsetExplicitConsentModeDefaults()\n\n\t/**\n\t * Get the consent values from the cookies\n\t * */\n\n\tloadConsentFromCmps()\n\n\t/** Unlocks countries in allowed regions */\n\tawait countryUnlock()\n\n\t/** Update the pixel consent for pixel type CMPs */\n\t// wpm.scriptTagObserver.observe(document.head, {childList: true, subtree: true})\n\t// jQuery(document).on(\"DOMContentLoaded\", () => wpm.scriptTagObserver.disconnect())\n\n\t/** Trigger the consent management loaded event */\n\tloadTrigger()\n}\n\nconst loadConsentFromCmps = () => {\n\tlet cmpConsent = getConsentFromCmps()\n\n\tif (cmpConsent) {\n\t\twpm.consent.categories.set(cmpConsent)\n\t\twpm.consent.settings.set({visitorHasChosen: true})\n\t}\n}\n\n/**\n * Load the event listeners for each CMP\n *\n * @returns {void}\n * @private\n */\nconst loadCmpEventListeners = () => {\n\tfor (let cmp of cmps) {\n\n\t\tif (typeof cmp.loadEventListeners !== \"function\") {\n\t\t\tcontinue\n\t\t}\n\t\tcmp.loadEventListeners()\n\t}\n}\n\n/**\n * Set the default values\n *\n * @returns {void}\n * @private\n */\nconst setExplicitConsentModeDefaults = () => {\n\n\t/**\n\t * Setup defaults\n\t *\n\t * TODO: Extend with country specific settings.\n\t *\n\t * If explicit consent mode is active,\n\t * and no consent has been given yet,\n\t * and there are regions set in the settings,\n\t * then set the consent values accordingly.\n\t * (if a country is set then only set the consent to false if the visitor is from that country)\n\t * Otherwise set the consent values to false.\n\t */\n\n\tlet explicitConsent = !wpm.consent.explicitConsentModeActive()\n\n\twpm.consent.categories.set({\n\t\tstatistics : explicitConsent,\n\t\tmarketing  : explicitConsent,\n\t\tpreferences: explicitConsent,\n\t\tnecessary  : true,\n\t})\n}\n\n/**\n * Check if PMW is in explicit consent mode\n *\n * @returns {boolean}\n * @private\n */\nexport const explicitConsentModeActive = () => wpmDataLayer?.general?.consent_management?.explicit_consent\n\n/**\n * Returns the consent values\n *\n * @returns any\n * @public\n * */\nwpm.getConsentValues = () => wpm.consent.settings.get()\n\n/**\n * Set the consent values\n *\n * @param {Object} consentValues\n * @param {boolean} consentValues.statistics\n * @param {boolean} consentValues.marketing\n * @param {boolean} consentValues.preferences\n * @param {boolean} consentValues.necessary\n *\n * @returns {void}\n * @public\n */\n// export const setCategories = ({statistics, marketing, preferences, necessary}) => {\nexport const categories = {\n\n\tset: ({\n\t\t\t  statistics = wpm.consent.settings.get().statistics,\n\t\t\t  marketing = wpm.consent.settings.get().marketing,\n\t\t\t  preferences = wpm.consent.settings.get().preferences,\n\t\t\t  necessary = wpm.consent.settings.get().necessary,\n\t\t  }) => {\n\t\tsettings.categories.statistics  = statistics\n\t\tsettings.categories.marketing   = marketing\n\t\tsettings.categories.preferences = preferences\n\t\tsettings.categories.necessary   = necessary\n\t},\n\n\tget: (data = null) => {\n\n\t\tif (data === null) {\n\t\t\treturn settings.categories\n\t\t}\n\n\t\tlet result = {}\n\n\t\tfor (let key of data) {\n\t\t\tresult[key] = settings.categories[key]\n\t\t}\n\n\t\treturn result\n\t},\n}\n\n/**\n * Get the consent values from various cookies\n *\n * @returns {{statistics: boolean, marketing: boolean, preferences: boolean, necessary: boolean} | null}\n * - statistics: Boolean - Indicates if consent has been given for statistics cookies\n * - marketing: Boolean - Indicates if consent has been given for marketing cookies\n * - preferences: Boolean - Indicates if consent has been given for preference cookies\n * - necessary: Boolean - Indicates if consent has been given for necessary cookies\n * @private\n */\nconst getConsentFromCmps = () => {\n\n\t/**\n\t * PMW Cookie Consent\n\t *\n\t * The PMW only saves the pmw_cookie_consent if the API is used.\n\t * This means that always the CMP cookie is read first, unless:\n\t * - Our CMP event listeners has been triggered and use our API to set the new consent values.\n\t * - A CMP decides to start using our API. (then their cookie will be ignored.\n\t *   This is especially useful for Borlabs and RCB where we use truethy values for consent.\n\t *\n\t * TODO: Maybe store in PMW's data store. However, we can't set a duration there. Store in the data store if no duration is needed.\n\t */\n\n\tconst storageKey = \"pmw_cookie_consent\"\n\n\tlet consent = wpm.retrieveData(storageKey, true) || wpm.getCookie(storageKey)\n\n\tif (consent) {\n\n\t\t// Depending of if the value comes from window.localStorage or a cookie,\n\t\t// it might be a string or an object\n\t\tconsent = typeof consent === \"object\" ? consent : JSON.parse(consent)\n\n\t\tconsent = consentBackwardsCompatibilityUpdate(consent)\n\n\t\treturn consent\n\t}\n\n\t/**\n\t * Get the consent values from the CMPs\n\t */\n\tfor (let cmp of cmps) {\n\n\t\tif (typeof cmp.getConsent !== \"function\") {\n\t\t\tcontinue\n\t\t}\n\n\t\tlet consent = cmp.getConsent()\n\n\t\tif (!consent) {\n\t\t\tcontinue\n\t\t}\n\n\t\treturn consent\n\t}\n\n\treturn null\n}\n\n/**\n * This is to ensure backwards compatibility for consent that was set before the change\n * If key consent.analytics exists, rewrite it to consent.statistics\n *\n * @param consent\n * @return {Object}\n */\nconst consentBackwardsCompatibilityUpdate = (consent) => {\n\n\tif (!consent.hasOwnProperty(\"analytics\") && !consent.hasOwnProperty(\"ads\")) return consent\n\n\tif (consent.hasOwnProperty(\"analytics\")) {\n\t\tconsent.statistics = consent.analytics\n\t\tdelete consent.analytics\n\t}\n\n\tif (consent.hasOwnProperty(\"ads\")) {\n\t\tconsent.marketing = consent.ads\n\t\tdelete consent.ads\n\t}\n\n\tconsent.preferences = true\n\tconsent.necessary   = true\n\n\treturn consent\n}\n\n/**\n * TODO: Extend with country specific settings.\n *\n * Unlock countries in allowed regions\n *\n * If explicit consent mode is active,\n * and no consent has been given yet,\n * and there are regions set in the settings,\n * then set the consent values accordingly.\n * If a country is set then only set the consent to false\n * if the visitor is from that country.\n * Otherwise set the consent values to true.\n *\n * @returns {Promise<void>}\n * @private\n *\n * TODO: Verify all the conditions and calls\n */\nconst countryUnlock = async () => {\n\n\t// Return if explicit consent mode is not active\n\tif (!explicitConsentModeActive()) return\n\t// console.log(\"countryUnlock explicit_consent\", isPmwInExplicitConsentMode)\n\n\t// Return if the visitor has already chosen\n\tif (wpm.consent.settings.get().visitorHasChosen) return\n\t// console.log(\"countryUnlock visitorHasChosen\", wpmConsentValues.visitorHasChosen)\n\n\t// Return if there are no regions set in the settings\n\tif (!wpmDataLayer?.general?.consent_management?.restricted_regions) return\n\t// console.log(\"countryUnlock regions\", wpmDataLayer?.general?.consent_management?.restricted_regions)\n\n\tconst browserGeo = await wpm.getBrowserGeo()\n\n\t// If the country is in the list of restricted countries, then set the consent values to false\n\t// else set the consent values to true\n\tif (browserIsInRestrictedRegion(browserGeo)) {\n\n\t\tpmw.console.log(`The country and/or region is restricted. Set the consent values to false and block the pixels.`, browserGeo)\n\t\twpm.consent.categories.set({statistics: false, marketing: false, preferences: false, necessary: true})\n\t\treturn\n\t}\n\n\tpmw.console.log(`The country and/or region is not restricted. Set the consent values to true and fire the pixels.`, browserGeo)\n\twpm.consent.categories.set({statistics: true, marketing: true, preferences: true, necessary: true})\n}\n\nconst browserIsInRestrictedRegion = (browserGeo) => {\n\n\tif (browserGeo === null) {\n\t\treturn true\n\t}\n\n\tif (browserGeo.countryCode && wpmDataLayer?.general?.consent_management?.restricted_regions.includes(browserGeo.countryCode)) {\n\t\treturn true\n\t}\n\n\tif (browserGeo.regionCode && wpmDataLayer?.general?.consent_management?.restricted_regions.includes(browserGeo.regionCode)) {\n\t\treturn true\n\t}\n\n\treturn false\n}\n\n/**\n *\n * TODO: Remove pixel based features once support for Borlabs and Real Cookie Banner is fully dropped\n */\nexport const canPixelBeFired = (category, pixelName) => {\n\n\tif (wpm.consent.categories.get()[category]) {\n\t\tpmw.console.log(`The category ${category} has been approved. Loading the ${pixelName} pixel.`)\n\t\treturn true\n\t}\n\n\tlogSuppressedPixel(category, pixelName)\n\treturn false\n}\n\nexport const logSuppressedPixel = (category, pixelName) => {\n\n\tlet mode = explicitConsentModeActive() ? \"explicit\" : \"implicit\"\n\n\tconsole.log(`Pixel Manager: The pixel has not loaded because you have not given consent for it yet. - mode: ${mode}, category: ${category}, pixel: ${pixelName}`)\n}\n\n/**\n * Trigger the consent management loaded event\n *\n * @returns {void}\n * @private\n */\nconst loadTrigger = () => {\n\n\t// Trigger an event once the PMW consent management has been loaded\n\tdocument.dispatchEvent(new Event(\"pmw_cookie_consent_management_loaded\"))\n\tdocument.dispatchEvent(new Event(\"pmwCookieConsentManagementLoaded\"))\n\n\tpmw.console.log(\"Loaded consent category settings: \", wpm.consent.categories.get())\n}\n\n/**\n * Reload the page when the user clicks a cosent button\n *\n * @param ids\n * @param classes\n * @returns {void}\n * @public\n */\nexport const cmpConsentClickObserver = ({ids = [], classes = []}) => {\n\n\t// if buttonClasses don't have a dot in front of them, add it\n\tclasses = classes.map(buttonClass => buttonClass.startsWith(\".\") ? buttonClass : \".\" + buttonClass)\n\n\tconst observer = new MutationObserver((mutationsList, observer) => {\n\t\t// Look through all mutations that just occured\n\t\tfor (let mutation of mutationsList) {\n\t\t\t// If the addedNodes property has one or more nodes\n\t\t\tif (mutation.addedNodes.length) {\n\n\t\t\t\tif (classes.length > 0) {\n\n\t\t\t\t\tconst elements = document.querySelectorAll(classes.join(\", \"))\n\n\t\t\t\t\telements.forEach(element => {\n\t\t\t\t\t\telement.addEventListener(\"click\", () => {\n\t\t\t\t\t\t\tlocation.reload()\n\t\t\t\t\t\t})\n\t\t\t\t\t\tobserver.disconnect()\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tif (ids.length > 0) {\n\n\t\t\t\t\tids.forEach(buttonId => {\n\t\t\t\t\t\tconst button = document.getElementById(buttonId)\n\t\t\t\t\t\tif (button) {\n\t\t\t\t\t\t\tbutton.addEventListener(\"click\", () => {\n\t\t\t\t\t\t\t\tlocation.reload()\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t// Once we have added the click event listener, there's no need to observe anymore\n\t\t\t\t\t\t\tobserver.disconnect()\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n\n\tobserver.observe(document.body, {childList: true, subtree: true})\n}\n","/**\n * Hotjar loader\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n",null,"// https://stackoverflow.com/a/70870895/4688612\nexport const getLocationByTimeZone = () => {\n\n\tconst timezones = {\n\t\t\"Africa/Abidjan\"                : [\"CI\", \"BF\", \"GH\", \"GM\", \"GN\", \"ML\", \"MR\", \"SH\", \"SL\", \"SN\", \"TG\"],\n\t\t\"Africa/Accra\"                  : [\"GH\"],\n\t\t\"Africa/Addis_Ababa\"            : [\"ET\"],\n\t\t\"Africa/Algiers\"                : [\"DZ\"],\n\t\t\"Africa/Asmara\"                 : [\"ER\"],\n\t\t\"Africa/Asmera\"                 : [\"ER\"],\n\t\t\"Africa/Bamako\"                 : [\"ML\"],\n\t\t\"Africa/Bangui\"                 : [\"CF\"],\n\t\t\"Africa/Banjul\"                 : [\"GM\"],\n\t\t\"Africa/Bissau\"                 : [\"GW\"],\n\t\t\"Africa/Blantyre\"               : [\"MW\"],\n\t\t\"Africa/Brazzaville\"            : [\"CG\"],\n\t\t\"Africa/Bujumbura\"              : [\"BI\"],\n\t\t\"Africa/Cairo\"                  : [\"EG\"],\n\t\t\"Africa/Casablanca\"             : [\"MA\"],\n\t\t\"Africa/Ceuta\"                  : [\"ES\"],\n\t\t\"Africa/Conakry\"                : [\"GN\"],\n\t\t\"Africa/Dakar\"                  : [\"SN\"],\n\t\t\"Africa/Dar_es_Salaam\"          : [\"TZ\"],\n\t\t\"Africa/Djibouti\"               : [\"DJ\"],\n\t\t\"Africa/Douala\"                 : [\"CM\"],\n\t\t\"Africa/El_Aaiun\"               : [\"EH\"],\n\t\t\"Africa/Freetown\"               : [\"SL\"],\n\t\t\"Africa/Gaborone\"               : [\"BW\"],\n\t\t\"Africa/Harare\"                 : [\"ZW\"],\n\t\t\"Africa/Johannesburg\"           : [\"ZA\", \"LS\", \"SZ\"],\n\t\t\"Africa/Juba\"                   : [\"SS\"],\n\t\t\"Africa/Kampala\"                : [\"UG\"],\n\t\t\"Africa/Khartoum\"               : [\"SD\"],\n\t\t\"Africa/Kigali\"                 : [\"RW\"],\n\t\t\"Africa/Kinshasa\"               : [\"CD\"],\n\t\t\"Africa/Lagos\"                  : [\"NG\", \"AO\", \"BJ\", \"CD\", \"CF\", \"CG\", \"CM\", \"GA\", \"GQ\", \"NE\"],\n\t\t\"Africa/Libreville\"             : [\"GA\"],\n\t\t\"Africa/Lome\"                   : [\"TG\"],\n\t\t\"Africa/Luanda\"                 : [\"AO\"],\n\t\t\"Africa/Lubumbashi\"             : [\"CD\"],\n\t\t\"Africa/Lusaka\"                 : [\"ZM\"],\n\t\t\"Africa/Malabo\"                 : [\"GQ\"],\n\t\t\"Africa/Maputo\"                 : [\"MZ\", \"BI\", \"BW\", \"CD\", \"MW\", \"RW\", \"ZM\", \"ZW\"],\n\t\t\"Africa/Maseru\"                 : [\"LS\"],\n\t\t\"Africa/Mbabane\"                : [\"SZ\"],\n\t\t\"Africa/Mogadishu\"              : [\"SO\"],\n\t\t\"Africa/Monrovia\"               : [\"LR\"],\n\t\t\"Africa/Nairobi\"                : [\"KE\", \"DJ\", \"ER\", \"ET\", \"KM\", \"MG\", \"SO\", \"TZ\", \"UG\", \"YT\"],\n\t\t\"Africa/Ndjamena\"               : [\"TD\"],\n\t\t\"Africa/Niamey\"                 : [\"NE\"],\n\t\t\"Africa/Nouakchott\"             : [\"MR\"],\n\t\t\"Africa/Ouagadougou\"            : [\"BF\"],\n\t\t\"Africa/Porto-Novo\"             : [\"BJ\"],\n\t\t\"Africa/Sao_Tome\"               : [\"ST\"],\n\t\t\"Africa/Timbuktu\"               : [\"ML\"],\n\t\t\"Africa/Tripoli\"                : [\"LY\"],\n\t\t\"Africa/Tunis\"                  : [\"TN\"],\n\t\t\"Africa/Windhoek\"               : [\"NA\"],\n\t\t\"America/Adak\"                  : [\"US\"],\n\t\t\"America/Anchorage\"             : [\"US\"],\n\t\t\"America/Anguilla\"              : [\"AI\"],\n\t\t\"America/Antigua\"               : [\"AG\"],\n\t\t\"America/Araguaina\"             : [\"BR\"],\n\t\t\"America/Argentina/Buenos_Aires\": [\"AR\"],\n\t\t\"America/Argentina/Catamarca\"   : [\"AR\"],\n\t\t\"America/Argentina/Cordoba\"     : [\"AR\"],\n\t\t\"America/Argentina/Jujuy\"       : [\"AR\"],\n\t\t\"America/Argentina/La_Rioja\"    : [\"AR\"],\n\t\t\"America/Argentina/Mendoza\"     : [\"AR\"],\n\t\t\"America/Argentina/Rio_Gallegos\": [\"AR\"],\n\t\t\"America/Argentina/Salta\"       : [\"AR\"],\n\t\t\"America/Argentina/San_Juan\"    : [\"AR\"],\n\t\t\"America/Argentina/San_Luis\"    : [\"AR\"],\n\t\t\"America/Argentina/Tucuman\"     : [\"AR\"],\n\t\t\"America/Argentina/Ushuaia\"     : [\"AR\"],\n\t\t\"America/Aruba\"                 : [\"AW\"],\n\t\t\"America/Asuncion\"              : [\"PY\"],\n\t\t\"America/Atikokan\"              : [\"CA\"],\n\t\t\"America/Bahia\"                 : [\"BR\"],\n\t\t\"America/Bahia_Banderas\"        : [\"MX\"],\n\t\t\"America/Barbados\"              : [\"BB\"],\n\t\t\"America/Belem\"                 : [\"BR\"],\n\t\t\"America/Belize\"                : [\"BZ\"],\n\t\t\"America/Blanc-Sablon\"          : [\"CA\"],\n\t\t\"America/Boa_Vista\"             : [\"BR\"],\n\t\t\"America/Bogota\"                : [\"CO\"],\n\t\t\"America/Boise\"                 : [\"US\"],\n\t\t\"America/Cambridge_Bay\"         : [\"CA\"],\n\t\t\"America/Campo_Grande\"          : [\"BR\"],\n\t\t\"America/Cancun\"                : [\"MX\"],\n\t\t\"America/Caracas\"               : [\"VE\"],\n\t\t\"America/Cayenne\"               : [\"GF\"],\n\t\t\"America/Cayman\"                : [\"KY\"],\n\t\t\"America/Chicago\"               : [\"US\"],\n\t\t\"America/Chihuahua\"             : [\"MX\"],\n\t\t\"America/Coral_Harbour\"         : [\"CA\"],\n\t\t\"America/Costa_Rica\"            : [\"CR\"],\n\t\t\"America/Creston\"               : [\"CA\"],\n\t\t\"America/Cuiaba\"                : [\"BR\"],\n\t\t\"America/Curacao\"               : [\"CW\"],\n\t\t\"America/Danmarkshavn\"          : [\"GL\"],\n\t\t\"America/Dawson\"                : [\"CA\"],\n\t\t\"America/Dawson_Creek\"          : [\"CA\"],\n\t\t\"America/Denver\"                : [\"US\"],\n\t\t\"America/Detroit\"               : [\"US\"],\n\t\t\"America/Dominica\"              : [\"DM\"],\n\t\t\"America/Edmonton\"              : [\"CA\"],\n\t\t\"America/Eirunepe\"              : [\"BR\"],\n\t\t\"America/El_Salvador\"           : [\"SV\"],\n\t\t\"America/Fort_Nelson\"           : [\"CA\"],\n\t\t\"America/Fortaleza\"             : [\"BR\"],\n\t\t\"America/Glace_Bay\"             : [\"CA\"],\n\t\t\"America/Goose_Bay\"             : [\"CA\"],\n\t\t\"America/Grand_Turk\"            : [\"TC\"],\n\t\t\"America/Grenada\"               : [\"GD\"],\n\t\t\"America/Guadeloupe\"            : [\"GP\"],\n\t\t\"America/Guatemala\"             : [\"GT\"],\n\t\t\"America/Guayaquil\"             : [\"EC\"],\n\t\t\"America/Guyana\"                : [\"GY\"],\n\t\t\"America/Halifax\"               : [\"CA\"],\n\t\t\"America/Havana\"                : [\"CU\"],\n\t\t\"America/Hermosillo\"            : [\"MX\"],\n\t\t\"America/Indiana/Indianapolis\"  : [\"US\"],\n\t\t\"America/Indiana/Knox\"          : [\"US\"],\n\t\t\"America/Indiana/Marengo\"       : [\"US\"],\n\t\t\"America/Indiana/Petersburg\"    : [\"US\"],\n\t\t\"America/Indiana/Tell_City\"     : [\"US\"],\n\t\t\"America/Indiana/Vevay\"         : [\"US\"],\n\t\t\"America/Indiana/Vincennes\"     : [\"US\"],\n\t\t\"America/Indiana/Winamac\"       : [\"US\"],\n\t\t\"America/Inuvik\"                : [\"CA\"],\n\t\t\"America/Iqaluit\"               : [\"CA\"],\n\t\t\"America/Jamaica\"               : [\"JM\"],\n\t\t\"America/Juneau\"                : [\"US\"],\n\t\t\"America/Kentucky/Louisville\"   : [\"US\"],\n\t\t\"America/Kentucky/Monticello\"   : [\"US\"],\n\t\t\"America/Kralendijk\"            : [\"BQ\"],\n\t\t\"America/La_Paz\"                : [\"BO\"],\n\t\t\"America/Lima\"                  : [\"PE\"],\n\t\t\"America/Los_Angeles\"           : [\"US\"],\n\t\t\"America/Lower_Princes\"         : [\"SX\"],\n\t\t\"America/Maceio\"                : [\"BR\"],\n\t\t\"America/Managua\"               : [\"NI\"],\n\t\t\"America/Manaus\"                : [\"BR\"],\n\t\t\"America/Marigot\"               : [\"MF\"],\n\t\t\"America/Martinique\"            : [\"MQ\"],\n\t\t\"America/Matamoros\"             : [\"MX\"],\n\t\t\"America/Mazatlan\"              : [\"MX\"],\n\t\t\"America/Menominee\"             : [\"US\"],\n\t\t\"America/Merida\"                : [\"MX\"],\n\t\t\"America/Metlakatla\"            : [\"US\"],\n\t\t\"America/Mexico_City\"           : [\"MX\"],\n\t\t\"America/Miquelon\"              : [\"PM\"],\n\t\t\"America/Moncton\"               : [\"CA\"],\n\t\t\"America/Monterrey\"             : [\"MX\"],\n\t\t\"America/Montevideo\"            : [\"UY\"],\n\t\t\"America/Montreal\"              : [\"CA\"],\n\t\t\"America/Montserrat\"            : [\"MS\"],\n\t\t\"America/Nassau\"                : [\"BS\"],\n\t\t\"America/New_York\"              : [\"US\"],\n\t\t\"America/Nipigon\"               : [\"CA\"],\n\t\t\"America/Nome\"                  : [\"US\"],\n\t\t\"America/Noronha\"               : [\"BR\"],\n\t\t\"America/North_Dakota/Beulah\"   : [\"US\"],\n\t\t\"America/North_Dakota/Center\"   : [\"US\"],\n\t\t\"America/North_Dakota/New_Salem\": [\"US\"],\n\t\t\"America/Nuuk\"                  : [\"GL\"],\n\t\t\"America/Ojinaga\"               : [\"MX\"],\n\t\t\"America/Panama\"                : [\"PA\", \"CA\", \"KY\"],\n\t\t\"America/Pangnirtung\"           : [\"CA\"],\n\t\t\"America/Paramaribo\"            : [\"SR\"],\n\t\t\"America/Phoenix\"               : [\"US\", \"CA\"],\n\t\t\"America/Port-au-Prince\"        : [\"HT\"],\n\t\t\"America/Port_of_Spain\"         : [\"TT\"],\n\t\t\"America/Porto_Velho\"           : [\"BR\"],\n\t\t\"America/Puerto_Rico\"           : [\"PR\", \"AG\", \"CA\", \"AI\", \"AW\", \"BL\", \"BQ\", \"CW\", \"DM\", \"GD\", \"GP\", \"KN\", \"LC\", \"MF\", \"MS\", \"SX\", \"TT\", \"VC\", \"VG\", \"VI\"],\n\t\t\"America/Punta_Arenas\"          : [\"CL\"],\n\t\t\"America/Rainy_River\"           : [\"CA\"],\n\t\t\"America/Rankin_Inlet\"          : [\"CA\"],\n\t\t\"America/Recife\"                : [\"BR\"],\n\t\t\"America/Regina\"                : [\"CA\"],\n\t\t\"America/Resolute\"              : [\"CA\"],\n\t\t\"America/Rio_Branco\"            : [\"BR\"],\n\t\t\"America/Santarem\"              : [\"BR\"],\n\t\t\"America/Santiago\"              : [\"CL\"],\n\t\t\"America/Santo_Domingo\"         : [\"DO\"],\n\t\t\"America/Sao_Paulo\"             : [\"BR\"],\n\t\t\"America/Scoresbysund\"          : [\"GL\"],\n\t\t\"America/Sitka\"                 : [\"US\"],\n\t\t\"America/St_Barthelemy\"         : [\"BL\"],\n\t\t\"America/St_Johns\"              : [\"CA\"],\n\t\t\"America/St_Kitts\"              : [\"KN\"],\n\t\t\"America/St_Lucia\"              : [\"LC\"],\n\t\t\"America/St_Thomas\"             : [\"VI\"],\n\t\t\"America/St_Vincent\"            : [\"VC\"],\n\t\t\"America/Swift_Current\"         : [\"CA\"],\n\t\t\"America/Tegucigalpa\"           : [\"HN\"],\n\t\t\"America/Thule\"                 : [\"GL\"],\n\t\t\"America/Thunder_Bay\"           : [\"CA\"],\n\t\t\"America/Tijuana\"               : [\"MX\"],\n\t\t\"America/Toronto\"               : [\"CA\", \"BS\"],\n\t\t\"America/Tortola\"               : [\"VG\"],\n\t\t\"America/Vancouver\"             : [\"CA\"],\n\t\t\"America/Virgin\"                : [\"VI\"],\n\t\t\"America/Whitehorse\"            : [\"CA\"],\n\t\t\"America/Winnipeg\"              : [\"CA\"],\n\t\t\"America/Yakutat\"               : [\"US\"],\n\t\t\"America/Yellowknife\"           : [\"CA\"],\n\t\t\"Antarctica/Casey\"              : [\"AQ\"],\n\t\t\"Antarctica/Davis\"              : [\"AQ\"],\n\t\t\"Antarctica/DumontDUrville\"     : [\"AQ\"],\n\t\t\"Antarctica/Macquarie\"          : [\"AU\"],\n\t\t\"Antarctica/Mawson\"             : [\"AQ\"],\n\t\t\"Antarctica/McMurdo\"            : [\"AQ\"],\n\t\t\"Antarctica/Palmer\"             : [\"AQ\"],\n\t\t\"Antarctica/Rothera\"            : [\"AQ\"],\n\t\t\"Antarctica/South_Pole\"         : [\"AQ\"],\n\t\t\"Antarctica/Syowa\"              : [\"AQ\"],\n\t\t\"Antarctica/Troll\"              : [\"AQ\"],\n\t\t\"Antarctica/Vostok\"             : [\"AQ\"],\n\t\t\"Arctic/Longyearbyen\"           : [\"SJ\"],\n\t\t\"Asia/Aden\"                     : [\"YE\"],\n\t\t\"Asia/Almaty\"                   : [\"KZ\"],\n\t\t\"Asia/Amman\"                    : [\"JO\"],\n\t\t\"Asia/Anadyr\"                   : [\"RU\"],\n\t\t\"Asia/Aqtau\"                    : [\"KZ\"],\n\t\t\"Asia/Aqtobe\"                   : [\"KZ\"],\n\t\t\"Asia/Ashgabat\"                 : [\"TM\"],\n\t\t\"Asia/Atyrau\"                   : [\"KZ\"],\n\t\t\"Asia/Baghdad\"                  : [\"IQ\"],\n\t\t\"Asia/Bahrain\"                  : [\"BH\"],\n\t\t\"Asia/Baku\"                     : [\"AZ\"],\n\t\t\"Asia/Bangkok\"                  : [\"TH\", \"KH\", \"LA\", \"VN\"],\n\t\t\"Asia/Barnaul\"                  : [\"RU\"],\n\t\t\"Asia/Beirut\"                   : [\"LB\"],\n\t\t\"Asia/Bishkek\"                  : [\"KG\"],\n\t\t\"Asia/Brunei\"                   : [\"BN\"],\n\t\t\"Asia/Chita\"                    : [\"RU\"],\n\t\t\"Asia/Choibalsan\"               : [\"MN\"],\n\t\t\"Asia/Colombo\"                  : [\"LK\"],\n\t\t\"Asia/Damascus\"                 : [\"SY\"],\n\t\t\"Asia/Dhaka\"                    : [\"BD\"],\n\t\t\"Asia/Dili\"                     : [\"TL\"],\n\t\t\"Asia/Dubai\"                    : [\"AE\", \"OM\"],\n\t\t\"Asia/Dushanbe\"                 : [\"TJ\"],\n\t\t\"Asia/Famagusta\"                : [\"CY\"],\n\t\t\"Asia/Gaza\"                     : [\"PS\"],\n\t\t\"Asia/Hebron\"                   : [\"PS\"],\n\t\t\"Asia/Ho_Chi_Minh\"              : [\"VN\"],\n\t\t\"Asia/Hong_Kong\"                : [\"HK\"],\n\t\t\"Asia/Hovd\"                     : [\"MN\"],\n\t\t\"Asia/Irkutsk\"                  : [\"RU\"],\n\t\t\"Asia/Jakarta\"                  : [\"ID\"],\n\t\t\"Asia/Jayapura\"                 : [\"ID\"],\n\t\t\"Asia/Jerusalem\"                : [\"IL\"],\n\t\t\"Asia/Kabul\"                    : [\"AF\"],\n\t\t\"Asia/Kamchatka\"                : [\"RU\"],\n\t\t\"Asia/Karachi\"                  : [\"PK\"],\n\t\t\"Asia/Kathmandu\"                : [\"NP\"],\n\t\t\"Asia/Khandyga\"                 : [\"RU\"],\n\t\t\"Asia/Kolkata\"                  : [\"IN\"],\n\t\t\"Asia/Krasnoyarsk\"              : [\"RU\"],\n\t\t\"Asia/Kuala_Lumpur\"             : [\"MY\"],\n\t\t\"Asia/Kuching\"                  : [\"MY\"],\n\t\t\"Asia/Kuwait\"                   : [\"KW\"],\n\t\t\"Asia/Macau\"                    : [\"MO\"],\n\t\t\"Asia/Magadan\"                  : [\"RU\"],\n\t\t\"Asia/Makassar\"                 : [\"ID\"],\n\t\t\"Asia/Manila\"                   : [\"PH\"],\n\t\t\"Asia/Muscat\"                   : [\"OM\"],\n\t\t\"Asia/Nicosia\"                  : [\"CY\"],\n\t\t\"Asia/Novokuznetsk\"             : [\"RU\"],\n\t\t\"Asia/Novosibirsk\"              : [\"RU\"],\n\t\t\"Asia/Omsk\"                     : [\"RU\"],\n\t\t\"Asia/Oral\"                     : [\"KZ\"],\n\t\t\"Asia/Phnom_Penh\"               : [\"KH\"],\n\t\t\"Asia/Pontianak\"                : [\"ID\"],\n\t\t\"Asia/Pyongyang\"                : [\"KP\"],\n\t\t\"Asia/Qatar\"                    : [\"QA\", \"BH\"],\n\t\t\"Asia/Qostanay\"                 : [\"KZ\"],\n\t\t\"Asia/Qyzylorda\"                : [\"KZ\"],\n\t\t\"Asia/Riyadh\"                   : [\"SA\", \"AQ\", \"KW\", \"YE\"],\n\t\t\"Asia/Sakhalin\"                 : [\"RU\"],\n\t\t\"Asia/Samarkand\"                : [\"UZ\"],\n\t\t\"Asia/Seoul\"                    : [\"KR\"],\n\t\t\"Asia/Shanghai\"                 : [\"CN\"],\n\t\t\"Asia/Singapore\"                : [\"SG\", \"MY\"],\n\t\t\"Asia/Srednekolymsk\"            : [\"RU\"],\n\t\t\"Asia/Taipei\"                   : [\"TW\"],\n\t\t\"Asia/Tashkent\"                 : [\"UZ\"],\n\t\t\"Asia/Tbilisi\"                  : [\"GE\"],\n\t\t\"Asia/Tehran\"                   : [\"IR\"],\n\t\t\"Asia/Thimphu\"                  : [\"BT\"],\n\t\t\"Asia/Tokyo\"                    : [\"JP\"],\n\t\t\"Asia/Tomsk\"                    : [\"RU\"],\n\t\t\"Asia/Ulaanbaatar\"              : [\"MN\"],\n\t\t\"Asia/Urumqi\"                   : [\"CN\"],\n\t\t\"Asia/Ust-Nera\"                 : [\"RU\"],\n\t\t\"Asia/Vientiane\"                : [\"LA\"],\n\t\t\"Asia/Vladivostok\"              : [\"RU\"],\n\t\t\"Asia/Yakutsk\"                  : [\"RU\"],\n\t\t\"Asia/Yangon\"                   : [\"MM\"],\n\t\t\"Asia/Yekaterinburg\"            : [\"RU\"],\n\t\t\"Asia/Yerevan\"                  : [\"AM\"],\n\t\t\"Atlantic/Azores\"               : [\"PT\"],\n\t\t\"Atlantic/Bermuda\"              : [\"BM\"],\n\t\t\"Atlantic/Canary\"               : [\"ES\"],\n\t\t\"Atlantic/Cape_Verde\"           : [\"CV\"],\n\t\t\"Atlantic/Faroe\"                : [\"FO\"],\n\t\t\"Atlantic/Jan_Mayen\"            : [\"SJ\"],\n\t\t\"Atlantic/Madeira\"              : [\"PT\"],\n\t\t\"Atlantic/Reykjavik\"            : [\"IS\"],\n\t\t\"Atlantic/South_Georgia\"        : [\"GS\"],\n\t\t\"Atlantic/St_Helena\"            : [\"SH\"],\n\t\t\"Atlantic/Stanley\"              : [\"FK\"],\n\t\t\"Australia/Adelaide\"            : [\"AU\"],\n\t\t\"Australia/Brisbane\"            : [\"AU\"],\n\t\t\"Australia/Broken_Hill\"         : [\"AU\"],\n\t\t\"Australia/Darwin\"              : [\"AU\"],\n\t\t\"Australia/Eucla\"               : [\"AU\"],\n\t\t\"Australia/Hobart\"              : [\"AU\"],\n\t\t\"Australia/Lindeman\"            : [\"AU\"],\n\t\t\"Australia/Lord_Howe\"           : [\"AU\"],\n\t\t\"Australia/Melbourne\"           : [\"AU\"],\n\t\t\"Australia/Perth\"               : [\"AU\"],\n\t\t\"Australia/Sydney\"              : [\"AU\"],\n\t\t\"Canada/Eastern\"                : [\"CA\"],\n\t\t\"Europe/Amsterdam\"              : [\"NL\"],\n\t\t\"Europe/Andorra\"                : [\"AD\"],\n\t\t\"Europe/Astrakhan\"              : [\"RU\"],\n\t\t\"Europe/Athens\"                 : [\"GR\"],\n\t\t\"Europe/Belfast\"                : [\"GB\"],\n\t\t\"Europe/Belgrade\"               : [\"RS\", \"BA\", \"HR\", \"ME\", \"MK\", \"SI\"],\n\t\t\"Europe/Berlin\"                 : [\"DE\"],\n\t\t\"Europe/Bratislava\"             : [\"SK\"],\n\t\t\"Europe/Brussels\"               : [\"BE\"],\n\t\t\"Europe/Bucharest\"              : [\"RO\"],\n\t\t\"Europe/Budapest\"               : [\"HU\"],\n\t\t\"Europe/Busingen\"               : [\"DE\"],\n\t\t\"Europe/Chisinau\"               : [\"MD\"],\n\t\t\"Europe/Copenhagen\"             : [\"DK\"],\n\t\t\"Europe/Dublin\"                 : [\"IE\"],\n\t\t\"Europe/Gibraltar\"              : [\"GI\"],\n\t\t\"Europe/Guernsey\"               : [\"GG\"],\n\t\t\"Europe/Helsinki\"               : [\"FI\", \"AX\"],\n\t\t\"Europe/Isle_of_Man\"            : [\"IM\"],\n\t\t\"Europe/Istanbul\"               : [\"TR\"],\n\t\t\"Europe/Jersey\"                 : [\"JE\"],\n\t\t\"Europe/Kaliningrad\"            : [\"RU\"],\n\t\t\"Europe/Kiev\"                   : [\"UA\"],\n\t\t\"Europe/Kirov\"                  : [\"RU\"],\n\t\t\"Europe/Lisbon\"                 : [\"PT\"],\n\t\t\"Europe/Ljubljana\"              : [\"SI\"],\n\t\t\"Europe/London\"                 : [\"GB\", \"GG\", \"IM\", \"JE\"],\n\t\t\"Europe/Luxembourg\"             : [\"LU\"],\n\t\t\"Europe/Madrid\"                 : [\"ES\"],\n\t\t\"Europe/Malta\"                  : [\"MT\"],\n\t\t\"Europe/Mariehamn\"              : [\"AX\"],\n\t\t\"Europe/Minsk\"                  : [\"BY\"],\n\t\t\"Europe/Monaco\"                 : [\"MC\"],\n\t\t\"Europe/Moscow\"                 : [\"RU\"],\n\t\t\"Europe/Oslo\"                   : [\"NO\", \"SJ\", \"BV\"],\n\t\t\"Europe/Paris\"                  : [\"FR\"],\n\t\t\"Europe/Podgorica\"              : [\"ME\"],\n\t\t\"Europe/Prague\"                 : [\"CZ\", \"SK\"],\n\t\t\"Europe/Riga\"                   : [\"LV\"],\n\t\t\"Europe/Rome\"                   : [\"IT\", \"SM\", \"VA\"],\n\t\t\"Europe/Samara\"                 : [\"RU\"],\n\t\t\"Europe/San_Marino\"             : [\"SM\"],\n\t\t\"Europe/Sarajevo\"               : [\"BA\"],\n\t\t\"Europe/Saratov\"                : [\"RU\"],\n\t\t\"Europe/Simferopol\"             : [\"RU\", \"UA\"],\n\t\t\"Europe/Skopje\"                 : [\"MK\"],\n\t\t\"Europe/Sofia\"                  : [\"BG\"],\n\t\t\"Europe/Stockholm\"              : [\"SE\"],\n\t\t\"Europe/Tallinn\"                : [\"EE\"],\n\t\t\"Europe/Tirane\"                 : [\"AL\"],\n\t\t\"Europe/Ulyanovsk\"              : [\"RU\"],\n\t\t\"Europe/Uzhgorod\"               : [\"UA\"],\n\t\t\"Europe/Vaduz\"                  : [\"LI\"],\n\t\t\"Europe/Vatican\"                : [\"VA\"],\n\t\t\"Europe/Vienna\"                 : [\"AT\"],\n\t\t\"Europe/Vilnius\"                : [\"LT\"],\n\t\t\"Europe/Volgograd\"              : [\"RU\"],\n\t\t\"Europe/Warsaw\"                 : [\"PL\"],\n\t\t\"Europe/Zagreb\"                 : [\"HR\"],\n\t\t\"Europe/Zaporozhye\"             : [\"UA\"],\n\t\t\"Europe/Zurich\"                 : [\"CH\", \"DE\", \"LI\"],\n\t\t\"GB\"                            : [\"GB\"],\n\t\t\"GB-Eire\"                       : [\"GB\"],\n\t\t\"Indian/Antananarivo\"           : [\"MG\"],\n\t\t\"Indian/Chagos\"                 : [\"IO\"],\n\t\t\"Indian/Christmas\"              : [\"CX\"],\n\t\t\"Indian/Cocos\"                  : [\"CC\"],\n\t\t\"Indian/Comoro\"                 : [\"KM\"],\n\t\t\"Indian/Kerguelen\"              : [\"TF\", \"HM\"],\n\t\t\"Indian/Mahe\"                   : [\"SC\"],\n\t\t\"Indian/Maldives\"               : [\"MV\"],\n\t\t\"Indian/Mauritius\"              : [\"MU\"],\n\t\t\"Indian/Mayotte\"                : [\"YT\"],\n\t\t\"Indian/Reunion\"                : [\"RE\", \"TF\"],\n\t\t\"NZ\"                            : [\"NZ\"],\n\t\t\"Pacific/Apia\"                  : [\"WS\"],\n\t\t\"Pacific/Auckland\"              : [\"NZ\", \"AQ\"],\n\t\t\"Pacific/Bougainville\"          : [\"PG\"],\n\t\t\"Pacific/Chatham\"               : [\"NZ\"],\n\t\t\"Pacific/Chuuk\"                 : [\"FM\"],\n\t\t\"Pacific/Easter\"                : [\"CL\"],\n\t\t\"Pacific/Efate\"                 : [\"VU\"],\n\t\t\"Pacific/Fakaofo\"               : [\"TK\"],\n\t\t\"Pacific/Fiji\"                  : [\"FJ\"],\n\t\t\"Pacific/Funafuti\"              : [\"TV\"],\n\t\t\"Pacific/Galapagos\"             : [\"EC\"],\n\t\t\"Pacific/Gambier\"               : [\"PF\"],\n\t\t\"Pacific/Guadalcanal\"           : [\"SB\"],\n\t\t\"Pacific/Guam\"                  : [\"GU\", \"MP\"],\n\t\t\"Pacific/Honolulu\"              : [\"US\", \"UM\"],\n\t\t\"Pacific/Johnston\"              : [\"UM\"],\n\t\t\"Pacific/Kanton\"                : [\"KI\"],\n\t\t\"Pacific/Kiritimati\"            : [\"KI\"],\n\t\t\"Pacific/Kosrae\"                : [\"FM\"],\n\t\t\"Pacific/Kwajalein\"             : [\"MH\"],\n\t\t\"Pacific/Majuro\"                : [\"MH\"],\n\t\t\"Pacific/Marquesas\"             : [\"PF\"],\n\t\t\"Pacific/Midway\"                : [\"UM\"],\n\t\t\"Pacific/Nauru\"                 : [\"NR\"],\n\t\t\"Pacific/Niue\"                  : [\"NU\"],\n\t\t\"Pacific/Norfolk\"               : [\"NF\"],\n\t\t\"Pacific/Noumea\"                : [\"NC\"],\n\t\t\"Pacific/Pago_Pago\"             : [\"AS\", \"UM\"],\n\t\t\"Pacific/Palau\"                 : [\"PW\"],\n\t\t\"Pacific/Pitcairn\"              : [\"PN\"],\n\t\t\"Pacific/Pohnpei\"               : [\"FM\"],\n\t\t\"Pacific/Port_Moresby\"          : [\"PG\", \"AQ\"],\n\t\t\"Pacific/Rarotonga\"             : [\"CK\"],\n\t\t\"Pacific/Saipan\"                : [\"MP\"],\n\t\t\"Pacific/Samoa\"                 : [\"WS\"],\n\t\t\"Pacific/Tahiti\"                : [\"PF\"],\n\t\t\"Pacific/Tarawa\"                : [\"KI\"],\n\t\t\"Pacific/Tongatapu\"             : [\"TO\"],\n\t\t\"Pacific/Wake\"                  : [\"UM\"],\n\t\t\"Pacific/Wallis\"                : [\"WF\"],\n\t\t\"Singapore\"                     : [\"SG\"],\n\t\t\"US/Arizona\"                    : [\"US\"],\n\t\t\"US/Hawaii\"                     : [\"US\"],\n\t\t\"US/Samoa\"                      : [\"WS\"],\n\t}\n\n\tconst timezone = Intl.DateTimeFormat().resolvedOptions().timeZone\n\n\tif (timezone === \"\" || !timezone) {\n\t\treturn null\n\t}\n\n\tlet geoLocation = {\n\t\tcountryCode: timezones[timezone][0].toUpperCase(),\n\t}\n\n\t// if the timezone is equals \"America/Los_Angeles\" then add the regionCode \"US-CA\"\n\tif (timezone === \"America/Los_Angeles\") {\n\t\tgeoLocation.regionCode = \"US-CA\"\n\t}\n\n\tif (timezone === \"Europe/Zurich\") {\n\t\tgeoLocation.regionCode = \"CH-ZH\"\n\t}\n\n\treturn geoLocation\n}\n\n\n\n\n","/**\n * Logs a message to the console if the logger is enabled.\n *\n * @module console\n * @param message\n * @param objects\n * @public\n * @returns {void}\n */\nexport const log = (message, ...objects) => {\n\n\tif (!isLoggerEnabled()) return\n\n\tif (typeof message === \"object\") {\n\t\tconsole.log(\"Pixel Manager: \", message, ...objects)\n\t} else if (objects.length) {\n\t\tconsole.log(\"Pixel Manager: \" + message, ...objects)\n\t} else {\n\t\tconsole.log(\"Pixel Manager: \" + message)\n\t}\n}\n\n/**\n * Logs an error message to the console.\n *\n * @module console\n * @param message\n * @param objects\n * @public\n * @returns {void}\n */\nexport const error = (message, ...objects) => {\n\n\t// if (!isLoggerEnabled()) return\n\n\t// if message is an object, log the keys\n\tif (typeof message === \"object\") {\n\t\tconsole.error(\"Pixel Manager: \", message, ...objects)\n\t} else if (objects.length) {\n\t\tconsole.error(\"Pixel Manager: \" + message, ...objects)\n\t} else {\n\t\tconsole.error(\"Pixel Manager: \" + message)\n\t}\n}\n\n/**\n * Checks if the logger is enabled.\n *\n * @return {boolean}\n */\nconst isLoggerEnabled = () => {\n\n\tif (urlLoggerOff()) return false\n\n\tif (sessionLoggerEnabled()) return true\n\n\tif (urlLoggerOn()) return true\n\n\treturn !!wpmDataLayer?.general?.logger?.is_active\n}\n\n/**\n * Turn off the logger if the URL parameter is set.\n *\n * @return {boolean}\n */\nconst urlLoggerOff = () => {\n\n\tif (wpm.urlHasParameter(\"pmwloggeroff\")) {\n\t\twpm.storeData(\"loggerEnabled\", false)\n\t}\n\n\treturn wpm.urlHasParameter(\"pmwloggeroff\")\n}\n\n/**\n * Check if the logger is enabled for the session.\n *\n * @return {boolean}\n */\nconst sessionLoggerEnabled = () => {\n\treturn wpm.retrieveData(\"loggerEnabled\")\n}\n\n/**\n * Turn on the logger if the URL parameter is set.\n *\n * @return {boolean}\n */\nconst urlLoggerOn = () => {\n\n\tif (wpm.urlHasParameter(\"pmwloggeron\")) {\n\t\twpm.storeData(\"loggerEnabled\", true)\n\t}\n\n\treturn wpm.urlHasParameter(\"pmwloggeron\")\n}\n","/**\n * Load all PMW functions\n *\n * Ignore event listeners. They need to be loaded after\n * we made sure that jQuery has been loaded.\n */\n\nrequire(\"./functions\")\n\nwindow.wpm.consent = require(\"./consent/consent.mjs\")\n\nwindow.pmw = {\n\tconsent: {\n\t\tapi: require(\"./consent/api.mjs\"),\n\t\t// scripts: require(\"./consent/scripts.mjs\"),\n\t},\n\tconsole: require(\"./console.mjs\"),\n}\n\nrequire(\"./ip_services\")\n\n// #if process.env.TIER === 'premium'\n// if (wpm.canLoadPremiumFeatures()) {\n// \trequire(\"./functions_premium\")\n// }\n// #endif\n","// a function that removes all \\n and \\t and html tags from a string\nconst removeHtmlTagsAndWhitespace = string => {\n\n\tstring = string.replace(/<[^>]*>?/gm, \"\").replace(/\\n/gm, \"\").replace(/\\t/gm, \"\");\n\tstring = string.trim();\n\n\treturn string;\n};\n\n/**\n * add_shipping_info event\n */\n\n// trigger when #shipping_method is changed\njQuery(\"form.woocommerce-checkout\").on(\"change\", \"#shipping_method\", (event) => {\n\n\tif (!event.target?.value) return;\n\tif (!event.target?.id) return;\n\n\ttriggerAddShippingInfoEvent({\n\t\tslug: event.target.value,\n\t\ttext: removeHtmlTagsAndWhitespace(jQuery(\"label[for='\" + event.target.id + \"']\").text()),\n\t});\n});\n\n// trigger when a shipping method is already selected on page load\njQuery(() => {\n\tif (jQuery(\"#shipping_method\").length) {\n\n\t\t// get the checked shipping method from #shipping_method\n\t\tlet checkedShippingMethod = jQuery(\"#shipping_method\").find(\":checked\");\n\n\t\t// if there is a checked shipping method\n\t\tif (checkedShippingMethod.length) {\n\n\t\t\tif (!checkedShippingMethod.val()) return;\n\t\t\tif (!checkedShippingMethod.attr(\"id\")) return;\n\n\t\t\ttriggerAddShippingInfoEvent({\n\t\t\t\tslug: checkedShippingMethod.val(),\n\t\t\t\ttext: removeHtmlTagsAndWhitespace(jQuery(\"label[for='\" + checkedShippingMethod.attr(\"id\") + \"']\").text()),\n\t\t\t});\n\t\t}\n\t}\n});\n\n// trigger when a shipping method is selected on page load\nconst triggerAddShippingInfoEvent = shippingTier => {\n\tjQuery(document).trigger(\"pmw:add-shipping-info\", {shippingTier});\n};\n\n/**\n * add_payment_info event\n */\n\n\t  // flag to prevent double logging of payment method change on pageload\nlet paymentMethodChangeLogged = false;\n\n// trigger when a payment method is selected\njQuery(\"form.woocommerce-checkout\").on(\"change\", \"input[name=\\\"payment_method\\\"]\", event => {\n\n\tif (!event.target.value) return;\n\tif (!event.target.id) return;\n\n\ttriggerAddPaymentInfoEvent({\n\t\tslug: event.target.value,\n\t\ttext: removeHtmlTagsAndWhitespace(jQuery(\"label[for='\" + event.target.id + \"']\").text()),\n\t});\n\n\tpaymentMethodChangeLogged = true;\n});\n\n// trigger when a payment method is already selected on page load\njQuery(() => {\n\n\t// prevent double logging of payment method change on pageload\n\tif (paymentMethodChangeLogged) return;\n\n\tlet checkedPaymentMethod = jQuery(\"input[name=\\\"payment_method\\\"]:checked\");\n\n\tif (checkedPaymentMethod.length) {\n\n\t\tif (!checkedPaymentMethod.val()) return;\n\t\tif (!checkedPaymentMethod.attr(\"id\")) return;\n\n\t\ttriggerAddPaymentInfoEvent({\n\t\t\tslug: checkedPaymentMethod.val(),\n\t\t\ttext: removeHtmlTagsAndWhitespace(jQuery(\"label[for='\" + checkedPaymentMethod.attr(\"id\") + \"']\").text()),\n\t\t});\n\t}\n});\n\n// trigger when a payment method is selected on page load\nconst triggerAddPaymentInfoEvent = paymentType => {\n\tjQuery(document).trigger(\"pmw:add-payment-info\", {paymentType});\n};\n\n/**\n * remove_from_cart event\n *\n * Cannot be attached directly because the mini cart doesn't necessarily contain the remove button on page load.\n */\njQuery(document).on(\"click\", \".remove_from_cart_button, .remove\", (event) => {\n\n\t// console.log(\"remove_from_cart event\" + new Date().getTime())\n\n\ttry {\n\n\t\tlet url       = new URL(jQuery(event.currentTarget).attr(\"href\"));\n\t\tlet productId = wpm.getProductIdByCartItemKeyUrl(url);\n\n\t\twpm.removeProductFromCart(productId);\n\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n\n/**\n * begin_checkout event\n *\n * Cannot be attached directly because the mini cart doesn't necessarily contain the remove button on page load.\n */\nlet checkoutButtonClasses = [\n\t// \".checkout\", // this is too generic. It triggers on the checkout page on some themes fore each interaction with the checkout form.\n\t\".checkout-button\",\n\t\".cart-checkout-button\",\n\t\".button.checkout\",\n\t\".xoo-wsc-ft-btn-checkout\", // https://xootix.com/side-cart-for-woocommerce/\n\t\".elementor-button--checkout\",\n\t\".xt_woofc-checkout\", // https://wordpress.org/plugins/woo-floating-cart-lite/\n\t\".fkcart-checkout--text\", // https://funnelkit.com/\n];\n\nconst checkoutButtonSelectors = wpm.prepareSelectors(checkoutButtonClasses, \"beginCheckout\");\n\n// https://wordpress.stackexchange.com/a/352171/68337\njQuery(document).on(\"click init_checkout\", checkoutButtonSelectors, () => {\n\tjQuery(document).trigger(\"pmw:begin-checkout\");\n});\n\njQuery(document).on(\"updated_cart_totals\", () => {\n\tjQuery(document).trigger(\"pmw:view-cart\");\n});\n\n/**\n * Set up PWM events\n */\n\n// track checkout option event: purchase click\n// https://wordpress.stackexchange.com/a/352171/68337\njQuery(document).on(\"wpmLoad\", (event) => {\n\tjQuery(document).on(\"payment_method_selected\", () => {\n\n\t\tif (false === wpm.paymentMethodSelected) {\n\t\t\twpm.fireCheckoutProgress(3);\n\t\t}\n\n\t\twpm.fireCheckoutOption(3, jQuery(\"input[name='payment_method']:checked\").val());\n\t\twpm.paymentMethodSelected = true;\n\t});\n});\n\n// populate the wpmDataLayer with the cart items\njQuery(document).on(\"wpmLoad\", () => {\n\n\ttry {\n\t\twpm.initCart();\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// get all add-to-cart= products from backend\njQuery(document).on(\"wpmLoad\", () => {\n\n\twpmDataLayer.products = wpmDataLayer.products || {};\n\n\t// scan page for add-to-cart= links\n\tlet productIds = wpm.getAddToCartLinkProductIds();\n\n\twpm.getProductsFromBackend(productIds);\n});\n\n/**\n * Save the referrer into a cookie\n *\n * @returns {void}\n */\njQuery(document).on(\"wpmLoad\", () => {\n\n\t// If there is no referrer, then return\n\tif (!document.referrer) {\n\t\treturn;\n\t}\n\n\t// If the referrer is already stored, then return\n\tif (wpm.retrieveData(\"referrer\")) {\n\t\treturn;\n\t}\n\n\tlet referrerUrl      = new URL(document.referrer);\n\tlet referrerHostname = referrerUrl.hostname;\n\n\tif (referrerHostname !== window.location.host) {\n\t\twpm.storeData(\"referrer\", referrerHostname);\n\t}\n});\n\n/**\n * Collect parameters from the URL\n * and save them to the PMW session storage.\n * Parameters:\n * - gclid\n * - wbraid\n * - gbraid\n * - fbclid\n * - ttclid\n * - ScCid\n * - epik\n *\n * @returns {void}\n * */\njQuery(document).on(\"wpmLoad\", () => {\n\n\tlet gclid = wpm.getUrlParameter(\"gclid\");\n\tif (gclid) wpm.storeData(\"gclid\", gclid);\n\n\tlet wbraid = wpm.getUrlParameter(\"wbraid\");\n\tif (wbraid) wpm.storeData(\"wbraid\", wbraid);\n\n\tlet gbraid = wpm.getUrlParameter(\"gbraid\");\n\tif (gbraid) wpm.storeData(\"gbraid\", gbraid);\n\n\t// https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/fbp-and-fbc\n\tlet fbclid = wpm.getUrlParameter(\"fbclid\");\n\tif (fbclid) {\n\t\tfbclid = \"fb.1.\" + Math.floor(Date.now() / 1000) + \".\" + fbclid;\n\t\twpm.storeData(\"fbclid\", fbclid);\n\t}\n\n\tlet ttclid = wpm.getUrlParameter(\"ttclid\");\n\tif (ttclid) wpm.storeData(\"ttclid\", ttclid);\n\n\tlet scid = wpm.getUrlParameter(\"ScCid\");\n\tif (scid) wpm.storeData(\"scid\", scid);\n\n\tlet epik = wpm.getUrlParameter(\"epik\");\n\tif (epik) wpm.storeData(\"epik\", epik);\n});\n\n/**\n * Create our own load event in order to better handle script flow execution when JS \"optimizers\" shuffle the code.\n */\njQuery(document).on(\"wpmLoad\", () => {\n\t// document.addEventListener(\"wpmLoad\", function () {\n\ttry {\n\t\tif (typeof wpmDataLayer != \"undefined\" && !wpmDataLayer?.pmw_loaded) {\n\n\t\t\tjQuery(document).trigger(\"pmw:load-always\");\n\n\t\t\tif (wpmDataLayer?.shop) {\n\t\t\t\tif (\n\t\t\t\t\t\"product\" === wpmDataLayer.shop.page_type &&\n\t\t\t\t\t\"variable\" !== wpmDataLayer.shop.product_type &&\n\t\t\t\t\twpm.getMainProductIdFromProductPage()\n\t\t\t\t) {\n\t\t\t\t\tlet product = wpm.getProductDataForViewItemEvent(wpm.getMainProductIdFromProductPage());\n\t\t\t\t\tjQuery(document).trigger(\"pmw:view-item\", product);\n\t\t\t\t} else if (\"product_category\" === wpmDataLayer.shop.page_type) {\n\t\t\t\t\tjQuery(document).trigger(\"pmw:view-category\");\n\t\t\t\t} else if (\"search\" === wpmDataLayer.shop.page_type) {\n\t\t\t\t\tjQuery(document).trigger(\"pmw:search\");\n\t\t\t\t} else if (\"cart\" === wpmDataLayer.shop.page_type) {\n\t\t\t\t\tjQuery(document).trigger(\"pmw:view-cart\");\n\t\t\t\t} else if (\"order_received_page\" === wpmDataLayer.shop.page_type) {\n\t\t\t\t\tif (wpmDataLayer?.order && !wpm.isOrderIdStored(wpmDataLayer.order.id)) {\n\t\t\t\t\t\tjQuery(document).trigger(\"pmw:view-order-received-page\");\n\t\t\t\t\t\twpm.writeOrderIdToStorage(wpmDataLayer.order.id, wpmDataLayer.order.key);\n\t\t\t\t\t\tif (typeof wpm.acrRemoveCookie === \"function\") wpm.acrRemoveCookie();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tjQuery(document).trigger(\"pmw:everywhere-else\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tjQuery(document).trigger(\"pmw:everywhere-else\");\n\t\t\t}\n\n\t\t\tif (wpmDataLayer?.user?.id && !wpm.hasLoginEventFired()) {\n\t\t\t\tjQuery(document).trigger(\"pmw:login\");\n\t\t\t\twpm.setLoginEventFired();\n\t\t\t}\n\n\t\t\twpmDataLayer.pmw_loaded = true;\n\t\t}\n\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n/**\n * Register the show_variation event listener\n * in case lazy loading is enabled\n * because we have to register it immediately\n * and not after the onready event.\n */\nif (wpmDataLayer?.general?.lazy_load_pmw) {\n\twpm.registerShowVariationEventListener();\n}\n\n/**\n * In case lazy loading is enabled\n * we need to trigger the view-item event on\n * preselected variations.\n *\n * Check if a variation is selected on a variable product page\n * and trigger the view-item event if a variation is selected\n *\n * Fallback for the jQuery(\".single_variation_wrap\").on(\"show_variation\", (event, variation) => {}) event listener\n * in case lazy loading is enabled and the event listener is not triggered.\n */\njQuery(document).on(\"wpmLoad\", () => {\n\tif (!wpmDataLayer?.general?.lazy_load_pmw) return;\n\n\ttry {\n\t\tconst $variationForm = jQuery(\".variations_form\");\n\t\tif (!$variationForm.length) return;\n\n\t\tconst selectedValues = {};\n\t\tconst allSelected    = $variationForm.find(\"select\").toArray().every(select => {\n\t\t\tconst value = jQuery(select).val();\n\t\t\tif (value) {\n\t\t\t\tselectedValues[jQuery(select).attr(\"name\")] = value;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\tif (!allSelected) return;\n\n\t\tconst productVariations = $variationForm.data(\"product_variations\");\n\t\tif (!productVariations) return;\n\n\t\tconst matchingVariation = productVariations.find(variation =>\n\t\t\tObject.entries(selectedValues).every(([key, value]) =>\n\t\t\t\tvariation.attributes[key] === value,\n\t\t\t),\n\t\t);\n\n\t\tif (matchingVariation) {\n\t\t\twpm.triggerViewItemEventPrep(matchingVariation.variation_id);\n\t\t}\n\t} catch (e) {\n\t\tpmw.console.error(e);\n\t}\n});\n\n// Check if the REST endpoint is available and log an error if it is not\njQuery(document).on(\"wpmLoad\", async () => {\n\tif (wpm.retrieveData(\"restEndpointAvailable\") === false) pmw.console.error(\"REST endpoint is not available. Using admin-ajax.php instead.\");\n});\n\n/**\n * All s2s events\n */\n\n/**\n * PageView event\n */\njQuery(document).on(\"pmw:page-view\", (event) => {\n\n\tpmw.console.log(\"pmw:page-view event fired\", {event});\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent: \"page_view\",\n\t};\n\n\t// Facebook\n\t// If Facebook pixel is loaded, add Facebook server to server event data to the payload\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"PageView\",\n\t\t\tevent_id        : wpm.getFbRandomEventId(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t};\n\n\t\tif (wpm.retrieveData(\"referrer\")) {\n\t\t\tpayload.facebook.referrer_url = wpm.makeFullUrl(wpm.retrieveData(\"referrer\"));\n\t\t}\n\t}\n\n\t// Pinterest\n\t// https://developers.pinterest.com/docs/conversions/best/\n\t// https://developers.pinterest.com/docs/api/v5/#operation/events/create\n\t// https://developers.pinterest.com/docs/conversions/event/\n\t// if (wpmDataLayer?.pixels?.pinterest?.loaded) {\n\t//\n\t// \tpayload.pinterest = wpm.getPinterestS2SBaseData();\n\t//\n\t// \tpayload.pinterest.event_name  = \"addtocart\";\n\t// \tpayload.pinterest.custom_data = wpm.pinterestGetProductDataForCapiEvent(product);\n\t// }\n\n\t// TikTok\n\t// https://ads.tiktok.com/gateway/docs/index?identify_key=c0138ffadd90a955c1f0670a56fe348d1d40680b3c89461e09f78ed26785164b&language=ENGLISH&doc_id=1739585702922241#item-link-Adding%20parameters%20to%20event%20code\n\t// if (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t// \tpayload.tiktok = {\n\t// \t\tevent     : \"AddToCart\",\n\t// \t\tevent_id  : wpm.getRandomEventId(),\n\t// \t\tuser      : wpm.tiktokGetEventUserData(),\n\t// \t\tpage      : wpm.tiktokGetEventPageData(),\n\t// \t\tproperties: {\n\t// \t\t\tvalue       : product.price * product.quantity,\n\t// \t\t\tcurrency    : product.currency,\n\t// \t\t\tcontent_type: \"product\",\n\t// \t\t\tcontents    : [{\n\t// \t\t\t\tcontent_id  : wpm.getProductIdForSpecificPixel(product, \"tiktok\"),\n\t// \t\t\t\tcontent_name: product.name,\n\t// \t\t\t\tquantity    : product.quantity,\n\t// \t\t\t\tprice       : product.price,\n\t// \t\t\t}],\n\t// \t\t},\n\t// \t};\n\t// }\n\n\t// Snapchat\n\t// https://docs.snap.com/api/marketing-api/Conversions-API/Parameters\n\t// https://businesshelp.snapchat.com/s/article/pixel-direct-implementation\n\tif (wpmDataLayer?.pixels?.snapchat?.loaded) {\n\t\tpayload.snapchat             = wpm.getSnapchatS2SBaseData();\n\t\tpayload.snapchat.event_name  = \"PAGE_VIEW\";\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"pmw:s2s:page-view\", payload);\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\tif (wpmDataLayer?.general?.server_2_server?.pageview_event_s2s?.is_active) {\n\t\twpm.sendEventPayloadToServer(payload);\n\t}\n});\n\n/**\n * Add to cart event\n */\njQuery(document).on(\"pmw:add-to-cart\", (event, product) => {\n\n\tpmw.console.log(\"pmw:add-to-cart event fired\", {event, product});\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent  : \"add_to_cart\",\n\t\tproduct: product,\n\t};\n\n\t// Facebook\n\t// If Facebook pixel is loaded, add Facebook server to server event data to the payload\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"AddToCart\",\n\t\t\tevent_id        : wpm.getFbRandomEventId(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t\tcustom_data     : wpm.fbGetProductDataForCapiEvent(product),\n\t\t};\n\n\t\tif (wpm.retrieveData(\"referrer\")) {\n\t\t\tpayload.facebook.referrer_url = wpm.makeFullUrl(wpm.retrieveData(\"referrer\"));\n\t\t}\n\t}\n\n\t// Pinterest\n\t// https://developers.pinterest.com/docs/conversions/best/\n\t// https://developers.pinterest.com/docs/api/v5/#operation/events/create\n\t// https://developers.pinterest.com/docs/conversions/event/\n\tif (wpmDataLayer?.pixels?.pinterest?.loaded) {\n\n\t\tpayload.pinterest = wpm.getPinterestS2SBaseData();\n\n\t\tpayload.pinterest.event_name  = \"addtocart\";\n\t\tpayload.pinterest.custom_data = wpm.pinterestGetProductDataForCapiEvent(product);\n\t}\n\n\t// TikTok\n\t// https://ads.tiktok.com/gateway/docs/index?identify_key=c0138ffadd90a955c1f0670a56fe348d1d40680b3c89461e09f78ed26785164b&language=ENGLISH&doc_id=1739585702922241#item-link-Adding%20parameters%20to%20event%20code\n\t// TODO: add content_category to product data\n\t// TODO: add brand to product data\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent     : \"AddToCart\",\n\t\t\tevent_id  : wpm.getRandomEventId(),\n\t\t\tuser      : wpm.tiktokGetEventUserData(),\n\t\t\tpage      : wpm.tiktokGetEventPageData(),\n\t\t\tproperties: {\n\t\t\t\tvalue       : product.price * product.quantity,\n\t\t\t\tcurrency    : product.currency,\n\t\t\t\tcontent_type: \"product\",\n\t\t\t\tcontents    : [{\n\t\t\t\t\tcontent_id  : wpm.getProductIdForSpecificPixel(product, \"tiktok\"),\n\t\t\t\t\tcontent_name: product.name,\n\t\t\t\t\tquantity    : product.quantity,\n\t\t\t\t\tprice       : product.price,\n\t\t\t\t}],\n\t\t\t},\n\t\t};\n\t}\n\n\t// Snapchat\n\t// https://docs.snap.com/api/marketing-api/Conversions-API/Parameters\n\t// https://businesshelp.snapchat.com/s/article/pixel-direct-implementation\n\tif (wpmDataLayer?.pixels?.snapchat?.loaded) {\n\t\tpayload.snapchat             = wpm.getSnapchatS2SBaseData();\n\t\tpayload.snapchat.event_name  = \"ADD_CART\";\n\t\tpayload.snapchat.custom_data = wpm.getSnapchatCustomDataForProduct(product);\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"pmw:s2s:add-to-cart\", payload);\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload);\n});\n\n/**\n * Begin checkout event\n */\njQuery(document).on(\"pmw:begin-checkout\", (event) => {\n\n\tpmw.console.log(\"pmw:begin-checkout event fired\", {event});\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent: \"begin_checkout\",\n\t};\n\n\t// Facebook\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"InitiateCheckout\",\n\t\t\tevent_id        : wpm.getFbRandomEventId(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t\tcustom_data     : {},\n\t\t};\n\n\t\tif (wpm.retrieveData(\"referrer\")) {\n\t\t\tpayload.facebook.referrer_url = wpm.makeFullUrl(wpm.retrieveData(\"referrer\"));\n\t\t}\n\n\t\tif (wpmDataLayer?.cart && !jQuery.isEmptyObject(wpmDataLayer.cart)) {\n\t\t\tpayload.facebook.custom_data = {\n\t\t\t\tcontent_type: \"product\",\n\t\t\t\tcontent_ids : wpm.fbGetContentIdsFromCart(),\n\t\t\t\tvalue       : wpm.getCartValue(),\n\t\t\t\tcurrency    : wpmDataLayer.shop.currency,\n\t\t\t};\n\t\t}\n\t}\n\n\t// TikTok\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent     : \"InitiateCheckout\",\n\t\t\tevent_id  : wpm.getRandomEventId(),\n\t\t\tuser      : wpm.tiktokGetEventUserData(),\n\t\t\tpage      : wpm.tiktokGetEventPageData(),\n\t\t\tproperties: wpm.tiktokGetPropertiesFromCart(),\n\t\t};\n\t}\n\n\t// Snapchat\n\t// https://docs.snap.com/api/marketing-api/Conversions-API/Parameters\n\tif (wpmDataLayer?.pixels?.snapchat?.loaded) {\n\t\tpayload.snapchat            = wpm.getSnapchatS2SBaseData();\n\t\tpayload.snapchat.event_name = \"START_CHECKOUT\";\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"pmw:s2s:begin-checkout\", payload);\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload);\n});\n\n/**\n * Add Payment Info\n */\njQuery(document).on(\"pmw:add-payment-info\", (event) => {\n\n\tpmw.console.log(\"pmw:add-payment-info event fired\", {event});\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent: \"add_payment_info\",\n\t};\n\n\t// Facebook\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"AddPaymentInfo\",\n\t\t\tevent_id        : wpm.getFbRandomEventId(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t\tcustom_data     : {},\n\t\t};\n\n\t\tif (wpm.retrieveData(\"referrer\")) {\n\t\t\tpayload.facebook.referrer_url = wpm.makeFullUrl(wpm.retrieveData(\"referrer\"));\n\t\t}\n\t}\n\n\t// TikTok\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent   : \"AddPaymentInfo\",\n\t\t\tevent_id: wpm.getRandomEventId(),\n\t\t\tuser    : wpm.tiktokGetEventUserData(),\n\t\t\tpage    : wpm.tiktokGetEventPageData(),\n\t\t};\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"pmw:s2s:add-payment-info\", payload);\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload);\n});\n\n/**\n * Add to wishlist event\n */\njQuery(document).on(\"pmw:add-to-wishlist\", (event, product) => {\n\n\tpmw.console.log(\"pmw:add-to-wishlist event fired\", {event, product});\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent  : \"add_to_wishlist\",\n\t\tproduct: product,\n\t};\n\n\t// Facebook\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"AddToWishlist\",\n\t\t\tevent_id        : wpm.getFbRandomEventId(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t\tcustom_data     : wpm.fbGetProductDataForCapiEvent(product),\n\t\t};\n\n\t\tif (wpm.retrieveData(\"referrer\")) {\n\t\t\tpayload.facebook.referrer_url = wpm.makeFullUrl(wpm.retrieveData(\"referrer\"));\n\t\t}\n\t}\n\n\t// TikTok\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent     : \"AddToWishlist\",\n\t\t\tevent_id  : wpm.getRandomEventId(),\n\t\t\tuser      : wpm.tiktokGetEventUserData(),\n\t\t\tpage      : wpm.tiktokGetEventPageData(),\n\t\t\tproperties: {\n\t\t\t\tvalue       : product.price * product.quantity,\n\t\t\t\tcurrency    : product.currency,\n\t\t\t\tcontent_type: \"product\",\n\t\t\t\tcontents    : [{\n\t\t\t\t\tcontent_id  : wpm.getProductIdForSpecificPixel(product, \"tiktok\"),\n\t\t\t\t\tcontent_name: product.name,\n\t\t\t\t\tquantity    : product.quantity,\n\t\t\t\t\tprice       : product.price,\n\t\t\t\t}],\n\t\t\t},\n\t\t};\n\t}\n\n\t// Snapchat\n\t// https://docs.snap.com/api/marketing-api/Conversions-API/Parameters\n\t// https://businesshelp.snapchat.com/s/article/pixel-direct-implementation\n\tif (wpmDataLayer?.pixels?.snapchat?.loaded) {\n\t\tpayload.snapchat             = wpm.getSnapchatS2SBaseData();\n\t\tpayload.snapchat.event_name  = \"ADD_TO_WISHLIST\";\n\t\tpayload.snapchat.custom_data = wpm.getSnapchatCustomDataForProduct(product);\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"pmw:s2s:add-to-wishlist\", payload);\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload);\n});\n\n/**\n * View Item event\n */\njQuery(document).on(\"pmw:view-item\", (event, product = null) => {\n\n\tpmw.console.log(\"pmw:view-item event fired\", {event, product});\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent  : \"view_item\",\n\t\tproduct: product,\n\t};\n\n\t// Facebook\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"ViewContent\",\n\t\t\tevent_id        : wpm.getFbRandomEventId(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t\tcustom_data     : {},\n\t\t};\n\n\t\tif (wpm.retrieveData(\"referrer\")) {\n\t\t\tpayload.facebook.referrer_url = wpm.makeFullUrl(wpm.retrieveData(\"referrer\"));\n\t\t}\n\n\t\tif (product) {\n\t\t\tpayload.facebook.custom_data = wpm.fbGetProductDataForCapiEvent(product);\n\t\t}\n\t}\n\n\t// Pinterest\n\t// https://developers.pinterest.com/docs/conversions/best/\n\t// https://developers.pinterest.com/docs/api/v5/#operation/events/create\n\t// https://developers.pinterest.com/docs/conversions/event/\n\tif (wpmDataLayer?.pixels?.pinterest?.loaded) {\n\n\t\tpayload.pinterest = wpm.getPinterestS2SBaseData();\n\n\t\tpayload.pinterest.event_name = \"pagevisit\";\n\n\t\tif (product) {\n\t\t\tpayload.pinterest.custom_data = wpm.pinterestGetProductDataForCapiEvent(product);\n\t\t}\n\t}\n\n\t// TikTok\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent   : \"ViewContent\",\n\t\t\tevent_id: wpm.getRandomEventId(),\n\t\t\tuser    : wpm.tiktokGetEventUserData(),\n\t\t\tpage    : wpm.tiktokGetEventPageData(),\n\t\t};\n\n\t\tif (product) {\n\t\t\tpayload.tiktok.properties = {\n\t\t\t\tvalue       : product.price * product.quantity,\n\t\t\t\tcurrency    : product.currency,\n\t\t\t\tcontent_type: \"product\",\n\t\t\t\tcontents    : [{\n\t\t\t\t\tcontent_id  : wpm.getProductIdForSpecificPixel(product, \"tiktok\"),\n\t\t\t\t\tcontent_name: product.name,\n\t\t\t\t\tquantity    : product.quantity,\n\t\t\t\t\tprice       : product.price,\n\t\t\t\t}],\n\t\t\t};\n\t\t}\n\t}\n\n\t// Snapchat\n\t// https://docs.snap.com/api/marketing-api/Conversions-API/Parameters\n\t// https://businesshelp.snapchat.com/s/article/pixel-direct-implementation\n\tif (wpmDataLayer?.pixels?.snapchat?.loaded) {\n\t\tpayload.snapchat            = wpm.getSnapchatS2SBaseData();\n\t\tpayload.snapchat.event_name = \"VIEW_CONTENT\";\n\n\t\tif (product) {\n\t\t\tpayload.snapchat.custom_data = wpm.getSnapchatCustomDataForProduct(product);\n\t\t}\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"pmw:s2s:view-item\", payload);\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload);\n});\n\n/**\n * View category event\n */\njQuery(document).on(\"pmw:view-category\", (event, product = null) => {\n\n\tpmw.console.log(\"pmw:view-category event fired\", {event, product});\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent: \"view_category\",\n\t};\n\n\t// Pinterest\n\t// https://developers.pinterest.com/docs/conversions/best/\n\t// https://developers.pinterest.com/docs/api/v5/#operation/events/create\n\t// https://developers.pinterest.com/docs/conversions/event/\n\tif (wpmDataLayer?.pixels?.pinterest?.loaded) {\n\n\t\tpayload.pinterest = wpm.getPinterestS2SBaseData();\n\n\t\tpayload.pinterest.event_name = \"viewcategory\";\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"pmw:s2s:view-category\", payload);\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload);\n});\n\n/**\n * Search event\n */\njQuery(document).on(\"pmw:search\", (event) => {\n\n\tpmw.console.log(\"pmw:search event fired\", {event});\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent: \"search\",\n\t};\n\n\t// Facebook\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"Search\",\n\t\t\tevent_id        : wpm.getFbRandomEventId(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t\tcustom_data     : {\n\t\t\t\tsearch_string: wpm.getSearchTermFromUrl(),\n\t\t\t},\n\t\t};\n\n\t\tif (wpm.retrieveData(\"referrer\")) {\n\t\t\tpayload.facebook.referrer_url = wpm.makeFullUrl(wpm.retrieveData(\"referrer\"));\n\t\t}\n\t}\n\n\t// Pinterest\n\t// https://developers.pinterest.com/docs/conversions/best/\n\t// https://developers.pinterest.com/docs/api/v5/#operation/events/create\n\t// https://developers.pinterest.com/docs/conversions/event/\n\tif (wpmDataLayer?.pixels?.pinterest?.loaded) {\n\n\t\tpayload.pinterest = wpm.getPinterestS2SBaseData();\n\n\t\tpayload.pinterest.event_name  = \"search\";\n\t\tpayload.pinterest.custom_data = {\n\t\t\tsearch_string: wpm.getSearchTermFromUrl(),\n\t\t};\n\t}\n\n\t// TikTok\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent     : \"Search\",\n\t\t\tevent_id  : wpm.getRandomEventId(),\n\t\t\tuser      : wpm.tiktokGetEventUserData(),\n\t\t\tpage      : wpm.tiktokGetEventPageData(),\n\t\t\tproperties: {\n\t\t\t\tquery: wpm.getSearchTermFromUrl(),\n\t\t\t},\n\t\t};\n\t}\n\n\t// Snapchat\n\t// https://docs.snap.com/api/marketing-api/Conversions-API/Parameters\n\t// https://businesshelp.snapchat.com/s/article/pixel-direct-implementation\n\tif (wpmDataLayer?.pixels?.snapchat?.loaded) {\n\t\tpayload.snapchat             = wpm.getSnapchatS2SBaseData();\n\t\tpayload.snapchat.event_name  = \"SEARCH\";\n\t\tpayload.snapchat.custom_data = {\n\t\t\tsearch_string: wpm.getSearchTermFromUrl(),\n\t\t};\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"pmw:s2s:search\", payload);\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload);\n});\n\n/**\n * Place order event\n */\njQuery(document).on(\"pmw:place-order\", (event) => {\n\n\tpmw.console.log(\"pmw:place-order event fired\", {event});\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent: \"place_order\",\n\t};\n\n\t// TikTok\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent     : \"PlaceAnOrder\",\n\t\t\tevent_id  : wpm.getRandomEventId(),\n\t\t\tuser      : wpm.tiktokGetEventUserData(),\n\t\t\tpage      : wpm.tiktokGetEventPageData(),\n\t\t\tproperties: wpm.tiktokGetPropertiesFromCart(),\n\t\t};\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"pmw:s2s:place-order\", payload);\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload);\n});\n\n/**\n * Order received event\n */\njQuery(document).on(\"pmw:view-order-received-page\", (event) => {\n\n\tpmw.console.log(\"pmw:view-order-received-page event fired\", {event});\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent: \"order_received\",\n\t};\n\n\t// Facebook\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"Purchase\",\n\t\t\tevent_id        : wpmDataLayer.order.id.toString(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t\tcustom_data     : {\n\t\t\t\tcontent_type: \"product\",\n\t\t\t\tvalue       : wpmDataLayer.order.value.marketing,\n\t\t\t\tcurrency    : wpmDataLayer.order.currency,\n\t\t\t\tcontent_ids : wpm.facebookContentIds(),\n\t\t\t},\n\t\t};\n\n\t\tif (wpm.retrieveData(\"referrer\")) {\n\t\t\tpayload.facebook.referrer_url = wpm.makeFullUrl(wpm.retrieveData(\"referrer\"));\n\t\t}\n\t}\n\n\t// Pinterest\n\t// https://developers.pinterest.com/docs/conversions/best/\n\t// https://developers.pinterest.com/docs/api/v5/#operation/events/create\n\t// https://developers.pinterest.com/docs/conversions/event/\n\tif (wpmDataLayer?.pixels?.pinterest?.loaded) {\n\n\t\tpayload.pinterest = wpm.getPinterestS2SBaseData();\n\n\t\tpayload.pinterest.event_name = \"checkout\";\n\t}\n\n\t// TikTok\n\t// https://ads.tiktok.com/help/article/standard-events-parameters\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent     : \"CompletePayment\",\n\t\t\tevent_id  : wpmDataLayer.order.id.toString(),\n\t\t\tuser      : wpm.tiktokGetEventUserData(),\n\t\t\tpage      : wpm.tiktokGetEventPageData(),\n\t\t\tproperties: {\n\t\t\t\tvalue       : wpmDataLayer.order.value.marketing,\n\t\t\t\tcurrency    : wpmDataLayer.order.currency,\n\t\t\t\tcontent_type: \"product\",\n\t\t\t\tcontents    : wpm.getTikTokOrderItemIds(),\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"pmw:s2s:view-order-received-page\", payload);\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\t// ! No server-to-server event is sent for this event because it is compiled and sent from the server directly\n});\n\n/**\n * Login event\n */\njQuery(document).on(\"pmw:login\", () => {\n\n\tpmw.console.log(\"pmw:login event fired\");\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent: \"login\",\n\t};\n\n\t// Snapchat\n\t// https://docs.snap.com/api/marketing-api/Conversions-API/Parameters\n\t// https://businesshelp.snapchat.com/s/article/pixel-direct-implementation\n\tif (wpmDataLayer?.pixels?.snapchat?.loaded) {\n\t\tpayload.snapchat            = wpm.getSnapchatS2SBaseData();\n\t\tpayload.snapchat.event_name = \"LOGIN\";\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"pmw:s2s:login\", payload);\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload);\n});\n\n/**\n * Run WooCommerce specific functions\n */\njQuery(document).on(\"pmw:ready\", async () => {\n\n\t// Only run if WooCommerce is active\n\tif (!wpm.isWooCommerceActive()) {\n\t\treturn;\n\t}\n\n\t/**\n\t * Run as soon as wpm namespace is loaded\n\t */\n\n\t// Watch for products visible in viewport\n\twpm.startIntersectionObserverToWatch();\n\n\t// Watch for lazy loaded products\n\twpm.startProductsMutationObserverToWatch();\n});\n\njQuery(document).on(\"pmw:load-pixels\", () => {\n\twpm.waitForPixelsAndTriggerPageView();\n});\n","/**\n * Load Hotjar functions\n */\n\n(function (wpm, $, undefined) {\n\n\twpm.load_hotjar_pixel = function () {\n\n\t\ttry {\n\t\t\t// @formatter:off\n\t\t\t(function(h,o,t,j,a,r){\n\t\t\t\th.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};\n\t\t\t\th._hjSettings={hjid:wpmDataLayer.pixels.hotjar.site_id,hjsv:6};\n\t\t\t\ta=o.getElementsByTagName('head')[0];\n\t\t\t\tr=o.createElement('script');r.async=1;\n\t\t\t\tr.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;\n\t\t\t\ta.appendChild(r);\n\t\t\t})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');\n\t\t\t// @formatter:on\n\n\t\t\twpmDataLayer.pixels.hotjar.loaded = true;\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery));\n","(function (wpm, $, undefined) {\n\n\twpm.jQueryExists = async () => new Promise(resolve => {\n\n\t\t(function waitForjQuery() {\n\t\t\tif (typeof jQuery !== \"undefined\") return resolve()\n\t\t\tsetTimeout(waitForjQuery, 100)\n\t\t})()\n\t})\n\n\twpm.waitForLibrary = (library, timeout = 5000, interval = 100) => {\n\n\t\tconst startTime = Date.now()\n\t\twhile (typeof window[library] === \"undefined\") {\n\t\t\t// Check if timeout in milliseconds has passed\n\t\t\tif (Date.now() - startTime > timeout) {\n\t\t\t\tbreak // Maximum wait time reached, exit the loop\n\t\t\t}\n\t\t\t// Wait for the interval in milliseconds before checking again\n\t\t\tsetTimeout(() => {\n\t\t\t}, interval)\n\t\t}\n\t}\n\n\twpm.wpmDataLayerFullyLoaded = async () => {\n\n\t\t// Promise that checks if the nested object wpmDataLayer.version is defined.\n\t\t// If so, resolve.\n\t\t// We must check for the nested object wpmDataLayer.version,\n\t\t// because the wpmDataLayer object can be defined early by adding products to the data layer through\n\t\t// template inline scripts. So we need to wait until the wpmDataLayer configuration objects\n\t\t// are defined.\n\t\tlet checkVar = new Promise((resolve) => {\n\t\t\t(function waitForVar() {\n\t\t\t\tif (\n\t\t\t\t\ttypeof wpmDataLayer !== \"undefined\"\n\t\t\t\t\t&& typeof wpmDataLayer.version !== \"undefined\"\n\t\t\t\t) {\n\t\t\t\t\treturn resolve()\n\t\t\t\t}\n\t\t\t\tsetTimeout(waitForVar, 100)\n\t\t\t})()\n\t\t})\n\n\t\t// Set a timeout to log a message after 6 seconds\n\t\tlet logTimeoutId = setTimeout(() => {\n\t\t\tconsole.error(\"Pixel Manager error: The wpmDataLayer is not defined. Please make sure that the wpmDataLayer script snippet is inserted and not modified by any third-party plugin, such as a consent management platform or a JavaScript optimizer.\")\n\n\t\t}, 6000)\n\n\t\tcheckVar.then(() => {\n\t\t\tclearTimeout(logTimeoutId)\n\t\t})\n\n\t\treturn checkVar\n\t}\n\n\twpm.wpHooksExists = async () => new Promise(resolve => {\n\t\t(function waitForVar() {\n\n\t\t\t// Resolve if wp.hooks is defined\n\t\t\tif (typeof wp !== \"undefined\" && typeof wp.hooks !== \"undefined\") return resolve()\n\t\t\tsetTimeout(waitForVar, 50)\n\t\t})()\n\t})\n\n\t/**\n\t * Load all WooCommerce hooks functions\n\t *\n\t * Includes safeguard in case the user changed the default load order for wp-hooks, or removed it completely.\n\t *\n\t * @returns {Promise<void>}\n\t */\n\twpm.loadWcHooksFunctions = async () => {\n\t\t// Load all WooCommerce Blocks hooks\n\t\tawait wpm.wpHooksExists()\n\t\trequire(\"./wc_hooks\")\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n",null,"document.addEventListener(\"doofinder.cart.add\", async event => {\n\n\tconst {item_id, amount} = event.detail\n\n\tif (!wpmDataLayer.products[item_id]) {\n\t\tawait wpm.getProductsFromBackend([item_id])\n\t}\n\n\tif (!wpmDataLayer.products[item_id]) {\n\t\tconsole.log(\"Product not found in dataLayer or server. Exiting...\")\n\t\treturn\n\t}\n\n\tlet product = wpm.getProductDetailsFormattedForEvent(item_id, amount)\n\n\tif (!product) {\n\t\tpmw.console.error(\"Product not found\")\n\t\treturn\n\t}\n\n\t// Trigger \"pmw:add-to-cart\" event using jQuery\n\tjQuery(document).trigger(\"pmw:add-to-cart\", product)\n})\n","/**\n * Load Google base functions\n */\n\n(function (wpm, $, undefined) {\n\n\twpm.googleConfigConditionsMet = ({type = null, log = false}) => {\n\n\t\t// Always returns true if Google Consent Mode is active\n\t\tif (wpmDataLayer?.pixels?.google?.consent_mode?.is_active) {\n\t\t\tif (log) pmw.console.log(\"Google Consent Mode is active. Loading the Google pixel.\");\n\t\t\treturn true;\n\t\t}\n\n\t\t// If a type is passed, return true if the user has given consent to that type\n\t\t// or false if the user has not given consent to that type.\n\t\tif (type) {\n\t\t\tif (!!wpm.consent.categories.get()[type]) {\n\t\t\t\tif (log) pmw.console.log(\"The category \" + type + \" has been approved. Loading the Google pixel.\");\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tif (log) pmw.console.log(\"The category \" + type + \" has been denied. Not loading the Google pixel.\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// If no type is passed, return true if the user has given consent to the statistics or marketing categories.\n\t\tif (!!(wpm.consent.categories.get().marketing || wpm.consent.categories.get().statistics)) {\n\t\t\tif (log) pmw.console.log(\"The categories statistics and/or marketing are approved. Loading the Google pixel.\");\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\twpm.fireGtagGoogleAds = () => {\n\t\ttry {\n\t\t\twpmDataLayer.pixels.google.ads.state = \"loading\";\n\n\t\t\tif (wpmDataLayer?.pixels?.google?.enhanced_conversions?.is_active) {\n\t\t\t\tObject.keys(wpmDataLayer.pixels.google.ads.conversion_ids).forEach((key) => {\n\t\t\t\t\tgtag(\"config\", key, {\"allow_enhanced_conversions\": true});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tObject.keys(wpmDataLayer.pixels.google.ads.conversion_ids).forEach((key) => {\n\t\t\t\t\tgtag(\"config\", key);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (wpmDataLayer?.pixels?.google?.ads?.conversion_ids && wpmDataLayer?.pixels?.google?.ads?.phone_conversion_label && wpmDataLayer?.pixels?.google?.ads?.phone_conversion_number) {\n\t\t\t\tgtag(\"config\", Object.keys(wpmDataLayer.pixels.google.ads.conversion_ids)[0] + \"/\" + wpmDataLayer.pixels.google.ads.phone_conversion_label, {\n\t\t\t\t\tphone_conversion_number: wpmDataLayer.pixels.google.ads.phone_conversion_number,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\twpmDataLayer.pixels.google.ads.state = \"ready\";\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\t// https://developers.google.com/tag-platform/gtagjs/reference\n\twpm.fireGtagGoogleAnalyticsGA4 = () => {\n\n\t\ttry {\n\t\t\twpmDataLayer.pixels.google.analytics.ga4.state = \"loading\";\n\n\t\t\tlet parameters = wpmDataLayer.pixels.google.analytics.ga4.parameters;\n\n\t\t\tif (wpmDataLayer?.pixels?.google?.analytics?.ga4?.debug_mode) {\n\t\t\t\tparameters.debug_mode = true;\n\t\t\t}\n\n\t\t\tgtag(\"config\", wpmDataLayer.pixels.google.analytics.ga4.measurement_id, parameters);\n\n\t\t\twpmDataLayer.pixels.google.analytics.ga4.state = \"ready\";\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\t/**\n\t * Check if Google is active\n\t *\n\t * @returns {boolean}\n\t */\n\twpm.isGoogleActive = () => {\n\n\t\t// If GA4 is active, return true\n\t\tif (wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return true;\n\n\t\t// If Google Ads is active, return true\n\t\tif (!jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversion_ids)) return true;\n\n\t\treturn false;\n\t};\n\n\twpm.getGoogleGtagId = () => {\n\n\t\tif (wpmDataLayer?.pixels?.google?.tag_id) {\n\t\t\treturn wpmDataLayer.pixels.google.tag_id;\n\t\t}\n\n\t\tif (\n\t\t\twpmDataLayer?.pixels?.google?.ads?.conversion_ids\n\t\t\t&& Object.keys(wpmDataLayer.pixels.google.ads.conversion_ids)[0]\n\t\t) {\n\t\t\treturn Object.keys(wpmDataLayer.pixels.google.ads.conversion_ids)[0];\n\t\t}\n\n\t\tif (wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) {\n\t\t\treturn wpmDataLayer.pixels.google.analytics.ga4.measurement_id;\n\t\t}\n\n\t\treturn \"\";\n\t};\n\n\n\tgetGoogleTrackingUrl = () => {\n\n\t\tif (wpmDataLayer?.pixels?.google?.tag_gateway?.measurement_path) {\n\t\t\treturn wpmDataLayer.pixels.google.tag_gateway.measurement_path + \"/\";\n\t\t}\n\n\t\treturn getGoogleStandardTrackingUrl();\n\t};\n\n\tgetGoogleStandardTrackingUrl = () => {\n\t\treturn \"https://www.googletagmanager.com/gtag/js?id=\" + wpm.getGoogleGtagId();\n\t}\n\n\twpm.loadGoogle = () => {\n\n\t\tif (!wpm.isGoogleActive()) {\n\t\t\treturn;\n\t\t}\n\n\t\twpmDataLayer.pixels.google.state = \"loading\";\n\n\t\tpmw.console.log(\"Loading Google gtag.js from\", getGoogleTrackingUrl().startsWith(\"/\") ? window.location.origin + getGoogleTrackingUrl() : getGoogleTrackingUrl());\n\n\t\twpm.loadScriptAndCacheIt(getGoogleTrackingUrl(), getGoogleStandardTrackingUrl())\n\t\t\t.then((script, textStatus) => {\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// If Google TCF is active, output the TCF script\n\t\t\t\t\t// https://developers.google.com/tag-platform/security/guides/implement-TCF-strings\n\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.tcf_support) {\n\t\t\t\t\t\twindow[\"gtag_enable_tcf_support\"] = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Initiate Google dataLayer and gtag\n\t\t\t\t\twindow.dataLayer = window.dataLayer || [];\n\n\t\t\t\t\twindow.gtag = function gtag() {\n\n\t\t\t\t\t\tpmw.console.log(\"gtag called with\", arguments);\n\t\t\t\t\t\tpmw.consent.api.processExternalGcmConsentUpdate_experimental(arguments);\n\n\t\t\t\t\t\t// Delete the source property from the arguments object\n\t\t\t\t\t\t// It is a helper property that is not needed by gtag for regular calls\n\t\t\t\t\t\tif (arguments.length === 3 && arguments[2]?.source) {\n\t\t\t\t\t\t\tdelete arguments[2].source;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataLayer.push(arguments);\n\t\t\t\t\t};\n\n\t\t\t\t\t// Google Consent Mode\n\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.consent_mode?.is_active) {\n\n\t\t\t\t\t\tlet google_consent_settings = {\n\t\t\t\t\t\t\tad_personalization     : wpm.consent.categories.get().marketing ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\tad_storage             : wpm.consent.categories.get().marketing ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\tad_user_data           : wpm.consent.categories.get().marketing ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\tanalytics_storage      : wpm.consent.categories.get().statistics ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\tfunctionality_storage  : wpm.consent.categories.get().preferences ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\tpersonalization_storage: wpm.consent.categories.get().preferences ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\tsecurity_storage       : wpm.consent.categories.get().necessary ? \"granted\" : \"denied\",\n\t\t\t\t\t\t\twait_for_update        : wpmDataLayer.pixels.google.consent_mode.wait_for_update,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (wpmDataLayer?.general?.consent_management?.restricted_regions) {\n\t\t\t\t\t\t\tgoogle_consent_settings.region = wpmDataLayer.general.consent_management.restricted_regions;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpmw.console.log(\"Google Consent Mode settings\", google_consent_settings);\n\n\t\t\t\t\t\tgtag(\"consent\", \"default\", google_consent_settings);\n\t\t\t\t\t\tgtag(\"set\", \"ads_data_redaction\", wpmDataLayer.pixels.google.consent_mode.ads_data_redaction);\n\t\t\t\t\t\tgtag(\"set\", \"url_passthrough\", wpmDataLayer.pixels.google.consent_mode.url_passthrough);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Google Linker\n\t\t\t\t\t// https://developers.google.com/gtagjs/devguide/linker\n\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.linker?.settings) {\n\t\t\t\t\t\tgtag(\"set\", \"linker\", wpmDataLayer.pixels.google.linker.settings);\n\t\t\t\t\t}\n\n\t\t\t\t\tgtag(\"js\", new Date());\n\t\t\t\t\tgtag(\"set\", \"developer_id.dNDI5Yz\", true);\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Set Enhanced Conversion Data for Google Ads and GA4 on the order received page\n\t\t\t\t\t *\n\t\t\t\t\t * https://support.google.com/google-ads/answer/9888145#zippy=%2Cvalidate-your-implementation-using-chrome-developer-tools\n\t\t\t\t\t * GA4: https://support.google.com/analytics/answer/14171598?sjid=9970117052450433556-EU\n\t\t\t\t\t */\n\t\t\t\t\tif (\n\t\t\t\t\t\twpmDataLayer?.shop?.page_type\n\t\t\t\t\t\t&& \"order_received_page\" === wpmDataLayer.shop.page_type\n\t\t\t\t\t\t&& wpmDataLayer?.order?.google?.enhanced_conversion_data\n\t\t\t\t\t) {\n\t\t\t\t\t\tgtag(\"set\", \"user_data\", wpmDataLayer.order.google.enhanced_conversion_data);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Google Ads loader\n\t\t\t\t\tif (!jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversion_ids)) {  // Only run if the pixel has set up\n\t\t\t\t\t\tif (wpm.googleConfigConditionsMet({type: \"marketing\"})) {  \t\t\t\t\t\t\t// Only run if cookie consent has been given\n\t\t\t\t\t\t\twpm.fireGtagGoogleAds();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twpm.consent.logSuppressedPixel(\"marketing\", \"Google Ads\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// GA4 loader\n\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) {  \t\t\t// Only run if the pixel has set up\n\n\t\t\t\t\t\tif (wpm.googleConfigConditionsMet({type: \"statistics\"})) {\t\t\t\t\t\t// Only run if cookie consent has been given\n\t\t\t\t\t\t\twpm.fireGtagGoogleAnalyticsGA4();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twpm.consent.logSuppressedPixel(\"statistics\", \"GA4\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\twpmDataLayer.pixels.google.state = \"ready\";\n\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((jqXHR, textStatus, errorThrown) => {\n\t\t\t\tpmw.console.error(\"The URL \" + getGoogleTrackingUrl() + \" could not be loaded. Error: \" + errorThrown);\n\t\t\t\twpmDataLayer.pixels.google.state = \"error\";\n\t\t\t});\n\t};\n\n\twpm.gtagLoaded = () => {\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tif (typeof wpmDataLayer?.pixels?.google?.state === \"undefined\") reject();\n\n\t\t\tlet startTime = 0;\n\t\t\tlet timeout   = 5000;\n\t\t\tlet frequency = 200;\n\n\t\t\t(function wait() {\n\t\t\t\tif (wpmDataLayer?.pixels?.google?.state === \"ready\") return resolve();\n\t\t\t\tif (startTime >= timeout) {\n\t\t\t\t\tpmw.console.error(\"Google gtag failed to load. Probably a third party script is blocking it.\");\n\t\t\t\t\treturn reject();\n\t\t\t\t}\n\t\t\t\tstartTime += frequency;\n\t\t\t\tsetTimeout(wait, frequency);\n\t\t\t})();\n\t\t});\n\t};\n\n\t/**\n\t * Update Google Consent Mode\n\t *\n\t * @param statistics\n\t * @param marketing\n\t * @param preferences\n\t * @param necessary\n\t */\n\twpm.updateGoogleConsentMode = ({\n\t\t\t\t\t\t\t\t\t   statistics = wpm.consent.categories.get().statistics,\n\t\t\t\t\t\t\t\t\t   marketing = wpm.consent.categories.get().marketing,\n\t\t\t\t\t\t\t\t\t   preferences = wpm.consent.categories.get().preferences,\n\t\t\t\t\t\t\t\t\t   necessary = wpm.consent.categories.get().necessary,\n\t\t\t\t\t\t\t\t   }) => {\n\n\t\ttry {\n\t\t\tif (!window.gtag) return;\n\n\t\t\tlet data = {\n\t\t\t\tanalytics_storage      : statistics ? \"granted\" : \"denied\",\n\t\t\t\tad_storage             : marketing ? \"granted\" : \"denied\",\n\t\t\t\tad_user_data           : marketing ? \"granted\" : \"denied\",\n\t\t\t\tad_personalization     : marketing ? \"granted\" : \"denied\",\n\t\t\t\tfunctionality_storage  : preferences ? \"granted\" : \"denied\",\n\t\t\t\tpersonalization_storage: preferences ? \"granted\" : \"denied\",\n\t\t\t\tsecurity_storage       : necessary ? \"granted\" : \"denied\",\n\t\t\t\tsource                 : \"pmw\",\n\t\t\t};\n\n\t\t\tgtag(\"consent\", \"update\", data);\n\t\t\tpmw.console.log(\"Google Consent Mode updated\", data);\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\n}(window.wpm = window.wpm || {}, jQuery));\n","/**\n * Load Google base\n */\n\n// Load base\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n\n// #if process.env.TIER === 'premium'\n// if (wpm.canLoadPremiumFeatures()) {\n// \trequire(\"./functions_premium\")\n// \trequire(\"./event_listeners_premium\")\n// }\n// #endif\n","/**\n * Load Google base event listeners\n */\n\n// Pixel load event listener\njQuery(document).on(\"pmw:load-pixels\", function () {\n\n\tif (typeof wpmDataLayer?.pixels?.google?.state === \"undefined\") {\n\t\tif (wpm.googleConfigConditionsMet({log: true})) {\n\t\t\twpm.loadGoogle()\n\t\t} else {\n\t\t\twpm.consent.logSuppressedPixel(\"statistics\", \"Google Analytics / Google Ads\")\n\t\t}\n\t}\n})\n\ndocument.addEventListener(\"pmw:consent:update\", ({detail}) => {\n\n\tconst consent = detail\n\n\twpm.updateGoogleConsentMode(consent)\n}, true)\n","/**\n * https://github.com/woocommerce/woocommerce-blocks/blob/trunk/src/BlockTypes/AbstractProductGrid.php#L108\n * https://github.com/woocommerce/woocommerce-blocks/issues/3483\n * https://github.com/woocommerce/woocommerce-blocks/issues/1714\n *\n * https://github.com/woocommerce/woocommerce-blocks/blob/trunk/docs/third-party-developers/extensibility/hooks/actions.md#woocommerce_add_to_cart\n *\n * https://github.com/woocommerce/woocommerce-blocks/blob/trunk/docs/internal-developers/blocks/feature-flags-and-experimental-interfaces.md\n * https://github.com/woocommerce/woocommerce-blocks/blob/trunk/docs/internal-developers/blocks/feature-flags-and-experimental-interfaces.md#usages-of-experimental-prefix\n *\n * experimental__woocommerce_blocks-product-list-render\n *\n * https://github.com/woocommerce/woocommerce-blocks/blob/a1a6eb2b574b7d39d19d67bafb747d38017289da/docs/internal-developers/blocks/feature-flags-and-experimental-interfaces.md/#usages-of-experimental-prefix\n */\n\n// TODO experimental__woocommerce_blocks-checkout-set-email-address\n// TODO experimental__woocommerce_blocks-product-view-link > selectItem\n// TODO maybe experimental__woocommerce_blocks-product-list-render, when product list is rendered send some list event\n// TODO maybe experimental__woocommerce_blocks-product-search, if the current event trigger doesn't work\n// TODO experimental__woocommerce_blocks-product-render > viewItem\n// TODO various events during entering checkout details, such as email, address, etc.\n// TODO find a way to keep view_item_list events working with the mutation observer\n\n// import {createHooks, addAction, doAction} from \"@wordpress/hooks\"\n// console.log(wp.hooks)\n// console.log(wp.hooks.applyFilters(\"ndx_change_string\", \"\"))\n\n/**\n * Add-to-cart button\n */\nwp.hooks.addAction(\n\t\"experimental__woocommerce_blocks-cart-add-item\",\n\t\"pixel-manager-for-woocommerce\",\n\tdata => {\n\t\t// console.log(\"experimental__woocommerce_blocks-cart-add-item\", data)\n\n\t\t// Works on the all product page\n\t\t// TODO make it work with variable quantities on product page\n\t\twpm.addProductToCart(data.product.id, 1);\n\t},\n);\n\n/**\n * Change cart quantity\n */\nwp.hooks.addAction(\n\t\"experimental__woocommerce_blocks-cart-set-item-quantity\",\n\t\"pixel-manager-for-woocommerce\",\n\tdata => {\n\t\t// console.log(\"experimental__woocommerce_blocks-cart-set-item-quantity\", data)\n\n\t\tif (data.quantity > data.product.quantity) {\n\t\t\twpm.addProductToCart(data.product.id, data.quantity - data.product.quantity);\n\t\t}\n\n\t\tif (data.quantity < data.product.quantity) {\n\t\t\twpm.removeProductFromCart(data.product.id, data.product.quantity - data.quantity);\n\t\t}\n\t},\n);\n\n/**\n * Remove from cart\n */\nwp.hooks.addAction(\n\t\"experimental__woocommerce_blocks-cart-remove-item\",\n\t\"pixel-manager-for-woocommerce\",\n\tdata => {\n\t\t// console.log(\"experimental__woocommerce_blocks-cart-remove-item\", data)\n\t\twpm.removeProductFromCart(data.product.id, data.quantity);\n\t},\n);\n\n/**\n * Start checkout\n */\n\n// wp.hooks.addAction(\n// \t\"experimental__woocommerce_blocks-checkout-render-checkout-form\",\n// \t\"pixel-manager-for-woocommerce\",\n// \tdata => {\n// \t\tconsole.log(\"experimental__woocommerce_blocks-checkout-render-checkout-form\", data)\n// \t\tjQuery(document).trigger(\"pmw:begin-checkout\")\n// \t},\n// )\n\n/**\n * Add shipping data\n *\n * @since 1.44.2\n */\n// Debounce function\nfunction debounce(func, wait) {\n\tlet timeout;\n\treturn function (...args) {\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(() => func.apply(this, args), wait);\n\t};\n}\n\nconst checkMandatoryFields = debounce((data) => {\n\n\tlet mandatory_fields = [\"first_name\", \"last_name\", \"address_1\", \"city\", \"postcode\", \"country\"];\n\n\tif (!data.storeCart.shippingAddress || !mandatory_fields.every(field => data.storeCart.shippingAddress[field])) return;\n\n\t// console.log(\"experimental__woocommerce_blocks-checkout-set-shipping-address\", data);\n\tjQuery(document).trigger(\"pmw:add-shipping-info\", data);\n}, 2000);\n\n// Example usage\nwp.hooks.addAction(\n\t\"experimental__woocommerce_blocks-checkout-set-shipping-address\",\n\t\"pixel-manager-for-woocommerce\",\n\tdata => {\n\t\tcheckMandatoryFields(data);\n\t},\n);\n\n/**\n * Add payment method\n *\n * @since 1.44.2\n */\nwp.hooks.addAction(\n\t\"experimental__woocommerce_blocks-checkout-set-active-payment-method\",\n\t\"pixel-manager-for-woocommerce\",\n\tdata => {\n\t\t// console.log(\"experimental__woocommerce_blocks-checkout-set-active-payment-method\", data);\n\n\t\tlet payload = {paymentType: {text: data.value}};\n\n\t\tjQuery(document).trigger(\"pmw:add-payment-info\", payload);\n\t},\n);\n\n\n// wp.hooks.addAction(\n// \t\"experimental__woocommerce_blocks-checkout-set-selected-shipping-rate\",\n// \t\"pixel-manager-for-woocommerce\",\n// \tdata => {\n// \t\tconsole.log(\"experimental__woocommerce_blocks-checkout-set-selected-shipping-rate\", data);\n//\n// \t\tlet payload = {shippingMethod: {text: data.value}};\n//\n// \t\tjQuery(document).trigger(\"pmw:add-shipping-info\", payload);\n// \t},\n// );\n\n/**\n * Checkout form submit\n */\nwp.hooks.addAction(\n\t\"experimental__woocommerce_blocks-checkout-submit\",\n\t\"pixel-manager-for-woocommerce\",\n\t() => {\n\t\t// console.log(\"experimental__woocommerce_blocks-checkout-submit\")\n\t\tjQuery(document).trigger(\"pmw:place-order\", {});\n\t},\n);\n\n\n/**\n * Only outputs an object with products. No other data or actions.\n */\n// wp.hooks.addAction(\n// \t\"experimental__woocommerce_blocks-product-list-render\",\n// \t\"pixel-manager-for-woocommerce\",\n// \t(value) => {\n//\n// \t\tif (value.products.length > 0) {\n// \t\t\tconsole.log(\"hello world 1\")\n// \t\t\tconsole.log(value)\n//\n// \t\t\tjQuery(\".add_to_cart_button\").on(\"click\", function (event) {\n//\n// \t\t\t\tconsole.log(jQuery(event.target.parentElement.parentElement))\n//\n// \t\t\t\t// console.log(\"hello world 5\");\n// \t\t\t\t//\n// \t\t\t\t// console.log(jQuery(this.parentElement.parentElement));\n// \t\t\t\t//\n// \t\t\t\t// console.log(\"hello world 6\");\n// \t\t\t\t//\n// \t\t\t\t// // element is part of a React component.\n// \t\t\t\t// // Get the parent element.\n// \t\t\t\t// const pe = event.target.parentElement.parentElement\n// \t\t\t\t// console.log(jQuery(pe)._reactInternalFiber.key)\n// \t\t\t\t//\n// \t\t\t\t// // pe is a react component. Get the key of that component.\n// \t\t\t\t// const key = pe.getAttribute(\"data-key\")\n// \t\t\t\t// console.log(key)\n//\n//\n// \t\t\t\t// console.log(element.currentTarget.dataset.key)\n// \t\t\t})\n// \t\t}\n// \t\treturn value\n// \t},\n// )\n\n// jQuery(document).on(\"pmw:ready\", () => {\n// \tjQuery(\".add_to_cart_button\").on(\"click\", function (element) {\n//\n// \t\tconsole.log(\"hello world 3\")\n// \t\t// element is part of a React component.\n// \t\t// Get the key of that component.\n// \t\tconsole.log(element.currentTarget.dataset.key)\n// \t})\n// })\n\n// wp.hooks.addAction(\n// \t'woocommerce_add_to_cart',\n// \t'pixel-manager-for-woocommerce',\n// \t( cart_item_key, product_id, quantity, variation_id, variation, cart_item_data ) => {\n// \t\tconsole.log( cart_item_key, product_id, quantity, variation_id, variation, cart_item_data );\n// \t},\n// \t()=>{\n// \t\tconsole.log(\"hello world 2\")\n// \t}\n// )\n\n/**\n * Product Search\n *\n * TODO: Make sure that it doesn't duplicate the event\n */\n// wp.hooks.addAction(\n// \t\"experimental__woocommerce_blocks-product-search\",\n// \t\"pixel-manager-for-woocommerce\",\n// \tdata => {\n// \t\t// console.log(\"experimental__woocommerce_blocks-product-search\", data)\n// \t\tjQuery(document).trigger(\"pmw:search\", data.searchTerm)\n// \t},\n// )\n",null,"(function (wpm, $, undefined) {\n\n\tconst PMW_LIBRARY_VERSION = \"1.49.1\"\n\n\twpm.getLibraryVersion = () => {\n\t\treturn PMW_LIBRARY_VERSION\n\t}\n\n\twpm.checkLibraryVersion = () => {\n\n\t\tif (wpm.getLibraryVersion() !== wpmDataLayer?.version?.number) {\n\t\t\tconsole.error(`Pixel Manager: The library version ${wpm.getLibraryVersion()} and wpmDataLayer.version.number ${wpmDataLayer.version.number} do not match. Delete the server-side cache and try again.`)\n\t\t}\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n\n","/**\n * Load Google Ads event listeners\n * */\n\n// view_item_list event\njQuery(document).on(\"pmw:view-item-list\", (event, product) => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversion_ids)) return\n\t\tif (!wpm.googleConfigConditionsMet({type: \"marketing\"})) return\n\n\n\t\tif (\n\t\t\twpmDataLayer?.shop?.variations_output &&\n\t\t\tproduct.is_variable &&\n\t\t\twpmDataLayer.pixels.google.ads.dynamic_remarketing.send_events_with_parent_ids === false\n\t\t) return\n\n\t\t// try to prevent that WC sends cached hits to Google\n\t\tif (!product) return\n\n\t\tlet data = {\n\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\titems  : [{\n\t\t\t\tid                      : product.dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type],\n\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t}],\n\t\t}\n\n\t\tif (wpmDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_item_list\", data)\n\t\t\tpmw.console.log(\"Google Ads: view_item_list event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// add_to_cart event\njQuery(document).on(\"pmw:add-to-cart\", (event, product) => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversion_ids)) return\n\t\tif (!wpm.googleConfigConditionsMet({type: \"marketing\"})) return\n\n\t\tlet data = {\n\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\tvalue  : product.quantity * product.price,\n\t\t\titems  : [{\n\t\t\t\tid                      : product.dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type],\n\t\t\t\tquantity                : product.quantity,\n\t\t\t\tprice                   : product.price,\n\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t}],\n\t\t}\n\n\t\tif (wpmDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"add_to_cart\", data)\n\t\t\tpmw.console.log(\"Google Ads: add_to_cart event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// view_item event\njQuery(document).on(\"pmw:view-item\", (event, product = null) => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversion_ids)) return\n\t\tif (!wpm.googleConfigConditionsMet({type: \"marketing\"})) return\n\n\t\tlet data = {\n\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t}\n\n\t\tif (product) {\n\t\t\tdata.value = (product.quantity ? product.quantity : 1) * product.price\n\t\t\tdata.items = [{\n\t\t\t\tid                      : product.dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type],\n\t\t\t\tquantity                : (product.quantity ? product.quantity : 1),\n\t\t\t\tprice                   : product.price,\n\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t}]\n\t\t}\n\n\t\tif (wpmDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_item\", data)\n\t\t\tpmw.console.log(\"Google Ads: view_item event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n\n// view search event\njQuery(document).on(\"pmw:search\", () => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversion_ids)) return\n\t\tif (!wpm.googleConfigConditionsMet({type: \"marketing\"})) return\n\n\n\t\tlet products = []\n\n\t\tObject.values(wpmDataLayer.products).forEach(product => {\n\n\t\t\tif (\n\t\t\t\twpmDataLayer?.shop?.variations_output &&\n\t\t\t\tproduct.is_variable &&\n\t\t\t\twpmDataLayer.pixels.google.ads.dynamic_remarketing.send_events_with_parent_ids === false\n\t\t\t) return\n\n\t\t\tproducts.push({\n\t\t\t\tid                      : product.dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type],\n\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t})\n\t\t})\n\n\t\t// console.log(products);\n\n\t\tlet data = {\n\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\t// value  : 1 * product.price,\n\t\t\titems: products,\n\t\t}\n\n\t\tif (wpmDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_search_results\", data)\n\t\t\tpmw.console.log(\"Google Ads: view_search_results event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n\n// user log in event\njQuery(document).on(\"pmw:login\", () => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversion_ids)) return\n\t\tif (!wpm.googleConfigConditionsMet({type: \"marketing\"})) return\n\n\t\tlet data = {\n\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t}\n\n\t\tif (wpmDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"login\", data)\n\t\t\tpmw.console.log(\"Google Ads: login event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n/**\n * Google Ads remarketing purchase\n *\n * https://support.google.com/google-ads/answer/7305793\n */\njQuery(document).on(\"pmw:view-order-received-page\", () => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpm.getGoogleAdsConversionIdentifiersWithLabel())) return\n\t\tif (!wpm.googleConfigConditionsMet({type: \"marketing\"})) return\n\n\t\tlet data = {\n\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\tvalue  : wpmDataLayer.order.value.marketing,\n\t\t\t// currency: wpmDataLayer.order.currency,\n\t\t\titems: wpm.getGoogleAdsRegularOrderItems(),\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"purchase\", data)\n\t\t\tpmw.console.log(\"Google Ads: purchase event sent (for remarketing lists)\", data)\n\t\t})\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n/**\n * Google Ads conversion event\n *\n * new_customer parameter: https://support.google.com/google-ads/answer/9917012\n * cart data: https://support.google.com/google-ads/answer/9028614\n * customer_lifetime_value is undocumented, but available in gtag.js\n */\njQuery(document).on(\"pmw:view-order-received-page\", () => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpm.getGoogleAdsConversionIdentifiersWithLabel())) return\n\t\tif (!wpm.googleConfigConditionsMet({type: \"marketing\"})) return\n\n\t\tlet data = {\n\t\t\tsend_to       : wpm.getGoogleAdsConversionIdentifiersWithLabel(),\n\t\t\ttransaction_id: wpmDataLayer.order.number,\n\t\t\tvalue         : wpmDataLayer.order.value.marketing,\n\t\t\tcurrency      : wpmDataLayer.order.currency,\n\t\t\tnew_customer  : wpmDataLayer.order.new_customer,\n\t\t}\n\n\t\tif (wpmDataLayer?.order?.value?.ltv?.marketing) {\n\t\t\tdata.customer_lifetime_value = wpmDataLayer.order.value.ltv.marketing\n\t\t}\n\n\t\tif (wpmDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\t// https://support.google.com/google-ads/answer/9028614\n\t\tif (wpmDataLayer?.order?.aw_merchant_id) {\n\t\t\tdata.discount         = wpmDataLayer.order.discount\n\t\t\tdata.aw_merchant_id   = wpmDataLayer.order.aw_merchant_id\n\t\t\tdata.aw_feed_country  = wpmDataLayer.order.aw_feed_country\n\t\t\tdata.aw_feed_language = wpmDataLayer.order.aw_feed_language\n\t\t\tdata.items            = wpm.getGoogleAdsRegularOrderItems()\n\t\t}\n\n\t\t// Add custom variables\n\t\tif(wpmDataLayer?.order?.google?.ads?.custom_variables) {\n\t\t\tObject.entries(wpmDataLayer.order.google.ads.custom_variables).forEach(([key, value]) => {\n\t\t\t\tdata[key] = value\n\t\t\t})\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\t// Event needs to be \"purchase\" (not \"conversion\") in order to be able to track cart data:\n\t\t\t// https://support.google.com/google-ads/answer/9028614\n\t\t\tgtag(\"event\", \"purchase\", data)\n\t\t\tpmw.console.log(\"Google Ads: conversion event sent\", data)\n\t\t})\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n",null,"/**\n * IP functions\n */\n\n(function (wpm, $, undefined) {\n\n\tconst {isRange, isIP, isV4, isV6, version: getIpVersion} = require(\"range_check\")\n\n\tconst ipServices = {\n\t\t\"cloudflare\": {\n\t\t\t\"any\": \"https://www.cloudflare.com/cdn-cgi/trace\",\n\t\t},\n\t\t// icanhazip seems to regularly be added to malware databases, despite being a legitimate service run by Cloudflare\n\t\t// https://blog.apnic.net/2021/06/17/how-a-small-free-ip-tool-survived/\n\t\t// https://major.io/p/a-new-future-for-icanhazip/\n\t\t// https://major.io/p/extra-icanhaz-services-going-offline/\n\t\t\"icanhazip\"   : {\n\t\t\t\"4\"  : \"https://ipv4.icanhazip.com\",\n\t\t\t\"6\"  : \"https://ipv6.icanhazip.com\",\n\t\t\t\"any\": \"https://icanhazip.com\",\n\t\t},\n\t\t\"ipinfo\"      : {\n\t\t\t\"any\": \"https://ipinfo.io/ip\",\n\t\t},\n\t\t\"myexternalip\": {\n\t\t\t\"any\": \"https://myexternalip.com/raw\",\n\t\t\t// \"6\": \"https://api-ipv6.myexternalip.com/raw\", // This can return an IPv4 address, so we can't use it\n\t\t},\n\t\t\"ipify\"       : {\n\t\t\t\"4\"  : \"https://api4.ipify.org\",\n\t\t\t\"6\"  : \"https://api6.ipify.org\",\n\t\t\t\"any\": \"https://api64.ipify.org\", // If IPv6 is available, AND the client is configured to prefer IPv6, this will return an IPv6 address\n\t\t},\n\t\t// Can't use amazon because its CORS policy blocks requests from the browser\n\t\t// \"amazon\"    : {\n\t\t// \t\"any\": \"https://checkip.amazonaws.com/\",\n\t\t// },\n\t\t// Can't use ip.sb because its CORS policy blocks requests from the browser\n\t\t// \"ip.sb\"     : {\n\t\t// \t\"any\": \"https://api.ip.sb/ip\",\n\t\t// },\n\t\t// Can't use seeip because its CORS policy blocks requests from the browser\n\t\t// \"seeip\"       : {\n\t\t// \t\"any\": \"https://api.seeip.org\",\n\t\t// \t\"4\": \"https://ipv4.seeip.org\",\n\t\t// \t\"6\": \"https://ipv6.seeip.org\",\n\t\t// },\n\t}\n\n\twpm.getGeoInfo = {\n\n\t\tcloudflare: async () => {\n\n\t\t\tconst response = await fetch(\"https://www.cloudflare.com/cdn-cgi/trace\")\n\n\t\t\tif (!response.ok) throw new Error(`The response from Cloudflare was not OK. Status: ${response.status}`)\n\n\t\t\tlet data = await response.text()\n\n\t\t\tif (!data) throw new Error(\"No data was returned from Cloudflare\")\n\n\t\t\t// Convert key-value pairs to JSON\n\t\t\t// https://stackoverflow.com/a/39284735/452587\n\t\t\tdata = data\n\t\t\t\t.trim()\n\t\t\t\t.split(\"\\n\")\n\t\t\t\t.reduce((obj, pair) => {\n\t\t\t\t\tpair = pair.split(\"=\")\n\t\t\t\t\treturn obj[pair[0]] = pair[1], obj\n\t\t\t\t}, {})\n\n\t\t\tif (!data.ip || !data.loc) throw new Error(\"The JSON data is missing the ip or loc key from Cloudflare\")\n\n\t\t\t/**\n\t\t\t * Cloudflare doesn't return the region.\n\t\t\t * If the website manager has set a region such as California in the restricted_regions array,\n\t\t\t * we have to validate the region. This is not possible with the data from Cloudflare.\n\t\t\t * So we have to abort the process and give the other services a chance to return the region.\n\t\t\t */\n\t\t\tif (processRegion(data.loc)) throw new Error(\"We have to validate the region, and this service is not returning the region.\")\n\n\t\t\treturn {\n\t\t\t\tip         : data.ip,\n\t\t\t\tcountryCode: data.loc,\n\t\t\t\tservice    : \"cloudflare\",\n\t\t\t}\n\t\t},\n\n\t\tgeojs: async () => {\n\n\t\t\tconst response = await fetch(\"https://get.geojs.io/v1/ip/geo.json\")\n\n\t\t\tif (!response.ok) throw new Error(`The response from geojs was not OK. Status: ${response.status}`)\n\n\t\t\tlet data = await response.json()\n\n\t\t\tif (!data) throw new Error(\"No JSON data was returned from geojs\")\n\t\t\tif (!data.ip || !data.country_code || !data.region) throw new Error(\"The JSON data is missing the ip, country_code, or region key from geojs\")\n\n\t\t\treturn {\n\t\t\t\tip         : data.ip,\n\t\t\t\tcountryCode: data.country_code,\n\t\t\t\tregion     : data.region,\n\t\t\t\tservice    : \"geojs\",\n\t\t\t}\n\t\t},\n\n\t\tipinfo: async () => {\n\n\t\t\tconst response = await fetch(\"https://ipinfo.io/json\")\n\n\t\t\tif (!response.ok) throw new Error(`The response from ipinfo was not OK from ipinfo. Status: ${response.status}`)\n\n\t\t\tlet data = await response.json()\n\n\t\t\tif (!data) throw new Error(\"No JSON data was returned from ipinfo\")\n\t\t\tif (!data.ip || !data.country || !data.region) throw new Error(\"The JSON data is missing the ip, country, or region key from ipinfo\")\n\n\t\t\treturn {\n\t\t\t\tip         : data.ip,\n\t\t\t\tcountryCode: data.country,\n\t\t\t\tregion     : data.region,\n\t\t\t\tservice    : \"ipinfo\",\n\t\t\t}\n\t\t},\n\n\t\tipapi: async () => {\n\n\t\t\tconst response = await fetch(\"https://ipapi.co/json\")\n\n\t\t\tif (!response.ok) throw new Error(`The response from ipapi was not OK. Status: ${response.status}`)\n\n\t\t\tlet data = await response.json()\n\n\t\t\tif (!data) throw new Error(\"No JSON data was returned from ipapi\")\n\t\t\tif (!data.ip || !data.country || !data.region) throw new Error(\"The JSON data is missing the ip, country, or region key from ipapi\")\n\n\t\t\treturn {\n\t\t\t\tip         : data.ip,\n\t\t\t\tcountryCode: data.country,\n\t\t\t\tregion     : data.region,\n\t\t\t\tservice    : \"ipapi\",\n\t\t\t}\n\t\t},\n\t}\n\n\t/**\n\t * /**\n\t * Cloudflare doesn't return the region.\n\t * If the website manager has set a region such as California in the restricted_regions array,\n\t * we have to validate the region. This is not possible with the data from Cloudflare.\n\t * So we have to abort the process and give the other services a chance to return the region.\n\t *\n\t * If the country code is US,\n\t * and the restricted_regions array contains \"US-CA\" or \"US-VA\",\n\t * we must process the region.\n\t *\n\t * @param countryCode\n\t * @returns {boolean}\n\t */\n\tconst processRegion = (countryCode) => {\n\n\t\tif (countryCode !== \"US \") return false\n\n\t\tconst regionsToCheck = [\"US-CA\", \"US-VA\"]\n\n\t\treturn regionsToCheck.some(region =>\n\t\t\twpmDataLayer?.general?.consent_management.restricted_regions.includes(region),\n\t\t)\n\t}\n\n\twpm.isIpAllowed = async () => {\n\n\t\t// Check the cache if the IP is allowed\n\t\tif (wpm.retrieveData(\"ipAllowed\")) {\n\t\t\treturn !!JSON.parse(wpm.retrieveData(\"ipAllowed\"))\n\t\t}\n\n\t\tconst ip = await wpm.getIp()\n\n\t\t// If the IP is blacklisted, return false and store the result in the cache\n\t\tif (isOnBlacklist(ip)) {\n\t\t\twpm.storeData(\"ipAllowed\", false)\n\t\t\treturn false\n\t\t}\n\n\t\t// If the IP is not blacklisted, return true and store the result in the cache\n\t\twpm.storeData(\"ipAllowed\", true)\n\t\treturn true\n\t}\n\n\twpm.getIp = async (ipVersion = \"any\", maxServicesToCheck = 3) => {\n\n\t\tconst validVersions = [\"any\", \"4\", \"6\"]\n\n\t\t// return null if the version is not valid and console log an error\n\t\tif (!validVersions.includes(ipVersion)) {\n\t\t\tconsole.error(\"The version argument must be one of the following: \" + validVersions.join(\", \"))\n\t\t\treturn null\n\t\t}\n\n\t\tif (ipVersion === \"any\" && wpm.retrieveData(\"ip\")) {\n\t\t\treturn wpm.retrieveData(\"ip\")\n\t\t}\n\n\t\t// Get the ipv data from the cache\n\t\tconst ipv = wpm.retrieveData(`ipv${ipVersion}`)\n\n\t\t// Return it if it is not undefined\n\t\t// The value can be an IP\n\t\t// or null if we ran the test but no IP could be retrieved\n\t\t// It is undefined if the ipVersion was not tested yet\n\t\tif (ipv !== undefined) return ipv\n\n\t\tpmw.console.log(\"Testing the IP address of the browser because one ore more server-to-server APIs are enabled and require the browser IP. It may trigger connection request errors in the console while testing the IP address. This is normal and expected behavior.\")\n\n\t\ttry {// Check the cache if the IP is already stored\n\n\t\t\tconst ip = await wpm.getIpFromAnyService(ipVersion, maxServicesToCheck)\n\n\t\t\t// if (!isIP(ip)) throw new Error(\"The returned value is not an IP address\")\n\n\t\t\t// Store the IP in the cache\n\t\t\tif (ipVersion === \"any\") {\n\t\t\t\twpm.storeData(\"ip\", ip)\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tgetIpVersion(ip) === 4\n\t\t\t\t|| (ipVersion === \"4\" && ip === null)\n\t\t\t) {\n\t\t\t\twpm.storeData(\"ipv4\", ip)\n\t\t\t}\n\n\t\t\tif (getIpVersion(ip) === 6\n\t\t\t\t|| (ipVersion === \"6\" && ip === null)\n\t\t\t) {\n\t\t\t\twpm.storeData(\"ipv6\", ip)\n\t\t\t}\n\n\t\t\treturn ip\n\t\t} catch (error) {\n\t\t\t// console.error(error)\n\t\t\treturn null\n\t\t}\n\t}\n\n\twpm.getBrowserGeoFromExternalService = async () => {\n\n\t\tconst startTime = performance.now()\n\n\t\tlet promises = []\n\n\t\tObject.keys(wpm.getGeoInfo).forEach(service => {\n\t\t\tpromises.push(wpm.getGeoInfo[service]())\n\t\t})\n\n\t\ttry {\n\t\t\tconst data = await Promise.any(promises)\n\n\t\t\tdata.countryCode = data.countryCode.toUpperCase()\n\n\t\t\tif (data.region && data.region === \"California\") {\n\t\t\t\tdata.regionCode = \"US-CA\"\n\t\t\t}\n\n\t\t\tif (data.region && data.region === \"Virginia\") {\n\t\t\t\tdata.regionCode = \"US-VA\"\n\t\t\t}\n\n\t\t\tpmw.console.log(\n\t\t\t\t\"Retrieved the browser geo info from an external service: \",\n\t\t\t\tdata,\n\t\t\t\t\" which took \",\n\t\t\t\t(performance.now() - startTime).toFixed(2) + \" ms\",\n\t\t\t)\n\n\t\t\t// wpm.storeData(\"countryCode\", data.countryCode)\n\t\t\t// wpm.storeData(\"ip\", data.ip)\n\t\t\treturn data\n\t\t} catch (error) {\n\t\t\tpmw.console.error(\"error: \", error)\n\t\t\treturn null\n\t\t}\n\t}\n\n\tconst getBrowserLocationByTimeZone = () => {\n\n\t\tconst geo         = require(\"./geo/geo.mjs\")\n\t\tconst geoLocation = geo.getLocationByTimeZone()\n\n\t\tif (geoLocation.countryCode) {\n\t\t\treturn geoLocation\n\t\t}\n\n\t\treturn null\n\t}\n\n\twpm.getBrowserGeo = async () => {\n\n\t\tlet geoFromStorage = {}\n\n\t\tif (wpm.retrieveData(\"geoCountryCode\")) geoFromStorage.countryCode = wpm.retrieveData(\"geoCountryCode\")\n\t\tif (wpm.retrieveData(\"geoRegionCode\")) geoFromStorage.regionCode = wpm.retrieveData(\"geoRegionCode\")\n\t\tif (wpm.retrieveData(\"geoRegion\")) geoFromStorage.region = wpm.retrieveData(\"geoRegion\")\n\n\t\tif (geoFromStorage.countryCode) {\n\t\t\tpmw.console.log(\"Retrieved the browser geo location from the cache: \", geoFromStorage)\n\t\t\treturn geoFromStorage\n\t\t}\n\n\t\tlet geoInfo = await wpm.getBrowserGeoFromExternalService()\n\n\t\t// If the external services fail, try to use the timezone fallback to get the country\n\t\tif (!geoInfo) {\n\n\t\t\tconst gepLocationByTimeZone = getBrowserLocationByTimeZone()\n\n\t\t\tgeoInfo = {}\n\n\t\t\tif (gepLocationByTimeZone) pmw.console.log(\"Retrieved the browser geo location from the timezone: \", gepLocationByTimeZone)\n\t\t\tif (gepLocationByTimeZone.countryCode) geoInfo.countryCode = gepLocationByTimeZone.countryCode\n\t\t\tif (gepLocationByTimeZone.regionCode) geoInfo.regionCode = gepLocationByTimeZone.regionCode\n\t\t}\n\n\t\tif (geoInfo?.ip) wpm.storeData(\"ip\", geoInfo.ip)\n\t\tif (geoInfo?.countryCode) wpm.storeData(\"geoCountryCode\", geoInfo.countryCode)\n\t\tif (geoInfo?.regionCode) wpm.storeData(\"geoRegionCode\", geoInfo.regionCode)\n\t\tif (geoInfo?.region) wpm.storeData(\"geoRegion\", geoInfo.region)\n\n\t\tif (geoInfo?.countryCode) {\n\t\t\treturn geoInfo\n\t\t}\n\n\t\treturn null\n\t}\n\n\t/**\n\t * Get the IP from the visitor using different services.\n\t * Return the first valid IP address that can be retrieved the fastest.\n\t *\n\t * @returns {Promise<IP>}\n\t */\n\twpm.getIpFromAnyService = async (ipVersion = \"any\", maxServicesToCheck = 3) => {\n\n\t\t// start tracking time\n\t\tconst startTime = performance.now()\n\n\t\t// take the ipServices object and filter it to only contain objects with an ipVersion key that matches the ipVersion argument\n\t\t// keep the original order of the ipServices object\n\t\t// also keep only the first maxServicesToCheck objects\n\n\t\tconst ipServicesFiltered = Object.keys(ipServices)\n\t\t\t.filter(service => ipServices[service][ipVersion])\n\t\t\t.slice(0, maxServicesToCheck)\n\t\t\t.reduce((obj, key) => {\n\t\t\t\t\tobj[key] = ipServices[key]\n\t\t\t\t\treturn obj\n\t\t\t\t}\n\t\t\t\t, {})\n\n\t\tlet promises = []\n\n\t\tObject.keys(ipServicesFiltered).forEach(service => {\n\t\t\t// only push if the ipVersion is available for the service\n\t\t\tif (ipServicesFiltered[service][ipVersion]) {\n\t\t\t\t// console.log(`pushing ${service} to promises array with ipVersion ${ipVersion}`)\n\t\t\t\tpromises.push(wpm.getIpFromService(service, ipVersion))\n\t\t\t}\n\t\t})\n\n\t\t// If the promises array is not empty, return the first promise that resolves the fastest\n\t\t// Ignore the promises that reject\n\t\tif (promises.length > 0) {\n\n\t\t\ttry {\n\t\t\t\tconst data = await Promise.any(promises)\n\t\t\t\t// console.log(`The Pixel Manager retrieved the IP address ${data.ip} from ${data.service} using IP version ${data.ipVersion}`)\n\n\t\t\t\t// stop tracking time\n\t\t\t\tconst endTime   = performance.now()\n\t\t\t\tconst timeTaken = (endTime - startTime).toFixed(2)\n\n\t\t\t\tpmw.console.log(`Retrieved the IP address ${data.ip} from ${data.service} which took ${timeTaken} ms`)\n\t\t\t\treturn data.ip\n\t\t\t} catch (error) {\n\t\t\t\t// console.error(error)\n\t\t\t\tpmw.console.log(`Could not retrieve an IP with version ${ipVersion} from any of the services.`)\n\t\t\t\treturn null\n\t\t\t}\n\n\t\t} else {\n\t\t\tpmw.console.log(\"No promises to resolve\")\n\t\t\treturn null\n\t\t}\n\t}\n\n\t/**\n\t * Fetches the IP address from a specified service.\n\t *\n\t * @async\n\t * @param {string} service - The name of the service to fetch the IP from.\n\t * @param {string} [ipVersion=\"any\"] - The version of the IP (e.g., \"any\" for global).\n\t * @returns {Promise<Object>} A promise that resolves to an object containing the IP address, service name, and IP version.\n\t * @throws {Error} Will reject the promise with an error if the IP version is not available for the service, the response from the service is not OK, the returned value from the service is not an IP address, or any other error occurs.\n\t */\n\twpm.getIpFromService = async (service, ipVersion = \"any\") => {\n\t\ttry {\n\n\t\t\tlet data = {\n\t\t\t\tip       : null,\n\t\t\t\tservice  : service,\n\t\t\t\tipVersion: ipVersion,\n\t\t\t}\n\n\t\t\t// Return reject if the ipVersion is not available for the service\n\t\t\tif (!ipServices[service][ipVersion]) return Promise.reject(new Error(`The IP version ${ipVersion} is not available for the service ${service}`))\n\n\t\t\tpmw.console.log(`Fetching IP from ${service} using IP version ${ipVersion}`)\n\n\t\t\tconst response = await fetch(ipServices[service][ipVersion])\n\n\t\t\tif (!response.ok) {\n\t\t\t\treturn Promise.reject(new Error(`The response from ${service} was not OK. Status: ${response.status}`))\n\t\t\t}\n\n\t\t\tlet serviceResponseData = await response.text()\n\n\t\t\tif (service === \"cloudflare\") {\n\t\t\t\t// Convert key-value pairs to JSON\n\t\t\t\tserviceResponseData = serviceResponseData\n\t\t\t\t\t.trim()\n\t\t\t\t\t.split(\"\\n\")\n\t\t\t\t\t.reduce((obj, pair) => {\n\t\t\t\t\t\tpair = pair.split(\"=\")\n\t\t\t\t\t\treturn (obj[pair[0]] = pair[1]), obj\n\t\t\t\t\t}, {})\n\n\t\t\t\tdata.ip = serviceResponseData.ip\n\t\t\t} else {\n\t\t\t\tdata.ip = serviceResponseData.trim()\n\t\t\t}\n\n\t\t\tif (!isIP(data.ip)) {\n\t\t\t\treturn Promise.reject(new Error(`The returned value from ${service} is not an IP address`))\n\t\t\t}\n\n\t\t\treturn data\n\t\t} catch (error) {\n\t\t\treturn Promise.reject(error)\n\t\t}\n\t}\n\n\t/**\n\t * Cloudflare\n\t *\n\t * Response time: approx. 70ms\n\t * IPv: Returns IPv4 or IPv6 depending on the client\n\t * Dual stack: Doesn't offer dual stack detection\n\t *\n\t * @returns {Promise<*>}\n\t */\n\tconst getIpFromCloudflare = async () => {\n\n\t\tconst response = await fetch(\"https://www.cloudflare.com/cdn-cgi/trace\")\n\t\tlet data       = await response.text()\n\n\t\t// Convert key-value pairs to JSON\n\t\t// https://stackoverflow.com/a/39284735/452587\n\t\tdata = data\n\t\t\t.trim()\n\t\t\t.split(\"\\n\")\n\t\t\t.reduce((obj, pair) => {\n\t\t\t\tpair = pair.split(\"=\")\n\t\t\t\treturn obj[pair[0]] = pair[1], obj\n\t\t\t}, {})\n\n\t\t// return the data.ip not a promise\n\t\treturn data.ip\n\t}\n\n\twpm.isIpNotAllowed = async () => {\n\t\treturn await wpm.isIpAllowed() === false\n\t}\n\n\tconst isOnBlacklist = ip => {\n\n\t\tconst {isInSubnet} = require(\"is-in-subnet\")\n\n\t\tfor (const ipName of getBlacklist()) {\n\n\t\t\tif (isCidr(ipName)) {\n\t\t\t\ttry {\n\t\t\t\t\tif (isInSubnet(ip, ipName)) return true\n\t\t\t\t} catch (e) {\n\t\t\t\t\tpmw.console.error(\"error: \", e)\n\t\t\t\t\tpmw.console.log(\"IP: \" + ip)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (ip === ipName) return true\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t}\n\n\tconst isCidr = ipName => {\n\t\treturn isRange(ipName)\n\t}\n\n\tconst getBlacklist = () => {\n\n\t\tconst blacklist = [\n\t\t\t// \"91.190.12.52/32\", // for testing\n\t\t\t// \"91.190.12.52\", // for testing\n\t\t]\n\n\t\t// https://developers.google.com/search/docs/crawling-indexing/verifying-googlebot\n\t\t// https://developers.google.com/static/search/apis/ipranges/googlebot.json\n\t\t// https://developers.google.com/static/search/apis/ipranges/special-crawlers.json\n\t\tconst google = [\n\t\t\t\"2001:4860:4801:10::/64\",\n\t\t\t\"2001:4860:4801:11::/64\",\n\t\t\t\"2001:4860:4801:12::/64\",\n\t\t\t\"2001:4860:4801:13::/64\",\n\t\t\t\"2001:4860:4801:14::/64\",\n\t\t\t\"2001:4860:4801:15::/64\",\n\t\t\t\"2001:4860:4801:16::/64\",\n\t\t\t\"2001:4860:4801:17::/64\",\n\t\t\t\"2001:4860:4801:18::/64\",\n\t\t\t\"2001:4860:4801:19::/64\",\n\t\t\t\"2001:4860:4801:1a::/64\",\n\t\t\t\"2001:4860:4801:1b::/64\",\n\t\t\t\"2001:4860:4801:1c::/64\",\n\t\t\t\"2001:4860:4801:1d::/64\",\n\t\t\t\"2001:4860:4801:1e::/64\",\n\t\t\t\"2001:4860:4801:20::/64\",\n\t\t\t\"2001:4860:4801:21::/64\",\n\t\t\t\"2001:4860:4801:22::/64\",\n\t\t\t\"2001:4860:4801:23::/64\",\n\t\t\t\"2001:4860:4801:24::/64\",\n\t\t\t\"2001:4860:4801:25::/64\",\n\t\t\t\"2001:4860:4801:26::/64\",\n\t\t\t\"2001:4860:4801:27::/64\",\n\t\t\t\"2001:4860:4801:28::/64\",\n\t\t\t\"2001:4860:4801:29::/64\",\n\t\t\t\"2001:4860:4801:2::/64\",\n\t\t\t\"2001:4860:4801:2a::/64\",\n\t\t\t\"2001:4860:4801:2b::/64\",\n\t\t\t\"2001:4860:4801:2c::/64\",\n\t\t\t\"2001:4860:4801:2d::/64\",\n\t\t\t\"2001:4860:4801:2e::/64\",\n\t\t\t\"2001:4860:4801:2f::/64\",\n\t\t\t\"2001:4860:4801:31::/64\",\n\t\t\t\"2001:4860:4801:32::/64\",\n\t\t\t\"2001:4860:4801:33::/64\",\n\t\t\t\"2001:4860:4801:34::/64\",\n\t\t\t\"2001:4860:4801:35::/64\",\n\t\t\t\"2001:4860:4801:36::/64\",\n\t\t\t\"2001:4860:4801:37::/64\",\n\t\t\t\"2001:4860:4801:38::/64\",\n\t\t\t\"2001:4860:4801:39::/64\",\n\t\t\t\"2001:4860:4801:3a::/64\",\n\t\t\t\"2001:4860:4801:3b::/64\",\n\t\t\t\"2001:4860:4801:3c::/64\",\n\t\t\t\"2001:4860:4801:3d::/64\",\n\t\t\t\"2001:4860:4801:3e::/64\",\n\t\t\t\"2001:4860:4801:40::/64\",\n\t\t\t\"2001:4860:4801:41::/64\",\n\t\t\t\"2001:4860:4801:42::/64\",\n\t\t\t\"2001:4860:4801:43::/64\",\n\t\t\t\"2001:4860:4801:44::/64\",\n\t\t\t\"2001:4860:4801:45::/64\",\n\t\t\t\"2001:4860:4801:46::/64\",\n\t\t\t\"2001:4860:4801:47::/64\",\n\t\t\t\"2001:4860:4801:48::/64\",\n\t\t\t\"2001:4860:4801:49::/64\",\n\t\t\t\"2001:4860:4801:4a::/64\",\n\t\t\t\"2001:4860:4801:50::/64\",\n\t\t\t\"2001:4860:4801:51::/64\",\n\t\t\t\"2001:4860:4801:53::/64\",\n\t\t\t\"2001:4860:4801:54::/64\",\n\t\t\t\"2001:4860:4801:55::/64\",\n\t\t\t\"2001:4860:4801:60::/64\",\n\t\t\t\"2001:4860:4801:61::/64\",\n\t\t\t\"2001:4860:4801:62::/64\",\n\t\t\t\"2001:4860:4801:63::/64\",\n\t\t\t\"2001:4860:4801:64::/64\",\n\t\t\t\"2001:4860:4801:65::/64\",\n\t\t\t\"2001:4860:4801:66::/64\",\n\t\t\t\"2001:4860:4801:67::/64\",\n\t\t\t\"2001:4860:4801:68::/64\",\n\t\t\t\"2001:4860:4801:69::/64\",\n\t\t\t\"2001:4860:4801:6a::/64\",\n\t\t\t\"2001:4860:4801:6b::/64\",\n\t\t\t\"2001:4860:4801:6c::/64\",\n\t\t\t\"2001:4860:4801:6d::/64\",\n\t\t\t\"2001:4860:4801:6e::/64\",\n\t\t\t\"2001:4860:4801:6f::/64\",\n\t\t\t\"2001:4860:4801:70::/64\",\n\t\t\t\"2001:4860:4801:71::/64\",\n\t\t\t\"2001:4860:4801:72::/64\",\n\t\t\t\"2001:4860:4801:73::/64\",\n\t\t\t\"2001:4860:4801:74::/64\",\n\t\t\t\"2001:4860:4801:75::/64\",\n\t\t\t\"2001:4860:4801:76::/64\",\n\t\t\t\"2001:4860:4801:77::/64\",\n\t\t\t\"2001:4860:4801:78::/64\",\n\t\t\t\"2001:4860:4801:79::/64\",\n\t\t\t\"2001:4860:4801:80::/64\",\n\t\t\t\"2001:4860:4801:81::/64\",\n\t\t\t\"2001:4860:4801:82::/64\",\n\t\t\t\"2001:4860:4801:83::/64\",\n\t\t\t\"2001:4860:4801:84::/64\",\n\t\t\t\"2001:4860:4801:85::/64\",\n\t\t\t\"2001:4860:4801:86::/64\",\n\t\t\t\"2001:4860:4801:87::/64\",\n\t\t\t\"2001:4860:4801:88::/64\",\n\t\t\t\"2001:4860:4801:90::/64\",\n\t\t\t\"2001:4860:4801:91::/64\",\n\t\t\t\"2001:4860:4801:92::/64\",\n\t\t\t\"2001:4860:4801:93::/64\",\n\t\t\t\"2001:4860:4801:c::/64\",\n\t\t\t\"2001:4860:4801:f::/64\",\n\t\t\t\"192.178.5.0/27\",\n\t\t\t\"34.100.182.96/28\",\n\t\t\t\"34.101.50.144/28\",\n\t\t\t\"34.118.254.0/28\",\n\t\t\t\"34.118.66.0/28\",\n\t\t\t\"34.126.178.96/28\",\n\t\t\t\"34.146.150.144/28\",\n\t\t\t\"34.147.110.144/28\",\n\t\t\t\"34.151.74.144/28\",\n\t\t\t\"34.152.50.64/28\",\n\t\t\t\"34.154.114.144/28\",\n\t\t\t\"34.155.98.32/28\",\n\t\t\t\"34.165.18.176/28\",\n\t\t\t\"34.175.160.64/28\",\n\t\t\t\"34.176.130.16/28\",\n\t\t\t\"34.22.85.0/27\",\n\t\t\t\"34.64.82.64/28\",\n\t\t\t\"34.65.242.112/28\",\n\t\t\t\"34.80.50.80/28\",\n\t\t\t\"34.88.194.0/28\",\n\t\t\t\"34.89.10.80/28\",\n\t\t\t\"34.89.198.80/28\",\n\t\t\t\"34.96.162.48/28\",\n\t\t\t\"35.247.243.240/28\",\n\t\t\t\"66.249.64.0/27\",\n\t\t\t\"66.249.64.128/27\",\n\t\t\t\"66.249.64.160/27\",\n\t\t\t\"66.249.64.224/27\",\n\t\t\t\"66.249.64.32/27\",\n\t\t\t\"66.249.64.64/27\",\n\t\t\t\"66.249.64.96/27\",\n\t\t\t\"66.249.65.0/27\",\n\t\t\t\"66.249.65.160/27\",\n\t\t\t\"66.249.65.192/27\",\n\t\t\t\"66.249.65.224/27\",\n\t\t\t\"66.249.65.32/27\",\n\t\t\t\"66.249.65.64/27\",\n\t\t\t\"66.249.65.96/27\",\n\t\t\t\"66.249.66.0/27\",\n\t\t\t\"66.249.66.160/27\",\n\t\t\t\"66.249.66.192/27\",\n\t\t\t\"66.249.66.32/27\",\n\t\t\t\"66.249.66.64/27\",\n\t\t\t\"66.249.66.96/27\",\n\t\t\t\"66.249.68.0/27\",\n\t\t\t\"66.249.68.32/27\",\n\t\t\t\"66.249.68.64/27\",\n\t\t\t\"66.249.69.0/27\",\n\t\t\t\"66.249.69.128/27\",\n\t\t\t\"66.249.69.160/27\",\n\t\t\t\"66.249.69.192/27\",\n\t\t\t\"66.249.69.224/27\",\n\t\t\t\"66.249.69.32/27\",\n\t\t\t\"66.249.69.64/27\",\n\t\t\t\"66.249.69.96/27\",\n\t\t\t\"66.249.70.0/27\",\n\t\t\t\"66.249.70.128/27\",\n\t\t\t\"66.249.70.160/27\",\n\t\t\t\"66.249.70.192/27\",\n\t\t\t\"66.249.70.224/27\",\n\t\t\t\"66.249.70.32/27\",\n\t\t\t\"66.249.70.64/27\",\n\t\t\t\"66.249.70.96/27\",\n\t\t\t\"66.249.71.0/27\",\n\t\t\t\"66.249.71.128/27\",\n\t\t\t\"66.249.71.160/27\",\n\t\t\t\"66.249.71.192/27\",\n\t\t\t\"66.249.71.224/27\",\n\t\t\t\"66.249.71.32/27\",\n\t\t\t\"66.249.71.64/27\",\n\t\t\t\"66.249.71.96/27\",\n\t\t\t\"66.249.72.0/27\",\n\t\t\t\"66.249.72.128/27\",\n\t\t\t\"66.249.72.160/27\",\n\t\t\t\"66.249.72.192/27\",\n\t\t\t\"66.249.72.224/27\",\n\t\t\t\"66.249.72.32/27\",\n\t\t\t\"66.249.72.64/27\",\n\t\t\t\"66.249.72.96/27\",\n\t\t\t\"66.249.73.0/27\",\n\t\t\t\"66.249.73.128/27\",\n\t\t\t\"66.249.73.160/27\",\n\t\t\t\"66.249.73.192/27\",\n\t\t\t\"66.249.73.224/27\",\n\t\t\t\"66.249.73.32/27\",\n\t\t\t\"66.249.73.64/27\",\n\t\t\t\"66.249.73.96/27\",\n\t\t\t\"66.249.74.0/27\",\n\t\t\t\"66.249.74.128/27\",\n\t\t\t\"66.249.74.32/27\",\n\t\t\t\"66.249.74.64/27\",\n\t\t\t\"66.249.74.96/27\",\n\t\t\t\"66.249.75.0/27\",\n\t\t\t\"66.249.75.128/27\",\n\t\t\t\"66.249.75.160/27\",\n\t\t\t\"66.249.75.192/27\",\n\t\t\t\"66.249.75.224/27\",\n\t\t\t\"66.249.75.32/27\",\n\t\t\t\"66.249.75.64/27\",\n\t\t\t\"66.249.75.96/27\",\n\t\t\t\"66.249.76.0/27\",\n\t\t\t\"66.249.76.128/27\",\n\t\t\t\"66.249.76.160/27\",\n\t\t\t\"66.249.76.192/27\",\n\t\t\t\"66.249.76.224/27\",\n\t\t\t\"66.249.76.32/27\",\n\t\t\t\"66.249.76.64/27\",\n\t\t\t\"66.249.76.96/27\",\n\t\t\t\"66.249.77.0/27\",\n\t\t\t\"66.249.77.128/27\",\n\t\t\t\"66.249.77.160/27\",\n\t\t\t\"66.249.77.192/27\",\n\t\t\t\"66.249.77.224/27\",\n\t\t\t\"66.249.77.32/27\",\n\t\t\t\"66.249.77.64/27\",\n\t\t\t\"66.249.77.96/27\",\n\t\t\t\"66.249.78.0/27\",\n\t\t\t\"66.249.78.32/27\",\n\t\t\t\"66.249.79.0/27\",\n\t\t\t\"66.249.79.128/27\",\n\t\t\t\"66.249.79.160/27\",\n\t\t\t\"66.249.79.192/27\",\n\t\t\t\"66.249.79.224/27\",\n\t\t\t\"66.249.79.32/27\",\n\t\t\t\"66.249.79.64/27\",\n\t\t\t\"66.249.79.96/27\",\n\t\t\t\"2001:4860:4801:2008::/64\",\n\t\t\t\"2001:4860:4801:200c::/64\",\n\t\t\t\"2001:4860:4801:200d::/64\",\n\t\t\t\"2001:4860:4801:2010::/64\",\n\t\t\t\"2001:4860:4801:2011::/64\",\n\t\t\t\"2001:4860:4801:2012::/64\",\n\t\t\t\"2001:4860:4801:2013::/64\",\n\t\t\t\"2001:4860:4801:2014::/64\",\n\t\t\t\"2001:4860:4801:2015::/64\",\n\t\t\t\"2001:4860:4801:2016::/64\",\n\t\t\t\"2001:4860:4801:2017::/64\",\n\t\t\t\"2001:4860:4801:2018::/64\",\n\t\t\t\"2001:4860:4801:2019::/64\",\n\t\t\t\"2001:4860:4801:201a::/64\",\n\t\t\t\"2001:4860:4801:201b::/64\",\n\t\t\t\"2001:4860:4801:201c::/64\",\n\t\t\t\"2001:4860:4801:201d::/64\",\n\t\t\t\"2001:4860:4801:201e::/64\",\n\t\t\t\"2001:4860:4801:2020::/64\",\n\t\t\t\"2001:4860:4801:2021::/64\",\n\t\t\t\"2001:4860:4801:2022::/64\",\n\t\t\t\"2001:4860:4801:2023::/64\",\n\t\t\t\"2001:4860:4801:2024::/64\",\n\t\t\t\"2001:4860:4801:2025::/64\",\n\t\t\t\"2001:4860:4801:2026::/64\",\n\t\t\t\"2001:4860:4801:2027::/64\",\n\t\t\t\"2001:4860:4801:2028::/64\",\n\t\t\t\"2001:4860:4801:2029::/64\",\n\t\t\t\"2001:4860:4801:202a::/64\",\n\t\t\t\"2001:4860:4801:202b::/64\",\n\t\t\t\"2001:4860:4801:202c::/64\",\n\t\t\t\"2001:4860:4801:202d::/64\",\n\t\t\t\"2001:4860:4801:202e::/64\",\n\t\t\t\"2001:4860:4801:202f::/64\",\n\t\t\t\"2001:4860:4801:2031::/64\",\n\t\t\t\"2001:4860:4801:2032::/64\",\n\t\t\t\"2001:4860:4801:2033::/64\",\n\t\t\t\"2001:4860:4801:2034::/64\",\n\t\t\t\"2001:4860:4801:2035::/64\",\n\t\t\t\"2001:4860:4801:2036::/64\",\n\t\t\t\"2001:4860:4801:2037::/64\",\n\t\t\t\"2001:4860:4801:2038::/64\",\n\t\t\t\"2001:4860:4801:2039::/64\",\n\t\t\t\"2001:4860:4801:203a::/64\",\n\t\t\t\"2001:4860:4801:203b::/64\",\n\t\t\t\"2001:4860:4801:203c::/64\",\n\t\t\t\"2001:4860:4801:203d::/64\",\n\t\t\t\"2001:4860:4801:203e::/64\",\n\t\t\t\"2001:4860:4801:2040::/64\",\n\t\t\t\"2001:4860:4801:2041::/64\",\n\t\t\t\"2001:4860:4801:2042::/64\",\n\t\t\t\"2001:4860:4801:2043::/64\",\n\t\t\t\"2001:4860:4801:2044::/64\",\n\t\t\t\"2001:4860:4801:2045::/64\",\n\t\t\t\"2001:4860:4801:2046::/64\",\n\t\t\t\"2001:4860:4801:2047::/64\",\n\t\t\t\"2001:4860:4801:2048::/64\",\n\t\t\t\"2001:4860:4801:2049::/64\",\n\t\t\t\"2001:4860:4801:204a::/64\",\n\t\t\t\"2001:4860:4801:2050::/64\",\n\t\t\t\"2001:4860:4801:2051::/64\",\n\t\t\t\"2001:4860:4801:2052::/64\",\n\t\t\t\"2001:4860:4801:2053::/64\",\n\t\t\t\"2001:4860:4801:2054::/64\",\n\t\t\t\"2001:4860:4801:2060::/64\",\n\t\t\t\"2001:4860:4801:2061::/64\",\n\t\t\t\"2001:4860:4801:2062::/64\",\n\t\t\t\"2001:4860:4801:2063::/64\",\n\t\t\t\"2001:4860:4801:2064::/64\",\n\t\t\t\"2001:4860:4801:2065::/64\",\n\t\t\t\"2001:4860:4801:2066::/64\",\n\t\t\t\"2001:4860:4801:2067::/64\",\n\t\t\t\"2001:4860:4801:2068::/64\",\n\t\t\t\"2001:4860:4801:2069::/64\",\n\t\t\t\"2001:4860:4801:206a::/64\",\n\t\t\t\"2001:4860:4801:206b::/64\",\n\t\t\t\"2001:4860:4801:206c::/64\",\n\t\t\t\"2001:4860:4801:206d::/64\",\n\t\t\t\"2001:4860:4801:206e::/64\",\n\t\t\t\"2001:4860:4801:206f::/64\",\n\t\t\t\"2001:4860:4801:2070::/64\",\n\t\t\t\"2001:4860:4801:2071::/64\",\n\t\t\t\"2001:4860:4801:2072::/64\",\n\t\t\t\"2001:4860:4801:2073::/64\",\n\t\t\t\"2001:4860:4801:2074::/64\",\n\t\t\t\"2001:4860:4801:2075::/64\",\n\t\t\t\"2001:4860:4801:2076::/64\",\n\t\t\t\"2001:4860:4801:2077::/64\",\n\t\t\t\"2001:4860:4801:2078::/64\",\n\t\t\t\"2001:4860:4801:2079::/64\",\n\t\t\t\"2001:4860:4801:2080::/64\",\n\t\t\t\"2001:4860:4801:2081::/64\",\n\t\t\t\"2001:4860:4801:2082::/64\",\n\t\t\t\"2001:4860:4801:2083::/64\",\n\t\t\t\"2001:4860:4801:2084::/64\",\n\t\t\t\"2001:4860:4801:2085::/64\",\n\t\t\t\"2001:4860:4801:2086::/64\",\n\t\t\t\"2001:4860:4801:2087::/64\",\n\t\t\t\"2001:4860:4801:2088::/64\",\n\t\t\t\"2001:4860:4801:2090::/64\",\n\t\t\t\"2001:4860:4801:2091::/64\",\n\t\t\t\"2001:4860:4801:2092::/64\",\n\t\t\t\"2001:4860:4801:2093::/64\",\n\t\t\t\"192.178.17.0/27\",\n\t\t\t\"209.85.238.0/27\",\n\t\t\t\"209.85.238.128/27\",\n\t\t\t\"209.85.238.160/27\",\n\t\t\t\"209.85.238.192/27\",\n\t\t\t\"209.85.238.224/27\",\n\t\t\t\"209.85.238.32/27\",\n\t\t\t\"209.85.238.64/27\",\n\t\t\t\"209.85.238.96/27\",\n\t\t\t\"66.249.87.0/27\",\n\t\t\t\"66.249.87.128/27\",\n\t\t\t\"66.249.87.160/27\",\n\t\t\t\"66.249.87.192/27\",\n\t\t\t\"66.249.87.224/27\",\n\t\t\t\"66.249.87.32/27\",\n\t\t\t\"66.249.87.64/27\",\n\t\t\t\"66.249.87.96/27\",\n\t\t\t\"66.249.89.0/27\",\n\t\t\t\"66.249.89.128/27\",\n\t\t\t\"66.249.89.160/27\",\n\t\t\t\"66.249.89.224/27\",\n\t\t\t\"66.249.89.32/27\",\n\t\t\t\"66.249.89.64/27\",\n\t\t\t\"66.249.89.96/27\",\n\t\t\t\"66.249.90.0/27\",\n\t\t\t\"66.249.90.128/27\",\n\t\t\t\"66.249.90.160/27\",\n\t\t\t\"66.249.90.192/27\",\n\t\t\t\"66.249.90.224/27\",\n\t\t\t\"66.249.90.32/27\",\n\t\t\t\"66.249.90.96/27\",\n\t\t\t\"66.249.91.0/27\",\n\t\t\t\"66.249.91.128/27\",\n\t\t\t\"66.249.91.160/27\",\n\t\t\t\"66.249.91.192/27\",\n\t\t\t\"66.249.91.224/27\",\n\t\t\t\"66.249.91.32/27\",\n\t\t\t\"66.249.91.64/27\",\n\t\t\t\"66.249.91.96/27\",\n\t\t\t\"66.249.92.0/27\",\n\t\t\t\"66.249.92.128/27\",\n\t\t\t\"66.249.92.160/27\",\n\t\t\t\"66.249.92.192/27\",\n\t\t\t\"66.249.92.32/27\",\n\t\t\t\"66.249.92.96/27\",\n\t\t\t\"72.14.199.0/27\",\n\t\t\t\"72.14.199.128/27\",\n\t\t\t\"72.14.199.160/27\",\n\t\t\t\"72.14.199.192/27\",\n\t\t\t\"72.14.199.224/27\",\n\t\t\t\"72.14.199.32/27\",\n\t\t\t\"72.14.199.64/27\",\n\t\t\t\"72.14.199.96/27\",\n\t\t\t\"74.125.148.0/27\",\n\t\t\t\"74.125.148.128/27\",\n\t\t\t\"74.125.148.160/27\",\n\t\t\t\"74.125.148.192/27\",\n\t\t\t\"74.125.148.224/27\",\n\t\t\t\"74.125.148.32/27\",\n\t\t\t\"74.125.148.64/27\",\n\t\t\t\"74.125.148.96/27\",\n\t\t\t\"74.125.149.0/27\",\n\t\t\t\"74.125.149.128/27\",\n\t\t\t\"74.125.149.160/27\",\n\t\t\t\"74.125.149.192/27\",\n\t\t\t\"74.125.149.224/27\",\n\t\t\t\"74.125.149.32/27\",\n\t\t\t\"74.125.149.64/27\",\n\t\t\t\"74.125.149.96/27\",\n\t\t\t\"74.125.150.0/27\",\n\t\t\t\"74.125.150.32/27\",\n\t\t\t\"74.125.150.64/27\",\n\t\t\t\"74.125.151.0/27\",\n\t\t\t\"74.125.151.128/27\",\n\t\t\t\"74.125.151.160/27\",\n\t\t\t\"74.125.151.192/27\",\n\t\t\t\"74.125.151.224/27\",\n\t\t\t\"74.125.151.32/27\",\n\t\t\t\"74.125.151.64/27\",\n\t\t\t\"74.125.151.96/27\",\n\t\t\t\"74.125.216.0/27\",\n\t\t\t\"74.125.216.128/27\",\n\t\t\t\"74.125.216.160/27\",\n\t\t\t\"74.125.216.192/27\",\n\t\t\t\"74.125.216.224/27\",\n\t\t\t\"74.125.216.32/27\",\n\t\t\t\"74.125.216.64/27\",\n\t\t\t\"74.125.216.96/27\",\n\t\t\t\"74.125.217.0/27\",\n\t\t\t\"74.125.217.128/27\",\n\t\t\t\"74.125.217.32/27\",\n\t\t\t\"74.125.217.64/27\",\n\t\t\t\"74.125.217.96/27\",\n\t\t\t\"74.125.218.0/27\",\n\t\t\t\"74.125.218.128/27\",\n\t\t\t\"74.125.218.160/27\",\n\t\t\t\"74.125.218.192/27\",\n\t\t\t\"74.125.218.224/27\",\n\t\t\t\"74.125.218.32/27\",\n\t\t\t\"74.125.218.64/27\",\n\t\t\t\"74.125.218.96/27\",\n\t\t\t\"74.125.219.0/27\",\n\t\t\t\"74.125.219.32/27\",\n\t\t]\n\n\t\tconst facebook = [\n\t\t\t\"69.63.176.0/20\",\n\t\t\t\"66.220.144.0/20\",\n\t\t\t\"66.220.144.0/21\",\n\t\t\t\"69.63.184.0/21\",\n\t\t\t\"69.63.176.0/21\",\n\t\t\t\"74.119.76.0/22\",\n\t\t\t\"69.171.255.0/24\",\n\t\t\t\"173.252.64.0/18\",\n\t\t\t\"69.171.224.0/19\",\n\t\t\t\"69.171.224.0/20\",\n\t\t\t\"103.4.96.0/22\",\n\t\t\t\"173.252.64.0/19\",\n\t\t\t\"31.13.64.0/18\",\n\t\t\t\"31.13.24.0/21\",\n\t\t\t\"66.220.152.0/21\",\n\t\t\t\"69.171.239.0/24\",\n\t\t\t\"69.171.240.0/20\",\n\t\t\t\"31.13.64.0/19\",\n\t\t\t\"31.13.64.0/24\",\n\t\t\t\"31.13.65.0/24\",\n\t\t\t\"31.13.67.0/24\",\n\t\t\t\"31.13.68.0/24\",\n\t\t\t\"31.13.69.0/24\",\n\t\t\t\"31.13.70.0/24\",\n\t\t\t\"31.13.71.0/24\",\n\t\t\t\"31.13.72.0/24\",\n\t\t\t\"31.13.73.0/24\",\n\t\t\t\"31.13.74.0/24\",\n\t\t\t\"31.13.75.0/24\",\n\t\t\t\"31.13.76.0/24\",\n\t\t\t\"31.13.77.0/24\",\n\t\t\t\"31.13.96.0/19\",\n\t\t\t\"31.13.66.0/24\",\n\t\t\t\"173.252.96.0/19\",\n\t\t\t\"69.63.178.0/24\",\n\t\t\t\"31.13.78.0/24\",\n\t\t\t\"31.13.79.0/24\",\n\t\t\t\"31.13.80.0/24\",\n\t\t\t\"31.13.82.0/24\",\n\t\t\t\"31.13.83.0/24\",\n\t\t\t\"31.13.84.0/24\",\n\t\t\t\"31.13.85.0/24\",\n\t\t\t\"31.13.86.0/24\",\n\t\t\t\"31.13.87.0/24\",\n\t\t\t\"31.13.88.0/24\",\n\t\t\t\"31.13.89.0/24\",\n\t\t\t\"31.13.91.0/24\",\n\t\t\t\"31.13.92.0/24\",\n\t\t\t\"31.13.93.0/24\",\n\t\t\t\"31.13.94.0/24\",\n\t\t\t\"31.13.95.0/24\",\n\t\t\t\"31.13.81.0/24\",\n\t\t\t\"179.60.192.0/22\",\n\t\t\t\"179.60.192.0/24\",\n\t\t\t\"179.60.193.0/24\",\n\t\t\t\"179.60.194.0/24\",\n\t\t\t\"179.60.195.0/24\",\n\t\t\t\"185.60.216.0/22\",\n\t\t\t\"45.64.40.0/22\",\n\t\t\t\"185.60.216.0/24\",\n\t\t\t\"185.60.217.0/24\",\n\t\t\t\"185.60.218.0/24\",\n\t\t\t\"185.60.219.0/24\",\n\t\t\t\"129.134.0.0/16\",\n\t\t\t\"157.240.0.0/16\",\n\t\t\t\"157.240.8.0/24\",\n\t\t\t\"157.240.0.0/24\",\n\t\t\t\"157.240.1.0/24\",\n\t\t\t\"157.240.2.0/24\",\n\t\t\t\"157.240.3.0/24\",\n\t\t\t\"157.240.5.0/24\",\n\t\t\t\"157.240.6.0/24\",\n\t\t\t\"157.240.7.0/24\",\n\t\t\t\"157.240.9.0/24\",\n\t\t\t\"157.240.10.0/24\",\n\t\t\t\"157.240.16.0/24\",\n\t\t\t\"157.240.19.0/24\",\n\t\t\t\"157.240.11.0/24\",\n\t\t\t\"157.240.12.0/24\",\n\t\t\t\"157.240.13.0/24\",\n\t\t\t\"157.240.14.0/24\",\n\t\t\t\"157.240.15.0/24\",\n\t\t\t\"157.240.17.0/24\",\n\t\t\t\"157.240.18.0/24\",\n\t\t\t\"157.240.20.0/24\",\n\t\t\t\"157.240.21.0/24\",\n\t\t\t\"157.240.22.0/24\",\n\t\t\t\"157.240.23.0/24\",\n\t\t\t\"157.240.0.0/17\",\n\t\t\t\"69.171.250.0/24\",\n\t\t\t\"204.15.20.0/22\",\n\t\t\t\"157.240.192.0/24\",\n\t\t\t\"157.240.198.0/24\",\n\t\t\t\"102.132.96.0/20\",\n\t\t\t\"102.132.96.0/24\",\n\t\t\t\"102.132.97.0/24\",\n\t\t\t\"157.240.26.0/24\",\n\t\t\t\"157.240.27.0/24\",\n\t\t\t\"157.240.28.0/24\",\n\t\t\t\"157.240.29.0/24\",\n\t\t\t\"157.240.30.0/24\",\n\t\t\t\"129.134.28.0/24\",\n\t\t\t\"129.134.29.0/24\",\n\t\t\t\"157.240.208.0/24\",\n\t\t\t\"157.240.193.0/24\",\n\t\t\t\"157.240.194.0/24\",\n\t\t\t\"157.240.195.0/24\",\n\t\t\t\"157.240.197.0/24\",\n\t\t\t\"157.240.196.0/24\",\n\t\t\t\"157.240.200.0/24\",\n\t\t\t\"157.240.201.0/24\",\n\t\t\t\"157.240.203.0/24\",\n\t\t\t\"157.240.204.0/24\",\n\t\t\t\"157.240.205.0/24\",\n\t\t\t\"157.240.206.0/24\",\n\t\t\t\"157.240.207.0/24\",\n\t\t\t\"157.240.209.0/24\",\n\t\t\t\"157.240.210.0/24\",\n\t\t\t\"157.240.211.0/24\",\n\t\t\t\"157.240.212.0/24\",\n\t\t\t\"157.240.213.0/24\",\n\t\t\t\"157.240.214.0/24\",\n\t\t\t\"157.240.215.0/24\",\n\t\t\t\"157.240.216.0/24\",\n\t\t\t\"157.240.222.0/24\",\n\t\t\t\"129.134.30.0/24\",\n\t\t\t\"129.134.31.0/24\",\n\t\t\t\"129.134.30.0/23\",\n\t\t\t\"129.134.25.0/24\",\n\t\t\t\"129.134.26.0/24\",\n\t\t\t\"129.134.27.0/24\",\n\t\t\t\"102.132.99.0/24\",\n\t\t\t\"102.132.101.0/24\",\n\t\t\t\"129.134.64.0/24\",\n\t\t\t\"129.134.65.0/24\",\n\t\t\t\"129.134.66.0/24\",\n\t\t\t\"129.134.67.0/24\",\n\t\t\t\"157.240.219.0/24\",\n\t\t\t\"157.240.217.0/24\",\n\t\t\t\"157.240.218.0/24\",\n\t\t\t\"157.240.199.0/24\",\n\t\t\t\"129.134.127.0/24\",\n\t\t\t\"157.240.223.0/24\",\n\t\t\t\"157.240.192.0/18\",\n\t\t\t\"157.240.221.0/24\",\n\t\t\t\"157.240.220.0/24\",\n\t\t\t\"173.252.88.0/21\",\n\t\t\t\"129.134.68.0/24\",\n\t\t\t\"129.134.69.0/24\",\n\t\t\t\"129.134.70.0/24\",\n\t\t\t\"157.240.24.0/24\",\n\t\t\t\"157.240.25.0/24\",\n\t\t\t\"102.132.100.0/24\",\n\t\t\t\"157.240.31.0/24\",\n\t\t\t\"157.240.224.0/24\",\n\t\t\t\"129.134.71.0/24\",\n\t\t\t\"157.240.225.0/24\",\n\t\t\t\"157.240.226.0/24\",\n\t\t\t\"157.240.227.0/24\",\n\t\t\t\"129.134.0.0/17\",\n\t\t\t\"129.134.72.0/24\",\n\t\t\t\"129.134.73.0/24\",\n\t\t\t\"129.134.74.0/24\",\n\t\t\t\"185.89.218.0/24\",\n\t\t\t\"185.89.219.0/24\",\n\t\t\t\"185.89.218.0/23\",\n\t\t\t\"157.240.228.0/24\",\n\t\t\t\"157.240.229.0/24\",\n\t\t\t\"129.134.76.0/24\",\n\t\t\t\"129.134.75.0/24\",\n\t\t\t\"157.240.239.0/24\",\n\t\t\t\"157.240.240.0/24\",\n\t\t\t\"157.240.241.0/24\",\n\t\t\t\"157.240.231.0/24\",\n\t\t\t\"157.240.232.0/24\",\n\t\t\t\"157.240.233.0/24\",\n\t\t\t\"157.240.234.0/24\",\n\t\t\t\"157.240.235.0/24\",\n\t\t\t\"157.240.236.0/24\",\n\t\t\t\"129.134.77.0/24\",\n\t\t\t\"129.134.78.0/24\",\n\t\t\t\"129.134.79.0/24\",\n\t\t\t\"157.240.237.0/24\",\n\t\t\t\"157.240.238.0/24\",\n\t\t\t\"157.240.242.0/24\",\n\t\t\t\"157.240.243.0/24\",\n\t\t\t\"129.134.112.0/24\",\n\t\t\t\"157.240.100.0/24\",\n\t\t\t\"157.240.98.0/24\",\n\t\t\t\"157.240.96.0/24\",\n\t\t\t\"157.240.99.0/24\",\n\t\t\t\"157.240.101.0/24\",\n\t\t\t\"129.134.113.0/24\",\n\t\t\t\"129.134.114.0/24\",\n\t\t\t\"157.240.97.0/24\",\n\t\t\t\"129.134.115.0/24\",\n\t\t\t\"157.240.244.0/24\",\n\t\t\t\"157.240.245.0/24\",\n\t\t\t\"157.240.246.0/24\",\n\t\t\t\"157.240.247.0/24\",\n\t\t\t\"157.240.248.0/24\",\n\t\t\t\"157.240.249.0/24\",\n\t\t\t\"157.240.250.0/24\",\n\t\t\t\"163.70.128.0/17\",\n\t\t\t\"163.77.128.0/17\",\n\t\t\t\"157.240.251.0/24\",\n\t\t\t\"157.240.252.0/24\",\n\t\t\t\"157.240.253.0/24\",\n\t\t\t\"147.75.208.0/20\",\n\t\t\t\"157.240.254.0/24\",\n\t\t\t\"185.89.219.0/24\",\n\t\t\t\"185.89.218.0/24\",\n\t\t\t\"185.89.218.0/23\",\n\t\t\t\"185.89.216.0/22\",\n\t\t\t\"147.75.208.0/20\",\n\t\t\t\"204.15.20.0/22\",\n\t\t\t\"69.63.176.0/20\",\n\t\t\t\"69.63.176.0/21\",\n\t\t\t\"69.63.184.0/21\",\n\t\t\t\"66.220.144.0/20\",\n\t\t\t\"69.63.176.0/20\",\n\t\t\t\"2620:0:1c00::/40\",\n\t\t\t\"2a03:2880::/32\",\n\t\t\t\"2a03:2880:fffe::/48\",\n\t\t\t\"2a03:2880:ffff::/48\",\n\t\t\t\"2620:0:1cff::/48\",\n\t\t\t\"2a03:2880:f001::/48\",\n\t\t\t\"2a03:2880:f003::/48\",\n\t\t\t\"2a03:2880:f004::/48\",\n\t\t\t\"2a03:2880:f005::/48\",\n\t\t\t\"2a03:2880:f006::/48\",\n\t\t\t\"2a03:2880:f007::/48\",\n\t\t\t\"2a03:2880:f008::/48\",\n\t\t\t\"2a03:2880:f00a::/48\",\n\t\t\t\"2a03:2880:f00c::/48\",\n\t\t\t\"2a03:2880:f00d::/48\",\n\t\t\t\"2a03:2880:f00e::/48\",\n\t\t\t\"2a03:2880:f00f::/48\",\n\t\t\t\"2a03:2880:f010::/48\",\n\t\t\t\"2a03:2880:f011::/48\",\n\t\t\t\"2a03:2880:f012::/48\",\n\t\t\t\"2a03:2880:f013::/48\",\n\t\t\t\"2a03:2880:f016::/48\",\n\t\t\t\"2a03:2880:f017::/48\",\n\t\t\t\"2a03:2880:f019::/48\",\n\t\t\t\"2a03:2880:f01b::/48\",\n\t\t\t\"2a03:2880:f01c::/48\",\n\t\t\t\"2a03:2880:f01f::/48\",\n\t\t\t\"2a03:2880:1000::/36\",\n\t\t\t\"2a03:2880:2000::/36\",\n\t\t\t\"2a03:2880:3000::/36\",\n\t\t\t\"2a03:2880:4000::/36\",\n\t\t\t\"2a03:2880:5000::/36\",\n\t\t\t\"2a03:2880:6000::/36\",\n\t\t\t\"2a03:2880:7000::/36\",\n\t\t\t\"2a03:2880:f021::/48\",\n\t\t\t\"2a03:2880:f023::/48\",\n\t\t\t\"2a03:2880:f024::/48\",\n\t\t\t\"2a03:2880:f027::/48\",\n\t\t\t\"2a03:2880:f028::/48\",\n\t\t\t\"2a03:2880:f029::/48\",\n\t\t\t\"2a03:2880:f02b::/48\",\n\t\t\t\"2a03:2880:f02c::/48\",\n\t\t\t\"2a03:2880:f02d::/48\",\n\t\t\t\"2a03:2880:f02e::/48\",\n\t\t\t\"2a03:2880:f02f::/48\",\n\t\t\t\"2a03:2880:f030::/48\",\n\t\t\t\"2a03:2880:f031::/48\",\n\t\t\t\"2a03:2880:f032::/48\",\n\t\t\t\"2a03:2880:f033::/48\",\n\t\t\t\"2a03:2880:f034::/48\",\n\t\t\t\"2a03:2880:f035::/48\",\n\t\t\t\"2a03:2880:f036::/48\",\n\t\t\t\"2a03:2880:f037::/48\",\n\t\t\t\"2a03:2880:f038::/48\",\n\t\t\t\"2a03:2880:f03a::/48\",\n\t\t\t\"2a03:2880:f03b::/48\",\n\t\t\t\"2a03:2880:f03d::/48\",\n\t\t\t\"2a03:2880:f03e::/48\",\n\t\t\t\"2a03:2880:f03f::/48\",\n\t\t\t\"2401:db00::/32\",\n\t\t\t\"2a03:2880::/36\",\n\t\t\t\"2a03:2880:f101::/48\",\n\t\t\t\"2a03:2880:f201::/48\",\n\t\t\t\"2a03:2880:f103::/48\",\n\t\t\t\"2a03:2880:f203::/48\",\n\t\t\t\"2a03:2880:f104::/48\",\n\t\t\t\"2a03:2880:f204::/48\",\n\t\t\t\"2a03:2880:f107::/48\",\n\t\t\t\"2a03:2880:f207::/48\",\n\t\t\t\"2a03:2880:f108::/48\",\n\t\t\t\"2a03:2880:f208::/48\",\n\t\t\t\"2a03:2880:f10a::/48\",\n\t\t\t\"2a03:2880:f20a::/48\",\n\t\t\t\"2a03:2880:f10d::/48\",\n\t\t\t\"2a03:2880:f20d::/48\",\n\t\t\t\"2a03:2880:f10e::/48\",\n\t\t\t\"2a03:2880:f20e::/48\",\n\t\t\t\"2a03:2880:f10f::/48\",\n\t\t\t\"2a03:2880:f20f::/48\",\n\t\t\t\"2a03:2880:f110::/48\",\n\t\t\t\"2a03:2880:f210::/48\",\n\t\t\t\"2a03:2880:f111::/48\",\n\t\t\t\"2a03:2880:f211::/48\",\n\t\t\t\"2a03:2880:f112::/48\",\n\t\t\t\"2a03:2880:f212::/48\",\n\t\t\t\"2a03:2880:f116::/48\",\n\t\t\t\"2a03:2880:f216::/48\",\n\t\t\t\"2a03:2880:f117::/48\",\n\t\t\t\"2a03:2880:f217::/48\",\n\t\t\t\"2a03:2880:f119::/48\",\n\t\t\t\"2a03:2880:f219::/48\",\n\t\t\t\"2a03:2880:f11f::/48\",\n\t\t\t\"2a03:2880:f21f::/48\",\n\t\t\t\"2a03:2880:f121::/48\",\n\t\t\t\"2a03:2880:f221::/48\",\n\t\t\t\"2a03:2880:f123::/48\",\n\t\t\t\"2a03:2880:f223::/48\",\n\t\t\t\"2a03:2880:f10c::/48\",\n\t\t\t\"2a03:2880:f20c::/48\",\n\t\t\t\"2a03:2880:f105::/48\",\n\t\t\t\"2a03:2880:f205::/48\",\n\t\t\t\"2a03:2880:f106::/48\",\n\t\t\t\"2a03:2880:f206::/48\",\n\t\t\t\"2a03:2880:f11b::/48\",\n\t\t\t\"2a03:2880:f21b::/48\",\n\t\t\t\"2a03:2880:f113::/48\",\n\t\t\t\"2a03:2880:f213::/48\",\n\t\t\t\"2a03:2880:f11c::/48\",\n\t\t\t\"2a03:2880:f21c::/48\",\n\t\t\t\"2a03:2880:f128::/48\",\n\t\t\t\"2a03:2880:f228::/48\",\n\t\t\t\"2a03:2880:f02a::/48\",\n\t\t\t\"2a03:2880:f12a::/48\",\n\t\t\t\"2a03:2880:f22a::/48\",\n\t\t\t\"2a03:2880:f12f::/48\",\n\t\t\t\"2a03:2880:f22f::/48\",\n\t\t\t\"2a03:2880:f124::/48\",\n\t\t\t\"2a03:2880:f127::/48\",\n\t\t\t\"2a03:2880:f129::/48\",\n\t\t\t\"2a03:2880:f12b::/48\",\n\t\t\t\"2a03:2880:f12c::/48\",\n\t\t\t\"2a03:2880:f12d::/48\",\n\t\t\t\"2a03:2880:f12e::/48\",\n\t\t\t\"2a03:2880:f130::/48\",\n\t\t\t\"2a03:2880:f131::/48\",\n\t\t\t\"2a03:2880:f132::/48\",\n\t\t\t\"2a03:2880:f133::/48\",\n\t\t\t\"2a03:2880:f134::/48\",\n\t\t\t\"2a03:2880:f135::/48\",\n\t\t\t\"2a03:2880:f136::/48\",\n\t\t\t\"2a03:2880:f137::/48\",\n\t\t\t\"2a03:2880:f138::/48\",\n\t\t\t\"2a03:2880:f13a::/48\",\n\t\t\t\"2a03:2880:f13b::/48\",\n\t\t\t\"2a03:2880:f13d::/48\",\n\t\t\t\"2a03:2880:f13e::/48\",\n\t\t\t\"2a03:2880:f13f::/48\",\n\t\t\t\"2a03:2880:f224::/48\",\n\t\t\t\"2a03:2880:f227::/48\",\n\t\t\t\"2a03:2880:f229::/48\",\n\t\t\t\"2a03:2880:f22b::/48\",\n\t\t\t\"2a03:2880:f22c::/48\",\n\t\t\t\"2a03:2880:f22d::/48\",\n\t\t\t\"2a03:2880:f22e::/48\",\n\t\t\t\"2a03:2880:f230::/48\",\n\t\t\t\"2a03:2880:f231::/48\",\n\t\t\t\"2a03:2880:f232::/48\",\n\t\t\t\"2a03:2880:f233::/48\",\n\t\t\t\"2a03:2880:f234::/48\",\n\t\t\t\"2a03:2880:f235::/48\",\n\t\t\t\"2a03:2880:f236::/48\",\n\t\t\t\"2a03:2880:f237::/48\",\n\t\t\t\"2a03:2880:f238::/48\",\n\t\t\t\"2a03:2880:f23a::/48\",\n\t\t\t\"2a03:2880:f23b::/48\",\n\t\t\t\"2a03:2880:f23d::/48\",\n\t\t\t\"2a03:2880:f23e::/48\",\n\t\t\t\"2a03:2880:f23f::/48\",\n\t\t\t\"2a03:2880:f0ff::/48\",\n\t\t\t\"2a03:2880:f1ff::/48\",\n\t\t\t\"2a03:2880:f2ff::/48\",\n\t\t\t\"2a03:2880:f044::/48\",\n\t\t\t\"2a03:2880:f144::/48\",\n\t\t\t\"2a03:2880:f244::/48\",\n\t\t\t\"2a03:2880:f042::/48\",\n\t\t\t\"2a03:2880:f043::/48\",\n\t\t\t\"2a03:2880:f045::/48\",\n\t\t\t\"2a03:2880:f046::/48\",\n\t\t\t\"2a03:2880:f047::/48\",\n\t\t\t\"2a03:2880:f048::/48\",\n\t\t\t\"2a03:2880:f04a::/48\",\n\t\t\t\"2a03:2880:f04c::/48\",\n\t\t\t\"2a03:2880:f04b::/48\",\n\t\t\t\"2a03:2880:f04d::/48\",\n\t\t\t\"2a03:2880:f259::/48\",\n\t\t\t\"2a03:2880:f258::/48\",\n\t\t\t\"2a03:2880:f257::/48\",\n\t\t\t\"2a03:2880:f256::/48\",\n\t\t\t\"2a03:2880:f255::/48\",\n\t\t\t\"2a03:2880:f254::/48\",\n\t\t\t\"2a03:2880:f253::/48\",\n\t\t\t\"2a03:2880:f252::/48\",\n\t\t\t\"2a03:2880:f250::/48\",\n\t\t\t\"2a03:2880:f24f::/48\",\n\t\t\t\"2a03:2880:f24d::/48\",\n\t\t\t\"2a03:2880:f24e::/48\",\n\t\t\t\"2a03:2880:f24c::/48\",\n\t\t\t\"2a03:2880:f24b::/48\",\n\t\t\t\"2a03:2880:f24a::/48\",\n\t\t\t\"2a03:2880:f248::/48\",\n\t\t\t\"2a03:2880:f247::/48\",\n\t\t\t\"2a03:2880:f246::/48\",\n\t\t\t\"2a03:2880:f245::/48\",\n\t\t\t\"2a03:2880:f243::/48\",\n\t\t\t\"2a03:2880:f242::/48\",\n\t\t\t\"2a03:2880:f241::/48\",\n\t\t\t\"2a03:2880:f240::/48\",\n\t\t\t\"2a03:2880:f159::/48\",\n\t\t\t\"2a03:2880:f158::/48\",\n\t\t\t\"2a03:2880:f157::/48\",\n\t\t\t\"2a03:2880:f156::/48\",\n\t\t\t\"2a03:2880:f155::/48\",\n\t\t\t\"2a03:2880:f154::/48\",\n\t\t\t\"2a03:2880:f153::/48\",\n\t\t\t\"2a03:2880:f152::/48\",\n\t\t\t\"2a03:2880:f150::/48\",\n\t\t\t\"2a03:2880:f14f::/48\",\n\t\t\t\"2a03:2880:f14e::/48\",\n\t\t\t\"2a03:2880:f14d::/48\",\n\t\t\t\"2a03:2880:f14c::/48\",\n\t\t\t\"2a03:2880:f14b::/48\",\n\t\t\t\"2a03:2880:f14a::/48\",\n\t\t\t\"2a03:2880:f148::/48\",\n\t\t\t\"2a03:2880:f147::/48\",\n\t\t\t\"2a03:2880:f146::/48\",\n\t\t\t\"2a03:2880:f145::/48\",\n\t\t\t\"2a03:2880:f143::/48\",\n\t\t\t\"2a03:2880:f142::/48\",\n\t\t\t\"2a03:2880:f141::/48\",\n\t\t\t\"2a03:2880:f140::/48\",\n\t\t\t\"2a03:2880:f059::/48\",\n\t\t\t\"2a03:2880:f058::/48\",\n\t\t\t\"2a03:2880:f057::/48\",\n\t\t\t\"2a03:2880:f056::/48\",\n\t\t\t\"2a03:2880:f055::/48\",\n\t\t\t\"2a03:2880:f054::/48\",\n\t\t\t\"2a03:2880:f053::/48\",\n\t\t\t\"2a03:2880:f052::/48\",\n\t\t\t\"2a03:2880:f050::/48\",\n\t\t\t\"2a03:2880:f04f::/48\",\n\t\t\t\"2a03:2880:f04e::/48\",\n\t\t\t\"2a03:2880:ff0b::/48\",\n\t\t\t\"2a03:2880:ff0c::/48\",\n\t\t\t\"2a03:2880:f040::/48\",\n\t\t\t\"2a03:2880:f041::/48\",\n\t\t\t\"2a03:2880:f0fc::/48\",\n\t\t\t\"2a03:2880:f0fd::/48\",\n\t\t\t\"2a03:2880:f0fc::/47\",\n\t\t\t\"2a03:2880:f1fc::/48\",\n\t\t\t\"2a03:2880:f1fd::/48\",\n\t\t\t\"2a03:2880:f1fc::/47\",\n\t\t\t\"2a03:2880:ff08::/48\",\n\t\t\t\"2a03:2880:ff09::/48\",\n\t\t\t\"2a03:2880:ff0a::/48\",\n\t\t\t\"2a03:2880:f05e::/48\",\n\t\t\t\"2a03:2880:f15e::/48\",\n\t\t\t\"2a03:2880:f25e::/48\",\n\t\t\t\"2620:0:1cfa::/48\",\n\t\t\t\"2a03:2880:f05b::/48\",\n\t\t\t\"2a03:2880:f05a::/48\",\n\t\t\t\"2a03:2880:f25a::/48\",\n\t\t\t\"2a03:2880:f15c::/48\",\n\t\t\t\"2a03:2880:f000::/36\",\n\t\t\t\"2a03:2880:f05d::/48\",\n\t\t\t\"2a03:2880:f25c::/48\",\n\t\t\t\"2a03:2880:f05c::/48\",\n\t\t\t\"2a03:2880:f260::/48\",\n\t\t\t\"2a03:2880:f060::/48\",\n\t\t\t\"2a03:2880:f160::/48\",\n\t\t\t\"2a03:2880:f15d::/48\",\n\t\t\t\"2a03:2880:f25b::/48\",\n\t\t\t\"2a03:2880:f25d::/48\",\n\t\t\t\"2a03:2880:f15b::/48\",\n\t\t\t\"2a03:2880:f15a::/48\",\n\t\t\t\"2a03:2880:f161::/48\",\n\t\t\t\"2a03:2880:f061::/48\",\n\t\t\t\"2a03:2880:f261::/48\",\n\t\t\t\"2a03:2881::/32\",\n\t\t\t\"2a03:2881::/48\",\n\t\t\t\"2a03:2881:1::/48\",\n\t\t\t\"2a03:2881:2::/48\",\n\t\t\t\"2a03:2881:3::/48\",\n\t\t\t\"2a03:2880:f162::/48\",\n\t\t\t\"2a03:2880:f262::/48\",\n\t\t\t\"2a03:2881:4000::/48\",\n\t\t\t\"2a03:2881:4003::/48\",\n\t\t\t\"2a03:2881:4001::/48\",\n\t\t\t\"2a03:2881:4002::/48\",\n\t\t\t\"2a03:2880:f065::/48\",\n\t\t\t\"2a03:2880:f163::/48\",\n\t\t\t\"2a03:2880:f066::/48\",\n\t\t\t\"2a03:2880:f263::/48\",\n\t\t\t\"2a03:2880:f264::/48\",\n\t\t\t\"2a03:2880:f164::/48\",\n\t\t\t\"2a03:2880:f067::/48\",\n\t\t\t\"2a03:2880:f165::/48\",\n\t\t\t\"2a03:2880:f265::/48\",\n\t\t\t\"2a03:2880:f068::/48\",\n\t\t\t\"2a03:2881:4004::/48\",\n\t\t\t\"2a03:2880:f06a::/48\",\n\t\t\t\"2a03:2880:f266::/48\",\n\t\t\t\"2a03:2880:f166::/48\",\n\t\t\t\"2a03:2880:f267::/48\",\n\t\t\t\"2a03:2880:f06b::/48\",\n\t\t\t\"2a03:2880:f167::/48\",\n\t\t\t\"2a03:2881:4006::/48\",\n\t\t\t\"2a03:2881:7::/48\",\n\t\t\t\"2a03:2881:9::/48\",\n\t\t\t\"2a03:2881:8::/48\",\n\t\t\t\"2a03:2881:4::/48\",\n\t\t\t\"2a03:2881:6::/48\",\n\t\t\t\"2a03:2881:5::/48\",\n\t\t\t\"2a03:2881:a::/48\",\n\t\t\t\"2a03:2880:f268::/48\",\n\t\t\t\"2a03:2880:f06d::/48\",\n\t\t\t\"2a03:2880:f168::/48\",\n\t\t\t\"2a03:2881:b::/48\",\n\t\t\t\"2a03:2881:c::/48\",\n\t\t\t\"2a03:2881:4007::/48\",\n\t\t\t\"2a03:2880:f269::/48\",\n\t\t\t\"2a03:2880:f169::/48\",\n\t\t\t\"2a03:2880:f06f::/48\",\n\t\t\t\"2a03:2880:f26a::/48\",\n\t\t\t\"2a03:2880:f16a::/48\",\n\t\t\t\"2a03:2880:f070::/48\",\n\t\t\t\"2a03:2881:d::/48\",\n\t\t\t\"2a03:2881:e::/48\",\n\t\t\t\"2a03:2880:f071::/48\",\n\t\t\t\"2a03:2880:f16b::/48\",\n\t\t\t\"2a03:2880:f26b::/48\",\n\t\t\t\"2a03:2881:4008::/48\",\n\t\t\t\"2a03:2881:10::/48\",\n\t\t\t\"2a03:2881:f::/48\",\n\t\t\t\"2a03:2881:11::/48\",\n\t\t\t\"2a03:2880:f26c::/48\",\n\t\t\t\"2a03:2880:f16c::/48\",\n\t\t\t\"2a03:2880:f073::/48\",\n\t\t\t\"2a03:2880:f16d::/48\",\n\t\t\t\"2a03:2880:f074::/48\",\n\t\t\t\"2a03:2880:f26d::/48\",\n\t\t\t\"2a03:2881:4009::/48\",\n\t\t\t\"2a03:2880:f26e::/48\",\n\t\t\t\"2a03:2880:f16e::/48\",\n\t\t\t\"2a03:2880:f076::/48\",\n\t\t\t\"2a03:2880:f16f::/48\",\n\t\t\t\"2a03:2880:f26f::/48\",\n\t\t\t\"2a03:2880:f077::/48\",\n\t\t\t\"2a03:2881:12::/48\",\n\t\t\t\"2a03:2881:13::/48\",\n\t\t\t\"2a03:2881:17::/48\",\n\t\t\t\"2a03:2881:15::/48\",\n\t\t\t\"2a03:2881:18::/48\",\n\t\t\t\"2a03:2881:14::/48\",\n\t\t\t\"2a03:2881:16::/48\",\n\t\t\t\"2a03:2881:19::/48\",\n\t\t\t\"2a03:2881:4005::/48\",\n\t\t\t\"2a03:2880:f078::/48\",\n\t\t\t\"2a03:2880:f170::/48\",\n\t\t\t\"2a03:2880:f270::/48\",\n\t\t\t\"2a03:2881:400a::/48\",\n\t\t\t\"2a03:2881:400c::/48\",\n\t\t\t\"2a03:2881:400b::/48\",\n\t\t\t\"2a03:2881:400d::/48\",\n\t\t\t\"2a03:2881:1a::/48\",\n\t\t\t\"2a03:2881:1c::/48\",\n\t\t\t\"2a03:2881:1b::/48\",\n\t\t\t\"2a03:2880:f271::/48\",\n\t\t\t\"2a03:2880:f07d::/48\",\n\t\t\t\"2a03:2880:f171::/48\",\n\t\t\t\"2a03:2880:f07e::/48\",\n\t\t\t\"2a03:2880:f172::/48\",\n\t\t\t\"2a03:2880:f272::/48\",\n\t\t\t\"2a03:2880:f080::/48\",\n\t\t\t\"2a03:2880:f173::/48\",\n\t\t\t\"2a03:2880:f273::/48\",\n\t\t\t\"2a03:2880:f081::/48\",\n\t\t\t\"2a03:2880:f174::/48\",\n\t\t\t\"2a03:2880:f274::/48\",\n\t\t\t\"2a03:2880:f175::/48\",\n\t\t\t\"2a03:2880:f275::/48\",\n\t\t\t\"2a03:2880:f082::/48\",\n\t\t\t\"2a03:2880:f176::/48\",\n\t\t\t\"2a03:2880:f276::/48\",\n\t\t\t\"2a03:2880:f083::/48\",\n\t\t\t\"2a03:2880:f277::/48\",\n\t\t\t\"2a03:2880:f084::/48\",\n\t\t\t\"2a03:2880:f177::/48\",\n\t\t\t\"2a03:2881:1e::/48\",\n\t\t\t\"2a03:2880:f085::/48\",\n\t\t\t\"2a03:2880:f178::/48\",\n\t\t\t\"2a03:2880:f278::/48\",\n\t\t\t\"2a03:2880:f179::/48\",\n\t\t\t\"2a03:2880:f086::/48\",\n\t\t\t\"2a03:2880:f279::/48\",\n\t\t\t\"2a03:2880:f17a::/48\",\n\t\t\t\"2a03:2880:f08a::/48\",\n\t\t\t\"2a03:2880:f27a::/48\",\n\t\t\t\"2a03:2881:48::/45\",\n\t\t\t\"2a10:f781:10:cee0::/64\",\n\t\t\t\"2a03:83e0::/32\",\n\t\t]\n\n\t\tconst twitter = [\n\t\t\t\"199.16.156.0/22\",\n\t\t\t\"199.59.148.0/22\",\n\t\t\t\"192.133.76.0/22\",\n\t\t]\n\n\t\tconst bing = [\n\t\t\t\"157.55.39.0/24\",\n\t\t\t\"207.46.13.0/24\",\n\t\t\t\"40.77.167.0/24\",\n\t\t\t\"13.66.139.0/24\",\n\t\t\t\"13.66.144.0/24\",\n\t\t\t\"52.167.144.0/24\",\n\t\t\t\"13.67.10.16/28\",\n\t\t\t\"13.69.66.240/28\",\n\t\t\t\"13.71.172.224/28\",\n\t\t\t\"139.217.52.0/28\",\n\t\t\t\"191.233.204.224/28\",\n\t\t\t\"20.36.108.32/28\",\n\t\t\t\"20.43.120.16/28\",\n\t\t\t\"40.79.131.208/28\",\n\t\t\t\"40.79.186.176/28\",\n\t\t\t\"52.231.148.0/28\",\n\t\t\t\"20.79.107.240/28\",\n\t\t\t\"51.105.67.0/28\",\n\t\t\t\"20.125.163.80/28\",\n\t\t\t\"40.77.188.0/22\",\n\t\t\t\"65.55.210.0/24\",\n\t\t\t\"199.30.24.0/23\",\n\t\t\t\"40.77.202.0/24\",\n\t\t\t\"40.77.139.0/25\",\n\t\t\t\"20.74.197.0/28\",\n\t\t]\n\n\t\tconst pinterest = [\n\t\t\t\"54.236.1.1/32\",\n\t\t\t\"54.236.1.2/31\",\n\t\t\t\"54.236.1.4/30\",\n\t\t\t\"54.236.1.8/29\",\n\t\t\t\"54.236.1.16/28\",\n\t\t\t\"54.236.1.32/27\",\n\t\t\t\"54.236.1.64/26\",\n\t\t\t\"54.236.1.128/25\",\n\t\t]\n\n\t\tconst hotjar = [\n\t\t\t\"18.203.61.76\",\n\t\t\t\"18.203.176.135\",\n\t\t\t\"52.17.197.221\",\n\t\t]\n\n\t\tconst alexa = [\n\t\t\t\"204.236.235.245\",\n\t\t\t\"75.101.186.145\",\n\t\t]\n\n\t\tconst amazon = [\n\t\t\t\"18.207.141.103\",\n\t\t\t\"52.1.113.12\",\n\t\t]\n\n\t\tconst baidu = [\n\t\t\t\"180.76.15.0/24\",\n\t\t\t\"119.63.196.0/24\",\n\t\t\t\"115.239.212.0/24\",\n\t\t\t\"119.63.199.0/24\",\n\t\t\t\"122.81.208.0/22\",\n\t\t\t\"123.125.71.0/24\",\n\t\t\t\"180.76.4.0/24\",\n\t\t\t\"180.76.5.0/24\",\n\t\t\t\"180.76.6.0/24\",\n\t\t\t\"185.10.104.0/24\",\n\t\t\t\"220.181.108.0/24\",\n\t\t\t\"220.181.51.0/24\",\n\t\t\t\"111.13.102.0/24\",\n\t\t\t\"123.125.67.144/29\",\n\t\t\t\"123.125.67.152/31\",\n\t\t\t\"61.135.169.0/24\",\n\t\t\t\"123.125.68.68/30\",\n\t\t\t\"123.125.68.72/29\",\n\t\t\t\"123.125.68.80/28\",\n\t\t\t\"123.125.68.96/30\",\n\t\t\t\"202.46.48.0/20\",\n\t\t\t\"220.181.38.0/24\",\n\t\t\t\"123.125.68.80/30\",\n\t\t\t\"123.125.68.84/31\",\n\t\t\t\"123.125.68.0/24\",\n\t\t]\n\n\t\tconst duckduckgo = [\n\t\t\t\"20.191.45.212\",\n\t\t\t\"40.88.21.235\",\n\t\t\t\"40.76.173.151\",\n\t\t\t\"40.76.163.7\",\n\t\t\t\"20.185.79.47\",\n\t\t\t\"52.142.26.175\",\n\t\t\t\"20.185.79.15\",\n\t\t\t\"52.142.24.149\",\n\t\t\t\"40.76.162.208\",\n\t\t\t\"40.76.163.23\",\n\t\t\t\"40.76.162.191\",\n\t\t\t\"40.76.162.247\",\n\t\t]\n\n\t\tconst yahoo = [\n\t\t\t\"5.255.250.0/24\",\n\t\t\t\"37.9.87.0/24\",\n\t\t\t\"67.195.37.0/24\",\n\t\t\t\"67.195.50.0/24\",\n\t\t\t\"67.195.110.0/24\",\n\t\t\t\"67.195.111.0/24\",\n\t\t\t\"67.195.112.0/23\",\n\t\t\t\"67.195.114.0/24\",\n\t\t\t\"67.195.115.0/24\",\n\t\t\t\"68.180.224.0/21\",\n\t\t\t\"72.30.132.0/24\",\n\t\t\t\"72.30.142.0/24\",\n\t\t\t\"72.30.161.0/24\",\n\t\t\t\"72.30.196.0/24\",\n\t\t\t\"72.30.198.0/24\",\n\t\t\t\"74.6.254.0/24\",\n\t\t\t\"74.6.8.0/24\",\n\t\t\t\"74.6.13.0/24\",\n\t\t\t\"74.6.17.0/24\",\n\t\t\t\"74.6.18.0/24\",\n\t\t\t\"74.6.22.0/24\",\n\t\t\t\"74.6.27.0/24\",\n\t\t\t\"74.6.168.0/24\",\n\t\t\t\"77.88.5.0/24\",\n\t\t\t\"77.88.47.0/24\",\n\t\t\t\"93.158.161.0/24\",\n\t\t\t\"98.137.72.0/24\",\n\t\t\t\"98.137.206.0/24\",\n\t\t\t\"98.137.207.0/24\",\n\t\t\t\"98.139.168.0/24\",\n\t\t\t\"114.111.95.0/24\",\n\t\t\t\"124.83.159.0/24\",\n\t\t\t\"124.83.179.0/24\",\n\t\t\t\"124.83.223.0/24\",\n\t\t\t\"141.8.144.0/24\",\n\t\t\t\"183.79.63.0/24\",\n\t\t\t\"183.79.92.0/24\",\n\t\t\t\"203.216.255.0/24\",\n\t\t\t\"211.14.11.0/24\",\n\t\t]\n\n\t\tconst yandex = [\n\t\t\t\"100.43.90.0/24\",\n\t\t\t\"37.9.115.0/24\",\n\t\t\t\"37.140.165.0/24\",\n\t\t\t\"77.88.22.0/25\",\n\t\t\t\"77.88.29.0/24\",\n\t\t\t\"77.88.31.0/24\",\n\t\t\t\"77.88.59.0/24\",\n\t\t\t\"84.201.146.0/24\",\n\t\t\t\"84.201.148.0/24\",\n\t\t\t\"84.201.149.0/24\",\n\t\t\t\"87.250.243.0/24\",\n\t\t\t\"87.250.253.0/24\",\n\t\t\t\"93.158.147.0/24\",\n\t\t\t\"93.158.148.0/24\",\n\t\t\t\"93.158.151.0/24\",\n\t\t\t\"93.158.153.0/32\",\n\t\t\t\"95.108.128.0/24\",\n\t\t\t\"95.108.138.0/24\",\n\t\t\t\"95.108.150.0/23\",\n\t\t\t\"95.108.158.0/24\",\n\t\t\t\"95.108.156.0/24\",\n\t\t\t\"95.108.188.128/25\",\n\t\t\t\"95.108.234.0/24\",\n\t\t\t\"95.108.248.0/24\",\n\t\t\t\"100.43.80.0/24\",\n\t\t\t\"130.193.62.0/24\",\n\t\t\t\"141.8.153.0/24\",\n\t\t\t\"178.154.165.0/24\",\n\t\t\t\"178.154.166.128/25\",\n\t\t\t\"178.154.173.29\",\n\t\t\t\"178.154.200.158\",\n\t\t\t\"178.154.202.0/24\",\n\t\t\t\"178.154.205.0/24\",\n\t\t\t\"178.154.239.0/24\",\n\t\t\t\"178.154.243.0/24\",\n\t\t\t\"37.9.84.253\",\n\t\t\t\"199.21.99.99\",\n\t\t\t\"178.154.162.29\",\n\t\t\t\"178.154.203.251\",\n\t\t\t\"178.154.211.250\",\n\t\t\t\"178.154.171.0/24\",\n\t\t\t\"178.154.200.0/24\",\n\t\t\t\"178.154.244.0/24\",\n\t\t\t\"178.154.246.0/24\",\n\t\t\t\"95.108.181.0/24\",\n\t\t\t\"95.108.246.252\",\n\t\t\t\"5.45.254.0/24\",\n\t\t\t\"5.255.253.0/24\",\n\t\t\t\"37.140.141.0/24\",\n\t\t\t\"37.140.188.0/24\",\n\t\t\t\"100.43.81.0/24\",\n\t\t\t\"100.43.85.0/24\",\n\t\t\t\"100.43.91.0/24\",\n\t\t\t\"199.21.99.0/24\",\n\t\t\t\"2a02:6b8:b000::/32\",\n\t\t\t\"2a02:6b8:b010::/32\",\n\t\t\t\"2a02:6b8:b011::/32\",\n\t\t\t\"2a02:6b8:c0e::/32\",\n\t\t]\n\n\t\tconst sogou = [\n\t\t\t\"220.181.125.0/24\",\n\t\t\t\"123.126.51.64/27\",\n\t\t\t\"123.126.51.96/28\",\n\t\t\t\"123.126.68.25\",\n\t\t\t\"61.135.189.74\",\n\t\t\t\"61.135.189.75\",\n\t\t]\n\n\t\tconst youdao = [\n\t\t\t\"61.135.249.200/29\",\n\t\t\t\"61.135.249.208/28\",\n\t\t]\n\n\t\tlet customExclusionList = []\n\n\t\t// if wpmDataLayer.general.server_2_server.ip_exclude_list is array\n\t\tif (Array.isArray(wpmDataLayer.general.server_2_server.ip_exclude_list)) {\n\t\t\tcustomExclusionList = wpmDataLayer.general.server_2_server.ip_exclude_list\n\t\t}\n\n\t\treturn blacklist.concat(\n\t\t\tgoogle,\n\t\t\tfacebook,\n\t\t\ttwitter,\n\t\t\tbing,\n\t\t\tpinterest,\n\t\t\thotjar,\n\t\t\talexa,\n\t\t\tamazon,\n\t\t\tbaidu,\n\t\t\tduckduckgo,\n\t\t\tyahoo,\n\t\t\tyandex,\n\t\t\tsogou,\n\t\t\tyoudao,\n\t\t\tcustomExclusionList,\n\t\t)\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n",null,"/**\n * Load GA4 functions\n * */\n\n(function (wpm, $, undefined) {\n\n\twpm.getGA4OrderItems = function () {\n\n\t\t// \"item_id\"      : \"34\",\n\t\t// \"item_name\"    : \"Hoodie\",\n\t\t// \"quantity\"     : 1,\n\t\t// \"item_brand\"   : \"\",\n\t\t// \"item_variant\" : \"Color: blue | Logo: yes\",\n\t\t// \"price\"        : 45,\n\t\t// \"currency\"     : \"CHF\",\n\t\t// \"item_category\": \"Hoodies\"\n\n\n\t\tlet orderItems = [];\n\n\t\tObject.values(wpmDataLayer.order.items).forEach((item) => {\n\t\t\tlet orderItem;\n\n\t\t\torderItem = {\n\t\t\t\tquantity     : item.quantity,\n\t\t\t\tprice        : item.price,\n\t\t\t\titem_name    : item.name,\n\t\t\t\tcurrency     : wpmDataLayer.order.currency,\n\t\t\t\titem_category: wpmDataLayer.products[item.id].category.join(\"/\"),\n\t\t\t};\n\n\t\t\t// Check if the item has custom parameters\n\t\t\tif (item?.custom_parameters) {\n\t\t\t\t// Iterate through each key-value pair in custom parameters\n\t\t\t\tObject.keys(item.custom_parameters).forEach((key) => {\n\t\t\t\t\t// Add each custom parameter to the orderItem object\n\t\t\t\t\torderItem[key] = item.custom_parameters[key];\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (0 !== item.variation_id) {\n\n\t\t\t\torderItem.item_id      = String(wpmDataLayer.products[item.variation_id].dyn_r_ids[wpmDataLayer.pixels.google.analytics.id_type]);\n\t\t\t\torderItem.item_variant = wpmDataLayer.products[item.variation_id].variant_description;\n\t\t\t\torderItem.item_brand   = wpmDataLayer.products[item.variation_id].brand;\n\t\t\t} else {\n\n\t\t\t\torderItem.item_id    = String(wpmDataLayer.products[item.id].dyn_r_ids[wpmDataLayer.pixels.google.analytics.id_type]);\n\t\t\t\torderItem.item_brand = wpmDataLayer.products[item.id].brand;\n\t\t\t}\n\n\t\t\torderItems.push(orderItem);\n\t\t});\n\n\t\treturn orderItems;\n\t};\n\n\twpm.ga4AddFormattedCategories = (item_data, categories) => {\n\n\t\tlet maxCategories = 5;\n\n\t\t// remove categories with equal names from array\n\t\tcategories = Array.from(new Set(categories));\n\n\t\tif (Array.isArray(categories) && categories.length) {\n\n\t\t\titem_data[\"item_category\"] = categories[0];\n\n\t\t\tlet max = categories.length > maxCategories ? maxCategories : categories.length;\n\n\t\t\tfor (let i = 1; i < max; i++) {\n\t\t\t\titem_data[\"item_category\" + (i + 1)] = categories[i];\n\t\t\t}\n\t\t}\n\n\t\treturn item_data;\n\t};\n\n\twpm.getCartItemsGa4 = () => {\n\n\t\tlet data = [];\n\n\t\tObject.values(wpmDataLayer.cart).forEach(product => {\n\t\t\tdata.push(wpm.ga4GetFullProductItemData(product));\n\t\t});\n\n\t\treturn data;\n\t};\n\n\twpm.ga4GetBasicProductItemData = (product) => {\n\n\t\treturn {\n\t\t\titem_id  : product.dyn_r_ids[wpmDataLayer.pixels.google.analytics.id_type],\n\t\t\titem_name: product.name,\n\t\t\t// coupon   : \"\",\n\t\t\t// discount: 0,\n\t\t\t// affiliation: \"\",\n\t\t\titem_brand  : product.brand,\n\t\t\titem_variant: product.variant,\n\t\t\tprice       : product.price,\n\t\t\tcurrency    : wpmDataLayer.shop.currency,\n\t\t\tquantity    : product.quantity,\n\t\t};\n\t};\n\n\twpm.ga4AddListNameToProduct = (item_data, productPosition = null) => {\n\n\t\titem_data.item_list_name = wpmDataLayer.shop.list_name;\n\t\titem_data.item_list_id   = wpmDataLayer.shop.list_id;\n\n\t\tif (productPosition) {\n\t\t\titem_data.index = productPosition;\n\t\t}\n\n\t\treturn item_data;\n\t};\n\n\twpm.ga4GetFullProductItemData = (product) => {\n\n\t\tlet item_data;\n\n\t\titem_data = wpm.ga4GetBasicProductItemData(product);\n\t\titem_data = wpm.ga4AddListNameToProduct(item_data, product.position);\n\t\titem_data = wpm.ga4AddFormattedCategories(item_data, product.category);\n\n\t\treturn item_data;\n\t};\n\n}(window.wpm = window.wpm || {}, jQuery));\n","/**\n * Add functions for Facebook\n * */\n\n(function (wpm, $, undefined) {\n\n\tlet fbUserData\n\n\twpm.fbeventsJsUrl = () => {\n\n\t\tlet searchParams = new URLSearchParams(window.location.search)\n\n\t\tif (searchParams.has(\"fbevents-version\")) {\n\t\t\treturn `https://connect.facebook.net/en_US/fbevents.js?v=${searchParams.get(\"fbevents-version\")}`\n\t\t}\n\n\t\treturn wpmDataLayer?.pixels?.facebook?.fbevents_js_url\n\t}\n\n\twpm.loadFacebookPixel = () => {\n\n\t\ttry {\n\n\t\t\t// @formatter:off\n\t\t\t!function(f,b,e,v,n,t,s)\n\t\t\t{if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n\t\t\t\tn.callMethod.apply(n,arguments):n.queue.push(arguments)};\n\t\t\t\tif(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n\t\t\t\tn.queue=[];t=b.createElement(e);t.async=!0;\n\t\t\t\tt.src=v;s=b.getElementsByTagName(e)[0];\n\t\t\t\ts.parentNode.insertBefore(t,s)}(window, document,'script',\n\t\t\t\twpm.fbeventsJsUrl());\n\t\t\t// @formatter:on\n\n\t\t\tlet data = {}\n\n\t\t\t// Add user identifiers to data,\n\t\t\t// and only if fbp was set\n\t\t\tif (wpm.isFbpSet() && wpm.isFbAdvancedMatchingEnabled()) {\n\t\t\t\tdata = {...wpm.getUserIdentifiersForFb()}\n\t\t\t}\n\n\t\t\t// https://developers.facebook.com/docs/meta-pixel/advanced/#automatic-configuration\n\t\t\t// fbq(\"set\", \"autoConfig\", false, wpmDataLayer.pixels.facebook.pixel_id)\n\n\t\t\t// Initialize the Facebook Pixel and send the first PageView event\n\t\t\tfbq(\"init\", wpmDataLayer.pixels.facebook.pixel_id, data)\n\n\t\t\tif (wpmDataLayer?.pixels?.facebook?.mobile_bridge_app_id) {\n\t\t\t\tfbq(\"set\", \"mobileBridge\", wpmDataLayer.pixels.facebook.pixel_id, wpmDataLayer?.pixels?.facebook?.mobile_bridge_app_id)\n\t\t\t}\n\n\t\t\twpmDataLayer.pixels.facebook.loaded = true\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\t// https://developers.facebook.com/docs/meta-pixel/advanced/advanced-matching\n\twpm.getUserIdentifiersForFb = () => {\n\n\t\tlet data = {}\n\n\t\t// external ID\n\t\tif (wpmDataLayer?.user?.id?.raw) data.external_id = wpmDataLayer.user.id.raw\n\t\tif (wpmDataLayer?.order?.user_id) data.external_id = wpmDataLayer.order.user_id\n\n\t\t// email\n\t\tif (wpmDataLayer?.user?.email?.facebook) data.em = wpmDataLayer.user.email.facebook\n\t\tif (wpmDataLayer?.order?.billing_email_hashed) data.em = wpmDataLayer.order.billing_email_hashed\n\n\t\t// first name\n\t\tif (wpmDataLayer?.user?.first_name?.facebook) data.fn = wpmDataLayer.user.first_name.facebook\n\t\tif (wpmDataLayer?.order?.billing_first_name) data.fn = wpmDataLayer.order.billing_first_name.toLowerCase()\n\n\t\t// last name\n\t\tif (wpmDataLayer?.user?.last_name?.facebook) data.ln = wpmDataLayer.user.last_name.facebook\n\t\tif (wpmDataLayer?.order?.billing_last_name) data.ln = wpmDataLayer.order.billing_last_name.toLowerCase()\n\n\t\t// phone\n\t\tif (wpmDataLayer?.user?.phone?.facebook) data.ph = wpmDataLayer.user.phone.facebook\n\t\tif (wpmDataLayer?.order?.billing_phone) data.ph = wpmDataLayer.order.billing_phone.replace(\"+\", \"\")\n\n\t\t// city\n\t\tif (wpmDataLayer?.user?.city?.facebook) data.ct = wpmDataLayer.user.city.facebook\n\t\tif (wpmDataLayer?.order?.billing_city) data.ct = wpmDataLayer.order.billing_city.toLowerCase().replace(/ /g, \"\")\n\n\t\t// state\n\t\tif (wpmDataLayer?.user?.state?.facebook) data.st = wpmDataLayer.user.state.facebook\n\t\tif (wpmDataLayer?.order?.billing_state) data.st = wpmDataLayer.order.billing_state.toLowerCase().replace(/[a-zA-Z]{2}-/, \"\")\n\n\t\t// postcode\n\t\tif (wpmDataLayer?.user?.postcode?.facebook) data.zp = wpmDataLayer.user.postcode.facebook\n\t\tif (wpmDataLayer?.order?.billing_postcode) data.zp = wpmDataLayer.order.billing_postcode\n\n\t\t// country\n\t\tif (wpmDataLayer?.user?.country?.facebook) data.country = wpmDataLayer.user.country.facebook\n\t\tif (wpmDataLayer?.order?.billing_country) data.country = wpmDataLayer.order.billing_country.toLowerCase()\n\n\t\treturn data\n\t}\n\n\twpm.getFbRandomEventId = () => (Math.random() + 1).toString(36).substring(2)\n\n\twpm.getFbUserData = () => {\n\n\t\t/**\n\t\t * We need to cache the FB user data for InitiateCheckout\n\t\t * where getting the user data from the browser is too slow\n\t\t * using wpm.getCookie().\n\t\t *\n\t\t * And we need the object merge because the ViewContent hit happens too fast\n\t\t * after adding a variation to the cart because the function to cache\n\t\t * the user data is too slow.\n\t\t *\n\t\t * But we can get the user_data using wpm.getCookie()\n\t\t * because we don't move away from the page and can wait for the browser\n\t\t * to get it.\n\t\t *\n\t\t * Also, the merge ensures that new data will be added to fbUserData if new\n\t\t * data is being added later, like user ID, or fbc.\n\t\t */\n\n\t\tfbUserData = {...fbUserData, ...wpm.getFbUserDataFromBrowser()}\n\n\t\treturn fbUserData\n\t}\n\n\twpm.isFbAdvancedMatchingEnabled = () => {\n\t\tif (wpmDataLayer?.pixels?.facebook?.advanced_matching) {\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\twpm.setFbUserData = () => {\n\t\tfbUserData = wpm.getFbUserDataFromBrowser()\n\t}\n\n\twpm.getFbUserDataFromBrowser = () => {\n\n\t\tlet data = {}\n\n\t\tlet fbp = wpm.getCookie(\"_fbp\")\n\t\tif (wpm.isValidFbp(fbp)) {\n\t\t\tdata.fbp = fbp\n\t\t}\n\n\t\tlet fbc = wpm.getCookie(\"_fbc\") || wpm.retrieveData(\"fbclid\")\n\t\tif (wpm.isValidFbc(fbc)) {\n\t\t\tdata.fbc = fbc\n\t\t}\n\n\t\tif (wpm.isFbAdvancedMatchingEnabled()) {\n\t\t\tif (wpmDataLayer?.user?.email?.facebook) data.em = wpmDataLayer.user.email.facebook\n\t\t\tif (wpmDataLayer?.user?.phone?.facebook) data.ph = wpmDataLayer.user.phone.facebook\n\t\t\tif (wpmDataLayer?.user?.first_name?.facebook) data.fn = wpmDataLayer.user.first_name.facebook\n\t\t\tif (wpmDataLayer?.user?.last_name?.facebook) data.ln = wpmDataLayer.user.last_name.facebook\n\t\t\tif (wpmDataLayer?.user?.city?.facebook) data.ct = wpmDataLayer.user.city.facebook\n\t\t\tif (wpmDataLayer?.user?.state?.facebook) data.st = wpmDataLayer.user.state.facebook\n\t\t\tif (wpmDataLayer?.user?.postcode?.facebook) data.zp = wpmDataLayer.user.postcode.facebook\n\t\t\tif (wpmDataLayer?.user?.country?.facebook) data.country = wpmDataLayer.user.country.facebook\n\t\t\tif (wpmDataLayer?.user?.id?.raw) data.external_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\tif (navigator.userAgent) data.client_user_agent = navigator.userAgent\n\n\t\t// If a IPv6 address is available in the data store, add it to the user data\n\t\tif (wpm.retrieveData(\"ipv6\")) data.client_ip_address = wpm.retrieveData(\"ipv6\")\n\n\t\treturn data\n\t}\n\n\twpm.isFbpSet = () => {\n\t\treturn !!wpm.getCookie(\"_fbp\")\n\t}\n\n\t// https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/fbp-and-fbc/\n\twpm.isValidFbp = fbp => {\n\n\t\tlet re = new RegExp(/^fb\\.[0-2]\\.\\d{13}\\.\\d{8,20}$/)\n\n\t\treturn re.test(fbp)\n\t}\n\n\t// https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/fbp-and-fbc/\n\twpm.isValidFbc = fbc => {\n\n\t\tlet re = new RegExp(/^fb\\.[0-2]\\.\\d{13}\\.[\\da-zA-Z_-]{8,}/)\n\n\t\treturn re.test(fbc)\n\t}\n\n\twpm.fbGetProductDataForCapiEvent = product => {\n\t\treturn {\n\t\t\tcontent_type: \"product\",\n\t\t\tcontent_name: product.name,\n\t\t\tcontent_ids : [\n\t\t\t\tproduct.dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type],\n\t\t\t],\n\t\t\tvalue       : parseFloat(product.quantity * product.price),\n\t\t\tcurrency    : product.currency,\n\t\t}\n\t}\n\n\twpm.facebookContentIds = () => {\n\t\tlet prodIds = []\n\n\t\tObject.values(wpmDataLayer.order.items).forEach(item => {\n\t\t\tif (wpmDataLayer?.shop?.variations_output && 0 !== item.variation_id) {\n\t\t\t\tprodIds.push(String(wpmDataLayer.products[item.variation_id].dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type]))\n\t\t\t} else {\n\t\t\t\tprodIds.push(String(wpmDataLayer.products[item.id].dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type]))\n\t\t\t}\n\t\t})\n\n\t\treturn prodIds\n\t}\n\n\twpm.trackCustomFacebookEvent = (eventName, customData = {}) => {\n\t\ttry {\n\t\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\t\tlet eventId = wpm.getFbRandomEventId()\n\n\t\t\tfbq(\"trackCustom\", eventName, customData, {\n\t\t\t\teventID: eventId,\n\t\t\t})\n\n\t\t\tpmw.console.log(\"Facebook Pixel: Custom event sent\", eventName, customData)\n\n\t\t\tlet payload = {\n\t\t\t\tfacebook: {\n\t\t\t\t\tevent_name      : eventName,\n\t\t\t\t\tevent_id        : eventId,\n\t\t\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\t\t\tevent_source_url: window.location.href,\n\t\t\t\t},\n\t\t\t}\n\n\t\t\t// if customData not empty, add it to the payload\n\t\t\tif (Object.keys(customData).length) {\n\t\t\t\tpayload.facebook.custom_data = customData\n\t\t\t}\n\n\t\t\twpm.sendEventPayloadToServer(payload)\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.fbGetContentIdsFromCart = () => {\n\n\t\tlet content_ids = []\n\n\t\tfor (const key in wpmDataLayer.cart) {\n\t\t\tcontent_ids.push(wpmDataLayer.products[key].dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type])\n\t\t}\n\n\t\treturn content_ids\n\t}\n\n\t/**\n\t * Check if Facebook Pixel is allowed to fire\n\t *\n\t * @returns {boolean}\n\t */\n\twpm.canFireFbq = () => {\n\n\t\t// If the Facebook Pixel is not loaded, return false\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return false\n\n\t\t// If the user has not given consent for marketing, return false\n\t\tif (!wpm.consent.categories.get().marketing) return false\n\n\t\treturn true\n\t}\n\n\t/**\n\t * Check if Facebook Pixel is not allowed to fire\n\t *\n\t * @returns {boolean}\n\t */\n\twpm.canNotFireFbq = () => {\n\t\treturn !wpm.canFireFbq()\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery));\n","/**\n * GA4 loader\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n\n// #if process.env.TIER === 'premium'\n// if (wpm.canLoadPremiumFeatures()) {\n// \trequire(\"./functions_premium\")\n// \trequire(\"./event_listeners_premium\")\n// }\n// #endif\n","/**\n * Register event listeners\n */\n\n\n/**\n * add_to_cart event\n *\n * WC is inconsistent with events that emit add-to-cart events.\n * adding_to_cart and added_to_are legacy events. Also, they only work\n * on Ajax buttons on shop pages.\n *\n * Never add document or body selectors.\n * The document selector doesn't work.\n * The body selector will cause the events to fire twice and other erratic behavior if used along with other selectors.\n */\nconst addToCartSelectorsArray = [\n\t// \"document\",\n\t// \"body\",\n\t\".add_to_cart_button:not(.product_type_variable)\",\n\t\".ajax_add_to_cart\",\n\t\".single_add_to_cart_button\",\n];\n\nconst addToCartSelectors = wpm.prepareSelectors(addToCartSelectorsArray, \"addToCart\");\n\njQuery(addToCartSelectors).on(\"click adding_to_cart\", (event, data) => {\n\n\t// console.log(\"add_to_cart event fired at: \" + new Date().getTime())\n\t// console.log('add to cart data', data)\n\t// console.log('add to cart event', event)\n\t// console.log('add to cart jQuery(event.target.dataset)', jQuery(event.target.dataset))\n\t// console.log(\"add to cart event.target.dataset\", event.target.dataset)\n\t// console.log(\"add to cart event.target.dataset.quantity\", event.target.dataset.quantity)\n\t// console.log(\"add to cart event.target.dataset.product_id\", event.target.dataset.product_id)\n\n\ttry {\n\n\t\t// console.log(\"add_to_cart event detected\")\n\n\t\tlet quantity  = event?.target?.dataset?.quantity ? event.target.dataset.quantity : null;\n\t\tlet productId = event?.target?.dataset?.product_id ? event.target.dataset.product_id : event?.target?.value ? event.target.value : null;\n\n\t\t// let quantity  = event.target.dataset.quantity ? event.target.dataset.quantity : 1\n\t\t// let productId = event.target.dataset.product_id ? event.target.dataset.product_id : null\n\n\t\t// Only process on product pages\n\t\tif (wpmDataLayer.shop.page_type === \"product\") {\n\n\t\t\t// First process related and upsell products\n\t\t\tif (\n\t\t\t\ttypeof jQuery(event.currentTarget).attr(\"href\") !== \"undefined\"\n\t\t\t\t&& jQuery(event.currentTarget).attr(\"href\").includes(\"add-to-cart\")\n\t\t\t) {\n\n\t\t\t\tif (!productId) {\n\t\t\t\t\tproductId = jQuery(event.currentTarget).data(\"product_id\");\n\t\t\t\t}\n\n\t\t\t\twpm.addProductToCart(productId, 1);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If is simple product\n\t\t\tif (wpmDataLayer.shop.product_type === \"simple\") {\n\n\t\t\t\tif (quantity === null) {\n\t\t\t\t\tquantity = Number(jQuery(\".input-text.qty\").val()) ? Number(jQuery(\".input-text.qty\").val()) : 1;\n\t\t\t\t}\n\n\t\t\t\tif (!productId) {\n\t\t\t\t\tproductId = jQuery(event.currentTarget).val();\n\t\t\t\t}\n\n\t\t\t\t// Fallback if the body selector is used\n\t\t\t\tif (!productId) {\n\t\t\t\t\t// get the product ID from the element that has the class .product\n\t\t\t\t\t// that element will also have an ID that start with product- and ends with the product ID\n\t\t\t\t\t// example: product-123\n\t\t\t\t\t// save the product ID in the variable productId\n\t\t\t\t\tproductId = jQuery(\".product\").attr(\"id\").replace(\"product-\", \"\");\n\t\t\t\t}\n\n\t\t\t\twpm.addProductToCart(productId, quantity);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If is variable product or variable-subscription\n\t\t\tif ([\"variable\", \"variable-subscription\"].indexOf(wpmDataLayer.shop.product_type) >= 0) {\n\n\t\t\t\tif (quantity === null) {\n\t\t\t\t\tquantity = Number(jQuery(\".input-text.qty\").val()) ? Number(jQuery(\".input-text.qty\").val()) : 1;\n\t\t\t\t}\n\n\t\t\t\tif (!productId) {\n\t\t\t\t\tproductId = jQuery(\"[name='variation_id']\").val();\n\t\t\t\t}\n\n\t\t\t\twpm.addProductToCart(productId, quantity);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If is grouped product\n\t\t\tif (wpmDataLayer.shop.product_type === \"grouped\") {\n\n\t\t\t\tjQuery(\".woocommerce-grouped-product-list-item\").each((index, element) => {\n\n\t\t\t\t\t// Can't rely on  event.target.dataset as it always is sent with the parent product ID and the quantity 1\n\n\t\t\t\t\tquantity = Number(jQuery(element).find(\".input-text.qty\").val()) ? Number(jQuery(element).find(\".input-text.qty\").val()) : 1;\n\n\t\t\t\t\tlet classes = jQuery(element).attr(\"class\");\n\t\t\t\t\tproductId   = wpm.getPostIdFromString(classes);\n\n\t\t\t\t\twpm.addProductToCart(productId, quantity);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If is bundle product\n\t\t\tif (wpmDataLayer.shop.product_type === \"bundle\") {\n\n\t\t\t\tif (quantity === null) {\n\t\t\t\t\tquantity = Number(jQuery(\".input-text.qty\").val()) ? Number(jQuery(\".input-text.qty\").val()) : 1;\n\t\t\t\t}\n\n\t\t\t\tif (!productId) {\n\t\t\t\t\tproductId = jQuery(\"input[name=add-to-cart]\").val();\n\t\t\t\t}\n\n\t\t\t\twpm.addProductToCart(productId, quantity);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// everything else\n\t\t\tif (quantity === null) {\n\t\t\t\tquantity = Number(jQuery(\".input-text.qty\").val()) ? Number(jQuery(\".input-text.qty\").val()) : 1;\n\t\t\t}\n\n\t\t\twpm.addProductToCart(productId, quantity);\n\n\t\t} else {\n\n\t\t\tif (quantity === null) {\n\t\t\t\tquantity = 1;\n\t\t\t}\n\n\t\t\tif (!productId) {\n\t\t\t\t// console.log(\"add to cart event.currentTarget\", event.currentTarget)\n\t\t\t\tproductId = jQuery(event.currentTarget).data(\"product_id\") ? jQuery(event.currentTarget).data(\"product_id\") : null;\n\t\t\t}\n\n\t\t\t// Another fallback to retrieve the product ID in case the ID is saved in the value attribute\n\t\t\tif (!productId) {\n\t\t\t\tproductId = jQuery(event.currentTarget).val() ? jQuery(event.currentTarget).val() : null;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tproductId\n\t\t\t\t&& quantity\n\t\t\t) {\n\t\t\t\twpm.addProductToCart(productId, quantity);\n\t\t\t}\n\t\t}\n\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n\n/**\n * If someone clicks anywhere on a custom /?add-to-cart=123 link\n * trigger the add to cart event\n */\n\n// jQuery(document).one(\"click\", \"a:not(.add_to_cart_button, .ajax_add_to_cart, .single_add_to_cart_button)\", (event) => {\njQuery(\"a:not(.add_to_cart_button, .ajax_add_to_cart, .single_add_to_cart_button)\").one(\"click\", (event) => {\n\n\ttry {\n\t\tif (jQuery(event.target).closest(\"a\").attr(\"href\")) {\n\n\t\t\tlet url = new URL(jQuery(event.currentTarget).attr(\"href\"), window.location.origin);\n\n\t\t\tif (url.searchParams.has(\"add-to-cart\")) {\n\n\t\t\t\tlet productId = url.searchParams.get(\"add-to-cart\");\n\t\t\t\twpm.addProductToCart(productId, 1);\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// select item event\n// jQuery(document).on(\"click\", \".woocommerce-LoopProduct-link, .wc-block-grid__product, .product, .product-small, .type-product\", (event) => {\njQuery(\".woocommerce-LoopProduct-link, .wc-block-grid__product, .product, .product-small, .type-product\").on(\"click\", (event) => {\n\n\ttry {\n\n\t\t/**\n\t\t * On some pages the event fires multiple times, and on product pages\n\t\t * even on page load. Using e.stopPropagation helps to prevent this,\n\t\t * but I don't know why. We don't even have to use this, since only a real\n\t\t * product click yields a valid productId. So we filter the invalid click\n\t\t * events out later down in the code. I'll keep it that way because this is\n\t\t * the most compatible way across shops.\n\t\t *\n\t\t * e.stopPropagation();\n\t\t * */\n\n\t\tlet productId = jQuery(event.currentTarget).nextAll(\".wpmProductId:first\").data(\"id\");\n\n\t\t/**\n\t\t * On product pages, for some reason, the click event is triggered on the main product on page load.\n\t\t * In that case no ID is found. But we can discard it, since we only want to trigger the event on\n\t\t * related products, which are found below.\n\t\t */\n\n\t\tif (productId) {\n\n\t\t\tproductId = wpm.getIdBasedOndVariationsOutputSetting(productId);\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\");\n\n\t\t\tif (wpmDataLayer.products && wpmDataLayer.products[productId]) {\n\n\t\t\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId);\n\n\t\t\t\tjQuery(document).trigger(\"pmw:select-item\", product);\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n\n// checkout_progress event\n// track checkout option event: entered valid billing email\n// jQuery(document).on(\"input\", \"#billing_email\", (event) => {\njQuery(\"#billing_email\").on(\"input\", (event) => {\n\n\tif (wpm.isEmail(jQuery(event.currentTarget).val())) {\n\t\t// wpm.fireCheckoutOption(2);\n\t\twpm.fireCheckoutProgress(2);\n\t\twpm.emailSelected = true;\n\t}\n});\n\n\n/**\n * Place order button\n *\n * Track checkout option event: purchase click\n * https://stackoverflow.com/a/34112407/4688612\n * jQuery(document).one(\"click\", \"#place_order\", () => {\n *\n * Has to be hooked after document ready !\n */\njQuery(\"form.checkout\").on(\"checkout_place_order_success\", () => {\n\n\t// console log current time\n\t// console.log(\"checkout_place_order_success event fired at: \" + new Date().getTime())\n\n\tif (false === wpm.emailSelected) {\n\t\twpm.fireCheckoutProgress(2);\n\t}\n\n\tif (false === wpm.paymentMethodSelected) {\n\t\twpm.fireCheckoutProgress(3);\n\t\twpm.fireCheckoutOption(3, jQuery(\"input[name='payment_method']:checked\").val());\n\t}\n\n\twpm.fireCheckoutProgress(4);\n\n\tjQuery(document).trigger(\"pmw:place-order\", {});\n});\n\n/**\n * Update cart event\n *\n * Has to be hooked after document ready !\n */\njQuery(document).on(\"click\", \"[name='update_cart']\", () => {\n\n\ttry {\n\t\tjQuery(\".cart_item\").each((index, element) => {\n\n\t\t\tconst productId = wpm.getProductIdByCartItemElement(element);\n\n\t\t\tif (!productId) {\n\t\t\t\tconsole.error(\"Pixel Manager: Wasn't able to retrieve a productId\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst quantity = wpm.getProductQuantityByCartItemElement(element);\n\n\t\t\tif (!quantity) {\n\t\t\t\tconsole.error(\"Pixel Manager: Wasn't able to retrieve a quantity\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// console.log(\"productId\", productId)\n\t\t\t// console.log(\"quantity\", quantity)\n\n\t\t\tif (quantity === 0) {\n\t\t\t\twpm.removeProductFromCart(productId);\n\t\t\t} else if (quantity < wpmDataLayer.cart[productId].quantity) {\n\t\t\t\twpm.removeProductFromCart(productId, wpmDataLayer.cart[productId].quantity - quantity);\n\t\t\t} else if (quantity > wpmDataLayer.cart[productId].quantity) {\n\t\t\t\twpm.addProductToCart(productId, quantity - wpmDataLayer.cart[productId].quantity);\n\t\t\t}\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t\twpm.getCartItemsFromBackend();\n\t}\n});\n\n// Supports the following plugins:\n// WooCommerce Wishlist: https://woo.com/products/woocommerce-wishlists/\n// YITH WooCommerce Wishlist: https://wordpress.org/plugins/yith-woocommerce-wishlist/\n// add_to_wishlist\njQuery(\".add_to_wishlist,.wl-add-to\").on(\"click\", event => {\n\n\ttry {\n\n\t\tlet productId;\n\n\t\tif (jQuery(event.currentTarget).data(\"productid\")) { // for the WooCommerce wishlist plugin\n\n\t\t\tproductId = jQuery(event.currentTarget).data(\"productid\");\n\t\t} else if (jQuery(event.currentTarget).data(\"product-id\")) {  // for the YITH wishlist plugin\n\n\t\t\tproductId = jQuery(event.currentTarget).data(\"product-id\");\n\t\t}\n\n\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\");\n\n\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId);\n\n\n\t\tjQuery(document).trigger(\"pmw:add-to-wishlist\", product);\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n\n/**\n * Called when the user selects all the required dropdowns / attributes\n *\n * Replaced by code in the event_listeners.js file in case of lazy loading\n *\n * Has to be hooked after document ready !\n *\n * https://stackoverflow.com/a/27849208/4688612\n * https://stackoverflow.com/a/65065335/4688612\n *\n */\n\nif (!wpmDataLayer?.general?.lazy_load_pmw) {\n\twpm.registerShowVariationEventListener();\n}\n\n\n/**\n * Called on variable products when no selection has been done yet\n * or when the visitor deselects his choice.\n *\n * Has to be hooked after document ready !\n */\n\n// jQuery(function () {\n//\n// \tjQuery(\".single_variation_wrap\").on(\"hide_variation\", function () {\n//\n// \t\ttry {\n// \t\t\tlet classes   = jQuery(\"body\").attr(\"class\")\n// \t\t\tlet productId = classes.match(/(postid-)(\\d+)/)[2]\n//\n// \t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n//\n// \t\t\t/**\n// \t\t\t * If we have a variable product with no preset,\n// \t\t\t * and variations output is enabled,\n// \t\t\t * then we send a viewItem event with the first\n// \t\t\t * variation we find for the parent.\n// \t\t\t * If variations output is disabled,\n// \t\t\t * we just send the parent ID.\n// \t\t\t *\n// \t\t\t * And if Facebook microdata is active, use the\n// \t\t\t * microdata product ID.\n// \t\t\t */\n//\n// \t\t\tif (\n// \t\t\t\t\"variable\" === wpmDataLayer.shop.product_type &&\n// \t\t\t\twpmDataLayer?.shop?.variations_output\n// \t\t\t) {\n// \t\t\t\tfor (const [key, product] of Object.entries(wpmDataLayer.products)) {\n// \t\t\t\t\tif (\"parent_id\" in product) {\n//\n// \t\t\t\t\t\tproductId = product.id\n// \t\t\t\t\t\tbreak\n// \t\t\t\t\t}\n// \t\t\t\t}\n//\n// \t\t\t\tif (wpmDataLayer?.pixels?.facebook?.microdata_product_id) {\n// \t\t\t\t\tproductId = wpmDataLayer.pixels.facebook.microdata_product_id\n// \t\t\t\t}\n// \t\t\t}\n//\n// \t\t\t// console.log(\"hmm\")\n// \t\t\twpm.triggerViewItemEventPrep(productId)\n//\n// \t\t} catch (e) {\n// \t\t\tconsole.error(e)\n// \t\t}\n// \t})\n// })\n\n// jQuery(function () {\n//\n// \tjQuery(\".single_variation_wrap\").on(\"hide_variation\", function () {\n// \t\tjQuery(document).trigger(\"pmw:view-item\")\n// \t})\n// })\n","(function() {\n  var expandIPv6, ipaddr, ipv4Part, ipv4Regexes, ipv6Part, ipv6Regexes, matchCIDR, root, zoneIndex;\n\n  ipaddr = {};\n\n  root = this;\n\n  if ((typeof module !== \"undefined\" && module !== null) && module.exports) {\n    module.exports = ipaddr;\n  } else {\n    root['ipaddr'] = ipaddr;\n  }\n\n  matchCIDR = function(first, second, partSize, cidrBits) {\n    var part, shift;\n    if (first.length !== second.length) {\n      throw new Error(\"ipaddr: cannot match CIDR for objects with different lengths\");\n    }\n    part = 0;\n    while (cidrBits > 0) {\n      shift = partSize - cidrBits;\n      if (shift < 0) {\n        shift = 0;\n      }\n      if (first[part] >> shift !== second[part] >> shift) {\n        return false;\n      }\n      cidrBits -= partSize;\n      part += 1;\n    }\n    return true;\n  };\n\n  ipaddr.subnetMatch = function(address, rangeList, defaultName) {\n    var k, len, rangeName, rangeSubnets, subnet;\n    if (defaultName == null) {\n      defaultName = 'unicast';\n    }\n    for (rangeName in rangeList) {\n      rangeSubnets = rangeList[rangeName];\n      if (rangeSubnets[0] && !(rangeSubnets[0] instanceof Array)) {\n        rangeSubnets = [rangeSubnets];\n      }\n      for (k = 0, len = rangeSubnets.length; k < len; k++) {\n        subnet = rangeSubnets[k];\n        if (address.kind() === subnet[0].kind()) {\n          if (address.match.apply(address, subnet)) {\n            return rangeName;\n          }\n        }\n      }\n    }\n    return defaultName;\n  };\n\n  ipaddr.IPv4 = (function() {\n    function IPv4(octets) {\n      var k, len, octet;\n      if (octets.length !== 4) {\n        throw new Error(\"ipaddr: ipv4 octet count should be 4\");\n      }\n      for (k = 0, len = octets.length; k < len; k++) {\n        octet = octets[k];\n        if (!((0 <= octet && octet <= 255))) {\n          throw new Error(\"ipaddr: ipv4 octet should fit in 8 bits\");\n        }\n      }\n      this.octets = octets;\n    }\n\n    IPv4.prototype.kind = function() {\n      return 'ipv4';\n    };\n\n    IPv4.prototype.toString = function() {\n      return this.octets.join(\".\");\n    };\n\n    IPv4.prototype.toNormalizedString = function() {\n      return this.toString();\n    };\n\n    IPv4.prototype.toByteArray = function() {\n      return this.octets.slice(0);\n    };\n\n    IPv4.prototype.match = function(other, cidrRange) {\n      var ref;\n      if (cidrRange === void 0) {\n        ref = other, other = ref[0], cidrRange = ref[1];\n      }\n      if (other.kind() !== 'ipv4') {\n        throw new Error(\"ipaddr: cannot match ipv4 address with non-ipv4 one\");\n      }\n      return matchCIDR(this.octets, other.octets, 8, cidrRange);\n    };\n\n    IPv4.prototype.SpecialRanges = {\n      unspecified: [[new IPv4([0, 0, 0, 0]), 8]],\n      broadcast: [[new IPv4([255, 255, 255, 255]), 32]],\n      multicast: [[new IPv4([224, 0, 0, 0]), 4]],\n      linkLocal: [[new IPv4([169, 254, 0, 0]), 16]],\n      loopback: [[new IPv4([127, 0, 0, 0]), 8]],\n      carrierGradeNat: [[new IPv4([100, 64, 0, 0]), 10]],\n      \"private\": [[new IPv4([10, 0, 0, 0]), 8], [new IPv4([172, 16, 0, 0]), 12], [new IPv4([192, 168, 0, 0]), 16]],\n      reserved: [[new IPv4([192, 0, 0, 0]), 24], [new IPv4([192, 0, 2, 0]), 24], [new IPv4([192, 88, 99, 0]), 24], [new IPv4([198, 51, 100, 0]), 24], [new IPv4([203, 0, 113, 0]), 24], [new IPv4([240, 0, 0, 0]), 4]]\n    };\n\n    IPv4.prototype.range = function() {\n      return ipaddr.subnetMatch(this, this.SpecialRanges);\n    };\n\n    IPv4.prototype.toIPv4MappedAddress = function() {\n      return ipaddr.IPv6.parse(\"::ffff:\" + (this.toString()));\n    };\n\n    IPv4.prototype.prefixLengthFromSubnetMask = function() {\n      var cidr, i, k, octet, stop, zeros, zerotable;\n      zerotable = {\n        0: 8,\n        128: 7,\n        192: 6,\n        224: 5,\n        240: 4,\n        248: 3,\n        252: 2,\n        254: 1,\n        255: 0\n      };\n      cidr = 0;\n      stop = false;\n      for (i = k = 3; k >= 0; i = k += -1) {\n        octet = this.octets[i];\n        if (octet in zerotable) {\n          zeros = zerotable[octet];\n          if (stop && zeros !== 0) {\n            return null;\n          }\n          if (zeros !== 8) {\n            stop = true;\n          }\n          cidr += zeros;\n        } else {\n          return null;\n        }\n      }\n      return 32 - cidr;\n    };\n\n    return IPv4;\n\n  })();\n\n  ipv4Part = \"(0?\\\\d+|0x[a-f0-9]+)\";\n\n  ipv4Regexes = {\n    fourOctet: new RegExp(\"^\" + ipv4Part + \"\\\\.\" + ipv4Part + \"\\\\.\" + ipv4Part + \"\\\\.\" + ipv4Part + \"$\", 'i'),\n    longValue: new RegExp(\"^\" + ipv4Part + \"$\", 'i')\n  };\n\n  ipaddr.IPv4.parser = function(string) {\n    var match, parseIntAuto, part, shift, value;\n    parseIntAuto = function(string) {\n      if (string[0] === \"0\" && string[1] !== \"x\") {\n        return parseInt(string, 8);\n      } else {\n        return parseInt(string);\n      }\n    };\n    if (match = string.match(ipv4Regexes.fourOctet)) {\n      return (function() {\n        var k, len, ref, results;\n        ref = match.slice(1, 6);\n        results = [];\n        for (k = 0, len = ref.length; k < len; k++) {\n          part = ref[k];\n          results.push(parseIntAuto(part));\n        }\n        return results;\n      })();\n    } else if (match = string.match(ipv4Regexes.longValue)) {\n      value = parseIntAuto(match[1]);\n      if (value > 0xffffffff || value < 0) {\n        throw new Error(\"ipaddr: address outside defined range\");\n      }\n      return ((function() {\n        var k, results;\n        results = [];\n        for (shift = k = 0; k <= 24; shift = k += 8) {\n          results.push((value >> shift) & 0xff);\n        }\n        return results;\n      })()).reverse();\n    } else {\n      return null;\n    }\n  };\n\n  ipaddr.IPv6 = (function() {\n    function IPv6(parts, zoneId) {\n      var i, k, l, len, part, ref;\n      if (parts.length === 16) {\n        this.parts = [];\n        for (i = k = 0; k <= 14; i = k += 2) {\n          this.parts.push((parts[i] << 8) | parts[i + 1]);\n        }\n      } else if (parts.length === 8) {\n        this.parts = parts;\n      } else {\n        throw new Error(\"ipaddr: ipv6 part count should be 8 or 16\");\n      }\n      ref = this.parts;\n      for (l = 0, len = ref.length; l < len; l++) {\n        part = ref[l];\n        if (!((0 <= part && part <= 0xffff))) {\n          throw new Error(\"ipaddr: ipv6 part should fit in 16 bits\");\n        }\n      }\n      if (zoneId) {\n        this.zoneId = zoneId;\n      }\n    }\n\n    IPv6.prototype.kind = function() {\n      return 'ipv6';\n    };\n\n    IPv6.prototype.toString = function() {\n      return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/, '::');\n    };\n\n    IPv6.prototype.toRFC5952String = function() {\n      var bestMatchIndex, bestMatchLength, match, regex, string;\n      regex = /((^|:)(0(:|$)){2,})/g;\n      string = this.toNormalizedString();\n      bestMatchIndex = 0;\n      bestMatchLength = -1;\n      while ((match = regex.exec(string))) {\n        if (match[0].length > bestMatchLength) {\n          bestMatchIndex = match.index;\n          bestMatchLength = match[0].length;\n        }\n      }\n      if (bestMatchLength < 0) {\n        return string;\n      }\n      return string.substring(0, bestMatchIndex) + '::' + string.substring(bestMatchIndex + bestMatchLength);\n    };\n\n    IPv6.prototype.toByteArray = function() {\n      var bytes, k, len, part, ref;\n      bytes = [];\n      ref = this.parts;\n      for (k = 0, len = ref.length; k < len; k++) {\n        part = ref[k];\n        bytes.push(part >> 8);\n        bytes.push(part & 0xff);\n      }\n      return bytes;\n    };\n\n    IPv6.prototype.toNormalizedString = function() {\n      var addr, part, suffix;\n      addr = ((function() {\n        var k, len, ref, results;\n        ref = this.parts;\n        results = [];\n        for (k = 0, len = ref.length; k < len; k++) {\n          part = ref[k];\n          results.push(part.toString(16));\n        }\n        return results;\n      }).call(this)).join(\":\");\n      suffix = '';\n      if (this.zoneId) {\n        suffix = '%' + this.zoneId;\n      }\n      return addr + suffix;\n    };\n\n    IPv6.prototype.toFixedLengthString = function() {\n      var addr, part, suffix;\n      addr = ((function() {\n        var k, len, ref, results;\n        ref = this.parts;\n        results = [];\n        for (k = 0, len = ref.length; k < len; k++) {\n          part = ref[k];\n          results.push(part.toString(16).padStart(4, '0'));\n        }\n        return results;\n      }).call(this)).join(\":\");\n      suffix = '';\n      if (this.zoneId) {\n        suffix = '%' + this.zoneId;\n      }\n      return addr + suffix;\n    };\n\n    IPv6.prototype.match = function(other, cidrRange) {\n      var ref;\n      if (cidrRange === void 0) {\n        ref = other, other = ref[0], cidrRange = ref[1];\n      }\n      if (other.kind() !== 'ipv6') {\n        throw new Error(\"ipaddr: cannot match ipv6 address with non-ipv6 one\");\n      }\n      return matchCIDR(this.parts, other.parts, 16, cidrRange);\n    };\n\n    IPv6.prototype.SpecialRanges = {\n      unspecified: [new IPv6([0, 0, 0, 0, 0, 0, 0, 0]), 128],\n      linkLocal: [new IPv6([0xfe80, 0, 0, 0, 0, 0, 0, 0]), 10],\n      multicast: [new IPv6([0xff00, 0, 0, 0, 0, 0, 0, 0]), 8],\n      loopback: [new IPv6([0, 0, 0, 0, 0, 0, 0, 1]), 128],\n      uniqueLocal: [new IPv6([0xfc00, 0, 0, 0, 0, 0, 0, 0]), 7],\n      ipv4Mapped: [new IPv6([0, 0, 0, 0, 0, 0xffff, 0, 0]), 96],\n      rfc6145: [new IPv6([0, 0, 0, 0, 0xffff, 0, 0, 0]), 96],\n      rfc6052: [new IPv6([0x64, 0xff9b, 0, 0, 0, 0, 0, 0]), 96],\n      '6to4': [new IPv6([0x2002, 0, 0, 0, 0, 0, 0, 0]), 16],\n      teredo: [new IPv6([0x2001, 0, 0, 0, 0, 0, 0, 0]), 32],\n      reserved: [[new IPv6([0x2001, 0xdb8, 0, 0, 0, 0, 0, 0]), 32]]\n    };\n\n    IPv6.prototype.range = function() {\n      return ipaddr.subnetMatch(this, this.SpecialRanges);\n    };\n\n    IPv6.prototype.isIPv4MappedAddress = function() {\n      return this.range() === 'ipv4Mapped';\n    };\n\n    IPv6.prototype.toIPv4Address = function() {\n      var high, low, ref;\n      if (!this.isIPv4MappedAddress()) {\n        throw new Error(\"ipaddr: trying to convert a generic ipv6 address to ipv4\");\n      }\n      ref = this.parts.slice(-2), high = ref[0], low = ref[1];\n      return new ipaddr.IPv4([high >> 8, high & 0xff, low >> 8, low & 0xff]);\n    };\n\n    IPv6.prototype.prefixLengthFromSubnetMask = function() {\n      var cidr, i, k, part, stop, zeros, zerotable;\n      zerotable = {\n        0: 16,\n        32768: 15,\n        49152: 14,\n        57344: 13,\n        61440: 12,\n        63488: 11,\n        64512: 10,\n        65024: 9,\n        65280: 8,\n        65408: 7,\n        65472: 6,\n        65504: 5,\n        65520: 4,\n        65528: 3,\n        65532: 2,\n        65534: 1,\n        65535: 0\n      };\n      cidr = 0;\n      stop = false;\n      for (i = k = 7; k >= 0; i = k += -1) {\n        part = this.parts[i];\n        if (part in zerotable) {\n          zeros = zerotable[part];\n          if (stop && zeros !== 0) {\n            return null;\n          }\n          if (zeros !== 16) {\n            stop = true;\n          }\n          cidr += zeros;\n        } else {\n          return null;\n        }\n      }\n      return 128 - cidr;\n    };\n\n    return IPv6;\n\n  })();\n\n  ipv6Part = \"(?:[0-9a-f]+::?)+\";\n\n  zoneIndex = \"%[0-9a-z]{1,}\";\n\n  ipv6Regexes = {\n    zoneIndex: new RegExp(zoneIndex, 'i'),\n    \"native\": new RegExp(\"^(::)?(\" + ipv6Part + \")?([0-9a-f]+)?(::)?(\" + zoneIndex + \")?$\", 'i'),\n    transitional: new RegExp((\"^((?:\" + ipv6Part + \")|(?:::)(?:\" + ipv6Part + \")?)\") + (ipv4Part + \"\\\\.\" + ipv4Part + \"\\\\.\" + ipv4Part + \"\\\\.\" + ipv4Part) + (\"(\" + zoneIndex + \")?$\"), 'i')\n  };\n\n  expandIPv6 = function(string, parts) {\n    var colonCount, lastColon, part, replacement, replacementCount, zoneId;\n    if (string.indexOf('::') !== string.lastIndexOf('::')) {\n      return null;\n    }\n    zoneId = (string.match(ipv6Regexes['zoneIndex']) || [])[0];\n    if (zoneId) {\n      zoneId = zoneId.substring(1);\n      string = string.replace(/%.+$/, '');\n    }\n    colonCount = 0;\n    lastColon = -1;\n    while ((lastColon = string.indexOf(':', lastColon + 1)) >= 0) {\n      colonCount++;\n    }\n    if (string.substr(0, 2) === '::') {\n      colonCount--;\n    }\n    if (string.substr(-2, 2) === '::') {\n      colonCount--;\n    }\n    if (colonCount > parts) {\n      return null;\n    }\n    replacementCount = parts - colonCount;\n    replacement = ':';\n    while (replacementCount--) {\n      replacement += '0:';\n    }\n    string = string.replace('::', replacement);\n    if (string[0] === ':') {\n      string = string.slice(1);\n    }\n    if (string[string.length - 1] === ':') {\n      string = string.slice(0, -1);\n    }\n    parts = (function() {\n      var k, len, ref, results;\n      ref = string.split(\":\");\n      results = [];\n      for (k = 0, len = ref.length; k < len; k++) {\n        part = ref[k];\n        results.push(parseInt(part, 16));\n      }\n      return results;\n    })();\n    return {\n      parts: parts,\n      zoneId: zoneId\n    };\n  };\n\n  ipaddr.IPv6.parser = function(string) {\n    var addr, k, len, match, octet, octets, zoneId;\n    if (ipv6Regexes['native'].test(string)) {\n      return expandIPv6(string, 8);\n    } else if (match = string.match(ipv6Regexes['transitional'])) {\n      zoneId = match[6] || '';\n      addr = expandIPv6(match[1].slice(0, -1) + zoneId, 6);\n      if (addr.parts) {\n        octets = [parseInt(match[2]), parseInt(match[3]), parseInt(match[4]), parseInt(match[5])];\n        for (k = 0, len = octets.length; k < len; k++) {\n          octet = octets[k];\n          if (!((0 <= octet && octet <= 255))) {\n            return null;\n          }\n        }\n        addr.parts.push(octets[0] << 8 | octets[1]);\n        addr.parts.push(octets[2] << 8 | octets[3]);\n        return {\n          parts: addr.parts,\n          zoneId: addr.zoneId\n        };\n      }\n    }\n    return null;\n  };\n\n  ipaddr.IPv4.isIPv4 = ipaddr.IPv6.isIPv6 = function(string) {\n    return this.parser(string) !== null;\n  };\n\n  ipaddr.IPv4.isValid = function(string) {\n    var e;\n    try {\n      new this(this.parser(string));\n      return true;\n    } catch (error1) {\n      e = error1;\n      return false;\n    }\n  };\n\n  ipaddr.IPv4.isValidFourPartDecimal = function(string) {\n    if (ipaddr.IPv4.isValid(string) && string.match(/^(0|[1-9]\\d*)(\\.(0|[1-9]\\d*)){3}$/)) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  ipaddr.IPv6.isValid = function(string) {\n    var addr, e;\n    if (typeof string === \"string\" && string.indexOf(\":\") === -1) {\n      return false;\n    }\n    try {\n      addr = this.parser(string);\n      new this(addr.parts, addr.zoneId);\n      return true;\n    } catch (error1) {\n      e = error1;\n      return false;\n    }\n  };\n\n  ipaddr.IPv4.parse = function(string) {\n    var parts;\n    parts = this.parser(string);\n    if (parts === null) {\n      throw new Error(\"ipaddr: string is not formatted like ip address\");\n    }\n    return new this(parts);\n  };\n\n  ipaddr.IPv6.parse = function(string) {\n    var addr;\n    addr = this.parser(string);\n    if (addr.parts === null) {\n      throw new Error(\"ipaddr: string is not formatted like ip address\");\n    }\n    return new this(addr.parts, addr.zoneId);\n  };\n\n  ipaddr.IPv4.parseCIDR = function(string) {\n    var maskLength, match, parsed;\n    if (match = string.match(/^(.+)\\/(\\d+)$/)) {\n      maskLength = parseInt(match[2]);\n      if (maskLength >= 0 && maskLength <= 32) {\n        parsed = [this.parse(match[1]), maskLength];\n        Object.defineProperty(parsed, 'toString', {\n          value: function() {\n            return this.join('/');\n          }\n        });\n        return parsed;\n      }\n    }\n    throw new Error(\"ipaddr: string is not formatted like an IPv4 CIDR range\");\n  };\n\n  ipaddr.IPv4.subnetMaskFromPrefixLength = function(prefix) {\n    var filledOctetCount, j, octets;\n    prefix = parseInt(prefix);\n    if (prefix < 0 || prefix > 32) {\n      throw new Error('ipaddr: invalid IPv4 prefix length');\n    }\n    octets = [0, 0, 0, 0];\n    j = 0;\n    filledOctetCount = Math.floor(prefix / 8);\n    while (j < filledOctetCount) {\n      octets[j] = 255;\n      j++;\n    }\n    if (filledOctetCount < 4) {\n      octets[filledOctetCount] = Math.pow(2, prefix % 8) - 1 << 8 - (prefix % 8);\n    }\n    return new this(octets);\n  };\n\n  ipaddr.IPv4.broadcastAddressFromCIDR = function(string) {\n    var cidr, error, i, ipInterfaceOctets, octets, subnetMaskOctets;\n    try {\n      cidr = this.parseCIDR(string);\n      ipInterfaceOctets = cidr[0].toByteArray();\n      subnetMaskOctets = this.subnetMaskFromPrefixLength(cidr[1]).toByteArray();\n      octets = [];\n      i = 0;\n      while (i < 4) {\n        octets.push(parseInt(ipInterfaceOctets[i], 10) | parseInt(subnetMaskOctets[i], 10) ^ 255);\n        i++;\n      }\n      return new this(octets);\n    } catch (error1) {\n      error = error1;\n      throw new Error('ipaddr: the address does not have IPv4 CIDR format');\n    }\n  };\n\n  ipaddr.IPv4.networkAddressFromCIDR = function(string) {\n    var cidr, error, i, ipInterfaceOctets, octets, subnetMaskOctets;\n    try {\n      cidr = this.parseCIDR(string);\n      ipInterfaceOctets = cidr[0].toByteArray();\n      subnetMaskOctets = this.subnetMaskFromPrefixLength(cidr[1]).toByteArray();\n      octets = [];\n      i = 0;\n      while (i < 4) {\n        octets.push(parseInt(ipInterfaceOctets[i], 10) & parseInt(subnetMaskOctets[i], 10));\n        i++;\n      }\n      return new this(octets);\n    } catch (error1) {\n      error = error1;\n      throw new Error('ipaddr: the address does not have IPv4 CIDR format');\n    }\n  };\n\n  ipaddr.IPv6.parseCIDR = function(string) {\n    var maskLength, match, parsed;\n    if (match = string.match(/^(.+)\\/(\\d+)$/)) {\n      maskLength = parseInt(match[2]);\n      if (maskLength >= 0 && maskLength <= 128) {\n        parsed = [this.parse(match[1]), maskLength];\n        Object.defineProperty(parsed, 'toString', {\n          value: function() {\n            return this.join('/');\n          }\n        });\n        return parsed;\n      }\n    }\n    throw new Error(\"ipaddr: string is not formatted like an IPv6 CIDR range\");\n  };\n\n  ipaddr.isValid = function(string) {\n    return ipaddr.IPv6.isValid(string) || ipaddr.IPv4.isValid(string);\n  };\n\n  ipaddr.parse = function(string) {\n    if (ipaddr.IPv6.isValid(string)) {\n      return ipaddr.IPv6.parse(string);\n    } else if (ipaddr.IPv4.isValid(string)) {\n      return ipaddr.IPv4.parse(string);\n    } else {\n      throw new Error(\"ipaddr: the address has neither IPv6 nor IPv4 format\");\n    }\n  };\n\n  ipaddr.parseCIDR = function(string) {\n    var e;\n    try {\n      return ipaddr.IPv6.parseCIDR(string);\n    } catch (error1) {\n      e = error1;\n      try {\n        return ipaddr.IPv4.parseCIDR(string);\n      } catch (error1) {\n        e = error1;\n        throw new Error(\"ipaddr: the address has neither IPv6 nor IPv4 CIDR format\");\n      }\n    }\n  };\n\n  ipaddr.fromByteArray = function(bytes) {\n    var length;\n    length = bytes.length;\n    if (length === 4) {\n      return new ipaddr.IPv4(bytes);\n    } else if (length === 16) {\n      return new ipaddr.IPv6(bytes);\n    } else {\n      throw new Error(\"ipaddr: the binary input is neither an IPv6 nor IPv4 address\");\n    }\n  };\n\n  ipaddr.process = function(string) {\n    var addr;\n    addr = this.parse(string);\n    if (addr.kind() === 'ipv6' && addr.isIPv4MappedAddress()) {\n      return addr.toIPv4Address();\n    } else {\n      return addr;\n    }\n  };\n\n}).call(this);\n","/**\n * Created by elgs on 3/5/16.\n */\nconst normalize = function (a) {\n   if (!_validate(a)) {\n      throw new Error('Invalid address: ' + a);\n   }\n   a = a.toLowerCase()\n\n   const nh = a.split(/\\:\\:/g);\n   if (nh.length > 2) {\n      throw new Error('Invalid address: ' + a);\n   }\n\n   let sections = [];\n   if (nh.length == 1) {\n      // full mode\n      sections = a.split(/\\:/g);\n      if (sections.length !== 8) {\n         throw new Error('Invalid address: ' + a);\n      }\n   } else if (nh.length == 2) {\n      // compact mode\n      const n = nh[0];\n      const h = nh[1];\n      const ns = n.split(/\\:/g);\n      const hs = h.split(/\\:/g);\n      for (let i in ns) {\n         sections[i] = ns[i];\n      }\n      for (let i = hs.length; i > 0; --i) {\n         sections[7 - (hs.length - i)] = hs[i - 1];\n      }\n   }\n   for (let i = 0; i < 8; ++i) {\n      if (sections[i] === undefined) {\n         sections[i] = '0000';\n      }\n      sections[i] = _leftPad(sections[i], '0', 4);\n   }\n   return sections.join(':');\n};\n\nconst abbreviate = function (a) {\n   if (!_validate(a)) {\n      throw new Error('Invalid address: ' + a);\n   }\n   a = normalize(a);\n   a = a.replace(/0000/g, 'g');\n   a = a.replace(/\\:000/g, ':');\n   a = a.replace(/\\:00/g, ':');\n   a = a.replace(/\\:0/g, ':');\n   a = a.replace(/g/g, '0');\n   const sections = a.split(/\\:/g);\n   let zPreviousFlag = false;\n   let zeroStartIndex = -1;\n   let zeroLength = 0;\n   let zStartIndex = -1;\n   let zLength = 0;\n   for (let i = 0; i < 8; ++i) {\n      const section = sections[i];\n      let zFlag = (section === '0');\n      if (zFlag && !zPreviousFlag) {\n         zStartIndex = i;\n      }\n      if (!zFlag && zPreviousFlag) {\n         zLength = i - zStartIndex;\n      }\n      if (zLength > 1 && zLength > zeroLength) {\n         zeroStartIndex = zStartIndex;\n         zeroLength = zLength;\n      }\n      zPreviousFlag = (section === '0');\n   }\n   if (zPreviousFlag) {\n      zLength = 8 - zStartIndex;\n   }\n   if (zLength > 1 && zLength > zeroLength) {\n      zeroStartIndex = zStartIndex;\n      zeroLength = zLength;\n   }\n   //console.log(zeroStartIndex, zeroLength);\n   //console.log(sections);\n   if (zeroStartIndex >= 0 && zeroLength > 1) {\n      sections.splice(zeroStartIndex, zeroLength, 'g');\n   }\n   //console.log(sections);\n   a = sections.join(':');\n   //console.log(a);\n   a = a.replace(/\\:g\\:/g, '::');\n   a = a.replace(/\\:g/g, '::');\n   a = a.replace(/g\\:/g, '::');\n   a = a.replace(/g/g, '::');\n   //console.log(a);\n   return a;\n};\n\n// Basic validation\nconst _validate = function (a) {\n   return /^[a-f0-9\\\\:]+$/ig.test(a);\n};\n\nconst _leftPad = function (d, p, n) {\n   const padding = p.repeat(n);\n   if (d.length < padding.length) {\n      d = padding.substring(0, padding.length - d.length) + d;\n   }\n   return d;\n};\n\nconst _hex2bin = function (hex) {\n   return parseInt(hex, 16).toString(2)\n};\nconst _bin2hex = function (bin) {\n   return parseInt(bin, 2).toString(16)\n};\n\nconst _addr2bin = function (addr) {\n   const nAddr = normalize(addr);\n   const sections = nAddr.split(\":\");\n   let binAddr = '';\n   for (const section of sections) {\n      binAddr += _leftPad(_hex2bin(section), '0', 16);\n   }\n   return binAddr;\n};\n\nconst _bin2addr = function (bin) {\n   const addr = [];\n   for (let i = 0; i < 8; ++i) {\n      const binPart = bin.substr(i * 16, 16);\n      const hexSection = _leftPad(_bin2hex(binPart), '0', 4);\n      addr.push(hexSection);\n   }\n   return addr.join(':');\n};\n\nconst divideSubnet = function (addr, mask0, mask1, limit, abbr) {\n   if (!_validate(addr)) {\n      throw new Error('Invalid address: ' + addr);\n   }\n   mask0 *= 1;\n   mask1 *= 1;\n   limit *= 1;\n   mask1 = mask1 || 128;\n   if (mask0 < 1 || mask1 < 1 || mask0 > 128 || mask1 > 128 || mask0 > mask1) {\n      throw new Error('Invalid masks.');\n   }\n   const ret = [];\n   const binAddr = _addr2bin(addr);\n   const binNetPart = binAddr.substr(0, mask0);\n   const binHostPart = '0'.repeat(128 - mask1);\n   const numSubnets = Math.pow(2, mask1 - mask0);\n   for (let i = 0; i < numSubnets; ++i) {\n      if (!!limit && i >= limit) {\n         break;\n      }\n      const binSubnet = _leftPad(i.toString(2), '0', mask1 - mask0);\n      const binSubAddr = binNetPart + binSubnet + binHostPart;\n      const hexAddr = _bin2addr(binSubAddr);\n      if (!!abbr) {\n         ret.push(abbreviate(hexAddr));\n      } else {\n         ret.push(hexAddr);\n      }\n\n   }\n   // console.log(numSubnets);\n   // console.log(binNetPart, binSubnetPart, binHostPart);\n   // console.log(binNetPart.length, binSubnetPart.length, binHostPart.length);\n   // console.log(ret.length);\n   return ret;\n};\n\nconst range = function (addr, mask0, mask1, abbr) {\n   if (!_validate(addr)) {\n      throw new Error('Invalid address: ' + addr);\n   }\n   mask0 *= 1;\n   mask1 *= 1;\n   mask1 = mask1 || 128;\n   if (mask0 < 1 || mask1 < 1 || mask0 > 128 || mask1 > 128 || mask0 > mask1) {\n      throw new Error('Invalid masks.');\n   }\n   const binAddr = _addr2bin(addr);\n   const binNetPart = binAddr.substr(0, mask0);\n   const binHostPart = '0'.repeat(128 - mask1);\n   const binStartAddr = binNetPart + '0'.repeat(mask1 - mask0) + binHostPart;\n   const binEndAddr = binNetPart + '1'.repeat(mask1 - mask0) + binHostPart;\n   if (!!abbr) {\n      return {\n         start: abbreviate(_bin2addr(binStartAddr)),\n         end: abbreviate(_bin2addr(binEndAddr)),\n         size: Math.pow(2, mask1 - mask0)\n      };\n   } else {\n      return {\n         start: _bin2addr(binStartAddr),\n         end: _bin2addr(binEndAddr),\n         size: Math.pow(2, mask1 - mask0)\n      };\n   }\n};\n\nconst randomSubnet = function (addr, mask0, mask1, limit, abbr) {\n   if (!_validate(addr)) {\n      throw new Error('Invalid address: ' + addr);\n   }\n   mask0 *= 1;\n   mask1 *= 1;\n   limit *= 1;\n   mask1 = mask1 || 128;\n   limit = limit || 1;\n   if (mask0 < 1 || mask1 < 1 || mask0 > 128 || mask1 > 128 || mask0 > mask1) {\n      throw new Error('Invalid masks.');\n   }\n   const ret = [];\n   const binAddr = _addr2bin(addr);\n   const binNetPart = binAddr.substr(0, mask0);\n   const binHostPart = '0'.repeat(128 - mask1);\n   const numSubnets = Math.pow(2, mask1 - mask0);\n   for (let i = 0; i < numSubnets && i < limit; ++i) {\n      // generate an binary string with length of mask1 - mask0\n      let binSubnet = '';\n      for (let j = 0; j < mask1 - mask0; ++j) {\n         binSubnet += Math.floor(Math.random() * 2);\n      }\n      const binSubAddr = binNetPart + binSubnet + binHostPart;\n      const hexAddr = _bin2addr(binSubAddr);\n      if (!!abbr) {\n         ret.push(abbreviate(hexAddr));\n      } else {\n         ret.push(hexAddr);\n      }\n   }\n   // console.log(numSubnets);\n   // console.log(binNetPart, binSubnetPart, binHostPart);\n   // console.log(binNetPart.length, binSubnetPart.length, binHostPart.length);\n   // console.log(ret.length);\n   return ret;\n};\n\nconst ptr = function (addr, mask) {\n   if (!_validate(addr)) {\n      throw new Error('Invalid address: ' + addr);\n   }\n   mask *= 1;\n   if (mask < 1 || mask > 128 || Math.floor(mask / 4) != mask / 4) {\n      throw new Error('Invalid masks.');\n   }\n   const fullAddr = normalize(addr);\n   const reverse = fullAddr.replace(/:/g, '').split('').reverse();\n   return reverse.slice(0, (128 - mask) / 4).join('.');\n};\n\nif (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n   exports.normalize = normalize;\n   exports.abbreviate = abbreviate;\n   exports.divideSubnet = divideSubnet;\n   exports.range = range;\n   exports.randomSubnet = randomSubnet;\n   exports.ptr = ptr;\n} else {\n   window.normalize = normalize;\n   window.abbreviate = abbreviate;\n   window.divideSubnet = divideSubnet;\n   window.range = range;\n   window.randomSubnet = randomSubnet;\n   window.ptr = ptr;\n}\n","import ipaddr from 'ipaddr.js';\n// @ts-ignore: Can't find a @types/ip6 package\nimport ip6 from 'ip6';\n\nexport function isIP(addr: string) {\n  return ipaddr.isValid(addr);\n}\n\nexport function version(addr: string): number {\n  try {\n    const parse_addr = ipaddr.parse(addr);\n    const kind = parse_addr.kind();\n\n    if (kind === 'ipv4') {\n      return 4; //IPv4\n    } else if (kind === 'ipv6') {\n      return 6; //IPv6\n    } else {\n      /* istanbul ignore next */\n      return 0; //not 4 or 6\n    }\n  } catch (err) {\n    return 0; //not 4 or 6\n  }\n}\n\nexport function isV4(addr: string) {\n  return version(addr) === 4;\n}\n\nexport function isV6(addr: string) {\n  return version(addr) === 6;\n}\n\nexport function isRange(range: string) {\n  try {\n    const cidr = ipaddr.parseCIDR(range);\n    return true;\n  } catch (err) {\n    return false;\n  }\n}\n\nexport function inRange(addr: string, range: string | string[]) {\n  if (typeof range === 'string') {\n    if (range.indexOf('/') !== -1) {\n      try {\n        const range_data = range.split('/');\n\n        const parse_addr = ipaddr.parse(addr);\n        const parse_range = ipaddr.parse(range_data[0]);\n\n        //@ts-ignore:  It works.\n        return parse_addr.match(parse_range, range_data[1]);\n      } catch (err) {\n        return false;\n      }\n    } else {\n      addr = isV6(addr) ? ip6.normalize(addr) : addr; //v6 normalize addr\n      range = isV6(range) ? ip6.normalize(range) : range; //v6 normalize range\n\n      return isIP(range as string) && addr === range;\n    }\n  } else if (range && typeof range === 'object') {\n    //list\n    for (const check_range in range) {\n      if (inRange(addr, range[check_range]) === true) {\n        return true;\n      }\n    }\n    return false;\n  } else {\n    return false;\n  }\n}\n\nexport function storeIP(addr: string) {\n  try {\n    var parse_addr = ipaddr.parse(addr);\n    var kind = parse_addr.kind();\n\n    if (kind === 'ipv4') {\n      //is a plain v4 address\n      return addr;\n    } else if (kind === 'ipv6') {\n      //@ts-ignore:  it exists!\n      if (parse_addr.isIPv4MappedAddress()) {\n        //convert v4 mapped to v6 addresses to a v4 in it's original format\n        //@ts-ignore:  it exists!\n        return parse_addr.toIPv4Address().toString();\n      } //is a v6, abbreviate it\n      else {\n        return ip6.abbreviate(addr);\n      }\n    } else {\n      return null; //invalid IP address\n    }\n  } catch (err) {\n    return null; //invalid IP address\n  }\n}\n\n// searchIP is a aliases of storeIP\nexport { storeIP as searchIP };\n\nexport function displayIP(addr: string) {\n  try {\n    var parse_addr = ipaddr.parse(addr);\n    var kind = parse_addr.kind();\n\n    if (kind === 'ipv4') {\n      //is a plain v4 address\n      return addr;\n    } else if (kind === 'ipv6') {\n      //@ts-ignore:  it exists!\n      if (parse_addr.isIPv4MappedAddress()) {\n        //convert v4 mapped to v6 addresses to a v4 in it's original format\n        //@ts-ignore:  it exists!\n        return parse_addr.toIPv4Address().toString();\n      } //is a v6, normalize it\n      else {\n        return ip6.normalize(addr);\n      }\n    } else {\n      return ''; //invalid IP address\n    }\n  } catch (err) {\n    return ''; //invalid IP address\n  }\n}\n","/**\n * Load Hotjar event listeners\n */\n\n// Pixel load event listener\njQuery(document).on(\"pmw:load-pixels\", function () {\n\n\tif (wpmDataLayer?.pixels?.hotjar?.site_id && !wpmDataLayer?.pixels?.hotjar?.loaded) {\n\t\tif (wpm.consent.canPixelBeFired(\"statistics\", \"Hotjar\") && !wpmDataLayer?.pixels?.hotjar?.loaded) wpm.load_hotjar_pixel()\n\t}\n})\n","/**\n * Load Google Ads\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n","/**\n * Facebook loader\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n\n// #if process.env.TIER === 'premium'\n// if (wpm.canLoadPremiumFeatures()) {\n// \trequire(\"./functions_premium\")\n// \trequire(\"./event_listeners_premium\")\n// }\n// #endif\n\n","/**\n * Create a wpm namespace under which all functions are declared\n */\n\n// https://stackoverflow.com/a/5947280/4688612\n\n(function (wpm, $, undefined) {\n\n\tconst wpmDeduper = {\n\t\tkeyName          : \"_wpm_order_ids\",\n\t\tcookieExpiresDays: 365,\n\t};\n\n\tconst wpmRestSettings = {\n\t\t// cookiesAvailable                  : '_wpm_cookies_are_available',\n\t\tcookiePmwRestEndpointAvailable: \"restEndpointAvailable\",\n\t\trestEndpointPost              : \"pmw/v1/test/\",\n\t\trestFails                     : 0,\n\t\trestFailsThreshold            : 10,\n\t};\n\n\twpm.emailSelected         = false;\n\twpm.paymentMethodSelected = false;\n\n\twpm.isBelowRestErrorThreshold = () => wpm.retrieveData(wpmRestSettings.restFails) <= wpmRestSettings.restFailsThreshold;\n\n\twpm.isRestEndpointAvailable = async () => {\n\n\t\t// If we already tested the endpoint and have a stored value, return it\n\t\tif (wpm.retrieveData(wpmRestSettings.cookiePmwRestEndpointAvailable)) {\n\t\t\treturn wpm.retrieveData(wpmRestSettings.cookiePmwRestEndpointAvailable);\n\t\t}\n\n\t\treturn await wpm.testEndpoint();\n\t};\n\n\t/**\n\t * Tests a given endpoint by sending a POST request. If the response status is 200, it stores `true` in the dataStorage with given cookie name; else it stores `false`.\n\t *\n\t * @param {string} url - The URL of the endpoint to test. Defaults to concatenation of `wpm.root` and `wpmRestSettings.restEndpointPost`.\n\t * @param {string} cookieName - The name of the cookie where the test result will be stored. Defaults to `wpmRestSettings.cookiePmwRestEndpointAvailable`.\n\t * @returns {Promise<boolean>} - Returns a promise that resolves to `true` if the response status is 200, and `false` otherwise.\n\t * @async\n\t */\n\twpm.testEndpoint = async (\n\t\turl        = wpm.root + wpmRestSettings.restEndpointPost,\n\t\tcookieName = wpmRestSettings.cookiePmwRestEndpointAvailable,\n\t) => {\n\n\t\ttry {\n\n\t\t\tconst response = await fetch(url, {\n\t\t\t\tmethod   : \"POST\",\n\t\t\t\tmode     : \"cors\",\n\t\t\t\tcache    : \"no-cache\",\n\t\t\t\tkeepalive: true,\n\t\t\t\tredirect : \"error\",\t// don't follow redirects\n\t\t\t});\n\n\t\t\tif (!response.ok) {\n\t\t\t\twpm.storeData(cookieName, false);\n\t\t\t\tpmw.console.error(\"Error testing the endpoint. Status: \" + response.status + \" | response: \", response);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst responseJson = await response.json();\n\n\t\t\t// Return false if responseJson.success is not true\n\t\t\tif (!responseJson.success) {\n\t\t\t\twpm.storeData(cookieName, false);\n\t\t\t\tpmw.console.error(\"Error testing the endpoint. Response JSON: \" + JSON.stringify(responseJson));\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\twpm.storeData(cookieName, true);\n\t\t\treturn true;\n\n\t\t} catch (e) {\n\t\t\twpm.storeData(cookieName, false);\n\t\t\tpmw.console.error(\"Error testing the endpoint. Error: \" + e);\n\t\t\treturn false;\n\t\t}\n\t};\n\n\twpm.isWpmRestEndpointAvailable = (cookieName = wpmRestSettings.cookiePmwRestEndpointAvailable) => !!wpm.retrieveData(cookieName);\n\n\t/**\n\t * This function writes the provided orderId into storage. It will first retrieve the existing orderIds\n\t * from the storage if any, then add the new orderId into this existing array of orderIds  and stores\n\t * the updated array back to the storage.\n\t * If the function wpm.storeOrderIdOnServer exists and order_duplication_prevention is set to true in wpmDataLayer.shop,\n\t * this function will also store the orderId, orderKey and source on the server side using wpm.storeOrderIdOnServer.\n\t *\n\t * @param {String}  orderId  - The ID of the order to be stored.\n\t * @param {String}  orderKey - The Key of the order to be stored.\n\t * @param {String}  source - The source from which the order originated (default: 'thankyou_page').\n\t */\n\twpm.writeOrderIdToStorage = (orderId, orderKey, source = \"thankyou_page\") => {\n\n\t\t// Get existing order ids\n\t\tlet orderIds = wpm.retrieveData(\"orderIds\", true) || [];\n\n\t\t// Add the new order id\n\t\torderIds.push(orderId);\n\n\t\t// Store the order ids\n\t\twpm.storeData(\"orderIds\", orderIds, true);\n\n\t\tif (typeof wpm.storeOrderIdOnServer === \"function\") {\n\t\t\twpm.storeOrderIdOnServer({\n\t\t\t\torderId : orderId,\n\t\t\t\torderKey: orderKey,\n\t\t\t\tsource  : source,\n\t\t\t});\n\t\t}\n\t};\n\n\twpm.isOrderIdStored = orderId => {\n\n\t\t// If order deduplication is disabled, return false\n\t\tif (!wpmDataLayer.shop.order_duplication_prevention) {\n\t\t\tpmw.console.log(\"order duplication prevention is off\");\n\t\t\treturn false;\n\t\t}\n\n\t\tconst orderIds = wpm.retrieveData(\"orderIds\", true) || [];\n\t\treturn orderIds.includes(orderId);\n\t};\n\n\t/**\n\t * Check if the email address is valid\n\t *\n\t * https://stackoverflow.com/questions/201323/how-can-i-validate-an-email-address-using-a-regular-expression\n\t * https://www.w3.org/TR/html5/forms.html#valid-e-mail-address\n\t * https://fightingforalostcause.net/content/misc/2006/compare-email-regex.php\n\t *\n\t * @param email\n\t * @returns {boolean}\n\t */\n\twpm.isEmail = email => {\n\n\t\t/**\n\t\t * GitHub Copilot generated RFC 5322 compliant regex\n\t\t * - Don't allow emails without a top-level domain like \"john@localhost\"\n\t\t * - Don't allow emails with dots at the end of the name like \"john.doe.@example.com\"\n\t\t */\n\t\tconst regex = new RegExp(\n\t\t\t\"^(([^<>()\\\\[\\\\]\\\\\\\\.,;:\\\\s@\\\"]+(\\\\.[^<>()\\\\[\\\\]\\\\\\\\.,;:\\\\s@\\\"]+)*)|(\\\".+\\\"))\"\n\t\t\t+ \"@\"\n\t\t\t+ \"((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\])\"\n\t\t\t+ \"|(([a-zA-Z\\\\-0-9]+\\\\.)+[a-zA-Z]{2,}))$\",\n\t\t);\n\n\t\treturn regex.test(email);\n\t};\n\n\twpm.removeProductFromCart = async (productId, quantityToRemove = null) => {\n\n\t\ttry {\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\");\n\n\t\t\tproductId = wpm.getIdBasedOndVariationsOutputSetting(productId);\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\");\n\n\t\t\tlet quantity;\n\n\t\t\tif (quantityToRemove == null) {\n\t\t\t\tquantity = wpmDataLayer.cart[productId].quantity;\n\t\t\t} else {\n\t\t\t\tquantity = quantityToRemove;\n\t\t\t}\n\n\t\t\tif (!wpmDataLayer.cart[productId]) {\n\t\t\t\tawait wpm.getProductsFromBackend([productId]);\n\t\t\t}\n\n\t\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId, quantity);\n\n\t\t\tjQuery(document).trigger(\"pmw:remove-from-cart\", product);\n\n\t\t\tif (quantityToRemove == null || wpmDataLayer.cart[productId].quantity === quantityToRemove) {\n\t\t\t\tdelete wpmDataLayer.cart[productId];\n\t\t\t} else {\n\t\t\t\twpmDataLayer.cart[productId].quantity = wpmDataLayer.cart[productId].quantity - quantity;\n\t\t\t}\n\n\t\t\twpm.storeCartData(wpmDataLayer.cart);\n\n\t\t} catch (e) {\n\t\t\tpmw.console.error(\"error: \", e);\n\t\t}\n\t};\n\n\twpm.getIdBasedOndVariationsOutputSetting = productId => {\n\n\t\ttry {\n\t\t\tif (wpmDataLayer?.shop?.variations_output) return productId;\n\n\t\t\tif (wpmDataLayer.products[productId].is_variation) return wpmDataLayer.products[productId].parent_id;\n\n\t\t\treturn productId;\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\twpm.prepareSelectors = (selectors, type) => {\n\n\t\tif (wpmDataLayer?.shop?.selectors?.[type]) {\n\n\t\t\t// merge the selectors from the addToCartSelectors array with the selectors from the wpmDataLayer.shop.selectors.addToCart array\n\t\t\tselectors = selectors.concat(wpmDataLayer.shop.selectors[type]);\n\n\t\t\t// Remove duplicates\n\t\t\tselectors = [...new Set(selectors)];\n\n\t\t\t// If one of the selectors is document, remove it\n\t\t\tif (selectors.indexOf(\"document\") >= 0) {\n\t\t\t\tselectors.splice(selectors.indexOf(\"document\"), 1);\n\t\t\t}\n\n\t\t\t// If one of the selectors is body, remove all others\n\t\t\tif (selectors.indexOf(\"body\") >= 0) {\n\t\t\t\tselectors = [\"body\"];\n\t\t\t}\n\t\t}\n\n\t\treturn selectors.join(\", \");\n\t};\n\n\t// add_to_cart\n\twpm.addProductToCart = async (productId, quantity) => {\n\n\t\t// Cast quantity to number to make sure it's a number\n\t\tquantity = Number(quantity);\n\n\t\ttry {\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\");\n\n\t\t\tproductId = wpm.getIdBasedOndVariationsOutputSetting(productId);\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\");\n\n\t\t\tif (!wpmDataLayer?.products[productId]) {\n\t\t\t\tawait wpm.getProductsFromBackend([productId]);\n\t\t\t}\n\n\t\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId, quantity);\n\n\t\t\tjQuery(document).trigger(\"pmw:add-to-cart\", product);\n\n\t\t\t// add product to cart wpmDataLayer['cart']\n\n\t\t\t// if the product already exists in the object, only add the additional quantity\n\t\t\t// otherwise create that product object in the wpmDataLayer['cart']\n\t\t\tif (wpmDataLayer?.cart[productId]) {\n\n\t\t\t\twpmDataLayer.cart[productId].quantity = wpmDataLayer.cart[productId].quantity + quantity;\n\t\t\t} else {\n\n\t\t\t\tif (!(\"cart\" in wpmDataLayer)) wpmDataLayer.cart = {};\n\n\t\t\t\twpmDataLayer.cart[productId] = wpm.getProductDetailsFormattedForEvent(productId, quantity);\n\t\t\t}\n\n\t\t\twpm.storeCartData(wpmDataLayer.cart);\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\n\t\t\t// fallback if wpmDataLayer.cart and wpmDataLayer.products got out of sync in case cart caching has an issue\n\t\t\twpm.getCartItemsFromBackend();\n\t\t}\n\t};\n\n\twpm.initCart = () => {\n\n\t\t// If the WC cart doesn't exist, eg. after a confirmed purchase,\n\t\t// and we still have a cart object in the storage, reset it.\n\t\tif (\n\t\t\t!wpm.doesWooCommerceCartExist()\n\t\t\t&& Object.keys(wpm.retrieveCartData()).length !== 0\n\t\t) {\n\t\t\twpm.storeCartData({});\n\t\t\treturn;\n\t\t}\n\n\t\t// If the cart object is in the storage, use it\n\t\tif (wpm.retrieveCartData()) {\n\t\t\twpm.saveCartObjectToDataLayer(wpm.retrieveCartData());\n\t\t\treturn;\n\t\t}\n\n\t\t// If the cart object is missing in the storage, create an empty one and get the cart items from the backend\n\t\twpm.storeCartData({});\n\t\twpm.getCartItemsFromBackend();\n\t};\n\n\t// get all cart items from the backend\n\twpm.getCartItemsFromBackend = () => {\n\t\ttry {\n\n\t\t\t/**\n\t\t\t * Can't use a REST API endpoint, as the cart session will not be loaded if the\n\t\t\t * endpoint is called.\n\t\t\t *\n\t\t\t * https://wordpress.org/support/topic/wc-cart-is-null-in-custom-rest-api/#post-11442843\n\t\t\t */\n\n\t\t\t/**\n\t\t\t * Get the cart items from the backend the data object using fetch API\n\t\t\t * and log success or error messages\n\t\t\t * and url encoded data\n\t\t\t */\n\t\t\tfetch(wpm.ajax_url, {\n\t\t\t\tmethod   : \"POST\",\n\t\t\t\tcache    : \"no-cache\",\n\t\t\t\tbody     : new URLSearchParams({action: \"pmw_get_cart_items\"}),\n\t\t\t\tkeepalive: true,\n\t\t\t\tredirect : \"error\",\n\t\t\t})\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\treturn response.json();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow Error(\"Error getting cart items from backend\");\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(data => {\n\n\t\t\t\t\tif (data.success) {\n\n\t\t\t\t\t\tif (!data.data[\"cart\"]) data.data[\"cart\"] = {};\n\t\t\t\t\t\twpm.saveCartObjectToDataLayer(data.data[\"cart\"]);\n\t\t\t\t\t\twpm.storeCartData(data.data[\"cart\"]);\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow Error(\"Error getting cart items from backend\");\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\t// Get product IDs from the backend\n\twpm.getProductsFromBackend = async productIds => {\n\n\t\tif (wpmDataLayer?.products) {\n\t\t\t// If productIds already exists as key in wpmDataLayer.products, remove it from the array\n\t\t\tproductIds = productIds.filter(productId => !(productId in wpmDataLayer.products));\n\t\t}\n\n\t\t// If no product IDs are in the object, don't try to get anything from the server\n\t\tif (!productIds || productIds.length === 0) return;\n\n\t\t// if no page_id is set, don't try to get anything from the server\n\t\tif (!wpmDataLayer.general.page_id) return;\n\n\t\t// if productIds is not an array, or it's an empty array, don't try to get anything from the server\n\t\tif (!Array.isArray(productIds) || productIds.length === 0) return;\n\n\t\ttry {\n\n\t\t\tlet data = {\n\t\t\t\taction     : \"pmw_get_product_ids\",  // for the AJAX call\n\t\t\t\tpage_id    : wpmDataLayer.general.page_id,\n\t\t\t\tpage_type  : wpmDataLayer.shop.page_type,\n\t\t\t\tproduct_ids: productIds,\n\t\t\t};\n\n\t\t\tconst isRestEndpointAvailable = await wpm.isRestEndpointAvailable();\n\t\t\tconst url                     = isRestEndpointAvailable ? wpm.root + \"pmw/v1/products/\" : wpm.ajax_url;\n\n\t\t\tconst options = {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tcache : \"no-cache\",\n\t\t\t\tbody  : isRestEndpointAvailable ? JSON.stringify(data) : new URLSearchParams(data),\n\t\t\t};\n\n\t\t\t// If the REST API is available, set the headers to JSON\n\t\t\tif (isRestEndpointAvailable) {\n\t\t\t\toptions.headers = {\"Content-Type\": \"application/json\"};\n\t\t\t}\n\n\t\t\tlet response = await fetch(url, options);\n\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(\"Error getting products from backend. Status: \" + response.status + \" Status text: \" + response.statusText);\n\t\t\t}\n\n\t\t\tlet responseData = await response.json();\n\n\t\t\tif (!responseData.success) {\n\t\t\t\tthrow new Error(\"Error getting products from backend: \" + responseData.data);\n\t\t\t}\n\n\t\t\twpmDataLayer.products = Object.assign({}, wpmDataLayer.products, responseData.data);\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\n\t\treturn true;\n\t};\n\n\twpm.saveCartObjectToDataLayer = cartObject => {\n\n\t\twpmDataLayer.cart     = cartObject;\n\t\twpmDataLayer.products = Object.assign({}, wpmDataLayer.products, cartObject);\n\t};\n\n\twpm.triggerViewItemEventPrep = async productId => {\n\n\t\tif (!wpmDataLayer?.products[productId]) {\n\t\t\tawait wpm.getProductsFromBackend([productId]);\n\t\t}\n\n\t\tif (!wpmDataLayer?.products[productId]) {\n\t\t\twpm.triggerViewItemEventNoProduct();\n\t\t\tpmw.console.log(`Product with ID ${productId} not found in the data layer and couldn't be retrieved from the backend. Triggering view-item event without product data.`);\n\t\t} else {\n\t\t\twpm.triggerViewItemEvent(productId);\n\t\t}\n\t};\n\n\twpm.triggerViewItemEvent = productId => {\n\n\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId);\n\n\t\tif (!product) return;\n\n\t\tjQuery(document).trigger(\"pmw:view-item\", product);\n\t};\n\n\twpm.triggerViewItemEventNoProduct = () => {\n\t\tjQuery(document).trigger(\"pmw:view-item\");\n\t};\n\n\twpm.fireCheckoutOption = (step, checkout_option = null, value = null) => {\n\n\t\tlet data = {\n\t\t\tstep           : step,\n\t\t\tcheckout_option: checkout_option,\n\t\t\tvalue          : value,\n\t\t};\n\n\t\tjQuery(document).trigger(\"pmw:checkout-option\", data);\n\t};\n\n\twpm.fireCheckoutProgress = step => {\n\n\t\tlet data = {\n\t\t\tstep: step,\n\t\t};\n\n\t\tjQuery(document).trigger(\"pmw:checkout-progress\", data);\n\t};\n\n\twpm.getPostIdFromString = string => {\n\n\t\ttry {\n\t\t\treturn string.match(/(post-)(\\d+)/)[2];\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\twpm.triggerViewItemList = productId => {\n\n\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\");\n\n\t\tproductId = wpm.getIdBasedOndVariationsOutputSetting(productId);\n\n\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\");\n\n\t\tjQuery(document).trigger(\"pmw:view-item-list\", wpm.getProductDataForViewItemEvent(productId));\n\t};\n\n\twpm.getProductDataForViewItemEvent = productId => {\n\n\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\");\n\n\t\ttry {\n\t\t\tif (wpmDataLayer.products[productId]) {\n\n\t\t\t\treturn wpm.getProductDetailsFormattedForEvent(productId);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\twpm.getMainProductIdFromProductPage = () => {\n\n\t\ttry {\n\t\t\tif ([\"simple\", \"variable\", \"grouped\", \"composite\", \"bundle\"].indexOf(wpmDataLayer.shop.product_type) >= 0) {\n\t\t\t\treturn jQuery(\".wpmProductId:first\").data(\"id\");\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\twpm.viewItemListTriggerTestMode = target => {\n\n\t\tjQuery(target).css({\"position\": \"relative\"});\n\t\tjQuery(target).append(\"<div id=\\\"viewItemListTriggerOverlay\\\"></div>\");\n\t\tjQuery(target).find(\"#viewItemListTriggerOverlay\").css({\n\t\t\t\"z-index\"         : \"10\",\n\t\t\t\"display\"         : \"block\",\n\t\t\t\"position\"        : \"absolute\",\n\t\t\t\"height\"          : \"100%\",\n\t\t\t\"top\"             : \"0\",\n\t\t\t\"left\"            : \"0\",\n\t\t\t\"right\"           : \"0\",\n\t\t\t\"opacity\"         : wpmDataLayer.shop.view_item_list_trigger.opacity,\n\t\t\t\"background-color\": wpmDataLayer.shop.view_item_list_trigger.background_color,\n\t\t});\n\t};\n\n\twpm.getSearchTermFromUrl = () => {\n\n\t\ttry {\n\t\t\tlet urlParameters = new URLSearchParams(window.location.search);\n\t\t\treturn urlParameters.get(\"s\");\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\t// we need this to track timeouts for intersection observers\n\tlet ioTimeouts = {};\n\n\twpm.observerCallback = (entries, observer) => {\n\n\t\tentries.forEach((entry) => {\n\n\t\t\ttry {\n\t\t\t\tlet productId;\n\n\t\t\t\tlet elementId = jQuery(entry.target).data(\"ioid\");\n\n\t\t\t\t// Get the productId from next element, if wpmProductId is a sibling, like in Gutenberg blocks\n\t\t\t\t// otherwise go search in children, like in regular WC loop items\n\t\t\t\tif (jQuery(entry.target).next(\".wpmProductId\").length) {\n\t\t\t\t\t// console.log('test 1');\n\t\t\t\t\tproductId = jQuery(entry.target).next(\".wpmProductId\").data(\"id\");\n\t\t\t\t} else {\n\t\t\t\t\tproductId = jQuery(entry.target).find(\".wpmProductId\").data(\"id\");\n\t\t\t\t}\n\n\n\t\t\t\tif (!productId) throw Error(\"wpmProductId element not found\");\n\n\t\t\t\tif (entry.isIntersecting) {\n\n\t\t\t\t\tioTimeouts[elementId] = setTimeout(() => {\n\n\t\t\t\t\t\twpm.triggerViewItemList(productId);\n\t\t\t\t\t\tif (wpmDataLayer.shop.view_item_list_trigger.test_mode) wpm.viewItemListTriggerTestMode(entry.target);\n\t\t\t\t\t\tif (wpmDataLayer.shop.view_item_list_trigger.repeat === false) observer.unobserve(entry.target);\n\t\t\t\t\t}, wpmDataLayer.shop.view_item_list_trigger.timeout);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tclearTimeout(ioTimeouts[elementId]);\n\t\t\t\t\tif (wpmDataLayer.shop.view_item_list_trigger.test_mode) jQuery(entry.target).find(\"#viewItemListTriggerOverlay\").remove();\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t});\n\t};\n\n\t// fire view_item_list only on products that have become visible\n\tlet io;\n\tlet ioid = 0;\n\n\tconst getCommonIdentifiersToWatch = () => {\n\n\t\tlet listOfClassNames = {\n\t\t\tnested: [],\n\t\t\tflat  : [],\n\t\t};\n\n\t\ttry {\n\n\t\t\tconst haveSameNestingDepth = (element1, element2) => {\n\n\t\t\t\t// If both are the same, return the parent\n\t\t\t\treturn jQuery(element1).parents().length === jQuery(element2).parents().length;\n\t\t\t};\n\n\t\t\tconst findCommonParentElement = (element1, element2) => {\n\t\t\t\t// If both are the same, return the parent\n\t\t\t\tif (jQuery(element1).parent().is(jQuery(element2).parent())) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tnode: jQuery(element1).parent(),\n\t\t\t\t\t\ttype: \"flat\",\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tnode: jQuery(element1).parents().has(jQuery(element2).parents()).first(),\n\t\t\t\t\ttype: \"nested\",\n\t\t\t\t};\n\t\t\t};\n\n\t\t\tconst countOfChildren = (element) => {\n\t\t\t\t// Return the count of \"wpmProductId\" elements\n\t\t\t\treturn jQuery(element).find(\".wpmProductId\").length;\n\t\t\t};\n\n\t\t\tconst getCommonClass = (classes1, classes2) => {\n\n\t\t\t\t// console.log(\"classes1\", classes1);\n\t\t\t\t// console.log(\"classes2\", classes2);\n\t\t\t\t// classes 1 and 2 are arrays of classes\n\t\t\t\t// They may contain the same classes, but not in the same order\n\t\t\t\t// Return the first common class that's present in both arrays\n\n\t\t\t\treturn classes1.filter(value => classes2.includes(value))[0] || null;\n\t\t\t};\n\n\t\t\tconst wpmProductIds = document.querySelectorAll(\".wpmProductId\");\n\n\t\t\t// If zero or only one product template is found, then we can't run the algorithm\n\t\t\tif (wpmProductIds.length === 1) {\n\t\t\t\t// console.log(\"No product or too few templates found\")\n\t\t\t\treturn listOfClassNames;\n\t\t\t}\n\n\t\t\t// console.log(\"wpmProductIds\", wpmProductIds);\n\t\t\t// console.log(\"looping\")\n\n\t\t\tfor (let i = 0; i < wpmProductIds.length - 1; i++) {\n\n\t\t\t\t// console.log(\"i\", i)\n\n\t\t\t\tif (!haveSameNestingDepth(wpmProductIds[i], wpmProductIds[i + 1])) {\n\t\t\t\t\t// console.log(\"The nesting depth is not the same\")\n\t\t\t\t\ti++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet productsNode = findCommonParentElement(wpmProductIds[i], wpmProductIds[i + 1]);\n\t\t\t\t// console.log(\"productsNode.node\", productsNode.node)\n\t\t\t\t// console.log(\"productsNode.type\", productsNode.type)\n\n\t\t\t\t// If the productsNode is nested, get the first class of the first child. Then console log the class\n\t\t\t\tif (productsNode.type === \"nested\") {\n\n\t\t\t\t\tlet firstChildClassAttr = productsNode.node.children().first().attr(\"class\");\n\t\t\t\t\tlet firstChildClasses   = firstChildClassAttr ? firstChildClassAttr.split(\" \") : [];\n\n\t\t\t\t\tlet secondChildClassAttr = productsNode.node.children().first().next().attr(\"class\");\n\t\t\t\t\tlet secondChildClasses   = secondChildClassAttr ? secondChildClassAttr.split(\" \") : [];\n\n\t\t\t\t\tconst commonClass = getCommonClass(firstChildClasses, secondChildClasses);\n\n\t\t\t\t\tlistOfClassNames.nested.push(commonClass);\n\t\t\t\t} else if (productsNode.type === \"flat\") {\n\n\t\t\t\t\t// If class is not found, continue\n\t\t\t\t\tif (!productsNode.node.children().first().attr(\"class\")) continue;\n\n\t\t\t\t\t// firstProductTemplateClasses is the classes of the first child element of the productsNode\n\t\t\t\t\tlet firstProductTemplateClasses = productsNode.node.children().first().attr(\"class\").split(\" \")[0];\n\n\t\t\t\t\tlistOfClassNames.flat.push(firstProductTemplateClasses);\n\t\t\t\t}\n\n\t\t\t\t// which wpmProductIds is the last one in the productsNode? console log the index of the last wpmProductId in the productsNode\n\t\t\t\t// console.log(\"productsNode.children().length\", countOfChildren(productsNode));\n\n\t\t\t\ti = i + countOfChildren(productsNode.node) - 1;\n\t\t\t}\n\n\t\t\t// Make the list of class names unique\n\t\t\tlistOfClassNames.nested = [...new Set(listOfClassNames.nested)];\n\t\t\tlistOfClassNames.flat   = [...new Set(listOfClassNames.flat)];\n\n\t\t\treturn listOfClassNames;\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\treturn listOfClassNames;\n\t\t}\n\t};\n\n\n\tlet detectedProductTemplateClasses = {\n\t\tnested: [],\n\t\tflat  : [],\n\t};\n\n\tconst isNestedClass = (elem) => {\n\t\tlet nestedClassNames = [\n\t\t\t\"product\",\n\t\t\t\"type-product\",\n\t\t\t\"product-item-inner\",\n\t\t\t...detectedProductTemplateClasses.nested,\n\t\t];\n\n\t\treturn nestedClassNames.some(className => jQuery(elem).closest(\".\" + className).length);\n\t};\n\n\tconst isFlatClass = (elem) => {\n\n\t\tlet flatClassNames = [\n\t\t\t\"wc-block-grid__product\",\n\t\t\t\"product\",\n\t\t\t\"product-small\",\n\t\t\t\"woocommerce-LoopProduct-link\",\n\t\t\t...detectedProductTemplateClasses.flat,\n\t\t];\n\n\t\treturn flatClassNames.some(className => jQuery(elem).prev().hasClass(className));\n\t};\n\n\tconst getAllElementsToWatch = () => {\n\n\t\tdetectedProductTemplateClasses = getCommonIdentifiersToWatch();\n\n\t\treturn jQuery(\".wpmProductId\")\n\t\t\t.map(function (i, elem) {\n\n\t\t\t\tif (isNestedClass(elem)) {\n\t\t\t\t\treturn jQuery(elem).parent();\n\t\t\t\t} else if (isFlatClass(elem)) {\n\t\t\t\t\treturn jQuery(this).prev();\n\t\t\t\t} else if (jQuery(elem).closest(\".product\").length) {\n\t\t\t\t\treturn jQuery(elem).closest(\".product\");\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\twpm.startIntersectionObserverToWatch = () => {\n\n\t\ttry {\n\t\t\t// enable view_item_list test mode from browser\n\t\t\tif (wpm.urlHasParameter(\"vildemomode\")) wpmDataLayer.shop.view_item_list_trigger.test_mode = true;\n\n\t\t\t// set up intersection observer\n\t\t\t// https://stackoverflow.com/questions/62084306/intersectionobserver-not-working-in-safari-or-ios\n\t\t\tio = new IntersectionObserver(wpm.observerCallback, {\n\t\t\t\troot: null,\n\t\t\t\t// root     : document.body,\n\t\t\t\tthreshold: wpmDataLayer.shop.view_item_list_trigger.threshold,\n\t\t\t});\n\n\t\t\tgetAllElementsToWatch().each((i, elem) => {\n\n\t\t\t\tjQuery(elem[0]).data(\"ioid\", ioid++);\n\n\t\t\t\tio.observe(elem[0]);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\t// Watch DOM for new lazy loaded products and add them to the intersection observer\n\twpm.startProductsMutationObserverToWatch = () => {\n\n\t\ttry {\n\t\t\t// Pass in the target node, as well as the observer options\n\n\t\t\t// selects the most common parent node\n\t\t\t// https://stackoverflow.com/a/7648323/4688612\n\t\t\tlet productsNode = jQuery(\".wpmProductId:eq(0)\").parents().has(jQuery(\".wpmProductId:eq(1)\").parents()).first();\n\n\t\t\tif (productsNode.length) {\n\t\t\t\tproductsMutationObserver.observe(productsNode[0], {\n\t\t\t\t\tattributes   : true,\n\t\t\t\t\tchildList    : true,\n\t\t\t\t\tcharacterData: true,\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\t// Create an observer instance\n\tconst productsMutationObserver = new MutationObserver(mutations => {\n\n\t\tmutations.forEach(mutation => {\n\t\t\tlet newNodes = mutation.addedNodes; // DOM NodeList\n\t\t\tif (newNodes !== null) { // If there are new nodes added\n\t\t\t\tlet nodes = jQuery(newNodes); // jQuery set\n\t\t\t\tnodes.each((i, node) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t// jQuery(this).hasClass(\"type-product\") ||\n\t\t\t\t\t\t// jQuery(this).hasClass(\"product-small\") ||\n\t\t\t\t\t\t// jQuery(this).hasClass(\"wc-block-grid__product\")\n\t\t\t\t\t\t// jQuery(this).hasClass(\"type-product\")\n\t\t\t\t\t\tisNestedClass(node) || isFlatClass(node)\n\t\t\t\t\t) {\n\t\t\t\t\t\t// check if the node has a child or sibling wpmProductId\n\t\t\t\t\t\t// if yes add it to the intersectionObserver\n\t\t\t\t\t\tif (hasWpmProductIdElement(node)) {\n\t\t\t\t\t\t\tjQuery(node).data(\"ioid\", ioid++);\n\t\t\t\t\t\t\tio.observe(node);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\n\tlet hasWpmProductIdElement = elem =>\n\t\t!!(jQuery(elem).find(\".wpmProductId\").length ||\n\t\t\tjQuery(elem).siblings(\".wpmProductId\").length);\n\n\t/**\n\t * Sets a new cookie or updates an existing one with the provided name and value.\n\t *\n\t * @function setCookie\n\t * @global\n\t * @param {string} cookieName - The name of the cookie.\n\t * @param {string} [cookieValue=\"\"] - The value to set for the cookie. Default value is an empty string.\n\t * @param {number|null} [expiryDays=null] - The number of days until the cookie expires. If not provided, the cookie will last until the end of the session.\n\t * @returns {void}\n\t *\n\t * @example\n\t * // This will create a cookie \"username\" with the value \"JohnDoe\" that expires in 7 days\n\t * wpm.setCookie(\"username\", \"JohnDoe\", 7);\n\t */\n\twpm.setCookie = (cookieName, cookieValue = \"\", expiryDays = null) => {\n\n\t\tif (expiryDays) {\n\n\t\t\tlet d = new Date();\n\t\t\td.setTime(d.getTime() + (expiryDays * 24 * 60 * 60 * 1000));\n\t\t\tlet expires     = \"expires=\" + d.toUTCString();\n\t\t\tdocument.cookie = cookieName + \"=\" + cookieValue + \";\" + expires + \";path=/\";\n\t\t} else {\n\t\t\tdocument.cookie = cookieName + \"=\" + cookieValue + \";path=/\";\n\t\t}\n\t};\n\n\t/**\n\t * Retrieves the value of a specific cookie from the document's cookie string.\n\t *\n\t * @param {String} cookieName - The name of the cookie to retrieve.\n\t * @returns {String} - The value of the cookie if found, an empty string otherwise.\n\t *\n\t * @example\n\t * // returns 'value' if 'cookieName=value' exists in document.cookie\n\t * wpm.getCookie('cookieName')\n\t */\n\twpm.getCookie = cookieName => {\n\n\t\tlet name          = cookieName + \"=\";\n\t\tlet decodedCookie = decodeURIComponent(document.cookie);\n\t\tlet ca            = decodedCookie.split(\";\");\n\n\t\tfor (let i = 0; i < ca.length; i++) {\n\n\t\t\tlet c = ca[i];\n\n\t\t\twhile (c.charAt(0) == \" \") {\n\t\t\t\tc = c.substring(1);\n\t\t\t}\n\n\t\t\tif (c.indexOf(name) == 0) {\n\t\t\t\treturn c.substring(name.length, c.length);\n\t\t\t}\n\t\t}\n\n\t\treturn \"\";\n\t};\n\n\t/**\n\t * Find and get the cookie with a name that contains the string.\n\t * If one is found, then return the cookie.\n\t * If none is found, then return false.\n\t *\n\t * @param string\n\t * @returns {boolean|string}\n\t *\n\t * @since 1.32.5\n\t */\n\twpm.getCookieThatContainsRegex = (regex) => {\n\n\t\tlet cookies = document.cookie.split(\";\");\n\n\t\tfor (let i = 0; i < cookies.length; i++) {\n\t\t\tlet cookie = cookies[i].trim();\n\n\t\t\tif (regex.test(cookie)) {\n\t\t\t\treturn cookie;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\twpm.deleteCookie = cookieName => {\n\t\twpm.setCookie(cookieName, \"\", -1);\n\t};\n\n\t/**\n\t * Store data in the browser\n\t *\n\t * Try to store the data in the local storage (session or persistent) if available.\n\t * If not available, store the data in the cookie.\n\t *\n\t * Max cookie expiry is 400 days as specified by Google Chrome: https://developer.chrome.com/blog/cookie-max-age-expires/\n\t *\n\t * @param key\n\t * @param value\n\t * @param persistent\n\t * @param extension - If true, this will be saved in a separate key\n\t */\n\twpm.storeData = (key, value, persistent = false, extension = false) => {\n\n\t\tconst suffix = extension ? key : \"\";\n\n\t\tlet dataGetter = persistent ? wpm.getPersistentData : wpm.getSessionData;\n\t\tlet dataSetter = persistent ? wpm.setPersistentData : wpm.setSessionData;\n\n\t\tlet data = dataGetter(suffix);\n\t\textension ? data = value : data[key] = value;\n\n\t\tdataSetter(data, suffix);\n\t};\n\n\twpm.retrieveData = (key, persistent = false, extension = false) => {\n\n\t\tconst suffix = extension ? key : \"\";\n\n\t\tlet data = persistent ? wpm.getPersistentData(suffix) : wpm.getSessionData(suffix);\n\n\t\treturn extension ? data : data[key];\n\t};\n\n\twpm.deleteDataKey = (key, persistent = false, extension = false) => {\n\n\t\tconst suffix = extension ? key : \"\";\n\n\t\tlet dataGetter = persistent ? wpm.getPersistentData : wpm.getSessionData;\n\t\tlet dataSetter = persistent ? wpm.setPersistentData : wpm.setSessionData;\n\n\t\tlet data = dataGetter(suffix);\n\t\t// extension ? delete data : delete data[key]\n\n\t\tif (extension) {\n\n\t\t\ttry {\n\t\t\t\tif (persistent && window.localStorage) window.localStorage.removeItem(wpm.getPersistentDataKey(suffix));\n\t\t\t\tif (!persistent && window.sessionStorage) window.sessionStorage.removeItem(wpm.getSessionDataKey(suffix));\n\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tdelete data[key];\n\n\t\tdataSetter(data, suffix);\n\t};\n\n\twpm.storeCartData = data => {\n\t\twpm.storeData(\"cart\", data, false, true);\n\t};\n\n\twpm.retrieveCartData = () => {\n\t\treturn wpm.retrieveData(\"cart\", false, true);\n\t};\n\n\twpm.getSessionDataKey = (suffix = \"\") => {\n\t\tconst defaultStorageKey = \"_pmw_session_data\";\n\n\t\tif (suffix) {\n\t\t\treturn defaultStorageKey + \"_\" + suffix;\n\t\t}\n\n\t\treturn defaultStorageKey;\n\t};\n\n\twpm.getPersistentDataKey = (storageKeySuffix) => {\n\n\t\tconst defaultStorageKey = \"_pmw_persistent_data\";\n\n\t\tif (storageKeySuffix) {\n\t\t\treturn defaultStorageKey + \"_\" + storageKeySuffix;\n\t\t}\n\n\t\treturn defaultStorageKey;\n\t};\n\n\twpm.getSessionData = (suffix = \"\") => {\n\n\t\tif (window.sessionStorage) {\n\n\t\t\tlet data = window.sessionStorage.getItem(wpm.getSessionDataKey(suffix));\n\n\t\t\treturn data !== null ? JSON.parse(data) : {};\n\t\t} else {\n\t\t\t// fallback to cookie\n\t\t\tlet data = wpm.getCookie(wpm.getSessionDataKey(suffix));\n\n\t\t\treturn data !== \"\" ? JSON.parse(data) : {};\n\t\t}\n\t};\n\n\twpm.setSessionData = (data, storageKeySuffix = \"\") => {\n\t\tif (window.sessionStorage) {\n\t\t\twindow.sessionStorage.setItem(wpm.getSessionDataKey(storageKeySuffix), JSON.stringify(data));\n\t\t} else {\n\t\t\t// fallback to cookie\n\t\t\twpm.setCookie(wpm.getSessionDataKey(storageKeySuffix), JSON.stringify(data));\n\t\t}\n\t};\n\n\twpm.getPersistentData = (storageKeySuffix) => {\n\n\t\tif (window.localStorage) {\n\n\t\t\tlet data = window.localStorage.getItem(wpm.getPersistentDataKey(storageKeySuffix));\n\n\t\t\treturn data !== null ? JSON.parse(data) : {};\n\t\t} else {\n\t\t\t// fallback to cookie\n\t\t\tlet data = wpm.getCookie(wpm.getPersistentDataKey(storageKeySuffix));\n\n\t\t\treturn data !== \"\" ? JSON.parse(data) : {};\n\t\t}\n\t};\n\n\twpm.setPersistentData = (data, storageKeySuffix = \"\") => {\n\n\t\tif (window.localStorage) {\n\t\t\twindow.localStorage.setItem(wpm.getPersistentDataKey(storageKeySuffix), JSON.stringify(data));\n\t\t} else {\n\t\t\t// fallback to cookie\n\t\t\twpm.setCookie(wpm.getPersistentDataKey(storageKeySuffix), JSON.stringify(data), 400);\n\t\t}\n\t};\n\n\twpm.storeOrderIdOnServer = async (orderDetails) => {\n\n\t\ttry {\n\n\t\t\tlet response;\n\n\t\t\tif (await wpm.isRestEndpointAvailable()) {\n\n\t\t\t\tresponse = await fetch(wpm.root + \"pmw/v1/pixels-fired/\", {\n\t\t\t\t\tmethod   : \"POST\",\n\t\t\t\t\theaders  : {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t// \"X-WP-Nonce\"  : wpm.nonce_wp_rest,\n\t\t\t\t\t},\n\t\t\t\t\tbody     : JSON.stringify({\n\t\t\t\t\t\torder_id : orderDetails.orderId,\n\t\t\t\t\t\torder_key: orderDetails.orderKey,\n\t\t\t\t\t\tsource   : orderDetails.source,\n\t\t\t\t\t\t// nonce   : wpm.pmw_nonce,\n\t\t\t\t\t}),\n\t\t\t\t\tkeepalive: true,\n\t\t\t\t\tcache    : \"no-cache\",\n\t\t\t\t\tredirect : \"error\",\n\t\t\t\t});\n\n\t\t\t} else {\n\n\t\t\t\tpmw.console.log(\"REST API not available, falling back to AJAX\");\n\n\t\t\t\t// save the state in the database\n\n\t\t\t\t// Send the data object with ajax request\n\t\t\t\t// and log success or error using fetch API and url encoded\n\t\t\t\tresponse = await fetch(wpm.ajax_url, {\n\t\t\t\t\tmethod   : \"POST\",\n\t\t\t\t\tbody     : new URLSearchParams({\n\t\t\t\t\t\taction   : \"pmw_purchase_pixels_fired\",\n\t\t\t\t\t\torder_id : orderDetails.orderId,\n\t\t\t\t\t\torder_key: orderDetails.orderKey,\n\t\t\t\t\t\tsource   : orderDetails.source,\n\t\t\t\t\t\t// nonce_ajax: wpm.nonce_ajax,\n\t\t\t\t\t}),\n\t\t\t\t\tkeepalive: true,\n\t\t\t\t\tredirect : \"error\",\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst responseJson = await response.json();\n\n\t\t\tif (responseJson.success) {\n\t\t\t\tpmw.console.log(\"\", responseJson.data);\n\t\t\t} else {\n\t\t\t\tpmw.console.error(\"\", responseJson.data);\n\t\t\t}\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n\n\twpm.getProductIdByCartItemElement = element => {\n\n\t\tconst href = jQuery(element).find(\".product-remove\").find(\"a\").attr(\"href\");\n\t\tif (href) return wpm.getProductIdByCartItemKeyUrl(new URL(href));\n\n\t\tconst productId = jQuery(element).find(\"[data-product_id]\").first().attr(\"data-product_id\");\n\t\treturn productId ? productId : null;\n\t};\n\n\twpm.getProductQuantityByCartItemElement = element => {\n\n\t\treturn jQuery(element).find(\".qty\").val() || null;\n\t};\n\n\twpm.getProductIdByCartItemKeyUrl = url => {\n\n\t\tlet searchParams = new URLSearchParams(url.search);\n\t\tlet cartItemKey  = searchParams.get(\"remove_item\");\n\n\t\tlet productId;\n\n\t\tif (wpmDataLayer.cart_item_keys[cartItemKey][\"variation_id\"] === 0) {\n\t\t\tproductId = wpmDataLayer.cart_item_keys[cartItemKey][\"product_id\"];\n\t\t} else {\n\t\t\tproductId = wpmDataLayer.cart_item_keys[cartItemKey][\"variation_id\"];\n\t\t}\n\n\t\treturn productId;\n\t};\n\n\twpm.getAddToCartLinkProductIds = () =>\n\t\tjQuery(\"a\").map(function () {\n\t\t\tlet href = jQuery(this).attr(\"href\");\n\n\t\t\tif (href && href.includes(\"?add-to-cart=\")) {\n\t\t\t\tlet matches = href.match(/(add-to-cart=)(\\d+)/);\n\t\t\t\tif (matches) return matches[2];\n\t\t\t}\n\t\t}).get();\n\n\twpm.getProductDetailsFormattedForEvent = (productId, quantity = 1) => {\n\n\t\t// If wpmDataLayer.products[productId] doesn't exist, return an empty object\n\t\tif (!wpmDataLayer.products[productId]) return null;\n\n\t\tlet product = {\n\t\t\tid           : productId.toString(),\n\t\t\tdyn_r_ids    : wpmDataLayer.products[productId].dyn_r_ids,\n\t\t\tname         : wpmDataLayer.products[productId].name,\n\t\t\tlist_name    : wpmDataLayer.shop.list_name,\n\t\t\tbrand        : wpmDataLayer.products[productId].brand,\n\t\t\tcategory     : wpmDataLayer.products[productId].category,\n\t\t\tvariant      : wpmDataLayer.products[productId].variant,\n\t\t\tlist_position: wpmDataLayer.products[productId].position,\n\t\t\tquantity     : quantity,\n\t\t\tprice        : wpmDataLayer.products[productId].price,\n\t\t\tcurrency     : wpmDataLayer.shop.currency,\n\t\t\tis_variable  : wpmDataLayer.products[productId].is_variable,\n\t\t\tis_variation : wpmDataLayer.products[productId].is_variation,\n\t\t\tparent_id    : wpmDataLayer.products[productId].parent_id,\n\t\t};\n\n\t\tif (product.is_variation) product[\"parent_id_dyn_r_ids\"] = wpmDataLayer.products[productId].parent_id_dyn_r_ids;\n\n\t\treturn product;\n\t};\n\n\twpm.getClidFromBrowser = (clidId = \"gclid\") => {\n\n\t\tlet clidCookieId;\n\n\t\tclidCookieId = {\n\t\t\tgclid: \"_gcl_aw\",\n\t\t\tdclid: \"_gcl_dc\",\n\t\t};\n\n\t\tif (wpm.getCookie(clidCookieId[clidId])) {\n\n\t\t\tlet clidCookie = wpm.getCookie(clidCookieId[clidId]);\n\t\t\tlet matches    = clidCookie.match(/(GCL.[\\d]*.)(.*)/);\n\t\t\treturn matches[2];\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t};\n\n\twpm.getUserAgent = () => navigator.userAgent;\n\n\twpm.getViewPort = () => ({\n\t\twidth : Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0),\n\t\theight: Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0),\n\t});\n\n\n\twpm.consoleLogVersion = () => {\n\t\tconsole.log(wpmDataLayer.version);\n\t};\n\n\t/**\n\t * https://api.jquery.com/jquery.getscript/\n\t *\n\t * Switched back to jQuery.ajax as the fetch method on some sites returned a type error\n\t * Possible reasons are:\n\t *    * CORS mismatch\n\t *    * The user is using an ad blocker\n\t *\n\t * This code is .thenable\n\t */\n\n\twpm.loadScriptAndCacheIt = (url, fallbackUrl) => {\n\n\t\tlet options = {\n\t\t\tdataType: \"script\",\n\t\t\tcache   : true,\n\t\t\turl     : url,\n\t\t};\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tjQuery.ajax(options)\n\t\t\t\t.done(() => {\n\t\t\t\t\tpmw.console.log(\"Successfully loaded primary script: \" + url);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t\t.fail(() => {\n\t\t\t\t\tif (fallbackUrl) {\n\n\t\t\t\t\t\tpmw.console.log(\"Loading fallback script: \" + fallbackUrl);\n\n\t\t\t\t\t\tlet fallbackOptions = {\n\t\t\t\t\t\t\tdataType: \"script\",\n\t\t\t\t\t\t\tcache   : true,\n\t\t\t\t\t\t\turl     : fallbackUrl,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tjQuery.ajax(fallbackOptions)\n\t\t\t\t\t\t\t.done(() => {\n\t\t\t\t\t\t\t\tpmw.console.log(\"Successfully loaded fallback script: \" + fallbackUrl);\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.fail(() => reject(new Error(\"Both primary and fallback scripts failed to load.\")));\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error(\"Primary script failed to load, and no fallback URL provided.\"));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t});\n\t};\n\n\twpm.getOrderItemPrice = orderItem => (orderItem.total + orderItem.total_tax) / orderItem.quantity;\n\n\twpm.hasLoginEventFired = () => {\n\t\tlet data = wpm.getSessionData();\n\t\treturn data?.loginEventFired;\n\t};\n\n\twpm.setLoginEventFired = () => {\n\t\tlet data                = wpm.getSessionData();\n\t\tdata[\"loginEventFired\"] = true;\n\t\twpm.setSessionData(data);\n\t};\n\n\twpm.pageLoaded = async () => new Promise(resolve => {\n\t\t(function waitForVar() {\n\t\t\tif (\"complete\" === document.readyState) return resolve();\n\t\t\tsetTimeout(waitForVar, 50);\n\t\t})();\n\t});\n\n\twpm.pageReady = () => {\n\t\treturn new Promise(resolve => {\n\t\t\t(function waitForVar() {\n\t\t\t\tif (\"interactive\" === document.readyState || \"complete\" === document.readyState) return resolve();\n\t\t\t\tsetTimeout(waitForVar, 50);\n\t\t\t})();\n\t\t});\n\t};\n\n\twpm.isMiniCartActive = () => {\n\t\tif (window.sessionStorage) {\n\t\t\tObject.keys(window.sessionStorage).forEach(key => {\n\t\t\t\tif (key.includes(\"wc_fragments\")) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn false;\n\t};\n\n\twpm.doesWooCommerceCartExist = () => document.cookie.includes(\"woocommerce_items_in_cart\");\n\n\twpm.urlHasParameter = parameter => {\n\t\tlet urlParams = new URLSearchParams(window.location.search);\n\t\treturn urlParams.has(parameter);\n\t};\n\n\twpm.getUrlParameter = parameter => {\n\t\tlet urlParams = new URLSearchParams(window.location.search);\n\t\treturn urlParams.get(parameter);\n\t};\n\n\t// https://stackoverflow.com/a/60606893/4688612\n\twpm.hashAsync = (algo, str) => {\n\t\treturn crypto.subtle.digest(algo, new TextEncoder(\"utf-8\").encode(str)).then(buf => {\n\t\t\treturn Array.prototype.map.call(new Uint8Array(buf), x => ((\"00\" + x.toString(16)).slice(-2))).join(\"\");\n\t\t});\n\t};\n\n\twpm.getCartValue = () => {\n\n\t\tlet value = 0;\n\n\t\tif (wpmDataLayer?.cart) {\n\n\t\t\tfor (const key in wpmDataLayer.cart) {\n\t\t\t\t// content_ids.push(wpmDataLayer.products[key].dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type])\n\n\t\t\t\tlet product = wpmDataLayer.cart[key];\n\n\t\t\t\tvalue += product.quantity * product.price;\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t};\n\n\t/**\n\t * Detect if the current URL contains at least one pattern\n\t *\n\t * @param patterns\n\t * @returns {boolean}\n\t */\n\twpm.doesUrlContainPatterns = patterns => {\n\n\t\tfor (const pattern of patterns) {\n\t\t\tif (new RegExp(pattern).test(window.location.href)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t/**\n\t * Detect if the current URL contains at least one pattern that is on the tracking exclusion list\n\t *\n\t * https://www.linkedin.com/pulse/how-remove-google-robot-problem-via-gtm-facebook-pixel-hjelpdahl/\n\t * https://www.youtube.com/watch?v=b4I1ePZt8Z0\n\t *\n\t * @returns {boolean}\n\t */\n\twpm.excludeDomainFromTracking = () => {\n\n\t\tlet exclude_domains = [\n\t\t\t\"appspot.com\",\n\t\t\t\"translate.google.com\",\n\t\t];\n\n\t\tif (wpmDataLayer?.general?.exclude_domains) {\n\t\t\texclude_domains = [...exclude_domains, ...wpmDataLayer.general.exclude_domains];\n\t\t}\n\n\t\t// Abort if URL contains excluded domains\n\t\tif (exclude_domains.some(domain => window.location.href.includes(domain))) {\n\t\t\tconsole.debug(\"Pixel Manager: Aborted due to excluded domain\");\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t/**\n\t * Get a random event ID\n\t *\n\t * @param length\n\t * @return {string}\n\t */\n\twpm.getRandomEventId = (length = 16) => {\n\t\tlet id = \"\";\n\t\twhile (id.length < length) {\n\t\t\tid += (Math.random() + 1).toString(36).substring(2);\n\t\t}\n\t\treturn id.substring(0, length);\n\t};\n\n\twpm.pmwConsoleMessage = () => {\n\t\tlet message = \"Pixel Manager for WooCommerce: \";\n\t\tmessage += wpmDataLayer.version.pro ? \"pro\" : \"free\";\n\t\tmessage += \" | distro: \" + wpmDataLayer.version.distro;\n\t\tif (wpmDataLayer.version.distro === \"fms\" && wpmDataLayer.version.pro) {\n\t\t\tmessage += \" | active license: \" + (wpmDataLayer.version.eligible_for_updates ? \"yes\" : \"no\");\n\t\t}\n\t\tmessage += \" | version: \" + wpmDataLayer.version.number;\n\n\t\tif (wpmDataLayer.version.show === true) {\n\t\t\tconsole.log(message);\n\t\t} else {\n\t\t\tpmw.console.log(message);\n\t\t}\n\t};\n\n\twpm.canLoadPremiumFeatures = () => {\n\t\treturn (wpmDataLayer.version.distro === \"fms\" && wpmDataLayer.version.pro && wpmDataLayer.version.eligible_for_updates) || wpmDataLayer.version.distro === \"wcm\";\n\t};\n\n\t/**\n\t * State if the pmw:dom:ready event has been fired\n\t *\n\t * @type {boolean}\n\t */\n\tlet pmwDomReadyFired = false;\n\n\n\t/**\n\t * Trigger the pmw:dom:ready event\n\t *\n\t * @returns {void}\n\t */\n\twpm.triggerPmwDomReadyEvent = () => {\n\n\t\t// If the event has already been fired, return\n\t\tif (pmwDomReadyFired) return;\n\n\t\t// If the document is already loaded, fire the event\n\t\tif (document.readyState === \"complete\") {\n\t\t\tfirePmwDomReadyEvent();\n\t\t\treturn;\n\t\t}\n\n\t\t// Continue processing if the DOM has not yet been loaded\n\t\t// and attach the event listener to the DOMContentLoaded,\n\t\t// once through jQuery and once through the native DOM API\n\t\t// to maximize compatibility\n\n\t\t// If jQuery is available, use it to fire add the event listener\n\t\tjQuery(() => {\n\t\t\tfirePmwDomReadyEvent();\n\t\t});\n\n\t\t// Also add the event listener using the native DOM API\n\t\tdocument.addEventListener(\"DOMContentLoaded\", () => {\n\t\t\tfirePmwDomReadyEvent();\n\t\t}, true);\n\t};\n\n\t/**\n\t * Fire the pmw:dom:ready event\n\t *\n\t * @returns {void}\n\t */\n\tconst firePmwDomReadyEvent = () => {\n\n\t\t// If the event has already been fired, return\n\t\tif (pmwDomReadyFired) return;\n\n\t\t// Fire the event\n\t\tdocument.dispatchEvent(new Event(\"pmw:dom:ready\"));\n\n\t\t// Set the flag to true to indicate that the event has been fired\n\t\tpmwDomReadyFired = true;\n\t};\n\n\twpm.getEmailFromTarget = target => {\n\n\t\t// Only try to add the clicked email if href is set\n\t\tif (target.href) {\n\n\t\t\t// Get the email from the link\n\t\t\t// But only if there is a valid email address in the link\n\t\t\t// Also, the href may contain other parameters, so we need to check for that and remove them\n\t\t\tlet email = target.href.replace(\"mailto:\", \"\");\n\n\n\t\t\tif (email.indexOf(\"?\") > -1) {\n\t\t\t\temail = email.split(\"?\")[0];\n\t\t\t}\n\n\t\t\t// Trim the email and remove all whitespaces\n\t\t\temail = email.replace(/\\s/g, \"\");\n\n\t\t\t// If the email is not empty and valid, add it to the data object\n\t\t\tif (email && wpm.isEmail(email)) {\n\t\t\t\treturn email;\n\t\t\t}\n\t\t}\n\n\t\treturn \"\";\n\t};\n\n\twpm.sendEventPayloadToServer = payload => {\n\t\tif (typeof wpm.sendEventPayloadToServerPremium === \"function\") {\n\t\t\twpm.sendEventPayloadToServerPremium(payload);\n\t\t}\n\t};\n\n\t/**\n\t * Waits for all active pixels to load and then triggers the page view event.\n\t *\n\t * @return {Promise<unknown>}\n\t *\n\t * @since 1.49.0\n\t */\n\twpm.waitForPixelsAndTriggerPageView = async () => {\n\n\t\treturn new Promise(resolve => {\n\n\t\t\t// Check if at least one pixel is active in the data layer\n\t\t\tif (!wpmDataLayer?.pixels) {\n\t\t\t\tpmw.console.error(\"wpmDataLayer or wpmDataLayer.pixels is not defined, triggering page view event immediately.\");\n\t\t\t\tdocument.dispatchEvent(new Event(\"pmw:page-view\"));\n\t\t\t\tresolve();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet activePixels = wpmDataLayer?.general?.server_2_server?.pageview_event_s2s?.pixels || [];\n\n\t\t\t// This line filters the activePixels array, keeping only those pixel names that exist as keys\n\t\t\t// in the wpmDataLayer.pixels object (i.e., only pixels that are currently defined/active in the data layer)\n\t\t\tactivePixels = activePixels.filter(pixelName => wpmDataLayer.pixels[pixelName]);\n\n\t\t\t// If no pixels to check, trigger event immediately\n\t\t\tif (activePixels.length === 0) {\n\t\t\t\tpmw.console.log(\"No specific pixels to wait for, triggering page view event.\");\n\t\t\t\tdocument.dispatchEvent(new Event(\"pmw:page-view\"));\n\t\t\t\tresolve();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check if all active pixels are loaded\n\t\t\tconst checkPixelsLoaded = () => {\n\t\t\t\tconst allLoaded = activePixels.every(pixelName =>\n\t\t\t\t\t!wpmDataLayer.pixels[pixelName] || wpmDataLayer.pixels[pixelName].loaded);\n\n\t\t\t\tif (allLoaded) {\n\t\t\t\t\t// pmw.console.log(\"All specified pixels to track s2s page-view events have been loaded. Triggering page-view event.\");\n\t\t\t\t\tdocument.dispatchEvent(new Event(\"pmw:page-view\"));\n\t\t\t\t\tresolve();\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(checkPixelsLoaded, 100);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tcheckPixelsLoaded();\n\t\t});\n\t};\n\n\twpm.isWooCommerceActive = () => {\n\t\treturn !!wpmDataLayer.shop;\n\t};\n\n\t/**\n\t * Retrieves the product ID associated with a specific pixel.\n\t *\n\t * @param {string} pixelId - The ID of the pixel to get the product ID for.\n\t * @returns {string|null} - The product ID associated with the given pixel ID,\n\t *                          or null if no product ID is found.\n\t */\n\twpm.getProductIdForSpecificPixel = (product, pixelName) => {\n\t\treturn String(product.dyn_r_ids[wpmDataLayer.pixels[pixelName].dynamic_remarketing.id_type]);\n\t};\n\n\twpm.isInWooCommerceSesssion = () => {\n\n\t\tif (wpmDataLayer?.shop?.session_active) return true;\n\n\t\tlet regex           = new RegExp(\"woocommerce_cart_hash\");\n\t\tlet wcSessionCookie = wpm.getCookieThatContainsRegex(regex);\n\n\t\tif (wcSessionCookie) return true;\n\n\t\treturn false;\n\t};\n\n\twpm.isNotInWooCommerceSesssion = () => {\n\t\treturn !wpm.isInWooCommerceSesssion();\n\t};\n\n\twpm.makeFullUrl = url => {\n\n\t\t// Trim any leading or trailing whitespace\n\t\turl = url.trim();\n\n\t\t// Check if the URL already contains a protocol\n\t\tif (/^(http:\\/\\/|https:\\/\\/)/.test(url)) {\n\t\t\treturn url;\n\t\t}\n\n\t\t// Remove leading slashes\n\t\turl = url.replace(/^\\/+/, \"\");\n\n\t\t// Add 'https://' as default protocol\n\t\treturn \"https://\" + url;\n\t};\n\n\twpm.registerShowVariationEventListener = () => {\n\t\tlet previousVariationId = null;\n\n\t\tjQuery(\".single_variation_wrap\").on(\"show_variation\", (event, variation) => {\n\n\t\t\t// Abort if lazy loading is enabled\n\t\t\t// if (wpmDataLayer?.general?.lazy_load_pmw) return;\n\n\t\t\ttry {\n\n\t\t\t\tlet productId = wpm.getIdBasedOndVariationsOutputSetting(variation.variation_id);\n\n\t\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\");\n\n\t\t\t\t// If the variation id is not the same as the previous one, run the function\n\t\t\t\tif (previousVariationId !== variation.variation_id) {\n\t\t\t\t\twpm.triggerViewItemEventPrep(productId);\n\t\t\t\t\tpreviousVariationId = variation.variation_id;\n\t\t\t\t}\n\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * Initializes the command queue for the application to ensure that commands\n\t * are queued and executed in a controlled manner. This function sets up\n\t * the underlying mechanism to manage and process commands effectively.\n\t *\n\t * Typically, the command queue is used by external developers\n\t * who want to make sure that their Pixel Manager API calls safely get executed,\n\t * no matter if the initialization order of the Pixel Manager is shuffled,\n\t * delayed, or lazy loaded.\n\t *\n\t * @since 1.49.0\n\t */\n\twpm.initializeCommandQueue = () => {\n\n\t\tconst queue = window._pmwq = window._pmwq || [];\n\n\t\tqueue.forEach(function (fn) {\n\t\t\tif (typeof fn === \"function\") fn();\n\t\t});\n\n\t\tqueue.push = function (fn) {\n\t\t\tif (typeof fn === \"function\") fn();\n\t\t};\n\t};\n\n}(window.wpm = window.wpm || {}, jQuery));\n","/**\n * Load Google Ads functions\n * */\n\n(function (wpm, $, undefined) {\n\n\n\twpm.getGoogleAdsConversionIdentifiersWithLabel = () => {\n\n\t\tlet conversionIdentifiers = []\n\n\t\tif (wpmDataLayer?.pixels?.google?.ads?.conversion_ids) {\n\t\t\tObject.entries(wpmDataLayer.pixels.google.ads.conversion_ids).forEach(([key, item]) => {\n\t\t\t\tif (item) {\n\t\t\t\t\tconversionIdentifiers.push(key + \"/\" + item)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\treturn conversionIdentifiers\n\t}\n\n\twpm.getGoogleAdsConversionIdentifiers =  () => {\n\n\t\tlet conversionIdentifiers = []\n\n\t\tObject.keys(wpmDataLayer.pixels.google.ads.conversion_ids).forEach((key) => {\n\t\t\tconversionIdentifiers.push(key)\n\t\t})\n\n\t\treturn conversionIdentifiers\n\t}\n\n\twpm.getGoogleAdsRegularOrderItems = () => {\n\n\t\tlet orderItems = []\n\n\t\tObject.values(wpmDataLayer.order.items).forEach((item) => {\n\n\t\t\tlet orderItem\n\n\t\t\torderItem = {\n\t\t\t\tquantity                : item.quantity,\n\t\t\t\tprice                   : item.price,\n\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t}\n\n\t\t\tif (wpmDataLayer?.shop?.variations_output && 0 !== item.variation_id) {\n\n\t\t\t\torderItem.id = String(wpmDataLayer.products[item.variation_id].dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type])\n\t\t\t\torderItems.push(orderItem)\n\t\t\t} else {\n\n\t\t\t\torderItem.id = String(wpmDataLayer.products[item.id].dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type])\n\t\t\t\torderItems.push(orderItem)\n\t\t\t}\n\t\t})\n\n\t\treturn orderItems\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n","/**\n * Load GA4 event listeners\n * */\n\n// view_item_list event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#view_item_list\njQuery(document).on(\"pmw:view-item-list\", (event, product) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!wpm.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst data = {\n\t\t\tsend_to       : wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\titems         : [wpm.ga4GetFullProductItemData(product)],\n\t\t\titem_list_name: wpmDataLayer.shop.list_name, // doesn't make sense on mini_cart\n\t\t\titem_list_id  : wpmDataLayer.shop.list_id, // doesn't make sense on mini_cart\n\t\t};\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_item_list\", data);\n\t\t\tpmw.console.log(\"Google Analytics: view_item_list event sent\", data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// select_item event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#select_item\njQuery(document).on(\"pmw:select-item\", (event, product) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!wpm.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst data = {\n\t\t\tsend_to: wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\titems  : [wpm.ga4GetFullProductItemData(product)],\n\t\t};\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"select_item\", data);\n\t\t\tpmw.console.log(\"Google Analytics: select_item event sent\", data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// add_to_cart event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#add_to_cart\njQuery(document).on(\"pmw:add-to-cart\", (event, product) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!wpm.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst data = {\n\t\t\tsend_to : wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\tcurrency: wpmDataLayer.shop.currency,\n\t\t\tvalue   : product.price * product.quantity,\n\t\t\titems   : [wpm.ga4GetFullProductItemData(product)],\n\t\t};\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"add_to_cart\", data);\n\t\t\tpmw.console.log(\"Google Analytics: add_to_cart event sent\", data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// view_item event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#view_item\njQuery(document).on(\"pmw:view-item\", (event, product = null) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!wpm.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tlet data = {\n\t\t\tsend_to: wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t};\n\n\t\tif (product) {\n\t\t\tdata.currency = wpmDataLayer.shop.currency;\n\t\t\t// data.value = 0\n\t\t\tdata.items    = [wpm.ga4GetFullProductItemData(product)];\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_item\", data);\n\t\t\tpmw.console.log(\"Google Analytics: view_item event sent\", data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// add_to_wishlist event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#add_to_wishlist\njQuery(document).on(\"pmw:add-to-wishlist\", (event, product) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!wpm.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst data = {\n\t\t\tsend_to : wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\tcurrency: wpmDataLayer.shop.currency,\n\t\t\tvalue   : product.price * product.quantity,\n\t\t\titems   : [wpm.ga4GetFullProductItemData(product)],\n\t\t};\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"add_to_wishlist\", data);\n\t\t\tpmw.console.log(\"Google Analytics: add_to_wishlist event sent\", data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// remove_from_cart event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#remove_from_cart\njQuery(document).on(\"pmw:remove-from-cart\", (event, product) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!wpm.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst data = {\n\t\t\tsend_to : wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\tcurrency: wpmDataLayer.shop.currency,\n\t\t\tvalue   : product.price * product.quantity,\n\t\t\titems   : [wpm.ga4GetFullProductItemData(product)],\n\t\t};\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"remove_from_cart\", data);\n\t\t\tpmw.console.log(\"Google Analytics: remove_from_cart event sent\", data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// begin_checkout event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#begin_checkout\njQuery(document).on(\"pmw:begin-checkout\", () => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!wpm.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tlet data = {\n\t\t\tsend_to: wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t// coupon: \"\",\n\t\t\tcurrency: wpmDataLayer.shop.currency,\n\t\t\tvalue   : wpm.getCartValue(),\n\t\t\titems   : wpm.getCartItemsGa4(),\n\t\t};\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"begin_checkout\", data);\n\t\t\tpmw.console.log(\"Google Analytics: begin_checkout event sent\", data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// add_shipping_info event\njQuery(document).on(\"pmw:add-shipping-info\", (event, payload) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!wpm.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst eventName = \"add_shipping_info\";\n\n\t\tlet data = {\n\t\t\tsend_to: wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t// coupon: \"\",\n\t\t\tcurrency: wpmDataLayer.shop.currency,\n\t\t\tvalue   : wpm.getCartValue(),\n\t\t\titems   : wpm.getCartItemsGa4(),\n\t\t};\n\n\t\tif (payload?.shippingTier?.text) {\n\t\t\tdata.shipping_tier = payload.shippingTier.text;\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", eventName, data);\n\t\t\tpmw.console.log(`Google Analytics: ${eventName} event sent`, data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// add_payment_info event\njQuery(document).on(\"pmw:add-payment-info\", (event, payload) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!wpm.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst eventName = \"add_payment_info\";\n\n\t\tlet data = {\n\t\t\tsend_to: wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t// coupon: \"\",\n\t\t\tcurrency: wpmDataLayer.shop.currency,\n\t\t\tvalue   : wpm.getCartValue(),\n\t\t\titems   : wpm.getCartItemsGa4(),\n\t\t};\n\n\t\tif (payload?.paymentType?.text) {\n\t\t\tdata.payment_type = payload.paymentType.text;\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", eventName, data);\n\t\t\tpmw.console.log(`Google Analytics: ${eventName} event sent`, data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// view_cart event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#view_cart\njQuery(document).on(\"pmw:view-cart\", () => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!wpm.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tif (jQuery.isEmptyObject(wpmDataLayer.cart)) return;\n\n\t\tlet products  = [];\n\t\tlet cartValue = null;\n\n\t\tObject.values(wpmDataLayer.cart).forEach(product => {\n\t\t\tproducts.push(wpm.ga4GetFullProductItemData(product));\n\t\t\tcartValue = cartValue + product.quantity * product.price;\n\t\t});\n\n\t\tconst data = {\n\t\t\tsend_to : wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\tcurrency: wpmDataLayer.shop.currency,\n\t\t\tvalue   : cartValue.toFixed(2),\n\t\t\titems   : products,\n\t\t};\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_cart\", data);\n\t\t\tpmw.console.log(\"Google Analytics: view_cart event sent\", data);\n\t\t});\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// view search event\njQuery(document).on(\"pmw:search\", () => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\t\tif (!wpm.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tlet products = [];\n\n\t\tObject.values(wpmDataLayer.products).forEach(product => {\n\t\t\tproducts.push(wpm.ga4GetFullProductItemData(product));\n\t\t});\n\n\t\tconst data = {\n\t\t\tsend_to    : wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\tsearch_term: wpm.getSearchTermFromUrl(),\n\t\t\titems      : products,\n\t\t};\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_search_results\", data);\n\t\t\tpmw.console.log(\"Google Analytics: view_search_results event sent\", data);\n\t\t});\n\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n\n// view order received page event\njQuery(document).on(\"pmw:view-order-received-page\", function () {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return;\n\n\t\t// ga4_server_and_browser_tracking experiment\n\t\t// https://app.asana.com/0/1110999795232049/1204453591507565\n\t\t// ga4e: if (wpmDataLayer?.pixels?.google?.analytics?.ga4?.mp_active) {\n\t\t// \tif (wpmDataLayer?.experiments?.ga4_server_and_browser_tracking) {\n\t\t// \t\tbreak ga4e\n\t\t// \t}\n\t\t// \treturn\n\t\t// }\n\n\t\t// Deactivated for the ga4_server_and_browser_tracking experiment\n\t\tif (wpmDataLayer?.pixels?.google?.analytics?.ga4?.mp_active) return;\n\t\tif (!wpm.googleConfigConditionsMet({type: \"statistics\"})) return;\n\n\t\tconst data = {\n\t\t\tsend_to       : [wpmDataLayer.pixels.google.analytics.ga4.measurement_id],\n\t\t\ttransaction_id: wpmDataLayer.order.number,\n\t\t\taffiliation   : wpmDataLayer.order.affiliation,\n\t\t\tcurrency      : wpmDataLayer.order.currency,\n\t\t\tvalue         : wpmDataLayer.order.value.total,\n\t\t\tdiscount      : wpmDataLayer.order.discount,\n\t\t\ttax           : wpmDataLayer.order.tax,\n\t\t\tshipping      : wpmDataLayer.order.shipping,\n\t\t\tcoupon        : wpmDataLayer.order.coupon,\n\t\t\titems         : wpm.getGA4OrderItems(),\n\t\t};\n\n\t\t// Check if the order has custom parameters\n\t\tif (wpmDataLayer?.order?.custom_parameters) {\n\t\t\t// Iterate through each key-value pair in custom parameters\n\t\t\tObject.keys(wpmDataLayer.order.custom_parameters).forEach(key => {\n\t\t\t\t// Add each custom parameter to the data object\n\t\t\t\tdata[key] = wpmDataLayer.order.custom_parameters[key];\n\t\t\t});\n\t\t}\n\n\t\twpm.gtagLoaded().then(function () {\n\t\t\tgtag(\"event\", \"purchase\", data);\n\t\t\tpmw.console.log(\"Google Analytics: purchase event sent\", data);\n\t\t});\n\n\t\t// wpm.gtagLoaded().then(function () {\n\t\t// \tgtag(\"get\", wpmDataLayer.pixels.google.analytics.ga4.measurement_id, \"client_id\", (client_id) => {\n\t\t// \t\tconsole.log(\"transaction_id: \" + wpmDataLayer.order.number + \" client_id: \" + client_id)\n\t\t// \t})\n\t\t// })\n\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n});\n","/**\n * Pixel Manager Cookie Consent API\n **/\n\n/**\n * Accept consent for all cookies\n *\n * @param duration {number|null}\n * @returns {void}\n * @public\n */\nexport const acceptAll = ({duration = null} = {}) => {\n\n\tconst data = {\n\t\tstatistics : true,\n\t\tmarketing  : true,\n\t\tpreferences: true,\n\t\tnecessary  : true,\n\t\tduration   : duration,\n\t};\n\n\tsaveState(data);\n\tloadApprovedPixels();\n\tdocument.dispatchEvent(new CustomEvent(\"pmw:consent:update\", {detail: data}));\n};\n\n/**\n * Revoke consent for all cookies\n *\n * @param duration {number|null}\n * @returns {void}\n * @public\n */\nexport const revokeAll = ({duration = null} = {}) => {\n\n\tconst data = {\n\t\tstatistics : false,\n\t\tmarketing  : false,\n\t\tpreferences: false,\n\t\tnecessary  : true,\n\t\tduration   : duration,\n\t};\n\n\tsaveState(data);\n\tdocument.dispatchEvent(new CustomEvent(\"pmw:consent:update\", {detail: data}));\n};\n\n/**\n * Accept consent selectively\n *\n * @param statistics\n * @param marketing\n * @param preferences\n * @param necessary\n * @param duration\n * @returns {void}\n * @public\n */\nexport const updateSelectively = ({\n\t\t\t\t\t\t\t\t\t  statistics = wpm.consent.categories.get().statistics,\n\t\t\t\t\t\t\t\t\t  marketing = wpm.consent.categories.get().marketing,\n\t\t\t\t\t\t\t\t\t  preferences = wpm.consent.categories.get().preferences,\n\t\t\t\t\t\t\t\t\t  necessary = wpm.consent.categories.get().necessary,\n\t\t\t\t\t\t\t\t\t  duration = null,\n\t\t\t\t\t\t\t\t  }) => {\n\n\tif (statistics === undefined || marketing === undefined || preferences === undefined || necessary === undefined) {\n\t\tconsole.log(\"pmw.consent.api.updateSelectively: It is recommended to pass all consent types. - statistics, marketing, preferences\");\n\t}\n\n\tlet data = {\n\t\tstatistics,\n\t\tmarketing,\n\t\tpreferences,\n\t\tnecessary,\n\t\tduration,\n\t};\n\n\tsaveState(data);\n\tloadApprovedPixels();\n\tdocument.dispatchEvent(new CustomEvent(\"pmw:consent:update\", {detail: data}));\n};\n\n/**\n * Set a cookie called pmw_cookie_consent with the value of pmw_cookie_consent\n * and set the default expiration date to 1 year from now.\n *\n * @param statistics {boolean}\n * @param marketing {boolean}\n * @param preferences {boolean}\n * @param necessary {boolean}\n * @param duration {number|null}\n *\n * @returns {void}\n * @private\n *\n * TODO: Use the data store\n * TODO: Cleanup\n */\nconst setConsentCookie = ({statistics, marketing, preferences, necessary, duration = null}) => {\n\n\tconst key  = \"pmw_cookie_consent\";\n\tconst data = {statistics, marketing, preferences, necessary};\n\n\t// If no duration is set, use the wpm storage,\n\t// otherwise use wpm.setCookie()\n\tif (duration === null) {\n\t\twpm.storeData(key, data, true);\n\t\treturn;\n\t}\n\n\twpm.setCookie(\"pmw_cookie_consent\", JSON.stringify(data), duration);\n};\n\nconst loadApprovedPixels = () => {\n\tdocument.dispatchEvent(new Event(\"pmw:load-pixels\"));\n};\n\n/**\n * Save the consent in the settings and set the cookie\n *\n * @param data\n * @returns {void}\n * @private\n */\nconst saveState = (data) => {\n\twpm.consent.categories.set(data);\n\tsetConsentCookie(data);\n\tpmw.console.log(\"Updated consent state\", data);\n};\n\n/**\n * Process the consent update from the external source\n *\n * @param attributes\n * @returns {void}\n * @public\n */\nexport const processExternalGcmConsentUpdate_experimental = (attributes) => {\n\n\tif (attributes[0] !== \"consent\") return;\n\tif (attributes[1] !== \"update\") return;\n\tif (attributes[2]?.source === \"pmw\") return;\n\n\tpmw.console.log(\"processExternalGcmConsentUpdate\", attributes);\n\n\tlet previousData = wpm.consent.categories.get();\n\n\tlet data = {\n\t\tstatistics : attributes[2].analytics_storage !== undefined ? attributes[2].analytics_storage === \"granted\" : previousData.statistics,\n\t\tmarketing  : attributes[2].ad_storage !== undefined ? attributes[2].ad_storage === \"granted\" : previousData.marketing,\n\t\tpreferences: (attributes[2].functionality_storage !== undefined ? attributes[2].functionality_storage === \"granted\" : previousData.preferences) ||\n\t\t\t(attributes[2].personalization_storage !== undefined ? attributes[2].personalization_storage === \"granted\" : previousData.preferences),\n\t\tnecessary  : attributes[2].security_storage !== undefined ? attributes[2].security_storage === \"granted\" : previousData.necessary,\n\t};\n\n\tsaveState(data);\n\tloadApprovedPixels();\n};\n\nexport const getConsentStateFor = (category) => {\n\treturn wpm.consent.categories.get()[category];\n};\n\n","/**\n * Google Analytics loader\n */\n\nrequire(\"./ga4/loader\")\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Run PMW main loader\n */\nimport {loadDeprecatedFunctions} from \"./wpm/deprecated.mjs\";\n\nconst main = async () => {\n\n\trequire(\"./wpm/functions_main\");\n\trequire(\"./version.js\");\n\n\t// Wait until jQuery is loaded\n\tawait wpm.jQueryExists();\n\n\t// Wait until wpmDataLayer is loaded\n\tawait wpm.wpmDataLayerFullyLoaded();\n\n\t// wait 1000ms\n\t// await new Promise(resolve => setTimeout(resolve, 1000))\n\n\t// Load all essential scripts first\n\trequire(\"./wpm/functions_loader\");\n\n\t// Output PMW console message\n\twpm.pmwConsoleMessage();\n\n\t// Load the consent management module\n\tawait wpm.consent.load();\n\n\t// Doesn't work if we listen to pmw:dom:ready because it runs too late\n\t// (at the end of the main.js file)\n\t// TODO: Find out why that order is important and optimize it. It is also difficult to test. In Cypress it works just with \"pmw:dom:ready\"\n\tjQuery(() => {\n\t\trequire(\"./wpm/event_listeners_on_ready\");\n\t});\n\n\t// Load remaining event listeners\n\trequire(\"./wpm/event_listeners\");\n\trequire(\"./wpm/listeners/doofinder\");\n\n\twpm.loadWcHooksFunctions();\n\n\t// Check if domain is excluded from tracking\n\t// If so, return\n\tif (wpm.excludeDomainFromTracking()) return;\n\n\t// Load free pixels\n\trequire(\"./pixels/google/loader\");\n\trequire(\"./pixels/facebook/loader\");\n\trequire(\"./pixels/hotjar/loader\");\n\n\t// #if process.env.TIER === 'premium'\n// \t/**\n// \t *  Load all premium scripts\n// \t */\n// \tif (wpm.canLoadPremiumFeatures()) {\n// \t\trequire(\"./wpm/event_listeners_premium\");\n// \t\trequire(\"./pixels/adroll/loader\");\n// \t\trequire(\"./pixels/linkedin/loader\");\n// \t\trequire(\"./pixels/microsoft-ads/loader\");\n// \t\trequire(\"./pixels/outbrain/loader\");\n// \t\trequire(\"./pixels/pinterest/loader\");\n// \t\trequire(\"./pixels/snapchat/loader\");\n// \t\trequire(\"./pixels/taboola/loader\");\n// \t\trequire(\"./pixels/tiktok/loader\");\n// \t\trequire(\"./pixels/twitter/loader\");\n// \t\trequire(\"./pixels/reddit/loader\");\n// \t\trequire(\"./pixels/vwo/loader\");\n// \t}\n\t// #endif\n\n\t/** Load the deprecated functions */\n\tloadDeprecatedFunctions();\n\n\t// Preload pixels\n\tdocument.dispatchEvent(new Event(\"pmw:load-pixels\"));\n\n\t// Trigger wpmLoad event\n\tdocument.dispatchEvent(new Event(\"wpmLoad\"));\n\n\t// Wait until page is loaded\n\tawait wpm.pageLoaded();\n\n\tdocument.dispatchEvent(new Event(\"pmw:ready\"));\n\twpm.triggerPmwDomReadyEvent();\n\n\twpm.initializeCommandQueue();\n\n\t// Check if the library version matches the PMW version that's installed on the server\n\twpm.checkLibraryVersion();\n};\n\nmain();\n\n\n\n\n\n\n\n\n","export const loadDeprecatedFunctions = () => {\n\n\tpmw.consentAcceptAll = (data) => {\n\t\tconsole.error(\"The function pmw.consentAcceptAll is deprecated since version 1.41.1 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw.consent.api.acceptAll()\")\n\t\tpmw.consent.api.acceptAll(data)\n\t}\n\n\tpmw.consentRevokeAll = (data) => {\n\t\tconsole.error(\"The function pmw.consentRevokeAll is deprecated since version 1.41.1 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw.consent.api.revokeAll()\")\n\t\tpmw.consent.api.revokeAll(data)\n\t}\n\n\tpmw.consentAdjustSelectively = (data) => {\n\t\tconsole.error(\"The function pmw.consentAdjustSelectively is deprecated since version 1.41.1 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw.consent.api.adjustSelectively()\")\n\n\t\tdata = renameDataKeys(data)\n\t\tpmw.consent.api.updateSelectively(data)\n\t}\n\n\t/**\n\t * Rename data keys\n\t *\n\t * The variable data can have a key analytics and a key ads\n\t * they need to be rewritten to statistics and marketing\n\t *\n\t * @param data\n\t * @returns {*}\n\t */\n\tconst renameDataKeys = (data) => {\n\t\tif (data.analytics) {\n\t\t\tdata.statistics = data.analytics\n\t\t\tdelete data.analytics\n\t\t}\n\n\t\tif (data.ads) {\n\t\t\tdata.marketing = data.ads\n\t\t\tdelete data.ads\n\t\t}\n\n\t\treturn data\n\t}\n\n\t// wpmBeginCheckout\n\tjQuery(document).on(\"wpmBeginCheckout\", () => {\n\t\tconsole.error(\"The event wpmBeginCheckout is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:begin-checkout\")\n\t\tjQuery(document).trigger(\"pmw:begin-checkout\")\n\t})\n\n\t// wpmAddToCart\n\tjQuery(document).on(\"wpmAddToCart\", (event, product) => {\n\t\tconsole.error(\"The event wpmAddToCart is deprecated since version 1.42.8 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:add-to-cart\")\n\t\tjQuery(document).trigger(\"pmw:add-to-cart\", product)\n\t})\n\n\t// wpmOrderReceivedPage\n\tjQuery(document).on(\"wpmOrderReceivedPage\", () => {\n\t\tconsole.error(\"The event wpmOrderReceivedPage is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:view-order-received-page\")\n\t\tjQuery(document).trigger(\"pmw:view-order-received-page\")\n\t})\n\n\t// wpmLogin\n\tjQuery(document).on(\"wpmLogin\", () => {\n\t\tconsole.error(\"The event wpmLogin is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:login\")\n\t\tjQuery(document).trigger(\"pmw:login\")\n\t})\n\n\t// wpmAddToWishlist\n\tjQuery(document).on(\"wpmAddToWishlist\", (event, product) => {\n\t\tconsole.error(\"The event wpmAddToWishlist is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:add-to-wishlist\")\n\t\tjQuery(document).trigger(\"pmw:add-to-wishlist\", product)\n\t})\n\n\t// pmwEvent:Search\n\tjQuery(document).on(\"pmwEvent:Search\", () => {\n\t\tconsole.error(\"The event pmwEvent:Search is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:search\")\n\t\tjQuery(document).trigger(\"pmw:search\")\n\t})\n\n\t// wpmViewItem\n\tjQuery(document).on(\"wpmViewItem\", (event, product) => {\n\t\tconsole.error(\"The event wpmViewItem is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:view-item\")\n\t\tjQuery(document).trigger(\"pmw:view-item\", product)\n\t})\n\n\t// wpmViewItemList\n\tjQuery(document).on(\"wpmViewItemList\", (event, product) => {\n\t\tconsole.error(\"The event wpmViewItemList is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:view-item-list\")\n\t\tjQuery(document).trigger(\"pmw:view-item-list\", product)\n\t})\n\n\t// wpmSelectItem\n\tjQuery(document).on(\"wpmSelectItem\", (event, product) => {\n\t\tconsole.error(\"The event wpmSelectItem is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:select-item\")\n\t\tjQuery(document).trigger(\"pmw:select-item\", product)\n\t})\n\n\t// wpmRemoveFromCart\n\tjQuery(document).on(\"wpmRemoveFromCart\", (event, product) => {\n\t\tconsole.error(\"The event wpmRemoveFromCart is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:remove-from-cart\")\n\t\tjQuery(document).trigger(\"pmw:remove-from-cart\", product)\n\t})\n\t\n\t// wpmViewCart\n\tjQuery(document).on(\"wpmViewCart\", () => {\n\t\tconsole.error(\"The event wpmViewCart is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:view-cart\")\n\t\tjQuery(document).trigger(\"pmw:view-cart\")\n\t})\n\n\t// wpmCategory\n\tjQuery(document).on(\"wpmCategory\", (event, category) => {\n\t\tconsole.error(\"The event wpmCategory is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:view-category\")\n\t\tjQuery(document).trigger(\"pmw:view-category\", category)\n\t})\n\n\t// wpmEverywhereElse\n\tjQuery(document).on(\"wpmEverywhereElse\", () => {\n\t\tconsole.error(\"The event wpmEverywhereElse is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:everywhere-else\")\n\t\tjQuery(document).trigger(\"pmw:everywhere-else\")\n\t})\n\n\t// wpmPlaceOrder\n\tjQuery(document).on(\"wpmPlaceOrder\", () => {\n\t\tconsole.error(\"The event wpmPlaceOrder is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:place-order\")\n\t\tjQuery(document).trigger(\"pmw:place-order\")\n\t})\n\n\t// wpmFireCheckoutOption\n\tjQuery(document).on(\"wpmFireCheckoutOption\", (event, option) => {\n\t\tconsole.error(\"The event wpmFireCheckoutOption is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:fire-checkout-option\")\n\t\tjQuery(document).trigger(\"pmw:fire-checkout-option\", option)\n\t})\n\n\t// wpmFireCheckoutProgress\n\tjQuery(document).on(\"wpmFireCheckoutProgress\", (event, progress) => {\n\t\tconsole.error(\"The event wpmFireCheckoutProgress is deprecated since version 1.42.9 of the Pixel Manager and will be removed in the future. It has been replaced by: pmw:fire-checkout-progress\")\n\t\tjQuery(document).trigger(\"pmw:fire-checkout-progress\", progress)\n\t})\n}\n"],"names":["jQuery","document","on","wpmDataLayer","pixels","facebook","pixel_id","loaded","wpm","doesUrlContainPatterns","exclusion_patterns","consent","canPixelBeFired","loadFacebookPixel","event","payload","canNotFireFbq","fbq","custom_data","eventID","event_id","error","console","pmw","log","eventName","setFbUserData","addEventListener","detail","consentUpdate","marketing","require","complianz","getConsent","cmplz_statistics","getCookie","cmplz_marketing","cmplz_preferences","cmplz_necessary","statistics","preferences","necessary","loadEventListeners","cmplzStatusChange","data","categories","includes","api","updateSelectively","cookiebot","isValidJson","decodeURI","replace","decodeURIComponent","JSON","parse","window","e","currentTarget","CookieConsent","str","cookiefirst","performance","advertising","functional","cookieyes","consentToJson","analytics","advertisement","getCookieValue","cookieNames","cookieName","value","key","isOneCookieSet","accepted","split","consentObj","forEach","item","onetrust","consentToJSON","consentObject","reduce","obj","groups","realCookieBanner","isRcbCookieSet","waitForLibrary","consentApi","undefined","rcbSettings","service","cookies","cookie","rcbConsent","consentSync","cookieOptIn","type","i","length","trim","startsWith","consents","action","indexOf","acceptAll","revokeAll","regex","RegExp","getCookieThatContainsRegex","purposes","_iub","cmpConsentClickObserver","ids","classes","thirdparty","advanced","strict","moove_frontend_gdpr_scripts","allowAllButton","querySelector","localStorage","getItem","analytics_storage","ad_storage","functionality_storage","security_storage","gcm","analyticsStorage","adStorage","ucData","button","querySelectorAll","buttonId","buttonElement","getElementById","settings","visitorHasChosen","get","result","set","load","async","loadCmpEventListeners","setExplicitConsentModeDefaults","loadConsentFromCmps","countryUnlock","loadTrigger","cmpConsent","getConsentFromCmps","cmp","cmps","explicitConsent","explicitConsentModeActive","general","consent_management","explicit_consent","getConsentValues","storageKey","retrieveData","consentBackwardsCompatibilityUpdate","hasOwnProperty","ads","restricted_regions","browserGeo","getBrowserGeo","browserIsInRestrictedRegion","countryCode","regionCode","category","pixelName","logSuppressedPixel","mode","dispatchEvent","Event","map","buttonClass","MutationObserver","mutationsList","observer","mutation","addedNodes","join","element","location","reload","disconnect","observe","body","childList","subtree","util","ipRange_1","dot","mappedIpv4","colon","doubleColon","getIpv6Segments","ip","isIPv6","Error","test","matches","match","isIPv4","prefix","parts","x","parseInt","toString","mappedIpv4ToIpv6","_a","beforeChunk","afterChunk","beforeParts","afterParts","missingSegments","Array","concat","createChecker","subnetOrSubnets","isArray","checks_1","subnet","createSegmentChecker","address","segments","some","check","subnetAddress","prefixLengthString","prefixLength","Number","isInteger","subnetSegments","addressSegments","bitCount","Math","min","exports","specialNetsCache","default","private","ipv6","localhost","Boolean","reserved","__spreadArrays","getLocationByTimeZone","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","geoLocation","toUpperCase","message","objects","isLoggerEnabled","urlLoggerOff","sessionLoggerEnabled","urlLoggerOn","logger","is_active","urlHasParameter","storeData","removeHtmlTagsAndWhitespace","string","target","id","triggerAddShippingInfoEvent","slug","text","checkedShippingMethod","find","val","attr","shippingTier","trigger","paymentMethodChangeLogged","triggerAddPaymentInfoEvent","checkedPaymentMethod","paymentType","url","URL","productId","getProductIdByCartItemKeyUrl","removeProductFromCart","checkoutButtonSelectors","prepareSelectors","paymentMethodSelected","fireCheckoutProgress","fireCheckoutOption","initCart","products","productIds","getAddToCartLinkProductIds","getProductsFromBackend","referrer","referrerHostname","hostname","host","gclid","getUrlParameter","wbraid","gbraid","fbclid","floor","Date","now","ttclid","scid","epik","pmw_loaded","shop","page_type","product_type","getMainProductIdFromProductPage","product","getProductDataForViewItemEvent","order","isOrderIdStored","writeOrderIdToStorage","acrRemoveCookie","user","hasLoginEventFired","setLoginEventFired","lazy_load_pmw","registerShowVariationEventListener","$variationForm","selectedValues","toArray","every","select","productVariations","matchingVariation","variation","Object","entries","attributes","triggerViewItemEventPrep","variation_id","event_name","getFbRandomEventId","user_data","getFbUserData","event_source_url","href","referrer_url","makeFullUrl","snapchat","getSnapchatS2SBaseData","server_2_server","pageview_event_s2s","sendEventPayloadToServer","fbGetProductDataForCapiEvent","pinterest","getPinterestS2SBaseData","pinterestGetProductDataForCapiEvent","tiktok","getRandomEventId","tiktokGetEventUserData","page","tiktokGetEventPageData","properties","price","quantity","currency","content_type","contents","content_id","getProductIdForSpecificPixel","content_name","name","getSnapchatCustomDataForProduct","cart","isEmptyObject","content_ids","fbGetContentIdsFromCart","getCartValue","tiktokGetPropertiesFromCart","search_string","getSearchTermFromUrl","query","facebookContentIds","getTikTokOrderItemIds","isWooCommerceActive","startIntersectionObserverToWatch","startProductsMutationObserverToWatch","waitForPixelsAndTriggerPageView","load_hotjar_pixel","h","o","hj","q","push","arguments","_hjSettings","hjid","hotjar","site_id","hjsv","a","getElementsByTagName","r","createElement","src","appendChild","jQueryExists","Promise","resolve","waitForjQuery","setTimeout","library","timeout","interval","startTime","wpmDataLayerFullyLoaded","checkVar","waitForVar","version","logTimeoutId","then","clearTimeout","wpHooksExists","wp","hooks","loadWcHooksFunctions","IPv4","IPv6","util_1","isInSubnet","subnetsByVersion","acc","isIP","check4","check6","isIPv4MappedAddress","extractMappedIpv4","enumerable","isPrivate","isLocalhost","isReserved","isSpecial","item_id","amount","getProductDetailsFormattedForEvent","googleConfigConditionsMet","google","consent_mode","fireGtagGoogleAds","state","enhanced_conversions","keys","conversion_ids","gtag","phone_conversion_label","phone_conversion_number","fireGtagGoogleAnalyticsGA4","ga4","parameters","debug_mode","measurement_id","isGoogleActive","getGoogleGtagId","tag_id","getGoogleTrackingUrl","tag_gateway","measurement_path","getGoogleStandardTrackingUrl","loadGoogle","origin","loadScriptAndCacheIt","script","textStatus","tcf_support","dataLayer","processExternalGcmConsentUpdate_experimental","source","google_consent_settings","ad_personalization","ad_user_data","personalization_storage","wait_for_update","region","ads_data_redaction","url_passthrough","linker","enhanced_conversion_data","catch","jqXHR","errorThrown","gtagLoaded","reject","wait","updateGoogleConsentMode","addAction","addProductToCart","checkMandatoryFields","func","args","apply","this","debounce","storeCart","shippingAddress","field","ipv4","getLibraryVersion","checkLibraryVersion","number","variations_output","is_variable","dynamic_remarketing","send_events_with_parent_ids","send_to","getGoogleAdsConversionIdentifiers","items","dyn_r_ids","id_type","google_business_vertical","raw","user_id","values","getGoogleAdsConversionIdentifiersWithLabel","getGoogleAdsRegularOrderItems","transaction_id","new_customer","ltv","customer_lifetime_value","aw_merchant_id","discount","aw_feed_country","aw_feed_language","custom_variables","v4Seg","v4Str","IPv4Reg","v6Seg","IPv6Reg","s","isRange","isV4","isV6","getIpVersion","ipServices","getGeoInfo","cloudflare","response","fetch","ok","status","pair","loc","processRegion","geojs","json","country_code","ipinfo","country","ipapi","isIpAllowed","getIp","isOnBlacklist","ipVersion","maxServicesToCheck","validVersions","ipv","getIpFromAnyService","getBrowserGeoFromExternalService","promises","any","toFixed","geoFromStorage","geoInfo","gepLocationByTimeZone","getBrowserLocationByTimeZone","ipServicesFiltered","filter","slice","getIpFromService","timeTaken","serviceResponseData","isIpNotAllowed","ipName","getBlacklist","isCidr","customExclusionList","ip_exclude_list","ipv4ToLong","octets","createLongChecker","addressLong","subnetLong","getGA4OrderItems","orderItems","orderItem","item_name","item_category","custom_parameters","String","item_variant","variant_description","item_brand","brand","ga4AddFormattedCategories","item_data","from","Set","max","getCartItemsGa4","ga4GetFullProductItemData","ga4GetBasicProductItemData","variant","ga4AddListNameToProduct","productPosition","item_list_name","list_name","item_list_id","list_id","index","position","fbUserData","fbeventsJsUrl","searchParams","URLSearchParams","search","has","fbevents_js_url","f","b","v","n","t","callMethod","queue","_fbq","parentNode","insertBefore","isFbpSet","isFbAdvancedMatchingEnabled","getUserIdentifiersForFb","mobile_bridge_app_id","external_id","email","em","billing_email_hashed","first_name","fn","billing_first_name","toLowerCase","last_name","ln","billing_last_name","phone","ph","billing_phone","city","ct","billing_city","st","billing_state","postcode","zp","billing_postcode","billing_country","random","substring","getFbUserDataFromBrowser","advanced_matching","fbp","isValidFbp","fbc","isValidFbc","navigator","userAgent","client_user_agent","client_ip_address","parseFloat","prodIds","trackCustomFacebookEvent","customData","eventId","canFireFbq","addToCartSelectors","dataset","product_id","each","getPostIdFromString","one","closest","nextAll","getIdBasedOndVariationsOutputSetting","isEmail","emailSelected","getProductIdByCartItemElement","getProductQuantityByCartItemElement","getCartItemsFromBackend","expandIPv6","ipaddr","ipv4Part","ipv4Regexes","ipv6Part","ipv6Regexes","matchCIDR","zoneIndex","module","first","second","partSize","cidrBits","part","shift","subnetMatch","rangeList","defaultName","k","len","rangeName","rangeSubnets","kind","octet","prototype","toNormalizedString","toByteArray","other","cidrRange","ref","SpecialRanges","unspecified","broadcast","multicast","linkLocal","loopback","carrierGradeNat","range","toIPv4MappedAddress","prefixLengthFromSubnetMask","cidr","stop","zeros","zerotable","fourOctet","longValue","parser","parseIntAuto","results","reverse","zoneId","l","toRFC5952String","bestMatchIndex","bestMatchLength","exec","bytes","addr","suffix","call","toFixedLengthString","padStart","uniqueLocal","ipv4Mapped","rfc6145","rfc6052","teredo","toIPv4Address","high","low","transitional","colonCount","lastColon","replacement","replacementCount","lastIndexOf","substr","isValid","error1","isValidFourPartDecimal","parseCIDR","maskLength","parsed","defineProperty","subnetMaskFromPrefixLength","filledOctetCount","j","pow","broadcastAddressFromCIDR","ipInterfaceOctets","subnetMaskOctets","networkAddressFromCIDR","fromByteArray","process","commonjsGlobal","normalize","_validate","nh","sections","ns","hs","_leftPad","abbreviate","zPreviousFlag","zeroStartIndex","zeroLength","zStartIndex","zLength","section","zFlag","splice","d","p","padding","repeat","_bin2hex","bin","_addr2bin","binAddr","_bin2addr","binPart","hexSection","divideSubnet","mask0","mask1","limit","abbr","ret","binNetPart","binHostPart","numSubnets","binSubnet","hexAddr","binStartAddr","binEndAddr","start","end","size","randomSubnet","ptr","mask","err","inRange","check_range","ip6","range_data","parse_addr","parse_range","storeIP","displayIP","wpmRestSettings","isBelowRestErrorThreshold","isRestEndpointAvailable","testEndpoint","root","method","cache","keepalive","redirect","responseJson","success","stringify","isWpmRestEndpointAvailable","orderId","orderKey","orderIds","storeOrderIdOnServer","order_duplication_prevention","quantityToRemove","storeCartData","is_variation","parent_id","selectors","doesWooCommerceCartExist","retrieveCartData","saveCartObjectToDataLayer","ajax_url","page_id","product_ids","options","headers","statusText","responseData","assign","cartObject","triggerViewItemEvent","triggerViewItemEventNoProduct","step","checkout_option","triggerViewItemList","viewItemListTriggerTestMode","css","append","view_item_list_trigger","opacity","background_color","io","ioTimeouts","observerCallback","entry","elementId","next","isIntersecting","test_mode","unobserve","remove","ioid","detectedProductTemplateClasses","nested","flat","isNestedClass","elem","className","isFlatClass","prev","hasClass","getAllElementsToWatch","getCommonIdentifiersToWatch","listOfClassNames","haveSameNestingDepth","element1","element2","parents","findCommonParentElement","parent","is","node","countOfChildren","getCommonClass","classes1","classes2","wpmProductIds","productsNode","firstChildClassAttr","children","firstChildClasses","secondChildClassAttr","commonClass","firstProductTemplateClasses","IntersectionObserver","threshold","productsMutationObserver","characterData","mutations","newNodes","hasWpmProductIdElement","siblings","setCookie","cookieValue","expiryDays","setTime","getTime","expires","toUTCString","ca","c","charAt","deleteCookie","persistent","extension","dataGetter","getPersistentData","getSessionData","dataSetter","setPersistentData","setSessionData","deleteDataKey","removeItem","getPersistentDataKey","sessionStorage","getSessionDataKey","defaultStorageKey","storageKeySuffix","setItem","order_id","orderDetails","order_key","cartItemKey","cart_item_keys","list_position","parent_id_dyn_r_ids","getClidFromBrowser","clidId","clidCookieId","dclid","getUserAgent","getViewPort","width","documentElement","clientWidth","innerWidth","height","clientHeight","innerHeight","consoleLogVersion","fallbackUrl","dataType","ajax","done","fail","fallbackOptions","getOrderItemPrice","total","total_tax","loginEventFired","pageLoaded","readyState","pageReady","isMiniCartActive","parameter","hashAsync","algo","crypto","subtle","digest","TextEncoder","encode","buf","Uint8Array","patterns","pattern","excludeDomainFromTracking","exclude_domains","domain","debug","pmwConsoleMessage","pro","distro","eligible_for_updates","show","canLoadPremiumFeatures","pmwDomReadyFired","triggerPmwDomReadyEvent","firePmwDomReadyEvent","getEmailFromTarget","sendEventPayloadToServerPremium","activePixels","checkPixelsLoaded","isInWooCommerceSesssion","session_active","isNotInWooCommerceSesssion","previousVariationId","initializeCommandQueue","_pmwq","conversionIdentifiers","shipping_tier","payment_type","cartValue","search_term","mp_active","affiliation","tax","shipping","coupon","duration","saveState","loadApprovedPixels","CustomEvent","setConsentCookie","previousData","getConsentStateFor","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","g","globalThis","Function","prop","Symbol","toStringTag","consentAcceptAll","consentRevokeAll","consentAdjustSelectively","renameDataKeys","option","progress","loadDeprecatedFunctions","main"],"sourceRoot":""}