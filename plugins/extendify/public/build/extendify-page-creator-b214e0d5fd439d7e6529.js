"use strict";(globalThis.webpackChunkextendify=globalThis.webpackChunkextendify||[]).push([[525],{5112:(e,t,a)=>{var n=a(9196),r=a(9307),i=a(8817),o=a(9818),s=a(2238),l=a(5736),c=a(1984),d=a(5609),p=a(6993);const{adminUrl:m}=window.extSharedData,g=({setConfirmationOpen:e,confirmationOpen:t,setModalOpen:a})=>{const{incrementActivity:r}=(0,p.j)();return(0,n.createElement)(d.Modal,{onRequestClose:()=>e(!1),className:"extendify-page-creator",size:"medium","aria-labelledby":"page-creator-confirmation",role:"dialog",isOpen:t,title:(0,l.__)("Confirmation","extendify-local")},(0,n.createElement)("div",{className:"flex flex-col space-y-6 text-sm"},(0,n.createElement)("div",null,(0,l.__)("Do you want to replace existing content or create a new page?","extendify-local")),(0,n.createElement)("div",{className:"flex w-full items-center justify-end space-x-2"},(0,n.createElement)(d.Button,{size:"default",variant:"tertiary",onClick:()=>{e(!1),a(!0),r("page-creator-delete-content-button-click")}},(0,l.__)("Delete existing content","extendify-local")),(0,n.createElement)(d.Button,{variant:"primary",size:"default",href:`${m}post-new.php?post_type=page&ext-open-ai-creator`,target:"_blank"},(0,l.__)("Create a new page","extendify-local")))))},u=(0,n.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)("path",{d:"M11.1515 20H7.04C6.32593 20 5.9689 20 5.69616 19.861C5.45626 19.7388 5.26121 19.5437 5.13897 19.3038C5 19.0311 5 18.6741 5 17.96V6.04C5 5.32593 5 4.9689 5.13897 4.69616C5.26121 4.45626 5.45626 4.26121 5.69616 4.13897C5.9689 4 6.32593 4 7.04 4H16.96C17.6741 4 18.0311 4 18.3038 4.13897C18.5437 4.26121 18.7388 4.45626 18.861 4.69616C19 4.9689 19 5.32593 19 6.04V11.0303",stroke:"white",strokeWidth:"1.275",strokeLinecap:"square"}),(0,n.createElement)("path",{d:"M13.1 8H8",stroke:"white",strokeWidth:"1.275",strokeLinecap:"square",strokeLinejoin:"round"}),(0,n.createElement)("path",{d:"M10.55 10.5H8",stroke:"white",strokeWidth:"1.275",strokeLinecap:"square",strokeLinejoin:"round"}),(0,n.createElement)("path",{d:"M16.8592 17.8578L15.9955 20.4901C15.8384 20.9685 15.1616 20.9685 15.0045 20.4901L14.1408 17.8578C13.9857 17.385 13.615 17.0143 13.1422 16.8592L10.5099 15.9955C10.0315 15.8384 10.0315 15.1616 10.51 15.0045L13.1422 14.1408C13.615 13.9857 13.9857 13.615 14.1408 13.1422L15.0045 10.5099C15.1616 10.0315 15.8384 10.0315 15.9955 10.5099L16.8592 13.1422C17.0143 13.615 17.385 13.9857 17.8578 14.1408L20.49 15.0045C20.9685 15.1616 20.9685 15.8384 20.49 15.9955L17.8578 16.8592C17.385 17.0143 17.0143 17.385 16.8592 17.8578Z",fill:"white"}));var f=a(270),w=a(782);const y=e=>({open:!1,setOpen:t=>e({open:t}),progress:"",setProgress:t=>e({progress:t}),regenerationCount:0,incrementRegenerationCount:()=>e((e=>({regenerationCount:e.regenerationCount+1})))}),x=(0,f.Ue)((0,w.mW)(y,{name:"Extendify Page Creator Globals"}),y),h=()=>{const{setOpen:e}=x(),{incrementActivity:t}=(0,p.j)(),[a,i]=(0,r.useState)(!1),d=(0,o.useSelect)((e=>e(s.store).isEditedPostEmpty()),[]);return(0,n.createElement)(n.Fragment,null,a&&(0,n.createElement)(g,{setConfirmationOpen:i,setModalOpen:e,confirmationOpen:a}),(0,n.createElement)("div",{role:"button",onClick:()=>{if(window.dispatchEvent(new CustomEvent("extendify-hc:minimize")),!d)return i(!0);e(!0),t("page-creator-button-click")},className:"components-button has-icon is-primary ml-3 h-8 min-w-0 cursor-pointer px-1 xs:h-9 xs:pl-2 xs:pr-3 sm:ml-2"},(0,n.createElement)(c.Z,{icon:u,size:24,className:"fill-none"}),(0,n.createElement)("span",{className:"ml-1 hidden xs:inline"},(0,l.__)("AI Page Generator","extendify-local"))))};var E=a(2067),v=a(7918);const P=({onClose:e})=>(0,n.createElement)("button",{className:"block h-6 w-6 cursor-pointer bg-transparent p-px text-inherit outline-none focus:shadow-none focus:ring-wp focus:ring-design-main",type:"button",onClick:e,"data-test":"modal-close-button","aria-label":(0,l.__)("Close","extendify-local")},(0,n.createElement)("svg",{style:{fill:"currentColor"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)("path",{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"}))),b=(0,n.createElement)("svg",{fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)("path",{clipRule:"evenodd",d:"m13.505 4h3.3044c.936 0 1.2747.10161 1.6171.29127.3424.19042.6102.46965.7934.82489.1831.356.2801.70824.2801 1.6814v3.43584c0 .9731-.0977 1.3254-.2801 1.6814-.1832.356-.4517.6344-.7934.8248-.153.0852-.3057.1552-.5112.2054v2.7344c0 1.503-.151 2.047-.4327 2.5968-.2828.5498-.6976.9799-1.2252 1.274-.5288.294-1.052.4498-2.4975.4498h-5.10341c-1.44549 0-1.96869-.1569-2.49747-.4498-.52878-.2941-.94242-.7254-1.22526-1.274-.28284-.5487-.43376-1.0938-.43376-2.5968v-5.3051c0-1.50301.15092-2.04701.43264-2.59682.28284-.54981.6976-.98106 1.22638-1.27514.52767-.29293 1.05198-.44985 2.49747-.44985h2.18511c.041-.44652.1265-.69015.2522-.93557.1832-.356.4517-.63523.7941-.82565.3417-.18966.6812-.29127 1.6171-.29127zm-1.6984 2.18698c0-.63769.4973-1.15464 1.1106-1.15464h4.4793c.6133 0 1.1106.51695 1.1106 1.15464v4.65692c0 .6377-.4973 1.1547-1.1106 1.1547h-4.4793c-.6133 0-1.1106-.517-1.1106-1.1547z",fill:"currentColor",fillRule:"evenodd"}));var C=a(3967),_=a.n(C);const{partnerLogo:S,partnerName:N}=window.extSharedData,k=({openOnNewPage:e,updateUserOption:t,onClose:a})=>(0,n.createElement)("div",{role:"banner",className:_()("flex max-h-28 flex-row items-center justify-between p-5 md:px-8 md:py-5",{"bg-banner-main":S})},(0,n.createElement)("div",null,S?(0,n.createElement)("div",{className:"flex justify-center bg-banner-main"},(0,n.createElement)("div",{className:"flex h-6 max-w-40 overflow-hidden md:h-8 md:max-w-64"},(0,n.createElement)("img",{className:"max-h-full max-w-full object-contain",src:S,alt:N}))):(0,n.createElement)("div",{className:"-mb-5 hidden px-5 py-3 text-extendify-black sm:flex sm:pt-5"},(0,n.createElement)(c.Z,{icon:b,size:40}))),(0,n.createElement)("div",{className:_()("flex w-auto flex-shrink-0 items-center justify-end gap-4",{"text-banner-text":S})},(0,n.createElement)("label",{className:"flex items-center gap-2",htmlFor:"extendify-open-on-new-pages",title:(0,l.sprintf)(
// translators: %s: Extendify AI Page creator term
(0,l.__)("Toggle %s on new pages","extendify-local"),"Extendify AI Page Creator")},(0,n.createElement)("input",{id:"extendify-open-on-new-pages",className:"m-0 rounded-sm border border-solid border-gray-900",type:"checkbox",checked:e,onChange:e=>t("openOnNewPage",e.target.checked)}),(0,n.createElement)("span",null,(0,l.__)("Open for new pages","extendify-local"))),(0,n.createElement)("div",null,(0,n.createElement)(P,{onClose:a}))));var D=a(3689),O=a(3773);const I=({show:e})=>e?(0,n.createElement)(D.M,null,(0,n.createElement)(O.E.div,{className:"fixed bottom-[20px] right-0 z-max flex justify-end px-4 pb-4"},(0,n.createElement)("div",{className:"shadow-2xl"},(0,n.createElement)(d.Snackbar,null,(0,l.__)("Just a moment, this is taking longer than expected.","extendify-local"))))):null;var T=a(2629),j=a(5202),L=a(6123),z=a(5389),A=a(9516),R=a(9486);const B=({placeholder:e,className:t,title:a,onChange:r,value:i,description:o=null,required:s=!1,hideEditor:p=!1,setHideEditor:m=function(){}})=>(0,n.createElement)(L.g,null,(0,n.createElement)(z.__,{as:"h4",className:"mb-2 mt-0 text-base font-medium data-[disabled]:opacity-50"},(0,l.__)(a,"extendify-local")," ",s&&(0,n.createElement)("span",{className:"text-sm font-light text-wp-alert-red"},"*")),o&&(0,n.createElement)(A.dk,{className:"data-[disabled]:opacity-50"},(0,l.__)(o,"extendify-local")),p?(0,n.createElement)("div",null,(0,n.createElement)("span",{className:"line-clamp-4 opacity-80"},i),(0,n.createElement)("span",{className:"link mt-1 flex w-full justify-end"},(0,n.createElement)(d.Button,{variant:"link",onClick:e=>{e.preventDefault(),m(!1)}},(0,l.__)("Edit","extendify-local")))):(0,n.createElement)("div",{className:"relative"},(0,n.createElement)(R.g,{name:"description",placeholder:e,value:i,onChange:r,className:t}),i?(0,n.createElement)("span",{className:"absolute right-0 top-0 z-10 flex items-center pr-2 pt-2"},(0,n.createElement)("button",{type:"button",className:"m-0 border-0 bg-transparent p-0 text-gray-500","aria-label":(0,l.__)("Clear","extendify-local"),onClick:()=>{r({currentTarget:{value:""}})}},(0,n.createElement)(c.Z,{icon:j.Z,size:16}))):null)),U=({title:e,description:t})=>(0,n.createElement)(n.Fragment,null,(0,n.createElement)("h2",{className:"m-0 text-center text-2xl leading-8 text-gray-900 md:leading-10"},e),t&&(0,n.createElement)("p",{className:"m-0 text-center text-base leading-6 text-gray-700"},t)),q=(0,f.Ue)((0,w.tJ)((e=>({description:null,setDescription:t=>e({description:t}),reset:()=>e({description:null})})),{name:`extendify-page-creator-page-description-cache-${window.extSharedData.siteId}`}));var $=a(6989),M=a.n($),F=a(7403);const H=(0,F.a)(window.extSharedData.userData.userSelectionData)?.state?.siteProfile||{},J={siteProfile:{aiDescription:window.extSharedData?.siteProfile?.aiDescription||H?.aiDescription,aiSiteType:H?.aiSiteType,aiSiteCategory:H?.aiSiteCategory,aiKeywords:H?.aiKeywords}},G=e=>({...J,setSiteProfile(t){const a=Object.assign({aiSiteType:J?.siteProfile?.aiSiteType,aiSiteCategory:J?.siteProfile?.aiSiteCategory,aiDescription:J?.siteProfile?.aiDescription,aiKeywords:J?.siteProfile?.aiKeywords},t||{});e({siteProfile:a})},resetState(){e(J)}}),Z="/extendify/v1/shared/site-profile",K={getItem:async()=>await M()({path:Z}),setItem:async(e,t)=>{await M()({path:Z,method:"POST",data:{value:(0,F.a)(t)?.state?.siteProfile||{}}})}},V=(0,f.Ue)((0,w.tJ)((0,w.mW)(G,{name:"Extendify Site Profile"}),{storage:(0,w.FL)((()=>K)),skipHydration:!1}),G),{siteTitle:W}=window.extSharedData;var Y=a(4981),Q=a(6483);const X=({path:e,className:t=null})=>(0,n.createElement)("div",{className:t},(0,n.createElement)("video",{id:"video-player",playsInline:!0,muted:!0,autoPlay:!0,loop:!0},(0,n.createElement)("source",{src:e,type:"video/webm"}),(0,l.__)("Your browser does not support the video tag.","extendify-local")));var ee=a(2200);const{siteTitle:te,siteType:ae}=window.extSharedData,ne={...Object.fromEntries(Object.entries(window.extSharedData).filter((([e])=>["partnerId","devbuild","version","siteId","wpLanguage","wpVersion","siteProfile"].includes(e))))},re=async({pageProfile:e,siteImages:t})=>{const a=await(async()=>await M()({method:"GET",path:(0,Q.addQueryArgs)("/extendify/v1/page-creator/settings/get-option",{name:"extendify_siteStyle"})})||{vibe:"standard"})(),n=await(async(e={})=>{var t;const{showLocalizedCopy:a,activePlugins:n}=window.extSharedData,r=null!==(t=n?.map((e=>e.split("/")[0])))&&void 0!==t?t:[],i=Object.entries(e).reduce(((e,[t,a])=>({...e,[t]:"object"==typeof a?JSON.stringify(a):a})),{}),o=await fetch(`${ee.kE}/api/page-creator`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...ne,siteType:ae?.slug,plugins:JSON.stringify(r),showLocalizedCopy:!!a,allowedPlugins:JSON.stringify(r),...i})});if(!o.ok)throw new Error("Bad response from server");return await o.json()})({siteInformation:{title:te},siteImages:t,siteStyle:a,pageProfile:e});if(!n?.template)throw new Error("Could not get page");return n},ie=async({page:e,userState:t,pageProfile:a})=>{const n=await fetch(`${ee.Yy}/api/patterns`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...ne,page:e,userState:t,siteProfile:a})});if(!n.ok)throw new Error("Bad response from server");return await n.json()},oe=async({description:e,siteProfile:t})=>{const a=await fetch(`${ee.Yy}/api/page-profile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...ne,siteDescription:t?.aiDescription||"",description:e})});if(!a.ok)throw new Error("Something went wrong while fetching the profile");const n=await a.json();return n?.aiDescription?n:{aiTitle:null,aiPageType:null,aiDescription:null,aiKeywords:[]}},se=async({pageProfile:e})=>{const t=await(async()=>{const e=await M()({method:"GET",path:(0,Q.addQueryArgs)("/extendify/v1/page-creator/settings/get-option",{name:"user_selections",item:"siteImages"})});return e?.siteImages?.length?e:[]})();if(t?.siteImages)return t;const{aiSiteType:a,aiSiteCategory:n,aiDescription:r,aiKeywords:i}=e,o=new URLSearchParams({aiSiteType:a,aiSiteCategory:n,aiDescription:r,aiKeywords:i,...ne});te&&o.append("title",te);const s=await fetch(`${ee.TS}/api/search?${o}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error("Something went wrong while fetching the images");const l=await s.json();return l?.siteImages?l:{siteImages:[]}};var le=a(9870);const ce=()=>{const{description:e}=q(),{setProgress:t,regenerationCount:a}=x(),{siteProfile:n}=V(),{data:i,error:o}=(0,le.Z)({key:`page-profile-${a}`,description:e,siteProfile:n},oe);return(0,r.useEffect)((()=>{i||t((0,l.__)("Generating AI page profile...","extendify-local"))}),[i,t]),{pageProfile:i,error:o,loading:!i&&!o}},{state:de}=(0,F.a)(window.extSharedData?.userData?.userSelectionData),pe=window.extSharedData.siteId,{pageTitlePattern:me}=window.extPageCreator,ge={"ai-dashboard":{component:()=>{const{nextPage:e}=we(),{siteProfile:t,setSiteProfile:a}=V(),{setDescription:i,description:o}=q(),[s,c]=(0,r.useState)(null!=o?o:""),[d,p]=(0,r.useState)(!0),[m,g]=(0,r.useState)(!0),{incrementRegenerationCount:u}=x(),[f,w]=(0,r.useState)((0,T.decodeEntities)(t?.aiDescription)||"");return(0,r.useLayoutEffect)((()=>{f||g(!1)}),[f]),(0,r.useEffect)((()=>{p(!0);const e=setTimeout((()=>{s&&i(s),f&&f!==t?.aiDescription&&a({aiDescription:f}),p(!s.length)}),1e3);return()=>clearTimeout(e)}),[i,s,f,p,a,t]),(0,n.createElement)("div",{className:"mx-auto flex max-w-xl flex-col"},(0,n.createElement)("div",{className:"mb-12 grid grid-cols-1 gap-1 text-center"},(0,n.createElement)(U,{title:(0,l.__)("AI Page Creation","extendify-local"),description:(0,l.__)("Describe the page you want to create, adding key details, and Al will generate a unique, ready-to-use page for you.","extendify-local")})),(0,n.createElement)("div",{className:"grid grid-cols-1 gap-6"},(0,n.createElement)(B,{title:(0,l.__)("Describe Your Page","extendify-local"),required:!0,className:"input-focus h-[220px] w-full max-w-full resize-none border border-gray-600 py-3 pe-6 ps-3 text-base placeholder:italic placeholder:opacity-70",placeholder:(0,l.__)('E.g., Create an "About Us" page highlighting our story, mission, values and leam overview.',"extendify-local"),value:s,onChange:e=>c(e.currentTarget.value)}),(0,n.createElement)(B,{hideEditor:m,setHideEditor:g,title:W?(0,l.sprintf)((0,l.__)("Site Description for %s","extendify-local"),(0,T.decodeEntities)(W)):(0,l.__)("Site Description","extendify-local"),className:"input-focus h-[220px] w-full max-w-full resize-none border border-gray-600 py-3 pe-6 ps-3 text-base placeholder:italic placeholder:opacity-70",placeholder:(0,l.__)("This is the site description with all its ups and downs.","extendify-local"),value:f,onChange:e=>w(e.currentTarget.value)}),(0,n.createElement)("button",{type:"button",disabled:d,onClick:()=>{u(),e()},className:"mt-2.5 rounded-sm bg-editor-main px-4 py-2.5 text-sm font-medium text-design-text hover:opacity-90 disabled:cursor-not-allowed disabled:bg-gray-300"},(0,l.__)("Generate Page","extendify-local"))))}},"generating-page":{component:({insertPage:e})=>{const{page:t,loading:a}=(()=>{const{pageProfile:e}=ce(),{template:t}=(()=>{var e;const{pageProfile:t}=ce(),{siteImages:a}=(()=>{const{loading:e,pageProfile:t}=ce(),{setProgress:a,regenerationCount:n}=x(),{data:i,error:o}=(0,le.Z)(e?null:{key:`page-images-${n}`,pageProfile:t},se);return(0,r.useEffect)((()=>{i||a((0,l.__)("Finding images...","extendify-local"))}),[i,a]),{siteImages:i,error:o,loading:!i&&!o}})(),n=!t||!a,{setProgress:i,regenerationCount:o}=x(),s={key:`page-creator-page-layout-${o}`,pageProfile:t,siteImages:a},{data:c,error:d}=(0,le.Z)(n?null:s,re);return(0,r.useEffect)((()=>{c||i((0,l.__)("Creating a custom layout...","extendify-local"))}),[c,i]),{template:null!==(e=c?.template)&&void 0!==e?e:c,error:d,loading:!c&&!d}})(),{setProgress:a,regenerationCount:n}=x(),i=!e||!t,o={key:`page-creator-page-custom-content-${n}`,pageProfile:e,userState:{businessInformation:de?.businessInformation,goals:de?.goals,siteInformation:de?.siteInformation,siteId:pe},page:t},{data:s,error:c}=(0,le.Z)(i?null:o,ie);return(0,r.useEffect)((()=>{i||a((0,l.__)("Writing custom content...","extendify-local"))}),[s,a,i]),{page:s?{patterns:s.patterns,title:e.aiTitle}:s,error:c,loading:!s&&!c}})(),{progress:i}=x(),{editPost:c}=(0,o.useDispatch)(s.store);return(0,r.useEffect)((()=>{if(!t&&a)return;const n=t?.patterns.flatMap((({code:e,patternReplacementCode:a})=>{let n=e;if(me&&e.includes('"name":"Page Title"')){const e=/<h1([^>]*)>[\da-zA-z]+<\/h1>/g,a=(e,a)=>`<h1${a}>${t.title}</h1>`;n=(0,T.decodeEntities)(me).replaceAll(e,a)}const r=/href="#extendify-([^"]+)"/g,i=n.replaceAll(r,'href="#"'),o=a?.replaceAll(r,'href="#"');return(0,Y.rawHandler)({HTML:null!=o?o:i})}));c({template:"no-title"}).catch((()=>{})),(async(e,t)=>{await M()({path:"/extendify/v1/page-creator/settings/single",method:"POST",data:{key:"extendify_check_for_image_imports",value:!0}})})();let r=setTimeout((()=>e(n,t.title)),1e3);return()=>clearTimeout(r)}),[a,t,e,c]),(0,n.createElement)("div",{className:"mx-auto grow overflow-y-auto px-4 py-8 md:p-12 md:px-6 3xl:p-16"},(0,n.createElement)("div",{className:"mx-auto flex h-full flex-col justify-center"},(0,n.createElement)(X,{path:"https://assets.extendify.com/launch/site-building.webm",className:"mx-auto h-auto w-[200px] md:w-[400px]"}),i&&(0,n.createElement)("p",{className:"text-center text-lg","aria-live":"polite"},i)))}}},ue=Object.entries(ge),fe=(0,w.mW)(((e,t)=>({pages:new Map(ue),currentPageIndex:0,count:()=>t().pages.size,getPageOrder:()=>Array.from(t().pages.keys()),getCurrentPageData:()=>t().pages.get(t().getCurrentPageSlug()),getPageSlug:e=>t().getPageOrder()[e],getCurrentPageSlug:()=>t().getPageOrder()[t().currentPageIndex]||(t().setPage(0),t().getPageOrder()[0]),getPageData:e=>t().pages.get(e),getNextPageData:()=>{const e=t().currentPageIndex+1;return e>t().count()-1?{}:t().getPageData(t().getPageSlug(e))},setPage:a=>{"string"==typeof a&&(a=t().getPageOrder().indexOf(a)),a>t().count()-1||a<0||e({currentPageIndex:a})},findPreviousValidPage:e=>{let t=e;do{t-=1}while(t>0);return t},nextPage:()=>{const e=t().currentPageIndex+1;t().setPage(e)},previousPage:()=>{t().setPage(t().findPreviousValidPage(t().currentPageIndex))}})),{name:"Extendify Page Creator Pages",serialize:!0}),we=(0,f.Ue)(fe);var ye=a(9820);const xe=({insertPage:e})=>{const[t,a]=(0,r.useState)(!1),{component:i}=we((e=>e.getCurrentPageData()));return(0,n.createElement)(ye.J$,{value:{errorRetryInterval:1e3,onErrorRetry:(e,n,r,i,{retryCount:o})=>{console.error(e),403!==e?.data?.status?t||(a(!0),setTimeout((()=>{a(!1),i({retryCount:o})}),5e3)):window.location.reload()}}},(0,n.createElement)("div",{className:"my-12 flex md:mb-20 md:mt-16"},i?(0,n.createElement)(i,{insertPage:e}):null),(0,n.createElement)(I,{show:t}))},he={getItem:async()=>await M()({path:"/wp/v2/users/me"}),setItem:async(e,t)=>await M()({path:"/wp/v2/users/me",method:"PUT",data:{extendify_page_creator_user:t}})},Ee=(0,f.Ue)((0,w.tJ)(((e,t)=>{var a;return{openOnNewPage:!0,updateUserOption:(a,n)=>{Object.keys(t()).includes(a)&&e({[a]:n})},...null!==(a=(0,F.a)(window.extPageCreator.userInfo)?.state)&&void 0!==a?a:{}}}),{name:"extendify_page_creator_user",storage:(0,w.FL)((()=>he)),partialize:e=>({...e,ready:!1}),skipHydration:!0})),ve=()=>{const{incrementActivity:e}=(0,p.j)(),{open:t,setOpen:a}=x(),{updateUserOption:i,openOnNewPage:c}=Ee(),{setPage:d}=we(),{resetBlocks:m}=(0,o.dispatch)("core/block-editor"),{closeGeneralSidebar:g}=(0,o.useDispatch)(E.store),{createNotice:u}=(0,o.dispatch)("core/notices"),f=(0,r.useRef)(!1),w=()=>{e("page-creator-modal-close"),a(!1),d(0)},y=(0,o.useSelect)((e=>{const t=e(s.store);return{isPage:"page"===t.getCurrentPostType(),isNew:t.isCleanNewPost(),isEmptyPost:t.isEditedPostEmpty()}}),[]);return(0,r.useLayoutEffect)((()=>{t||f.current||(f.current=!0,c&&y.isNew&&(window.dispatchEvent(new CustomEvent("extendify-hc:minimize")),window.dispatchEvent(new CustomEvent("extendify::close-library")),e("page-creator-auto-open"),a(!0)),new URLSearchParams(window.location.search).has("ext-open-ai-creator")&&(a(!0),e("page-creator-search-param-auto-open")))}),[c,a,e,t,y.isNew]),(0,r.useEffect)((()=>{const t=new URLSearchParams(window.location.search),{pathname:n}=window.location;t.has("ext-page-creator-close")&&(a(!1),t.delete("ext-page-creator-close"),window.history.replaceState({},"",n+"?"+t.toString()),e("page-creator-search-param-auto-close"))}),[a,e]),(0,r.useEffect)((()=>{const e=()=>a(!0),t=()=>a(!1);return window.addEventListener("extendify::open-page-creator",e),window.addEventListener("extendify::close-page-creator",t),()=>{window.removeEventListener("extendify::open-page-creator",e),window.removeEventListener("extendify::close-page-creator",t)}}),[a]),t?(0,n.createElement)(v.Vq,{className:"extendify-page-creator extendify-page-creator-modal",open:t,static:!0,"aria-labelledby":"page-creator-modal",role:"dialog",onClose:()=>{}},(0,n.createElement)("div",{className:"mx-auto flex h-full w-full items-center justify-center pt-10 md:p-10"},(0,n.createElement)("div",{onClick:w,role:"button",tabIndex:0,"aria-label":(0,l.__)("Close AI Page Creator","extendify-local"),className:"fixed inset-0 bg-black/30",style:{backdropFilter:"blur(2px)"},"aria-hidden":"true"}),(0,n.createElement)(O.E.div,{key:"ai-page-generator-modal",initial:{y:30,opacity:0},animate:{y:0,opacity:1},exit:{y:0,opacity:0},transition:{duration:.3},className:"relative mx-auto h-full max-h-full w-full max-w-4xl rounded-lg bg-white shadow-2xl sm:flex sm:overflow-hidden md:h-auto"},(0,n.createElement)(v.Vq.Title,{className:"sr-only"},(0,l.__)("AI Page Creator","extendify-local")),(0,n.createElement)("div",{className:"relative flex w-full flex-col bg-white"},(0,n.createElement)(k,{openOnNewPage:c,updateUserOption:i,onClose:w}),(0,n.createElement)("div",{id:"extendify-page-creator-pages",className:"mx-8 flex-grow overflow-y-auto"},(0,n.createElement)(xe,{insertPage:async(t,a)=>{g();try{y.isEmptyPost||m([]),await(async e=>{const{insertBlocks:t,replaceBlock:a}=(0,o.dispatch)("core/block-editor"),{getSelectedBlock:n,getBlockHierarchyRootClientId:r,getBlockIndex:i,getGlobalBlockCount:s}=(0,o.select)("core/block-editor"),{clientId:l,name:c,attributes:d}=n()||{},p=l?r(l):"",m=(p?i(p):s())+1;return"core/paragraph"===c&&""===d?.content?await a(l,e):await t(e,m)})(t),(0,o.dispatch)("core/editor").editPost({title:a}),e("page-creator-page-insert"),w(),u("info",(0,l.__)("Page added","extendify-local"),{isDismissible:!0,type:"snackbar"})}catch(e){console.error("Failed to insert page:",e),u("error",(0,l.__)("Failed to add page","extendify-local"),{isDismissible:!0,type:"snackbar"})}}})))))):null};(0,i.registerPlugin)("extendify-page-creator",{render:()=>{if(!window.extSharedData?.isLaunchCompleted||!window.extSharedData?.aiPageCreatorEnabled||"page"!==window.wp.data.select("core/editor").getCurrentPostType())return;if("function"!=typeof r.createRoot)return;const e="extendify-page-creator-btn",t="extendify-page-creator",a=".edit-post-header-toolbar",i=".edit-site-header-edit-mode__start";(document.querySelector(a)||document.querySelector(i))&&requestAnimationFrame((()=>{if(document.getElementById(e))return;const o=document.createElement("div"),s=Object.assign(o,{id:e,className:t});document.querySelector(a)?.append(s),document.querySelector(i)?.append(s),(0,r.createRoot)(s).render((0,n.createElement)(h,null));const l="extendify-page-creator-modal";if(document.getElementById(l))return;const c=document.createElement("div"),d=Object.assign(c,{id:l,className:t});document.body.append(d),(0,r.createRoot)(d).render((0,n.createElement)(ve,null))}))}})},9196:e=>{e.exports=window.React},1850:e=>{e.exports=window.ReactDOM},6989:e=>{e.exports=window.wp.apiFetch},4981:e=>{e.exports=window.wp.blocks},5609:e=>{e.exports=window.wp.components},9818:e=>{e.exports=window.wp.data},2067:e=>{e.exports=window.wp.editPost},2238:e=>{e.exports=window.wp.editor},9307:e=>{e.exports=window.wp.element},2629:e=>{e.exports=window.wp.htmlEntities},5736:e=>{e.exports=window.wp.i18n},8817:e=>{e.exports=window.wp.plugins},444:e=>{e.exports=window.wp.primitives},6483:e=>{e.exports=window.wp.url}},e=>{e.O(0,[746,857],(()=>(5112,e(e.s=5112)))),e.O()}]);