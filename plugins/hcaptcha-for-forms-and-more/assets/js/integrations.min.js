(()=>{function t(t,a){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,o,r,c=[],s=!0,l=!1;try{if(o=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;s=!1}else for(;!(s=(n=o.call(a)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){l=!0,i=t}finally{try{if(!s&&null!=a.return&&(r=a.return(),Object(r)!==r))return}finally{if(l)throw i}}return c}}(t,a)||function(t,a){if(t){if("string"==typeof t)return e(t,a);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,a):void 0}}(t,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=Array(e);a<e;a++)n[a]=t[a];return n}var a=function(e){var a=document.querySelector("#wpadminbar"),n=document.querySelector(".hcaptcha-settings-tabs"),i=document.querySelector(".hcaptcha-header-bar"),o="#hcaptcha-message",r=e(o),c=e("#wpwrap"),s=e("#adminmenuwrap"),l=e("#hcaptcha-integrations-search");function d(t,a){r.removeClass(),r.addClass(a+" notice settings-error is-dismissible"),r.html("<p>".concat(t,"</p>")),e(document).trigger("wp-updates-notice-added");var n=r.clone();r.css("visibility","hidden"),n.css("margin","0px"),n.css("top",c.position().top),n.css("z-index","999999");var i="block"===s.css("display")?s.width():0;n.css("left",i),n.width(e(window).width()-i),n.css("position","fixed"),e("body").append(n),setTimeout((function(){r.css("visibility","unset"),n.remove()}),3e3)}function h(t){d(t,"notice-error")}function u(t){return t.is(jQuery(".form-table").eq(0))}function f(t,a,n){var i=!1,o=a.toLowerCase(),r=!u(t),c=n.find("fieldset");c.attr("disabled",r),c.find("input").attr("disabled",r),t.find("tbody").children().each((function(t,a){var r=e(a).find(".hcaptcha-integrations-logo img").attr("alt");if((r=(r=r||"").replace(" Logo","")).toLowerCase()>o)return n.insertBefore(e(a)),i=!0,!1})),i||t.find("tbody").append(n)}e(".form-table img").on("click",(function(c){function s(){l(!0)}function l(){var o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=v?"on":"off";r=o?"install":r;var c,s,l=(s=document.querySelector(".kagg-dialog select"))&&null!==(c=s.value)&&void 0!==c?c:"",g={action:HCaptchaIntegrationsObject.action,nonce:HCaptchaIntegrationsObject.nonce,install:o,activate:v,entity:p,status:j,newTheme:l};y.addClass(r),e.post({url:HCaptchaIntegrationsObject.ajaxUrl,data:g}).done((function(o){if(void 0!==o.success)if(void 0!==o.data.themes&&(HCaptchaIntegrationsObject.themes=o.data.themes,HCaptchaIntegrationsObject.defaultTheme=o.data.defaultTheme),o.success){var r,c=e(".form-table").eq(v?0:1);!function(t,a,n){if("theme"===a){var i=e(".form-table"),o=t?"":'[data-label="'+n+'"]',r=i.eq(t?0:1).find('.hcaptcha-integrations-logo img[data-entity="theme"]'+o);if(r.length){var c=i.eq(t?1:0),s=r.closest("tr");f(c,r.attr("data-label"),s)}}}(v,p,l),f(c,m,y),function(t){d(t,"notice-success")}(o.data.message),function(a){for(var n=e(".form-table"),i=0,o=Object.entries(a);i<o.length;i++){var r=t(o[i],2),c=r[0],s=r[1],l="hcaptcha-integrations-"+c.replace(/_/g,"-"),d=e("tr.".concat(l)),h=d.find(".hcaptcha-integrations-logo"),g=u(d.closest(".form-table"));s&&h.attr("data-installed",!0),g!==s&&f(n.eq(s?0:1),h.find("img").attr("alt"),d)}}(o.data.stati),e("html, body").animate({scrollTop:y.offset().top-(r=!a||"absolute"===window.getComputedStyle(a).position,(a&&!r?a.offsetHeight:0)+(n?n.offsetHeight:0)+(i?i.offsetHeight:0))},1e3)}else{var s,g;h(null!==(s=null===(g=o.data)||void 0===g?void 0:g.message)&&void 0!==s?s:o.data)}else d(HCaptchaIntegrationsObject.unexpectedErrorMsg,"notice-error")})).fail((function(t){h(t.statusText)})).always((function(){y.removeClass("install on off")}))}c.preventDefault(),r.remove(),e('<div id="hcaptcha-message"></div>').insertAfter(".hcaptcha-header-bar"),r=e(o);var g=e(c.target),p=g.data("entity");if(p=p||"",-1!==e.inArray(p,["core","theme","plugin"])&&-1===e.inArray(p,["core"])){var m=g.attr("alt");m=(m=m||"").replace(" Logo","");var b,v,y=g.closest("tr"),C=y.attr("class").match(/hcaptcha-integrations-([a-z0-9-]+)/),j=C?C[1]:"",O="";if(y.find("fieldset").attr("disabled"))b="plugin"===p?HCaptchaIntegrationsObject.activatePluginMsg:HCaptchaIntegrationsObject.activateThemeMsg,v=!0;else{if("plugin"===p)b=HCaptchaIntegrationsObject.deactivatePluginMsg;else{for(var w in b=HCaptchaIntegrationsObject.deactivateThemeMsg,O="<p>"+HCaptchaIntegrationsObject.selectThemeMsg+"</p>",O+="<select>",HCaptchaIntegrationsObject.themes){var H=w===HCaptchaIntegrationsObject.defaultTheme?' selected="selected"':"";O+='<option value="'.concat(w,'"').concat(H,">").concat(HCaptchaIntegrationsObject.themes[w],"</option>")}O+="</select>"}v=!1}if(-1===e.inArray(p,["theme"])||v||0!==Object.keys(HCaptchaIntegrationsObject.themes).length){if("false"===y.find(".hcaptcha-integrations-logo").attr("data-installed"))return c.ctrlKey?void s():(b=(b="plugin"===p?HCaptchaIntegrationsObject.installPluginMsg:HCaptchaIntegrationsObject.installThemeMsg).replace("%s",m),void kaggDialog.confirm({title:b,content:O,type:"install",buttons:{ok:{text:HCaptchaIntegrationsObject.OKBtnText},cancel:{text:HCaptchaIntegrationsObject.CancelBtnText}},onAction:function(t){t&&s()}}));c.ctrlKey?l():(b=b.replace("%s",m),kaggDialog.confirm({title:b,content:O,type:v?"activate":"deactivate",buttons:{ok:{text:HCaptchaIntegrationsObject.OKBtnText},cancel:{text:HCaptchaIntegrationsObject.CancelBtnText}},onAction:function(t){t&&l()}}))}else kaggDialog.confirm({title:HCaptchaIntegrationsObject.onlyOneThemeMsg,content:"",type:"info",buttons:{ok:{text:HCaptchaIntegrationsObject.OKBtnText}}})}}));var g,p,m;l.on("input",(g=function(){var t=l.val().trim().toLowerCase(),a=e(".hcaptcha-integrations-logo img"),n=null;if(a.each((function(a,i){var o=e(i);if("core"!==o.data("entity")){var r,c=o.closest("tr");o.data("label").toLowerCase().includes(t)?(c.show(),n=null!==(r=n)&&void 0!==r?r:c):c.hide()}})),n){var i=n.offset().top+n.outerHeight()-e(window).height()+5;e("html").stop().animate({scrollTop:i},1e3)}},p=100,function(){var t=this,e=arguments;clearTimeout(m),m=setTimeout((function(){return g.apply(t,e)}),p)})),e("#hcaptcha-options").keydown((function(t){e(t.target).is(l)&&13===t.which&&t.preventDefault()}))};window.hCaptchaIntegrations=a,jQuery(document).ready(a)})();