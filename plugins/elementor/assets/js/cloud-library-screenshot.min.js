/*! For license information please see cloud-library-screenshot.min.js.LICENSE.txt */
(()=>{var r={9535:(r,s,c)=>{var u=c(89736);function _regenerator(){var s,c,l="function"==typeof Symbol?Symbol:{},p=l.iterator||"@@iterator",h=l.toStringTag||"@@toStringTag";function i(r,l,p,h){var g=l&&l.prototype instanceof Generator?l:Generator,y=Object.create(g.prototype);return u(y,"_invoke",function(r,u,l){var p,h,g,y=0,_=l||[],w=!1,b={p:0,n:0,v:s,a:d,f:d.bind(s,4),d:function d(r,c){return p=r,h=0,g=s,b.n=c,m}};function d(r,u){for(h=r,g=u,c=0;!w&&y&&!l&&c<_.length;c++){var l,p=_[c],v=b.p,x=p[2];r>3?(l=x===u)&&(g=p[(h=p[4])?5:(h=3,3)],p[4]=p[5]=s):p[0]<=v&&((l=r<2&&v<p[1])?(h=0,b.v=u,b.n=p[1]):v<x&&(l=r<3||p[0]>u||u>x)&&(p[4]=r,p[5]=u,b.n=x,h=0))}if(l||r>1)return m;throw w=!0,u}return function(l,_,v){if(y>1)throw TypeError("Generator is already running");for(w&&1===_&&d(_,v),h=_,g=v;(c=h<2?s:g)||!w;){p||(h?h<3?(h>1&&(b.n=-1),d(h,g)):b.n=g:b.v=g);try{if(y=2,p){if(h||(l="next"),c=p[l]){if(!(c=c.call(p,g)))throw TypeError("iterator result is not an object");if(!c.done)return c;g=c.value,h<2&&(h=0)}else 1===h&&(c=p.return)&&c.call(p),h<2&&(g=TypeError("The iterator does not provide a '"+l+"' method"),h=1);p=s}else if((c=(w=b.n<0)?g:r.call(u,b))!==m)break}catch(r){p=s,h=1,g=r}finally{y=1}}return{value:c,done:w}}}(r,p,h),!0),y}var m={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}c=Object.getPrototypeOf;var g=[][p]?c(c([][p]())):(u(c={},p,function(){return this}),c),y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(g);function f(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,GeneratorFunctionPrototype):(r.__proto__=GeneratorFunctionPrototype,u(r,h,"GeneratorFunction")),r.prototype=Object.create(y),r}return GeneratorFunction.prototype=GeneratorFunctionPrototype,u(y,"constructor",GeneratorFunctionPrototype),u(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",u(GeneratorFunctionPrototype,h,"GeneratorFunction"),u(y),u(y,h,"Generator"),u(y,p,function(){return this}),u(y,"toString",function(){return"[object Generator]"}),(r.exports=_regenerator=function _regenerator(){return{w:i,m:f}},r.exports.__esModule=!0,r.exports.default=r.exports)()}r.exports=_regenerator,r.exports.__esModule=!0,r.exports.default=r.exports},10564:r=>{function _typeof(s){return r.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},r.exports.__esModule=!0,r.exports.default=r.exports,_typeof(s)}r.exports=_typeof,r.exports.__esModule=!0,r.exports.default=r.exports},11327:(r,s,c)=>{var u=c(10564).default;r.exports=function toPrimitive(r,s){if("object"!=u(r)||!r)return r;var c=r[Symbol.toPrimitive];if(void 0!==c){var l=c.call(r,s||"default");if("object"!=u(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(r)},r.exports.__esModule=!0,r.exports.default=r.exports},14718:(r,s,c)=>{var u=c(29402);r.exports=function _superPropBase(r,s){for(;!{}.hasOwnProperty.call(r,s)&&null!==(r=u(r)););return r},r.exports.__esModule=!0,r.exports.default=r.exports},15118:(r,s,c)=>{var u=c(10564).default,l=c(36417);r.exports=function _possibleConstructorReturn(r,s){if(s&&("object"==u(s)||"function"==typeof s))return s;if(void 0!==s)throw new TypeError("Derived constructors may only return object or undefined");return l(r)},r.exports.__esModule=!0,r.exports.default=r.exports},29402:r=>{function _getPrototypeOf(s){return r.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},r.exports.__esModule=!0,r.exports.default=r.exports,_getPrototypeOf(s)}r.exports=_getPrototypeOf,r.exports.__esModule=!0,r.exports.default=r.exports},33929:(r,s,c)=>{var u=c(67114),l=c(89736);r.exports=function AsyncIterator(r,s){function n(c,l,p,h){try{var m=r[c](l),g=m.value;return g instanceof u?s.resolve(g.v).then(function(r){n("next",r,p,h)},function(r){n("throw",r,p,h)}):s.resolve(g).then(function(r){m.value=r,p(m)},function(r){return n("throw",r,p,h)})}catch(r){h(r)}}var c;this.next||(l(AsyncIterator.prototype),l(AsyncIterator.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),l(this,"_invoke",function(r,u,l){function f(){return new s(function(s,c){n(r,l,s,c)})}return c=c?c.then(f,f):f()},!0)},r.exports.__esModule=!0,r.exports.default=r.exports},36417:r=>{r.exports=function _assertThisInitialized(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r},r.exports.__esModule=!0,r.exports.default=r.exports},39805:r=>{r.exports=function _classCallCheck(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")},r.exports.__esModule=!0,r.exports.default=r.exports},40989:(r,s,c)=>{var u=c(45498);function _defineProperties(r,s){for(var c=0;c<s.length;c++){var l=s[c];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,u(l.key),l)}}r.exports=function _createClass(r,s,c){return s&&_defineProperties(r.prototype,s),c&&_defineProperties(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r},r.exports.__esModule=!0,r.exports.default=r.exports},41621:(r,s,c)=>{var u=c(14718);function _get(){return r.exports=_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(r,s,c){var l=u(r,s);if(l){var p=Object.getOwnPropertyDescriptor(l,s);return p.get?p.get.call(arguments.length<3?r:c):p.value}},r.exports.__esModule=!0,r.exports.default=r.exports,_get.apply(null,arguments)}r.exports=_get,r.exports.__esModule=!0,r.exports.default=r.exports},45498:(r,s,c)=>{var u=c(10564).default,l=c(11327);r.exports=function toPropertyKey(r){var s=l(r,"string");return"symbol"==u(s)?s:s+""},r.exports.__esModule=!0,r.exports.default=r.exports},45549:(r,s,c)=>{"use strict";c.r(s),c.d(s,{getFontEmbedCSS:()=>getFontEmbedCSS,toBlob:()=>toBlob,toCanvas:()=>toCanvas,toJpeg:()=>toJpeg,toPixelData:()=>toPixelData,toPng:()=>toPng,toSvg:()=>toSvg});const u=(()=>{let r=0;return()=>(r+=1,`u${`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4)}${r}`)})();function toArray(r){const s=[];for(let c=0,u=r.length;c<u;c++)s.push(r[c]);return s}let l=null;function getStyleProperties(r={}){return l||(r.includeStyleProperties?(l=r.includeStyleProperties,l):(l=toArray(window.getComputedStyle(document.documentElement)),l))}function px(r,s){const c=(r.ownerDocument.defaultView||window).getComputedStyle(r).getPropertyValue(s);return c?parseFloat(c.replace("px","")):0}function getImageSize(r,s={}){return{width:s.width||function getNodeWidth(r){const s=px(r,"border-left-width"),c=px(r,"border-right-width");return r.clientWidth+s+c}(r),height:s.height||function getNodeHeight(r){const s=px(r,"border-top-width"),c=px(r,"border-bottom-width");return r.clientHeight+s+c}(r)}}const p=16384;function createImage(r){return new Promise((s,c)=>{const u=new Image;u.onload=()=>{u.decode().then(()=>{requestAnimationFrame(()=>s(u))})},u.onerror=c,u.crossOrigin="anonymous",u.decoding="async",u.src=r})}async function nodeToDataURL(r,s,c){const u="http://www.w3.org/2000/svg",l=document.createElementNS(u,"svg"),p=document.createElementNS(u,"foreignObject");return l.setAttribute("width",`${s}`),l.setAttribute("height",`${c}`),l.setAttribute("viewBox",`0 0 ${s} ${c}`),p.setAttribute("width","100%"),p.setAttribute("height","100%"),p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("externalResourcesRequired","true"),l.appendChild(p),p.appendChild(r),async function svgToDataURL(r){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(r)).then(encodeURIComponent).then(r=>`data:image/svg+xml;charset=utf-8,${r}`)}(l)}const isInstanceOfElement=(r,s)=>{if(r instanceof s)return!0;const c=Object.getPrototypeOf(r);return null!==c&&(c.constructor.name===s.name||isInstanceOfElement(c,s))};function getPseudoElementStyle(r,s,c,u){const l=`.${r}:${s}`,p=c.cssText?function formatCSSText(r){const s=r.getPropertyValue("content");return`${r.cssText} content: '${s.replace(/'|"/g,"")}';`}(c):function formatCSSProperties(r,s){return getStyleProperties(s).map(s=>`${s}: ${r.getPropertyValue(s)}${r.getPropertyPriority(s)?" !important":""};`).join(" ")}(c,u);return document.createTextNode(`${l}{${p}}`)}function clonePseudoElement(r,s,c,l){const p=window.getComputedStyle(r,c),h=p.getPropertyValue("content");if(""===h||"none"===h)return;const m=u();try{s.className=`${s.className} ${m}`}catch(r){return}const g=document.createElement("style");g.appendChild(getPseudoElementStyle(m,c,p,l)),s.appendChild(g)}const h="application/font-woff",m="image/jpeg",g={woff:h,woff2:h,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:m,jpeg:m,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function getMimeType(r){const s=function getExtension(r){const s=/\.([^./]*?)$/g.exec(r);return s?s[1]:""}(r).toLowerCase();return g[s]||""}function isDataUrl(r){return-1!==r.search(/^(data:)/)}function makeDataUrl(r,s){return`data:${s};base64,${r}`}async function fetchAsDataURL(r,s,c){const u=await fetch(r,s);if(404===u.status)throw new Error(`Resource "${u.url}" not found`);const l=await u.blob();return new Promise((r,s)=>{const p=new FileReader;p.onerror=s,p.onloadend=()=>{try{r(c({res:u,result:p.result}))}catch(r){s(r)}},p.readAsDataURL(l)})}const y={};async function resourceToDataURL(r,s,c){const u=function getCacheKey(r,s,c){let u=r.replace(/\?.*/,"");return c&&(u=r),/ttf|otf|eot|woff2?/i.test(u)&&(u=u.replace(/.*\//,"")),s?`[${s}]${u}`:u}(r,s,c.includeQueryParams);if(null!=y[u])return y[u];let l;c.cacheBust&&(r+=(/\?/.test(r)?"&":"?")+(new Date).getTime());try{const u=await fetchAsDataURL(r,c.fetchRequestInit,({res:r,result:c})=>(s||(s=r.headers.get("Content-Type")||""),function getContentFromDataUrl(r){return r.split(/,/)[1]}(c)));l=makeDataUrl(u,s)}catch(s){l=c.imagePlaceholder||"";let u=`Failed to fetch resource: ${r}`;s&&(u="string"==typeof s?s:s.message),u&&console.warn(u)}return y[u]=l,l}async function cloneSingleNode(r,s){return isInstanceOfElement(r,HTMLCanvasElement)?async function cloneCanvasElement(r){const s=r.toDataURL();return"data:,"===s?r.cloneNode(!1):createImage(s)}(r):isInstanceOfElement(r,HTMLVideoElement)?async function cloneVideoElement(r,s){if(r.currentSrc){const s=document.createElement("canvas"),c=s.getContext("2d");return s.width=r.clientWidth,s.height=r.clientHeight,null==c||c.drawImage(r,0,0,s.width,s.height),createImage(s.toDataURL())}const c=r.poster,u=getMimeType(c);return createImage(await resourceToDataURL(c,u,s))}(r,s):isInstanceOfElement(r,HTMLIFrameElement)?async function cloneIFrameElement(r,s){var c;try{if(null===(c=null==r?void 0:r.contentDocument)||void 0===c?void 0:c.body)return await cloneNode(r.contentDocument.body,s,!0)}catch(r){}return r.cloneNode(!1)}(r,s):r.cloneNode(isSVGElement(r))}const isSlotElement=r=>null!=r.tagName&&"SLOT"===r.tagName.toUpperCase(),isSVGElement=r=>null!=r.tagName&&"SVG"===r.tagName.toUpperCase();function decorate(r,s,c){return isInstanceOfElement(s,Element)&&(!function cloneCSSStyle(r,s,c){const u=s.style;if(!u)return;const l=window.getComputedStyle(r);l.cssText?(u.cssText=l.cssText,u.transformOrigin=l.transformOrigin):getStyleProperties(c).forEach(c=>{let p=l.getPropertyValue(c);if("font-size"===c&&p.endsWith("px")){const r=Math.floor(parseFloat(p.substring(0,p.length-2)))-.1;p=`${r}px`}isInstanceOfElement(r,HTMLIFrameElement)&&"display"===c&&"inline"===p&&(p="block"),"d"===c&&s.getAttribute("d")&&(p=`path(${s.getAttribute("d")})`),u.setProperty(c,p,l.getPropertyPriority(c))})}(r,s,c),function clonePseudoElements(r,s,c){clonePseudoElement(r,s,":before",c),clonePseudoElement(r,s,":after",c)}(r,s,c),function cloneInputValue(r,s){isInstanceOfElement(r,HTMLTextAreaElement)&&(s.innerHTML=r.value),isInstanceOfElement(r,HTMLInputElement)&&s.setAttribute("value",r.value)}(r,s),function cloneSelectValue(r,s){if(isInstanceOfElement(r,HTMLSelectElement)){const c=s,u=Array.from(c.children).find(s=>r.value===s.getAttribute("value"));u&&u.setAttribute("selected","")}}(r,s)),s}async function cloneNode(r,s,c){return c||!s.filter||s.filter(r)?Promise.resolve(r).then(r=>cloneSingleNode(r,s)).then(c=>async function cloneChildren(r,s,c){var u,l;if(isSVGElement(s))return s;let p=[];return p=isSlotElement(r)&&r.assignedNodes?toArray(r.assignedNodes()):isInstanceOfElement(r,HTMLIFrameElement)&&(null===(u=r.contentDocument)||void 0===u?void 0:u.body)?toArray(r.contentDocument.body.childNodes):toArray((null!==(l=r.shadowRoot)&&void 0!==l?l:r).childNodes),0===p.length||isInstanceOfElement(r,HTMLVideoElement)||await p.reduce((r,u)=>r.then(()=>cloneNode(u,c)).then(r=>{r&&s.appendChild(r)}),Promise.resolve()),s}(r,c,s)).then(c=>decorate(r,c,s)).then(r=>async function ensureSVGSymbols(r,s){const c=r.querySelectorAll?r.querySelectorAll("use"):[];if(0===c.length)return r;const u={};for(let l=0;l<c.length;l++){const p=c[l].getAttribute("xlink:href");if(p){const c=r.querySelector(p),l=document.querySelector(p);c||!l||u[p]||(u[p]=await cloneNode(l,s,!0))}}const l=Object.values(u);if(l.length){const s="http://www.w3.org/1999/xhtml",c=document.createElementNS(s,"svg");c.setAttribute("xmlns",s),c.style.position="absolute",c.style.width="0",c.style.height="0",c.style.overflow="hidden",c.style.display="none";const u=document.createElementNS(s,"defs");c.appendChild(u);for(let r=0;r<l.length;r++)u.appendChild(l[r]);r.appendChild(c)}return r}(r,s)):null}const _=/url\((['"]?)([^'"]+?)\1\)/g,w=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,b=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function embed_resources_embed(r,s,c,u,l){try{const p=c?function resolveUrl(r,s){if(r.match(/^[a-z]+:\/\//i))return r;if(r.match(/^\/\//))return window.location.protocol+r;if(r.match(/^[a-z]+:/i))return r;const c=document.implementation.createHTMLDocument(),u=c.createElement("base"),l=c.createElement("a");return c.head.appendChild(u),c.body.appendChild(l),s&&(u.href=s),l.href=r,l.href}(s,c):s,h=getMimeType(s);let m;if(l){m=makeDataUrl(await l(p),h)}else m=await resourceToDataURL(p,h,u);return r.replace(function toRegex(r){const s=r.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${s})(['"]?\\))`,"g")}(s),`$1${m}$3`)}catch(r){}return r}function shouldEmbed(r){return-1!==r.search(_)}async function embedResources(r,s,c){if(!shouldEmbed(r))return r;const u=function filterPreferredFontFormat(r,{preferredFontFormat:s}){return s?r.replace(b,r=>{for(;;){const[c,,u]=w.exec(r)||[];if(!u)return"";if(u===s)return`src: ${c};`}}):r}(r,c),l=function parseURLs(r){const s=[];return r.replace(_,(r,c,u)=>(s.push(u),r)),s.filter(r=>!isDataUrl(r))}(u);return l.reduce((r,u)=>r.then(r=>embed_resources_embed(r,u,s,c)),Promise.resolve(u))}async function embedProp(r,s,c){var u;const l=null===(u=s.style)||void 0===u?void 0:u.getPropertyValue(r);if(l){const u=await embedResources(l,null,c);return s.style.setProperty(r,u,s.style.getPropertyPriority(r)),!0}return!1}async function embedImages(r,s){isInstanceOfElement(r,Element)&&(await async function embedBackground(r,s){await embedProp("background",r,s)||await embedProp("background-image",r,s),await embedProp("mask",r,s)||await embedProp("-webkit-mask",r,s)||await embedProp("mask-image",r,s)||await embedProp("-webkit-mask-image",r,s)}(r,s),await async function embedImageNode(r,s){const c=isInstanceOfElement(r,HTMLImageElement);if((!c||isDataUrl(r.src))&&(!isInstanceOfElement(r,SVGImageElement)||isDataUrl(r.href.baseVal)))return;const u=c?r.src:r.href.baseVal,l=await resourceToDataURL(u,getMimeType(u),s);await new Promise((u,p)=>{r.onload=u,r.onerror=s.onImageErrorHandler?(...r)=>{try{u(s.onImageErrorHandler(...r))}catch(r){p(r)}}:p;const h=r;h.decode&&(h.decode=u),"lazy"===h.loading&&(h.loading="eager"),c?(r.srcset="",r.src=l):r.href.baseVal=l})}(r,s),await async function embedChildren(r,s){const c=toArray(r.childNodes).map(r=>embedImages(r,s));await Promise.all(c).then(()=>r)}(r,s))}const v={};async function fetchCSS(r){let s=v[r];if(null!=s)return s;const c=await fetch(r);return s={url:r,cssText:await c.text()},v[r]=s,s}async function embedFonts(r,s){let c=r.cssText;const u=/url\(["']?([^"')]+)["']?\)/g,l=(c.match(/url\([^)]+\)/g)||[]).map(async l=>{let p=l.replace(u,"$1");return p.startsWith("https://")||(p=new URL(p,r.url).href),fetchAsDataURL(p,s.fetchRequestInit,({result:r})=>(c=c.replace(l,`url(${r})`),[l,r]))});return Promise.all(l).then(()=>c)}function parseCSS(r){if(null==r)return[];const s=[];let c=r.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const u=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const r=u.exec(c);if(null===r)break;s.push(r[0])}c=c.replace(u,"");const l=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,p=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let r=l.exec(c);if(null===r){if(r=p.exec(c),null===r)break;l.lastIndex=p.lastIndex}else p.lastIndex=l.lastIndex;s.push(r[0])}return s}async function parseWebFontRules(r,s){if(null==r.ownerDocument)throw new Error("Provided element is not within a Document");const c=toArray(r.ownerDocument.styleSheets),u=await async function getCSSRules(r,s){const c=[],u=[];return r.forEach(c=>{if("cssRules"in c)try{toArray(c.cssRules||[]).forEach((r,l)=>{if(r.type===CSSRule.IMPORT_RULE){let p=l+1;const h=fetchCSS(r.href).then(r=>embedFonts(r,s)).then(r=>parseCSS(r).forEach(r=>{try{c.insertRule(r,r.startsWith("@import")?p+=1:c.cssRules.length)}catch(s){console.error("Error inserting rule from remote css",{rule:r,error:s})}})).catch(r=>{console.error("Error loading remote css",r.toString())});u.push(h)}})}catch(l){const p=r.find(r=>null==r.href)||document.styleSheets[0];null!=c.href&&u.push(fetchCSS(c.href).then(r=>embedFonts(r,s)).then(r=>parseCSS(r).forEach(r=>{p.insertRule(r,p.cssRules.length)})).catch(r=>{console.error("Error loading remote stylesheet",r)})),console.error("Error inlining remote css file",l)}}),Promise.all(u).then(()=>(r.forEach(r=>{if("cssRules"in r)try{toArray(r.cssRules||[]).forEach(r=>{c.push(r)})}catch(s){console.error(`Error while reading CSS rules from ${r.href}`,s)}}),c))}(c,s);return function getWebFontRules(r){return r.filter(r=>r.type===CSSRule.FONT_FACE_RULE).filter(r=>shouldEmbed(r.style.getPropertyValue("src")))}(u)}function normalizeFontFamily(r){return r.trim().replace(/["']/g,"")}async function getWebFontCSS(r,s){const c=await parseWebFontRules(r,s),u=function getUsedFonts(r){const s=new Set;return function traverse(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(r=>{s.add(normalizeFontFamily(r))}),Array.from(r.children).forEach(r=>{r instanceof HTMLElement&&traverse(r)})}(r),s}(r);return(await Promise.all(c.filter(r=>u.has(normalizeFontFamily(r.style.fontFamily))).map(r=>{const c=r.parentStyleSheet?r.parentStyleSheet.href:null;return embedResources(r.cssText,c,s)}))).join("\n")}async function toSvg(r,s={}){const{width:c,height:u}=getImageSize(r,s),l=await cloneNode(r,s,!0);await async function embedWebFonts(r,s){const c=null!=s.fontEmbedCSS?s.fontEmbedCSS:s.skipFonts?null:await getWebFontCSS(r,s);if(c){const s=document.createElement("style"),u=document.createTextNode(c);s.appendChild(u),r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s)}}(l,s),await embedImages(l,s),function applyStyle(r,s){const{style:c}=r;s.backgroundColor&&(c.backgroundColor=s.backgroundColor),s.width&&(c.width=`${s.width}px`),s.height&&(c.height=`${s.height}px`);const u=s.style;return null!=u&&Object.keys(u).forEach(r=>{c[r]=u[r]}),r}(l,s);return await nodeToDataURL(l,c,u)}async function toCanvas(r,s={}){const{width:c,height:u}=getImageSize(r,s),l=await toSvg(r,s),h=await createImage(l),m=document.createElement("canvas"),g=m.getContext("2d"),y=s.pixelRatio||function getPixelRatio(){let r,s;try{s=process}catch(r){}const c=s&&s.env?s.env.devicePixelRatio:null;return c&&(r=parseInt(c,10),Number.isNaN(r)&&(r=1)),r||window.devicePixelRatio||1}(),_=s.canvasWidth||c,w=s.canvasHeight||u;return m.width=_*y,m.height=w*y,s.skipAutoScale||function checkCanvasDimensions(r){(r.width>p||r.height>p)&&(r.width>p&&r.height>p?r.width>r.height?(r.height*=p/r.width,r.width=p):(r.width*=p/r.height,r.height=p):r.width>p?(r.height*=p/r.width,r.width=p):(r.width*=p/r.height,r.height=p))}(m),m.style.width=`${_}`,m.style.height=`${w}`,s.backgroundColor&&(g.fillStyle=s.backgroundColor,g.fillRect(0,0,m.width,m.height)),g.drawImage(h,0,0,m.width,m.height),m}async function toPixelData(r,s={}){const{width:c,height:u}=getImageSize(r,s);return(await toCanvas(r,s)).getContext("2d").getImageData(0,0,c,u).data}async function toPng(r,s={}){return(await toCanvas(r,s)).toDataURL()}async function toJpeg(r,s={}){return(await toCanvas(r,s)).toDataURL("image/jpeg",s.quality||1)}async function toBlob(r,s={}){const c=await toCanvas(r,s),u=await function canvasToBlob(r,s={}){return r.toBlob?new Promise(c=>{r.toBlob(c,s.type?s.type:"image/png",s.quality?s.quality:1)}):new Promise(c=>{const u=window.atob(r.toDataURL(s.type?s.type:void 0,s.quality?s.quality:void 0).split(",")[1]),l=u.length,p=new Uint8Array(l);for(let r=0;r<l;r+=1)p[r]=u.charCodeAt(r);c(new Blob([p],{type:s.type?s.type:"image/png"}))})}(c);return u}async function getFontEmbedCSS(r,s={}){return getWebFontCSS(r,s)}},46313:(r,s,c)=>{var u=c(9535),l=c(33929);r.exports=function _regeneratorAsyncGen(r,s,c,p,h){return new l(u().w(r,s,c,p),h||Promise)},r.exports.__esModule=!0,r.exports.default=r.exports},53051:(r,s,c)=>{var u=c(67114),l=c(9535),p=c(62507),h=c(46313),m=c(33929),g=c(95315),y=c(66961);function _regeneratorRuntime(){"use strict";var s=l(),c=s.m(_regeneratorRuntime),_=(Object.getPrototypeOf?Object.getPrototypeOf(c):c.__proto__).constructor;function n(r){var s="function"==typeof r&&r.constructor;return!!s&&(s===_||"GeneratorFunction"===(s.displayName||s.name))}var w={throw:1,return:2,break:3,continue:3};function a(r){var s,c;return function(u){s||(s={stop:function stop(){return c(u.a,2)},catch:function _catch(){return u.v},abrupt:function abrupt(r,s){return c(u.a,w[r],s)},delegateYield:function delegateYield(r,l,p){return s.resultName=l,c(u.d,y(r),p)},finish:function finish(r){return c(u.f,r)}},c=function t(r,c,l){u.p=s.prev,u.n=s.next;try{return r(c,l)}finally{s.next=u.n}}),s.resultName&&(s[s.resultName]=u.v,s.resultName=void 0),s.sent=u.v,s.next=u.n;try{return r.call(this,s)}finally{u.p=s.prev,u.n=s.next}}}return(r.exports=_regeneratorRuntime=function _regeneratorRuntime(){return{wrap:function wrap(r,c,u,l){return s.w(a(r),c,u,l&&l.reverse())},isGeneratorFunction:n,mark:s.m,awrap:function awrap(r,s){return new u(r,s)},AsyncIterator:m,async:function async(r,s,c,u,l){return(n(s)?h:p)(a(r),s,c,u,l)},keys:g,values:y}},r.exports.__esModule=!0,r.exports.default=r.exports)()}r.exports=_regeneratorRuntime,r.exports.__esModule=!0,r.exports.default=r.exports},58155:r=>{function asyncGeneratorStep(r,s,c,u,l,p,h){try{var m=r[p](h),g=m.value}catch(r){return void c(r)}m.done?s(g):Promise.resolve(g).then(u,l)}r.exports=function _asyncToGenerator(r){return function(){var s=this,c=arguments;return new Promise(function(u,l){var p=r.apply(s,c);function _next(r){asyncGeneratorStep(p,u,l,_next,_throw,"next",r)}function _throw(r){asyncGeneratorStep(p,u,l,_next,_throw,"throw",r)}_next(void 0)})}},r.exports.__esModule=!0,r.exports.default=r.exports},61790:(r,s,c)=>{var u=c(53051)();r.exports=u;try{regeneratorRuntime=u}catch(r){"object"==typeof globalThis?globalThis.regeneratorRuntime=u:Function("r","regeneratorRuntime = r")(u)}},62507:(r,s,c)=>{var u=c(46313);r.exports=function _regeneratorAsync(r,s,c,l,p){var h=u(r,s,c,l,p);return h.next().then(function(r){return r.done?r.value:h.next()})},r.exports.__esModule=!0,r.exports.default=r.exports},66961:(r,s,c)=>{var u=c(10564).default;r.exports=function _regeneratorValues(r){if(null!=r){var s=r["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],c=0;if(s)return s.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length))return{next:function next(){return r&&c>=r.length&&(r=void 0),{value:r&&r[c++],done:!r}}}}throw new TypeError(u(r)+" is not iterable")},r.exports.__esModule=!0,r.exports.default=r.exports},67114:r=>{r.exports=function _OverloadYield(r,s){this.v=r,this.k=s},r.exports.__esModule=!0,r.exports.default=r.exports},85707:(r,s,c)=>{var u=c(45498);r.exports=function _defineProperty(r,s,c){return(s=u(s))in r?Object.defineProperty(r,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):r[s]=c,r},r.exports.__esModule=!0,r.exports.default=r.exports},87861:(r,s,c)=>{var u=c(91270);r.exports=function _inherits(r,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&u(r,s)},r.exports.__esModule=!0,r.exports.default=r.exports},89736:r=>{function _regeneratorDefine(s,c,u,l){var p=Object.defineProperty;try{p({},"",{})}catch(s){p=0}r.exports=_regeneratorDefine=function regeneratorDefine(r,s,c,u){if(s)p?p(r,s,{value:c,enumerable:!u,configurable:!u,writable:!u}):r[s]=c;else{var l=function o(s,c){_regeneratorDefine(r,s,function(r){return this._invoke(s,c,r)})};l("next",0),l("throw",1),l("return",2)}},r.exports.__esModule=!0,r.exports.default=r.exports,_regeneratorDefine(s,c,u,l)}r.exports=_regeneratorDefine,r.exports.__esModule=!0,r.exports.default=r.exports},91270:r=>{function _setPrototypeOf(s,c){return r.exports=_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},r.exports.__esModule=!0,r.exports.default=r.exports,_setPrototypeOf(s,c)}r.exports=_setPrototypeOf,r.exports.__esModule=!0,r.exports.default=r.exports},95315:r=>{r.exports=function _regeneratorKeys(r){var s=Object(r),c=[];for(var u in s)c.unshift(u);return function e(){for(;c.length;)if((u=c.pop())in s)return e.value=u,e.done=!1,e;return e.done=!0,e}},r.exports.__esModule=!0,r.exports.default=r.exports},96784:r=>{r.exports=function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}},r.exports.__esModule=!0,r.exports.default=r.exports}},s={};function __webpack_require__(c){var u=s[c];if(void 0!==u)return u.exports;var l=s[c]={exports:{}};return r[c](l,l.exports,__webpack_require__),l.exports}__webpack_require__.d=(r,s)=>{for(var c in s)__webpack_require__.o(s,c)&&!__webpack_require__.o(r,c)&&Object.defineProperty(r,c,{enumerable:!0,get:s[c]})},__webpack_require__.o=(r,s)=>Object.prototype.hasOwnProperty.call(r,s),__webpack_require__.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},(()=>{"use strict";var r=__webpack_require__(96784),s=r(__webpack_require__(61790)),c=r(__webpack_require__(58155)),u=r(__webpack_require__(85707)),l=r(__webpack_require__(39805)),p=r(__webpack_require__(40989)),h=r(__webpack_require__(15118)),m=r(__webpack_require__(29402)),g=r(__webpack_require__(41621)),y=r(__webpack_require__(87861)),_=__webpack_require__(45549);function ownKeys(r,s){var c=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);s&&(u=u.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),c.push.apply(c,u)}return c}function _isNativeReflectConstruct(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(r){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!r})()}var w=function(r){function Screenshot(){return(0,l.default)(this,Screenshot),function _callSuper(r,s,c){return s=(0,m.default)(s),(0,h.default)(r,_isNativeReflectConstruct()?Reflect.construct(s,c||[],(0,m.default)(r).constructor):s.apply(r,c))}(this,Screenshot,arguments)}return(0,y.default)(Screenshot,r),(0,p.default)(Screenshot,[{key:"getDefaultSettings",value:function getDefaultSettings(){return function _objectSpread(r){for(var s=1;s<arguments.length;s++){var c=null!=arguments[s]?arguments[s]:{};s%2?ownKeys(Object(c),!0).forEach(function(s){(0,u.default)(r,s,c[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(c)):ownKeys(Object(c)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(c,s))})}return r}({timeout:15e3,render_timeout:5e3,image_quality:.15,image_placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="},ElementorScreenshotConfig)}},{key:"getDefaultElements",value:function getDefaultElements(){return{$elementor:jQuery(ElementorScreenshotConfig.selector)}}},{key:"onInit",value:function onInit(){var r=this;return function _superPropGet(r,s,c,u){var l=(0,g.default)((0,m.default)(1&u?r.prototype:r),s,c);return 2&u&&"function"==typeof l?function(r){return l.apply(c,r)}:l}(Screenshot,"onInit",this,3)([]),this.timeoutTimer=setTimeout(function(){r.screenshotFailed(new Error("Screenshot timeout reached"))},this.getSettings("timeout")),this.captureScreenshot()}},{key:"captureScreenshot",value:function captureScreenshot(){var r=this;return Promise.resolve().then(function(){return r.createImage()}).then(function(s){return r.save(s)}).then(function(s){return r.screenshotSucceed(s)}).catch(function(s){return r.screenshotFailed(s)})}},{key:"createImage",value:(w=(0,c.default)(s.default.mark(function _callee(){var r,c,u,l,p,h,m=this;return s.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=new Promise(function(r){window.addEventListener("load",function(){return r()})}),c=new Promise(function(r){setTimeout(function(){return r()},m.getSettings("render_timeout"))}),s.next=1,Promise.race([r,c]);case 1:if((u=this.elements.$elementor).length||(u=jQuery(ElementorScreenshotConfig.selector)),u.length||(u=jQuery("body > div.elementor:not(.elementor-location-header):not(.elementor-location-footer)")),u.length){s.next=2;break}throw new Error("Elementor container not found. Selector: "+ElementorScreenshotConfig.selector);case 2:return this.preprocessLazyImages(u),l=window.getComputedStyle(document.body),p=l.backgroundColor,s.next=3,(0,_.toCanvas)(u[0],{quality:this.getSettings("image_quality"),imagePlaceholder:this.getSettings("image_placeholder"),backgroundColor:p||null,style:{transform:"scale(1)",transformOrigin:"top left"}});case 3:return h=s.sent,s.abrupt("return",h.toDataURL("image/webp",this.getSettings("image_quality")));case 4:case"end":return s.stop()}},_callee,this)})),function createImage(){return w.apply(this,arguments)})},{key:"preprocessLazyImages",value:function preprocessLazyImages(r){r.find("img[data-src], img.swiper-lazy, img.lazy").each(function(r,s){var c=jQuery(s);c.attr("data-src")&&(c.attr("src",c.attr("data-src")),c.removeAttr("data-src")),c.removeClass("swiper-lazy lazy swiper-slide-image"),c.removeAttr("loading"),c.removeAttr("data-srcset")})}},{key:"save",value:function save(r){var s=this.getSaveAction(),c=s.key,l=s.action,p=(0,u.default)((0,u.default)({},c,this.getSettings(c)),"screenshot",r);return new Promise(function(r,s){if("kit_id"===c)return r(p.screenshot);elementorCommon.ajax.addRequest(l,{data:p,success:function success(s){return r(s)},error:function error(){return s()}})})}},{key:"markAsFailed",value:function markAsFailed(r){var s=this;return new Promise(function(c,u){var l=s.getSettings("template_id"),p=s.getSettings("post_id");if(s.getSettings("kit_id"))c();else{var h=l?"template_screenshot_failed":"screenshot_failed",m=l?{template_id:l,error:r.message||r.toString()}:{post_id:p};elementorCommon.ajax.addRequest(h,{data:m,success:function success(){return c()},error:function error(){return u()}})}})}},{key:"screenshotSucceed",value:function screenshotSucceed(r){this.screenshotDone(!0,r)}},{key:"screenshotFailed",value:function screenshotFailed(r){var s=this;this.markAsFailed(r).then(function(){return s.screenshotDone(!1)})}},{key:"screenshotDone",value:function screenshotDone(r){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(this.timeoutTimer),this.timeoutTimer=null;var c=this.getSaveAction(),u=c.message,l=c.key;window.parent.postMessage({name:u,success:r,id:this.getSettings(l),imageUrl:s},"*")}},{key:"getSaveAction",value:function getSaveAction(){var r=this.getSettings();return r.kit_id?{message:"kit-screenshot-done",action:"update_kit_preview",key:"kit_id"}:r.template_id?{message:"library/capture-screenshot-done",action:"save_template_screenshot",key:"template_id"}:{message:"capture-screenshot-done",action:"screenshot_save",key:"post_id"}}}]);var w}(elementorModules.ViewModule);jQuery(function(){new w})})()})();