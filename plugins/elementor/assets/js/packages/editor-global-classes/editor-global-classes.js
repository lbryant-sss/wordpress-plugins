/*! For license information please see editor-global-classes.js.LICENSE.txt */
!function(){"use strict";var e={react:function(e){e.exports=window.React},"@elementor/editor":function(e){e.exports=window.elementorV2.editor},"@elementor/editor-current-user":function(e){e.exports=window.elementorV2.editorCurrentUser},"@elementor/editor-documents":function(e){e.exports=window.elementorV2.editorDocuments},"@elementor/editor-editing-panel":function(e){e.exports=window.elementorV2.editorEditingPanel},"@elementor/editor-panels":function(e){e.exports=window.elementorV2.editorPanels},"@elementor/editor-props":function(e){e.exports=window.elementorV2.editorProps},"@elementor/editor-styles":function(e){e.exports=window.elementorV2.editorStyles},"@elementor/editor-styles-repository":function(e){e.exports=window.elementorV2.editorStylesRepository},"@elementor/editor-ui":function(e){e.exports=window.elementorV2.editorUi},"@elementor/editor-v1-adapters":function(e){e.exports=window.elementorV2.editorV1Adapters},"@elementor/http":function(e){e.exports=window.elementorV2.http},"@elementor/icons":function(e){e.exports=window.elementorV2.icons},"@elementor/query":function(e){e.exports=window.elementorV2.query},"@elementor/store":function(e){e.exports=window.elementorV2.store},"@elementor/ui":function(e){e.exports=window.elementorV2.ui},"@elementor/utils":function(e){e.exports=window.elementorV2.utils},"@wordpress/i18n":function(e){e.exports=window.wp.i18n}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){n.r(r),n.d(r,{init:function(){return ge}});var e=n("@elementor/editor"),t=n("@elementor/editor-editing-panel"),o=n("@elementor/editor-panels"),a=n("@elementor/editor-styles-repository"),l=n("@elementor/editor-v1-adapters"),i=n("@elementor/store"),s=n("react"),c=n("@elementor/editor-documents"),d=n("@elementor/ui"),m=n("@wordpress/i18n"),p=n("@elementor/editor-ui"),u=n("@elementor/icons"),g=n("@elementor/query"),y=n("@elementor/editor-props"),h=n("@elementor/editor-styles"),b=n("@elementor/utils"),_=n("@elementor/http"),E=n("@elementor/editor-current-user"),v=(0,b.createError)({code:"global_class_not_found",message:"Global class not found."}),f=(0,b.createError)({code:"global_class_label_already_exists",message:"Class with this name already exists."}),w="globalClasses",x=(0,i.__createSlice)({name:w,initialState:{items:{},order:[],isDirty:!1},reducers:{init(e,{payload:t}){e.items=t.items,e.order=t.order,e.isDirty=!1},add(e,{payload:t}){e.items[t.id]=t,e.order.unshift(t.id),e.isDirty=!0},delete(e,{payload:t}){e.items=Object.fromEntries(Object.entries(e.items).filter((([e])=>e!==t))),e.order=e.order.filter((e=>e!==t)),e.isDirty=!0},setOrder(e,{payload:t}){e.order=t,e.isDirty=!0},update(e,{payload:t}){const n={...e.items[t.style.id],...t.style};e.items[t.style.id]=n,e.isDirty=!0},updateProps(e,{payload:t}){const n=e.items[t.id];if(!n)throw new v({context:{styleId:t.id}});const r=(0,h.getVariantByMeta)(n,t.meta);r?r.props=(0,y.mergeProps)(r.props,t.props):n.variants.push({meta:t.meta,props:t.props}),e.isDirty=!0},setPristine(e){e.isDirty=!1}}}),S=e=>e[w].order,C=e=>e[w].items,D=(0,i.__createSelector)(C,S,((e,t)=>t.map((t=>e[t])))),P=e=>e.globalClasses.isDirty,T=()=>(0,i.__useSelector)(P),I="/global-classes",M={all:()=>(0,_.httpService)().get("elementor/v1"+I,{params:{context:"preview"}}),publish:e=>(0,_.httpService)().put("elementor/v1"+I,e,{params:{context:"frontend"}}),saveDraft:e=>(0,_.httpService)().put("elementor/v1"+I,e,{params:{context:"preview"}})};async function A({context:e}){const t=(0,i.__getState)().globalClasses,n={items:t.items,order:t.order};"preview"!==e?(await M.publish(n),(0,i.__dispatch)(x.actions.setPristine())):await M.saveDraft(n)}var V=()=>{const[e,t]=(0,E.useSuppressedMessage)("global-class-manager"),[n,r]=(0,s.useState)(!e);return s.createElement(p.IntroductionModal,{open:n,title:(0,m.__)("Class Manager","elementor"),handleClose:e=>{e||t(),r(!1)}},s.createElement(d.Image,{sx:{width:"100%",aspectRatio:"16 / 9"},src:"https://assets.elementor.com/packages/v1/images/class-manager-intro.svg",alt:""}),s.createElement(k,null))},k=()=>s.createElement(d.Box,{p:3},s.createElement(d.Typography,{variant:"body2"},(0,m.__)("The Class Manager lets you see all the classes you've created, plus adjust their priority, rename them, and delete unused classes to keep your CSS structured.","elementor")),s.createElement("br",null),s.createElement(d.Typography,{variant:"body2"},(0,m.__)("Remember, when editing an item within a specific class, any changes you make will apply across all elements in that class.","elementor"))),O=!1,B=({sx:e,...t})=>s.createElement(u.ColorSwatchIcon,{sx:{transform:"rotate(90deg)",...e},...t}),j=(0,s.createContext)(null),z=({children:e})=>{const[t,n]=(0,s.useState)(null);return s.createElement(j.Provider,{value:{openDialog:e=>{n(e)},closeDialog:()=>{n(null)},dialogProps:t}},e,!!t&&s.createElement(F,{...t}))},L="delete-class-dialog",F=({label:e,id:t})=>{const{closeDialog:n}=R();return s.createElement(d.Dialog,{open:!0,onClose:n,"aria-labelledby":L,maxWidth:"xs"},s.createElement(d.DialogTitle,{id:L,display:"flex",alignItems:"center",gap:1,sx:{lineHeight:1}},s.createElement(u.AlertOctagonFilledIcon,{color:"error"}),(0,m.__)("Delete this class?","elementor")),s.createElement(d.DialogContent,null,s.createElement(d.DialogContentText,{variant:"body2",color:"textPrimary"},(0,m.__)("Deleting","elementor"),s.createElement(d.Typography,{variant:"subtitle2",component:"span"}," ",e," "),(0,m.__)("will permanently remove it from your project and may affect the design across all elements using it. This action cannot be undone.","elementor"))),s.createElement(d.DialogActions,null,s.createElement(d.Button,{color:"secondary",onClick:n},(0,m.__)("Not now","elementor")),s.createElement(d.Button,{variant:"contained",color:"error",onClick:()=>{(e=>{(0,i.__dispatch)(x.actions.delete(e)),O=!0})(t),n()}},(0,m.__)("Delete","elementor"))))},R=()=>{const e=(0,s.useContext)(j);if(!e)throw new Error("useDeleteConfirmation must be used within a DeleteConfirmationProvider");return e},W=e=>s.createElement(d.UnstableSortableProvider,{restrictAxis:!0,variant:"static",dragPlaceholderStyle:{opacity:"1"},...e}),$=e=>s.createElement(H,{...e,role:"button",className:"class-item-sortable-trigger"},s.createElement(u.GripVerticalIcon,{fontSize:"tiny"})),G=({children:e,id:t,...n})=>s.createElement(d.UnstableSortableItem,{...n,id:t,render:({itemProps:t,isDragged:n,triggerProps:r,itemStyle:o,triggerStyle:a,dropIndicationStyle:l,showDropIndication:i,isDragOverlay:c,isDragPlaceholder:m})=>s.createElement(d.Box,{...t,style:o,component:"li",role:"listitem",sx:{backgroundColor:c?"background.paper":void 0}},e({itemProps:t,isDragged:n,triggerProps:r,itemStyle:o,triggerStyle:a,isDragPlaceholder:m}),i&&s.createElement(U,{style:l}))}),H=(0,d.styled)("div")((({theme:e})=>({position:"absolute",left:0,top:"50%",transform:`translate( -${e.spacing(1.5)}, -50% )`,color:e.palette.action.active}))),U=(0,d.styled)(d.Box)`
	width: 100%;
	height: 1px;
	background-color: ${({theme:e})=>e.palette.text.primary};
`,N=({disabled:e})=>{const t=(0,i.__useSelector)(D),n=(0,i.__useDispatch)(),[r,o]=Y();return t?.length?s.createElement(z,null,s.createElement(d.List,{sx:{display:"flex",flexDirection:"column",gap:.5}},s.createElement(W,{value:r,onChange:o},t?.map((({id:t,label:r})=>{const o=e=>{n(x.actions.update({style:{id:t,label:e}}))};return s.createElement(G,{key:t,id:t},(({isDragged:n,isDragPlaceholder:a,triggerProps:l,triggerStyle:i})=>s.createElement(q,{id:t,label:r,renameClass:o,selected:n,disabled:e||a,sortableTriggerProps:{...l,style:i}})))}))))):s.createElement(J,null)},Y=()=>{const e=(0,i.__useDispatch)();return[(0,i.__useSelector)(S),t=>{e(x.actions.setOrder(t))}]},q=({id:e,label:t,renameClass:n,selected:r,disabled:o,sortableTriggerProps:a})=>{const{ref:l,openEditMode:i,isEditing:c,error:g,getProps:y}=(0,p.useEditable)({value:t,onSubmit:n,validation:ee}),{openDialog:h}=R(),b=(0,d.usePopupState)({variant:"popover",disableAutoFocus:!0}),_=(r||b.isOpen)&&!o;return s.createElement(s.Fragment,null,s.createElement(X,{dense:!0,disableGutters:!0,showActions:_||c,shape:"rounded",onDoubleClick:i,selected:_,disabled:o,focusVisibleClassName:"visible-class-item"},s.createElement($,{...a}),s.createElement(Q,{isActive:c,isError:!!g},c?s.createElement(p.EditableField,{ref:l,error:g,as:d.Typography,variant:"caption",...y()}):s.createElement(p.EllipsisWithTooltip,{title:t,as:d.Typography,variant:"caption"})),s.createElement(d.Tooltip,{placement:"top",className:"class-item-more-actions",title:(0,m.__)("More actions","elementor")},s.createElement(d.IconButton,{size:"tiny",...(0,d.bindTrigger)(b),"aria-label":"More actions"},s.createElement(u.DotsVerticalIcon,{fontSize:"tiny"})))),s.createElement(d.Menu,{...(0,d.bindMenu)(b),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},s.createElement(p.MenuListItem,{sx:{minWidth:"160px"},onClick:()=>{b.close(),i()}},s.createElement(d.Typography,{variant:"caption",sx:{color:"text.primary"}},(0,m.__)("Rename","elementor"))),s.createElement(p.MenuListItem,{onClick:()=>{b.close(),h({id:e,label:t})}},s.createElement(d.Typography,{variant:"caption",sx:{color:"error.light"}},(0,m.__)("Delete","elementor")))))},X=(0,d.styled)(d.ListItemButton,{shouldForwardProp:e=>!["showActions"].includes(e)})((({showActions:e})=>`\n\tmin-height: 36px;\n\n\t&.visible-class-item {\n\t\tbox-shadow: none !important;\n\t}\n\n\t.class-item-more-actions, .class-item-sortable-trigger {\n\t\tvisibility: ${e?"visible":"hidden"};\n\t}\n\n\t.class-item-sortable-trigger {\n\t\tvisibility: ${e?"visible":"hidden"};\n\t}\n\n\t&:hover&:not(:disabled) {\n\t\t.class-item-more-actions, .class-item-sortable-trigger  {\n\t\t\tvisibility: visible;\n\t\t}\n\t}\n`)),J=()=>s.createElement(d.Stack,{alignItems:"center",gap:1.5,pt:10,px:.5,maxWidth:"260px",margin:"auto"},s.createElement(B,{fontSize:"large"}),s.createElement(K,{variant:"subtitle2",component:"h2",color:"text.secondary"},(0,m.__)("There are no global classes yet.","elementor")),s.createElement(d.Typography,{align:"center",variant:"caption",color:"text.secondary"},(0,m.__)("CSS classes created in the editor panel will appear here. Once they are available, you can arrange their hierarchy, rename them, or delete them as needed.","elementor"))),K=(0,d.styled)(d.Typography)((({theme:e,variant:t})=>({"&.MuiTypography-root":{...e.typography[t]}}))),Q=(0,d.styled)(d.Box,{shouldForwardProp:e=>!["isActive","isError"].includes(e)})((({theme:e,isActive:t,isError:n})=>({display:"flex",width:"100%",flexGrow:1,borderRadius:e.spacing(.5),border:Z({isActive:t,isError:n,theme:e}),padding:`0 ${e.spacing(1)}`,marginLeft:t?e.spacing(1):0,minWidth:0}))),Z=({isActive:e,isError:t,theme:n})=>t?`2px solid ${n.palette.error.main}`:e?`2px solid ${n.palette.secondary.main}`:"none",ee=e=>{const t=(0,a.validateStyleLabel)(e,"rename");return t.isValid?null:t.errorMessage},te="save-changes-dialog",ne=({children:e,onClose:t})=>s.createElement(d.Dialog,{open:!0,onClose:t,"aria-labelledby":te,maxWidth:"xs"},e);ne.Title=({children:e})=>s.createElement(d.DialogTitle,{id:te,display:"flex",alignItems:"center",gap:1,sx:{lineHeight:1}},s.createElement(u.AlertTriangleFilledIcon,{color:"secondary"}),e),ne.Content=({children:e})=>s.createElement(d.DialogContent,null,e),ne.ContentText=e=>s.createElement(d.DialogContentText,{variant:"body2",color:"textPrimary",display:"flex",flexDirection:"column",...e}),ne.Actions=({actions:e})=>{const[t,n]=(0,s.useState)(!1),{cancel:r,confirm:o}=e;return s.createElement(d.DialogActions,null,s.createElement(d.Button,{variant:"text",color:"secondary",onClick:r.action},r.label),s.createElement(d.Button,{variant:"contained",color:"secondary",onClick:async()=>{n(!0),await o.action(),n(!1)},loading:t},o.label))};var re=()=>{const[e,t]=(0,s.useState)(!1);return{isOpen:e,open:()=>t(!0),close:()=>t(!1)}},oe="global-classes-manager",{panel:ae,usePanelActions:le}=(0,o.__createPanel)({id:oe,component:function(){const e=T(),{close:t}=le(),{open:n,close:r,isOpen:a}=re(),{mutateAsync:l,isPending:i}=de();return ce(),s.createElement(p.ThemeProvider,null,s.createElement(d.ErrorBoundary,{fallback:s.createElement(se,null)},s.createElement(o.Panel,null,s.createElement(o.PanelHeader,null,s.createElement(d.Stack,{p:1,pl:2,width:"100%",direction:"row",alignItems:"center"},s.createElement(o.PanelHeaderTitle,{sx:{display:"flex",alignItems:"center",gap:.5}},s.createElement(B,{fontSize:"inherit"}),(0,m.__)("Class Manager","elementor")),s.createElement(ie,{sx:{marginLeft:"auto"},disabled:i,onClose:()=>{e?n():t()}}))),s.createElement(o.PanelBody,{px:2},s.createElement(N,{disabled:i})),s.createElement(o.PanelFooter,null,s.createElement(d.Button,{fullWidth:!0,size:"small",color:"global",variant:"contained",onClick:l,disabled:!e,loading:i},(0,m.__)("Save changes","elementor"))))),s.createElement(V,null),a&&s.createElement(ne,null,s.createElement(ne.Title,null,(0,m.__)("You have unsaved changes","elementor")),s.createElement(ne.Content,null,s.createElement(ne.ContentText,null,(0,m.__)("You have unsaved changes in the Class Manager.","elementor")),s.createElement(ne.ContentText,null,(0,m.__)("To avoid losing your updates, save your changes before leaving.","elementor"))),s.createElement(ne.Actions,{actions:{cancel:{label:(0,m.__)("Cancel","elementor"),action:r},confirm:{label:(0,m.__)("Save & Continue","elementor"),action:async()=>{await l(),r(),t()}}}})))},allowedEditModes:["edit",oe],onOpen:()=>{(0,l.changeEditMode)(oe),function(){const e=window;e.$e?.components?.get?.("panel")?.blockUserInteractions?.()}()},onClose:()=>{(0,l.changeEditMode)("edit"),function(){const e=window;e.$e?.components?.get?.("panel")?.unblockUserInteractions?.()}()}}),ie=({onClose:e,...t})=>s.createElement(d.IconButton,{size:"small",color:"secondary",onClick:e,"aria-label":"Close",...t},s.createElement(u.XIcon,{fontSize:"small"})),se=()=>s.createElement(d.Box,{role:"alert",sx:{minHeight:"100%",p:2}},s.createElement(d.Alert,{severity:"error",sx:{mb:2,maxWidth:400,textAlign:"center"}},s.createElement("strong",null,(0,m.__)("Something went wrong","elementor")))),ce=()=>{const e=T();(0,s.useEffect)((()=>{const t=t=>{e&&t.preventDefault()};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}}),[e])},de=()=>(0,g.useMutation)({mutationFn:()=>A({context:"frontend"}),onSuccess:async()=>{(0,c.setDocumentModifiedStatus)(!1),O&&await(async()=>{await(()=>{const e=(0,c.getCurrentDocument)();return(0,c.getV1DocumentsManager)().invalidateCache(),(0,l.__privateRunCommand)("editor/documents/switch",{id:e?.id,shouldScroll:!1,shouldNavigateToDefaultRoute:!1})})(),O=!1})()}}),me=()=>{const e=(0,c.__useActiveDocument)(),{open:t}=le(),{save:n}=(0,c.__useActiveDocumentActions)(),{open:r,close:o,isOpen:a}=re();return s.createElement(s.Fragment,null,s.createElement(d.Tooltip,{title:(0,m.__)("Class Manager","elementor"),placement:"top"},s.createElement(d.IconButton,{size:"tiny",onClick:()=>{e?.isDirty?r():t()},sx:{marginInlineEnd:-.75}},s.createElement(B,{fontSize:"tiny"}))),a&&s.createElement(ne,null,s.createElement(ne.Title,null,(0,m.__)("You have unsaved changes","elementor")),s.createElement(ne.Content,null,s.createElement(ne.ContentText,{sx:{mb:2}},(0,m.__)("To open the Class Manager, save your page first. You can't continue without saving.","elementor"))),s.createElement(ne.Actions,{actions:{cancel:{label:(0,m.__)("Stay here","elementor"),action:o},confirm:{label:(0,m.__)("Save & Continue","elementor"),action:async()=>{await n(),o(),t()}}}})))};function pe(){const e=(0,i.__useDispatch)();return(0,s.useEffect)((()=>{M.all().then((t=>{const{data:n,meta:r}=t.data;e(x.actions.init({items:n,order:r.order}))}))}),[e]),null}var ue=(0,a.createStylesProvider)({key:"global-classes",priority:30,limit:50,labels:{singular:(0,m.__)("class","elementor"),plural:(0,m.__)("classes","elementor")},subscribe:e=>(0,i.__subscribeWithSelector)((e=>e.globalClasses),e),actions:{all:()=>D((0,i.__getState)()),get:e=>((e,t)=>e[w].items[t]??null)((0,i.__getState)(),e),create:e=>{const t=C((0,i.__getState)());if(Object.values(t).map((e=>e.label)).includes(e))throw new f({context:{label:e}});const n=Object.keys(t),r=(0,h.generateId)("g-",n);return(0,i.__dispatch)(x.actions.add({id:r,type:"class",label:e,variants:[]})),r},update:e=>{(0,i.__dispatch)(x.actions.update({style:e}))},delete:e=>{(0,i.__dispatch)(x.actions.delete(e))},updateProps:e=>{(0,i.__dispatch)(x.actions.updateProps({id:e.id,meta:e.meta,props:e.props}))}}});function ge(){(0,i.__registerSlice)(x),(0,o.__registerPanel)(ae),a.stylesRepository.register(ue),(0,e.injectIntoLogic)({id:"global-classes-populate-store",component:pe}),(0,t.injectIntoClassSelectorActions)({id:"global-classes-manager-button",component:me}),(0,l.__privateListenTo)((0,l.v1ReadyEvent)(),(()=>{!function(){const e=(0,i.__subscribeWithSelector)(P,(()=>{P((0,i.__getState)())&&(0,c.setDocumentModifiedStatus)(!0)}));(0,l.registerDataHook)("after","document/save/save",(e=>A({context:"publish"===e.status?"frontend":"preview"})))}()}))}}(),(window.elementorV2=window.elementorV2||{}).editorGlobalClasses=r}(),window.elementorV2.editorGlobalClasses?.init?.();