(()=>{"use strict";var e,t,a,o={89912:(e,t,a)=>{a.d(t,{useKeyDownEffect:()=>i});a(96540),a(81454);var o=a(64746),n=a(77200),r=a(21976);function l(e,t,a,l,i){const{keys:s}=(0,o.useContext)(n.default),c=(0,o.useBatchingCallback)(l,i||[]);(0,o.useEffect)((()=>{const o=(0,r.getNodeFromRefOrNode)(e);if(!o)return;if(o.nodeType!==Node.ELEMENT_NODE&&o.nodeType!==Node.DOCUMENT_NODE)throw new Error("only an element or a document node can be used");const n=(0,r.resolveKeySpec)(s,t);if(1===n.key.length&&""===n.key[0])return;const l=(0,r.getOrCreateMousetrap)(o),i=(0,r.createKeyHandler)(o,n,c);return l.bind(n.key,i,a),()=>{l.unbind(n.key,a)}}),[c,s])}function i(e,t,a,o){l(e,t,"keydown",a,o)}},21976:(e,t,a)=>{a.d(t,{createKeyHandler:()=>u,getNodeFromRefOrNode:()=>c,getOrCreateMousetrap:()=>s,prettifyShortcut:()=>f,resolveKeySpec:()=>d});a(98992),a(30670),a(81454);var o=a(6411),n=a.n(o);const r="__WEB_STORIES_MT__",l=["submit","button","checkbox","radio","image","file","range","reset","hidden"],i=["submit","button","checkbox","radio","image","file","reset"];function s(e){return e[r]||(e[r]=new(n())(e))}function c(e){return e&&"current"in e?e.current:e}function d(e,t){const a="string"==typeof t||Array.isArray(t)?{key:t}:t,{key:o,shift:n=!1,repeat:r=!0,clickable:l=!0,editable:i=!1,dialog:s=!1,allowDefault:c=!1}=a,d=function(e,t){if(!t)return e;return e.concat(e.map((e=>`shift+${e}`)))}((new Array).concat(o).flatMap((t=>e[t]||t)),n);return{key:d,shift:n,clickable:l,repeat:r,editable:i,dialog:s,allowDefault:c}}function u(e,{repeat:t,editable:a,clickable:o,dialog:n,allowDefault:r=!1},s){return c=>{const{repeat:d,target:u}=c;if((t||!d)&&(a||!function({tagName:e,isContentEditable:t,type:a,...o}){if("readOnly"in o&&!0===o.readOnly)return!1;if(t||"TEXTAREA"===e)return!0;if("INPUT"===e)return!l.includes(a);return!1}(u))&&(o||!function({tagName:e,type:t}){if(["BUTTON","A"].includes(e))return!0;if("INPUT"===e)return i.includes(t);return!1}(u))&&(n||!function(e,t){if(1!==e.nodeType)return!1;const a=e.closest('dialog,[role="dialog"]');return a&&t!==a&&t.contains(a)}(u,e)))return s(c),r}}function p(){const{platform:e}=window.navigator;return e.includes("Mac")||["iPad","iPhone"].includes(e)}function m(e){const t=p();return{alt:t?"⌥":"Alt",ctrl:t?"^":"Ctrl",mod:t?"⌘":"Ctrl",cmd:"⌘",shift:t?"⇧":"Shift"}[e]||e}function f(e){const t=p()?"":"+";return e.toLowerCase().replace("alt",m("alt")).replace("ctrl",m("ctrl")).replace("mod",m("mod")).replace("cmd",m("cmd")).replace("shift",m("shift")).replace("left","←").replace("up","↑").replace("right","→").replace("down","↓").replace("delete","⌫").replace("enter","⏎").split("+").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(t)}},37699:(e,t,a)=>{a.d(t,{Placement:()=>n,PopupContainer:()=>l,RTL_PLACEMENT:()=>r});var o=a(72240);let n=function(e){return e.Top="top",e.TopStart="top-start",e.TopEnd="top-end",e.Bottom="bottom",e.BottomStart="bottom-start",e.BottomEnd="bottom-end",e.Right="right",e.RightStart="right-start",e.RightEnd="right-end",e.Left="left",e.LeftStart="left-start",e.LeftEnd="left-end",e}({});const r={[n.Top]:n.Top,[n.TopStart]:n.TopStart,[n.TopEnd]:n.TopEnd,[n.Bottom]:n.Bottom,[n.BottomEnd]:n.BottomEnd,[n.BottomStart]:n.BottomStart,[n.Right]:n.Left,[n.RightStart]:n.LeftStart,[n.RightEnd]:n.LeftEnd,[n.Left]:n.Right,[n.LeftStart]:n.RightStart,[n.LeftEnd]:n.RightEnd},l=o.default.div.withConfig({displayName:"constants__PopupContainer",componentId:"sc-1f3rwe8-0"})(["/*! @noflip */ "," /*! @noflip */ left:0px;top:0px;position:fixed;",";max-height:",";"],(({$offset:{x:e,y:t,width:a},fillWidth:o,transforms:n="",zIndex:r,maxWidth:l})=>{const i={};return o&&(l?i.minWidth=`${a}px`:i.width=`${a}px`),l&&!i.width&&(i.maxWidth=`${l}px`),{transform:`translate(${e}px, ${t}px) ${n}`,...i,zIndex:r}}),(({noOverFlow:e})=>e?"":"overflow-y: auto;"),(({topOffset:e=0})=>`calc(100vh - ${e}px)`))},40341:(e,t,a)=>{a.d(t,{DEFAULT_ARIA_CLEAR_LABEL:()=>l,DEFAULT_ARIA_INPUT_LABEL:()=>i,DEFAULT_PLACEHOLDER:()=>r,DEFAULT_POPUP_FILL_WIDTH:()=>n,Z_INDEX:()=>s});var o=a(83278);const n=276,r=(0,o.__)("Search","web-stories"),l=(0,o.__)("Clear Search","web-stories"),i=(0,o.__)("Search","web-stories"),s={CLEAR_BUTTON:5}},63408:(e,t,a)=>{a.d(t,{fullSizeAbsolute:()=>n});var o=a(72240);const n=(0,o.css)(["position:absolute;top:0;right:0;bottom:0;left:0;"]);(0,o.css)(["position:relative;top:0;left:0;height:100%;width:100%;"])},64746:(e,t,a)=>{a.d(t,{Fragment:()=>r.Fragment,StrictMode:()=>r.StrictMode,cloneElement:()=>r.cloneElement,createContext:()=>n.createContext,createElement:()=>r.createElement,createPortal:()=>l.createPortal,createRef:()=>r.createRef,forwardRef:()=>r.forwardRef,identity:()=>n.identity,memo:()=>r.memo,render:()=>l.render,useBatchingCallback:()=>i.default,useCallback:()=>r.useCallback,useCombinedRefs:()=>s.default,useContext:()=>n.useContext,useContextReact:()=>r.useContext,useContextSelector:()=>c.default,useDebouncedCallback:()=>o.useDebouncedCallback,useEffect:()=>r.useEffect,useFocusOut:()=>d.default,useLayoutEffect:()=>r.useLayoutEffect,useMemo:()=>r.useMemo,usePrevious:()=>u.default,useReducer:()=>r.useReducer,useRef:()=>r.useRef,useResizeEffect:()=>p.default,useState:()=>r.useState});var o=a(81591),n=(a(7997),a(78546)),r=a(96540),l=a(40961),i=a(10621),s=a(28379),c=a(33758),d=a(43118),u=a(73095),p=a(83855);a(65848);a(18135)},67537:(e,t,a)=>{a.d(t,{disableTracking:()=>l,enableTracking:()=>n.default,getTimeTracker:()=>m.default,initializeTracking:()=>o.default,trackClick:()=>s.default,trackError:()=>c.default,trackEvent:()=>d.default,trackScreenView:()=>p});var o=a(37172),n=a(53843),r=a(79532);const l=function(){r.config.trackingEnabled=!1};var i=a(11891),s=a(17624),c=a(39782),d=a(37620);var u=a(41718);const p=async function(e){if(!await(0,i.default)())return Promise.resolve();const t={screen_name:e};return(0,u.default)("screen_view",t)};var m=a(96306)},58745:(e,t,a)=>{var o={};a.r(o),a.d(o,{createStoryFromTemplate:()=>hi,duplicateStory:()=>_i,fetchStories:()=>fi,getAuthors:()=>yi,getProducts:()=>wi,getTaxonomies:()=>Ei,getTaxonomyTerms:()=>Si,trashStory:()=>gi,updateStory:()=>bi});var n=a(96540);a.p=window.webStories.publicPath;var r=a(83278);for(const e of window?.webStories?.localeData||[])(0,r.setLocaleData)(e);var l=a(65906),i=a(18887),s=a(13154),c=a(61889),d=a(58067),u=a(29971),p=a(95409),m=a(72240),f=a(73478),g=a(76876),b=a(64746);const h=(0,b.createContext)({isRTL:!1,userId:0,locale:{},newStoryURL:"",cdnURL:"",version:"",capabilities:{},canViewDefaultTemplates:!1,flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0},containerId:""});const _=function ConfigProvider({config:e,children:t}){return n.createElement(h.Provider,{value:e},t)};const y=function(e=b.identity){return(0,b.useContextSelector)(h,e)};a(98992),a(3949);var E=a(67537),S=a(85675);const w="creating_story_from_template",v="create_story_from_template_success",T="create_story_from_template_failure",C="loading_stories",I="fetch_stories_success",k="fetch_stories_failure",L="update_story",A="update_story_failure",x="trash_story",O="trash_story_failure",D="duplicate_story",N="duplicate_story_failure",P={error:{},isLoading:!1,stories:{},storiesOrderById:[],totalStoriesByStatus:{},totalPages:null};var R,B;a(17642),a(58004),a(33853),a(45876),a(32475),a(15024),a(31698),a(54520),a(8872);function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},M.apply(null,arguments)}const SvgCompass=({title:e,titleId:t,...a})=>n.createElement("svg",M({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,R||(R=n.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M12.5 3v3M22 12.5h-3M12.5 22v-3M3 12.5h3M12.5 22a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19"})),B||(B=n.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M15.851 8.492a.5.5 0 0 1 .657.657l-2.13 4.967a.5.5 0 0 1-.262.263L9.15 16.508a.5.5 0 0 1-.657-.657l2.13-4.967a.5.5 0 0 1 .262-.263z"}))),U=(0,n.memo)(SvgCompass);var F,z;function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},G.apply(null,arguments)}const SvgHomeWithHeart=({title:e,titleId:t,...a})=>n.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,F||(F=n.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M15.781 10.72a2.44 2.44 0 0 0-2.999-.367 2.5 2.5 0 0 0-.782.748 2.5 2.5 0 0 0-.782-.748 2.45 2.45 0 0 0-2.088-.21 2.47 2.47 0 0 0-1.443 1.375 2.48 2.48 0 0 0 .532 2.687L12 18l3.781-3.795a2.477 2.477 0 0 0 0-3.484"})),z||(z=n.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"m1 11 10.367-8.482a1 1 0 0 1 1.266 0L23 11M4 9v12a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V9"}))),H=(0,n.memo)(SvgHomeWithHeart);var j;function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},V.apply(null,arguments)}const SvgMenu=({title:e,titleId:t,...a})=>n.createElement("svg",V({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,j||(j=n.createElement("path",{fill:"currentColor",d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}))),q=(0,n.memo)(SvgMenu);var W;function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},$.apply(null,arguments)}const SvgMoreVertical=({title:e,titleId:t,...a})=>n.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 4 16","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,W||(W=n.createElement("path",{fill:"currentColor",d:"M2 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}))),K=(0,n.memo)(SvgMoreVertical);var X=a(35382);const Y="open-in-editor-action",J="rename-action",Z="duplicate-action",Q="delete-story-action",ee="copy-story-link",te="open-story-link",ae=[{label:(0,r.__)("Open in editor","web-stories"),value:Y,isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,r.__)("Open in new tab","web-stories"),value:te,isEnabled:e=>Boolean(e?.previewLink)},{label:(0,r.__)("Copy Story URL","web-stories"),value:ee,isEnabled:e=>Boolean(e?.previewLink)},{label:(0,r.__)("Rename","web-stories"),value:J,separator:"top",isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,r.__)("Duplicate","web-stories"),value:Z,isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,r.__)("Delete Story","web-stories"),value:Q,separator:"top",isEnabled:e=>Boolean(e?.capabilities?.hasDeleteAction)}],oe={ASC:"asc",DESC:"desc"},ne={NAME:"title",DATE_CREATED:"date",LAST_MODIFIED:"modified",CREATED_BY:"story_author"},re={orderby:ne,order:oe},le={[ne.NAME]:oe.ASC,[ne.DATE_CREATED]:oe.DESC,[ne.LAST_MODIFIED]:oe.DESC,[ne.CREATED_BY]:oe.ASC},ie=[{label:(0,r.__)("Name","web-stories"),value:ne.NAME},{label:(0,r.__)("Date Created","web-stories"),value:ne.DATE_CREATED},{label:(0,r.__)("Last Modified","web-stories"),value:ne.LAST_MODIFIED},{label:(0,r.__)("Created By","web-stories"),value:ne.CREATED_BY}],se={DRAFT:"draft",FUTURE:"future",PENDING:"pending",PUBLISH:"publish",PRIVATE:"private"},ce={ALL:Object.values(se).join(","),PUBLISHED_AND_FUTURE:[se.PUBLISH,se.FUTURE].join(","),...se},de={[ce.PUBLISH]:(0,r.__)("Published","web-stories"),[ce.PENDING]:(0,r.__)("Pending","web-stories"),[ce.FUTURE]:(0,r.__)("Scheduled","web-stories"),[ce.DRAFT]:(0,r.__)("Draft","web-stories"),[ce.PRIVATE]:(0,r.__)("Private","web-stories")},ue=[{label:(0,r.__)("All Stories","web-stories"),value:ce.ALL,status:"all"},{label:(0,r.__)("Drafts","web-stories"),value:ce.DRAFT,status:ce.DRAFT},{label:(0,r.__)("Pending","web-stories"),value:ce.PENDING,status:ce.PENDING},{label:(0,r.__)("Published","web-stories"),value:ce.PUBLISH,status:ce.PUBLISH},{label:(0,r.__)("Scheduled","web-stories"),value:ce.FUTURE,status:ce.FUTURE},{label:(0,r.__)("Private","web-stories"),value:ce.PRIVATE,status:ce.PRIVATE}],pe={[ce.ALL]:e=>(0,X.default)(/* translators: %d: number of stories in view */ /* translators: %d: number of stories in view */
(0,r._n)("Viewing <strong>%d</strong> story","Viewing all <strong>%d</strong> stories",e,"web-stories"),String(e)),[ce.DRAFT]:e=>(0,X.default)(/* translators: %d: number of draft stories in view */ /* translators: %d: number of draft stories in view */
(0,r._n)("Viewing <strong>%d</strong> draft","Viewing <strong>%d</strong> drafts",e,"web-stories"),String(e)),[ce.PUBLISH]:e=>(0,X.default)(/* translators: %d: number of stories */ /* translators: %d: number of stories */
(0,r._n)("Viewing <strong>%d</strong> published story","Viewing <strong>%d</strong> published stories",e,"web-stories"),String(e)),[ce.FUTURE]:e=>(0,X.default)(/* translators: %d: number of stories */ /* translators: %d: number of stories */
(0,r._n)("Viewing <strong>%d</strong> scheduled story","Viewing <strong>%d</strong> scheduled stories",e,"web-stories"),String(e)),[ce.PENDING]:e=>(0,X.default)(/* translators: %d: number of stories */ /* translators: %d: number of stories */
(0,r._n)("Viewing <strong>%d</strong> pending story","Viewing <strong>%d</strong> pending stories",e,"web-stories"),String(e)),[ce.PRIVATE]:e=>(0,X.default)(/* translators: %d: number of stories */ /* translators: %d: number of stories */
(0,r._n)("Viewing <strong>%d</strong> private story","Viewing <strong>%d</strong> private stories",e,"web-stories"),String(e))},me={filters:{status:ce.ALL},sort:{orderby:ne.LAST_MODIFIED,order:le[ne.LAST_MODIFIED]}},fe="diy_crafts",ge="movies_tv",be="beauty_style",he="fitness_wellbeing",_e="food",ye="travel",Ee="music",Se="sports",we=((0,r._x)("DIY & Crafts","template vertical","web-stories"),(0,r._x)("Movies & TV","template vertical","web-stories"),(0,r._x)("Beauty & Style","template vertical","web-stories"),(0,r._x)("Fitness & Wellbeing","template vertical","web-stories"),(0,r._x)("Food","template vertical","web-stories"),(0,r._x)("Travel","template vertical","web-stories"),(0,r._x)("Music","template vertical","web-stories"),(0,r._x)("Sports","template vertical","web-stories"),"white"),ve="black",Te="gray",Ce="brown",Ie="red",ke="orange",Le="yellow",Ae="green",xe="blue",Oe="pink",De="purple",Ne=((0,r._x)("White","color","web-stories"),(0,r._x)("Black","color","web-stories"),(0,r._x)("Gray","color","web-stories"),(0,r._x)("Brown","color","web-stories"),(0,r._x)("Red","color","web-stories"),(0,r._x)("Orange","color","web-stories"),(0,r._x)("Yellow","color","web-stories"),(0,r._x)("Green","color","web-stories"),(0,r._x)("Blue","color","web-stories"),(0,r._x)("Pink","color","web-stories"),(0,r._x)("Purple","color","web-stories"),{ALL:"template"}),Pe={[Ne.ALL]:e=>(0,X.default)(/* translators: %d: number of templates in view */ /* translators: %d: number of templates in view */
(0,r._n)("Viewing <strong>%d</strong> template","Viewing all <strong>%d</strong> templates",e,"web-stories"),String(e))},Re={POPULAR:"popular",RECENT:"recent"},Be={orderby:Re,order:{ASC:"asc",DESC:"desc"}},Me={filters:{status:Ne.ALL},sort:{orderby:Re.POPULAR}},Ue=[{label:(0,r.__)("Popular","web-stories"),value:Re.POPULAR},{label:(0,r.__)("Recent","web-stories"),value:Re.RECENT}],Fe={template:(0,r.__)("See details","web-stories")},ze={MENU:"menu",PANEL:"panel",COLOR_PANEL:"color_panel"},Ge=[".jpg",".jpeg",".png",".gif"],He=288,je=1098,Ve={TABLET:"tablet",DESKTOP:"desktop",THUMBNAIL:"thumbnail"},qe={[Ve.TABLET]:200,[Ve.DESKTOP]:232,[Ve.THUMBNAIL]:33},We=24,$e=32,Ke=52,Xe=5,Ye={DASHBOARD:"/",TEMPLATES_GALLERY:"/templates-gallery",TEMPLATE_DETAIL:"template-detail"},Je={[Ye.DASHBOARD]:(0,r.__)("Dashboard","web-stories"),[Ye.TEMPLATES_GALLERY]:(0,r.__)("Explore Templates","web-stories"),[`${Ye.TEMPLATES_GALLERY}/${Ye.TEMPLATE_DETAIL}`]:(0,r.__)("Template Details","web-stories"),DEFAULT:(0,r.__)("Dashboard","web-stories")},Ze=[{value:Ye.DASHBOARD,label:Je[Ye.DASHBOARD],Icon:H},{value:Ye.TEMPLATES_GALLERY,label:Je[Ye.TEMPLATES_GALLERY],Icon:U}],Qe={GRID:"grid",LIST:"list"},et={[Qe.GRID]:(0,r.__)("Switch to List View","web-stories"),[Qe.LIST]:(0,r.__)("Switch to Grid View","web-stories")},tt="DASHBOARD",at="TEMPLATES_GALLERY",ot={[tt]:{...pe},[at]:{...Pe}},nt=24,rt=300,lt=853,it=640;const st=function(e,t){switch(t.type){case C:case w:return{...e,isLoading:t.payload};case T:case k:case A:case O:case N:return{...e,error:{...t.payload,id:Date.now()}};case v:return{...e,error:{}};case L:return{...e,error:{},stories:{...e.stories,[t.payload.id]:t.payload}};case x:{const a=t.payload.storyStatus===ce.DRAFT?ce.DRAFT:ce.PUBLISH;return{...e,error:{},storiesOrderById:e.storiesOrderById.filter((e=>e!==t.payload.id)),totalStoriesByStatus:{...e.totalStoriesByStatus,all:e.totalStoriesByStatus.all-1,[a]:e.totalStoriesByStatus[a]-1},stories:Object.keys(e.stories).reduce(((a,o)=>(Number.parseInt(o)!==t.payload.id&&(a[o]=e.stories[o]),a)),{})}}case D:return{...e,error:{},storiesOrderById:[t.payload.id,...e.storiesOrderById],totalStoriesByStatus:{...e.totalStoriesByStatus,all:e.totalStoriesByStatus.all+1,[t.payload.status]:e.totalStoriesByStatus[t.payload.status]+1},stories:{...e.stories,[t.payload.id]:t.payload}};case I:{const{fetchedStoryIds:a,totalStoriesByStatus:o,totalPages:n,page:r,stories:l}=t.payload,{storiesOrderById:i,stories:s}=e,c=1===r?a:[...i,...a],d=[...new Set(c)];return{...e,error:{},storiesOrderById:d,stories:{...s,...l},totalPages:n||1,totalStoriesByStatus:o,allPagesFetched:r>=n}}default:return e}},ct={LOAD_STORIES:{MESSAGE:(0,r.__)("Unable to load stories","web-stories")},UPDATE_STORY:{MESSAGE:(0,r.__)("Unable to update story","web-stories")},DELETE_STORY:{MESSAGE:(0,r.__)("Unable to delete story","web-stories")},CREATE_STORY_FROM_TEMPLATE:{MESSAGE:(0,r.__)("Unable to create story from template","web-stories")},DUPLICATE_STORY:{MESSAGE:(0,r.__)("Unable to duplicate story","web-stories")},LOAD_TEMPLATES:{DEFAULT_MESSAGE:(0,r.__)("Cannot connect to data source","web-stories"),MESSAGE:(0,r.__)("Unable to load templates","web-stories")},RENDER_PREVIEW:{MESSAGE:(0,r.__)("Unable to render preview","web-stories")},LOAD_TEMPLATE:{DEFAULT_MESSAGE:(0,r.__)("Could not load the template","web-stories")}},dt=`${S.SESSION_STORAGE_PREFIX.LOCAL_AUTOSAVE_PREFIX}_auto-draft`,ut=()=>{const e=(0,b.useRef)(!0),t=(0,b.useMemo)((()=>new Map),[]),[a,o]=(0,b.useReducer)(st,P),{apiCallbacks:n}=y(),r=(0,b.useRef)(!1);(0,b.useEffect)((()=>(r.current=!0,()=>{r.current=!1})),[]);const l=(0,b.useCallback)((async a=>{o({type:C,payload:!0});const l=(0,E.getTimeTracker)("load_stories");try{const{stories:l,fetchedStoryIds:i,totalPages:s,totalStoriesByStatus:c}=await n.fetchStories(a);if(!r.current)return;e.current&&t.forEach((e=>{e(c)})),e.current=!1,o({type:I,payload:{stories:l,totalPages:s,totalStoriesByStatus:c,fetchedStoryIds:i,page:a.page}})}catch(e){o({type:k,payload:{message:ct.LOAD_STORIES.MESSAGE,code:e.code}})}finally{o({type:C,payload:!1}),l()}}),[n,t]),i=(0,b.useCallback)((async e=>{const t=(0,E.getTimeTracker)("load_update_story");try{const t=await n.updateStory(e);o({type:L,payload:t})}catch(e){o({type:A,payload:{message:ct.UPDATE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[n]),s=(0,b.useCallback)((async e=>{const t=(0,E.getTimeTracker)("load_trash_story");try{await n.trashStory(e.id),o({type:x,payload:{id:e.id,storyStatus:e.status}})}catch(e){o({type:O,payload:{message:ct.DELETE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[n]),c=(0,b.useCallback)((async e=>{o({type:w,payload:!0});try{const t=await n.createStoryFromTemplate(e);S.sessionStore.deleteItemByKey(dt),o({type:v}),window.location=t.editLink}catch(e){o({type:T,payload:{message:ct.CREATE_STORY_FROM_TEMPLATE.MESSAGE,code:e.code}})}finally{o({type:w,payload:!1})}}),[n]);return{stories:a,api:{duplicateStory:(0,b.useCallback)((async e=>{const t=(0,E.getTimeTracker)("load_duplicate_story");try{const t=await n.duplicateStory(e);o({type:D,payload:t})}catch(e){o({type:N,payload:{message:ct.DUPLICATE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[n]),fetchStories:l,createStoryFromTemplate:c,trashStory:s,updateStory:i,addInitialFetchListener:(0,b.useCallback)((e=>{const a=Symbol();return t.set(a,e),()=>{t.delete(a)}}),[t])}}};a(81454);var pt=a(17328),mt=a(66450),ft=a(58319),gt=(a(58555),a(21447)),bt=a(82968),ht=a(60591),_t=a(66262),yt=a(6321);const Et=function(e){if(!e)return"";const t=(0,mt.default)(e);if((0,gt.default)(t)){const{locale:e}=(0,_t.default)();return(0,bt.default)(t,{includeSeconds:!1,addSuffix:!0,locale:e})}return(0,ht.default)(t)?(0,r.__)("yesterday","web-stories"):(0,yt.default)(e)};const St=function(e){return(0,mt.default)(e,{timeZone:"+0000"})};const wt="loading_templates",vt="fetch_templates_success",Tt="fetch_templates_failure",Ct="placeholder",It={allPagesFetched:!1,error:{},isLoading:!1,templates:{},templatesByTag:{},templatesOrderById:[],totalTemplates:null,totalPages:null},kt=(e,t)=>e.reduce(((e,a)=>a[t]?(e[a[t]],e[a[t]]=a,e):e),{});const Lt=function(e,t){switch(t.type){case wt:return{...e,isLoading:t.payload};case Tt:return{...e,error:{...t.payload,id:Date.now()}};case vt:{const a=t.payload.templates.map((({id:e})=>e)),o=1===t.payload.page?a:[...e.templatesOrderById,...a],n=[...new Set(o)];return{...e,error:{},templatesOrderById:n,templates:{...e.templates,...kt(t.payload.templates,"id")},isLoading:!1,totalPages:t.payload.totalPages,totalTemplates:t.payload.totalTemplates,allPagesFetched:t.payload.page>=t.payload.totalPages,templatesByTag:t.payload.templatesByTag}}case Ct:return It;default:return e}};const At=()=>{const[e,t]=(0,b.useReducer)(Lt,It),{cdnURL:o}=y(),n=(0,b.useCallback)((async()=>{t({type:wt,payload:!0});const e={},{getAllTemplates:n}=await Promise.all([a.e(5380),a.e(6393)]).then(a.bind(a,7512)),r=(await n({cdnURL:o})).map((t=>{const a=function(e,t=!1){const{id:a,slug:o,modified:n,creationDate:r}=e;return a&&o?{...e,id:a,slug:o,creationDate:(0,mt.default)(r,(0,_t.default)()),status:"template",modified:St(n),isLocal:t}:null}(t);return a.tags.forEach((t=>{e[t]?e[t].push(a.id):e[t]=[a.id]})),a})).sort(((e,t)=>(0,pt.default)(e.creationDate,t.creationDate)));t({type:vt,payload:{page:1,templates:r,totalPages:1,totalTemplates:r.length,templatesByTag:e}})}),[o]),r=(0,b.useCallback)((t=>e.templates[t]?Promise.resolve(e.templates[t]):Promise.reject(new Error)),[e]);return{templates:e,api:{fetchExternalTemplates:n,fetchExternalTemplateById:r}}};const xt=function(){const{apiCallbacks:{getAuthors:e}}=y();return{api:{getAuthors:e}}};const Ot=function(){const{apiCallbacks:{getTaxonomies:e,getTaxonomyTerms:t}}=y();return{api:{getTaxonomies:e,getTaxonomyTerms:t}}},Dt=(0,b.createContext)({state:{},actions:{}});function ApiProvider({children:e}){const{api:t}=xt(),{api:a}=Ot(),{templates:o,api:r}=At(),{stories:l,api:i}=ut(),s={state:{stories:l,templates:o},actions:{storyApi:i,templateApi:r,usersApi:t,taxonomyApi:a}};return n.createElement(Dt.Provider,{value:s},e)}var Nt=a(36626),Pt=a(5556),Rt=a.n(Pt),Bt=a(18086),Mt=a(47701);const Ut=(0,m.css)(["picture{display:block;& > img{display:block;height:100%;width:100%;object-fit:fill;border-radius:",";border:",";}}"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>`1px solid ${e.colors.border.defaultNormal}`)),Ft=m.default.div.withConfig({displayName:"cardGallery__GalleryContainer",componentId:"sc-8jnrkn-0"})(["flex:1;display:flex;justify-content:space-between;align-items:start;"]),zt=m.default.div.withConfig({displayName:"cardGallery__DisplayPage",componentId:"sc-8jnrkn-1"})(["overflow:hidden;width:38.6%;margin-left:2.1%;"," @media screen and (min-width:1600px){width:45.2%;margin-left:2.4%;}"],Ut);zt.propTypes={$isThreeRows:Rt().bool};const Gt=m.default.div.withConfig({displayName:"cardGallery__Thumbnails",componentId:"sc-8jnrkn-2"})(["position:relative;display:grid;width:52.3%;grid-template-columns:repeat(3,1fr);column-gap:8px;row-gap:16px;margin-right:16px;@media screen and (min-width:1600px){width:59.3%;grid-template-columns:repeat(4,1fr);}"]),Ht=(0,m.default)(Bt.Button).attrs({type:Mt.ButtonType.Plain}).withConfig({displayName:"cardGallery__ThumbnailButton",componentId:"sc-8jnrkn-3"})(["display:block;height:100%;padding:0;border:none;background-color:transparent;position:relative;&:active{background-color:transparent;}"," ",";"],(({$isSelected:e,theme:t})=>e&&(0,m.css)(["&:after{content:'';position:absolute;box-sizing:border-box;width:100%;height:100%;display:block;top:0;right:0;border-radius:",";border:4px solid ",";}"],t.borders.radius.medium,t.colors.interactiveBg.active)),Ut);function jt(e){return(0,X.default)(/* translators: %s: page number. */ /* translators: %s: page number. */
(0,r.__)("Poster of template page %s","web-stories"),e)}Ht.propTypes={$isSelected:Rt().bool};const Vt=function CardGallery({galleryPosters:e,isRTL:t,galleryLabel:a}){const[o,l]=(0,b.useState)(0),[i,s]=(0,b.useState)(),c=(0,b.useRef)(),d=(0,b.useRef)(),u=(0,b.useRef)({}),p=(0,b.useCallback)((e=>{l(e),s(e)}),[]),m=(0,b.useCallback)((e=>{s(e)}),[]);(0,b.useEffect)((()=>{e&&(l(0),s())}),[e]),(0,Nt.default)({containerRef:c,gridRef:d,itemRefs:u,isRTL:t,currentItemId:i,items:e});const f=(0,b.useMemo)((()=>e.map(((e,t)=>{const a=`gallery_item_${t}`,l=t+1,s=i?i===t:o===t;return n.createElement("div",{key:a,ref:e=>{u.current[t]=e},onFocus:()=>m(t)},n.createElement(Ht,{$isSelected:o===t,tabIndex:s?0:-1,onClick:()=>p(t),"aria-label":o===t?(0,X.default)(/* translators: %s: page number. */ /* translators: %s: page number. */
(0,r.__)("Page %s (current page)","web-stories"),l):(0,X.default)(/* translators: %s: page number. */ /* translators: %s: page number. */
(0,r.__)("Page %s","web-stories"),l)},n.createElement("picture",null,n.createElement("source",{srcSet:e.webp,type:"image/webp"}),n.createElement("source",{srcSet:e.png,type:"image/png"}),n.createElement("img",{src:e.png,decoding:"async",alt:jt(l),width:it,height:lt}))))}))),[e,o,i,m,p]);return n.createElement(Ft,{ref:c},n.createElement(Gt,{ref:d,role:"group","aria-label":a,"data-testid":"mini-cards-container"},f),n.createElement(zt,null,e[o]&&n.createElement("picture",null,n.createElement("source",{srcSet:e[o].webp,type:"image/webp"}),n.createElement("source",{srcSet:e[o].png,type:"image/png"}),n.createElement("img",{src:e[o].png,decoding:"async",alt:(0,X.default)(/* translators: %s: active preview page number */ /* translators: %s: active preview page number */
(0,r.__)("Active Page Preview - Page %s","web-stories"),o+1),width:it,height:lt}))))};var qt=a(59576);const Wt=Rt().oneOf([...Object.values(ce),...Object.values(Ne)]),$t=Rt().shape({id:Rt().number.isRequired,status:Wt,title:Rt().string.isRequired,modified:Rt().oneOfType([Rt().object,Rt().string]),author:Rt().object,capabilities:Rt().shape({hasDeleteAction:Rt().bool,hasEditAction:Rt().bool})}),Kt=Rt().shape({id:Rt().number.isRequired,status:Wt,title:Rt().string.isRequired,pages:Rt().array,modified:Rt().object,colors:Rt().arrayOf(Rt().shape({label:Rt().string.isRequired,color:Rt().string.isRequired})),description:Rt().string,tags:Rt().arrayOf(Rt().string),createdBy:Rt().string,postersByPage:Rt().arrayOf(Rt().shape({webp:Rt().string,png:Rt().string,type:Rt().string}))}),Xt=(Rt().arrayOf($t),Rt().arrayOf(Kt).isRequired,Rt().shape({duplicateStory:Rt().func,trashStory:Rt().func,updateStory:Rt().func}),Rt().shape({createStoryFromTemplate:Rt().func,handleDetailsToggle:Rt().func,switchToTemplateByOffset:Rt().func}),Rt().shape({all:Rt().number,draft:Rt().number,publish:Rt().number}),Rt().shape({width:Rt().number,height:Rt().number})),Yt=(Rt().shape({handleMenuToggle:Rt().func.isRequired,contextMenuId:Rt().number.isRequired,menuItems:Rt().arrayOf(Rt().shape({label:Rt().string,value:Rt().oneOfType([Rt().string,Rt().bool]),url:Rt().string,isEnabled:Rt().func,action:Rt().func}))}),Rt().shape({handleOnRenameStory:Rt().func,id:Rt().number,handleCancelRename:Rt().func}),m.default.div.withConfig({displayName:"cardGrid__DashboardGrid",componentId:"sc-1kbl74q-0"})(["display:grid;width:100%;grid-column-gap:","px;grid-row-gap:","px;grid-template-columns:",";grid-template-rows:",";scroll-margin-top:30vh;",";"],We,$e,(({columnWidth:e})=>`\n    repeat(auto-fill, ${e}px)`),(({columnHeight:e})=>`minmax(${e}px, auto)`),(({theme:e})=>(0,m.css)(["&:focus-visible{",";}"],qt.focusCSS(e.colors.border.focus)))));Yt.propTypes={columnHeight:Rt().number,columnWidth:Rt().number};const Jt=(0,b.forwardRef)((function CardGrid({ariaLabel:e,children:t,pageSize:a},o){return n.createElement(Yt,{ref:o,role:"list","data-testid":"dashboard-grid-list",tabIndex:0,"aria-label":e,columnWidth:a.width,columnHeight:a.height},t)}));var Zt=a(4814),Qt=a(21494),ea=a(60143),ta=a(1957),aa=a(45947);function oa(){return oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},oa.apply(null,arguments)}const na=(0,m.default)(ea.Link).withConfig({displayName:"link__StyledLink",componentId:"sc-7h28r8-0"})(["",";background-color:transparent;text-decoration:none;:active,:hover,:focus,:active *,:hover *,:focus *{color:"," !important;}:hover{background-color:",";}:active{background-color:",";}"],aa.menuItemStyles,(({theme:e})=>e.colors.fg.primary),(({theme:e})=>e.colors.interactiveBg.secondaryHover),(({theme:e})=>e.colors.interactiveBg.secondaryPress));const ra=function Link({id:e,onBlur:t,onClick:a,onFocus:o,openNewTab:r,...l}){const{focusedId:i,onDismiss:s,onMenuItemBlur:c,onMenuItemFocus:d}=(0,ta.default)((({state:e,actions:t})=>({focusedId:e.focusedId,onDismiss:t.onDismiss,onMenuItemBlur:t.onMenuItemBlur,onMenuItemFocus:t.onMenuItemFocus}))),u=(0,b.useMemo)(Qt.default,[]),p=e||u,m=r?{target:"_blank",rel:"noreferrer"}:{};return n.createElement(na,oa({id:p,tabIndex:i===p?0:-1,role:"menuitem",onBlur:e=>{c(),t?.(e)},onClick:e=>{a?.(e),s(e.nativeEvent)},onFocus:e=>{d(p),o?.(e)}},m,l))};var la=a(18967),ia=a(20370);const sa=m.default.button.withConfig({displayName:"storyMenu__MoreVerticalButton",componentId:"sc-1vaaobv-0"})(["display:flex;background:transparent;padding:0 8px;opacity:",";transition:opacity ease-in-out 300ms;cursor:pointer;color:",";& > svg{width:4px;max-height:100%;}border:0;border-radius:",";",";"],(({menuOpen:e,isVisible:t})=>e||t?1:0),(({theme:e,$isInverted:t})=>t?e.colors.inverted.fg.primary:e.colors.interactiveFg.brandNormal),(({theme:e})=>e.borders.radius.small),(({theme:e,$isInverted:t})=>qt.focusableOutlineCSS(!1,!!t&&e.colors.standard.black)));sa.propTypes={menuOpen:Rt().bool};const ca=m.default.div.withConfig({displayName:"storyMenu__MenuContainer",componentId:"sc-1vaaobv-1"})(["position:relative;align-self:",";text-align:right;"," & > div{margin:0;}"],(({verticalAlign:e="flex-start"})=>e),(({$menuStyleOverrides:e})=>e));function StoryMenu({contextMenuId:e,onMoreButtonSelected:t,storyId:a,verticalAlign:o,menuItems:l,itemActive:i,tabIndex:s,menuStyleOverrides:c,menuLabel:d,isInverted:u}){const p=e===a,m=(0,b.useCallback)((e=>t(e,-1)),[t]);return n.createElement(ca,{verticalAlign:o,"data-testid":`story-context-menu-${a}`,$menuStyleOverrides:c},n.createElement(sa,{"data-testid":`story-context-button-${a}`,tabIndex:s,menuOpen:p,isVisible:i,"aria-label":d||(0,r.__)("More Options","web-stories"),onClick:e=>t(e,p?-1:a),className:"context-menu-button",$isInverted:u},n.createElement(K,null)),n.createElement(Zt.default,{animate:!0,isOpen:p,onDismiss:m},l.map((({label:e,separator:t,...a})=>{const o=a.href?ra:la.default;return n.createElement(b.Fragment,{key:e},"top"===t&&n.createElement(ia.default,null),n.createElement(o,a,e),"bottom"===t&&n.createElement(ia.default,null))}))))}ca.propTypes={verticalAlign:Rt().oneOf(["center","flex-start","flex-end"])};const da=m.default.div.attrs({role:"listitem"}).withConfig({displayName:"cardGridItem__CardGridItem",componentId:"sc-w3d579-0"})(["margin:0;width:100%;display:grid;grid-template-columns:100%;grid-template-rows:",";","{margin:12px 0;}&:hover ",",&:active ",",&:focus-within ","{opacity:1;}&:hover .card_buttons,&:active .card_buttons,&:focus-within .card_buttons{opacity:1;}"],(({$posterHeight:e})=>`${e}px auto`),sa,sa,sa,sa);da.propTypes={$posterHeight:Rt().number};const ua=da;var pa=a(2805);Rt().shape({label:Rt().string.isRequired,color:Rt().string.isRequired});const ma=m.default.ul.withConfig({displayName:"colorList__ColorContainer",componentId:"sc-uphoth-0"})(["display:flex;margin:0;"]),fa=m.default.li.withConfig({displayName:"colorList__Color",componentId:"sc-uphoth-1"})(["",""],(({theme:e,$backgroundColor:t,color:a,size:o,spacing:n})=>`\n    width: ${o}px;\n    height: ${o}px;\n    border-radius: 50%;\n    margin-bottom: 0;\n    background-color: rgb(${t});\n    ${(e=>({"#fff":`border: solid 1px ${e}`,"#ffffff":`border: solid 1px ${e}`,white:`border: solid 1px ${e}`,"#fef9f1":`border: solid 1px ${e}`,"#fff8f2":`border: solid 1px ${e}`,"#f9f9f9":`border: solid 1px ${e}`,"#fcfcfc":`border: solid 1px ${e}`}))(e.colors.border.defaultNormal)[a]||""};\n\n    & + & {\n      margin-left: ${n||10}px;\n    }\n  `));const ga=function ColorList({colors:e,size:t,spacing:a,...o}){return n.createElement(ma,o,e.map((({label:e,color:o})=>{const{r,g:l,b:i}=(0,pa.default)(o).color,s=`${r}, ${l}, ${i}`;return n.createElement(fa,{key:o,size:t,spacing:a,color:o,$backgroundColor:s,title:e,ariaLabel:e,"data-testid":"detail-template-color"})})))},ba=m.default.div.withConfig({displayName:"contentGutter__StandardViewContentGutter",componentId:"sc-17seiz9-0"})(["margin:0 ","px;"],Ke);var ha=a(91442);function _a(){return _a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},_a.apply(null,arguments)}const ya=({onClose:e,onSecondary:t,onPrimary:a,primaryText:o,secondaryText:r,primaryRest:l,secondaryRest:s,actions:c,children:d,...u})=>{const p=(0,b.useMemo)((()=>o&&n.createElement(Bt.Button,_a({type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Small,onClick:()=>a?.()},l),o)),[o,l,a]),f=(0,b.useMemo)((()=>r&&n.createElement(Bt.Button,_a({type:Mt.ButtonType.Tertiary,size:Mt.ButtonSize.Small,onClick:()=>t?.()||e()},s),r)),[r,s,t,e]);return n.createElement(m.ThemeProvider,{theme:i.theme},n.createElement(ha.default,_a({onClose:e},u,{actions:c||n.createElement(n.Fragment,null,f,p)}),d))};var Ea=a(39359),Sa=a(19637);const wa=(0,m.default)(Bt.Button).withConfig({displayName:"fileUpload__StyledButton",componentId:"sc-1egk7ci-0"})([":focus-within{","}"],(({theme:e})=>qt.focusCSS(e.colors.border.focus))),va=m.default.input.withConfig({displayName:"fileUpload__Input",componentId:"sc-1egk7ci-1"})(Ea.visuallyHidden),Ta=m.default.div.withConfig({displayName:"fileUpload__UploadFormArea",componentId:"sc-1egk7ci-2"})(["display:flex;flex-direction:column;align-items:center;position:relative;justify-content:flex-end;width:100%;min-height:153px;padding:40px 0;border-radius:4px;border:1px dashed ",";transition:border-color 300ms ease-in;"],(({isDragging:e,theme:t})=>e?t.colors.border.focus:t.colors.border.defaultNormal)),Ca=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"fileUpload__UploadHelperText",componentId:"sc-1egk7ci-3"})(["margin:0 auto 16px;padding:0 20%;text-align:center;color:",";"],(({theme:e})=>e.colors.fg.tertiary)),Ia=m.default.div.withConfig({displayName:"fileUpload__LoadingIndicator",componentId:"sc-1egk7ci-4"})(["display:flex;align-items:center;justify-content:center;position:absolute;top:0;width:100%;height:100%;background-color:",";opacity:",";z-index:",";pointer-events:none;transition:opacity ease-in-out 300ms;p{font-style:italic;}"],(({theme:e})=>e.colors.standard.white),(({isLoading:e})=>e?.6:0),(({isLoading:e})=>e?"100":"0"));function ka(e){e.preventDefault(),e.stopPropagation()}const La=({id:e,label:t,onSubmit:a,isLoading:o,isMultiple:l,ariaLabel:i,instructionalText:s=(0,r.__)("You can also drag your file here","web-stories"),acceptableFormats:c=Ge})=>{const d=(0,b.useRef)(null),u=(0,b.useRef)(null),[p,m]=(0,b.useState)(!1),f=(0,b.useCallback)((e=>{a(Object.values(e))}),[a]),g=(0,b.useCallback)((e=>{ka(e),f(e.target.files),u.current.value=null}),[f]),h=(0,b.useCallback)((e=>{ka(e);const t=e.dataTransfer.files;t&&f(t),m(!1)}),[f]),_=(0,b.useCallback)((e=>{ka(e),m((e=>!e)),p&&e.dataTransfer.clearData()}),[p]);return(0,b.useEffect)((()=>{if(!u?.current)return()=>{};const e=u.current;return e.addEventListener("change",g),()=>{e.removeEventListener("change",g)}}),[g]),n.createElement(Ta,{ref:d,isDragging:p,onDrop:h,onDragEnter:_,onDragLeave:_,onDragOver:ka,"data-testid":"file-upload-drop-area"},n.createElement(Ia,{isLoading:o},n.createElement("p",null,(0,r.__)("Loading…","web-stories"))),n.createElement(Ca,null,s),n.createElement(wa,{forwardedAs:"label",htmlFor:e,"aria-label":i,type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Small},t,n.createElement(va,{ref:u,type:"file",id:e,"data-testid":"upload-file-input",accept:c.join(","),multiple:l,disabled:o,"aria-live":"polite","aria-busy":o})))};var Aa=a(27172);const xa=(0,m.default)(Aa.default).withConfig({displayName:"inlineInputForm__StyledInput",componentId:"sc-21xnmy-0"})(["div{height:auto;}",""],(({$isInverted:e,theme:t})=>e&&(0,m.css)(["input{color:",";}"],t.colors.inverted.fg.primary))),Oa=({noAutoFocus:e,error:t,id:a,isInverted:o,label:r,onEditCancel:l,onEditComplete:i,placeholder:s,value:c})=>{const d=(0,b.useRef)(null),[u,p]=(0,b.useState)(c);(0,b.useEffect)((()=>{p(c)}),[c]),(0,b.useFocusOut)(d,(()=>{l()}),[l]),(0,b.useEffect)((()=>{!e&&d.current&&d.current.querySelector("input")?.focus()}),[e]);const m=(0,b.useCallback)((({target:e})=>{p(e.value)}),[p]),f=(0,b.useCallback)((({nativeEvent:e})=>{13===e.keyCode?i(u):27===e.keyCode&&l()}),[u,i,l]);return n.createElement("div",{ref:d},n.createElement(xa,{"aria-label":r,id:`${a}`,"data-testid":"inline-input-form",value:u,onKeyDown:f,onChange:m,placeholder:s,hasError:Boolean(t),hint:t,$isInverted:o}))},Da=(0,b.createContext)(null),Na=({children:e})=>{const t=(0,b.useRef)(),a=(0,b.useRef)(null);(0,b.useEffect)((()=>{t.current=document?.getElementById("web-stories-dashboard")?.querySelector(["button","a"])}),[]);const o=(0,b.useCallback)((()=>{document.documentElement?.scrollTo?.({top:0,behavior:"smooth"}),t.current?.focus()}),[]),r=(0,b.useMemo)((()=>({state:{scrollFrameRef:a},actions:{scrollToTop:o}})),[o]);return n.createElement(Da.Provider,{value:r},e)},Pa=()=>{const e=(0,b.useContext)(Da);if(!e)throw new Error("useLayoutContext() must be used within a <Layout.Provider />");return e},Ra=m.default.div.withConfig({displayName:"scrollable__ScrollContent",componentId:"sc-17i1z8u-0"})([""]),Ba=({children:e})=>{const{state:{scrollFrameRef:t}}=Pa();return n.createElement(Ra,{ref:t},e)},Ma=m.default.div.withConfig({displayName:"fixed__FixedContent",componentId:"sc-735v4o-0"})(["position:absolute;top:0;right:0;bottom:0;left:0;z-index:",";overflow:hidden;pointer-events:none;& > *{pointer-events:auto;}"],Xe),Ua={Provider:Na,Scrollable:Ba,Fixed:({children:e})=>n.createElement(Ma,null,e)};var Fa=a(11423);const za=m.default.div.withConfig({displayName:"pageStructureComponents__AppFrame",componentId:"sc-199ev3j-0"})(["width:100%;@media screen and (max-width:","px){width:","px;}"],je,je),Ga=m.default.div.withConfig({displayName:"pageStructureComponents__PageContent",componentId:"sc-199ev3j-1"})(["position:relative;padding-top:10px;width:",";left:",";@media screen and (max-width:","px){left:0;width:100%;}"],(({fullWidth:e})=>e?"100%":"calc(100% - 288px)"),(({fullWidth:e})=>e?"0":"288px"),je),Ha=m.default.nav.attrs({"data-testid":"dashboard-left-rail"}).withConfig({displayName:"pageStructureComponents__LeftRailContainer",componentId:"sc-199ev3j-2"})(["position:fixed;display:flex;justify-content:space-between;flex-direction:column;top:",";bottom:0;width:","px;background:",";z-index:",";transition:transform 0.25s ",",opacity 0.25s linear;@media screen and (max-width:","px){padding-left:0;opacity:",";visibility:",";transform:translateX(",");}"],(({topOffset:e})=>`${e}px`),He,(({theme:e})=>e.colors.bg.primary),Xe,Fa.BEZIER.outCubic,je,(({isOpen:e})=>e?1:0),(({isOpen:e})=>e?"visible":"hidden"),(({isOpen:e})=>e?"none":"-100%")),ja=m.default.div.withConfig({displayName:"pageStructureComponents__LoadingContainer",componentId:"sc-199ev3j-3"})(["display:flex;justify-content:center;align-items:center;min-height:550px;"]);var Va,qa,Wa,$a;function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Ka.apply(null,arguments)}const SvgLogoWithTypeCircleColor=({title:e,titleId:t,...a})=>n.createElement("svg",Ka({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 212 64","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,Va||(Va=n.createElement("circle",{cx:32,cy:32,r:32,fill:"url(#a)",transform:"rotate(-180 32 32)"})),qa||(qa=n.createElement("g",{fill:"#fff",filter:"url(#b)"},n.createElement("path",{d:"M41.6 19.2a3.2 3.2 0 0 1 3.2 3.2v19.2a3.2 3.2 0 0 1-3.2 3.2zm-24 0a3.2 3.2 0 0 1 3.2-3.2h14.4a3.2 3.2 0 0 1 3.2 3.2v25.6a3.2 3.2 0 0 1-3.2 3.2H20.8a3.2 3.2 0 0 1-3.2-3.2zM48 22.4a2.4 2.4 0 0 1 2.4 2.4v14.4a2.4 2.4 0 0 1-2.4 2.4z"}))),Wa||(Wa=n.createElement("path",{fill:"#000",d:"m80.78 40.4-4.967-18.33h2.407l3.328 13.466.307 1.254h.102l.384-1.254 4.096-13.466h2.253l3.917 13.466.384 1.254h.102l3.61-14.72h2.406L94.17 40.4h-2.253l-3.892-13.261-.41-1.434h-.102l-.435 1.434-4.045 13.26zm24.747.41q-1.894 0-3.379-.897a6.4 6.4 0 0 1-2.304-2.457q-.82-1.561-.82-3.559 0-1.867.769-3.456.794-1.587 2.201-2.534 1.434-.973 3.354-.973 1.945 0 3.328.87a5.53 5.53 0 0 1 2.15 2.356q.768 1.51.768 3.456 0 .18-.025.358 0 .18-.026.307h-10.342q.102 1.537.742 2.56.666 1 1.638 1.51a4.5 4.5 0 0 0 2.023.487q1.434 0 2.355-.665a5.3 5.3 0 0 0 1.51-1.69l1.844.896a6.6 6.6 0 0 1-2.202 2.458q-1.434.972-3.584.972m-.179-11.905q-1.587 0-2.637.999c-1.05.999-1.161 1.527-1.382 2.585h7.961q-.026-.742-.435-1.561-.384-.844-1.229-1.434-.844-.588-2.278-.589m15.423 11.904q-1.561 0-2.739-.716-1.178-.717-1.715-1.613h-.103v1.92h-2.073V22.07h2.176v5.402l-.103 1.817h.103q.537-.921 1.715-1.638t2.739-.717q1.793 0 3.2.896 1.408.897 2.227 2.458.82 1.561.82 3.584 0 2.022-.82 3.584-.819 1.56-2.227 2.457t-3.2.896m-.23-1.97a4 4 0 0 0 2.099-.59q.999-.615 1.587-1.74.615-1.126.615-2.637 0-1.536-.615-2.637-.588-1.126-1.587-1.715a3.86 3.86 0 0 0-2.099-.615q-1.126 0-2.125.615-.973.588-1.587 1.715-.615 1.101-.615 2.637c0 1.536.205 1.911.615 2.662q.614 1.101 1.587 1.715a4.1 4.1 0 0 0 2.125.59m19.73 1.97a6.6 6.6 0 0 1-2.637-.563 6.64 6.64 0 0 1-2.304-1.664q-.998-1.101-1.459-2.739l2.074-.845q.435 1.587 1.587 2.663t2.79 1.075q1.024 0 1.869-.359a3.3 3.3 0 0 0 1.382-1.1q.538-.718.538-1.741 0-1.358-1.024-2.15-.998-.82-2.97-1.511l-1.152-.41a14 14 0 0 1-2.048-.972 5.2 5.2 0 0 1-1.689-1.536q-.666-.974-.666-2.432 0-1.332.717-2.432.717-1.101 1.971-1.767t2.893-.665q1.715 0 2.867.64 1.178.614 1.843 1.484.691.845.922 1.562l-2.022.87q-.154-.537-.589-1.1-.435-.59-1.178-.973-.716-.41-1.817-.41-.897 0-1.69.359-.768.358-1.254.998-.462.614-.461 1.434 0 1.151.921 1.817.923.666 2.484 1.203l1.203.41q.82.282 1.664.691.87.41 1.613 1.05t1.203 1.587q.46.922.461 2.227 0 1.409-.564 2.432a4.75 4.75 0 0 1-1.433 1.639 6 6 0 0 1-1.971.921q-1.05.307-2.074.307m13.187-.204q-1.638 0-2.636-.948-.999-.972-.999-2.688v-7.654h-2.278v-1.971h2.278v-3.687h2.176v3.687h3.2v1.971h-3.2v7.117q0 1.025.41 1.587.435.563 1.408.563.435 0 .793-.128.359-.127.64-.307v2.125q-.332.153-.742.23-.384.103-1.05.103m9.799.204q-1.971 0-3.482-.921a6.66 6.66 0 0 1-2.381-2.483q-.844-1.587-.844-3.533t.844-3.507a6.6 6.6 0 0 1 2.381-2.51q1.51-.92 3.482-.92c1.972 0 2.474.315 3.481.946a6.4 6.4 0 0 1 2.356 2.51q.87 1.56.87 3.48 0 1.946-.87 3.534a6.47 6.47 0 0 1-2.356 2.483q-1.51.921-3.481.921m0-1.97a4.34 4.34 0 0 0 2.201-.59 4.46 4.46 0 0 0 1.69-1.69q.64-1.125.64-2.687t-.64-2.663q-.64-1.125-1.69-1.715a4.34 4.34 0 0 0-2.201-.589q-1.178 0-2.227.59-1.05.588-1.69 1.714-.64 1.101-.64 2.663 0 1.56.64 2.688.64 1.1 1.69 1.69a4.5 4.5 0 0 0 2.227.588m8.984 1.56V27.345h2.073v2.099h.103a3.05 3.05 0 0 1 .845-1.28 4.5 4.5 0 0 1 1.382-.87 4 4 0 0 1 1.562-.333q.588 0 .921.077.333.051.615.179v2.355q-.82-.41-1.844-.41-.946 0-1.74.538a4 4 0 0 0-1.28 1.434 4.24 4.24 0 0 0-.461 1.97V40.4zm10.88-15.462q-.64 0-1.101-.46a1.5 1.5 0 0 1-.461-1.101q0-.665.461-1.101.46-.46 1.101-.46.665 0 1.101.46.46.435.46 1.1 0 .641-.46 1.102a1.45 1.45 0 0 1-1.101.46M182.046 40.4V27.344h2.176V40.4zm11.256.41q-1.894 0-3.379-.897a6.4 6.4 0 0 1-2.304-2.457q-.819-1.561-.819-3.559 0-1.867.768-3.456.794-1.587 2.201-2.534 1.434-.973 3.354-.973 1.945 0 3.328.87a5.52 5.52 0 0 1 2.15 2.356q.768 1.51.768 3.456 0 .18-.025.358 0 .18-.026.307h-10.342q.102 1.537.742 2.56.666 1 1.638 1.51a4.5 4.5 0 0 0 2.023.487q1.434 0 2.355-.665a5.3 5.3 0 0 0 1.51-1.69l1.844.896a6.6 6.6 0 0 1-2.202 2.458q-1.433.972-3.584.972m-.179-11.905q-1.587 0-2.637.999c-1.05.999-1.16 1.527-1.382 2.585h7.961q-.026-.742-.435-1.561-.384-.844-1.229-1.434-.844-.588-2.278-.589m13.475 11.904q-2.202.001-3.584-1.024-1.383-1.05-1.92-2.483l1.945-.87q.513 1.177 1.459 1.817a3.75 3.75 0 0 0 2.1.64q1.151 0 2.048-.486.921-.486.921-1.434 0-.87-.768-1.356-.742-.487-2.099-.82l-1.587-.41q-.922-.255-1.741-.716c-.819-.461-.99-.7-1.331-1.178q-.487-.741-.487-1.792 0-1.178.692-2.022.69-.845 1.817-1.28a6.3 6.3 0 0 1 2.407-.46q1.664 0 3.02.742 1.383.717 1.946 2.073l-1.894.87q-.487-.972-1.306-1.356c-.819-.384-1.143-.384-1.792-.384q-1.025 0-1.869.486-.819.46-.819 1.28t.64 1.229q.665.41 1.613.666l1.894.486q3.866.999 3.866 3.789 0 1.228-.691 2.125-.692.896-1.869 1.382t-2.611.486"})),$a||($a=n.createElement("defs",null,n.createElement("linearGradient",{id:"a",x1:13.255,x2:35.289,y1:6.599,y2:62.791,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#79B3FF"}),n.createElement("stop",{offset:1,stopColor:"#CBACFF"})),n.createElement("filter",{id:"b",width:46.08,height:46.08,x:8.96,y:10.24,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},n.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),n.createElement("feOffset",{dy:1.28}),n.createElement("feGaussianBlur",{stdDeviation:1.92}),n.createElement("feColorMatrix",{values:"0 0 0 0 0.423529 0 0 0 0 0.490196 0 0 0 0 0.733333 0 0 0 0.3 0"}),n.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),n.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))),Xa=(0,n.memo)(SvgLogoWithTypeCircleColor);var Ya=a(55313),Ja=a(57971);const Za=(0,b.createContext)({state:{activeRoute:"",currentPath:"",queryParams:{},availableRoutes:[],defaultRoute:""},actions:{push:()=>{},replace:()=>{},setAvailableRoutes:()=>[]}});const Qa=function RouterProvider({children:e,...t}){const a=(0,b.useRef)(t.history||(0,Ja.createHashHistory)()),[o,r]=(0,b.useState)(a.current.location.pathname),[l,i]=(0,b.useState)([]),s=Ye.DASHBOARD,c=(0,b.useMemo)((()=>(({availableRoutes:e,currentPath:t,defaultRoute:a})=>{const o=e.filter((e=>t.startsWith(e)));return o.length<=1?a:t})({availableRoutes:l,currentPath:o,defaultRoute:s})),[l,o,s]),d=e=>{const t=new URLSearchParams(e);return Object.fromEntries(t)},[u,p]=(0,b.useState)(d(a.current.location.search));(0,b.useEffect)((()=>a.current.listen((({location:e})=>{p(d(e.search)),r(e.pathname)}))),[]);const m=(0,b.useMemo)((()=>({state:{activeRoute:c,currentPath:o,queryParams:u,availableRoutes:l,defaultRoute:s},actions:{push:e=>a.current.push(e),replace:e=>a.current.replace(e),setAvailableRoutes:i}})),[c,l,o,s,u]);return n.createElement(Za.Provider,{value:m},e)};const eo=function(e=b.identity){return(0,b.useContextSelector)(Za,e)};function to(e){return e.toLowerCase().startsWith("http://")||e.toLowerCase().startsWith("https://")?e:e.startsWith("/")?`#${e}`:""===e?"#/":`${window.location.hash}/${e}`}const ao=function Route({component:e,path:t,exact:a=!1,isDefault:o=!1}){const{availableRoutes:n,currentPath:r,defaultRoute:l}=eo((({state:e})=>e)),i=function({currentPath:e,path:t,availableRoutes:a,defaultRoute:o,isDefault:n=!1,exact:r=!1}){const l=new RegExp(`^${t}`).exec(e);if(!l&&!n)return null;const i=l?.[0];if(n){const t=a.filter((t=>e.startsWith(t))).length<=1;if(t)return o}return r&&e!==i?null:i}({currentPath:r,availableRoutes:n,defaultRoute:l,path:t,exact:a,isDefault:o});return i?e:null},oo=(0,b.createContext)({actions:{},state:{}});function no(e=b.identity){return(0,b.useContextSelector)(oo,e)}function NavProvider({children:e}){const[t,a]=(0,b.useState)(!1),o=(0,b.useCallback)((()=>{a(!t)}),[t]),r=(0,b.useMemo)((()=>({actions:{toggleSideBar:o},state:{sideBarVisible:t}})),[t,o]);return n.createElement(oo.Provider,{value:r},e)}var ro=a(75850);const lo=m.default.div.withConfig({displayName:"navigationComponents__Content",componentId:"sc-6htb2i-0"})(["display:flex;flex-direction:column;margin:20px 0;> *{margin:20px 28px;}"]),io=(0,m.default)(ro.Headline).withConfig({displayName:"navigationComponents__Header",componentId:"sc-6htb2i-1"})(["margin:42px 0px 72px;& > svg{margin:0 28px;height:64px;}"]),so=m.default.ul.withConfig({displayName:"navigationComponents__NavList",componentId:"sc-6htb2i-2"})(["margin:0;padding:0;"]),co=m.default.li.withConfig({displayName:"navigationComponents__NavListItem",componentId:"sc-6htb2i-3"})(["margin:10px 28px;padding:0;list-style-type:none;"]),uo=(0,m.css)(["span{color:",";}svg path{stroke:",";}"],(({theme:e})=>e.colors.interactiveFg.brandPress),(({theme:e})=>e.colors.interactiveFg.brandPress)),po=(0,m.default)(ea.Link).withConfig({displayName:"navigationComponents__NavLink",componentId:"sc-6htb2i-4"})((({active:e,theme:t,isIconLink:a})=>(0,m.css)([""," color:",";*{transition:color 0.25s linear,stroke 0.25s linear;}",";:hover{",";}"],a&&(0,m.css)(["display:grid;grid-template-columns:1fr 4fr;grid-template-areas:'icon link link link link';"]),t.colors.fg.secondary,e&&uo,uo))),mo=(0,m.default)(Sa.Text.Span).withConfig({displayName:"navigationComponents__PathName",componentId:"sc-6htb2i-5"})(["grid-area:link;"]),fo=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"navigationComponents__AppInfo",componentId:"sc-6htb2i-6"})((({theme:e})=>(0,m.css)(["color:",";"],e.colors.fg.secondary)));function go(){return go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},go.apply(null,arguments)}const bo=m.default.div.withConfig({displayName:"leftRail__IconWrap",componentId:"sc-wua966-0"})(["position:relative;"]);const ho=function LeftRail(){const e=eo((({state:e})=>e.activeRoute)),{newStoryURL:t,version:a,leftRailSecondaryNavigation:o,canViewDefaultTemplates:l,styleConstants:{topOffset:i}}=y(),s=(0,b.useRef)(null),c=(0,b.useRef)(null),{state:{sideBarVisible:d},actions:{toggleSideBar:u}}=no(),p=(0,b.useCallback)((({target:e})=>{e!==s.current&&e!==c.current&&u()}),[u,s,c]),m=(0,b.useCallback)((()=>{d&&u()}),[u,d]);(0,b.useFocusOut)(s,m,[d]),(0,b.useLayoutEffect)((()=>{d&&s.current&&s.current.focus()}),[d]);const f=(0,b.useCallback)((()=>{(0,E.trackEvent)("create_new_story")}),[]),g=(0,b.useCallback)(((e,t)=>{(0,E.trackClick)(e,t.trackingEvent)}),[]);return n.createElement(Ha,{onClickCapture:p,ref:s,isOpen:d,topOffset:i,role:"navigation","aria-label":(0,r.__)("Main dashboard navigation","web-stories")},n.createElement("div",{ref:c},n.createElement(io,{forwardedAs:"h2"},n.createElement(Xa,{title:(0,r.__)("Web Stories Dashboard","web-stories")})),n.createElement(lo,null,n.createElement(Bt.ButtonAsLink,{type:Mt.ButtonType.Quaternary,size:Mt.ButtonSize.Small,href:t,onClick:f},(0,r.__)("Create New Story","web-stories"))),n.createElement(lo,null,n.createElement(so,null,Ze.map((({Icon:t,...a})=>a.value===Ye.TEMPLATES_GALLERY&&!l?null:n.createElement(co,{key:a.value},n.createElement(po,go({active:e===a.value,href:to(a.value),size:Ya.TextSize.Small,isBold:!0,isIconLink:Boolean(t),"aria-label":e===a.value?(0,X.default)(/* translators: %s: the current page, for example "Dashboard". */ /* translators: %s: the current page, for example "Dashboard". */
(0,r.__)("%s (active view)","web-stories"),a.label):a.label},a.isExternal&&{rel:"noreferrer",target:"_blank",onClick:e=>g(e,a)}),n.createElement(bo,null,t&&n.createElement(t,{width:"22px"})),n.createElement(mo,{size:Ya.TextSize.Small,isBold:!0},a.label)))))))),n.createElement(lo,null,o&&n.createElement(so,null,o.map((t=>n.createElement(co,{key:t.value},n.createElement(po,go({active:e===t.value,href:to(t.value),size:Ya.TextSize.Small,"aria-label":e===t.value?(0,X.default)(/* translators: %s: the current page, for example "Dashboard". */ /* translators: %s: the current page, for example "Dashboard". */
(0,r.__)("%s (active view)","web-stories"),t.label):t.label},t.isExternal&&{rel:"noreferrer",target:"_blank",onClick:e=>g(e,t)}),n.createElement(Sa.Text.Span,{size:Ya.TextSize.Small,isBold:!0},t.label)))))),n.createElement(fo,{size:Ya.TextSize.XSmall},(0,X.default)(/* translators: 1: Current Year, 2: App Version */ /* translators: 1: Current Year, 2: App Version */
(0,r.__)("© %1$s Google Version %2$s","web-stories"),(new Date).getFullYear(),a))))},_o=(0,m.default)(q).attrs({width:24,height:24}).withConfig({displayName:"menuButton__MenuIcon",componentId:"sc-ov12l5-0"})(["display:block;color:",";"],(({theme:e})=>e.colors.interactiveFg.brandNormal)),yo=m.default.button.withConfig({displayName:"menuButton__TransparentButton",componentId:"sc-ov12l5-1"})(["display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;padding:0;margin-right:16px;background:transparent;border:0;border-radius:",";"," ",""],(({theme:e})=>e.borders.radius.small),qt.focusableOutlineCSS,(({showOnlyOnSmallViewport:e})=>e&&(0,m.css)(["display:none;@media screen and (max-width:","px){display:inline-block;}"],je)));const Eo=function NavMenuButton({showOnlyOnSmallViewport:e}){const{actions:t}=no();return n.createElement(yo,{onClick:t.toggleSideBar,showOnlyOnSmallViewport:e,"aria-label":(0,r.__)("Toggle main navigation","web-stories")},n.createElement(_o,{"aria-hidden":!0}))};var So=a(23005);const wo=(0,m.default)(Bt.Button).withConfig({displayName:"scrollToTop__StyledButton",componentId:"sc-o0u22z-0"})((({$isVisible:e,theme:t})=>(0,m.css)(["position:fixed;right:40px;bottom:40px;height:50px;width:50px;display:flex;align-self:center;justify-content:space-around;align-items:center;contain:content;padding:8px;background-color:",";pointer-events:",";box-shadow:0px 4px 14px rgba(0,0,0,0.25);opacity:",";transition:opacity 300ms ease-in-out;"],t.colors.opacity.white64,e?"auto":"none",Number(e)))),vo=(0,m.default)(So.default).withConfig({displayName:"scrollToTop__DropUpArrowIcon",componentId:"sc-o0u22z-1"})(["position:relative;transform:scale(2.4);"]),To=()=>{const[e,t]=(0,b.useState)(!1),{actions:{scrollToTop:a}}=Pa(),o=(0,b.useDebouncedCallback)((()=>t(window.scrollY>0)),100);return(0,b.useEffect)((()=>(window.addEventListener("scroll",o,{passive:!0}),()=>{window.removeEventListener("scroll",o,{passive:!0})})),[o]),n.createElement(wo,{disabled:!e,"aria-label":(0,r.__)("Scroll back to top","web-stories"),"data-testid":"scroll-to-top-button",$isVisible:e,onClick:a,variant:Mt.ButtonVariant.Circle},n.createElement(vo,{"aria-hidden":!0}))};var Co=a(96833);const Io=m.default.table.withConfig({displayName:"table__Table",componentId:"sc-16y5cap-0"})([""," border-collapse:collapse;width:inherit;"],Co.expandTextPreset((({paragraph:e},{Small:t})=>e[t]))),ko=m.default.tbody.withConfig({displayName:"table__TableBody",componentId:"sc-16y5cap-1"})([""]),Lo=m.default.thead.withConfig({displayName:"table__TableHeader",componentId:"sc-16y5cap-2"})(["background:",";"],(({theme:e})=>e.colors.bg.secondary)),Ao=(0,m.default)(Lo).withConfig({displayName:"table__StickyTableHeader",componentId:"sc-16y5cap-3"})(["width:100%;border-top:0;border-bottom:0;th{height:100%;background:",";position:sticky;z-index:2;top:",";:first-child{border-top-left-radius:",";border-bottom-left-radius:",";}:last-child{border-top-right-radius:",";border-bottom-right-radius:",";}}"],(({theme:e})=>e.colors.bg.secondary),(({topOffset:e})=>`${e}px`),(({theme:e})=>e.borders.radius.small),(({theme:e})=>e.borders.radius.small),(({theme:e})=>e.borders.radius.small),(({theme:e})=>e.borders.radius.small)),xo=m.default.th.withConfig({displayName:"table__TableHeaderCell",componentId:"sc-16y5cap-4"})(["padding:16px;text-align:left;white-space:nowrap;"]),Oo=(0,m.default)(xo).withConfig({displayName:"table__TablePreviewHeaderCell",componentId:"sc-16y5cap-5"})(["padding-right:0;"]),Do=(0,m.default)(xo).withConfig({displayName:"table__TableDateHeaderCell",componentId:"sc-16y5cap-6"})(["min-width:160px;"]),No=(0,m.default)(xo).withConfig({displayName:"table__TableStatusHeaderCell",componentId:"sc-16y5cap-7"})(["display:table-cell;min-width:100px;@media ","{display:none;}"],(({theme:e})=>e.breakpoint.tabletMax)),Po=(0,m.default)(xo).withConfig({displayName:"table__TableAuthorHeaderCell",componentId:"sc-16y5cap-8"})(["min-width:110px;"]),Ro=(0,m.default)(xo).withConfig({displayName:"table__TableTitleHeaderCell",componentId:"sc-16y5cap-9"})(["padding-left:0;width:30%;min-width:135px;span{display:none;margin-right:5px;}"]),Bo=((0,m.default)(xo).withConfig({displayName:"table__TableContentHeaderCell",componentId:"sc-16y5cap-10"})(["width:17.5%;min-width:150px;"]),m.default.tr.withConfig({displayName:"table__TableRow",componentId:"sc-16y5cap-11"})(["min-width:1250px;@media ","{min-width:0;}"],(({theme:e})=>e.breakpoint.tabletMax))),Mo=m.default.td.withConfig({displayName:"table__TableCell",componentId:"sc-16y5cap-12"})(["padding:","px;font-weight:normal;word-break:break-word;height:","px;vertical-align:middle;span{color:",";line-height:20px;}"],16,82,(({theme:e})=>e.colors.standard.black)),Uo=(0,m.default)(Mo).withConfig({displayName:"table__TableStatusCell",componentId:"sc-16y5cap-13"})(["display:table-cell;span{color:",";}@media ","{display:none;}"],(({theme:e})=>e.colors.fg.secondary),(({theme:e})=>e.breakpoint.tabletMax)),Fo=((0,m.default)(Mo).withConfig({displayName:"table__TableTitleCell",componentId:"sc-16y5cap-14"})(["width:30%;word-wrap:break-word;"]),(0,m.default)(Mo).withConfig({displayName:"table__TableContentCell",componentId:"sc-16y5cap-15"})(["width:17.5%;min-width:150px;word-wrap:break-word;"]),(0,m.default)(Mo).withConfig({displayName:"table__TablePreviewCell",componentId:"sc-16y5cap-16"})(["width:","px;"],qe[Ve.THUMBNAIL]));var zo,Go=a(37699),Ho=a(14560);function jo(){return jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},jo.apply(null,arguments)}function Tooltip({placement:e=Go.Placement.Bottom,...t}){const{isRTL:a}=y(),o=a?Go.RTL_PLACEMENT[e]:e;return n.createElement(Ho.default,jo({placement:o},t))}function Vo(){return Vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Vo.apply(null,arguments)}const SvgTable=({title:e,titleId:t,...a})=>n.createElement("svg",Vo({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,zo||(zo=n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.5 9A1.5 1.5 0 0 0 8 10.5v11A1.5 1.5 0 0 0 9.5 23h13a1.5 1.5 0 0 0 1.5-1.5v-11A1.5 1.5 0 0 0 22.5 9h-13m3 1h-3a.5.5 0 0 0-.5.5V13h3.5zM9 14v4h3.5v-4zm0 5v2.5a.5.5 0 0 0 .5.5h3v-3zm4.5 3h9a.5.5 0 0 0 .5-.5V19h-9.5zm9.5-4v-4h-9.5v4zm0-5v-2.5a.5.5 0 0 0-.5-.5h-9v3z",clipRule:"evenodd"}))),qo=(0,n.memo)(SvgTable);var Wo=a(41167);const $o=m.default.div.withConfig({displayName:"viewStyleBar__Container",componentId:"sc-17r9rf0-0"})(["display:flex;justify-content:flex-end;align-items:center;"]),Ko=m.default.button.withConfig({displayName:"viewStyleBar__ToggleButton",componentId:"sc-17r9rf0-1"})(["border:none;border-radius:",";"," padding:0;background:transparent;cursor:pointer;&:hover svg{color:",";}&:active svg{color:",";}"],(({theme:e})=>e.borders.radius.small),qt.focusableOutlineCSS,(({theme:e})=>e.colors.interactiveFg.hover),(({theme:e})=>e.colors.interactiveFg.active));function ViewStyleBar({onPress:e,layoutStyle:t}){return n.createElement($o,null,n.createElement(Tooltip,{title:et[t],placement:Go.Placement.BottomEnd,hasTail:!0},n.createElement(Ko,{"aria-label":et[t],onClick:e},t===Qe.GRID&&n.createElement(qo,{height:"32px",width:"32px","data-testid":"list-icon"}),t===Qe.LIST&&n.createElement(Wo.default,{height:"32px",width:"32px","data-testid":"grid-icon"}))))}const Xo=(0,m.createGlobalStyle)(["h1,h2,h3,h4,h5,h6,p,a{margin:0;}"]),Yo=e=>""===e?(0,r.__)("Untitled","web-stories"):e,Jo=(0,m.createGlobalStyle)(["*:focus{outline:none !important;}"]),Zo=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab"],Qo=()=>{const[e,t]=(0,b.useState)(!1),a=a=>{!e&&Zo.includes(a.key)&&t(!0)},o=()=>{e&&t(!1)};return(0,b.useEffect)((()=>(document.addEventListener("keydown",a),document.addEventListener("mousedown",o),function(){document.removeEventListener("keydown",a),document.removeEventListener("mousedown",o)}))),(0,b.useEffect)((()=>{document.body.classList.toggle("useskeyboard",e)}),[e]),e?null:n.createElement(Jo,null)};function en({isActiveSearch:e,currentFilter:t,totalResults:a,view:o}){return(0,b.useMemo)((()=>{const n=a??0,l=ot[o]?.[t]||"",i="function"==typeof l?l(n):l;return e?(0,X.default)(/* translators: %s: number of results. */ /* translators: %s: number of results. */
(0,r._n)("%s result","%s results",n,"web-stories"),(0,X.default)("<strong>%s</strong>",n)):i}),[e,a,o,t])}const tn=e=>Math.round(e/.6666666666666666),an=e=>e<=je?Ve.TABLET:Ve.DESKTOP,on=(e,{bp:t,respectSetWidth:a,availableContainerSpace:o})=>{if(a){return{width:e,height:tn(e)}}t===Ve.DESKTOP&&(o-=He);const n=Math.floor(o/e),r=e+(o-(e*n+We*(n-1)+2*Ke))/n;return{width:r,height:tn(r)}},nn=e=>window.innerWidth<je?je:e;function rn(e={}){const{thumbnailMode:t=!1,isGrid:a}=e,{containerId:o}=y(),n=(0,b.useRef)(document.getElementById(o)),[r,l]=(0,b.useState)(window.innerWidth),[i,s]=(0,b.useState)(an(r)),[c,d]=(0,b.useState)(nn(n.current?.offsetWidth||window.innerWidth)),u=(0,b.useDebouncedCallback)((e=>{l(e)}),500);return(0,b.useEffect)((()=>{s(an(r))}),[r]),(0,b.useResizeEffect)(n,(({width:e})=>{d(nn(e)),window.innerWidth!==r&&u(window.innerWidth)}),[d,r,u]),(0,b.useMemo)((()=>({pageSize:on(qe[t?Ve.THUMBNAIL:i],{respectSetWidth:!a||t,availableContainerSpace:c,bp:i})})),[i,a,t,c])}const ln=(e,{MIN:t,MAX:a})=>Math.min(Math.max(e,t),a);Rt().shape({style:Rt().oneOf(Object.values(Qe)),toggleStyle:Rt().func,pageSize:Xt}),Rt().shape({filterId:Rt().number,toggleFilterId:Rt().func,queriedAuthors:Rt().arrayOf(Rt().shape({id:Rt().number,name:Rt().string})).isRequired,setQueriedAuthors:Rt().func}),Rt().shape({value:Rt().oneOfType([Rt().number,Rt().string]),set:Rt().func}),Rt().shape({value:Rt().oneOf(Object.values(ne)),set:Rt().func,direction:Rt().oneOf(Object.values(oe)),setDirection:Rt().func}),Rt().shape({value:Rt().number,set:Rt().func,requestNextPage:Rt().func}),Rt().shape({keyword:Rt().string,setKeyword:Rt().func}),Rt().shape({current:Rt().bool});Rt().shape({style:Rt().oneOf(Object.values(Qe)),pageSize:Xt}),Rt().shape({value:Rt().oneOfType([Rt().number,Rt().string]),set:Rt().func}),Rt().shape({value:Rt().number,set:Rt().func,requestNextPage:Rt().func}),Rt().shape({keyword:Rt().string,setKeyword:Rt().func}),Rt().shape({value:Rt().oneOf(Object.values(Re)),set:Rt().func});const sn=()=>{},cn=()=>({isRTL:!1,userId:1,locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},newStoryURL:"",cdnURL:"https://wp.stories.google/static/main/",version:"",capabilities:{canManageSettings:!1,canUploadFiles:!1},canViewDefaultTemplates:!1,flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0}});Object.defineProperty(f.default,"name",{value:"stylisRTLPlugin"});const dn=function Dashboard({config:e,children:t}){const a=(0,l.default)(cn(),e),o={...i.theme,colors:s.light},{isRTL:r,flags:b,styleConstants:{leftOffset:h,topOffset:y}={}}=a;return n.createElement(g.FlagsProvider,{features:b},n.createElement(m.StyleSheetManager,{stylisPlugins:r?[f.default]:[]},n.createElement(m.ThemeProvider,{theme:o},n.createElement(c.Styles,null),n.createElement(d.ModalGlobalStyle,null),n.createElement(_,{config:a},n.createElement(ApiProvider,null,n.createElement(NavProvider,null,n.createElement(Qa,null,n.createElement(u.default,null,n.createElement(p.default,{value:{isRTL:r,leftOffset:h,topOffset:y}},n.createElement(Xo,null),n.createElement(Qo,null),t)))))))))};var un=a(40089),pn=a(68009);a(72577);const mn="UPDATE_FILTER",fn="UPDATE_SORT",gn="REGISTER_FILTERS",bn=(e,{type:t,payload:a={}})=>{switch(t){case mn:{const t=["search","status"],{key:o,value:n}=a,r=e.filters.find((e=>e.key===o));if(!r)return e;if(n.filterId&&r?.filterId===n.filterId){if(t.includes(o))return e;n.filterId=null}const l=e.filters.indexOf(r),i=[...e.filters];i[l]={...r,...n};const s={};for(const e of i)e.filterId&&(s[e.key]=e.filterId);return{...e,filters:i,filtersObject:s}}case fn:{const{type:t,values:o}=a,n={},r="story"===t?re:Be;for(const t in o)t in r&&Object.values(r[t]).includes(o[t])&&e.sortObject[t]!==o[t]&&(n[t]=o[t]);return 0===Object.entries(n).length?e:{...e,sortObject:{...e.sortObject,...n}}}case gn:{const{value:t}=a,o=e.filters.map((e=>e.key)),n=t.filter((e=>!o.includes(e.key)));return n.length?{...e,filters:[...n,...e.filters]}:e}default:return e}};function hn(e=b.identity){return(0,b.useContextSelector)(Dt,e)}const _n={};const yn=function(){const{getTaxonomies:e,getTaxonomyTerms:t}=hn((({actions:{taxonomyApi:{getTaxonomies:e,getTaxonomyTerms:t}}})=>({getTaxonomies:e,getTaxonomyTerms:t}))),a=(0,b.useCallback)((async(e,a)=>{const{restBase:o,restPath:n}=e;return(await t(n,{search:a,per_page:-1})).map((e=>({...e,restBase:o,restPath:n})))}),[t]),o=(0,b.useCallback)((async e=>{const{restBase:t}=e;return _n[t]||(_n[t]=await a(e)),_n[t]}),[a]),n=(0,b.useCallback)((async()=>(await e({hierarchical:!0,show_ui:!0})).map((e=>({key:e.restBase,restPath:e.restPath,placeholder:e.labels.allItems,ariaLabel:e.labels.filterByItem,noMatchesFoundLabel:e.labels.notFound,searchPlaceholder:e.labels.searchItems,query:t=>a(e,t),getPrimaryOptions:()=>o(e)})))),[a,o,e]);return n};let En=null;const Sn=function(){const{getAuthors:e}=hn((({actions:{usersApi:{getAuthors:e}}})=>({getAuthors:e}))),t=(0,b.useCallback)((async t=>(await e(t)).map((({id:e,name:t})=>({id:e,name:t})))),[e]),a=(0,b.useCallback)((async()=>(En||(En=await t()),En)),[t]);return(0,b.useCallback)((()=>({key:"author",ariaLabel:(0,r.__)("Filter stories by author","web-stories"),placeholder:(0,r.__)("All Authors","web-stories"),searchPlaceholder:(0,r.__)("Search Authors","web-stories"),noMatchesFoundLabel:(0,r.__)("No authors found","web-stories"),query:t,getPrimaryOptions:a})),[t,a])},wn=(0,b.createContext)({state:{},actions:{}});function StoryFiltersProvider({children:e}){const t=yn(),a=Sn(),[o,r]=(0,b.useReducer)(bn,{filters:[],filtersObject:{},sortObject:{}}),l=(0,b.useCallback)((e=>{r({type:fn,payload:{type:"story",values:e}})}),[]),i=(0,b.useCallback)(((e,t)=>{r({type:mn,payload:{key:e,value:t}})}),[]),s=(0,b.useCallback)((e=>{r({type:gn,payload:{value:e}})}),[]),c=(0,b.useCallback)((async()=>{const e=[...await t(),a()].filter((e=>Boolean(e)));e.length&&s(e)}),[s,a,t]),d=(0,b.useMemo)((()=>({state:o,actions:{updateFilter:i,updateSort:l,registerFilters:s}})),[o,i,l,s]);return(0,b.useEffect)((()=>{c()}),[c]),n.createElement(wn.Provider,{value:d},e)}function vn(e=b.identity){return(0,b.useContextSelector)(wn,e)}var Tn=a(56205);const Cn=(0,m.default)(Tn.default).withConfig({displayName:"sortDropDown__StyledDropDown",componentId:"sc-lqi6ue-0"})(["width:210px;"]);const In=function SortDropDown({pageSortOptions:e,pageSortDefaultOption:t,currentSort:a,handleSortChange:o}){const l=(0,b.useCallback)(((e,t)=>{o({orderby:t})}),[o]);return n.createElement(Cn,{ariaLabel:(0,r.__)("Choose sort option for display","web-stories"),options:e,type:ze.DropDown,selectedValue:a?.orderby||t,onMenuItemClick:l})},kn=350,Ln=m.default.div.withConfig({displayName:"bodyViewOptions__DisplayFormatContainer",componentId:"sc-x2ax3p-0"})(["display:grid;gap:1rem;min-height:76px;grid-template-columns:1fr auto auto;justify-content:start;align-items:center;margin-top:-10px;"]),An=m.default.div.withConfig({displayName:"bodyViewOptions__StorySortDropdownContainer",componentId:"sc-x2ax3p-1"})(["margin:auto 8px;align-self:flex-end;"]),xn=m.default.div.withConfig({displayName:"bodyViewOptions__ControlsContainer",componentId:"sc-x2ax3p-2"})(["display:flex;flex-wrap:wrap;margin:1rem 0;row-gap:1rem;justify-self:end;"]),On=m.default.div.withConfig({displayName:"bodyViewOptions__BodyViewOptionsHeader",componentId:"sc-x2ax3p-3"})([""]),Dn=(0,m.default)(pn.default).withConfig({displayName:"bodyViewOptions__StyledDatalist",componentId:"sc-x2ax3p-4"})(["max-width:","px;"],kn);function BodyViewOptions({handleLayoutSelect:e,resultsLabel:t,layoutStyle:a,pageSortOptions:o=[],pageSortDefaultOption:l,showGridToggle:i,showSortDropdown:s,filters:c=[],currentSort:d,handleSortChange:u}){const{updateFilter:p}=vn((({actions:{updateFilter:e}})=>({updateFilter:e})));return n.createElement(ba,null,n.createElement(On,{id:"body-view-options-header"}),n.createElement(Ln,null,n.createElement(Sa.Text.Span,{size:Ya.TextSize.Small},n.createElement(un.default,null,t)),n.createElement(xn,null,c?.length?c.map((e=>n.createElement(An,{key:e.key,title:e.placeholder},n.createElement(Dn,{hasSearch:!0,hasDropDownBorder:!0,searchResultsLabel:(0,r.__)("Search results","web-stories"),"aria-label":e.ariaLabel,onChange:({id:t})=>{p(e.key,{filterId:t})},getOptionsByQuery:e.query,getPrimaryOptions:e.getPrimaryOptions,selectedId:e.filterId,placeholder:e.placeholder,noMatchesFoundLabel:e.noMatchesFoundLabel,searchPlaceholder:e.searchPlaceholder,offsetOverride:!0,maxWidth:kn,containerStyleOverrides:(0,m.css)(["flex-direction:column;"])})))):null,s&&n.createElement(An,null,n.createElement(In,{pageSortOptions:o,pageSortDefaultOption:l,currentSort:d,handleSortChange:u}))),i&&n.createElement(ViewStyleBar,{layoutStyle:a,onPress:e})))}var Nn,Pn,Rn;function Bn(){return Bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Bn.apply(null,arguments)}const SvgDesertColor=({title:e,titleId:t,...a})=>n.createElement("svg",Bn({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 274 118","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,Nn||(Nn=n.createElement("path",{fill:"#F4F2EF",d:"M59.68 117.706 8.551 106.934C2.505 105.66-.951 99.261 1.3 93.506l1.18-3.019a10 10 0 0 1 7.987-6.268l78.795-10.544a10 10 0 0 0 2.524-.683l82.061-34.244a10 10 0 0 1 8.263.255l56.296 27.675q.654.323 1.349.545l26.84 8.637c9.132 2.939 9.287 15.804.228 18.962l-26.529 9.248c-.819.285-1.671.463-2.536.529L62.497 117.892a10 10 0 0 1-2.818-.186"})),Pn||(Pn=n.createElement("path",{fill:"#FBBC04",fillRule:"evenodd",d:"M224 26a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v31h4V44a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-7v17h-10V49h-7a2 2 0 0 1-2-2V31a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v13h4zM120.857 53.179a2.143 2.143 0 0 1 4.286 0v14.25h1.714V62.07a1.072 1.072 0 0 1 2.143 0V68.5a1.2 1.2 0 0 1-.048.319 1.07 1.07 0 0 1-1.023.753h-2.786v5.892h-4.286v-7.892h-2.786A1.073 1.073 0 0 1 117 66.5v-6.429a1.072 1.072 0 0 1 2.143 0v5.358h1.714zM64.786 8a8 8 0 0 1 8-8h.428a8 8 0 0 1 8 8v34.643h6.572V22a4 4 0 0 1 4-4H92a4 4 0 0 1 4 4v24.857a4 4 0 0 1-4 4H81.214v42.786H64.786V78.857H54a3.99 3.99 0 0 1-2.828-1.171A4 4 0 0 1 50 74.857V50a4 4 0 0 1 4-4h.214a4 4 0 0 1 4 4v20.643h6.572z",clipRule:"evenodd"})),Rn||(Rn=n.createElement("circle",{cx:213,cy:72,r:13,fill:"#4285F4"}))),Mn=(0,n.memo)(SvgDesertColor),Un=m.default.div.withConfig({displayName:"emptyContentMessage__Message",componentId:"sc-1wgc64w-0"})(["display:flex;flex-direction:column;align-items:center;max-width:400px;margin:20vh auto;& > *{text-align:center;margin:0 auto;}button,a{margin-top:48px;}"]),Fn=(0,m.default)(Mn).withConfig({displayName:"emptyContentMessage__EmptyImage",componentId:"sc-1wgc64w-1"})(["margin-bottom:48px;"]);const zn=function EmptyContentMessage({children:e}){return n.createElement(Un,null,n.createElement(Fn,{"aria-hidden":!0,width:274,height:118}),e)};var Gn=a(41595);const Hn=m.default.h1.withConfig({displayName:"display__Display",componentId:"sc-1x3xqpc-0"})([""," ",""],Gn.defaultTypographyStyle,(({size:e=Ya.TextSize.Medium,theme:t})=>Co.expandPresetStyles({preset:t.typography.presets.display[e],theme:t})));var jn=a(8378),Vn=a(66189),qn=a(67340);const Wn=m.default.div.withConfig({displayName:"search__DropDownContainer",componentId:"sc-1i3s2c5-0"})(["display:flex;flex-direction:column;width:100%;"]),$n=(0,m.default)(Sa.Text.Label).withConfig({displayName:"search__Label",componentId:"sc-1i3s2c5-1"})(["margin-bottom:8px;color:",";"],(({theme:e,disabled:t})=>e.colors.fg[t?"disable":"primary"])),Kn=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"search__Hint",componentId:"sc-1i3s2c5-2"})(["margin-top:12px;padding-left:2px;color:",";"],(({theme:e,hasError:t})=>e.colors.fg[t?"negative":"tertiary"]));var Xn=a(40341),Yn=a(90650),Jn=(a(30670),a(50822)),Zn=a(96281);function Qn(){return Qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Qn.apply(null,arguments)}const er=m.default.div.withConfig({displayName:"search__SearchInputWrapper",componentId:"sc-1jug8cl-0"})([""]);const tr=function Search({ariaInputLabel:e=Xn.DEFAULT_ARIA_INPUT_LABEL,ariaClearLabel:t=Xn.DEFAULT_ARIA_CLEAR_LABEL,disabled:a,handleSearchValueChange:o,hasError:l,hint:i,label:s,onMenuItemClick:c,onClear:d,options:u=[],placeholder:p=Xn.DEFAULT_PLACEHOLDER,placement:m=Go.Placement.Bottom,popupFillWidth:f=Xn.DEFAULT_POPUP_FILL_WIDTH,popupZIndex:g,selectedValue:h,searchValue:_,...y}){const E=(0,b.useMemo)((()=>`list-${(0,Qt.default)()}`),[]),S=(0,b.useMemo)((()=>`select-button-${(0,Qt.default)()}`),[]),w=(0,b.useMemo)((()=>`clear-button-${(0,Qt.default)()}`),[]),v=(0,b.useRef)(null),T=(0,b.useRef)(null),{activeOption:C,getActiveOption:I,inputState:k,setInputState:L,isMenuFocused:A,setIsMenuFocused:x,isOpen:O,setIsOpen:D,groups:N}=function({handleSearchValueChange:e,selectedValue:t,searchValue:a,options:o}){const n=(0,Zn.default)("assertive"),[l,i]=(0,b.useState)(!1),s=(0,b.useDebouncedCallback)(i,100),[c,d]=(0,b.useState)(!1),u=(0,b.useDebouncedCallback)(d,300,{leading:!0});(0,b.useEffect)((()=>{l||u(!1)}),[l,u]);const p=(0,b.useMemo)((()=>(0,Jn.getGroups)(o)),[o]),m=(0,b.useCallback)((e=>p.flatMap((e=>e.options)).find((t=>String(t.value).toLowerCase()===String(e).toLowerCase()))),[p]),f=(0,b.useMemo)((()=>{const e=t?String(t.value):a;return e&&0!==p.length?m(e):null}),[t,a,p,m]),[g,h]=(0,b.useState)(a),_=(0,b.useCallback)((t=>{h(t),void 0!==t&&e?.(t)}),[e]);return(0,b.useEffect)((()=>{void 0===g&&void 0!==t?.value&&_(t?.label||"")}),[g,_,t]),(0,b.useEffect)((()=>{if(l&&g?.length){const e=o.length?(0,X.default)(/* translators: %d: number of results. */ /* translators: %d: number of results. */
(0,r._n)("%d result found.","%d results found.",o.length,"web-stories"),String(o.length)):(0,r.__)("No results found.","web-stories");n(e)}}),[g,l,o.length,n]),{activeOption:f,getActiveOption:m,groups:p,inputState:g,setInputState:_,isMenuFocused:c,setIsMenuFocused:u,isOpen:l,setIsOpen:s}}({options:u,selectedValue:h,searchValue:_,handleSearchValueChange:o}),P=(0,b.useMemo)((()=>Boolean(a||!k?.length)),[a,k]),R=(0,b.useCallback)((()=>{D(!0),x(!1)}),[D,x]),B=(0,b.useCallback)((e=>{e.preventDefault(),D(!0)}),[D]),M=(0,b.useCallback)((e=>{w&&e?.currentTarget instanceof HTMLElement&&e.currentTarget.id===w||D(!1)}),[w,D]),U=(0,b.useCallback)(((e,t)=>{D(!1);const a=I(t)||{label:String(t),value:t};L(String(a.label)),c?.(e,a)}),[I,L,D,c]),F=(0,b.useCallback)((()=>v?.current?.focus()),[]),z=(0,b.useCallback)((({target:e})=>{L(e.value),D(e.value.length>0)}),[L,D]),G=(0,b.useCallback)((()=>{L(""),d?.(),F?.()}),[F,L,d]),H=(0,b.useCallback)((()=>{D(!1),x(!1)}),[D,x]),j=(0,b.useCallback)((()=>x(!0)),[x]),V=(0,b.useCallback)((()=>{(P||0===k?.trim().length)&&(x(!1),D(!1))}),[k,x,P,D]),q=(0,b.useCallback)((e=>{const{key:t}=e;"Escape"===t?P||x(!1):"Tab"===t?V():"ArrowDown"===t?j():"Enter"===t&&k&&k.trim().length>0&&U(e.nativeEvent,String(k))}),[P,x,V,j,k,U]);return(0,b.useFocusOut)(T,V,[V]),n.createElement(Wn,null,s&&n.createElement($n,{size:Ya.TextSize.Small,disabled:a,isBold:!0},s),n.createElement(er,{ref:T},n.createElement(Yn.default,Qn({"aria-label":e,hasError:l,id:S,onChange:z,onClick:B,onFocus:R,onKeyDown:q,placeholder:p,ariaClearLabel:t,clearId:w,disabled:a,handleClearInput:G,handleTabClear:H,inputValue:k||"",isOpen:O,listId:E,ref:v},y))),!P&&n.createElement(qn.default,{anchor:v,isOpen:O,placement:m,fillWidth:f,zIndex:g,ignoreMaxOffsetY:!0},n.createElement(Vn.default,Qn({activeValue:C?.value,handleReturnToParent:F,isMenuFocused:A,listId:E,menuAriaLabel:(0,X.default)(/* translators: %s: dropdown aria label or general dropdown label if there is no specific aria label. */ /* translators: %s: dropdown aria label or general dropdown label if there is no specific aria label. */
(0,r.__)("%s Option List Selector","web-stories"),e),onDismissMenu:M,handleMenuItemSelect:U,groups:N,parentId:S},y))),i&&n.createElement(Kn,{hasError:l,size:Ya.TextSize.Small},i))},ar=(0,m.default)(ba).withConfig({displayName:"pageHeading__HeadingContainer",componentId:"sc-1ln7suo-0"})(["display:flex;align-items:center;flex-wrap:wrap;justify-content:space-between;margin-bottom:16px;padding-top:48px;border-bottom:1px solid ",";"],(({theme:e})=>e.colors.divider.secondary)),or=(0,m.default)(Hn).withConfig({displayName:"pageHeading__StyledHeadline",componentId:"sc-1ln7suo-1"})(["display:flex;align-items:center;margin-right:28px;padding-bottom:24px;white-space:nowrap;"]),nr=m.default.div.withConfig({displayName:"pageHeading__HeadlineFilters",componentId:"sc-1ln7suo-2"})(["display:flex;align-items:center;margin:auto 0 auto 0;padding-bottom:24px;"]),rr=m.default.div.withConfig({displayName:"pageHeading__HeaderSearch",componentId:"sc-1ln7suo-3"})(["width:208px;max-width:208px;min-width:208px;margin:auto 0;padding-bottom:24px;"]),lr=({children:e,heading:t,searchPlaceholder:a,searchOptions:o=[],showSearch:l,handleSearchChange:i,searchValue:s,onClear:c=jn.noop})=>n.createElement(ar,null,n.createElement(or,{as:"h2",size:Ya.TextSize.Small},n.createElement(Eo,{showOnlyOnSmallViewport:!0}),t),e&&n.createElement(nr,null,e),l&&n.createElement(rr,null,n.createElement(tr,{placeholder:a,searchValue:s,options:o,handleSearchValueChange:i,onClear:c,emptyText:(0,r.__)("No options available","web-stories")})));var ir,sr=a(7927),cr=a(99516),dr=a(2190),ur=a(18940);function pr(){return pr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},pr.apply(null,arguments)}const SvgArrowDown=({title:e,titleId:t,...a})=>n.createElement("svg",pr({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,ir||(ir=n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m16.5 21.282 4.645-4.704a.5.5 0 0 1 .711.702l-5.5 5.571a.5.5 0 0 1-.712 0l-5.5-5.57a.5.5 0 0 1 .712-.703l4.644 4.704V9.5a.5.5 0 0 1 1 0z",clipRule:"evenodd"}))),mr=(0,n.memo)(SvgArrowDown),fr=({menuItems:e,story:t,isLocked:a})=>{const o=e.default?()=>e.default(t):sn;return e.filter((e=>void 0===e.isEnabled||e.isEnabled(t))).map((({capability:n,value:r,...l})=>{const i=(t=>e.find((e=>e?.value===t)))(r),s={onClick:i?()=>i.action(t):o};switch(r){case Y:s.href=t.bottomTargetAction,s.openNewTab=!1;break;case te:s.href=t.previewLink,s.openNewTab=!0;break;case J:case Q:s.disabled=a}return delete l?.action,{...l,...s}}))};var gr=a(54658);const br=m.default.div.withConfig({displayName:"storyListItem__PreviewImage",componentId:"sc-1w22569-0"})(["display:inline-block;background:",";width:","px;height:","px;object-fit:contain;border-radius:",";"],(({theme:e})=>e.colors.gradient.placeholder),qe[Ve.THUMBNAIL],qe[Ve.THUMBNAIL]/(3/4),(({theme:e})=>e.borders.radius.small)),hr=m.default.div.withConfig({displayName:"storyListItem__PreviewWrapper",componentId:"sc-1w22569-1"})(["position:relative;"]),_r=(0,m.default)(gr.default).withConfig({displayName:"storyListItem__LockIcon",componentId:"sc-1w22569-2"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:24px;display:block;margin:auto;background-color:",";color:",";border-radius:",";"],(({theme:e})=>e.colors.interactiveBg.brandNormal),(({theme:e})=>e.colors.standard.white),(({theme:e})=>e.borders.radius.round)),yr=(0,m.default)(Bo).withConfig({displayName:"storyListItem__StyledTableRow",componentId:"sc-1w22569-3"})(["&:hover ",",&:focus-within ","{opacity:1;}"],sa,sa),Er=m.default.div.withConfig({displayName:"storyListItem__TitleTableCellContainer",componentId:"sc-1w22569-4"})(["display:flex;align-items:center;justify-content:flex-start;","{margin:10px auto;}&:hover ",",&:active ","{opacity:1;}"],sa,sa,sa);function Sr(e){window.getSelection().selectAllChildren(e.target)}function wr(){window.getSelection().removeAllRanges()}const StoryListItem=({story:e,renameStory:t,userId:a,storyMenu:o,storyStatus:l})=>{const i=(0,b.useMemo)((()=>e?.locked&&a!==e?.lockUser.id),[e,a]),s=Yo(e.title),c=(0,b.useMemo)((()=>fr({menuItems:o.menuItems,story:e,isLocked:i})),[o,e,i]),d=(0,b.useMemo)((()=>c.length?n.createElement(StoryMenu,{menuLabel:(0,X.default)(/* translators: %s: story title.*/ /* translators: %s: story title.*/
(0,r.__)("Context menu for %s","web-stories"),s),onMoreButtonSelected:(e,t)=>o.handleMenuToggle(t),contextMenuId:o.contextMenuId,storyId:e.id,menuItems:c,verticalAlign:"center"}):null),[c,s,o,e]);return n.createElement(yr,{"data-testid":`story-list-item-${e.id}`},n.createElement(Fo,null,n.createElement(Tooltip,{title:i&&e?.lockUser.name?(0,X.default)(/* translators: %s: user name */ /* translators: %s: user name */
(0,r.__)("%s is currently editing this story","web-stories"),e?.lockUser.name):""},n.createElement(hr,null,n.createElement(br,e.featuredMediaUrl?{src:e.featuredMediaUrl,alt:(0,X.default)(/* translators: %s: Story title. */ /* translators: %s: Story title. */
(0,r.__)("%s Poster image","web-stories"),s),as:"img",decoding:"async"}:null),i&&n.createElement(_r,null)))),n.createElement(Mo,null,n.createElement(Er,null,t.id===e.id?n.createElement(Oa,{onEditComplete:a=>t.handleOnRenameStory(e,a),onEditCancel:t.handleCancelRename,value:e.title,id:e.id,label:(0,r.__)("Rename story","web-stories")}):n.createElement(n.Fragment,null,n.createElement(ro.Headline,{tabIndex:0,onFocus:Sr,onBlur:wr,size:Ya.TextSize.XXXSmall,as:"h3","aria-label":i?(0,X.default)(/* translators: 1: story title. 2: user currently editing the story. */ /* translators: 1: story title. 2: user currently editing the story. */
(0,r.__)("%1$s (locked by %2$s)","web-stories"),s,e?.lockUser.name):s},s),d))),n.createElement(Mo,null,n.createElement(Sa.Text.Span,{size:Ya.TextSize.Small},e.author?.name||"—")),n.createElement(Mo,null,n.createElement(Sa.Text.Span,{size:Ya.TextSize.Small},Et(e.createdGmt))),n.createElement(Mo,null,n.createElement(Sa.Text.Span,{size:Ya.TextSize.Small},Et(e.modifiedGmt))),l!==ce.DRAFT&&n.createElement(Uo,null,n.createElement(Sa.Text.Span,{size:Ya.TextSize.Small},de[e?.status])))};var vr=a(52046);const{focusableOutlineCSS:Tr}=vr,Cr=m.default.div.withConfig({displayName:"listView__ListView",componentId:"sc-15nl0r5-0"})(["width:100%;"]),Ir=m.default.div.withConfig({displayName:"listView__ArrowIcon",componentId:"sc-15nl0r5-1"})(["width:32px;height:100%;display:inline-grid;color:",";vertical-align:middle;svg{visibility:",";transition:transform 0.15s;",";}"],(({theme:e})=>e.colors.fg.primary),(({active:e})=>e?"visible":"hidden"),(({asc:e})=>e&&(0,m.css)(["transform:rotate(180deg);"]))),kr=m.default.div.withConfig({displayName:"listView__EmptyIconSpace",componentId:"sc-15nl0r5-2"})(["height:32px;width:32px;"]),Lr=(0,m.default)(Ir).withConfig({displayName:"listView__ArrowIconWithTitle",componentId:"sc-15nl0r5-3"})([""," position:absolute;top:16px;@media ","{margin-left:4px;}"],(({active:e})=>!e&&"display: none;"),(({theme:e})=>e.breakpoint.mobile)),Ar=(0,m.default)(Sa.Text.Span).attrs({tabIndex:0,isBold:!0}).withConfig({displayName:"listView__SelectableTitle",componentId:"sc-15nl0r5-4"})(["color:",";cursor:pointer;",";"],(({theme:e})=>e.colors.blue[70]),(({theme:e})=>Tr(e.colors.border.focus,e.colors.bg.secondary))),xr={[oe.DESC]:oe.ASC,[oe.ASC]:oe.DESC};function StoryListView({hideStoryList:e,renameStory:t,stories:a,storyMenu:o}){const{userId:l,styleConstants:{topOffset:i}}=y(),{filters:s,sortObject:c,updateSort:d}=vn((({state:{filters:e,sortObject:t},actions:{updateSort:a}})=>({filters:e,sortObject:t,updateSort:a}))),[u,p]=(0,b.useMemo)((()=>[c?.orderby,c?.order]),[c]),m=(0,b.useMemo)((()=>s.filter((({key:e})=>"status"===e)).filterId),[s]),f=(0,b.useCallback)((e=>{d(e!==u?{orderby:e,order:le[e]}:{order:xr[p]})}),[d,u,p]),g=(0,b.useCallback)((({key:e},t)=>{"Enter"===e&&f(t)}),[f]),h=(0,b.useMemo)((()=>!e&&a.map((e=>n.createElement(StoryListItem,{key:`story-${e.id}`,story:e,userId:l,renameStory:t,storyStatus:m,storyMenu:o})))),[e,t,a,m,o,l]);return n.createElement(Cr,{"data-testid":"story-list-view"},n.createElement(Io,{"aria-label":(0,r.__)("List view of created stories","web-stories")},n.createElement(Ao,{topOffset:i},n.createElement(Bo,null,n.createElement(Oo,{onClick:()=>f(ne.NAME),onKeyDown:e=>g(e,ne.NAME)},n.createElement(Ar,{"aria-label":(0,r.__)("Title, select to sort table by story title","web-stories"),size:Ya.TextSize.Small,isBold:!0},(0,r.__)("Title","web-stories"))),n.createElement(Ro,{onClick:()=>f(ne.NAME),onKeyDown:e=>g(e,ne.NAME)},n.createElement(Ar,{"aria-hidden":!0,active:u===ne.NAME,size:Ya.TextSize.Small,isBold:!0},(0,r.__)("Title","web-stories")),n.createElement(Ir,{active:u===ne.NAME,asc:p===oe.ASC},n.createElement(mr,null))),n.createElement(Po,null,n.createElement(Ar,{"aria-label":(0,r.__)("Author, select to sort table by story author","web-stories"),onClick:()=>f(ne.CREATED_BY),onKeyDown:e=>g(e,ne.CREATED_BY),active:u===ne.CREATED_BY,size:Ya.TextSize.Small,isBold:!0},(0,r.__)("Author","web-stories")),n.createElement(Lr,{"aria-hidden":!0,active:u===ne.CREATED_BY,asc:p===oe.ASC},u===ne.CREATED_BY?n.createElement(mr,null):n.createElement(kr,null))),n.createElement(Do,null,n.createElement(Ar,{"aria-label":(0,r.__)("Creation date, select to sort table by date story was created","web-stories"),onClick:()=>f(ne.DATE_CREATED),onKeyDown:e=>g(e,ne.DATE_CREATED),active:u===ne.DATE_CREATED,size:Ya.TextSize.Small,isBold:!0},(0,r.__)("Date Created","web-stories")),n.createElement(Lr,{"aria-hidden":!0,active:u===ne.DATE_CREATED,asc:p===oe.ASC},n.createElement(mr,null))),n.createElement(Do,null,n.createElement(Ar,{"aria-label":(0,r.__)("Modification date, select to sort table by date story was last modified","web-stories"),onClick:()=>f(ne.LAST_MODIFIED),onKeyDown:e=>g(e,ne.LAST_MODIFIED),active:u===ne.LAST_MODIFIED,size:Ya.TextSize.Small,isBold:!0},(0,r.__)("Last Modified","web-stories")),n.createElement(Lr,{"aria-hidden":!0,active:u===ne.LAST_MODIFIED,asc:p===oe.ASC},n.createElement(mr,null))),m!==ce.DRAFT&&n.createElement(No,null,n.createElement(Sa.Text.Span,{isBold:!0,size:Ya.TextSize.Small},(0,r.__)("Publish State","web-stories"))))),n.createElement(ko,null,h)))}var Or=a(68268);const Dr=m.default.div.withConfig({displayName:"grid__Gradient",componentId:"sc-fbjjp8-0"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>e.colors.gradient.posterOverlay)),Nr=m.default.div.withConfig({displayName:"grid__Scrim",componentId:"sc-fbjjp8-1"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-end;border-radius:",";background:",";"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>e.colors.opacity.black3)),Pr=m.default.div.withConfig({displayName:"grid__Container",componentId:"sc-fbjjp8-2"})(["position:relative;"]),Rr=m.default.div.withConfig({displayName:"grid__Poster",componentId:"sc-fbjjp8-3"})(["height:100%;width:100%;object-fit:cover;border-radius:",";background:",";"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>e.colors.gradient.placeholder)),Br=(0,m.default)(ua).withConfig({displayName:"storyGridItem__CustomCardGridItem",componentId:"sc-1vhey8s-0"})(["display:grid;grid-template-columns:100%;grid-template-rows:",";"],(({$posterHeight:e})=>`${e}px auto`));Br.propTypes={$posterHeight:Rt().number};const Mr=m.default.div.withConfig({displayName:"storyGridItem__CardWrapper",componentId:"sc-1vhey8s-1"})(["position:absolute;height:100%;width:100%;"]),Ur=m.default.a.withConfig({displayName:"storyGridItem__ScrimAnchor",componentId:"sc-1vhey8s-2"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;border-radius:",";&:hover,&:focus{box-shadow:none;border:",";}"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>`4px solid ${e.colors.interactiveBg.active}`)),Fr=m.default.div.withConfig({displayName:"storyGridItem__StyledStoryDisplayContent",componentId:"sc-1vhey8s-3"})(["padding:20px 12px 8px 12px;display:flex;flex-direction:column;width:100%;"]),zr=m.default.div.withConfig({displayName:"storyGridItem__Row",componentId:"sc-1vhey8s-4"})(["width:100%;display:flex;align-items:flex-end;flex-wrap:wrap;"]),Gr=(0,m.default)(zr).withConfig({displayName:"storyGridItem__LockedRow",componentId:"sc-1vhey8s-5"})(["position:absolute;top:8px;right:8px;justify-content:flex-end;align-items:center;"]),Hr=m.default.div.withConfig({displayName:"storyGridItem__CardDetailsGrid",componentId:"sc-1vhey8s-6"})(["display:grid;grid-template-columns:80% auto;margin-top:4px;"]),jr=m.default.div.withConfig({displayName:"storyGridItem__CardDetailsColumn",componentId:"sc-1vhey8s-7"})(["display:flex;align-items:space-between;flex-direction:column;align-self:flex-end;"]),Vr=(0,m.default)(ro.Headline).attrs({as:"h3",size:Ya.TextSize.XSmall}).withConfig({displayName:"storyGridItem__Title",componentId:"sc-1vhey8s-8"})(["overflow:hidden;text-overflow:ellipsis;color:",";margin:0;max-height:calc(1.2em * 3);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;"],(({theme:e})=>e.colors.inverted.fg.primary)),qr=(0,m.default)(Sa.Text.Span).attrs({size:Ya.TextSize.XSmall}).withConfig({displayName:"storyGridItem__DetailCopy",componentId:"sc-1vhey8s-9"})(["color:",";margin:0;"],(({theme:e})=>e.colors.inverted.fg.primary)),Wr=m.default.img.withConfig({displayName:"storyGridItem__LockAvatar",componentId:"sc-1vhey8s-10"})(["height:40px;width:40px;border:",";border-radius:",";z-index:3;"],(({theme:e})=>`2px solid ${e.colors.interactiveBg.brandNormal}`),(({theme:e})=>e.borders.radius.small)),$r=(0,m.default)(gr.default).withConfig({displayName:"storyGridItem__LockIcon",componentId:"sc-1vhey8s-11"})(["color:",";display:inline;height:36px;width:36px;margin:-4px -4px -4px -10px;"],(({theme:e})=>e.colors.inverted.fg.primary)),Kr=({author:e,contextMenu:t,displayDate:a,editMode:o,formattedTitle:l,id:i,isLocked:s,lockUser:c={},onEditComplete:d,onEditCancel:u,status:p,title:m})=>{const f=(0,b.useMemo)((()=>{if(!a)return null;switch(p){case ce.PUBLISH:return(0,X.default)(/* translators: %s: published date */ /* translators: %s: published date */
(0,r.__)("Published %s","web-stories"),a);case ce.FUTURE:return(0,X.default)(/* translators: %s: future publish date */ /* translators: %s: future publish date */
(0,r.__)("Scheduled %s","web-stories"),a);default:return(0,X.default)(/* translators: %s: last modified date */ /* translators: %s: last modified date */
(0,r.__)("Modified %s","web-stories"),a)}}),[p,a]),{name:g,avatar:h}=c,_=s&&h&&n.createElement(Gr,null,n.createElement(Tooltip,{position:Go.Placement.BottomStart,title:g&&(0,X.default)(/* translators: %s: user name */ /* translators: %s: user name */
(0,r.__)("%s is currently editing this story","web-stories"),g)},n.createElement(Wr,{src:h,alt:g,decoding:"async",height:24,width:24,"data-test-id":"lock-user-avatar"})));return n.createElement(Fr,null,_,o?n.createElement(Oa,{onEditComplete:d,onEditCancel:u,value:m,id:i,label:(0,r.__)("Rename story","web-stories"),isInverted:!0}):n.createElement(zr,null,s&&n.createElement($r,null),n.createElement(Vr,null,l)),n.createElement(Hr,null,n.createElement(jr,null,p===ce.DRAFT&&n.createElement(qr,{isBold:!0},(0,r.__)("Draft","web-stories")),p===ce.PENDING&&n.createElement(qr,{isBold:!0},(0,r.__)("Pending","web-stories")),e?.name&&n.createElement(qr,null,e?.name),n.createElement(qr,{className:"dashboard-grid-item-date"},f)),n.createElement(jr,null,t)))};function Xr(){return Xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Xr.apply(null,arguments)}const Yr=(0,b.forwardRef)((({onFocus:e,isActive:t,pageSize:a,renameStory:o,story:l,storyMenu:i},s)=>{const{userId:c}=y(),d=t?0:-1,u=o?{editMode:o?.id===l?.id,onEditComplete:e=>o?.handleOnRenameStory(l,e),onEditCancel:o?.handleCancelRename}:{},p=(0,b.useMemo)((()=>l?.locked&&c!==l?.lockUser.id),[l,c]),f=(0,b.useMemo)((()=>fr({menuItems:i.menuItems,story:l,isLocked:p})),[i,l,p]),g=Et(l?.status===ce.DRAFT?l?.modifiedGmt:l?.createdGmt),h=Yo(l.title),_=(0,b.useMemo)((()=>f.length?n.createElement(StoryMenu,{menuLabel:p?(0,X.default)(/* translators: 1: story title. 2: user currently editing the story. */ /* translators: 1: story title. 2: user currently editing the story. */
(0,r.__)("Context menu for %1$s (locked by %2$s)","web-stories"),h,l?.lockUser.name):(0,X.default)(/* translators: %s: story title.*/ /* translators: %s: story title.*/
(0,r.__)("Context menu for %s","web-stories"),h),itemActive:t,tabIndex:d,onMoreButtonSelected:i.handleMenuToggle,contextMenuId:i.contextMenuId,storyId:l.id,isInverted:!0,menuItems:f,menuStyleOverrides:(0,m.css)(["margin:0 0 0 auto;"])}):null),[p,h,l?.lockUser?.name,l.id,t,d,i,f]);return n.createElement(Br,{"data-testid":`story-grid-item-${l.id}`,onFocus:e,$posterHeight:a.height,ref:s,"aria-label":(0,X.default)(/* translators: %s: story title.*/ /* translators: %s: story title.*/
(0,r.__)("Details about %s","web-stories"),h)},n.createElement(Pr,null,n.createElement(Mr,null,n.createElement(Rr,Xr({},l.featuredMediaUrl?{alt:(0,X.default)(/* translators: %s: Story title. */ /* translators: %s: Story title. */
(0,r.__)("%s Poster image","web-stories"),h),as:"img",src:l.featuredMediaUrl,decoding:"async"}:null,{width:it,height:lt})),n.createElement(Dr,null),n.createElement(Nr,null,l?.capabilities?.hasEditAction&&n.createElement(Ur,{className:"grid-item-anchor","data-testid":"story-editor-grid-link",tabIndex:d,href:l.editStoryLink},n.createElement(Or.VisuallyHidden,null,(0,X.default)(/* translators: %s: Story title. */ /* translators: %s: Story title. */
(0,r.__)("Open %s in Editor","web-stories"),h))),n.createElement(Kr,Xr({author:l.author,contextMenu:_,displayDate:g,formattedTitle:h,id:l.id,isLocked:p,lockUser:l?.lockUser,status:l?.status,title:l.title},u))))))}));Yr.displayName="StoryGridItem";const Jr=Yr,Zr=(0,m.default)(Jt).withConfig({displayName:"storyGridView__StoryGrid",componentId:"sc-1fwq7hb-0"})(["width:calc(100% - ","px);"],Ke),Qr=({stories:e,pageSize:t,storyMenu:a,renameStory:o,returnStoryFocusId:l})=>{const{isRTL:i}=y(),s=(0,b.useRef)(),c=(0,b.useRef)(),d=(0,b.useRef)({}),[u,p]=(0,b.useState)(),m=(0,b.useRef)(),f=(0,b.useMemo)((()=>e.map((({id:e})=>e))),[e]);(0,Nt.default)({containerRef:s,gridRef:c,itemRefs:d,isRTL:i,currentItemId:u,items:e}),(0,b.useEffect)((()=>{if(!u&&l?.value&&!m.current){const e=l?.value;p(e);const t=d.current?.[e]?.querySelectorAll(["button","a"])?.[0];t?.focus()}}),[u,l]),(0,b.useEffect)((()=>{u&&(m.current=u)}),[u]);const g=(0,b.useCallback)(((e,t)=>{if(a.handleMenuToggle(t),t<0&&9===e?.keyCode){const t=!e?.shiftKey?f[f.indexOf(u)+1]:u;l.set(t),m.current=null,p(null)}}),[u,f,l,a]),h=(0,b.useCallback)((()=>{m.current=null,p(null),l.set(null)}),[l]);(0,b.useFocusOut)(s,(()=>p(null)),[]);const _=(0,b.useMemo)((()=>{const e=[Q,J,Z],t=a.menuItems.map((t=>{const a={...t};return e.includes(t?.value)&&(a.action=e=>{h(),t.action(e)}),a}));return{...a,handleMenuToggle:g,menuItems:t}}),[g,a,h]),E=(0,b.useMemo)((()=>e.map((e=>n.createElement(Jr,{onFocus:()=>p(e.id),isActive:u===e.id,ref:t=>{d.current[e.id]=t},key:e.id,pageSize:t,renameStory:o,story:e,storyMenu:_})))),[u,_,t,o,e]);return n.createElement("div",{ref:s},n.createElement(Zr,{pageSize:t,ref:c,role:"list",ariaLabel:(0,r.__)("Viewing stories","web-stories")},E))},el="DELETE_STORY";const tl=function StoriesView({loading:e,storyActions:t,stories:a,view:o}){const[l,i]=(0,b.useState)(-1),[s,c]=(0,b.useState)(-1),[d,u]=(0,b.useState)(""),[p,m]=(0,b.useState)(null),[f,g]=(0,b.useState)({}),[h,_]=(0,b.useState)(null),{showSnackbar:y}=(0,sr.useSnackbar)(),S=d===el&&p,w=(0,b.useMemo)((()=>a.map((({id:e})=>e))),[a]);(0,b.useEffect)((()=>{if(f.id&&!h){const e=w.indexOf(f.id),t=e>0?-1:1,a=f.isDeleted?t:0,o=w[e+a];o&&_(o)}}),[f,h,w]),(0,b.useEffect)((()=>{d||m(null)}),[d,m]),(0,b.useEffect)((()=>{d&&(g({}),_(null))}),[d]);const v=(0,b.useCallback)(((e,a)=>{c(-1),(0,E.trackEvent)("rename_story"),t.updateStory({...e,title:{raw:a}})}),[t]),T=(0,b.useCallback)((()=>{(0,E.trackEvent)("delete_story"),t.trashStory(p),g({id:p.id,isDeleted:!0}),u("")}),[t,p]),C=(0,b.useCallback)((()=>{i(-1),(0,E.trackEvent)("open_in_editor")}),[]),I=(0,b.useCallback)((e=>{i(-1),c(e.id)}),[]),k=(0,b.useCallback)((e=>{i(-1),(0,E.trackEvent)("duplicate_story"),t.duplicateStory(e),g({id:e.id})}),[t]),L=(0,b.useCallback)((e=>{i(-1),m(e),u(el)}),[]),A=(0,b.useCallback)((e=>{i(-1),window.navigator.clipboard.writeText(e.link),y({message:(0,X.default)(/* translators: %s: story title. */ /* translators: %s: story title. */
(0,r.__)("%s has been copied to your clipboard.","web-stories"),Yo(e.title)),dismissible:!0}),g({id:e.id})}),[y]),x=ae.map((e=>{switch(e?.value){case ee:e.action=A;break;case Q:e.action=L;break;case Z:e.action=k;break;case te:e.action=C;break;case J:e.action=I;break;default:e.action=()=>i(-1)}return e})),O=(0,b.useMemo)((()=>({handleMenuToggle:i,contextMenuId:l,menuItems:x})),[l,x,i]),D=(0,b.useMemo)((()=>({id:s,handleOnRenameStory:v,handleCancelRename:()=>c(-1)})),[v,c,s]),N=(0,b.useMemo)((()=>o.style===Qe.LIST?n.createElement(StoryListView,{hideStoryList:e?.isLoading&&!e?.showStoriesWhileLoading.current,pageSize:o.pageSize,renameStory:D,stories:a,storyMenu:O}):!e?.isLoading||e?.isLoading&&e?.showStoriesWhileLoading.current?n.createElement(Qr,{isLoading:e?.isLoading,pageSize:o.pageSize,renameStory:D,storyMenu:O,stories:a,returnStoryFocusId:{value:h,set:_}}):null),[e,D,h,a,O,o]);return n.createElement(n.Fragment,null,N,e?.isLoading&&!e?.showStoriesWhileLoading.current&&n.createElement(ja,null,n.createElement(ur.default,null)),S&&n.createElement(ya,{isOpen:!0,contentLabel:(0,r.__)("Dialog to confirm deleting a story","web-stories"),title:(0,r.__)("Delete Story","web-stories"),onClose:()=>{g({id:p.id}),u("")},secondaryText:(0,r.__)("Cancel","web-stories"),secondaryRest:{"aria-label":(0,X.default)(/* translators: %s: story title. */ /* translators: %s: story title. */
(0,r.__)('Cancel deleting story "%s"',"web-stories"),Yo(p.title))},primaryText:(0,r.__)("Delete","web-stories"),onPrimary:T,primaryRest:{"aria-label":(0,X.default)(/* translators: %s: story title. */ /* translators: %s: story title. */
(0,r.__)('Confirm deleting story "%s"',"web-stories"),Yo(p.title))}},n.createElement(Sa.Text.Paragraph,{size:Ya.TextSize.Small},(0,X.default)(/* translators: %s: story title. */ /* translators: %s: story title. */
(0,r.__)('Are you sure you want to delete "%s"?',"web-stories"),Yo(p.title)))))};function NoAvailableContent({filtersObject:e}){const{search:t}=e;return t?(0,X.default)(/* translators: %s: search term. */ /* translators: %s: search term. */
(0,r.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),t):0!==Object.keys(e).length?(0,r.__)("Sorry, we couldn't find any results","web-stories"):(0,r.__)("Start telling Stories.","web-stories")}NoAvailableContent.propTypes={filtersObject:Rt().object};const al=function({allPagesFetched:e,canViewDefaultTemplates:t,filtersObject:a={},loading:o,page:l,stories:i,storyActions:s,view:c}){return n.createElement(Ua.Scrollable,null,n.createElement(ba,null,i.length>0?n.createElement(n.Fragment,null,n.createElement(tl,{storyActions:s,stories:i,view:c,loading:o}),n.createElement(dr.default,{canLoadMore:!e,isLoading:o?.isLoading,allDataLoadedMessage:(0,r.__)("No more stories","web-stories"),allDataLoadedAriaMessage:(0,r.__)("All stories are loaded","web-stories"),loadingAriaMessage:(0,r.__)("Loading more stories","web-stories"),onLoadMore:l.requestNextPage})):!o?.isLoading&&n.createElement(zn,null,n.createElement(ro.Headline,{size:Ya.TextSize.Small,as:"h3"},n.createElement(NoAvailableContent,{filtersObject:a})),0===Object.keys(a).length&&t&&n.createElement(Bt.ButtonAsLink,{type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Medium,href:to(Ye.TEMPLATES_GALLERY)},(0,r.__)("Explore Templates","web-stories")))))};const ol=function(e){return e.reduce(((e,t)=>!t.title||t?.title.trim().length<=0?e:[...e,{label:t.title,value:t.title}]),[])};var nl=a(22889);const rl="VERTICAL",ll="COLOR",il="TAG",sl="TITLE";const cl=function(e){const t=Object.values(e),a=t.flatMap((e=>e.colors)).map((e=>({label:e.family,value:e.family,type:ll}))),o=t.flatMap((e=>e.tags)).map((e=>({label:e,value:e,type:il}))),n=t.map((e=>e.vertical)).map((e=>({label:e,value:e,type:rl}))),r=t.map((e=>({label:e.title,value:e.title,type:sl})));return[...(0,nl.default)(o,"label"),...(0,nl.default)(a,"label"),...(0,nl.default)(n,"label"),...(0,nl.default)(r,"label")]};a(37550);const dl=function(e){return t=>!e||e.some((e=>{switch(e?.type){case il:return t.tags.map((e=>e.toLowerCase())).includes(e.value.toLowerCase());case ll:return t.colors.map((e=>e.label.toLowerCase())).includes(e.value.toLowerCase());case rl:return t.vertical.toLowerCase().includes(e.value.toLowerCase());case sl:return t.title.toLowerCase().includes(e.value.toLowerCase());default:return!0}}))};var ul=a(82956);const pl=(0,m.default)(ul.default).withConfig({displayName:"storyStatusToggle__StyledPill",componentId:"sc-141pqd7-0"})(["margin:0 2px;white-space:nowrap;& > span{padding-left:8px;color:",";}"],(({theme:e,isActive:t})=>t?e.colors.gray[20]:e.colors.fg.tertiary));const ml=function StoryStatusToggle({initialPageReady:e,totalStoriesByStatus:t,currentStatus:a}){const{updateFilter:o,registerFilters:l}=vn((({actions:{updateFilter:e,registerFilters:t}})=>({updateFilter:e,registerFilters:t}))),i=(0,b.useCallback)((e=>{o("status",{filterId:e})}),[o]);(0,b.useEffect)((()=>{l([{key:"status",filterId:me.filters.status}])}),[l]);const s=(0,b.useMemo)((()=>Object.keys(t).reduce(((e,a)=>e+t[a]),0)),[t]),c=(0,b.useMemo)((()=>ue.filter((({status:e})=>Boolean(e in t)&&t[e]>0||e===a)).map((({label:e,status:o,value:n})=>{const l=t[o],i=Boolean(!l);return{ariaLabel:(0,X.default)(/* translators: %s is story status */ /* translators: %s is story status */
(0,r.__)("Filter stories by %s","web-stories"),e),disabled:i,isActive:a===n,value:n,label:e,count:l}}))),[t,a]);return!e||!s||t&&0===Object.keys(t).length?null:n.createElement(n.Fragment,null,c.map((({ariaLabel:e,disabled:t,isActive:a,value:o,label:r,count:l})=>n.createElement(pl,{key:o,onClick:()=>i(o),isActive:a,disabled:t,"aria-label":e},r,n.createElement("span",null,l)))))};const fl=(0,b.memo)((function({initialPageReady:e,stories:t,totalStoriesByStatus:a,view:o}){const l=(0,b.useMemo)((()=>ol(t)),[t]),{filters:i,sortObject:s,updateFilter:c,updateSort:d,registerFilters:u}=vn((({state:{filters:e,sortObject:t},actions:{updateFilter:a,updateSort:o,registerFilters:n}})=>({filters:e,updateFilter:a,sortObject:t,updateSort:o,registerFilters:n}))),[p,m,f]=(0,b.useMemo)((()=>{const e=i.find((({key:e})=>"status"===e)),t=i.find((({key:e})=>"search"===e));return[i.filter((({key:e})=>!["status","search"].includes(e))),e?.filterId,t?.filterId]}),[i]),g=(0,b.useMemo)((()=>(m?.split(",")||[]).reduce(((e,t)=>e+(a[t]||0)),0)),[m,a]),h=en({currentFilter:m,isActiveSearch:Boolean(f),totalResults:g,view:tt}),_=(0,b.useDebouncedCallback)((async e=>{await(0,E.trackEvent)("search",{search_type:"dashboard",search_term:e}),c("search",{filterId:e})}),rt);(0,b.useEffect)((()=>{u([{key:"search"}])}),[u]);const y=(0,b.useCallback)((()=>c("search",{filterId:null})),[c]);return n.createElement(n.Fragment,null,n.createElement(lr,{heading:(0,r.__)("Dashboard","web-stories"),searchPlaceholder:(0,r.__)("Search Stories","web-stories"),searchOptions:l,handleSearchChange:_,showSearch:e,searchValue:f,onClear:y},n.createElement(ml,{initialPageReady:e,totalStoriesByStatus:a,currentStatus:m})),n.createElement(BodyViewOptions,{showGridToggle:!0,filters:p,showSortDropdown:!0,resultsLabel:h,layoutStyle:o.style,handleLayoutSelect:o.toggleStyle,pageSortOptions:ie,pageSortDefaultOption:ne.LAST_MODIFIED,handleSortChange:d,currentSort:s}))}));function MyStoriesView(){const{duplicateStory:e,fetchStories:t,trashStory:a,updateStory:o,allPagesFetched:r,isLoading:l,stories:i,storiesOrderById:s,totalPages:c,totalStoriesByStatus:d}=hn((({actions:{storyApi:{duplicateStory:e,fetchStories:t,trashStory:a,updateStory:o}},state:{stories:{allPagesFetched:n,isLoading:r,stories:l,storiesOrderById:i,totalPages:s,totalStoriesByStatus:c}}})=>({duplicateStory:e,fetchStories:t,trashStory:a,updateStory:o,allPagesFetched:n,isLoading:r,stories:l,storiesOrderById:i,totalPages:s,totalStoriesByStatus:c}))),{filtersObject:u,sortObject:p}=vn((({state:{filtersObject:e,sortObject:t}})=>({filtersObject:e,sortObject:t}))),{apiCallbacks:m,canViewDefaultTemplates:f}=y(),g=(0,b.useRef)(!1);(0,b.useEffect)((()=>(g.current=!0,()=>{g.current=!1})),[]);const{page:h,view:_,showStoriesWhileLoading:S,initialPageReady:w}=function({filtersObject:e=me.filters,sortObject:t=me.sort,isLoading:a=!1,totalPages:o}){const[n,r]=(0,b.useState)(Qe.GRID),[l,i]=(0,b.useState)(t),[s,c]=(0,b.useState)(e),[d,u]=(0,b.useState)(1),p=(0,b.useRef)(!1),[m,f]=(0,b.useState)(!1),{pageSize:g}=rn({thumbnailMode:n===Qe.LIST,isGrid:n===Qe.GRID}),h=(0,b.useCallback)((e=>{u(ln(e,{MIN:1,MAX:o}))}),[o]),_=(0,b.useCallback)((e=>{i(e),h(1)}),[h]),y=(0,b.useCallback)((e=>{c(e),h(1)}),[h]),S=(0,b.useCallback)((()=>{const e=n===Qe.LIST?Qe.GRID:Qe.LIST;r(e)}),[n,r]),w=(0,b.useCallback)((()=>{p.current=!0,h(d+1)}),[d,h]);return(0,b.useEffect)((()=>{s?.search?.length&&(0,E.trackEvent)("search",{search_type:"dashboard_stories",search_term:s.search,search_filter:s.status,search_author_filter:s.author,search_order:l.order,search_orderby:l.orderby,search_view:n})}),[s,l,n]),(0,b.useEffect)((()=>{a||(p.current=!1)}),[a]),(0,b.useEffect)((()=>{o&&!m&&f(!0)}),[o,m]),(0,b.useEffect)((()=>{m&&y(e)}),[y,m,e]),(0,b.useEffect)((()=>{m&&_(t)}),[_,m,t]),(0,b.useMemo)((()=>({view:{style:n,toggleStyle:S,pageSize:g},sort:{value:l.orderby,direction:l.order,set:_},filters:{value:s,set:y},page:{value:d,set:u,requestNextPage:w},initialPageReady:m,showStoriesWhileLoading:p})),[n,S,g,l,_,s,y,m,d,w])}({filtersObject:u,sortObject:p,isLoading:l,totalPages:c});(0,b.useEffect)((()=>{t({page:h.value,filters:u,sort:p})}),[t,u,p,h.value,m]);const v=(0,b.useMemo)((()=>s.map((e=>i[e]))),[i,s]);return n.createElement(Ua.Provider,null,n.createElement(fl,{initialPageReady:w,stories:v,totalStoriesByStatus:d,view:_}),n.createElement(al,{allPagesFetched:r,canViewDefaultTemplates:f,filtersObject:u,loading:{isLoading:l,showStoriesWhileLoading:S},page:h,stories:v,storyActions:{duplicateStory:e,trashStory:a,updateStory:o},view:_}),n.createElement(Ua.Fixed,null,n.createElement(To,null)))}function MyStories(){return n.createElement(StoryFiltersProvider,null,n.createElement(MyStoriesView,null))}const gl=(0,b.createContext)({state:{},actions:{}}),{filters:bl,sort:hl}=Me;function TemplateFiltersProvider({children:e}){const[t,a]=(0,b.useReducer)(bn,{filters:[],filtersObject:bl,sortObject:hl}),o=(0,b.useCallback)(((e,t)=>{a({type:mn,payload:{key:e,value:t}})}),[]),r=(0,b.useCallback)((e=>{a({type:fn,payload:{type:"template",values:e}})}),[]),l=(0,b.useCallback)((e=>{a({type:gn,payload:{value:e}})}),[]),i=(0,b.useMemo)((()=>({state:t,actions:{updateSort:r,updateFilter:o,registerFilters:l}})),[t,r,o,l]);return n.createElement(gl.Provider,{value:i},e)}function _l(e=b.identity){return(0,b.useContextSelector)(gl,e)}const yl=m.default.div.withConfig({displayName:"content__CardWrapper",componentId:"sc-1ilp1n2-0"})(["position:absolute;height:100%;width:100%;transition:opacity ease-in-out 300ms;&:hover{",",","{opacity:1;}}",",","{opacity:",";}"],Dr,Nr,Dr,Nr,(({$isSelected:e})=>e?1:0)),El=m.default.div.withConfig({displayName:"content__TemplateDisplayContent",componentId:"sc-1ilp1n2-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;padding-bottom:16px;a,button{margin:auto auto 0;}"]),Sl=(0,m.default)(Rr).attrs({as:"picture"}).withConfig({displayName:"content__PicturePoster",componentId:"sc-1ilp1n2-2"})(["display:block;& > img{height:100%;width:100%;object-fit:fill;border-radius:",";}"],(({theme:e})=>e.borders.radius.medium)),wl="focus_template",vl=(0,m.default)(Bt.Button).attrs({type:Mt.ButtonType.Tertiary,size:Mt.ButtonSize.Small}).withConfig({displayName:"templateGridItem__SeeDetailsButton",componentId:"sc-fidkqe-0"})(["background-color:",";"],(({theme:e})=>e.colors.standard.white)),Tl=(0,b.forwardRef)((({onCreateStory:e,onFocus:t,height:a,id:o,isActive:l,posterSrc:i,slug:s,title:c,status:d,onSeeDetailsClick:u=jn.noop},p)=>{const m=l?0:-1,f=(0,X.default)(/* translators: %s: Template title. */ /* translators: %s: Template title. */
(0,r.__)("First page of %s template","web-stories"),c);return n.createElement(ua,{ref:p,id:`template-grid-item-${o}`,className:"templateGridItem","data-testid":`template-grid-item-${o}`,$posterHeight:a,onFocus:t},n.createElement(Pr,null,n.createElement(yl,{$isSelected:l},n.createElement(Sl,null,n.createElement("source",{srcSet:i?.webp,type:"image/webp"}),n.createElement("source",{srcSet:i?.png,type:"image/png"}),n.createElement("img",{src:i?.png,alt:f,decoding:"async",width:it,height:lt})),n.createElement(Dr,null),n.createElement(Nr,{"data-testid":"card-action-container","data-template-slug":s},n.createElement(El,null,n.createElement(vl,{ariaLabel:(0,X.default)(/* translators: %s: template title.*/ /* translators: %s: template title.*/
(0,r.__)("Go to detail view of %s","web-stories"),c),onClick:()=>u(o,c),className:wl,tabIndex:m},Fe[d]),e&&n.createElement(Bt.Button,{size:Mt.ButtonSize.Small,type:Mt.ButtonType.Primary,onClick:e,tabIndex:m,ariaLabel:(0,X.default)(/* translators: %s: template title.*/ /* translators: %s: template title.*/
(0,r.__)("Create new story from %s","web-stories"),c)},(0,r.__)("Use template","web-stories")))))))}));Tl.displayName="TemplateGridItem";const Cl=Tl;const Il=function TemplateGridView({pageSize:e,templates:t,templateActions:a}){const{isRTL:o,apiCallbacks:l}=y(),i=(0,b.useRef)(),s=(0,b.useRef)(),c=(0,b.useRef)({}),[d,u]=(0,b.useState)(null),{handleDetailsToggle:p,createStoryFromTemplate:m}=a||{},f=Boolean(l?.createStoryFromTemplate);(0,Nt.default)({containerRef:i,gridRef:s,itemRefs:c,isRTL:o,currentItemId:d,items:t}),(0,b.useEffect)((()=>{d&&c.current?.[d]?.querySelector(`.${wl}`)?.focus()}),[d]),(0,b.useFocusOut)(i,(()=>u(null)),[]);const g=(0,b.useMemo)((()=>t.map((({id:t,slug:a,status:o,title:r,postersByPage:l})=>{const i=d===t,s=l?.[0];return n.createElement(Cl,{onCreateStory:f?()=>m(t):sn,onFocus:()=>{u(t)},onSeeDetailsClick:p,height:e.height,id:t,isActive:i,key:a,posterSrc:s,ref:e=>{c.current[t]=e},slug:a,status:o,title:r})}))),[t,d,f,p,e.height,m]);return n.createElement("div",{ref:i},n.createElement(Jt,{pageSize:e,role:"list",ref:s,ariaLabel:(0,r.__)("Viewing available templates","web-stories")},g))};const kl=function({allPagesFetched:e,isLoading:t,page:a,templates:o,view:l,totalTemplates:i,search:s,templateActions:c}){const{newStoryURL:d}=y(),u=(0,b.useMemo)((()=>t?n.createElement(ja,null,n.createElement(ur.default,null)):i>0?n.createElement(n.Fragment,null,n.createElement(Il,{templates:o,pageSize:l.pageSize,templateActions:c}),n.createElement(dr.default,{canLoadMore:!e,isLoading:t,allDataLoadedMessage:(0,r.__)("No more templates","web-stories"),allDataLoadedAriaMessage:(0,r.__)("All templates are loaded","web-stories"),loadingAriaMessage:(0,r.__)("Loading more templates","web-stories"),onLoadMore:a.requestNextPage})):n.createElement(zn,null,n.createElement(ro.Headline,{size:Ya.TextSize.Small,as:"h3"},s?(0,X.default)(/* translators: %s: search term. */ /* translators: %s: search term. */
(0,r.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),s):(0,r.__)("No templates currently available.","web-stories")),!s&&n.createElement(Bt.ButtonAsLink,{type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Medium,href:d},(0,r.__)("Create New Story","web-stories")))),[e,t,d,a.requestNextPage,c,s,o,i,l.pageSize]);return n.createElement(Ua.Scrollable,null,n.createElement(ba,null,u))};const Ll=function({isLoading:e,totalTemplates:t,view:a,searchOptions:o=[]}){const l=(0,g.useFeature)("enableInProgressTemplateActions"),{filters:i,sortObject:s,updateFilter:c,updateSort:d,registerFilters:u}=_l((({state:{filters:e,sortObject:t},actions:{updateFilter:a,updateSort:o,registerFilters:n}})=>({filters:e,sortObject:t,updateFilter:a,updateSort:o,registerFilters:n}))),[p,m]=(0,b.useMemo)((()=>{const e=i.find((({key:e})=>"status"===e)),t=i.find((({key:e})=>"search"===e));return[e?.filterId,t?.filterId]}),[i]),f=(0,b.useDebouncedCallback)((e=>{c("search",{filterId:e})}),rt);(0,b.useEffect)((()=>{u([{key:"search"}]),u([{key:"status",filterId:Me.filters.status}])}),[u]);const h=(0,b.useCallback)((()=>c("search",{filterId:null})),[c]),_=en({totalResults:t,currentFilter:p,view:at});return n.createElement(n.Fragment,null,n.createElement(lr,{heading:(0,r.__)("Explore Templates","web-stories"),searchPlaceholder:(0,r.__)("Search Templates","web-stories"),showSearch:!0,searchOptions:o,searchValue:m,handleSearchChange:f,onClear:h}),n.createElement(BodyViewOptions,{resultsLabel:_,layoutStyle:a.style,handleLayoutSelect:a.toggleStyle,isLoading:e,pageSortOptions:Ue,pageSortDefaultOption:Re.POPULAR,currentSort:s,handleSortChange:d,showSortDropdown:l,sortDropdownAriaLabel:(0,r.__)("Choose sort option for display","web-stories")}))};var Al,xl=a(34176);function Ol(){return Ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Ol.apply(null,arguments)}const SvgCrossLarge=({title:e,titleId:t,...a})=>n.createElement("svg",Ol({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,Al||(Al=n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M25.146 25.854a.5.5 0 0 0 .708-.708L16.707 16l9.147-9.146a.5.5 0 0 0-.708-.708L16 15.293 6.854 6.146a.5.5 0 1 0-.708.708L15.293 16l-9.147 9.146a.5.5 0 0 0 .708.708L16 16.707z",clipRule:"evenodd"}))),Dl=(0,n.memo)(SvgCrossLarge),Nl=m.default.nav.withConfig({displayName:"header__Nav",componentId:"sc-1wko3r4-0"})(["justify-content:space-between;align-items:center;display:flex;margin:48px auto;width:calc(76% + 121px);"]),Pl=(0,m.default)(Bt.Button).attrs({type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Small}).withConfig({displayName:"header__CTAButton",componentId:"sc-1wko3r4-1"})(["padding:10px 16px;"]);const Rl=function({templateTitle:e,templateId:t,templateActions:a,canCreateStory:o}){const{createStoryFromTemplate:l,handleDetailsToggle:i}=a||{};return n.createElement(Nl,null,n.createElement(Bt.Button,{type:Mt.ButtonType.Tertiary,variant:Mt.ButtonVariant.Square,size:Mt.ButtonSize.Small,"aria-label":(0,r.__)("Close","web-stories"),onClick:i},n.createElement(Dl,null)),o&&n.createElement(Pl,{onClick:()=>l(t),"aria-label":(0,X.default)(/* translators: %s: template title */ /* translators: %s: template title */
(0,r.__)("Use %s template to create new story","web-stories"),e)},(0,r.__)("Use template","web-stories")))};var Bl,Ml=a(7478),Ul=a(86107);function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Fl.apply(null,arguments)}const SvgArrowRightLarge=({title:e,titleId:t,...a})=>n.createElement("svg",Fl({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,Bl||(Bl=n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.355 6.146a.5.5 0 1 0-.707.708l8.647 8.647H6.5a.5.5 0 1 0 0 1h17.795l-8.647 8.648a.5.5 0 0 0 .707.707l9.49-9.49a.5.5 0 0 0 0-.73z",clipRule:"evenodd"}))),zl=(0,n.memo)(SvgArrowRightLarge),Gl=m.default.section.withConfig({displayName:"templateDetails__Panel",componentId:"sc-1cvs5jb-0"})(["padding:16vh 0 14vh 0;"]),Hl=m.default.div.withConfig({displayName:"templateDetails__Container",componentId:"sc-1cvs5jb-1"})(["position:relative;width:76%;max-width:","px;margin:0 auto;"],1459.2),jl=m.default.div.withConfig({displayName:"templateDetails__Inner",componentId:"sc-1cvs5jb-2"})(["display:flex;align-items:start;"]),Vl=m.default.section.attrs({"aria-label":(0,r.__)("Template Details","web-stories")}).withConfig({displayName:"templateDetails__DetailContainer",componentId:"sc-1cvs5jb-3"})(["padding:0 0 0 60px;margin-right:auto;"]),ql=m.default.div.withConfig({displayName:"templateDetails__TemplateDetails",componentId:"sc-1cvs5jb-4"})(["position:relative;display:flex;width:500px;"]),Wl=(m.default.section.attrs({"aria-label":(0,r.__)("Related Templates","web-stories")}).withConfig({displayName:"templateDetails__RowContainer",componentId:"sc-1cvs5jb-5"})(["display:flex;flex-wrap:wrap;padding-bottom:40px;margin:0 80px 0;& > h3{padding-bottom:32px;}& > div{width:100%;}"]),(0,m.default)(Gl).withConfig({displayName:"content__StyledPanel",componentId:"sc-jxjpbh-0"})(["padding:0 0 48px 0;"])),$l=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"content__ByLineText",componentId:"sc-jxjpbh-1"})(["color:",";margin:8px 0 24px;"],(({theme:e})=>e.colors.fg.tertiary)),Kl=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"content__DescriptionText",componentId:"sc-jxjpbh-2"})(["margin-bottom:24px;"]),Xl=m.default.div.withConfig({displayName:"content__PaginationContainer",componentId:"sc-jxjpbh-3"})(["position:absolute;top:","px;",""],235,(({alignLeft:e})=>e?"\n          left: 0;\n          transform: translate(-187.5%, -50%);\n        ":"\n          right: 0;\n          transform: translate(187.5%, -50%);\n        ")),Yl=(0,m.default)(Ml.default).attrs({forwardedAs:"li"}).withConfig({displayName:"content__TemplateTag",componentId:"sc-jxjpbh-4"})(["margin-right:12px;margin-bottom:12px;> span{color:"," !important;}"],(({theme:e})=>e.colors.fg.primary)),Jl=m.default.div.withConfig({displayName:"content__MetadataContainer",componentId:"sc-jxjpbh-5"})(["margin-bottom:24px;display:flex;flex-wrap:wrap;align-items:center;"]);const Zl=function DetailsContent({activeTemplateIndex:e,isRTL:t,filteredTemplatesLength:a,switchToTemplateByOffset:o,template:l}){const{postersByPage:i,title:s,description:c,tags:d,colors:u}=l||{},[p,m]=(0,b.useState)([]);(0,b.useEffect)((()=>{i&&m(Object.values(i).map(((e,t)=>({id:t,...e}))))}),[i]);const{NextButton:f,PrevButton:g}=(0,b.useMemo)((()=>{const l=t?e-1:e+1,i=t?e+1:e-1,s=t?!a||e===a-1:!a||0===e,c=t?!a||0===e:!a||e===a-1,d=n.createElement(Bt.Button,{type:Mt.ButtonType.Tertiary,size:Mt.ButtonSize.Small,variant:Mt.ButtonVariant.Square,"aria-label":(0,r.__)("View previous template","web-stories"),onClick:()=>{o(i),m([])},disabled:s},n.createElement(Ul.default,{height:32,width:32})),u=n.createElement(Bt.Button,{type:Mt.ButtonType.Tertiary,size:Mt.ButtonSize.Small,variant:Mt.ButtonVariant.Square,"aria-label":(0,r.__)("View next template","web-stories"),onClick:()=>{o(l),m([])},disabled:c},n.createElement(zl,{height:32,width:32}));return t?{NextButton:d,PrevButton:u}:{NextButton:u,PrevButton:d}}),[a,e,t,o]),h=l?(0,X.default)(/* translators: byline. %s: author name. */ /* translators: byline. %s: author name. */
(0,r.__)("By %s","web-stories"),l.createdBy):null;return n.createElement(Wl,null,n.createElement(Hl,null,n.createElement(Xl,{alignLeft:!0},g),n.createElement(jl,null,n.createElement(Vt,{galleryPosters:p,isRTL:t,galleryLabel:(0,r.__)("Template details by page","web-stories")}),n.createElement(ql,null,n.createElement(Vl,null,n.createElement(Hn,{size:Ya.TextSize.Small,as:"h3","data-testid":"template-details-title"},s),n.createElement($l,{size:Ya.TextSize.Medium},h),n.createElement(Kl,{size:Ya.TextSize.Medium},c),n.createElement(Jl,{role:"list","aria-label":(0,r.__)("Template tags","web-stories")},d.map((e=>n.createElement(Yl,{key:e,disabled:!0},e)))),n.createElement(Jl,null,n.createElement(ga,{colors:u,size:32,"aria-label":(0,r.__)("Template colors","web-stories")}))))),n.createElement(Xl,null,f)))};const Ql=function TemplateDetailsModal({activeTemplateIndex:e,activeTemplate:t,filteredTemplatesLength:a,isDetailsViewOpen:o,templateActions:l}){const{isRTL:s,apiCallbacks:c}=y(),d=Boolean(c?.createStoryFromTemplate),{handleDetailsToggle:u,switchToTemplateByOffset:p}=l||{};return n.createElement(xl.default,{isOpen:o,onClose:u,contentLabel:(0,X.default)(/* translators: %s: template title */ /* translators: %s: template title */
(0,r.__)("Template Details for %s","web-stories"),t?.title),overlayStyles:{backgroundColor:`${i.theme.colors.opacity.overlayDark}`},contentStyles:{display:"block",height:"90vh",width:"90vw",backgroundColor:`${i.theme.colors.standard.white}`}},n.createElement(Rl,{templateTitle:t?.title,templateId:t?.id,templateActions:l,canCreateStory:d}),n.createElement(Zl,{activeTemplateIndex:e,isRTL:s,filteredTemplatesLength:a,switchToTemplateByOffset:p,template:t}))};function ExploreTemplatesView(){const e=(0,Zn.default)(),[t,a]=(0,b.useState)(!1),[o,l]=(0,b.useState)(null),[i,s]=(0,b.useState)(0),{templateIdParam:c,replace:d}=eo((({actions:e,state:t})=>({templateIdParam:t.queryParams.id,replace:e.replace}))),u=(0,b.useRef)(c),{allPagesFetched:p,isLoading:m,templates:f,templatesOrderById:g,totalPages:h,totalTemplates:_,createStoryFromTemplate:y,fetchExternalTemplates:S}=hn((({state:{templates:{allPagesFetched:e,isLoading:t,templates:a,templatesOrderById:o,totalPages:n,totalTemplates:r}},actions:{storyApi:{createStoryFromTemplate:l},templateApi:{fetchExternalTemplates:i}}})=>({allPagesFetched:e,isLoading:t,templates:a,templatesOrderById:o,totalPages:n,totalTemplates:r,createStoryFromTemplate:l,fetchExternalTemplates:i}))),{filters:w,sortObject:v,filtersObject:T}=_l((({state:{filters:e,sortObject:t,filtersObject:a}})=>({filters:e,sortObject:t,filtersObject:a}))),{page:C,view:I}=function({totalPages:e,sortObject:t=Me.sort,filtersObject:a=Me.filters}){const[o,n]=(0,b.useState)(t),[r,l]=(0,b.useState)(a),[i,s]=(0,b.useState)(1),{pageSize:c}=rn({isGrid:!0}),d=(0,b.useCallback)((t=>{s(ln(t,{MIN:1,MAX:e}))}),[e]),u=(0,b.useCallback)((()=>d(i+1)),[i,d]),p=(0,b.useCallback)((e=>{n(e),d(1)}),[d]),m=(0,b.useCallback)((e=>{l(e),d(1)}),[d]);return(0,b.useMemo)((()=>({view:{style:Qe.GRID,pageSize:c},sort:{value:o.orderby,direction:o.order,set:p},filters:{value:r,set:m},page:{value:i,set:s,requestNextPage:u}})),[c,o,p,i,u,r,m])}({filtersObject:T,sortObject:v,totalPages:h}),[k]=(0,b.useMemo)((()=>{const e=w.find((({key:e})=>"search"===e));return[e?.filterId]}),[w]),L=(0,b.useMemo)((()=>cl(f)),[f]),A=(0,b.useMemo)((()=>k?L.filter((e=>e.label.toLowerCase().includes(k.toLowerCase()))):L),[L,k]),x=(0,b.useMemo)((()=>g.map((e=>f[e])).filter(dl(A))),[g,f,A]),O=(0,b.useMemo)((()=>_!==x.length?x.length:_),[x,_]),D=(0,b.useMemo)((()=>(0,nl.default)(A,"label")),[A]),N=(0,b.useCallback)((e=>{const t=f[e];(0,E.trackEvent)("use_template",{name:t.title,template_id:t.id}),y(t)}),[y,f]),P=(0,b.useCallback)((e=>{const t=x.find((t=>t.id===e));l(t),s(x.findIndex((t=>t.id===e))),u.current&&(u.current=void 0),d(`?id=${t.id}&isLocal=${t.isLocal}`)}),[d,x]),R=(0,b.useCallback)(((t,o)=>{a((a=>{const n=!a;return o&&(0,E.trackScreenView)(o),n&&t&&P(t),n||(d(""),e((0,r.__)("Exit detail templates view","web-stories"))),n}))}),[d,e,P]),B=(0,b.useCallback)((t=>{const a=x[t];l(a),s(t),d(`?id=${a.id}&isLocal=${a.isLocal}`),e((0,X.default)(/* translators: %s: template title */ /* translators: %s: template title */
(0,r.__)("Viewing %s","web-stories"),a.title))}),[x,d,e]),M=(0,b.useMemo)((()=>({createStoryFromTemplate:N,handleDetailsToggle:R,switchToTemplateByOffset:B})),[N,R,B]);return(0,b.useEffect)((()=>{S()}),[S]),(0,b.useEffect)((()=>{if(u.current&&x.length){if(!x.some((e=>e.id===Number.parseInt(u.current))))return void d("");a(!0),P(Number.parseInt(u.current))}}),[x,d,P]),n.createElement(Ua.Provider,null,n.createElement(Ll,{isLoading:m&&!_,totalTemplates:O,searchOptions:D,view:I}),n.createElement(kl,{isLoading:m,allPagesFetched:p,page:C,templates:x,totalTemplates:O,search:k,view:I,templateActions:M}),n.createElement(Ua.Fixed,null,n.createElement(To,null)),n.createElement(Ql,{activeTemplate:o,activeTemplateIndex:i,isDetailsViewOpen:t,templateActions:M,filteredTemplatesLength:x.length}))}function ExploreTemplates(){return n.createElement(TemplateFiltersProvider,null,n.createElement(ExploreTemplatesView,null))}const ei=function(){const{storyError:e,templateError:t}=hn((({state:{stories:{error:e},templates:{error:t}}})=>({storyError:e,templateError:t}))),{showSnackbar:a}=(0,sr.useSnackbar)(),o=(0,b.useDebouncedCallback)((e=>a({message:e,dismissible:!0})),200);(0,b.useEffect)((()=>{e?.id&&o(e.message)}),[e,o]),(0,b.useEffect)((()=>{t?.id&&o(t.message)}),[t,o])};function ti(){return ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},ti.apply(null,arguments)}const ai=({additionalRoutes:e})=>{const{currentPath:t,templateId:a,availableRoutes:o}=eo((({state:e})=>({...e,templateId:e.queryParams.id}))),{push:l,setAvailableRoutes:i}=eo((({actions:e})=>e)),{canViewDefaultTemplates:s,leftRailSecondaryNavigation:c=[],documentTitleSuffix:d=(0,r.__)("Web Stories","web-stories")}=y(),{addInitialFetchListener:u}=hn((({actions:{storyApi:{addInitialFetchListener:e}},state:{templates:{templates:t}}})=>({currentTemplate:void 0!==a?t[a]?.title:void 0,addInitialFetchListener:e}))),p=(0,b.useRef)(t===Ye.DASHBOARD),[m,f]=(0,b.useState)(!p.current);(0,b.useEffect)((()=>u?.((e=>{e?.all<=0&&p.current&&s&&(l(Ye.TEMPLATES_GALLERY),p.current=!1),f(!0)}))),[u,l,t,s]),(0,b.useEffect)((()=>{if(o.length>0)return;const t=e?e.map((({path:e})=>e)):[];i([...Object.values(Ye),...t])}),[e,o.length,i]),(0,b.useEffect)((()=>{if(!m)return;const e=c.find((e=>e.value===t)),a=Je[t]||e?.label||Je.DEFAULT;document.title=(0,X.default)(/* translators: Admin screen title. 1: Admin screen name, 2: Network or site name. */ /* translators: Admin screen title. 1: Admin screen name, 2: Network or site name. */
(0,r.__)("%1$s ‹ %2$s","web-stories"),a,d),(0,E.trackScreenView)(a)}),[t,m,c,d]),ei();const{clearSnackbar:g,removeSnack:h,placement:_,currentSnacks:S}=(0,sr.useSnackbar)(),w=(0,b.usePrevious)(t);return(0,b.useEffect)((()=>{t!==w&&g()}),[g,t,w]),n.createElement(n.Fragment,null,n.createElement(za,null,n.createElement(ho,null),n.createElement(Ga,null,o.length>0&&n.createElement(n.Fragment,null,n.createElement(ao,{exact:!0,isDefault:!0,path:Ye.DASHBOARD,component:n.createElement(MyStories,null)}),s&&n.createElement(ao,{path:Ye.TEMPLATES_GALLERY,component:n.createElement(ExploreTemplates,null)}),e&&e.map((e=>n.createElement(ao,ti({key:e.path},e))))))),n.createElement(cr.default,{notifications:S,onRemove:h,placement:_,max:1}))};var oi=a(90990),ni=a(29558),ri=a(66269);window.wp.domReady;a(58335);var li=a(74807);const ii=window.wp.apiFetch,si=["id","title","status","date","date_gmt","modified","modified_gmt","story_poster","link","preview_link","edit_link","_links","_embedded","body","status","headers"].join(","),ci=["id","title"],di=["title","link"],ui="wp:lock,author",pi={EDIT:"wp:action-edit",DELETE:"wp:action-delete"};function mi(e){const{id:t,title:a,status:o,date:n,date_gmt:r,modified:l,modified_gmt:i,link:s,preview_link:c,edit_link:d,story_poster:u,_embedded:{author:p,"wp:lock":m}={},_links:f={}}=e;if(!t)return null;const{locked:g=!1,user:b={id:0,name:""}}=m?.[0]||{},h=p?.[0]||{id:0,name:""},_={hasEditAction:Object.prototype.hasOwnProperty.call(f,pi.EDIT),hasDeleteAction:Object.prototype.hasOwnProperty.call(f,pi.DELETE)};return{id:t,status:o,title:a.raw,created:n,createdGmt:`${r}Z`,modified:l,modifiedGmt:`${i}Z`,author:{id:h.id,name:h.name},locked:g,lockUser:{...b,avatar:b?.avatar?.[96]||null},bottomTargetAction:d,featuredMediaUrl:u?.url,editStoryLink:d,previewLink:c,link:s,capabilities:_}}function fi(e,t){const{page:a=1,perPage:o=nt,filters:n={},sort:r={}}=t,l={...{_embed:ui,context:"edit",_web_stories_envelope:!0,_fields:si,...me.filters,...me.sort},page:a,per_page:o,...n,...r};return ii({path:(0,li.default)(e.api.stories,l)}).then((({body:e,headers:t})=>{const a=t&&Number.parseInt(t["X-WP-TotalPages"]),o=t&&JSON.parse(t["X-WP-TotalByStatus"]),n=[];return{stories:e.reduce(((e,t)=>t?(n.push(t.id),e[t.id]=mi(t),e):e),{}),fetchedStoryIds:n,totalPages:a,totalStoriesByStatus:o}}))}function gi(e,t){const a=(0,li.default)(`${e.api.stories}${t}`,{_method:"DELETE"});return ii({path:a,method:"POST"})}function bi(e,t){const a=(0,li.default)(`${e.api.stories}${t.id}/`,{_embed:ui}),o={id:t.id,author:t.author.id,title:t.title?.raw||t.title};return ii({path:a,data:o,method:"POST"}).then(mi)}const hi=(e,t)=>{const a=(0,li.default)(e.api.stories,{_fields:"edit_link"}),{pages:o,version:n,colors:r}=t,l={featuredMedia:{id:0,url:""},publisherLogo:{url:""},title:""},i={pages:o,featuredMedia:l.featuredMedia,title:l.title,status:"auto-draft",meta:{web_stories_publisher_logo:l.publisherLogo.id}},s=r.map((({color:e})=>(0,pa.default)(e))),{globalPageDuration:c=7,globalAutoAdvance:d=!0}=e;return ii({path:a,data:{...i,story_data:{pages:o,version:n,autoAdvance:d,defaultPageDuration:c,currentStoryStyles:{colors:s}}},method:"POST"}).then(ni.snakeToCamelCaseObjectKeys)};function _i(e,t){const a=(0,li.default)(e.api.stories,{_embed:ui,_fields:si});return ii({path:a,data:{original_id:t.id,status:"draft"},method:"POST"}).then(mi)}function yi(e,t){return ii({path:(0,li.default)(e.api.users,{per_page:"100",capabilities:e.editPostsCapabilityName,search:t})})}async function Ei(e,t={}){const a=await ii({path:(0,li.default)(e.api.taxonomies,{type:"web-story",context:"edit",...t})});return Object.values(a).map((e=>(e.restPath=e._links?.["wp:items"]?.[0]?.href,delete e._links,(0,ni.snakeToCamelCaseObjectKeys)(e,["capabilities","visibility"]))))}function Si(e,t,a={}){return ii({url:(0,li.default)(t,a)})}function wi(e,t){return ii({path:(0,li.default)(e.api.products,{per_page:1,search:t})})}var vi=a(1660),Ti=a(75908);const Ci={SETTINGS:{UPDATED:(0,r.__)("Setting saved.","web-stories")}},Ii={UPLOAD_PUBLISHER_LOGO:{MESSAGE:(0,r.__)("Unable to add publisher logo","web-stories"),MESSAGE_PLURAL:(0,r.__)("Unable to add publisher logos","web-stories")},REMOVE_PUBLISHER_LOGO:{MESSAGE:(0,r.__)("Unable to remove publisher logo","web-stories")},REMOVE_FONT:{MESSAGE:(0,r.__)("Unable to remove font","web-stories")},UPDATE_PUBLISHER_LOGO:{MESSAGE:(0,r.__)("Unable to update publisher logo","web-stories")},LOAD_PUBLISHER_LOGOS:{MESSAGE:(0,r.__)("Unable to load publisher logos","web-stories")},LOAD_SETTINGS:{MESSAGE:(0,r.__)("Unable to load settings","web-stories")},UPDATE_EDITOR_SETTINGS:{MESSAGE:(0,r.__)("Unable to update settings data","web-stories")}},ki="/editor-settings",Li=[{value:ki,label:(0,r.__)("Settings","web-stories")},{value:(0,r.__)("https://wordpress.org/support/plugin/web-stories/","web-stories"),label:(0,r.__)("Support","web-stories"),isExternal:!0,trackingEvent:"click_support_page"}],Ai="none",xi="adsense",Oi="admanager",Di="mgid",Ni={DEFAULT:"default",DISABLED:"disabled",CUSTOM:"custom"},Pi="none",Ri="woocommerce",Bi="shopify",Mi="site-kit",Ui="web-stories",Fi="both",zi=(0,m.createGlobalStyle)(["body.web-story_page_stories-dashboard #wpbody{",";}.","{top:","px !important;left:","px !important;}body.folded .","{left:","px !important;}body.","{#adminmenuwrap,#adminmenuback{z-index:15;}}"],vi.scrollbarCSS,Ti.OVERLAY_CLASS,32,160,Ti.OVERLAY_CLASS,36,Ti.BODY_CLASS);const Gi=function(){const{currentPath:e}=eo((({state:{currentPath:e}})=>({currentPath:e})));(0,b.useEffect)((()=>{document.querySelectorAll('#menu-posts-web-story ul.wp-submenu li a[href$="page=stories-dashboard"]')?.forEach((e=>{e.setAttribute("href",e.getAttribute("href")+"#/")}))}),[]),(0,b.useEffect)((()=>{document.querySelectorAll("#menu-posts-web-story ul.wp-submenu li")?.forEach((t=>{t.classList.remove("current"),t.querySelector("a")?.classList.remove("current"),t.querySelector("a")?.removeAttribute("aria-current"),t.querySelector(`a[href$="#${e}"]`)&&(t.classList.add("current"),t.querySelector("a")?.classList.add("current"),t.querySelector("a")?.setAttribute("aria-current","page"))}))}),[e])},Hi=(0,b.createContext)({state:{},actions:{}});const ji=function(e){return(0,b.useContextSelector)(Hi,e??b.identity)};const Vi={getItemByKey:function(e){let t=null;try{const a=localStorage.getItem(e);t=null!==a?JSON.parse(a):a}catch(e){e instanceof Error&&(0,E.trackError)("local_storage_read",e.message)}return t},setItemByKey:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){e instanceof Error&&(0,E.trackError)("local_storage_write",e.message)}}},qi="web_stories_tracking_optin_banner_closed";function Wi(){const e=localStorage.getItem(qi);return Boolean(JSON.parse(e))}function $i(){const{showSnackbar:e}=(0,sr.useSnackbar)(),[t,a]=(0,b.useState)(Wi),[o,n]=(0,b.useState)(!1),{currentUser:r,toggleWebStoriesTrackingOptIn:l}=ji((({state:{currentUser:e},actions:{usersApi:{toggleWebStoriesTrackingOptIn:t}}})=>({currentUser:e,toggleWebStoriesTrackingOptIn:t}))),{currentPath:i}=eo((({state:{currentPath:e}})=>({currentPath:e}))),s=void 0!==r.data.meta?.webStoriesTrackingOptin,c=Boolean(r.data.meta?.webStoriesTrackingOptin);(0,b.useEffect)((()=>{c?(0,E.enableTracking)():(0,E.disableTracking)()}),[c]);const d=(0,b.useCallback)((()=>{l(),Vi.setItemByKey(qi,!0),n(!0),e({"aria-label":Ci.SETTINGS.UPDATED,message:Ci.SETTINGS.UPDATED,dismissible:!0})}),[e,l]),u=(0,b.useCallback)((()=>{a(!0),Vi.setItemByKey(qi,!0)}),[]);let p=!0;return(t||i===ki||!s||!o&&c)&&(p=!1),{bannerVisible:p,optedIn:c,disabled:r.isUpdating,closeBanner:u,toggleWebStoriesTrackingOptIn:d}}a(23215);var Ki=a(55422);const Xi=function(){const{settingsError:e,mediaError:t,settingSaved:a,publisherLogosError:o}=ji((({state:{settings:{error:e,settingSaved:t},media:{error:a},publisherLogos:{error:o,settingSaved:n}}})=>({settingsError:e,mediaError:a,settingSaved:t||n,publisherLogosError:o}))),{showSnackbar:n}=(0,sr.useSnackbar)(),r=(0,b.useDebouncedCallback)((e=>n({"aria-label":e,message:e,dismissible:!0})),200);(0,b.useEffect)((()=>{e?.id&&r(e.message)}),[e,r]),(0,b.useEffect)((()=>{a&&r(Ci.SETTINGS.UPDATED)}),[r,a]),(0,b.useEffect)((()=>{t?.id&&r(t.message)}),[t,r]),(0,b.useEffect)((()=>{o?.id&&r(o.message)}),[o,r])},Yi=m.default.div.withConfig({displayName:"editorSettings__Wrapper",componentId:"sc-1y9ilpk-0"})([""]),Ji=(0,m.default)(ba).withConfig({displayName:"editorSettings__Main",componentId:"sc-1y9ilpk-1"})(["display:flex;flex-direction:column;padding-top:36px;margin-top:20px;margin-bottom:56px;max-width:945px;"]),Zi=m.default.form.withConfig({displayName:"editorSettings__SettingForm",componentId:"sc-1y9ilpk-2"})(["display:grid;grid-template-columns:27% minmax(400px,1fr);column-gap:6.56%;padding-bottom:52px;@media ","{grid-template-columns:100%;row-gap:20px;}"],(({theme:e})=>e.breakpoint.mobile)),Qi=(0,m.default)(ro.Headline).attrs({as:"h3"}).withConfig({displayName:"editorSettings__SettingHeading",componentId:"sc-1y9ilpk-3"})(["",";margin:8px 0;"],(({theme:e})=>Co.expandPresetStyles({preset:{...e.typography.presets.label[Ya.TextSize.Large]},theme:e}))),es=(0,m.default)(ea.Link).withConfig({displayName:"editorSettings__InlineLink",componentId:"sc-1y9ilpk-4"})(["display:inline-block;"]),ts=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"editorSettings__HelperText",componentId:"sc-1y9ilpk-5"})(["color:",";"],(({theme:e})=>e.colors.fg.tertiary)),as=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"editorSettings__ConnectionHelperText",componentId:"sc-1y9ilpk-6"})(["padding-top:12px;color:",";"],(({hasError:e,theme:t})=>e?t.colors.fg.negative:t.colors.fg.tertiary)),os=(0,m.default)(Sa.Text.Paragraph).withConfig({displayName:"editorSettings__CenterMutedText",componentId:"sc-1y9ilpk-7"})(["color:",";text-align:center;"],(({theme:e})=>e.colors.fg.tertiary)),ns=(0,m.default)(ts).withConfig({displayName:"editorSettings__SettingSubheading",componentId:"sc-1y9ilpk-8"})(["padding:8px 0;"]),rs=(0,m.default)(ts).withConfig({displayName:"editorSettings__TextInputHelperText",componentId:"sc-1y9ilpk-9"})(["padding-top:12px;"]),ls=(0,m.default)(Sa.Text.Label).withConfig({displayName:"editorSettings__CheckboxLabel",componentId:"sc-1y9ilpk-10"})(["display:flex;justify-content:flex-start;margin-top:8px;cursor:pointer;"]),is=(0,m.default)(ts).withConfig({displayName:"editorSettings__CheckboxLabelText",componentId:"sc-1y9ilpk-11"})(["margin-left:8px;"]),ss=(0,m.default)(os).withConfig({displayName:"editorSettings__Error",componentId:"sc-1y9ilpk-12"})(["padding-bottom:10px;color:",";"],(({theme:e})=>e.colors.fg.negative)),cs=m.default.div.withConfig({displayName:"editorSettings__UploadedContainer",componentId:"sc-1y9ilpk-13"})(["display:grid;grid-template-columns:repeat(auto-fill,102px);grid-auto-rows:102px;grid-column-gap:12px;grid-row-gap:20px;padding-bottom:20px;margin-bottom:4px;border:1px solid transparent;",";"],qt.focusableOutlineCSS),ds=m.default.div.withConfig({displayName:"editorSettings__GridItemContainer",componentId:"sc-1y9ilpk-14"})(["position:relative;",";&:hover,&:focus-within{button{opacity:1 !important;}}"],(({active:e,theme:t})=>e&&(0,m.css)(["border:1px solid ",";border-radius:",";"],t.colors.border.defaultActive,t.borders.radius.small))),us=m.default.button.withConfig({displayName:"editorSettings__GridItemButton",componentId:"sc-1y9ilpk-15"})(["display:block;background-color:transparent;border:2px solid transparent;width:100%;height:100%;border-radius:4px;padding:0;",";"],qt.focusableOutlineCSS),ps=m.default.img.withConfig({displayName:"editorSettings__Logo",componentId:"sc-1y9ilpk-16"})(["object-fit:cover;width:100%;height:100%;border-radius:4px;"]),ms=m.default.div.withConfig({displayName:"editorSettings__MenuContainer",componentId:"sc-1y9ilpk-17"})(["position:absolute;top:0;width:100%;height:100%;"]),fs=(0,m.default)(Bt.Button).attrs({size:Mt.ButtonSize.Small,type:Mt.ButtonType.Secondary,variant:Mt.ButtonVariant.Circle}).withConfig({displayName:"editorSettings__LogoMenuButton",componentId:"sc-1y9ilpk-18"})(["opacity:",";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"],(({isActive:e,menuOpen:t})=>t||e?1:0)),gs=(0,m.default)(Bt.Button).withConfig({displayName:"editorSettings__SaveButton",componentId:"sc-1y9ilpk-19"})(["height:36px;"]),bs=(0,m.default)(Bt.Button).withConfig({displayName:"editorSettings__TestConnectionButton",componentId:"sc-1y9ilpk-20"})(["height:36px;margin-top:12px;"]),hs=m.default.div.withConfig({displayName:"editorSettings__InlineForm",componentId:"sc-1y9ilpk-21"})(["display:flex;align-items:flex-start;"]),_s=m.default.label.withConfig({displayName:"editorSettings__VisuallyHiddenLabel",componentId:"sc-1y9ilpk-22"})(Ea.visuallyHidden),ys=(0,m.default)(Aa.default).withConfig({displayName:"editorSettings__SettingsTextInput",componentId:"sc-1y9ilpk-23"})(["margin-right:8px;"]),Es=(m.default.span.withConfig({displayName:"editorSettings__VisuallyHiddenDescription",componentId:"sc-1y9ilpk-24"})(Ea.visuallyHidden),(0,m.default)(Zi).withConfig({displayName:"editorSettings__MultilineForm",componentId:"sc-1y9ilpk-25"})(["margin-bottom:28px;","{margin-top:20px;}"],hs)),Ss={SLOT_ID_LABEL:(0,r.__)("Monetization type","web-stories"),HELPER_MESSAGE_ADSENSE:(0,r.__)("Learn more about <a>how to monetize your Web Stories</a> using AdSense. Once configured, AdSense will determine where and how to insert ads into the story. Consult <help>AdSense Help</help> for any further assistance.","web-stories"),HELPER_MESSAGE_ADMANAGER:(0,r.__)("Learn how to <a>enable programmatic demand in Web Stories</a> through Ad Manager.","web-stories"),HELPER_MESSAGE_MGID:(0,r.__)("Learn how to start <a>monetizing Web Stories with MGID Native Solution</a>","web-stories"),HELPER_LINK_ADSENSE:(0,r.__)("https://support.google.com/adsense/answer/10175505","web-stories"),HELPER_LINK_ADSENSE_HELP:(0,r.__)("https://support.google.com/adsense/","web-stories"),HELPER_LINK_ADMANAGER:(0,r.__)("https://support.google.com/admanager/answer/9416436","web-stories"),HELPER_LINK_MGID:(0,r.__)("https://help.mgid.com/generate-revenue-with-amp-web-stories?utm_source=wp-plugin&utm_medium=web-stories-by-google","web-stories")},ws=[{label:(0,r._x)("None","ad network","web-stories"),value:Ai},{label:(0,r.__)("Google AdSense","web-stories"),value:xi},{label:(0,r.__)("Google Ad Manager","web-stories"),value:Oi},{label:(0,r.__)("MGID","web-stories"),value:Di}];const vs=function AdNetworkSettings({adNetwork:e,handleUpdate:t}){const[a,o]=(0,b.useState)(e);(0,b.useEffect)((()=>o(e)),[e]);const r=(0,b.useMemo)((()=>Oi===a?Ss.HELPER_MESSAGE_ADMANAGER:xi===a?Ss.HELPER_MESSAGE_ADSENSE:Di===a?Ss.HELPER_MESSAGE_MGID:null),[a]),l=(0,b.useMemo)((()=>Oi===a?Ss.HELPER_LINK_ADMANAGER:xi===a?Ss.HELPER_LINK_ADSENSE:Di===a?Ss.HELPER_LINK_MGID:null),[a]),i=(0,b.useCallback)((e=>(0,E.trackClick)(e,"click_monetization_docs")),[]);return n.createElement(n.Fragment,null,n.createElement(Tn.default,{ariaLabel:Ss.SLOT_ID_LABEL,options:ws,selectedValue:a,onMenuItemClick:(e,a)=>t(a),fillWidth:!0}),r&&n.createElement(rs,{size:Ya.TextSize.Small},n.createElement(un.default,{mapping:{a:n.createElement(es,{href:l,rel:"noreferrer",target:"_blank",onClick:i,size:Ya.TextSize.Small}),help:n.createElement(es,{href:Ss.HELPER_LINK_ADSENSE_HELP,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small})}},r)))},Ts=/^\/\d+(,\d+)?(\/[\w\d_\-.*\\!<:()]{1,99}[^/])*$/;const Cs={SLOT_ID_CONTEXT:(0,X.default)(/* translators: %s: example value. */ /* translators: %s: example value. */
(0,r.__)("Example: %s","web-stories"),"/123456789/a4a/amp_story_dfp_example"),SLOT_ID_PLACEHOLDER:(0,r.__)("Enter your Slot ID","web-stories"),SLOT_ID_LABEL:(0,r.__)("Google Ad Manager Slot ID","web-stories"),INPUT_ERROR:(0,r.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,r.__)("Save","web-stories")};const Is=function GoogleAdManagerSettings({slotId:e,handleUpdate:t}){const[a,o]=(0,b.useState)(e),[r,l]=(0,b.useState)(""),i=a!==e&&!r,s=!i;(0,b.useEffect)((()=>{o(e)}),[e]);const c=(0,b.useCallback)((e=>{const{value:t}=e.target;o(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(Ts))}(t)?l(""):l(Cs.INPUT_ERROR)}),[]),d=(0,b.useCallback)((()=>{i&&t(a)}),[i,a,t]),u=(0,b.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),d())}),[d]);return n.createElement(n.Fragment,null,n.createElement(hs,null,n.createElement(_s,{htmlFor:"adManagerSlotId"},Cs.SLOT_ID_LABEL),n.createElement(ys,{id:"adManagerSlotId","aria-label":Cs.SLOT_ID_LABEL,value:a,onChange:c,onKeyDown:u,placeholder:Cs.SLOT_ID_PLACEHOLDER,hasError:Boolean(r),hint:r}),n.createElement(gs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:s,onClick:d},Cs.SUBMIT_BUTTON)),n.createElement(rs,{size:Ya.TextSize.Small},Cs.SLOT_ID_CONTEXT))},ks=/^(ca-)?pub-\d{16}$/;const Ls=/^\d{10}$/;const As={PUBLISHER_ID_CONTEXT:(0,X.default)(/* translators: 1: first example. 2: second example. */ /* translators: 1: first example. 2: second example. */
(0,r.__)("Example: %1$s or %2$s. <a>Find your AdSense Publisher ID</a>.","web-stories"),"pub-1234567891234567","ca-pub-1234567891234567"),PUBLISHER_ID_CONTEXT_LINK:(0,r.__)("https://support.google.com/adsense/answer/105516","web-stories"),PUBLISHER_ID_PLACEHOLDER:(0,r.__)("Enter your Publisher ID","web-stories"),PUBLISHER_ID_LABEL:(0,r.__)("Google AdSense Publisher ID","web-stories"),SLOT_ID_CONTEXT:(0,X.default)(/* translators: %s: example value. */ /* translators: %s: example value. */
(0,r.__)("Example: %s. Copy the slot ID from <a>your ad unit’s code</a>. The same ad unit will be used for all of your Web Stories.","web-stories"),"1234567890"),SLOT_ID_CONTEXT_LINK:(0,r.__)("https://support.google.com/adsense/answer/9274019","web-stories"),SLOT_ID_PLACEHOLDER:(0,r.__)("Enter your Slot ID","web-stories"),SLOT_ID_LABEL:(0,r.__)("Google AdSense Slot ID","web-stories"),INPUT_ERROR:(0,r.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,r.__)("Save","web-stories")};const xs=function GoogleAdSenseSettings({publisherId:e,slotId:t,handleUpdatePublisherId:a,handleUpdateSlotId:o}){const[r,l]=(0,b.useState)(e),[i,s]=(0,b.useState)(""),c=r!==e&&!i,d=!c,[u,p]=(0,b.useState)(t),[m,f]=(0,b.useState)(""),g=u!==t&&!m,h=!g;(0,b.useEffect)((()=>{l(e)}),[e]);const _=(0,b.useCallback)((e=>{const{value:t}=e.target;l(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(ks))}(t)?s(""):s(As.INPUT_ERROR)}),[]),y=(0,b.useCallback)((()=>{c&&a(r)}),[c,r,a]),S=(0,b.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),y())}),[y]);(0,b.useEffect)((()=>{p(t)}),[t]);const w=(0,b.useCallback)((e=>{const{value:t}=e.target;p(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(Ls))}(t)?f(""):f(As.INPUT_ERROR)}),[]),v=(0,b.useCallback)((()=>{g&&o(u)}),[g,u,o]),T=(0,b.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),v())}),[v]),C=(0,b.useCallback)((e=>(0,E.trackClick)(e,"click_adsense_publisher_id_docs")),[]);return n.createElement(n.Fragment,null,n.createElement(hs,null,n.createElement(_s,{htmlFor:"adSensePublisherId"},As.PUBLISHER_ID_LABEL),n.createElement(ys,{"aria-label":As.PUBLISHER_ID_LABEL,id:"adSensePublisherId",name:"adSensePublisherId","data-testid":"adSensePublisherId",value:r,onChange:_,onKeyDown:S,placeholder:As.PUBLISHER_ID_PLACEHOLDER,hasError:Boolean(i),hint:i}),n.createElement(gs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:d,onClick:y,"data-testid":"adSensePublisherIdButton"},As.SUBMIT_BUTTON)),n.createElement(rs,{size:Ya.TextSize.Small},n.createElement(un.default,{mapping:{a:n.createElement(es,{href:As.PUBLISHER_ID_CONTEXT_LINK,rel:"noreferrer",target:"_blank",onClick:C,size:Ya.TextSize.Small})}},As.PUBLISHER_ID_CONTEXT)),n.createElement(hs,null,n.createElement(_s,{htmlFor:"adSenseSlotId"},As.SLOT_ID_LABEL),n.createElement(ys,{id:"adSenseSlotId","aria-label":As.SLOT_ID_LABEL,name:"adSenseSlotId","data-testid":"adSenseSlotId",value:u,onChange:w,onKeyDown:T,placeholder:As.SLOT_ID_PLACEHOLDER,hasError:Boolean(m),hint:m}),n.createElement(gs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:h,onClick:v,"data-testid":"adSenseSlotIdButton"},As.SUBMIT_BUTTON)),n.createElement(rs,{size:Ya.TextSize.Small},n.createElement(un.default,{mapping:{a:n.createElement(es,{href:As.SLOT_ID_CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small})}},As.SLOT_ID_CONTEXT)))},Os=/^\d{7,20}$/;const Ds={WIDGET_ID_CONTEXT:(0,X.default)(/* translators: %s: example value. */ /* translators: %s: example value. */
(0,r.__)("Example: %s","web-stories"),"1234567"),WIDGET_ID_PLACEHOLDER:(0,r.__)("Enter your MGID Widget ID","web-stories"),WIDGET_ID_LABEL:(0,r.__)("Widget ID","web-stories"),INPUT_ERROR:(0,r.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,r.__)("Save","web-stories")};const Ns=function MgidSettings({widgetId:e,handleUpdate:t}){const[a,o]=(0,b.useState)(e),[r,l]=(0,b.useState)(""),i=a!==e&&!r,s=!i;(0,b.useEffect)((()=>{o(e)}),[e]);const c=(0,b.useCallback)((e=>{const{value:t}=e.target;o(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(Os))}(t)?l(""):l(Ds.INPUT_ERROR)}),[]),d=(0,b.useCallback)((()=>{i&&t(a)}),[i,a,t]),u=(0,b.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),d())}),[d]);return n.createElement(n.Fragment,null,n.createElement(hs,null,n.createElement(_s,{htmlFor:"mgidWidgetId"},Ds.WIDGET_ID_LABEL),n.createElement(ys,{id:"mgidWidgetId","aria-label":Ds.WIDGET_ID_LABEL,value:a,onChange:c,onKeyDown:u,placeholder:Ds.WIDGET_ID_PLACEHOLDER,hasError:Boolean(r),hint:r}),n.createElement(gs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:s,onClick:d},Ds.SUBMIT_BUTTON)),n.createElement(rs,{size:Ya.TextSize.Small},Ds.WIDGET_ID_CONTEXT))},Ps={SECTION_HEADING:(0,r.__)("Monetization","web-stories"),HELPER_MESSAGE_NONE:(0,r.__)("Monetize your content by showing ads in your Web Stories. <a>Learn more</a>.","web-stories"),HELPER_LINK_NONE:(0,r.__)("https://amp.dev/documentation/guides-and-tutorials/develop/advertise_amp_stories/","web-stories"),SITE_KIT_NOT_INSTALLED:(0,r.__)("Install <a>Site Kit by Google</a> to easily enable Google AdSense for Web Stories.","web-stories"),SITE_KIT_INSTALLED:(0,r.__)("Use Site Kit by Google to easily<a>activate Google AdSense</a> for Web Stories.","web-stories"),SITE_KIT_IN_USE:(0,r.__)("Site Kit by Google has already enabled Google AdSense for your Web Stories, all changes to your ad configuration should occur there.","web-stories")};const Rs=function AdManagement({updateSettings:e,adNetwork:t,publisherId:a,adSenseSlotId:o,adManagerSlotId:r,mgidWidgetId:l,siteKitStatus:i}){const{adsenseActive:s,installed:c,adsenseLink:d}=i,u=(0,b.useCallback)((e=>(0,E.trackClick)(e,"monetization","dashboard",Ps.HELPER_LINK_NONE)),[]),p=(0,b.useCallback)((t=>e({adSensePublisherId:t})),[e]),m=(0,b.useCallback)((t=>e({adSenseSlotId:t})),[e]),f=(0,b.useCallback)((t=>e({adManagerSlotId:t})),[e]),g=(0,b.useCallback)((t=>e({mgidWidgetId:t})),[e]),h=(0,b.useCallback)((t=>{e({adNetwork:t}),(0,E.trackEvent)("change_ad_network",{name:t})}),[e]),_=(0,b.useCallback)((e=>(0,E.trackClick)(e,"click_site_kit_link")),[]),y=(0,b.useMemo)((()=>s?null:n.createElement(un.default,{mapping:{a:n.createElement(es,{href:d,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:_})}},c?Ps.SITE_KIT_INSTALLED:Ps.SITE_KIT_NOT_INSTALLED)),[s,c,d,_]);return n.createElement(Es,{onSubmit:e=>e.preventDefault()},n.createElement("div",null,n.createElement(Qi,null,Ps.SECTION_HEADING),n.createElement(rs,{size:Ya.TextSize.Small},n.createElement(un.default,{mapping:{a:n.createElement(es,{href:Ps.HELPER_LINK_NONE,rel:"noreferrer",target:"_blank",onClick:u,size:Ya.TextSize.Small})}},Ps.HELPER_MESSAGE_NONE)),n.createElement(ns,{size:Ya.TextSize.Small},y)),s?n.createElement("div",null,n.createElement(rs,{size:Ya.TextSize.Small},Ps.SITE_KIT_IN_USE)):n.createElement("div",null,n.createElement(vs,{handleUpdate:h,adNetwork:t}),xi===t&&n.createElement(xs,{handleUpdatePublisherId:p,handleUpdateSlotId:m,publisherId:a,slotId:o,siteKitStatus:i}),Oi===t&&n.createElement(Is,{handleUpdate:f,slotId:r}),Di===t&&n.createElement(Ns,{handleUpdate:g,widgetId:l})))};var Bs=a(75073);Pt.shape({value:Pt.number,set:Pt.func}).isRequired,Pt.number,Pt.bool,Pt.arrayOf(Pt.shape({disabled:Pt.bool,href:Pt.string,label:Pt.string.isRequired,openNewTab:Pt.bool,onClick:Pt.func,onFocus:Pt.func})).isRequired,Pt.func.isRequired,Pt.shape({url:Pt.string,title:Pt.string,id:Pt.number,active:Pt.bool}).isRequired;const Ms=function PopoverLogoContextMenu({isActive:e,idx:t,publisherLogo:a,contextMenuId:o,onMenuItemToggle:l,items:i}){const s=o.value===a.id,c=e?0:-1,d=(0,b.useCallback)((e=>o.set(e)),[o]),u=(0,b.useCallback)((()=>d(-1)),[d]);return n.createElement(ms,null,n.createElement(fs,{tabIndex:c,isActive:e,menuOpen:s,"data-testid":`publisher-logo-context-menu-button-${t}`,"aria-label":(0,X.default)(/* translators: %s: logo title */ /* translators: %s: logo title */
(0,r.__)("Publisher logo menu for %s","web-stories"),a.title),onClick:e=>{e.preventDefault(),l(s?null:a.id),d(s?-1:a.id)},onFocus:()=>{l(s?null:a.id)}},n.createElement(Bs.default,{"aria-hidden":"true"})),n.createElement(Zt.default,{animate:!0,isOpen:s,"data-testid":`publisher-logo-context-menu-${t}`,onDismiss:u},i.map((({label:e,separator:t,...a})=>{const o=a.href?ra:la.default;return n.createElement(b.Fragment,{key:e},"top"===t&&n.createElement(ia.default,null),n.createElement(o,a,e),"bottom"===t&&n.createElement(ia.default,null))}))))},Us=(0,b.forwardRef)((({contextMenuId:e,index:t,onMenuItemToggle:a,onRemoveLogo:o,onUpdateDefaultLogo:l,publisherLogo:i,setFocusedPublisherLogoId:s,showLogoContextMenu:c,isFocused:d},u)=>{const p=[{label:(0,r.__)("Set as Default","web-stories"),onClick:e=>{e.preventDefault(),l(i)},disabled:i.active},{label:(0,r.__)("Delete","web-stories"),onClick:e=>{e.preventDefault(),o(i,t)}}];return n.createElement(ds,{ref:u,role:"listitem",active:i.active,"data-testid":`publisher-logo-${t}`},n.createElement(us,{onFocus:()=>{s(i.id)},"data-testid":`uploaded-publisher-logo-${t}`,isSelected:d,tabIndex:d?0:-1,onClick:e=>{e.preventDefault(),s(i.id)},"aria-label":(0,X.default)(/* translators: %s: logo title.*/ /* translators: %s: logo title.*/
(0,r.__)("Publisher Logo %s","web-stories"),i.title)},n.createElement(ps,{src:i.url,alt:i.title})),i.active&&n.createElement(os,{size:Ya.TextSize.XSmall},(0,r.__)("Default","web-stories")),c&&n.createElement(Ms,{isActive:d,idx:t,items:p,publisherLogo:i,onMenuItemToggle:a,contextMenuId:e}))}));Us.displayName="GridItem";const Fs={SECTION_HEADING:(0,r.__)("Publisher Logo","web-stories"),UPLOAD_CONTEXT:(0,r.__)("Upload your logos here and they will become available to any stories you create.","web-stories"),CLICK_CONTEXT:(0,r.__)("Click on logo to set as default if you want that logo to be used on default logo for all your stories.","web-stories"),REMOVAL:(0,r.__)("Removing a logo from your settings won't remove it from any stories using that logo.","web-stories"),INSTRUCTIONS:(0,r.__)("Avoid vector files, such as svg or eps. Logos should be at least 96x96 pixels and a perfect square. The background should not be transparent.","web-stories"),SUBMIT:(0,r.__)("Upload logo","web-stories"),ARIA_LABEL:(0,r.__)("Click to upload a new logo","web-stories"),HELPER_UPLOAD:(0,r.__)("Drag a jpg, png, or static gif in this box. Or click “Upload logo” below.","web-stories")};const zs=function PublisherLogoSettings({canUploadFiles:e,onAddLogos:t,onRemoveLogo:a,onUpdateDefaultLogo:o,isLoading:l,publisherLogos:i,uploadError:s}){const{isRTL:c,allowedImageMimeTypes:d}=y(),u=(0,b.useRef)(),p=(0,b.useRef)(),m=(0,b.useRef)({}),[f,g]=(0,b.useState)(null),[h,_]=(0,b.useState)(null),[E,S]=(0,b.useState)(null),w=1===i.length,v=(0,b.useRef)(i.length),T=(0,b.useCallback)(((e,t)=>{S(-1),a?.(e),_(t),v.current=i.length}),[a,i.length]),C=(0,b.useCallback)((e=>{S(-1),o?.(e)}),[o]);(0,b.useEffect)((()=>{if(Boolean(h?.toString())&&i.length!==v.current){if(0===i.length)return u.current?.getElementsByTagName("input")[0].focus();const e=h>0?i[h-1]:i[0];return g(e.id),m.current[e.id].firstChild.focus(),_(null)}}),[h,i,g]),(0,Nt.default)({containerRef:u,gridRef:p,itemRefs:m,isRTL:c,currentItemId:f,items:i});const I=(0,b.useCallback)((e=>{g(e)}),[]);return(0,b.useFocusOut)(u,(()=>{g(null),S(null)}),[]),n.createElement(Zi,null,n.createElement("div",null,n.createElement(Qi,null,Fs.SECTION_HEADING),n.createElement(ns,{size:Ya.TextSize.Small},Fs.UPLOAD_CONTEXT),n.createElement(ns,{size:Ya.TextSize.Small},Fs.CLICK_CONTEXT),n.createElement(ns,{size:Ya.TextSize.Small},Fs.REMOVAL)),n.createElement("div",{ref:u,"data-testid":"publisher-logos-container"},i.length>0&&n.createElement(cs,{tabIndex:0,ref:p,role:"list","aria-label":(0,r.__)("Viewing existing publisher logos","web-stories")},i.map(((e,t)=>n.createElement(Us,{key:e.id,ref:t=>{m.current[e.id]=t},contextMenuId:{set:S,value:E},index:t,isFocused:f===e.id,onMenuItemToggle:I,onRemoveLogo:T,onUpdateDefaultLogo:C,publisherLogo:e,setFocusedPublisherLogoId:g,showLogoContextMenu:!w})))),s&&n.createElement(ss,{role:"alert"},s),e&&n.createElement(n.Fragment,null,n.createElement(La,{onSubmit:t,id:"settings_publisher_logos",isLoading:l,label:Fs.SUBMIT,isMultiple:!0,ariaLabel:Fs.ARIA_LABEL,instructionalText:Fs.HELPER_UPLOAD,acceptableFormats:Object.values(d)}),n.createElement(ns,{size:Ya.TextSize.Small},Fs.INSTRUCTIONS))))};var Gs=a(97380),Hs=a(67148);function TelemetrySettings({selected:e,onCheckboxSelected:t,disabled:a}){const o=(0,b.useMemo)((()=>`telemetry-opt-in-${(0,Gs.default)()}`),[]);return n.createElement(Zi,null,n.createElement("div",null,n.createElement(Qi,null,(0,r.__)("Data Sharing Opt-in","web-stories"))),n.createElement("div",null,n.createElement(ls,{htmlFor:o},n.createElement(Hs.default,{id:o,"data-testid":"telemetry-settings-checkbox",disabled:a,onChange:t,checked:Boolean(e)}),n.createElement(is,{size:Ya.TextSize.Small,"aria-checked":Boolean(e)},n.createElement(un.default,{mapping:{a:n.createElement("a",{href:(0,r.__)("https://policies.google.com/privacy","web-stories"),rel:"noreferrer",target:"_blank","aria-label":(0,r.__)("Learn more by visiting Google Privacy Policy","web-stories")})}},(0,r.__)("Check the box to help us improve the Web Stories plugin by allowing tracking of product usage stats. All data are treated in accordance with <a>Google Privacy Policy</a>.","web-stories"))))))}function MediaOptimizationSettings({selected:e,onCheckboxSelected:t,disabled:a}){const o=(0,b.useMemo)((()=>`media-optimization-${(0,Gs.default)()}`),[]);return n.createElement(Zi,null,n.createElement("div",null,n.createElement(Qi,null,(0,r.__)("Video Optimization","web-stories"))),n.createElement("div",null,n.createElement(ls,{htmlFor:o},n.createElement(Hs.default,{id:o,"data-testid":"media-optimization-settings-checkbox",disabled:a,onChange:t,checked:Boolean(e)}),n.createElement(is,{size:Ya.TextSize.Small,"aria-checked":Boolean(e)},(0,r.__)("Automatically optimize videos used in Web Stories. We recommend enabling this feature. Video files that are too large or have an unsupported format (like .mov) will otherwise not display properly.","web-stories")))))}function VideoCacheSettings({isEnabled:e=!1,updateSettings:t}){const a=(0,b.useMemo)((()=>`video-cache-${(0,Gs.default)()}`),[]),o=(0,b.useCallback)((()=>t({videoCache:!e})),[t,e]);return n.createElement(Zi,null,n.createElement("div",null,n.createElement(Qi,null,(0,r.__)("Video Cache","web-stories"))),n.createElement("div",null,n.createElement(ls,{htmlFor:a},n.createElement(Hs.default,{id:a,"data-testid":"video-cache-settings-checkbox",onChange:o,checked:Boolean(e)}),n.createElement(is,{size:Ya.TextSize.Small,"aria-checked":Boolean(e)},(0,r.__)("Reduce hosting costs and improve user experience by serving videos from the Google cache.","web-stories")))))}function DataRemovalSettings({isEnabled:e=!1,updateSettings:t}){const a=(0,b.useCallback)((()=>t({dataRemoval:!e})),[t,e]);return n.createElement(Zi,null,n.createElement("div",null,n.createElement(Qi,null,(0,r.__)("Plugin Uninstall","web-stories"))),n.createElement("div",null,n.createElement(ls,{htmlFor:"data-removal-settings"},n.createElement(Hs.default,{id:"data-removal-settings","data-testid":"data-removal-settings-checkbox",onChange:a,checked:Boolean(e)}),n.createElement(is,{size:Ya.TextSize.Small,"aria-checked":Boolean(e)},(0,r.__)("Remove all data including stories and saved templates when uninstalling the Web Stories plugin.","web-stories")))))}const js={LABEL:(0,r.__)("Stories Archives","web-stories"),SECTION_HEADING:(0,r.__)("Stories Archives","web-stories"),ARCHIVE_CONTENT:(0,r.__)("By default WordPress automatically creates an archive page, displaying your latest stories in your theme's layout.","web-stories"),ARCHIVE_CONTENT_2:(0,r.__)("You can customize or disable this behavior.","web-stories"),SUB_TEXT_CUSTOM:(0,r.__)("Choose a page to serve as your Web Stories archive. Use the Web Stories block to add stories to this page.","web-stories")},Vs=[{label:(0,r._x)("Default","archive type","web-stories"),value:Ni.DEFAULT},{label:(0,r.__)("Disabled","web-stories"),value:Ni.DISABLED},{label:(0,r.__)("Create your own","web-stories"),value:Ni.CUSTOM}],qs=m.default.div.withConfig({displayName:"archive__SearchWrapper",componentId:"sc-u9kj1r-0"})(["padding-top:12px;"]);function ArchiveSettings({archive:e=Ni.DEFAULT,archiveURL:t,defaultArchiveURL:a,archivePageId:o,updateSettings:l,searchPages:i,getPageById:s}){const[c,d]=(0,b.useState)(t),[u,p]=(0,b.useState)(o?{value:o}:void 0),[m,f]=(0,b.useState)([]),g=(0,b.useCallback)(((e,a)=>{d(t);const n=a===Ni.CUSTOM?o:0;p(n),l({archive:a,archivePageId:n})}),[l,o,t]),h=(0,b.useCallback)(((e,t)=>{const a=Number(t.value);a!==o&&(p(a?{value:a}:void 0),l({archivePageId:a}))}),[o,l]);(0,b.useEffect)((()=>{let t=!0;return o&&Ni.CUSTOM===e&&(async()=>{const{title:e,link:a}=await s(o);if(t&&e){const t={value:o,label:e};f((e=>[t,...e])),p(t),d(a)}})(),()=>{t=!1}}),[e,o,s]);const _=(0,b.useDebouncedCallback)((async e=>{await(0,E.trackEvent)("archive_page_search",{search_type:"dashboard",search_term:e}),f(await i(e))}),rt);return n.createElement(Zi,null,n.createElement("div",null,n.createElement(Qi,null,js.SECTION_HEADING),n.createElement(rs,{size:Ya.TextSize.Small},js.ARCHIVE_CONTENT),n.createElement(rs,{size:Ya.TextSize.Small},js.ARCHIVE_CONTENT_2)),n.createElement("div",null,n.createElement(Tn.default,{ariaLabel:js.LABEL,options:Vs,selectedValue:e,onMenuItemClick:g,fillWidth:!0}),Ni.DISABLED===e&&n.createElement(rs,{size:Ya.TextSize.Small},n.createElement(un.default,{mapping:{code:n.createElement("code",null)}},(0,X.default)(/* translators: %s: archive url. */ /* translators: %s: archive url. */
(0,r.__)("Turn off the default archive page at <code>%s</code>. Users will see a 404 Not Found page when trying to access the default archive page.","web-stories"),a))),Ni.CUSTOM===e&&n.createElement(rs,{size:Ya.TextSize.Small},js.SUB_TEXT_CUSTOM),Ni.CUSTOM===e&&n.createElement(qs,null,n.createElement(tr,{placeholder:(0,r.__)("Select page","web-stories"),selectedValue:u,options:m,handleSearchValueChange:_,emptyText:(0,r.__)("No pages available","web-stories"),onMenuItemClick:h})),Ni.DISABLED!==e&&n.createElement(rs,{size:Ya.TextSize.Small},n.createElement(un.default,{mapping:{a:n.createElement(es,{href:c,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small}),code:n.createElement("code",null)}},o&&c!==a?(0,X.default)(/* translators: 1. current archive url, 2. default archive url. */ /* translators: 1. current archive url, 2. default archive url. */
(0,r.__)("Visit archive page at <a>%1$s</a>. <code>%2$s</code> will automatically redirect to this page.","web-stories"),c,a):(0,X.default)(/* translators: %s: archive url. */ /* translators: %s: archive url. */
(0,r.__)("Visit archive page at <a>%1$s</a>.","web-stories"),a)))))}var Ws=a(57796),$s=a(28874);const Ks=/^ua-\d+-\d+|g-\w+$/;const Xs=(0,m.default)(Ws.default).withConfig({displayName:"googleAnalytics__StyledNotificationBubble",componentId:"sc-svg62t-0"})(["display:inline-block;margin-left:10px;"]),Ys={CONTEXT:(0,r.__)("The story editor will append a default, configurable AMP analytics configuration to your story. If you’re interested in going beyond what the default configuration, read this <a>article</a>.","web-stories"),CONTEXT_LINK:"https://blog.amp.dev/2019/08/28/analytics-for-your-amp-stories/",SECTION_HEADING:(0,r.__)("Google Analytics","web-stories"),PLACEHOLDER:(0,r.__)("Enter your Google Analytics Measurement ID","web-stories"),ARIA_LABEL:(0,r.__)("Enter your Google Analytics Measurement ID","web-stories"),INPUT_ERROR:(0,r.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,r.__)("Save","web-stories"),SITE_KIT_NOT_INSTALLED:(0,r.__)("Install <a>Site Kit by Google</a> to easily enable Google Analytics for Web Stories.","web-stories"),SITE_KIT_INSTALLED:(0,r.__)("Use Site Kit by Google to easily<a>activate Google Analytics</a> for Web Stories.","web-stories"),SITE_KIT_IN_USE:(0,r.__)("<b>Note: </b>If Site Kit is active, it will be used to set up Google Analytics by default. However, you can customize the behavior in case you need more flexibility.","web-stories"),ANALYTICS_DROPDOWN_LABEL:(0,r.__)("Analytics Type","web-stories"),ANALYTICS_DROPDOWN_PLACEHOLDER:(0,r.__)("Select Analytics Type","web-stories")},Js=[{value:Mi,label:(0,r.__)("Use Site Kit for analytics (default)","web-stories")},{value:Ui,label:(0,r.__)("Use only Web Stories for analytics","web-stories")},{value:Fi,label:(0,r.__)("Use both","web-stories")}],Zs=m.default.div.withConfig({displayName:"googleAnalytics__DropdownContainer",componentId:"sc-svg62t-1"})(["padding-top:12px;"]),Qs=m.default.div.withConfig({displayName:"googleAnalytics__WarningContainer",componentId:"sc-svg62t-2"})(["display:flex;gap:8px;margin:14px auto;border:1px solid ",";border-radius:",";padding:8px;"],(({theme:e})=>e.colors.border.defaultNormal),(({theme:e})=>e.borders.radius.small)),ec=(0,m.default)($s.default).withConfig({displayName:"googleAnalytics__WarningIcon",componentId:"sc-svg62t-3"})(["width:32px;height:100%;color:",";"],(({theme:e})=>e.colors.status.warning)),tc=(0,m.default)(Sa.Text.Paragraph).attrs({size:Ya.TextSize.Small}).withConfig({displayName:"googleAnalytics__Message",componentId:"sc-svg62t-4"})(["max-width:calc(100% - 40px);"]);const ac=function GoogleAnalyticsSettings({googleAnalyticsId:e,handleUpdateAnalyticsId:t,usingLegacyAnalytics:a,handleMigrateLegacyAnalytics:o,siteKitStatus:l={},googleAnalyticsHandler:i,handleUpdateGoogleAnalyticsHandler:s}){const[c,d]=(0,b.useState)(e),[u,p]=(0,b.useState)(i),[m,f]=(0,b.useState)(""),g=c!==e&&!m,h=!g,{analyticsActive:_,installed:y,analyticsLink:S}=l;(0,b.useEffect)((()=>{d(e)}),[e]),(0,b.useEffect)((()=>{p(i)}),[i]);const w=(0,b.useCallback)((e=>{const{value:t}=e.target;d(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(Ks))}(t)?f(""):f(Ys.INPUT_ERROR)}),[]),v=(0,b.useCallback)((e=>{p(e),s(e)}),[s]),T=(0,b.useCallback)((()=>{g&&t(c)}),[g,c,t]),C=(0,b.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),T())}),[T]),I=(0,b.useCallback)((e=>{e.preventDefault(),o(),(0,E.trackEvent)("migrate_story_auto_analytics")}),[o]),k=(0,b.useCallback)((e=>(0,E.trackClick)(e,"click_auto_analytics_link")),[]),L=(0,b.useCallback)((e=>(0,E.trackClick)(e,"click_site_kit_link")),[]),A=(0,b.useCallback)((e=>(0,E.trackClick)(e,"click_analytics_docs")),[]),x=(0,b.useMemo)((()=>_?null:n.createElement(un.default,{mapping:{a:n.createElement(es,{href:S,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:L})}},y?Ys.SITE_KIT_INSTALLED:Ys.SITE_KIT_NOT_INSTALLED)),[_,y,S,L]);return n.createElement(Zi,{onSubmit:e=>e.preventDefault()},n.createElement("div",null,n.createElement(Qi,{htmlFor:"gaTrackingID",as:"h3"},Ys.SECTION_HEADING,a&&n.createElement(Xs,{notificationCount:1,isSmall:!0})),n.createElement(ns,{size:Ya.TextSize.Small},x),a&&n.createElement(n.Fragment,null,n.createElement(ns,{size:Ya.TextSize.Small},n.createElement(un.default,{mapping:{a:n.createElement(es,{href:"https://wp.stories.google/docs/seo/",rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:k})}},(0,r.__)("An improved analytics configuration is now available. <a>Learn more</a>.","web-stories"))),n.createElement(ns,{size:Ya.TextSize.Small},n.createElement(gs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,onClick:I},(0,r.__)("Migrate","web-stories"))))),n.createElement("div",null,n.createElement(hs,null,n.createElement(_s,{htmlFor:"gaTrackingId"},Ys.ARIA_LABEL),n.createElement(ys,{"aria-label":Ys.ARIA_LABEL,id:"gaTrackingId",value:c,onChange:w,onKeyDown:C,placeholder:Ys.PLACEHOLDER,hasError:Boolean(m),hint:m}),n.createElement(gs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:h,onClick:T},Ys.SUBMIT_BUTTON)),n.createElement(rs,{size:Ya.TextSize.Small},n.createElement(un.default,{mapping:{a:n.createElement(es,{href:Ys.CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:A})}},Ys.CONTEXT)),_&&n.createElement(n.Fragment,null,n.createElement(rs,{size:Ya.TextSize.Small},n.createElement(un.default,null,Ys.SITE_KIT_IN_USE)),n.createElement(Zs,null,n.createElement(Tn.default,{id:"analyticsType",ariaLabel:Ys.ANALYTICS_DROPDOWN_LABEL,placeholder:Ys.ANALYTICS_DROPDOWN_PLACEHOLDER,options:Js,onMenuItemClick:(e,t)=>{v(t)},selectedValue:u}))),!e||e.startsWith("UA-")?n.createElement(Qs,null,n.createElement(ec,{"aria-hidden":!0}),n.createElement(tc,null,n.createElement(un.default,{mapping:{a:n.createElement(ea.Link,{href:(0,r.__)("https://support.google.com/analytics/answer/11583528?hl=en","web-stories"),rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:e=>(0,E.trackClick)(e,"click_ua_deprecation_docs")}),a2:n.createElement(ea.Link,{href:(0,r.__)("https://support.google.com/analytics/answer/10089681?hl=en","web-stories"),rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:e=>(0,E.trackClick)(e,"click_ga4_docs")})}},(0,r.__)("As <a>previously announced</a>, Universal Analytics will stop processing new visits starting <b>July 1, 2023</b>. We recommend switching to <a2>Google Analytics 4</a2> (GA4), our analytics product of record.","web-stories")))):null))};var oc=a(16015);function nc(e,t="https"){return/^(http:\/\/|https:\/\/|tel:|mailto:)/.test(e)?e:`${t}://${e}`}var rc=a(70716);const lc=function ConfirmationDialog({onClose:e,onPrimary:t}){return n.createElement(m.ThemeProvider,{theme:i.theme},n.createElement(ha.default,{isOpen:!0,onClose:e,title:(0,r.__)("Delete Font","web-stories"),actions:n.createElement(n.Fragment,null,n.createElement(Bt.Button,{type:Mt.ButtonType.Tertiary,size:Mt.ButtonSize.Small,onClick:()=>e()},(0,r.__)("Cancel","web-stories")),n.createElement(Bt.Button,{type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Small,onClick:()=>t()},(0,r.__)("Delete Font","web-stories")))},n.createElement(Sa.Text.Paragraph,{size:Ya.TextSize.Small},(0,r.__)("Deleting a font will delete it from every previous story it’s in. Would you like to proceed?","web-stories"))))};const ic=async function(e){const{load:t}=await Promise.all([a.e(945),a.e(8635)]).then(a.bind(a,60945)),o=await t(e);return{name:o.names.fullName.en,family:o.names.fullName.en,weights:[400],styles:["regular"],variants:[[0,400]],service:"custom",fallbacks:["sans-serif"],metrics:{upm:o.unitsPerEm,asc:o.ascender,des:o.descender,tAsc:o.tables.os2.sTypoAscender,tDes:o.tables.os2.sTypoDescender,tLGap:o.tables.os2.sTypoLineGap,wAsc:o.tables.os2.usWinAscent,wDes:o.tables.os2.usWinDescent,xH:o.tables.os2.sxHeight,capH:o.tables.os2.sCapHeight,yMin:o.tables.head.yMin,yMax:o.tables.head.yMax,hAsc:o.tables.hhea.ascender,hDes:o.tables.hhea.descender,lGap:o.tables.hhea.lineGap}}},sc={ADD_CONTEXT:(0,r.__)("Add and manage your custom and brand fonts via link here. They’ll appear in your font list in the editor.","web-stories"),REMOVAL:(0,r.__)("Removing a font from this settings page will remove it from your font list in all stories.","web-stories"),SECTION_HEADING:(0,r.__)("Custom Fonts","web-stories"),LABEL:(0,r.__)("Insert Font URL","web-stories"),INPUT_CONTEXT:(0,r.__)("Insert a public URL to a font file. Allowed formats are .otf, .ttf, .woff.","web-stories"),INPUT_ERROR:(0,r.__)("Invalid URL format","web-stories"),SUBMIT_BUTTON:(0,r.__)("Add Font","web-stories"),FONTS_HEADING:(0,r.__)("Current Fonts","web-stories"),FONTS_CONTEXT:(0,r.__)("Deleting fonts will delete them from your in-editor font list and all previous stories.","web-stories")},cc=(0,m.default)(gs).withConfig({displayName:"customFonts__AddButton",componentId:"sc-4md0nd-0"})(["min-width:90px;margin-top:32px;"]),dc=m.default.div.withConfig({displayName:"customFonts__InputsWrapper",componentId:"sc-4md0nd-1"})(["margin-top:8px;"]),uc=m.default.div.withConfig({displayName:"customFonts__FontsWrapper",componentId:"sc-4md0nd-2"})(["margin-top:34px;"]),pc=(0,m.default)(Sa.Text.Span).withConfig({displayName:"customFonts__ListHeading",componentId:"sc-4md0nd-3"})(["margin-bottom:10px;display:inline-block;"]),mc=m.default.div.withConfig({displayName:"customFonts__FontsList",componentId:"sc-4md0nd-4"})(["padding:12px 0;border:",";:focus-within{","}"],(({theme:e})=>`1px solid ${e.colors.divider.primary}`),(({theme:e})=>qt.focusCSS(e.colors.border.focus))),fc=(0,m.default)(Bt.Button).withConfig({displayName:"customFonts__DeleteButton",componentId:"sc-4md0nd-5"})(["visibility:hidden;opacity:0;transition:visibility 0s,opacity ease-in-out 300ms;&:focus{","}"],(({theme:e})=>qt.focusCSS(e.colors.border.focus))),gc=m.default.div.withConfig({displayName:"customFonts__FontRow",componentId:"sc-4md0nd-6"})(["padding:0 12px;display:flex;height:32px;width:100%;justify-content:space-between;transition:background-color ease-in-out 300ms;&[aria-selected='true'],&:hover,&:focus{background-color:",";button{visibility:visible;opacity:1;}}"],(({theme:e})=>e.colors.bg.secondary)),bc=m.default.div.withConfig({displayName:"customFonts__FontData",componentId:"sc-4md0nd-7"})(["line-height:32px;white-space:nowrap;display:flex;font-size:14px;max-width:calc(100% - 32px);align-items:center;"]),hc=(0,m.default)(Sa.Text.Paragraph).attrs({as:"span"}).withConfig({displayName:"customFonts__StyledText",componentId:"sc-4md0nd-8"})([""]),_c=(0,m.default)(hc).withConfig({displayName:"customFonts__FontUrl",componentId:"sc-4md0nd-9"})(["color:",";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(({theme:e})=>e.colors.fg.tertiary)),yc=m.default.div.withConfig({displayName:"customFonts__Divider",componentId:"sc-4md0nd-10"})(["width:4px;height:4px;background-color:",";border-radius:",";margin:0 6px;align-self:center;"],(({theme:e})=>e.colors.standard.black),(({theme:e})=>e.borders.radius.round)),Ec=[".otf",".ttf",".woff"];const Sc=function CustomFontsSettings({customFonts:e=[],addCustomFont:t,deleteCustomFont:a}){const o=(0,Zn.default)(),[l,i]=(0,b.useState)(""),[s,c]=(0,b.useState)(""),[d,u]=(0,b.useState)(!1),[p,m]=(0,b.useState)(null),f=!s&&l,g=(0,b.useRef)(null),h=(0,b.useRef)([]),[_,y]=(0,b.useState)(0),[S,w]=(0,b.useState)(),{showSnackbar:v}=(0,sr.useSnackbar)(),T=(0,b.useCallback)((e=>{const{value:t}=e.target;i(t),0===t.length||function(e){try{return new URL(e),!0}catch{return!1}}(nc(t))?c(""):c(sc.INPUT_ERROR)}),[]),C=(0,b.useCallback)((async()=>{try{await a(p),o((0,r.__)("Font deleted","web-stories"))}catch(e){(0,E.trackError)("remove_custom_font",e?.message),v({"aria-label":Ii.REMOVE_FONT.MESSAGE,message:Ii.REMOVE_FONT.MESSAGE,dismissible:!0})}finally{m(null),u(!1),c("")}}),[a,p,v,o]),I=(0,b.useCallback)((async()=>{if(f){const e=nc(l);try{await fetch(e,{method:"HEAD"})}catch(e){return(0,E.trackError)("add_custom_font",e?.message),void c((0,r.__)("Please ensure correct CORS settings for allowing font usage on this site.","web-stories"))}let a;try{if((0,E.trackEvent)("add_custom_font",{url:e}),a=await ic(e),!a.family)return void c((0,r.__)("Something went wrong, please try again.","web-stories"))}catch(e){return(0,E.trackError)("add_custom_font",e?.message),void c((0,X.default)(/* translators: %s: list of allowed font types. */ /* translators: %s: list of allowed font types. */
(0,r.__)("Getting font data failed, please ensure the URL points directly to a %s file.","web-stories"),(0,oc.default)(Ec)))}try{await t({...a,url:e}),i("")}catch(e){(0,E.trackError)("add_custom_font",e?.message),c((0,X.default)(/* translators: %s: font name. */ /* translators: %s: font name. */
(0,r.__)("A font with the name %s already exists.","web-stories"),a.family))}}}),[t,f,l]),k=(0,b.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),I())}),[I]);(0,b.useEffect)((()=>{const e=h.current[`row-${_}`];e&&(e.focus(),w(e.id))}),[_]);const L=e=>_===e,A=(0,b.useCallback)((t=>{const{key:a}=t;"ArrowUp"===a?(t.preventDefault(),y((e=>Math.max(0,e-1)))):"ArrowDown"===a&&(t.preventDefault(),y((t=>Math.min(e.length-1,t+1))))}),[e]);return n.createElement(Zi,{onSubmit:e=>e.preventDefault()},n.createElement("div",null,n.createElement(Qi,{as:"h3"},sc.SECTION_HEADING),n.createElement(ns,{size:Ya.TextSize.Small},sc.ADD_CONTEXT),n.createElement(ns,{size:Ya.TextSize.Small},sc.REMOVAL)),n.createElement(dc,null,n.createElement(hs,null,n.createElement(ys,{value:l,onChange:T,onKeyDown:k,hasError:Boolean(s),hint:s,label:sc.LABEL}),n.createElement(cc,{type:Mt.ButtonType.Primary,size:Mt.ButtonSize.Small,disabled:!f,onClick:I},sc.SUBMIT_BUTTON)),n.createElement(rs,{size:Ya.TextSize.Small},sc.INPUT_CONTEXT),e?.length>0&&n.createElement(uc,null,n.createElement(pc,null,sc.FONTS_HEADING),n.createElement(mc,{ref:g,role:"listbox",tabIndex:0,onKeyDown:A,"aria-activedescendant":S||e[0]?.id},e.map((({id:e,family:t,url:a},o)=>n.createElement(gc,{id:`font-${e}`,ref:e=>h.current[`row-${o}`]=e,key:t,role:"option",onClick:()=>{y(o)},"aria-selected":L(o)},n.createElement(bc,null,n.createElement(hc,null,t),n.createElement(yc,null),n.createElement(_c,null,a)),n.createElement(Tooltip,{hasTail:!0,title:(0,r.__)("Delete font","web-stories")},n.createElement(fc,{"aria-label":(0,X.default)(/*translators: %s: font family. */ /*translators: %s: font family. */
(0,r.__)("Delete %s","web-stories"),t),type:Mt.ButtonType.Tertiary,size:Mt.ButtonSize.Small,variant:Mt.ButtonVariant.Square,onClick:()=>{m(e),u(!0)}},n.createElement(rc.default,null))))))),n.createElement(rs,{size:Ya.TextSize.Small},sc.FONTS_CONTEXT))),d&&n.createElement(lc,{onClose:()=>u(!1),onPrimary:C}))};var wc=a(19071);const vc=/[\w-]+\.myshopify\.com/i;function Tc(e=""){return Boolean(e.toLowerCase().match(vc))}const Cc=m.default.div.withConfig({displayName:"shopify__Loading",componentId:"sc-ur0gaq-0"})(["position:relative;margin-top:10px;"]),Ic=m.default.div.withConfig({displayName:"shopify__Spinner",componentId:"sc-ur0gaq-1"})(["position:absolute;top:0;"]),kc={HOST_CONTEXT:(0,X.default)(/* translators: 1: first example. 2: second example. */ /* translators: 1: first example. 2: second example. */
(0,r.__)("Without <code>%1$s</code> or <code>%2$s</code>. Example: %3$s. <a>Find your URL</a>.","web-stories"),"https://","www.","yourstore.myshopify.com"),HOST_CONTEXT_LINK:(0,r.__)("https://help.shopify.com/en/manual/domains","web-stories"),HOST_PLACEHOLDER:(0,r.__)("Enter your .myshopify.com domain","web-stories"),HOST_LABEL:(0,r.__)("Shopify Domain","web-stories"),ACCESS_TOKEN_CONTEXT:(0,r.__)("<a>Learn how to get one</a>.","web-stories"),ACCESS_TOKEN_CONTEXT_LINK:(0,r.__)("https://help.shopify.com/en/manual/apps/custom-apps#get-the-api-credentials-for-a-custom-app","web-stories"),ACCESS_TOKEN_PLACEHOLDER:(0,r.__)("Enter your API access token","web-stories"),ACCESS_TOKEN_LABEL:(0,r.__)("Storefront API Access Token","web-stories"),INPUT_ERROR:(0,r.__)("Invalid format","web-stories"),SUBMIT_BUTTON:(0,r.__)("Save","web-stories"),CONNECTION_TEST_BUTTON:(0,r.__)("Test connection","web-stories"),CONNECTION_CHECKING:(0,r.__)("Testing connection…","web-stories"),CONNECTION_SUCCESS:(0,r.__)("Connection successful","web-stories"),CONNECTION_ERROR_DEFAULT:(0,r.__)("Connection failed. Please try again.","web-stories")};const Lc=function ShopifySettings({host:e,accessToken:t,handleUpdateHost:a,handleUpdateAccessToken:o}){const l=(0,Zn.default)(),[i,s]=(0,b.useState)(e),[c,d]=(0,b.useState)(""),u=i!==e&&!c,p=!u,[m,f]=(0,b.useState)(t),[g,h]=(0,b.useState)(""),_=m!==t&&!g,S=!_,{apiCallbacks:{getProducts:w}}=y(),[v,T]=(0,b.useState)(!1),[C,I]=(0,b.useState)(""),[k,L]=(0,b.useState)(!1);(0,b.useEffect)((()=>{s(e)}),[e]),(0,b.useEffect)((()=>{f(t)}),[t]);const A=(0,b.useCallback)((e=>{const{value:t}=e.target;s(t),0===t.length||Tc(t)?d(""):d(kc.INPUT_ERROR)}),[]),x=(0,b.useCallback)((e=>{const{value:t}=e.target;Tc(t)&&s(t.match(vc)[0])}),[]),O=(0,b.useCallback)((()=>{u&&a(i)}),[u,i,a]),D=(0,b.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),O())}),[O]),N=(0,b.useCallback)((e=>{const{value:t}=e.target;h(""),f(t)}),[]),P=(0,b.useCallback)((()=>{_&&o(m)}),[_,m,o]),R=(0,b.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),P())}),[P]),B=(0,b.useCallback)((async()=>{L(!1),T(!0),l(kc.CONNECTION_CHECKING),(0,E.trackEvent)("test_shopping_connection");try{await w((new Date).getTime()),I(kc.CONNECTION_SUCCESS),l(kc.CONNECTION_SUCCESS)}catch(e){(0,E.trackError)("test_shopping_connection",e?.message),L(!0),I(kc.CONNECTION_ERROR_DEFAULT),l(kc.CONNECTION_ERROR_DEFAULT)}finally{T(!1)}}),[w,l]),M=i&&!c&&m&&!g&&!v,U=(0,b.useCallback)((e=>(0,E.trackClick)(e,"click_shopify_docs")),[]);return n.createElement(n.Fragment,null,n.createElement(hs,null,n.createElement(_s,{htmlFor:"shopifyHost"},kc.HOST_LABEL),n.createElement(ys,{"aria-label":kc.HOST_LABEL,id:"shopifyHost",name:"shopifyHost","data-testid":"shopifyHost",value:i,onChange:A,onKeyDown:D,onBlur:x,placeholder:kc.HOST_PLACEHOLDER,hasError:Boolean(c),hint:c}),n.createElement(gs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:p,onClick:O,"data-testid":"shopifyHostButton"},kc.SUBMIT_BUTTON)),n.createElement(rs,{size:Ya.TextSize.Small},n.createElement(un.default,{mapping:{a:n.createElement(es,{href:kc.HOST_CONTEXT_LINK,rel:"noreferrer",target:"_blank",onClick:U,size:Ya.TextSize.Small})}},kc.HOST_CONTEXT)),n.createElement(hs,null,n.createElement(_s,{htmlFor:"shopifyAccessToken"},kc.ACCESS_TOKEN_LABEL),n.createElement(ys,{id:"shopifyAccessToken","aria-label":kc.ACCESS_TOKEN_LABEL,name:"shopifyAccessToken","data-testid":"shopifyAccessToken",value:m,onChange:N,onKeyDown:R,placeholder:kc.ACCESS_TOKEN_PLACEHOLDER,hasError:Boolean(g),hint:g}),n.createElement(gs,{type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:S,onClick:P,"data-testid":"shopifyAccessTokenButton"},kc.SUBMIT_BUTTON)),n.createElement(rs,{size:Ya.TextSize.Small},n.createElement(un.default,{mapping:{a:n.createElement(es,{href:kc.ACCESS_TOKEN_CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small})}},kc.ACCESS_TOKEN_CONTEXT)),n.createElement(bs,{onFocus:()=>I(""),type:Mt.ButtonType.Secondary,size:Mt.ButtonSize.Small,disabled:!M,onClick:B},v?kc.CONNECTION_CHECKING:kc.CONNECTION_TEST_BUTTON),v&&n.createElement(Cc,null,n.createElement(Ic,null,n.createElement(wc.default,{size:24}))),C&&n.createElement(as,{"data-testid":"api-status","aria-label":(0,r.__)("API connection status","web-stories"),hasError:k,size:Ya.TextSize.Small},C))},Ac={SLOT_ID_LABEL:(0,r.__)("Shopping provider","web-stories")};const xc=function ShoppingProviderDropDown({vendors:e,shoppingProvider:t,handleUpdate:a}){const o=[];return Object.entries(e).forEach((([e,t])=>o.push({label:t,value:e}))),n.createElement(Tn.default,{ariaLabel:Ac.SLOT_ID_LABEL,options:o,selectedValue:t,onMenuItemClick:(e,t)=>a(t),fillWidth:!0})},Oc={SECTION_HEADING:(0,r.__)("Shopping","web-stories"),SHOPPING_PROVIDER_HELPER_MESSAGE:(0,r.__)("Once configured you can add products from this provider.","web-stories"),HELPER_MESSAGE:(0,r.__)("Connect your store so you can easily add products to your stories.","web-stories"),WOOCOMMERCE_INSTALL:(0,r.__)("Install <a>WooCommerce</a> to easily add shoppable products to Web Stories.","web-stories"),WOOCOMMERCE_ACTIVE:(0,r.__)("Activate <a>WooCommerce</a> to easily add shoppable products to Web Stories.","web-stories"),WOOCOMMERCE_MANAGE:(0,r.__)("Manage products in <a>WooCommerce</a> to make them available in Web Stories.","web-stories")};const Dc=function Shopping({updateSettings:e,shoppingProvider:t,shopifyHost:a,shopifyAccessToken:o,vendors:r,woocommerce:l}){const i=(0,b.useCallback)((t=>{e({shoppingProvider:t}),(0,E.trackEvent)("change_shopping_provider",{name:t})}),[e]),s=(0,b.useCallback)((t=>e({shopifyHost:t})),[e]),c=(0,b.useCallback)((t=>e({shopifyAccessToken:t})),[e]),d=(0,b.useCallback)((e=>(0,E.trackClick)(e,"click_woocommerce_link")),[]),{canManage:u,installed:p,active:m,link:f}=l;let g;return!1===p?g=Oc.WOOCOMMERCE_INSTALL:!1===m?g=Oc.WOOCOMMERCE_ACTIVE:!0===u&&(g=Oc.WOOCOMMERCE_MANAGE),n.createElement(Es,{onSubmit:e=>e.preventDefault()},n.createElement("div",null,n.createElement(Qi,null,Oc.SECTION_HEADING),n.createElement(rs,{size:Ya.TextSize.Small},Oc.HELPER_MESSAGE),t===Ri&&g&&f&&n.createElement(rs,{"data-testid":"woocommerceMessage",size:Ya.TextSize.Small},n.createElement(un.default,{mapping:{a:n.createElement(es,{href:f,rel:"noreferrer",target:"_blank",size:Ya.TextSize.Small,onClick:d})}},g))),n.createElement("div",null,n.createElement(xc,{vendors:r,shoppingProvider:t,handleUpdate:i}),n.createElement(rs,{size:Ya.TextSize.Small},Oc.SHOPPING_PROVIDER_HELPER_MESSAGE),t===Bi&&n.createElement(Lc,{handleUpdateHost:s,handleUpdateAccessToken:c,host:a,accessToken:o})))};var Nc=a(56438),Pc=a(43250);const Rc={MIN:1,MAX:20},Bc={CONTEXT:(0,r.__)("All new stories will be set to this page advancement setting. Control whether a story auto-advances between pages, or whether the reader has to manually tap to advance.","web-stories"),SECTION_HEADING:(0,r.__)("Default Page Advancement","web-stories"),LABEL_AUTO:(0,r.__)("Auto","web-stories"),LABEL_MANUAL:(0,r.__)("Manual","web-stories"),SWITCH_LABEL:(0,r.__)("Page Advancement","web-stories"),INPUT_LABEL:(0,r.__)("Default page duration in seconds","web-stories"),INPUT_SUFFIX:(0,r.__)("Duration","web-stories"),INPUT_HELPER:(0,X.default)(/* translators: 1: minimum duration. 2: maximum duration. */ /* translators: 1: minimum duration. 2: maximum duration. */
(0,r._n)("Duration between %1$d and %2$d second.","Duration between %1$d and %2$d seconds.",Rc.MAX,"web-stories"),Rc.MIN,Rc.MAX)},Mc=m.default.div.withConfig({displayName:"pageAdvancement__InputsWrapper",componentId:"sc-9snl1y-0"})(["margin-top:8px;"]),Uc=(0,m.default)(Nc.default).withConfig({displayName:"pageAdvancement__StyledSwitch",componentId:"sc-9snl1y-1"})(["width:186px;"]);const Fc=function PageAdvancementSettings({updateSettings:e,autoAdvance:t,defaultPageDuration:a}){const[o,l]=(0,b.useState)(t),i=(0,b.useCallback)((()=>{(0,E.trackEvent)("change_auto_advance",{value:!t}),l(!t),e({autoAdvance:!t})}),[t,e]);(0,b.useEffect)((()=>{l(t)}),[t]);const s=(0,b.useCallback)(((t,a)=>{e({defaultPageDuration:a}),(0,E.trackEvent)("change_default_page_duration",{value:a})}),[e]);return n.createElement(Es,{onSubmit:e=>e.preventDefault()},n.createElement("div",null,n.createElement(Qi,{as:"h3"},Bc.SECTION_HEADING),n.createElement(ns,{size:Ya.TextSize.Small},Bc.CONTEXT)),n.createElement(Mc,null,n.createElement(hs,null,n.createElement(Uc,{groupLabel:Bc.SWITCH_LABEL,name:"page-advancement-switch",value:o,onLabel:Bc.LABEL_AUTO,offLabel:Bc.LABEL_MANUAL,onChange:i,darkTheme:!1})),o&&n.createElement(n.Fragment,null,n.createElement(hs,null,n.createElement(Pc.default,{unit:` ${(0,r.__)("seconds","web-stories")}`,suffix:Bc.INPUT_SUFFIX,value:a,onChange:s,"aria-label":Bc.INPUT_SUFFIX,min:Rc.MIN,max:Rc.MAX})),n.createElement(rs,{size:Ya.TextSize.Small},Bc.INPUT_HELPER))))},zc=m.default.div.withConfig({displayName:"editorSettings__BodyViewOptionsHeader",componentId:"sc-1yxjpva-0"})([""]);const Gc=function EditorSettings(){const{fetchSettings:e,updateSettings:t,googleAnalyticsId:a,usingLegacyAnalytics:o,adSensePublisherId:l,adSenseSlotId:i,adManagerSlotId:s,mgidWidgetId:c,adNetwork:d,uploadMedia:u,newlyCreatedMediaIds:p,isMediaLoading:m,videoCache:f,dataRemoval:g,archive:h,archivePageId:_,searchPages:S,getPageById:w,customFonts:v,addCustomFont:T,deleteCustomFont:C,fetchCustomFonts:I,publisherLogos:k,addPublisherLogo:L,fetchPublisherLogos:A,removePublisherLogo:x,setPublisherLogoAsDefault:O,shoppingProvider:D,shopifyHost:N,shopifyAccessToken:P,autoAdvance:R,defaultPageDuration:B,googleAnalyticsHandler:M}=ji((({actions:{fontsApi:{addCustomFont:e,deleteCustomFont:t,fetchCustomFonts:a},settingsApi:{fetchSettings:o,updateSettings:n},pagesApi:{searchPages:r,getPageById:l},mediaApi:{uploadMedia:i},publisherLogosApi:{fetchPublisherLogos:s,addPublisherLogo:c,removePublisherLogo:d,setPublisherLogoAsDefault:u}},state:{settings:{googleAnalyticsId:p,usingLegacyAnalytics:m,adSensePublisherId:f,adSenseSlotId:g,adManagerSlotId:b,mgidWidgetId:h,adNetwork:_,videoCache:y,dataRemoval:E,archive:S,archivePageId:w,shoppingProvider:v,shopifyHost:T,shopifyAccessToken:C,autoAdvance:I,defaultPageDuration:k,googleAnalyticsHandler:L},media:{isLoading:A,newlyCreatedMediaIds:x},publisherLogos:{publisherLogos:O},customFonts:D}})=>({fetchSettings:o,updateSettings:n,googleAnalyticsId:p,usingLegacyAnalytics:m,adSensePublisherId:f,adSenseSlotId:g,adManagerSlotId:b,mgidWidgetId:h,adNetwork:_,uploadMedia:i,isMediaLoading:A,newlyCreatedMediaIds:x,videoCache:y,dataRemoval:E,archive:S,archivePageId:w,searchPages:r,getPageById:l,customFonts:D,addCustomFont:e,deleteCustomFont:t,fetchCustomFonts:a,fetchPublisherLogos:s,addPublisherLogo:c,removePublisherLogo:d,setPublisherLogoAsDefault:u,publisherLogos:O,shoppingProvider:v,shopifyHost:T,shopifyAccessToken:C,autoAdvance:I,defaultPageDuration:k,googleAnalyticsHandler:L}))),{capabilities:{canUploadFiles:U,canManageSettings:F}={},plugins:{siteKit:z={},woocommerce:G={}},maxUpload:H,maxUploadFormatted:j,allowedImageMimeTypes:V,archiveURL:q,defaultArchiveURL:W,vendors:$}=y(),{disabled:K,toggleWebStoriesTrackingOptIn:Y,optedIn:J}=$i(),{disabled:Z,toggleWebStoriesMediaOptimization:Q,mediaOptimization:ee}=function(){const{showSnackbar:e}=(0,sr.useSnackbar)(),{currentUser:t,toggleWebStoriesMediaOptimization:a}=ji((({state:{currentUser:e},actions:{usersApi:{toggleWebStoriesMediaOptimization:t}}})=>({currentUser:e,toggleWebStoriesMediaOptimization:t}))),o=Boolean(t.data.meta?.webStoriesMediaOptimization),n=(0,b.useCallback)((()=>{a(),(0,E.trackEvent)("video_optimization_optin",{status:o?"off":"on"}),e({"aria-label":Ci.SETTINGS.UPDATED,message:Ci.SETTINGS.UPDATED,dismissible:!0})}),[o,e,a]);return{mediaOptimization:o,disabled:t.isUpdating,toggleWebStoriesMediaOptimization:n}}(),[te,ae]=(0,b.useState)("");(0,b.useEffect)((()=>{F&&(e(),A(),I())}),[e,A,F,I]),(0,b.useEffect)((()=>{p.length>0&&L(p)}),[p,L]),Xi();const oe=(0,b.useCallback)((e=>t({googleAnalyticsId:e})),[t]),ne=(0,b.useCallback)((()=>t({usingLegacyAnalytics:!1})),[t]),re=(0,b.useCallback)((async e=>{let t=!0,a=!0,o=!1;const n=[];if(e.forEach((e=>{t=t&&e.size<=H;const o=V.includes(e.type);a=a&&o,o||n.push((0,Ki.default)({src:URL.createObjectURL(e)}))})),!t){const t=1===e.length?(0,X.default)(/* translators: %s: max upload size for media */ /* translators: %s: max upload size for media */
(0,r.__)("Sorry, this file is too big. Make sure your logo is under %s.","web-stories"),j):(0,X.default)(/* translators: %s: max upload size for media */ /* translators: %s: max upload size for media */
(0,r.__)("Sorry, one or more of these files are too big. Make sure your logos are all under %s.","web-stories"),j);return ae(t)}if(!a){const t=1===e.length?(0,r.__)("Sorry, this file type is not supported. Only jpg, png, and static gifs are supported for publisher logos.","web-stories"):(0,r.__)("Sorry, one or more of these files are of an unsupported file type. Only jpg, png, and static gifs are supported for publisher logos.","web-stories");return ae(t)}const l=await Promise.all(n).catch((()=>{o=!0}));if(o){const t=1===e.length?(0,r.__)("Sorry, there was an error processing your upload. Please try again.","web-stories"):(0,r.__)("Sorry, there was an error processing one or more of your uploads. Please try again.","web-stories");return ae(t)}if(!l.every((({height:e,width:t})=>e>=96&&t>=96))){const t=1===e.length?(0,X.default)(/* translators: 1 = minimum width, 2 = minimum height */ /* translators: 1 = minimum width, 2 = minimum height */
(0,r.__)("Sorry, this file is too small. Make sure your logo is larger than %s.","web-stories"),(0,X.default)("%1$dx%2$dpx",96,96)):(0,X.default)(/* translators: %s: image dimensions in pixels. */ /* translators: %s: image dimensions in pixels. */
(0,r.__)("Sorry, one or more files are too small. Make sure your logos are all larger than %s.","web-stories"),(0,X.default)("%1$dx%2$dpx",96,96));return ae(t)}return ae(""),u(e)}),[H,j,u,V]),le=(0,b.useCallback)((e=>{x(e.id)}),[x]),ie=(0,b.useCallback)((e=>O(e.id)),[O]),se=(0,b.useCallback)((e=>t({googleAnalyticsHandler:e})),[t]);return n.createElement(Ua.Provider,null,n.createElement(Yi,{"data-testid":"editor-settings"},n.createElement(lr,{heading:(0,r.__)("Settings","web-stories")}),n.createElement(ba,null,n.createElement(zc,{id:"body-view-options-header"})),n.createElement(Ua.Scrollable,null,n.createElement(Ji,null,F&&n.createElement(n.Fragment,null,n.createElement(ac,{googleAnalyticsId:a,handleUpdateAnalyticsId:oe,usingLegacyAnalytics:o,handleMigrateLegacyAnalytics:ne,siteKitStatus:z,googleAnalyticsHandler:M,handleUpdateGoogleAnalyticsHandler:se}),n.createElement(zs,{onAddLogos:re,onRemoveLogo:le,onUpdateDefaultLogo:ie,publisherLogos:k,canUploadFiles:U,isLoading:m,uploadError:te})),n.createElement(Sc,{customFonts:v,addCustomFont:T,deleteCustomFont:C}),n.createElement(TelemetrySettings,{disabled:K,onCheckboxSelected:Y,selected:J}),U&&n.createElement(MediaOptimizationSettings,{disabled:Z,onCheckboxSelected:Q,selected:ee}),F&&n.createElement(n.Fragment,null,n.createElement(VideoCacheSettings,{isEnabled:f,updateSettings:t}),n.createElement(DataRemovalSettings,{isEnabled:g,updateSettings:t}),n.createElement(ArchiveSettings,{archive:h,archiveURL:q,defaultArchiveURL:W,updateSettings:t,searchPages:S,archivePageId:_,getPageById:w}),n.createElement(Rs,{updateSettings:t,adNetwork:d,publisherId:l,adSenseSlotId:i,adManagerSlotId:s,mgidWidgetId:c,siteKitStatus:z}),n.createElement(Dc,{updateSettings:t,shoppingProvider:D,shopifyHost:N,shopifyAccessToken:P,vendors:$,woocommerce:G}),n.createElement(Fc,{updateSettings:t,autoAdvance:R,defaultPageDuration:B}))))))};function Hc(){const[e,t]=(0,b.useState)({}),[a,o]=(0,b.useState)(!1),{api:{currentUser:n}}=y();(0,b.useEffect)((()=>{var a;Object.keys(e).length||(a=n,ii({path:a}).then(ni.snakeToCamelCaseObjectKeys)).then(t)}),[n,e]);return{api:{toggleWebStoriesTrackingOptIn:(0,b.useCallback)((async()=>{o(!0);try{t(await function(e,t){return ii({path:e,data:{meta:{web_stories_tracking_optin:!t.meta.webStoriesTrackingOptin}},method:"POST"}).then(ni.snakeToCamelCaseObjectKeys)}(n,e))}finally{o(!1)}}),[n,e]),toggleWebStoriesMediaOptimization:(0,b.useCallback)((async()=>{o(!0);try{t(await function(e,t){return ii({path:e,data:{meta:{web_stories_media_optimization:!t.meta.webStoriesMediaOptimization}},method:"POST"}).then(ni.snakeToCamelCaseObjectKeys)}(n,e))}finally{o(!1)}}),[n,e])},currentUser:{data:e,isUpdating:a}}}const jc={LOADING_MEDIA:"loading_media",ADD_MEDIA_SUCCESS:"add_media_success",ADD_MEDIA_FAILURE:"add_media_failure"},Vc={error:{},isLoading:!1,newlyCreatedMediaIds:[]};const qc=function(e,t){switch(t.type){case jc.LOADING_MEDIA:return{...e,isLoading:!0,newlyCreatedMediaIds:[]};case jc.ADD_MEDIA_FAILURE:return{...e,error:{...t.payload,id:Date.now()},isLoading:!1};case jc.ADD_MEDIA_SUCCESS:return{...e,error:{},isLoading:!1,newlyCreatedMediaIds:t.payload.newlyCreatedMediaIds||e.newlyCreatedMediaIds};default:return e}};function Wc(){const[e,t]=(0,b.useReducer)(qc,Vc),{api:{media:a}}=y();return{media:e,api:{uploadMedia:(0,b.useCallback)((async e=>{t({type:jc.LOADING_MEDIA});try{const o=await function(e,t){return Promise.all(Object.values(t).map((t=>{const a=new window.FormData;return a.append("file",t,t.name||t.type.replace("/",".")),ii({path:e,body:a,method:"POST"}).then(ni.snakeToCamelCaseObjectKeys)})))}(a,e);t({type:jc.ADD_MEDIA_SUCCESS,payload:{media:o,newlyCreatedMediaIds:o.map((({id:e})=>e))}})}catch(a){t({type:jc.ADD_MEDIA_FAILURE,payload:{message:Ii.UPLOAD_PUBLISHER_LOGO[e.length>1?"MESSAGE_PLURAL":"MESSAGE"]}})}}),[a])}}}const $c={UPDATE_SETTINGS_SUCCESS:"update_settings_success",UPDATE_SETTINGS_FAILURE:"update_settings_failure",SETTING_SAVED:"setting_saved",FETCH_SETTINGS_SUCCESS:"fetch_settings_success",FETCH_SETTINGS_FAILURE:"fetch_settings_failure"},Kc={error:{},googleAnalyticsId:"",usingLegacyAnalytics:!1,adSensePublisherId:"",adSenseSlotId:"",adManagerSlotId:"",mgidWidgetId:"",adNetwork:Ai,archive:Ni.DEFAULT,archivePageId:0,videoCache:!1,dataRemoval:!1,settingSaved:!1,shoppingProvider:Pi,shopifyHost:"",shopifyAccessToken:"",autoAdvance:!0,defaultPageDuration:7,googleAnalyticsHandler:Mi};const Xc=function(e,t){switch(t.type){case $c.SETTING_SAVED:return{...e,settingSaved:t.payload};case $c.UPDATE_SETTINGS_FAILURE:case $c.FETCH_SETTINGS_FAILURE:return{...e,error:{...t.payload,id:Date.now()}};case $c.FETCH_SETTINGS_SUCCESS:case $c.UPDATE_SETTINGS_SUCCESS:return{...e,error:{},googleAnalyticsId:t.payload.googleAnalyticsId,usingLegacyAnalytics:t.payload.usingLegacyAnalytics,adSensePublisherId:t.payload.adSensePublisherId,adSenseSlotId:t.payload.adSenseSlotId,adManagerSlotId:t.payload.adManagerSlotId,mgidWidgetId:t.payload.mgidWidgetId,adNetwork:t.payload.adNetwork,videoCache:t.payload.videoCache,dataRemoval:t.payload.dataRemoval,archive:t.payload.archive,archivePageId:t.payload.archivePageId,shoppingProvider:t.payload.shoppingProvider,shopifyHost:t.payload.shopifyHost,shopifyAccessToken:t.payload.shopifyAccessToken,autoAdvance:t.payload.autoAdvance,defaultPageDuration:t.payload.defaultPageDuration,googleAnalyticsHandler:t.payload.googleAnalyticsHandler};default:return e}},Yc=e=>({googleAnalyticsId:e.web_stories_ga_tracking_id,usingLegacyAnalytics:e.web_stories_using_legacy_analytics,adSensePublisherId:e.web_stories_adsense_publisher_id,adSenseSlotId:e.web_stories_adsense_slot_id,adManagerSlotId:e.web_stories_ad_manager_slot_id,mgidWidgetId:e.web_stories_mgid_widget_id,adNetwork:e.web_stories_ad_network,videoCache:e.web_stories_video_cache,dataRemoval:e.web_stories_data_removal,archive:e.web_stories_archive,archivePageId:e.web_stories_archive_page_id,shoppingProvider:e.web_stories_shopping_provider,shopifyHost:e.web_stories_shopify_host,shopifyAccessToken:e.web_stories_shopify_access_token,autoAdvance:Boolean(e.web_stories_auto_advance),defaultPageDuration:e.web_stories_default_page_duration,googleAnalyticsHandler:e.web_stories_ga_tracking_handler});function Jc(){const[e,t]=(0,b.useReducer)(Xc,Kc),{api:{settings:a}}=y();return{settings:e,api:{fetchSettings:(0,b.useCallback)((async()=>{try{const o=await(e=a,ii({path:e}).then(Yc));t({type:$c.FETCH_SETTINGS_SUCCESS,payload:o})}catch(e){t({type:$c.FETCH_SETTINGS_FAILURE,payload:{message:Ii.LOAD_SETTINGS.MESSAGE}})}var e}),[a]),updateSettings:(0,b.useCallback)((async e=>{t({type:$c.SETTING_SAVED});try{const o=await function(e,t){const{googleAnalyticsId:a,usingLegacyAnalytics:o,adSensePublisherId:n,adSenseSlotId:r,adManagerSlotId:l,mgidWidgetId:i,adNetwork:s,videoCache:c,dataRemoval:d,archive:u,archivePageId:p,shoppingProvider:m,shopifyHost:f,shopifyAccessToken:g,autoAdvance:b,defaultPageDuration:h,googleAnalyticsHandler:_}=t,y={};void 0!==a&&(y.web_stories_ga_tracking_id=a),void 0!==o&&(y.web_stories_using_legacy_analytics=o),void 0!==n&&(y.web_stories_adsense_publisher_id=n),void 0!==r&&(y.web_stories_adsense_slot_id=r),void 0!==l&&(y.web_stories_ad_manager_slot_id=l),void 0!==i&&(y.web_stories_mgid_widget_id=i),void 0!==s&&(y.web_stories_ad_network=s),void 0!==c&&(y.web_stories_video_cache=Boolean(c)),void 0!==d&&(y.web_stories_data_removal=Boolean(d)),void 0!==u&&(y.web_stories_archive=u),void 0!==p&&(y.web_stories_archive_page_id=p),void 0!==m&&(y.web_stories_shopping_provider=m),void 0!==f&&(y.web_stories_shopify_host=f),void 0!==g&&(y.web_stories_shopify_access_token=g),void 0!==b&&(y.web_stories_auto_advance=Boolean(b)),void 0!==h&&(y.web_stories_default_page_duration=h),void 0!==_&&(y.web_stories_ga_tracking_handler=_);const E=(0,li.default)(e,y);return ii({path:E,method:"POST"}).then(Yc)}(a,e);t({type:$c.UPDATE_SETTINGS_SUCCESS,payload:o}),t({type:$c.SETTING_SAVED,payload:!0})}catch(e){t({type:$c.UPDATE_SETTINGS_FAILURE,payload:{message:Ii.UPDATE_EDITOR_SETTINGS.MESSAGE}})}}),[a])}}}const Zc=new DOMParser;function Qc(e){return Zc.parseFromString(e,"text/html").body.textContent||""}document.createElement("div");function ed(){const{api:{pages:e}}=y(),t=(0,b.useCallback)((async t=>{try{const{title:a,link:o}=await function(e,t){const a=(0,li.default)(`${e}${t}/`,{_fields:di});return ii({path:a})}(e,t);return{title:Qc(a.rendered),link:o}}catch(e){return null}}),[e]);return{api:{searchPages:(0,b.useCallback)((async t=>{try{const a=await function(e,t){const a=(0,li.default)(e,{per_page:100,search:t,_fields:ci});return ii({path:a})}(e,t);return a.map((({id:e,title:t})=>({value:e,label:Qc(t.rendered)})))}catch(e){return[]}}),[e]),getPageById:t}}}const td={LOADING:"loading",UPDATE_FAILURE:"update_failure",UPDATE_SUCCESS:"update_success",FETCH_FAILURE:"fetch_failure",FETCH_SUCCESS:"fetch_success",REMOVE_FAILURE:"remove_failure",REMOVE_SUCCESS:"remove_success",ADD_FAILURE:"add_failure",ADD_SUCCESS:"add_success"},ad={error:{},isLoading:!1,publisherLogos:[],settingSaved:!1};const od=function(e,t){switch(t.type){case td.LOADING:return{...e,isLoading:!0,settingSaved:!1};case td.ADD_FAILURE:case td.UPDATE_FAILURE:case td.REMOVE_FAILURE:case td.FETCH_FAILURE:return{...e,error:{...t.payload,id:Date.now()},isLoading:!1,settingSaved:!1};case td.FETCH_SUCCESS:return{...e,error:{},isLoading:!1,publisherLogos:[...t.payload.publisherLogos]};case td.ADD_SUCCESS:{const a=[...e.publisherLogos,t.payload.publisherLogo];return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:a}}case td.UPDATE_SUCCESS:{const a=[...e.publisherLogos].map((e=>(e.active=e.id===t.payload.publisherLogo.id,e)));return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:a}}case td.REMOVE_SUCCESS:{const a=e.publisherLogos.some((({id:e,active:a})=>e===t.payload.id&&a)),o=[...e.publisherLogos].filter((({id:e})=>e!==t.payload.id)).map(((e,t)=>(e.active=a?0===t:e.active,e)));return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:o}}default:return e}};function nd(){const[e,t]=(0,b.useReducer)(od,ad),{api:{publisherLogos:a}}=y(),o=(0,b.useCallback)((async()=>{t({type:td.LOADING});try{const o=await(e=a,ii({path:e}));Array.isArray(o)?t({type:td.FETCH_SUCCESS,payload:{publisherLogos:o}}):t({type:td.FETCH_FAILURE,payload:{message:Ii.LOAD_PUBLISHER_LOGOS.MESSAGE}})}catch(e){t({type:td.FETCH_FAILURE,payload:{message:Ii.LOAD_PUBLISHER_LOGOS.MESSAGE}})}var e}),[a]),n=(0,b.useCallback)((async e=>{t({type:td.LOADING});try{await function(e,t){const a=(0,li.default)(`${e}${t}/`,{_method:"DELETE"});return ii({path:a,method:"POST"})}(a,e),t({type:td.REMOVE_SUCCESS,payload:{id:e}})}catch(e){t({type:td.FETCH_FAILURE,payload:{message:Ii.REMOVE_PUBLISHER_LOGO.MESSAGE}})}}),[a]),r=(0,b.useCallback)((async e=>{t({type:td.LOADING});try{const r=await(o=a,n=e,ii({path:o,data:{id:n},method:"POST"})),l=Array.isArray(r)?r:[r];for(const e of l)t({type:td.ADD_SUCCESS,payload:{publisherLogo:e}})}catch(e){t({type:td.ADD_FAILURE,payload:{message:Ii.UPLOAD_PUBLISHER_LOGO.MESSAGE}})}var o,n}),[a]);return{publisherLogos:e,api:{fetchPublisherLogos:o,addPublisherLogo:r,removePublisherLogo:n,setPublisherLogoAsDefault:(0,b.useCallback)((async e=>{t({type:td.LOADING});try{const r=await(o=a,n=e,ii({path:`${o}${n}/`,data:{active:!0},method:"POST"}));t({type:td.UPDATE_SUCCESS,payload:{publisherLogo:r}})}catch(e){t({type:td.FETCH_FAILURE,payload:{message:Ii.UPDATE_PUBLISHER_LOGO.MESSAGE}})}var o,n}),[a])}}}function rd(){const{api:{fonts:e}}=y(),[t,a]=(0,b.useState)(null),o=(0,b.useCallback)((async()=>{try{const t=(await function(e){const t=(0,li.default)(e,{per_page:100,service:"custom"});return ii({path:t})}(e)).map((({id:e,family:t,url:a})=>({id:e,family:t,url:a})));return a(t),t}catch{return null}}),[e]),n=(0,b.useCallback)((async o=>{const n=await function(e,t){const a=(0,li.default)(`${e}${t}/`,{_method:"DELETE"});return ii({path:a,method:"POST"})}(e,o),r=t.filter((e=>e.id!==o));return a(r),n}),[t,e]),r=(0,b.useCallback)((async o=>{const n=await function(e,t){return ii({path:e,data:t,method:"POST"})}(e,o),{id:r,family:l,url:i}=n,s={id:r,family:l,url:i};return a([s,...t]),s}),[t,e]);return{customFonts:t,api:{addCustomFont:r,deleteCustomFont:n,fetchCustomFonts:o}}}const ld=function EditorSettingsProvider({children:e}){const{customFonts:t,api:a}=rd(),{currentUser:o,api:r}=Hc(),{media:l,api:i}=Wc(),{settings:s,api:c}=Jc(),{api:d}=ed(),{publisherLogos:u,api:p}=nd(),m={state:{media:l,settings:s,currentUser:o,customFonts:t,publisherLogos:u},actions:{fontsApi:a,mediaApi:i,settingsApi:c,usersApi:r,pagesApi:d,publisherLogosApi:p}};return n.createElement(Hi.Provider,{value:m},e)};var id=a(10562);function sd(){return sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},sd.apply(null,arguments)}const cd=(0,m.default)(ro.Headline).withConfig({displayName:"banner__Title",componentId:"sc-z6zfp9-0"})(["grid-area:title;padding-left:8px;"]),dd=m.default.div.withConfig({displayName:"banner__Content",componentId:"sc-z6zfp9-1"})(["grid-area:content;margin-bottom:4px;max-width:600px;min-width:50%;"]),ud=(0,m.default)(Bt.Button).withConfig({displayName:"banner__CloseButton",componentId:"sc-z6zfp9-2"})(["grid-area:closeButton;justify-self:end;align-self:flex-start;"]),pd=m.default.div.withConfig({displayName:"banner__CloseButtonPlaceholder",componentId:"sc-z6zfp9-3"})(["grid-area:closeButton;justify-self:end;align-self:flex-start;width:32px;height:32px;"]),md=m.default.div.withConfig({displayName:"banner__Container",componentId:"sc-z6zfp9-4"})(["display:grid;width:100%;min-height:60px;align-items:baseline;padding:6px 8px;background-color:",";border-radius:",";max-height:184px;grid-template-columns:1fr 32px;grid-template-rows:3;grid-column-gap:0;grid-template-areas:'. closeButton' 'title title' 'content content';text-align:center;& + &{margin-top:18px;}","{padding-left:0;margin-top:-10px;}","{margin:8px auto 18px;max-width:600px;}"],(({theme:e})=>e.colors.gray[5]),(({theme:e})=>e.borders.radius.medium),cd,dd),fd=(0,b.forwardRef)((({children:e,closeButtonLabel:t,title:a,onClose:o,...r},l)=>n.createElement(md,sd({ref:l},r),n.createElement(cd,{as:"h2",size:Ya.TextSize.XSmall},a),o?n.createElement(ud,{type:Mt.ButtonType.Tertiary,variant:Mt.ButtonVariant.Square,size:Mt.ButtonSize.Small,"aria-label":t,onClick:o},n.createElement(id.default,{"aria-hidden":!0})):n.createElement(pd,null),n.createElement(dd,null,e))));function gd(){return gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},gd.apply(null,arguments)}const bd=m.default.label.attrs({htmlFor:"telemetry-banner-opt-in"}).withConfig({displayName:"telemetryBanner__Label",componentId:"sc-inh4j2-0"})(["display:flex;cursor:pointer;"]),hd=(0,m.default)(Sa.Text.Span).withConfig({displayName:"telemetryBanner__LabelText",componentId:"sc-inh4j2-1"})(["margin-bottom:16px;margin-left:8px;color:",";"],(({theme:e})=>e.colors.fg.secondary)),_d=(0,m.default)(Sa.Text.Span).withConfig({displayName:"telemetryBanner__VisitSettingsText",componentId:"sc-inh4j2-2"})(["color:",";"],(({theme:e})=>e.colors.fg.tertiary)),yd=(0,m.default)(ea.Link).withConfig({displayName:"telemetryBanner__NavLink",componentId:"sc-inh4j2-3"})(["display:inline-block;margin:0;"]),Ed=(0,b.forwardRef)((({visible:e=!0,disabled:t=!1,onChange:a=(()=>{}),onClose:o=(()=>{}),checked:l=!1},i)=>{const s=(0,b.useRef)(),c=(0,b.useRef)(!1),d=l?(0,r.__)("Your selection has been updated. Thank you for helping to improve the editor!","web-stories"):(0,r.__)("Help improve the editor!","web-stories");return(0,b.useEffect)((()=>{c.current&&s.current.focus()})),e?n.createElement(fd,{closeButtonLabel:(0,r.__)("Dismiss telemetry banner","web-stories"),onClose:o,title:d,ref:i},n.createElement(bd,null,n.createElement(Hs.default,{id:"telemetry-banner-opt-in",checked:l,disabled:t,onChange:()=>{a(),c.current=!0},onBlur:()=>{c.current=!1},ref:s}),n.createElement(hd,{"aria-checked":l,size:Ya.TextSize.Small},n.createElement(un.default,{mapping:{a:n.createElement(yd,{size:Ya.TextSize.Small,href:(0,r.__)("https://policies.google.com/privacy","web-stories"),rel:"noreferrer",target:"_blank","aria-label":(0,r.__)("Learn more by visiting Google Privacy Policy","web-stories")})}},(0,r.__)("Check the box to help us improve the Web Stories plugin by allowing tracking of product usage stats. All data are treated in accordance with <a>Google Privacy Policy</a>.","web-stories")))),n.createElement(_d,{size:Ya.TextSize.XSmall},n.createElement(un.default,{mapping:{a:n.createElement(yd,{size:Ya.TextSize.XSmall,href:to(ki),"aria-label":(0,r.__)("Settings","web-stories")})}},(0,r.__)("You can update your selection later by visiting <a>Settings</a>.","web-stories")))):null}));function TelemetryBannerContainer(e){const{bannerVisible:t,closeBanner:a,optedIn:o,disabled:r,toggleWebStoriesTrackingOptIn:l}=$i(),i=(0,b.useRef)(),s=(0,b.useRef)(t);return(0,b.useLayoutEffect)((()=>{t&&!1===s.current&&i.current?s.current=!0:!t&&s.current&&(s.current=!1)}),[t]),n.createElement(Ed,gd({ref:i,visible:t,checked:o,disabled:r,onChange:l,onClose:a},e))}function TelemetryBanner(){const{currentPath:e,hasAvailableRoutes:t}=eo((({state:e})=>({currentPath:e.currentPath,hasAvailableRoutes:e.availableRoutes.length>0}))),a=(0,b.useRef)(null),[,o]=(0,b.useState)(!1);return(0,b.useEffect)((()=>{t&&[Ye.DASHBOARD,Ye.TEMPLATES_GALLERY].includes(e)&&(a.current=document.getElementById("body-view-options-header"),o((e=>!e)))}),[e,t]),a.current?(0,b.createPortal)(n.createElement(TelemetryBannerContainer,null),a.current):null}Ed.displayName="TelemetryOptInBanner";const Sd=(0,m.default)(fd).withConfig({displayName:"updateBanner__StyledBanner",componentId:"sc-1lpd8jt-0"})(["background:",";"],(({theme:e})=>e.colors.interactiveBg.brandNormal)),wd=(0,m.default)(ea.Link).withConfig({displayName:"updateBanner__StyledLink",componentId:"sc-1lpd8jt-1"})(["color:",";text-decoration:underline;&:hover{color:",";}&:focus{color:",";}"],(({theme:e})=>e.colors.interactiveFg.brandNormal),(({theme:e})=>e.colors.interactiveFg.brandHover),(({theme:e})=>e.colors.interactiveFg.brandPress));function NoLink({children:e}){return e}const vd="web_stories_update_banner_closed";function UpdateBannerContainer(){const{bannerVisible:e}=$i(),{plugins:{"web-stories":t={}}}=y(),{needsUpdate:a,updateLink:o}=t,l=(0,b.useRef)(),[i,s]=(0,b.useState)(!1);(0,b.useEffect)((()=>{s(function(){const e=Vi.getItemByKey(vd);return!e||(new Date).getTime()>e&&(Vi.setItemByKey(vd,null),!0)}()&&a)}),[a]);const c=(0,b.useCallback)((()=>{const e=(new Date).getTime()+1728e5;Vi.setItemByKey(vd,e),s(!1)}),[]);if(!i)return null;if(e)return null;const d=o?wd:NoLink;return n.createElement(Sd,{closeButtonLabel:(0,r.__)("Dismiss update notification","web-stories"),onClose:c,title:(0,r.__)("Update available.","web-stories"),ref:l},n.createElement(Sa.Text.Paragraph,null,n.createElement(un.default,{mapping:{a:n.createElement(d,{href:o})}},(0,r.__)("A new version of the plugin is available. <a>Please update now</a>.","web-stories"))))}function UpdateBanner(){const{currentPath:e,hasAvailableRoutes:t}=eo((({state:e})=>({currentPath:e.currentPath,hasAvailableRoutes:e.availableRoutes.length>0}))),a=(0,b.useRef)(null),[,o]=(0,b.useState)(!1);return(0,b.useEffect)((()=>{t&&[Ye.DASHBOARD,Ye.TEMPLATES_GALLERY,ki].includes(e)&&(a.current=document.getElementById("body-view-options-header"),o((e=>!e)))}),[e,t]),a.current?(0,b.createPortal)(n.createElement(UpdateBannerContainer,null),a.current):null}const Td=(0,m.default)(fd).withConfig({displayName:"ga4Banner__StyledBanner",componentId:"sc-jq5r9t-0"})(["background:",";"],(({theme:e})=>e.colors.interactiveBg.brandNormal)),Cd=(0,m.default)(ea.Link).withConfig({displayName:"ga4Banner__StyledLink",componentId:"sc-jq5r9t-1"})(["color:",";text-decoration:underline;&:hover{color:",";}&:focus{color:",";}"],(({theme:e})=>e.colors.interactiveFg.brandNormal),(({theme:e})=>e.colors.interactiveFg.brandHover),(({theme:e})=>e.colors.interactiveFg.brandPress));function GoogleAnalytics4BannerContainer(){const{plugins:{siteKit:e={}}}=y(),t=ji((({state:{settings:{googleAnalyticsId:e}}})=>e?.toLowerCase().startsWith("ua-"))),{currentPath:a}=eo((({state:{currentPath:e}})=>({currentPath:e}))),o=(0,b.useRef)();return e.analyticsActive?null:t?a===ki?null:n.createElement(Td,{title:(0,r.__)("Update your Google Analytics configuration.","web-stories"),ref:o},n.createElement(Sa.Text.Paragraph,null,n.createElement(un.default,{mapping:{a:n.createElement(ea.Link,{href:(0,r.__)("https://support.google.com/analytics/answer/11583528?hl=en","web-stories"),rel:"noreferrer",target:"_blank",onClick:e=>(0,E.trackClick)(e,"click_ua_deprecation_docs")}),a2:n.createElement(ea.Link,{href:(0,r.__)("https://support.google.com/analytics/answer/10089681?hl=en","web-stories"),rel:"noreferrer",target:"_blank",onClick:e=>(0,E.trackClick)(e,"click_ga4_docs")})}},(0,r.__)("As <a>previously announced</a>, Universal Analytics will stop processing new visits starting <b>July 1, 2023</b>. We recommend switching to <a2>Google Analytics 4</a2> (GA4), our analytics product of record.","web-stories"))),n.createElement(Sa.Text.Paragraph,null,n.createElement(un.default,{mapping:{a:n.createElement(Cd,{href:to(ki)})}},(0,r.__)("<a>Update your settings now</a>.","web-stories")))):null}function GoogleAnalytics4Banner(){const{currentPath:e,hasAvailableRoutes:t}=eo((({state:e})=>({currentPath:e.currentPath,hasAvailableRoutes:e.availableRoutes.length>0}))),a=(0,b.useRef)(null),[,o]=(0,b.useState)(!1);return(0,b.useEffect)((()=>{t&&[Ye.DASHBOARD,Ye.TEMPLATES_GALLERY,ki].includes(e)&&(a.current=document.getElementById("body-view-options-header"),o((e=>!e)))}),[e,t]),a.current?(0,b.createPortal)(n.createElement(GoogleAnalytics4BannerContainer,null),a.current):null}const Id=function(){return Gi(),n.createElement(ld,null,n.createElement(ai,{additionalRoutes:[{path:ki,component:n.createElement(Gc,null)}]}),n.createElement(TelemetryBanner,null),n.createElement(UpdateBanner,null),n.createElement(GoogleAnalytics4Banner,null))};window.webStories=window.webStories||{},window.webStories.initializeStoryDashboard=(e,t)=>{const a=document.getElementById(e);(0,oi.setAppElement)(a),(0,ft.updateSettings)(t.locale),(0,E.initializeTracking)("Dashboard",!1);const l={...t,apiCallbacks:(0,ri.default)(o,t),leftRailSecondaryNavigation:Li,documentTitleSuffix:(0,r.__)("Web Stories − WordPress","web-stories"),styleConstants:{topOffset:32,leftOffset:36},containerId:"wpbody"};(0,b.render)(n.createElement(b.StrictMode,null,n.createElement(dn,{config:l},n.createElement(zi,null),n.createElement(Id,null))),a)}}},n={};function __webpack_require__(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}};return o[e].call(a.exports,a,a.exports,__webpack_require__),a.exports}__webpack_require__.m=o,e=[],__webpack_require__.O=(t,a,o,n)=>{if(!a){var r=1/0;for(c=0;c<e.length;c++){for(var[a,o,n]=e[c],l=!0,i=0;i<a.length;i++)(!1&n||r>=n)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](a[i])))?a.splice(i--,1):(l=!1,n<r&&(r=n));if(l){e.splice(c--,1);var s=o();void 0!==s&&(t=s)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,o,n]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,a)=>(__webpack_require__.f[a](e,t),t)),[])),__webpack_require__.u=e=>5380===e?"5380.js":({5:"chunk-web-stories-template-0",17:"chunk-web-stories-template-19-metaData",78:"chunk-web-stories-template-58-metaData",177:"chunk-web-stories-template-20-metaData",276:"chunk-web-stories-template-7-metaData",288:"chunk-web-stories-template-3-metaData",345:"chunk-web-stories-template-59",421:"chunk-web-stories-template-46",656:"chunk-web-stories-template-34-metaData",850:"chunk-web-stories-template-18-metaData",948:"chunk-web-stories-template-30-metaData",954:"chunk-web-stories-template-30",993:"chunk-web-stories-template-4",1045:"chunk-web-stories-template-51-metaData",1186:"chunk-web-stories-template-36-metaData",1187:"chunk-web-stories-template-26",1198:"chunk-web-stories-template-23",1369:"chunk-web-stories-template-11-metaData",1381:"chunk-web-stories-template-42-metaData",1409:"chunk-web-stories-template-42",1507:"chunk-web-stories-template-26-metaData",1550:"chunk-web-stories-template-34",1785:"chunk-web-stories-template-60",1788:"chunk-web-stories-template-49-metaData",1839:"chunk-web-stories-template-22-metaData",1861:"chunk-web-stories-template-19",1931:"chunk-web-stories-template-39",1981:"chunk-web-stories-template-8",1990:"chunk-web-stories-template-25-metaData",2018:"chunk-web-stories-template-1-metaData",2177:"chunk-web-stories-template-51",2186:"chunk-web-stories-template-27",2253:"chunk-web-stories-template-11",2365:"chunk-web-stories-template-60-metaData",2386:"chunk-web-stories-template-49",2452:"chunk-web-stories-template-27-metaData",2492:"chunk-web-stories-template-38-metaData",2570:"chunk-web-stories-template-9-metaData",2773:"chunk-web-stories-template-55",2814:"chunk-web-stories-template-3",2838:"chunk-web-stories-template-12",2922:"chunk-web-stories-template-52",3155:"chunk-web-stories-template-40-metaData",3173:"chunk-web-stories-template-4-metaData",3214:"chunk-web-stories-template-14-metaData",3219:"chunk-web-stories-template-40",3230:"chunk-web-stories-template-45",3553:"chunk-web-stories-template-0-metaData",3632:"chunk-web-stories-template-45-metaData",3647:"chunk-web-stories-template-2-metaData",3779:"chunk-web-stories-template-31-metaData",3802:"chunk-web-stories-template-7",3826:"chunk-web-stories-template-16",3991:"chunk-web-stories-template-13-metaData",3996:"chunk-web-stories-template-21",4007:"chunk-web-stories-template-22",4191:"chunk-web-stories-template-57-metaData",4218:"chunk-web-stories-template-41",4336:"chunk-web-stories-template-56-metaData",4342:"chunk-web-stories-template-50-metaData",4359:"chunk-web-stories-template-35",4387:"chunk-web-stories-template-6",4743:"chunk-web-stories-template-57",4890:"chunk-web-stories-template-29-metaData",4962:"chunk-web-stories-template-47-metaData",4984:"chunk-web-stories-template-25",5045:"chunk-web-stories-template-24-metaData",5110:"chunk-web-stories-template-43-metaData",5133:"chunk-web-stories-template-28",5187:"chunk-web-stories-template-31",5195:"chunk-web-stories-template-48",5336:"chunk-web-stories-template-32",5439:"chunk-web-stories-template-35-metaData",5571:"chunk-web-stories-template-53",5582:"chunk-web-stories-template-56",5647:"chunk-web-stories-template-13",5812:"chunk-web-stories-template-41-metaData",5972:"chunk-web-stories-template-29",6039:"chunk-web-stories-template-44",6152:"chunk-web-stories-template-12-metaData",6177:"chunk-web-stories-template-55-metaData",6393:"chunk-web-stories-templates",6457:"chunk-web-stories-template-28-metaData",6624:"chunk-web-stories-template-14",6635:"chunk-web-stories-template-17",7016:"chunk-web-stories-template-43",7069:"chunk-web-stories-template-59-metaData",7157:"chunk-web-stories-template-37",7196:"chunk-web-stories-template-1",7207:"chunk-web-stories-template-2",7414:"chunk-web-stories-template-32-metaData",7507:"chunk-web-stories-template-53-metaData",7536:"chunk-web-stories-template-58",7554:"chunk-web-stories-template-21-metaData",7588:"chunk-web-stories-template-9",7590:"chunk-web-stories-template-5-metaData",7612:"chunk-web-stories-template-47",7793:"chunk-web-stories-template-24",7905:"chunk-web-stories-template-37-metaData",7931:"chunk-web-stories-template-39-metaData",7939:"chunk-web-stories-template-6-metaData",7996:"chunk-web-stories-template-36",8145:"chunk-web-stories-template-33",8184:"chunk-web-stories-template-5",8252:"chunk-web-stories-template-16-metaData",8267:"chunk-web-stories-template-17-metaData",8336:"chunk-web-stories-template-23-metaData",8380:"chunk-web-stories-template-54",8389:"chunk-web-stories-template-20",8452:"chunk-web-stories-template-52-metaData",8545:"chunk-web-stories-template-46-metaData",8635:"chunk-opentype",9017:"chunk-web-stories-template-8-metaData",9052:"chunk-web-stories-template-18",9122:"chunk-web-stories-template-38",9167:"chunk-web-stories-template-44-metaData",9368:"chunk-web-stories-template-50",9433:"chunk-web-stories-template-15",9444:"chunk-web-stories-template-10",9557:"chunk-web-stories-template-33-metaData",9725:"chunk-web-stories-template-15-metaData",9755:"chunk-web-stories-template-48-metaData",9866:"chunk-web-stories-template-10-metaData",9906:"chunk-web-stories-template-54-metaData"}[e]||e)+".js?v="+{5:"bbc93859cf0049f562e9",17:"33afbacc1d63e13b3ceb",78:"71bad78e653f93cb9edc",177:"ccfa9a3ccf5ec36ad699",276:"2523f1a225b7035b8ec3",288:"4df3c7f5620bcf46d299",345:"f2dc077ba6b1fb5bc1f9",421:"8c29a1ed3b5b06618ffe",656:"0ccb6ff73b8e7801ca2d",850:"67c5d939e8e7ec546f9e",945:"a2f6e57c7deccb823888",948:"049ceb5b1e86187e4f99",954:"2cdb2de97e995e713376",993:"47142ef3c8d27dd9fb85",1045:"d3c563e52b3e598ee511",1186:"72fe9b70c1620946772f",1187:"6f54e7ec1b6e0b379e65",1198:"bf16153a104fbf03307f",1369:"db4e27a8ee8bd89eb248",1381:"170b4be2c0691e851ac4",1409:"03bcb362353f4ed3b9af",1507:"f0bb4f3c8b4b7c3ae310",1550:"9fd266cf46cd6d43a1eb",1785:"40e67e4a72d1968a155f",1788:"69cbe7e5cfa288920151",1839:"eb61a8c628e0fa74f74a",1861:"780c7e8e31e891babad6",1931:"aa26c36018ace44e6bf8",1981:"8f802db432e30bc8941e",1990:"40389c5e2dc7bb843f2f",2018:"d75fc98e5ec5bfa92018",2177:"449586010c79a12d9e08",2186:"50fb7a58cf7c13645e40",2253:"6f92bc96961d30da3286",2365:"409aadecc2214956e820",2386:"03c1c9df742427429a21",2452:"16c05c5e8459746357e4",2492:"b7a5dbd5ccb757f0d8a7",2570:"c0e472c8a6921d9566b2",2773:"e6b2a13f84608696a39f",2814:"49248208ccd5fcde3647",2838:"ece497f99e3743e6a457",2922:"3384f569c040745b4b2b",3155:"90fc1b376d1a44caba3c",3173:"f1cf6a6f583a5f1e8f96",3214:"fd65b34b50c659db8e6d",3219:"968b4517bb7750580026",3230:"31b55ca7e7e303295f56",3553:"a2327b54ab56a591fe4d",3632:"1c39b06e889b82a56e6f",3647:"efa3504e52c9ab85a8cd",3779:"0de10744b32f2a4bec01",3802:"f010cdc3a64503e1fa4f",3826:"a51e14b25f06be78cc7d",3991:"5a5112e5a2502aa81283",3996:"c93ce41a099479559d91",4007:"fbf46ef1bbbe95299b39",4191:"f9b1c857a720e4265add",4218:"804251f5a64e03e08642",4336:"21c92a4d0ff6d4aef2f8",4342:"c6810d99c69a4ffd15ed",4359:"c3edfde419938c9e0903",4387:"2dcb8bbdf4d69bed0458",4743:"c19f35951e8f67f098a8",4890:"ffd794fe7607990a87e2",4962:"908ee8aabbad36ad8c4a",4984:"d96d6f46f018935d55fd",5045:"986f35a5f198a888897a",5110:"7f83b79b5ac18c278132",5133:"89d0f77687fb591b3d47",5187:"d044cbf251d11c91648b",5195:"c2f09193de56472385ae",5336:"07905daab958e124a9d2",5439:"5cc23aa574c4f4c4c225",5571:"415ee8e6476178c2ce71",5582:"c5925ed7d01190cc4fd9",5647:"c5720caed1fd40837dca",5812:"1351083f82279a7a9857",5972:"2757229388fe50d7bdb3",6039:"5b418529a4436a780e16",6152:"f03789533a58d12ae6c6",6177:"2d36f883fe38c408265c",6393:"64cf75bd9ba763754c22",6457:"a426f0fed20e539a90cd",6624:"b5c2dd13654427e002f1",6635:"ea7076bd46d129d9f31c",7016:"24dd8b249499428ac096",7069:"17bb1ae6818f3bfa6dbc",7157:"a1ba8ea376e6cf489f92",7196:"c396e0898ff58f46ac13",7207:"16b89430a1bcd3f7dc36",7414:"65df5221fcd9709a25bd",7507:"094902e08ebb99b3a0c3",7536:"985479b826d4c60527db",7554:"e4450ef016a70ca29af7",7588:"aa1461d675ec5b99b687",7590:"48f74f33df5f42897d6a",7612:"aa948621f70ddef2613b",7793:"d95636016321772c18e6",7905:"fecae872238f77221d5a",7931:"ffb099db82bc7d5869bc",7939:"85c894243abaca43cf2d",7996:"1bc719847493aaae609c",8145:"e94d0cff2c3dbc45347f",8184:"36a3e6fcb3b00ae31ee1",8252:"934db87ec6c9fd24d4cd",8267:"c76da493efc03b66bd53",8336:"1b125795631b6f505dc3",8380:"182fe7702050c92e3038",8389:"ce3fc7abbbce16a1ade0",8452:"8d22820ab313df9e9b0d",8545:"7e40adc547654a0e8e72",8635:"84bc3ffbc08450f0043f",9017:"38e3c663e11ba8f8084a",9052:"1ca6b6c434490c47a385",9122:"6715186237ce20df3ed2",9167:"acef6df31f2b7f45b981",9368:"0317308a0fa760b5cef8",9433:"71a5845cfc51152d626c",9444:"2317b4f27878b28653db",9557:"8530cf5a4981ffd1683c",9725:"1d918fba22eaf9cfcc66",9755:"5c8f5ca214b212bbb274",9866:"42d019d10e622c1c4da1",9906:"001b220764b815b9646a"}[e],__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},a="web-stories-wp:",__webpack_require__.l=(e,o,n,r)=>{if(t[e])t[e].push(o);else{var l,i;if(void 0!==n)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var d=s[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==a+n){l=d;break}}l||(i=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,__webpack_require__.nc&&l.setAttribute("nonce",__webpack_require__.nc),l.setAttribute("data-webpack",a+n),l.src=e),t[e]=[o];var u=(a,o)=>{l.onerror=l.onload=null,clearTimeout(p);var n=t[e];if(delete t[e],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach((e=>e(o))),a)return a(o)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=u.bind(null,l.onerror),l.onload=u.bind(null,l.onload),i&&document.head.appendChild(l)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="",(()=>{var e={6412:0};__webpack_require__.f.j=(t,a)=>{var o=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var n=new Promise(((a,n)=>o=e[t]=[a,n]));a.push(o[2]=n);var r=__webpack_require__.p+__webpack_require__.u(t),l=new Error;__webpack_require__.l(r,(a=>{if(__webpack_require__.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var n=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",l.name="ChunkLoadError",l.type=n,l.request=r,o[1](l)}}),"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,a)=>{var o,n,[r,l,i]=a,s=0;if(r.some((t=>0!==e[t]))){for(o in l)__webpack_require__.o(l,o)&&(__webpack_require__.m[o]=l[o]);if(i)var c=i(__webpack_require__)}for(t&&t(a);s<r.length;s++)n=r[s],__webpack_require__.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return __webpack_require__.O(c)},a=globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),__webpack_require__.nc=void 0;var r=__webpack_require__.O(void 0,[4821,3768,7830],(()=>__webpack_require__(58745)));r=__webpack_require__.O(r)})();