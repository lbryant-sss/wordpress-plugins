import{j as e,c as mt,r as X,a as Pt,g as ye,R as $t,T as Lt,W as te,b as xe,S as ee,E as re,d as ke,C as Se,e as je,n as dt,M as ne,f as Gt,h as Ce,F as Kt,D as Zt,s as Ee,p as Ht,v as Te,i as Ft,k as se,l as Et,m as ie,u as Nt,t as ae,o as Ae,q as ze,w as Rt,U as Ie,x as Ne,P as oe,y as Re,z as Oe,A as le,B as Be,G as Le,H as Pe,I as Fe,J as St,K as ce,L as Tt,N as At,O as De,Q as Ot,V as Ue,X as We,Y as Ut,Z as Wt,_ as Me,$ as Ge,a0 as Ze,a1 as He,a2 as Ve,a3 as qe}from"./assets/index-BF-1tZFt.js";const $e=R=>e.jsxs("svg",{...R,viewBox:"0 0 134 131",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M120.619 0.704712H13.8714C6.502 0.704712 0.527954 6.64798 0.527954 13.9794V117.225C0.527954 124.557 6.502 130.5 13.8714 130.5H120.619C127.988 130.5 133.962 124.557 133.962 117.225V13.9794C133.962 6.64798 127.988 0.704712 120.619 0.704712Z",fill:"url(#wptb_logo_paint0_linear_7_1042)"}),e.jsx("path",{d:"M106.489 28.0007H28.0248C26.8471 28.0007 25.8923 28.9506 25.8923 30.1223V44.4636C25.8923 45.6354 26.8471 46.5852 28.0248 46.5852H106.489C107.667 46.5852 108.621 45.6354 108.621 44.4636V30.1223C108.621 28.9506 107.667 28.0007 106.489 28.0007Z",fill:"white"}),e.jsx("path",{d:"M59.7869 56.3042H28.0249C26.8471 56.3042 25.8923 57.254 25.8923 58.4257V72.7671C25.8923 73.9388 26.8471 74.8887 28.0249 74.8887H59.7869C60.9647 74.8887 61.9195 73.9388 61.9195 72.7671V58.4257C61.9195 57.254 60.9647 56.3042 59.7869 56.3042Z",fill:"white"}),e.jsx("path",{d:"M106.489 56.3042H74.7267C73.549 56.3042 72.5942 57.254 72.5942 58.4257V72.7671C72.5942 73.9388 73.549 74.8887 74.7267 74.8887H106.489C107.667 74.8887 108.621 73.9388 108.621 72.7671V58.4257C108.621 57.254 107.667 56.3042 106.489 56.3042Z",fill:"white"}),e.jsx("path",{d:"M59.7631 84.6194H28.001C26.8233 84.6194 25.8685 85.5693 25.8685 86.741V101.082C25.8685 102.254 26.8233 103.204 28.001 103.204H59.7631C60.9409 103.204 61.8957 102.254 61.8957 101.082V86.741C61.8957 85.5693 60.9409 84.6194 59.7631 84.6194Z",fill:"white"}),e.jsx("path",{d:"M106.465 84.6194H74.7029C73.5251 84.6194 72.5703 85.5693 72.5703 86.741V101.082C72.5703 102.254 73.5251 103.204 74.7029 103.204H106.465C107.643 103.204 108.598 102.254 108.598 101.082V86.741C108.598 85.5693 107.643 84.6194 106.465 84.6194Z",fill:"white"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"wptb_logo_paint0_linear_7_1042",x1:"124.538",y1:"-5.75483",x2:"45.6569",y2:"93.515",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#29ABE2"}),e.jsx("stop",{offset:"1",stopColor:"#0071BC"})]})})]}),Ke=wp.i18n,jt=R=>Ke.__(R,"wp-table-builder"),zt=({setPage:R,page:W})=>e.jsxs("div",{className:"wptb-v2-nav",children:[e.jsx("div",{className:"wptb-v2-logo",children:e.jsx($e,{})}),e.jsxs("div",{children:[e.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":W==="tables"}),onClick:()=>R("tables"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M20 4H4a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1M4 2a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h16a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3zm2 5h2v2H6zm5 0a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2zm-3 4H6v2h2zm2 1a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2h-6a1 1 0 0 1-1-1m-2 3H6v2h2zm2 1a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2h-6a1 1 0 0 1-1-1",clipRule:"evenodd"})}),e.jsx("span",{children:jt("Table List")})]}),e.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":W==="create"}),onClick:()=>R("create"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M18 14h2v3h3v2h-3v3h-2v-3h-3v-2h3zM4 3h14a2 2 0 0 1 2 2v7.08a6 6 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m0 4v4h6V7zm8 0v4h6V7zm-8 6v4h6v-4z"})}),e.jsx("span",{children:jt("Add New")})]}),e.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":W==="import"}),onClick:()=>R("import"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M4 3h14a2 2 0 0 1 2 2v7.08a6 6 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2m0 4v4h6V7zm8 0v4h6V7zm-8 6v4h6v-4zm14.44 2v2h4v2h-4v2l-3-3z"})}),e.jsx("span",{children:jt("Import")})]}),e.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":W==="export"}),onClick:()=>R("export"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M4 3h14a2 2 0 0 1 2 2v7.08a6 6 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2m0 4v4h6V7zm8 0v4h6V7zm-8 6v4h6v-4zm15.44 8v-2h-4v-2h4v-2l3 3z"})}),e.jsx("span",{children:jt("Export")})]}),WPTB_CFG.SETTINGS.is_authorized&&e.jsxs("button",{className:mt("wptb-v2-link-btn",{"wptb-active-nav":W==="settings"}),onClick:()=>R("settings"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97s-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1s.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64z"})}),e.jsx("span",{children:jt("Settings")})]})]})]}),Ye=({apiData:R,setPage:W})=>{const o=S=>{!R||S<1||S>R.total_pages||S===R.current_page||W(S)};return e.jsx("div",{className:"wptb-v2-pagination",children:e.jsxs("div",{className:"wptb-v2-pagination-group",children:[e.jsx("button",{type:"button",className:mt({"wptb-v2-pagination-disabled":R.current_page===1}),onClick:()=>o(R.current_page-1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"2",d:"m15 6l-6 6l6 6"})})}),R.pages.map(S=>S!==0?e.jsx("button",{type:"button",className:mt({"wptb-v2-pagination-active":S===R.current_page}),onClick:()=>o(S),children:S},S):e.jsx("p",{className:"wptb-page-divider",children:"..."})),e.jsx("button",{type:"button",className:mt({"wptb-v2-pagination-disabled":R.current_page===R.total_pages}),onClick:()=>o(R.current_page+1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"2",d:"m9 6l6 6l-6 6"})})})]})})},he=(R,W="asc")=>{const[o,S]=X.useState({by:R,order:W});return X.useMemo(()=>[o,u=>{let c="asc";o.by===u&&(c=o.order==="asc"?"desc":"asc"),S({by:u,order:c})}],[o])},Je={loading:!0,posts:[],current_page:1,page_start:"...",page_end:"...",total_count:"...",pages:[],total_pages:1},ue=({page:R,search:W,status:o,skipTables:S,sort:u,abortCtrl:c,refetchOnSkipChange:r})=>{const[n,a]=X.useState(Je),[l,_]=X.useState(!1),f=(h,b)=>{if(b){let i;["id","title","date","modified"].includes(u.by||"id")?i=u.by:i="id",i!=="id"?u.order==="asc"?h.sort((g,p)=>g[i].localeCompare(p[i])):h.sort((g,p)=>p[i].localeCompare(g[i])):u.order==="asc"?h.sort((g,p)=>g[i]-p[i]):h.sort((g,p)=>p[i]-g[i])}a({...n,posts:h})},k=r?S:"";return X.useEffect(()=>{const b=`/v1/tables?${new URLSearchParams({page:R.toString(),search:W||"",status:o||"",except:S||"",...u?{sort_by:u.by,sort_order:u.order}:{}}).toString()}`;a(i=>({...i,current_page:R,loading:!0})),Pt(b,{signal:c==null?void 0:c.signal}).then(i=>{const{posts:g,current_page:p,total_pages:x,total_count:j}=i,T=(p-1)*i.per_page+1,A=T+g.length-1;a({loading:!1,posts:g,current_page:p,page_start:T,page_end:A,pages:ye(x,2),total_pages:x,total_count:j})}).catch(()=>{a({...n,loading:!1}),WPTB.utils.notify("Something went wrong! Please reload the page!","error",0)})},[R,W,o,u.by,u.order,k,l]),[n,f,()=>_(!l)]},de={duplicate:{icon:te,title:"Sure to duplicate?",text:R=>`Table: <b>${R.targetTitle}</b> is set to be duplicated.<br/> Are you sure?`,className:"wptb-modal-warning",url:"duplicate"},trash:{icon:Lt,title:"Sure to trash?",text:R=>`Table: <b>${R.targetTitle}</b> is set to be trashed. <br />Are you sure?`,className:"wptb-modal-danger",url:"trash"},restore:{icon:$t,title:"Sure to restore?",text:R=>`Table: <b>${R.targetTitle}</b> is set to be trashed. <br />Are you sure?`,className:"wptb-modal-warning",url:"restore"},delete:{icon:Lt,title:"Sure to delete?",text:R=>`Table: <b>${R.targetTitle}</b> is set to be deleted. Are you sure?<br/> It will be deleted permanently.`,className:"wptb-modal-danger",url:"delete"},trash_bulk:{icon:Lt,title:"Sure to trash?",text:(R,W)=>`<b>${W}</b> table(s) are set to be trashed. <br />Are you sure?`,className:"wptb-modal-danger",url:"trash_bulk"},restore_bulk:{icon:$t,title:"Sure to restore?",text:(R,W)=>`<b>${W}</b> table(s) are set to be restored. <br />Are you sure?`,className:"wptb-modal-warning",url:"restore_bulk"}},Xe=async({action:R,id:W,ids:o})=>{const S=de[R].url;if(!S)return{action:R,id:W,ids:o,res:{}};try{const[u,c]=await xe("/v1/"+S,{id:W,ids:o,security_code:WPTB_CFG.SECURITY_CODE});if(!c.ok)throw new Error(u.message||`HTTP error! Status: ${c.status}`);return{action:R,id:W,ids:o,res:u}}catch(u){return{action:R,id:W,ids:o,res:{error:u.message}}}},Qe=({apiData:R,setPage:W,isTrash:o,setTables:S,sortBy:u,sortOrder:c,setSort:r,search:n,setSearch:a})=>{const l=X.useRef({}),_=X.useRef({}),[f,k]=X.useState(""),[h,b]=X.useState(0),[i,g]=X.useState(null);X.useEffect(()=>{l.current={},b(0)},[R]);const p=z=>{W("builder",{table:z})},x=()=>{h<R.posts.length?(R.posts.forEach(z=>{l.current[z.id]=!0}),b(R.posts.length)):(l.current={},b(0))},j=z=>{l.current[z]?(delete l.current[z],b(h-1)):(l.current[z]=!0,b(h+1))},T=async()=>{var v;if(!i)return;if(i.targetId){if(_.current[i.targetId])return;_.current[i.targetId]=!0}else for(const O in l.current){if(_.current[O])return;_.current[O]=l.current[O]}const z=Object.keys(l.current).map(Number);l.current={},b(0),g(null);const{action:w,id:m,ids:C,res:M}=await Xe({action:i.action,id:i.targetId,ids:z});if(C!=null&&C.length?C.forEach(O=>{delete _.current[O]}):delete _.current[m],M.error){dt(M.error,"error",0),S([...R.posts]);return}if(M.message&&dt(M.message,"success"),w==="trash"||w==="restore"||w==="delete")S([...R.posts.filter(O=>O.id!==m)]);else if(w==="trash_bulk"||w==="restore_bulk")S([...R.posts.filter(O=>!(C!=null&&C.includes(O.id)))]);else{const O=[...R.posts];(v=M.posts)==null||v.forEach(s=>{O.push(s)}),S(O,!0)}},A=i&&de[i.action];u=u||"id";const U=z=>{window.open(`${WPTB_CFG.HOME_URL}/?post_type=wptb-tables&p=${z}&_wpnonce=${WPTB_CFG.NONCE.table}`,"_blank")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"wptb-v2-table-upper-group",children:[e.jsxs("div",{className:"wptb-v2-bulk-actions",children:[e.jsxs("select",{value:f,onChange:z=>k(z.target.value),children:[e.jsx("option",{value:"",children:"Bulk Actions"}),o?e.jsx("option",{value:"restore_bulk",children:"Restore"}):e.jsx("option",{value:"trash_bulk",children:"Delete"})]}),e.jsx("button",{type:"button",onClick:()=>h>0&&g({action:f}),children:"Apply"}),e.jsxs("p",{children:[e.jsx("b",{children:h})," items selected"]})]}),e.jsx(ee,{placeholder:"Search table...",onChange:a,value:n})]}),e.jsx("div",{className:"wptb-v2-table-list-wrapper",children:e.jsxs("table",{className:mt({"wptb-v2-table-list":!R.loading,"wptb-v2-table-loading":R.loading}),children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"30px"}}),e.jsx("col",{}),e.jsx("col",{}),e.jsx("col",{}),e.jsx("col",{})]}),e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:h===R.posts.length,onChange:x})}),e.jsxs("th",{children:["Title",e.jsx("button",{type:"button",onClick:()=>r("title"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":u==="title"&&c==="asc","wptb-sort-btn-desc":u==="title"&&c!=="asc"})})]}),e.jsxs("th",{children:["Shortcode",e.jsx("button",{type:"button",onClick:()=>r("id"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":u==="id"&&c==="asc","wptb-sort-btn-desc":u==="id"&&c!=="asc"})})]}),e.jsxs("th",{children:["Created",e.jsx("button",{type:"button",onClick:()=>r("date"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":u==="date"&&c==="asc","wptb-sort-btn-desc":u==="date"&&c!=="asc"})})]}),e.jsxs("th",{children:["Last Modified",e.jsx("button",{type:"button",onClick:()=>r("modified"),className:mt("wptb-v2-table-sort-btn",{"wptb-sort-btn-asc":u==="modified"&&c==="asc","wptb-sort-btn-desc":u==="modified"&&c!=="asc"})})]})]})}),e.jsx("tbody",{children:R.loading?Array(10).fill(0).map((z,w)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{})}),e.jsx("td",{children:e.jsx("div",{})}),e.jsx("td",{children:e.jsx("div",{})}),e.jsx("td",{children:e.jsx("div",{})}),e.jsx("td",{children:e.jsx("div",{})})]},w)):R.posts.length?R.posts.map(z=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("input",{type:"checkbox",checked:!!l.current[z.id],onChange:()=>j(z.id)}),_.current[z.id]&&e.jsx("div",{className:"wptb-v2-table-pending",children:re})]}),e.jsxs("td",{children:[e.jsxs("p",{children:[z.is_template?e.jsx(ke,{}):"",z.title?e.jsx("span",{dangerouslySetInnerHTML:{__html:z.title}}):e.jsx("span",{className:"wptb-v2-table-title-empty",children:"[ Untitled ]"})]}),o?e.jsxs("div",{className:"wptb-v2-table-actions",children:[e.jsx("button",{className:"wptb-table-action-restore",type:"button",onClick:()=>g({action:"restore",targetId:z.id,targetTitle:z.title}),children:"Restore"}),e.jsx("button",{className:"wptb-table-action-trash",type:"button",onClick:()=>g({action:"delete",targetId:z.id,targetTitle:z.title}),children:"Delete"})]}):e.jsxs("div",{className:"wptb-v2-table-actions",children:[e.jsx("button",{className:"wptb-table-action-edit",type:"button",onClick:()=>p(z.id),children:"Edit"}),e.jsx("button",{className:"wptb-table-action-duplicate",type:"button",onClick:()=>g({action:"duplicate",targetId:z.id,targetTitle:z.title}),children:"Duplicate"}),e.jsx("button",{type:"button",className:"wptb-table-action-preview",onClick:()=>U(z.id),children:"Preview"}),e.jsx("button",{className:"wptb-table-action-trash",type:"button",onClick:()=>g({action:"trash",targetId:z.id,targetTitle:z.title}),children:"Trash"})]})]}),e.jsx("td",{children:e.jsxs("div",{className:"wptb-v2-shortcode-col",children:["[wptb id=",z.id,"]",e.jsx("button",{type:"button",className:"wptb-v2-copy-btn",onClick:()=>{je(`[wptb id=${z.id}]`),dt("Copied to clipboard!","success")},children:Se})]})}),e.jsx("td",{children:z.date}),e.jsx("td",{children:z.modified})]},z.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:e.jsx("p",{children:"No results found"})})})})]})}),A&&e.jsxs(ne,{onClose:()=>g(null),title:A.title,icon:A.icon,className:A.className,children:[e.jsx("p",{dangerouslySetInnerHTML:{__html:A.text(i,h)}}),e.jsxs("div",{className:"wptb-v2-modal-actions",children:[e.jsx("button",{type:"button",onClick:T,children:"Yes"}),e.jsx("button",{type:"button",onClick:()=>g(null),children:"No"})]})]})]})},tr=({setPage:R,page_num:W,search:o,status:S,sort_by:u,sort_order:c})=>{const r=X.useRef(),n=X.useRef(),[a,l]=X.useState(o),[_,f]=ue({page:W?parseInt(W):1,search:o,status:S,sort:{by:u||"id",order:c||"desc"},abortCtrl:r.current});X.useEffect(()=>{const b=a==null?void 0:a.trim();if(o){if(b&&b.length>0&&b.length<2)return}else if(!b||b.length<2)return;n.current&&clearTimeout(n.current),r.current&&r.current.abort(),r.current=new AbortController,n.current=setTimeout(()=>{R("tables",{search:a,status:S}),r.current=void 0,n.current=void 0},500)},[a]);const k=b=>{R("tables",{page_num:1,search:o,status:S,sort_by:b,sort_order:b===(u||"id")&&c==="asc"?"desc":"asc"})},h=S==="trash";return e.jsxs("div",{className:"wptb-v2-page",children:[e.jsx(zt,{setPage:R,page:"tables"}),e.jsxs("div",{className:"wptb-v2-page-content",children:[e.jsxs("div",{className:"wptb-v2-page-content-top",children:[e.jsx("h2",{children:"Table List"}),e.jsxs("div",{className:"wptb-v2-table-status-btns",children:[e.jsx("button",{type:"button",className:mt({"wptb-v2-active-section":!h}),onClick:()=>{R("tables",{})},children:"ALL"}),e.jsx("button",{type:"button",className:mt({"wptb-v2-active-section":h}),onClick:()=>{R("tables",{status:"trash"})},children:"TRASH"})]})]}),e.jsxs("div",{className:"wptb-v2-table-list-area",children:[e.jsxs("p",{className:"wptb-v2-pagination-info",children:["Showing ",e.jsx("b",{children:_.page_start})," to ",e.jsx("b",{children:_.page_end})," of"," ",e.jsx("b",{children:_.total_count})," entries"]}),e.jsx(Qe,{apiData:_,setPage:R,isTrash:h,setTables:f,setSort:k,sortBy:u,sortOrder:c,search:a,setSearch:l}),e.jsx(Ye,{apiData:_,setPage:b=>R("tables",{page_num:b,search:o,sort_by:u,sort_order:c})})]})]})]})},er=({setPage:R})=>{const[W,o]=X.useState(4),[S,u]=X.useState(4),c=()=>{const r=Ce(W,S);R("builder",{table:r})};return e.jsxs("div",{className:"wptb-v2-create-table",children:[e.jsx("table",{children:e.jsx("tbody",{children:W<50&&S<50?Array(W).fill(0).map((r,n)=>e.jsx("tr",{children:Array(S).fill(0).map((a,l)=>e.jsx("td",{},l))},n)):e.jsx("tr",{children:e.jsx("td",{})})})}),e.jsxs("div",{className:"wptb-v2-create-table-form",children:[e.jsx("div",{className:"wptb-v2-create-table-form-input",children:e.jsx(Gt,{label:"Number of rows",min:2,max:20,value:W,onChange:o,allowOutOfRange:!0})}),e.jsx("div",{className:"wptb-v2-create-table-form-input",children:e.jsx(Gt,{label:"Number of columns",min:2,max:20,value:S,onChange:u,allowOutOfRange:!0})}),e.jsx("button",{type:"button",className:"wptb-v2-create-btn",onClick:c,children:"Create New"})]})]})},rr=({content:R})=>{const W=X.useRef(null);return X.useLayoutEffect(()=>{if(!W.current)return;const o=W.current,S=o.querySelector("table"),{width:u,height:c}=o.getBoundingClientRect(),r=S.dataset.wptbTableContainerMaxWidth;S.style.width="auto",S.style.minWidth=r?`${r}px`:"700px",S.style.transform="";const n=20,{width:a,height:l}=S.getBoundingClientRect(),_=u/(a+n),f=c/(l+n);S.style.transform=`scale(${Math.min(_,f)})`},[]),e.jsx("div",{ref:W,className:"wptb-v2-table-template-html",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:R}})})},yt=[],nr=({setPage:R,search:W})=>{const[o,S]=X.useState(yt),[u,c]=X.useState(!0),[r,n]=X.useState(),a=X.useRef(null);X.useEffect(()=>{if(yt.length){c(!1),S(yt),a.current=new Kt(yt,{includeScore:!0,threshold:.3,keys:["title"]});return}let f=new AbortController;return Pt("/v1/patterns",{signal:f.signal}).then(k=>{if(c(!1),!yt.length){if(k.error)throw new Error(k.error);S(k.patterns),yt.push(...k.patterns),a.current=new Kt(yt,{includeScore:!0,threshold:.3,keys:["title"]})}}).catch(()=>{}).finally(()=>{f=void 0}),()=>f==null?void 0:f.abort()},[]);const l=X.useCallback(f=>{var k;if(f==="")S(yt);else{const h=(k=a.current)==null?void 0:k.search(f),b=h==null?void 0:h.map(i=>i.item);S(b||[])}},[]);X.useEffect(()=>{const f=W==null?void 0:W.trim();if(!f||f.length<2){S(yt);return}l(f)},[W,l]);const _=async f=>{if(f.is_upsell){Ee("patterns");return}if(r){dt("A request is already in progress","error");return}n(f.name);const k=(g,p)=>{const x=Ht(g);x.title="Clone of: "+p;const j=Te();x.id=void 0,x.tags=[],Ft.dispatch(se({id:j,table:x})),R("builder",{table:j})};if(f.content){k(f.content,f.title);return}const h=`/v1/patterns?name=${f.name}`,b=await Pt(h);if(b.error||!b.pattern){dt(b.error||"Something went wrong","error"),n(void 0);return}const i=b.pattern;k(i.content,i.title)};return e.jsx("div",{className:"wptb-v2-table-templates",children:u?Array.from({length:9},(f,k)=>e.jsxs("div",{className:"wptb-v2-table-template",children:[e.jsx("div",{className:"wptb-v2-table-template-preview",children:e.jsx("div",{className:"wptb-v2-table-template-preview-loading"})}),e.jsx("div",{className:"wptb-v2-table-template-title",children:e.jsx("div",{className:"wptb-v2-table-template-title-loading"})})]},k)):o.map(f=>e.jsxs("button",{className:mt("wptb-v2-table-template",{"wptb-v2-table-template-upsell":f.is_upsell}),onClick:()=>_(f),children:[f.content?e.jsx(rr,{content:f.content}):e.jsxs("div",{className:"wptb-v2-table-template-preview",children:[e.jsx("img",{src:WPTB_CFG.PLUGIN_URL+"/v2/assets/patterns/images/"+f.name+".png",alt:f.name}),r===f.name&&e.jsx("div",{className:"wptb-v2-table-template-preview-creating",children:e.jsx(Zt,{})})]}),e.jsx("div",{className:"wptb-v2-table-template-title",children:f.title})]},f.name))})},sr=({setPage:R,search:W})=>{const[o,S]=X.useState(W||""),u=X.useRef();return X.useEffect(()=>{const c=o==null?void 0:o.trim();if(W){if(c&&c.length>0&&c.length<2)return}else if(!c||c.length<2)return;u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{R("create",{search:o}),u.current=void 0},500)},[o]),e.jsxs("div",{className:"wptb-v2-page wptb-v2-create-page",children:[e.jsx(zt,{setPage:R,page:"create"}),e.jsxs("div",{className:"wptb-v2-page-content",children:[e.jsxs("div",{className:"wptb-v2-page-content-top",children:[e.jsx("h2",{children:jt("New Table")}),e.jsx(ee,{value:o,onChange:S,placeholder:"Search templates..."})]}),e.jsxs("div",{className:"wptb-v2-page-content-main",children:[e.jsx(er,{setPage:R}),e.jsx("div",{className:"wptb-v2-divider",children:"or"}),e.jsx("h2",{children:"Choose from templates"}),e.jsx(nr,{setPage:R,search:W})]})]})]})};function Bt(R){throw new Error('Could not dynamically require "'+R+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fe={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(R,W){(function(o){R.exports=o()})(function(){return function o(S,u,c){function r(l,_){if(!u[l]){if(!S[l]){var f=typeof Bt=="function"&&Bt;if(!_&&f)return f(l,!0);if(n)return n(l,!0);var k=new Error("Cannot find module '"+l+"'");throw k.code="MODULE_NOT_FOUND",k}var h=u[l]={exports:{}};S[l][0].call(h.exports,function(b){var i=S[l][1][b];return r(i||b)},h,h.exports,o,S,u,c)}return u[l].exports}for(var n=typeof Bt=="function"&&Bt,a=0;a<c.length;a++)r(c[a]);return r}({1:[function(o,S,u){var c=o("./utils"),r=o("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";u.encode=function(a){for(var l,_,f,k,h,b,i,g=[],p=0,x=a.length,j=x,T=c.getTypeOf(a)!=="string";p<a.length;)j=x-p,f=T?(l=a[p++],_=p<x?a[p++]:0,p<x?a[p++]:0):(l=a.charCodeAt(p++),_=p<x?a.charCodeAt(p++):0,p<x?a.charCodeAt(p++):0),k=l>>2,h=(3&l)<<4|_>>4,b=1<j?(15&_)<<2|f>>6:64,i=2<j?63&f:64,g.push(n.charAt(k)+n.charAt(h)+n.charAt(b)+n.charAt(i));return g.join("")},u.decode=function(a){var l,_,f,k,h,b,i=0,g=0,p="data:";if(a.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var x,j=3*(a=a.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(a.charAt(a.length-1)===n.charAt(64)&&j--,a.charAt(a.length-2)===n.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=r.uint8array?new Uint8Array(0|j):new Array(0|j);i<a.length;)l=n.indexOf(a.charAt(i++))<<2|(k=n.indexOf(a.charAt(i++)))>>4,_=(15&k)<<4|(h=n.indexOf(a.charAt(i++)))>>2,f=(3&h)<<6|(b=n.indexOf(a.charAt(i++))),x[g++]=l,h!==64&&(x[g++]=_),b!==64&&(x[g++]=f);return x}},{"./support":30,"./utils":32}],2:[function(o,S,u){var c=o("./external"),r=o("./stream/DataWorker"),n=o("./stream/Crc32Probe"),a=o("./stream/DataLengthProbe");function l(_,f,k,h,b){this.compressedSize=_,this.uncompressedSize=f,this.crc32=k,this.compression=h,this.compressedContent=b}l.prototype={getContentWorker:function(){var _=new r(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),f=this;return _.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),_},getCompressedWorker:function(){return new r(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(_,f,k){return _.pipe(new n).pipe(new a("uncompressedSize")).pipe(f.compressWorker(k)).pipe(new a("compressedSize")).withStreamInfo("compression",f)},S.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(o,S,u){var c=o("./stream/GenericWorker");u.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},u.DEFLATE=o("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(o,S,u){var c=o("./utils"),r=function(){for(var n,a=[],l=0;l<256;l++){n=l;for(var _=0;_<8;_++)n=1&n?3988292384^n>>>1:n>>>1;a[l]=n}return a}();S.exports=function(n,a){return n!==void 0&&n.length?c.getTypeOf(n)!=="string"?function(l,_,f,k){var h=r,b=k+f;l^=-1;for(var i=k;i<b;i++)l=l>>>8^h[255&(l^_[i])];return-1^l}(0|a,n,n.length,0):function(l,_,f,k){var h=r,b=k+f;l^=-1;for(var i=k;i<b;i++)l=l>>>8^h[255&(l^_.charCodeAt(i))];return-1^l}(0|a,n,n.length,0):0}},{"./utils":32}],5:[function(o,S,u){u.base64=!1,u.binary=!1,u.dir=!1,u.createFolders=!0,u.date=null,u.compression=null,u.compressionOptions=null,u.comment=null,u.unixPermissions=null,u.dosPermissions=null},{}],6:[function(o,S,u){var c=null;c=typeof Promise<"u"?Promise:o("lie"),S.exports={Promise:c}},{lie:37}],7:[function(o,S,u){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",r=o("pako"),n=o("./utils"),a=o("./stream/GenericWorker"),l=c?"uint8array":"array";function _(f,k){a.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=k,this.meta={}}u.magic="\b\0",n.inherits(_,a),_.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(n.transformTo(l,f.data),!1)},_.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},_.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},_.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(k){f.push({data:k,meta:f.meta})}},u.compressWorker=function(f){return new _("Deflate",f)},u.uncompressWorker=function(){return new _("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(o,S,u){function c(h,b){var i,g="";for(i=0;i<b;i++)g+=String.fromCharCode(255&h),h>>>=8;return g}function r(h,b,i,g,p,x){var j,T,A=h.file,U=h.compression,z=x!==l.utf8encode,w=n.transformTo("string",x(A.name)),m=n.transformTo("string",l.utf8encode(A.name)),C=A.comment,M=n.transformTo("string",x(C)),v=n.transformTo("string",l.utf8encode(C)),O=m.length!==A.name.length,s=v.length!==C.length,G="",it="",D="",st=A.dir,F=A.date,rt={crc32:0,compressedSize:0,uncompressedSize:0};b&&!i||(rt.crc32=h.crc32,rt.compressedSize=h.compressedSize,rt.uncompressedSize=h.uncompressedSize);var N=0;b&&(N|=8),z||!O&&!s||(N|=2048);var I=0,V=0;st&&(I|=16),p==="UNIX"?(V=798,I|=function(q,ct){var ft=q;return q||(ft=ct?16893:33204),(65535&ft)<<16}(A.unixPermissions,st)):(V=20,I|=function(q){return 63&(q||0)}(A.dosPermissions)),j=F.getUTCHours(),j<<=6,j|=F.getUTCMinutes(),j<<=5,j|=F.getUTCSeconds()/2,T=F.getUTCFullYear()-1980,T<<=4,T|=F.getUTCMonth()+1,T<<=5,T|=F.getUTCDate(),O&&(it=c(1,1)+c(_(w),4)+m,G+="up"+c(it.length,2)+it),s&&(D=c(1,1)+c(_(M),4)+v,G+="uc"+c(D.length,2)+D);var Y="";return Y+=`
\0`,Y+=c(N,2),Y+=U.magic,Y+=c(j,2),Y+=c(T,2),Y+=c(rt.crc32,4),Y+=c(rt.compressedSize,4),Y+=c(rt.uncompressedSize,4),Y+=c(w.length,2),Y+=c(G.length,2),{fileRecord:f.LOCAL_FILE_HEADER+Y+w+G,dirRecord:f.CENTRAL_FILE_HEADER+c(V,2)+Y+c(M.length,2)+"\0\0\0\0"+c(I,4)+c(g,4)+w+G+M}}var n=o("../utils"),a=o("../stream/GenericWorker"),l=o("../utf8"),_=o("../crc32"),f=o("../signature");function k(h,b,i,g){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=i,this.encodeFileName=g,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(k,a),k.prototype.push=function(h){var b=h.meta.percent||0,i=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,a.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:i?(b+100*(i-g-1))/i:100}}))},k.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var b=this.streamFiles&&!h.file.dir;if(b){var i=r(h,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},k.prototype.closedSource=function(h){this.accumulate=!1;var b=this.streamFiles&&!h.file.dir,i=r(h,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),b)this.push({data:function(g){return f.DATA_DESCRIPTOR+c(g.crc32,4)+c(g.compressedSize,4)+c(g.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},k.prototype.flush=function(){for(var h=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var i=this.bytesWritten-h,g=function(p,x,j,T,A){var U=n.transformTo("string",A(T));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(p,2)+c(p,2)+c(x,4)+c(j,4)+c(U.length,2)+U}(this.dirRecords.length,i,h,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},k.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},k.prototype.registerPrevious=function(h){this._sources.push(h);var b=this;return h.on("data",function(i){b.processChunk(i)}),h.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),h.on("error",function(i){b.error(i)}),this},k.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},k.prototype.error=function(h){var b=this._sources;if(!a.prototype.error.call(this,h))return!1;for(var i=0;i<b.length;i++)try{b[i].error(h)}catch{}return!0},k.prototype.lock=function(){a.prototype.lock.call(this);for(var h=this._sources,b=0;b<h.length;b++)h[b].lock()},S.exports=k},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(o,S,u){var c=o("../compressions"),r=o("./ZipFileWorker");u.generateWorker=function(n,a,l){var _=new r(a.streamFiles,l,a.platform,a.encodeFileName),f=0;try{n.forEach(function(k,h){f++;var b=function(x,j){var T=x||j,A=c[T];if(!A)throw new Error(T+" is not a valid compression method !");return A}(h.options.compression,a.compression),i=h.options.compressionOptions||a.compressionOptions||{},g=h.dir,p=h.date;h._compressWorker(b,i).withStreamInfo("file",{name:k,dir:g,date:p,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(_)}),_.entriesCount=f}catch(k){_.error(k)}return _}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(o,S,u){function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var r=new c;for(var n in this)typeof this[n]!="function"&&(r[n]=this[n]);return r}}(c.prototype=o("./object")).loadAsync=o("./load"),c.support=o("./support"),c.defaults=o("./defaults"),c.version="3.10.1",c.loadAsync=function(r,n){return new c().loadAsync(r,n)},c.external=o("./external"),S.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(o,S,u){var c=o("./utils"),r=o("./external"),n=o("./utf8"),a=o("./zipEntries"),l=o("./stream/Crc32Probe"),_=o("./nodejsUtils");function f(k){return new r.Promise(function(h,b){var i=k.decompressed.getContentWorker().pipe(new l);i.on("error",function(g){b(g)}).on("end",function(){i.streamInfo.crc32!==k.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}S.exports=function(k,h){var b=this;return h=c.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),_.isNode&&_.isStream(k)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",k,!0,h.optimizedBinaryString,h.base64).then(function(i){var g=new a(h);return g.load(i),g}).then(function(i){var g=[r.Promise.resolve(i)],p=i.files;if(h.checkCRC32)for(var x=0;x<p.length;x++)g.push(f(p[x]));return r.Promise.all(g)}).then(function(i){for(var g=i.shift(),p=g.files,x=0;x<p.length;x++){var j=p[x],T=j.fileNameStr,A=c.resolve(j.fileNameStr);b.file(A,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:h.createFolders}),j.dir||(b.file(A).unsafeOriginalName=T)}return g.zipComment.length&&(b.comment=g.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(o,S,u){var c=o("../utils"),r=o("../stream/GenericWorker");function n(a,l){r.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(l)}c.inherits(n,r),n.prototype._bindStream=function(a){var l=this;(this._stream=a).pause(),a.on("data",function(_){l.push({data:_,meta:{percent:0}})}).on("error",function(_){l.isPaused?this.generatedError=_:l.error(_)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},n.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},S.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(o,S,u){var c=o("readable-stream").Readable;function r(n,a,l){c.call(this,a),this._helper=n;var _=this;n.on("data",function(f,k){_.push(f)||_._helper.pause(),l&&l(k)}).on("error",function(f){_.emit("error",f)}).on("end",function(){_.push(null)})}o("../utils").inherits(r,c),r.prototype._read=function(){this._helper.resume()},S.exports=r},{"../utils":32,"readable-stream":16}],14:[function(o,S,u){S.exports={isNode:typeof Buffer<"u",newBufferFrom:function(c,r){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,r);if(typeof c=="number")throw new Error('The "data" argument must not be a number');return new Buffer(c,r)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var r=new Buffer(c);return r.fill(0),r},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&typeof c.on=="function"&&typeof c.pause=="function"&&typeof c.resume=="function"}}},{}],15:[function(o,S,u){function c(A,U,z){var w,m=n.getTypeOf(U),C=n.extend(z||{},_);C.date=C.date||new Date,C.compression!==null&&(C.compression=C.compression.toUpperCase()),typeof C.unixPermissions=="string"&&(C.unixPermissions=parseInt(C.unixPermissions,8)),C.unixPermissions&&16384&C.unixPermissions&&(C.dir=!0),C.dosPermissions&&16&C.dosPermissions&&(C.dir=!0),C.dir&&(A=p(A)),C.createFolders&&(w=g(A))&&x.call(this,w,!0);var M=m==="string"&&C.binary===!1&&C.base64===!1;z&&z.binary!==void 0||(C.binary=!M),(U instanceof f&&U.uncompressedSize===0||C.dir||!U||U.length===0)&&(C.base64=!1,C.binary=!0,U="",C.compression="STORE",m="string");var v=null;v=U instanceof f||U instanceof a?U:b.isNode&&b.isStream(U)?new i(A,U):n.prepareContent(A,U,C.binary,C.optimizedBinaryString,C.base64);var O=new k(A,v,C);this.files[A]=O}var r=o("./utf8"),n=o("./utils"),a=o("./stream/GenericWorker"),l=o("./stream/StreamHelper"),_=o("./defaults"),f=o("./compressedObject"),k=o("./zipObject"),h=o("./generate"),b=o("./nodejsUtils"),i=o("./nodejs/NodejsStreamInputAdapter"),g=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var U=A.lastIndexOf("/");return 0<U?A.substring(0,U):""},p=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},x=function(A,U){return U=U!==void 0?U:_.createFolders,A=p(A),this.files[A]||c.call(this,A,null,{dir:!0,createFolders:U}),this.files[A]};function j(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var U,z,w;for(U in this.files)w=this.files[U],(z=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&A(z,w)},filter:function(A){var U=[];return this.forEach(function(z,w){A(z,w)&&U.push(w)}),U},file:function(A,U,z){if(arguments.length!==1)return A=this.root+A,c.call(this,A,U,z),this;if(j(A)){var w=A;return this.filter(function(C,M){return!M.dir&&w.test(C)})}var m=this.files[this.root+A];return m&&!m.dir?m:null},folder:function(A){if(!A)return this;if(j(A))return this.filter(function(m,C){return C.dir&&A.test(m)});var U=this.root+A,z=x.call(this,U),w=this.clone();return w.root=z.name,w},remove:function(A){A=this.root+A;var U=this.files[A];if(U||(A.slice(-1)!=="/"&&(A+="/"),U=this.files[A]),U&&!U.dir)delete this.files[A];else for(var z=this.filter(function(m,C){return C.name.slice(0,A.length)===A}),w=0;w<z.length;w++)delete this.files[z[w].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var U,z={};try{if((z=n.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");n.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var w=z.comment||this.comment||"";U=h.generateWorker(this,z,w)}catch(m){(U=new a("error")).error(m)}return new l(U,z.type||"string",z.mimeType)},generateAsync:function(A,U){return this.generateInternalStream(A).accumulate(U)},generateNodeStream:function(A,U){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(U)}};S.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(o,S,u){S.exports=o("stream")},{stream:void 0}],17:[function(o,S,u){var c=o("./DataReader");function r(n){c.call(this,n);for(var a=0;a<this.data.length;a++)n[a]=255&n[a]}o("../utils").inherits(r,c),r.prototype.byteAt=function(n){return this.data[this.zero+n]},r.prototype.lastIndexOfSignature=function(n){for(var a=n.charCodeAt(0),l=n.charCodeAt(1),_=n.charCodeAt(2),f=n.charCodeAt(3),k=this.length-4;0<=k;--k)if(this.data[k]===a&&this.data[k+1]===l&&this.data[k+2]===_&&this.data[k+3]===f)return k-this.zero;return-1},r.prototype.readAndCheckSignature=function(n){var a=n.charCodeAt(0),l=n.charCodeAt(1),_=n.charCodeAt(2),f=n.charCodeAt(3),k=this.readData(4);return a===k[0]&&l===k[1]&&_===k[2]&&f===k[3]},r.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,a},S.exports=r},{"../utils":32,"./DataReader":18}],18:[function(o,S,u){var c=o("../utils");function r(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var a,l=0;for(this.checkOffset(n),a=this.index+n-1;a>=this.index;a--)l=(l<<8)+this.byteAt(a);return this.index+=n,l},readString:function(n){return c.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},S.exports=r},{"../utils":32}],19:[function(o,S,u){var c=o("./Uint8ArrayReader");function r(n){c.call(this,n)}o("../utils").inherits(r,c),r.prototype.readData=function(n){this.checkOffset(n);var a=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,a},S.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(o,S,u){var c=o("./DataReader");function r(n){c.call(this,n)}o("../utils").inherits(r,c),r.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},r.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},r.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},r.prototype.readData=function(n){this.checkOffset(n);var a=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,a},S.exports=r},{"../utils":32,"./DataReader":18}],21:[function(o,S,u){var c=o("./ArrayReader");function r(n){c.call(this,n)}o("../utils").inherits(r,c),r.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,a},S.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(o,S,u){var c=o("../utils"),r=o("../support"),n=o("./ArrayReader"),a=o("./StringReader"),l=o("./NodeBufferReader"),_=o("./Uint8ArrayReader");S.exports=function(f){var k=c.getTypeOf(f);return c.checkSupport(k),k!=="string"||r.uint8array?k==="nodebuffer"?new l(f):r.uint8array?new _(c.transformTo("uint8array",f)):new n(c.transformTo("array",f)):new a(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(o,S,u){u.LOCAL_FILE_HEADER="PK",u.CENTRAL_FILE_HEADER="PK",u.CENTRAL_DIRECTORY_END="PK",u.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",u.ZIP64_CENTRAL_DIRECTORY_END="PK",u.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(o,S,u){var c=o("./GenericWorker"),r=o("../utils");function n(a){c.call(this,"ConvertWorker to "+a),this.destType=a}r.inherits(n,c),n.prototype.processChunk=function(a){this.push({data:r.transformTo(this.destType,a.data),meta:a.meta})},S.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(o,S,u){var c=o("./GenericWorker"),r=o("../crc32");function n(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o("../utils").inherits(n,c),n.prototype.processChunk=function(a){this.streamInfo.crc32=r(a.data,this.streamInfo.crc32||0),this.push(a)},S.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(o,S,u){var c=o("../utils"),r=o("./GenericWorker");function n(a){r.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}c.inherits(n,r),n.prototype.processChunk=function(a){if(a){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+a.data.length}r.prototype.processChunk.call(this,a)},S.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(o,S,u){var c=o("../utils"),r=o("./GenericWorker");function n(a){r.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(_){l.dataIsReady=!0,l.data=_,l.max=_&&_.length||0,l.type=c.getTypeOf(_),l.isPaused||l._tickAndRepeat()},function(_){l.error(_)})}c.inherits(n,r),n.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,l);break;case"uint8array":a=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":a=this.data.slice(this.index,l)}return this.index=l,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},S.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(o,S,u){function c(r){this.name=r||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(r){this.emit("data",r)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(r){this.emit("error",r)}return!0},error:function(r){return!this.isFinished&&(this.isPaused?this.generatedError=r:(this.isFinished=!0,this.emit("error",r),this.previous&&this.previous.error(r),this.cleanUp()),!0)},on:function(r,n){return this._listeners[r].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(r,n){if(this._listeners[r])for(var a=0;a<this._listeners[r].length;a++)this._listeners[r][a].call(this,n)},pipe:function(r){return r.registerPrevious(this)},registerPrevious:function(r){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=r.streamInfo,this.mergeStreamInfo(),this.previous=r;var n=this;return r.on("data",function(a){n.processChunk(a)}),r.on("end",function(){n.end()}),r.on("error",function(a){n.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var r=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),r=!0),this.previous&&this.previous.resume(),!r},flush:function(){},processChunk:function(r){this.push(r)},withStreamInfo:function(r,n){return this.extraStreamInfo[r]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var r in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,r)&&(this.streamInfo[r]=this.extraStreamInfo[r])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var r="Worker "+this.name;return this.previous?this.previous+" -> "+r:r}},S.exports=c},{}],29:[function(o,S,u){var c=o("../utils"),r=o("./ConvertWorker"),n=o("./GenericWorker"),a=o("../base64"),l=o("../support"),_=o("../external"),f=null;if(l.nodestream)try{f=o("../nodejs/NodejsStreamOutputAdapter")}catch{}function k(b,i){return new _.Promise(function(g,p){var x=[],j=b._internalType,T=b._outputType,A=b._mimeType;b.on("data",function(U,z){x.push(U),i&&i(z)}).on("error",function(U){x=[],p(U)}).on("end",function(){try{var U=function(z,w,m){switch(z){case"blob":return c.newBlob(c.transformTo("arraybuffer",w),m);case"base64":return a.encode(w);default:return c.transformTo(z,w)}}(T,function(z,w){var m,C=0,M=null,v=0;for(m=0;m<w.length;m++)v+=w[m].length;switch(z){case"string":return w.join("");case"array":return Array.prototype.concat.apply([],w);case"uint8array":for(M=new Uint8Array(v),m=0;m<w.length;m++)M.set(w[m],C),C+=w[m].length;return M;case"nodebuffer":return Buffer.concat(w);default:throw new Error("concat : unsupported type '"+z+"'")}}(j,x),A);g(U)}catch(z){p(z)}x=[]}).resume()})}function h(b,i,g){var p=i;switch(i){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=i,this._mimeType=g,c.checkSupport(p),this._worker=b.pipe(new r(p)),b.lock()}catch(x){this._worker=new n("error"),this._worker.error(x)}}h.prototype={accumulate:function(b){return k(this,b)},on:function(b,i){var g=this;return b==="data"?this._worker.on(b,function(p){i.call(g,p.data,p.meta)}):this._worker.on(b,function(){c.delay(i,arguments,g)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},b)}},S.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(o,S,u){if(u.base64=!0,u.array=!0,u.string=!0,u.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",u.nodebuffer=typeof Buffer<"u",u.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")u.blob=!1;else{var c=new ArrayBuffer(0);try{u.blob=new Blob([c],{type:"application/zip"}).size===0}catch{try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(c),u.blob=r.getBlob("application/zip").size===0}catch{u.blob=!1}}}try{u.nodestream=!!o("readable-stream").Readable}catch{u.nodestream=!1}},{"readable-stream":16}],31:[function(o,S,u){for(var c=o("./utils"),r=o("./support"),n=o("./nodejsUtils"),a=o("./stream/GenericWorker"),l=new Array(256),_=0;_<256;_++)l[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;l[254]=l[254]=1;function f(){a.call(this,"utf-8 decode"),this.leftOver=null}function k(){a.call(this,"utf-8 encode")}u.utf8encode=function(h){return r.nodebuffer?n.newBufferFrom(h,"utf-8"):function(b){var i,g,p,x,j,T=b.length,A=0;for(x=0;x<T;x++)(64512&(g=b.charCodeAt(x)))==55296&&x+1<T&&(64512&(p=b.charCodeAt(x+1)))==56320&&(g=65536+(g-55296<<10)+(p-56320),x++),A+=g<128?1:g<2048?2:g<65536?3:4;for(i=r.uint8array?new Uint8Array(A):new Array(A),x=j=0;j<A;x++)(64512&(g=b.charCodeAt(x)))==55296&&x+1<T&&(64512&(p=b.charCodeAt(x+1)))==56320&&(g=65536+(g-55296<<10)+(p-56320),x++),g<128?i[j++]=g:(g<2048?i[j++]=192|g>>>6:(g<65536?i[j++]=224|g>>>12:(i[j++]=240|g>>>18,i[j++]=128|g>>>12&63),i[j++]=128|g>>>6&63),i[j++]=128|63&g);return i}(h)},u.utf8decode=function(h){return r.nodebuffer?c.transformTo("nodebuffer",h).toString("utf-8"):function(b){var i,g,p,x,j=b.length,T=new Array(2*j);for(i=g=0;i<j;)if((p=b[i++])<128)T[g++]=p;else if(4<(x=l[p]))T[g++]=65533,i+=x-1;else{for(p&=x===2?31:x===3?15:7;1<x&&i<j;)p=p<<6|63&b[i++],x--;1<x?T[g++]=65533:p<65536?T[g++]=p:(p-=65536,T[g++]=55296|p>>10&1023,T[g++]=56320|1023&p)}return T.length!==g&&(T.subarray?T=T.subarray(0,g):T.length=g),c.applyFromCharCode(T)}(h=c.transformTo(r.uint8array?"uint8array":"array",h))},c.inherits(f,a),f.prototype.processChunk=function(h){var b=c.transformTo(r.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var i=b;(b=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),b.set(i,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var g=function(x,j){var T;for((j=j||x.length)>x.length&&(j=x.length),T=j-1;0<=T&&(192&x[T])==128;)T--;return T<0||T===0?j:T+l[x[T]]>j?T:j}(b),p=b;g!==b.length&&(r.uint8array?(p=b.subarray(0,g),this.leftOver=b.subarray(g,b.length)):(p=b.slice(0,g),this.leftOver=b.slice(g,b.length))),this.push({data:u.utf8decode(p),meta:h.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:u.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},u.Utf8DecodeWorker=f,c.inherits(k,a),k.prototype.processChunk=function(h){this.push({data:u.utf8encode(h.data),meta:h.meta})},u.Utf8EncodeWorker=k},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(o,S,u){var c=o("./support"),r=o("./base64"),n=o("./nodejsUtils"),a=o("./external");function l(i){return i}function _(i,g){for(var p=0;p<i.length;++p)g[p]=255&i.charCodeAt(p);return g}o("setimmediate"),u.newBlob=function(i,g){u.checkSupport("blob");try{return new Blob([i],{type:g})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(i),p.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(i,g,p){var x=[],j=0,T=i.length;if(T<=p)return String.fromCharCode.apply(null,i);for(;j<T;)g==="array"||g==="nodebuffer"?x.push(String.fromCharCode.apply(null,i.slice(j,Math.min(j+p,T)))):x.push(String.fromCharCode.apply(null,i.subarray(j,Math.min(j+p,T)))),j+=p;return x.join("")},stringifyByChar:function(i){for(var g="",p=0;p<i.length;p++)g+=String.fromCharCode(i[p]);return g},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch{return!1}}()}};function k(i){var g=65536,p=u.getTypeOf(i),x=!0;if(p==="uint8array"?x=f.applyCanBeUsed.uint8array:p==="nodebuffer"&&(x=f.applyCanBeUsed.nodebuffer),x)for(;1<g;)try{return f.stringifyByChunk(i,p,g)}catch{g=Math.floor(g/2)}return f.stringifyByChar(i)}function h(i,g){for(var p=0;p<i.length;p++)g[p]=i[p];return g}u.applyFromCharCode=k;var b={};b.string={string:l,array:function(i){return _(i,new Array(i.length))},arraybuffer:function(i){return b.string.uint8array(i).buffer},uint8array:function(i){return _(i,new Uint8Array(i.length))},nodebuffer:function(i){return _(i,n.allocBuffer(i.length))}},b.array={string:k,array:l,arraybuffer:function(i){return new Uint8Array(i).buffer},uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return n.newBufferFrom(i)}},b.arraybuffer={string:function(i){return k(new Uint8Array(i))},array:function(i){return h(new Uint8Array(i),new Array(i.byteLength))},arraybuffer:l,uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return n.newBufferFrom(new Uint8Array(i))}},b.uint8array={string:k,array:function(i){return h(i,new Array(i.length))},arraybuffer:function(i){return i.buffer},uint8array:l,nodebuffer:function(i){return n.newBufferFrom(i)}},b.nodebuffer={string:k,array:function(i){return h(i,new Array(i.length))},arraybuffer:function(i){return b.nodebuffer.uint8array(i).buffer},uint8array:function(i){return h(i,new Uint8Array(i.length))},nodebuffer:l},u.transformTo=function(i,g){if(g=g||"",!i)return g;u.checkSupport(i);var p=u.getTypeOf(g);return b[p][i](g)},u.resolve=function(i){for(var g=i.split("/"),p=[],x=0;x<g.length;x++){var j=g[x];j==="."||j===""&&x!==0&&x!==g.length-1||(j===".."?p.pop():p.push(j))}return p.join("/")},u.getTypeOf=function(i){return typeof i=="string"?"string":Object.prototype.toString.call(i)==="[object Array]"?"array":c.nodebuffer&&n.isBuffer(i)?"nodebuffer":c.uint8array&&i instanceof Uint8Array?"uint8array":c.arraybuffer&&i instanceof ArrayBuffer?"arraybuffer":void 0},u.checkSupport=function(i){if(!c[i.toLowerCase()])throw new Error(i+" is not supported by this platform")},u.MAX_VALUE_16BITS=65535,u.MAX_VALUE_32BITS=-1,u.pretty=function(i){var g,p,x="";for(p=0;p<(i||"").length;p++)x+="\\x"+((g=i.charCodeAt(p))<16?"0":"")+g.toString(16).toUpperCase();return x},u.delay=function(i,g,p){setImmediate(function(){i.apply(p||null,g||[])})},u.inherits=function(i,g){function p(){}p.prototype=g.prototype,i.prototype=new p},u.extend=function(){var i,g,p={};for(i=0;i<arguments.length;i++)for(g in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],g)&&p[g]===void 0&&(p[g]=arguments[i][g]);return p},u.prepareContent=function(i,g,p,x,j){return a.Promise.resolve(g).then(function(T){return c.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new a.Promise(function(A,U){var z=new FileReader;z.onload=function(w){A(w.target.result)},z.onerror=function(w){U(w.target.error)},z.readAsArrayBuffer(T)}):T}).then(function(T){var A=u.getTypeOf(T);return A?(A==="arraybuffer"?T=u.transformTo("uint8array",T):A==="string"&&(j?T=r.decode(T):p&&x!==!0&&(T=function(U){return _(U,c.uint8array?new Uint8Array(U.length):new Array(U.length))}(T))),T):a.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(o,S,u){var c=o("./reader/readerFor"),r=o("./utils"),n=o("./signature"),a=o("./zipEntry"),l=o("./support");function _(f){this.files=[],this.loadOptions=f}_.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var k=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(k)+", expected "+r.pretty(f)+")")}},isSignature:function(f,k){var h=this.reader.index;this.reader.setIndex(f);var b=this.reader.readString(4)===k;return this.reader.setIndex(h),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),k=l.uint8array?"uint8array":"array",h=r.transformTo(k,f);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,k,h,b=this.zip64EndOfCentralSize-44;0<b;)f=this.reader.readInt(2),k=this.reader.readInt(4),h=this.reader.readData(k),this.zip64ExtensibleData[f]={id:f,length:k,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,k;for(f=0;f<this.files.length;f++)k=this.files[f],this.reader.setIndex(k.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),k.readLocalPart(this.reader),k.handleUTF8(),k.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(f=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var k=f;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var b=k-h;if(0<b)this.isSignature(k,n.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(f){this.reader=c(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},S.exports=_},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(o,S,u){var c=o("./reader/readerFor"),r=o("./utils"),n=o("./compressedObject"),a=o("./crc32"),l=o("./utf8"),_=o("./compressions"),f=o("./support");function k(h,b){this.options=h,this.loadOptions=b}k.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var b,i;if(h.skip(22),this.fileNameLength=h.readInt(2),i=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(i),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(g){for(var p in _)if(Object.prototype.hasOwnProperty.call(_,p)&&_[p].magic===g)return _[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,b,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var b=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(b),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=c(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var b,i,g,p=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<p;)b=h.readInt(2),i=h.readInt(2),g=h.readData(i),this.extraFields[b]={id:b,length:i,value:g};h.setIndex(p)},handleUTF8:function(){var h=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var i=r.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var p=r.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var b=c(h.value);return b.readInt(1)!==1||a(this.fileName)!==b.readInt(4)?null:l.utf8decode(b.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var b=c(h.value);return b.readInt(1)!==1||a(this.fileComment)!==b.readInt(4)?null:l.utf8decode(b.readData(h.length-5))}return null}},S.exports=k},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(o,S,u){function c(b,i,g){this.name=b,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=i,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var r=o("./stream/StreamHelper"),n=o("./stream/DataWorker"),a=o("./utf8"),l=o("./compressedObject"),_=o("./stream/GenericWorker");c.prototype={internalStream:function(b){var i=null,g="string";try{if(!b)throw new Error("No output type specified.");var p=(g=b.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),i=this._decompressWorker();var x=!this._dataBinary;x&&!p&&(i=i.pipe(new a.Utf8EncodeWorker)),!x&&p&&(i=i.pipe(new a.Utf8DecodeWorker))}catch(j){(i=new _("error")).error(j)}return new r(i,g,"")},async:function(b,i){return this.internalStream(b).accumulate(i)},nodeStream:function(b,i){return this.internalStream(b||"nodebuffer").toNodejsStream(i)},_compressWorker:function(b,i){if(this._data instanceof l&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new a.Utf8EncodeWorker)),l.createWorkerFrom(g,b,i)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof _?this._data:new n(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<f.length;h++)c.prototype[f[h]]=k;S.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(o,S,u){(function(c){var r,n,a=c.MutationObserver||c.WebKitMutationObserver;if(a){var l=0,_=new a(b),f=c.document.createTextNode("");_.observe(f,{characterData:!0}),r=function(){f.data=l=++l%2}}else if(c.setImmediate||c.MessageChannel===void 0)r="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var i=c.document.createElement("script");i.onreadystatechange=function(){b(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},c.document.documentElement.appendChild(i)}:function(){setTimeout(b,0)};else{var k=new c.MessageChannel;k.port1.onmessage=b,r=function(){k.port2.postMessage(0)}}var h=[];function b(){var i,g;n=!0;for(var p=h.length;p;){for(g=h,h=[],i=-1;++i<p;)g[i]();p=h.length}n=!1}S.exports=function(i){h.push(i)!==1||n||r()}}).call(this,typeof Et<"u"?Et:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(o,S,u){var c=o("immediate");function r(){}var n={},a=["REJECTED"],l=["FULFILLED"],_=["PENDING"];function f(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,p!==r&&i(this,p)}function k(p,x,j){this.promise=p,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function h(p,x,j){c(function(){var T;try{T=x(j)}catch(A){return n.reject(p,A)}T===p?n.reject(p,new TypeError("Cannot resolve promise with itself")):n.resolve(p,T)})}function b(p){var x=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof x=="function")return function(){x.apply(p,arguments)}}function i(p,x){var j=!1;function T(z){j||(j=!0,n.reject(p,z))}function A(z){j||(j=!0,n.resolve(p,z))}var U=g(function(){x(A,T)});U.status==="error"&&T(U.value)}function g(p,x){var j={};try{j.value=p(x),j.status="success"}catch(T){j.status="error",j.value=T}return j}(S.exports=f).prototype.finally=function(p){if(typeof p!="function")return this;var x=this.constructor;return this.then(function(j){return x.resolve(p()).then(function(){return j})},function(j){return x.resolve(p()).then(function(){throw j})})},f.prototype.catch=function(p){return this.then(null,p)},f.prototype.then=function(p,x){if(typeof p!="function"&&this.state===l||typeof x!="function"&&this.state===a)return this;var j=new this.constructor(r);return this.state!==_?h(j,this.state===l?p:x,this.outcome):this.queue.push(new k(j,p,x)),j},k.prototype.callFulfilled=function(p){n.resolve(this.promise,p)},k.prototype.otherCallFulfilled=function(p){h(this.promise,this.onFulfilled,p)},k.prototype.callRejected=function(p){n.reject(this.promise,p)},k.prototype.otherCallRejected=function(p){h(this.promise,this.onRejected,p)},n.resolve=function(p,x){var j=g(b,x);if(j.status==="error")return n.reject(p,j.value);var T=j.value;if(T)i(p,T);else{p.state=l,p.outcome=x;for(var A=-1,U=p.queue.length;++A<U;)p.queue[A].callFulfilled(x)}return p},n.reject=function(p,x){p.state=a,p.outcome=x;for(var j=-1,T=p.queue.length;++j<T;)p.queue[j].callRejected(x);return p},f.resolve=function(p){return p instanceof this?p:n.resolve(new this(r),p)},f.reject=function(p){var x=new this(r);return n.reject(x,p)},f.all=function(p){var x=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=p.length,T=!1;if(!j)return this.resolve([]);for(var A=new Array(j),U=0,z=-1,w=new this(r);++z<j;)m(p[z],z);return w;function m(C,M){x.resolve(C).then(function(v){A[M]=v,++U!==j||T||(T=!0,n.resolve(w,A))},function(v){T||(T=!0,n.reject(w,v))})}},f.race=function(p){var x=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=p.length,T=!1;if(!j)return this.resolve([]);for(var A=-1,U=new this(r);++A<j;)z=p[A],x.resolve(z).then(function(w){T||(T=!0,n.resolve(U,w))},function(w){T||(T=!0,n.reject(U,w))});var z;return U}},{immediate:36}],38:[function(o,S,u){var c={};(0,o("./lib/utils/common").assign)(c,o("./lib/deflate"),o("./lib/inflate"),o("./lib/zlib/constants")),S.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(o,S,u){var c=o("./zlib/deflate"),r=o("./utils/common"),n=o("./utils/strings"),a=o("./zlib/messages"),l=o("./zlib/zstream"),_=Object.prototype.toString,f=0,k=-1,h=0,b=8;function i(p){if(!(this instanceof i))return new i(p);this.options=r.assign({level:k,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},p||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var j=c.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(j!==f)throw new Error(a[j]);if(x.header&&c.deflateSetHeader(this.strm,x.header),x.dictionary){var T;if(T=typeof x.dictionary=="string"?n.string2buf(x.dictionary):_.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(j=c.deflateSetDictionary(this.strm,T))!==f)throw new Error(a[j]);this._dict_set=!0}}function g(p,x){var j=new i(x);if(j.push(p,!0),j.err)throw j.msg||a[j.err];return j.result}i.prototype.push=function(p,x){var j,T,A=this.strm,U=this.options.chunkSize;if(this.ended)return!1;T=x===~~x?x:x===!0?4:0,typeof p=="string"?A.input=n.string2buf(p):_.call(p)==="[object ArrayBuffer]"?A.input=new Uint8Array(p):A.input=p,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new r.Buf8(U),A.next_out=0,A.avail_out=U),(j=c.deflate(A,T))!==1&&j!==f)return this.onEnd(j),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(n.buf2binstring(r.shrinkBuf(A.output,A.next_out))):this.onData(r.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&j!==1);return T===4?(j=c.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===f):T!==2||(this.onEnd(f),!(A.avail_out=0))},i.prototype.onData=function(p){this.chunks.push(p)},i.prototype.onEnd=function(p){p===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},u.Deflate=i,u.deflate=g,u.deflateRaw=function(p,x){return(x=x||{}).raw=!0,g(p,x)},u.gzip=function(p,x){return(x=x||{}).gzip=!0,g(p,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(o,S,u){var c=o("./zlib/inflate"),r=o("./utils/common"),n=o("./utils/strings"),a=o("./zlib/constants"),l=o("./zlib/messages"),_=o("./zlib/zstream"),f=o("./zlib/gzheader"),k=Object.prototype.toString;function h(i){if(!(this instanceof h))return new h(i);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},i||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||i&&i.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var p=c.inflateInit2(this.strm,g.windowBits);if(p!==a.Z_OK)throw new Error(l[p]);this.header=new f,c.inflateGetHeader(this.strm,this.header)}function b(i,g){var p=new h(g);if(p.push(i,!0),p.err)throw p.msg||l[p.err];return p.result}h.prototype.push=function(i,g){var p,x,j,T,A,U,z=this.strm,w=this.options.chunkSize,m=this.options.dictionary,C=!1;if(this.ended)return!1;x=g===~~g?g:g===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof i=="string"?z.input=n.binstring2buf(i):k.call(i)==="[object ArrayBuffer]"?z.input=new Uint8Array(i):z.input=i,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new r.Buf8(w),z.next_out=0,z.avail_out=w),(p=c.inflate(z,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(U=typeof m=="string"?n.string2buf(m):k.call(m)==="[object ArrayBuffer]"?new Uint8Array(m):m,p=c.inflateSetDictionary(this.strm,U)),p===a.Z_BUF_ERROR&&C===!0&&(p=a.Z_OK,C=!1),p!==a.Z_STREAM_END&&p!==a.Z_OK)return this.onEnd(p),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&p!==a.Z_STREAM_END&&(z.avail_in!==0||x!==a.Z_FINISH&&x!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=n.utf8border(z.output,z.next_out),T=z.next_out-j,A=n.buf2string(z.output,j),z.next_out=T,z.avail_out=w-T,T&&r.arraySet(z.output,z.output,j,T,0),this.onData(A)):this.onData(r.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(C=!0)}while((0<z.avail_in||z.avail_out===0)&&p!==a.Z_STREAM_END);return p===a.Z_STREAM_END&&(x=a.Z_FINISH),x===a.Z_FINISH?(p=c.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===a.Z_OK):x!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(z.avail_out=0))},h.prototype.onData=function(i){this.chunks.push(i)},h.prototype.onEnd=function(i){i===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},u.Inflate=h,u.inflate=b,u.inflateRaw=function(i,g){return(g=g||{}).raw=!0,b(i,g)},u.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(o,S,u){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";u.assign=function(a){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var _=l.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var f in _)_.hasOwnProperty(f)&&(a[f]=_[f])}}return a},u.shrinkBuf=function(a,l){return a.length===l?a:a.subarray?a.subarray(0,l):(a.length=l,a)};var r={arraySet:function(a,l,_,f,k){if(l.subarray&&a.subarray)a.set(l.subarray(_,_+f),k);else for(var h=0;h<f;h++)a[k+h]=l[_+h]},flattenChunks:function(a){var l,_,f,k,h,b;for(l=f=0,_=a.length;l<_;l++)f+=a[l].length;for(b=new Uint8Array(f),l=k=0,_=a.length;l<_;l++)h=a[l],b.set(h,k),k+=h.length;return b}},n={arraySet:function(a,l,_,f,k){for(var h=0;h<f;h++)a[k+h]=l[_+h]},flattenChunks:function(a){return[].concat.apply([],a)}};u.setTyped=function(a){a?(u.Buf8=Uint8Array,u.Buf16=Uint16Array,u.Buf32=Int32Array,u.assign(u,r)):(u.Buf8=Array,u.Buf16=Array,u.Buf32=Array,u.assign(u,n))},u.setTyped(c)},{}],42:[function(o,S,u){var c=o("./common"),r=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var a=new c.Buf8(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function _(f,k){if(k<65537&&(f.subarray&&n||!f.subarray&&r))return String.fromCharCode.apply(null,c.shrinkBuf(f,k));for(var h="",b=0;b<k;b++)h+=String.fromCharCode(f[b]);return h}a[254]=a[254]=1,u.string2buf=function(f){var k,h,b,i,g,p=f.length,x=0;for(i=0;i<p;i++)(64512&(h=f.charCodeAt(i)))==55296&&i+1<p&&(64512&(b=f.charCodeAt(i+1)))==56320&&(h=65536+(h-55296<<10)+(b-56320),i++),x+=h<128?1:h<2048?2:h<65536?3:4;for(k=new c.Buf8(x),i=g=0;g<x;i++)(64512&(h=f.charCodeAt(i)))==55296&&i+1<p&&(64512&(b=f.charCodeAt(i+1)))==56320&&(h=65536+(h-55296<<10)+(b-56320),i++),h<128?k[g++]=h:(h<2048?k[g++]=192|h>>>6:(h<65536?k[g++]=224|h>>>12:(k[g++]=240|h>>>18,k[g++]=128|h>>>12&63),k[g++]=128|h>>>6&63),k[g++]=128|63&h);return k},u.buf2binstring=function(f){return _(f,f.length)},u.binstring2buf=function(f){for(var k=new c.Buf8(f.length),h=0,b=k.length;h<b;h++)k[h]=f.charCodeAt(h);return k},u.buf2string=function(f,k){var h,b,i,g,p=k||f.length,x=new Array(2*p);for(h=b=0;h<p;)if((i=f[h++])<128)x[b++]=i;else if(4<(g=a[i]))x[b++]=65533,h+=g-1;else{for(i&=g===2?31:g===3?15:7;1<g&&h<p;)i=i<<6|63&f[h++],g--;1<g?x[b++]=65533:i<65536?x[b++]=i:(i-=65536,x[b++]=55296|i>>10&1023,x[b++]=56320|1023&i)}return _(x,b)},u.utf8border=function(f,k){var h;for((k=k||f.length)>f.length&&(k=f.length),h=k-1;0<=h&&(192&f[h])==128;)h--;return h<0||h===0?k:h+a[f[h]]>k?h:k}},{"./common":41}],43:[function(o,S,u){S.exports=function(c,r,n,a){for(var l=65535&c|0,_=c>>>16&65535|0,f=0;n!==0;){for(n-=f=2e3<n?2e3:n;_=_+(l=l+r[a++]|0)|0,--f;);l%=65521,_%=65521}return l|_<<16|0}},{}],44:[function(o,S,u){S.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(o,S,u){var c=function(){for(var r,n=[],a=0;a<256;a++){r=a;for(var l=0;l<8;l++)r=1&r?3988292384^r>>>1:r>>>1;n[a]=r}return n}();S.exports=function(r,n,a,l){var _=c,f=l+a;r^=-1;for(var k=l;k<f;k++)r=r>>>8^_[255&(r^n[k])];return-1^r}},{}],46:[function(o,S,u){var c,r=o("../utils/common"),n=o("./trees"),a=o("./adler32"),l=o("./crc32"),_=o("./messages"),f=0,k=4,h=0,b=-2,i=-1,g=4,p=2,x=8,j=9,T=286,A=30,U=19,z=2*T+1,w=15,m=3,C=258,M=C+m+1,v=42,O=113,s=1,G=2,it=3,D=4;function st(t,P){return t.msg=_[P],P}function F(t){return(t<<1)-(4<t?9:0)}function rt(t){for(var P=t.length;0<=--P;)t[P]=0}function N(t){var P=t.state,B=P.pending;B>t.avail_out&&(B=t.avail_out),B!==0&&(r.arraySet(t.output,P.pending_buf,P.pending_out,B,t.next_out),t.next_out+=B,P.pending_out+=B,t.total_out+=B,t.avail_out-=B,P.pending-=B,P.pending===0&&(P.pending_out=0))}function I(t,P){n._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,P),t.block_start=t.strstart,N(t.strm)}function V(t,P){t.pending_buf[t.pending++]=P}function Y(t,P){t.pending_buf[t.pending++]=P>>>8&255,t.pending_buf[t.pending++]=255&P}function q(t,P){var B,y,d=t.max_chain_length,E=t.strstart,Z=t.prev_length,H=t.nice_match,L=t.strstart>t.w_size-M?t.strstart-(t.w_size-M):0,K=t.window,J=t.w_mask,$=t.prev,Q=t.strstart+C,lt=K[E+Z-1],at=K[E+Z];t.prev_length>=t.good_match&&(d>>=2),H>t.lookahead&&(H=t.lookahead);do if(K[(B=P)+Z]===at&&K[B+Z-1]===lt&&K[B]===K[E]&&K[++B]===K[E+1]){E+=2,B++;do;while(K[++E]===K[++B]&&K[++E]===K[++B]&&K[++E]===K[++B]&&K[++E]===K[++B]&&K[++E]===K[++B]&&K[++E]===K[++B]&&K[++E]===K[++B]&&K[++E]===K[++B]&&E<Q);if(y=C-(Q-E),E=Q-C,Z<y){if(t.match_start=P,H<=(Z=y))break;lt=K[E+Z-1],at=K[E+Z]}}while((P=$[P&J])>L&&--d!=0);return Z<=t.lookahead?Z:t.lookahead}function ct(t){var P,B,y,d,E,Z,H,L,K,J,$=t.w_size;do{if(d=t.window_size-t.lookahead-t.strstart,t.strstart>=$+($-M)){for(r.arraySet(t.window,t.window,$,$,0),t.match_start-=$,t.strstart-=$,t.block_start-=$,P=B=t.hash_size;y=t.head[--P],t.head[P]=$<=y?y-$:0,--B;);for(P=B=$;y=t.prev[--P],t.prev[P]=$<=y?y-$:0,--B;);d+=$}if(t.strm.avail_in===0)break;if(Z=t.strm,H=t.window,L=t.strstart+t.lookahead,K=d,J=void 0,J=Z.avail_in,K<J&&(J=K),B=J===0?0:(Z.avail_in-=J,r.arraySet(H,Z.input,Z.next_in,J,L),Z.state.wrap===1?Z.adler=a(Z.adler,H,J,L):Z.state.wrap===2&&(Z.adler=l(Z.adler,H,J,L)),Z.next_in+=J,Z.total_in+=J,J),t.lookahead+=B,t.lookahead+t.insert>=m)for(E=t.strstart-t.insert,t.ins_h=t.window[E],t.ins_h=(t.ins_h<<t.hash_shift^t.window[E+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[E+m-1])&t.hash_mask,t.prev[E&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=E,E++,t.insert--,!(t.lookahead+t.insert<m)););}while(t.lookahead<M&&t.strm.avail_in!==0)}function ft(t,P){for(var B,y;;){if(t.lookahead<M){if(ct(t),t.lookahead<M&&P===f)return s;if(t.lookahead===0)break}if(B=0,t.lookahead>=m&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+m-1])&t.hash_mask,B=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),B!==0&&t.strstart-B<=t.w_size-M&&(t.match_length=q(t,B)),t.match_length>=m)if(y=n._tr_tally(t,t.strstart-t.match_start,t.match_length-m),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=m){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+m-1])&t.hash_mask,B=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else y=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(y&&(I(t,!1),t.strm.avail_out===0))return s}return t.insert=t.strstart<m-1?t.strstart:m-1,P===k?(I(t,!0),t.strm.avail_out===0?it:D):t.last_lit&&(I(t,!1),t.strm.avail_out===0)?s:G}function tt(t,P){for(var B,y,d;;){if(t.lookahead<M){if(ct(t),t.lookahead<M&&P===f)return s;if(t.lookahead===0)break}if(B=0,t.lookahead>=m&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+m-1])&t.hash_mask,B=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=m-1,B!==0&&t.prev_length<t.max_lazy_match&&t.strstart-B<=t.w_size-M&&(t.match_length=q(t,B),t.match_length<=5&&(t.strategy===1||t.match_length===m&&4096<t.strstart-t.match_start)&&(t.match_length=m-1)),t.prev_length>=m&&t.match_length<=t.prev_length){for(d=t.strstart+t.lookahead-m,y=n._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-m),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=d&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+m-1])&t.hash_mask,B=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=m-1,t.strstart++,y&&(I(t,!1),t.strm.avail_out===0))return s}else if(t.match_available){if((y=n._tr_tally(t,0,t.window[t.strstart-1]))&&I(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return s}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(y=n._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<m-1?t.strstart:m-1,P===k?(I(t,!0),t.strm.avail_out===0?it:D):t.last_lit&&(I(t,!1),t.strm.avail_out===0)?s:G}function nt(t,P,B,y,d){this.good_length=t,this.max_lazy=P,this.nice_length=B,this.max_chain=y,this.func=d}function ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*z),this.dyn_dtree=new r.Buf16(2*(2*A+1)),this.bl_tree=new r.Buf16(2*(2*U+1)),rt(this.dyn_ltree),rt(this.dyn_dtree),rt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(w+1),this.heap=new r.Buf16(2*T+1),rt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*T+1),rt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function et(t){var P;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=p,(P=t.state).pending=0,P.pending_out=0,P.wrap<0&&(P.wrap=-P.wrap),P.status=P.wrap?v:O,t.adler=P.wrap===2?0:1,P.last_flush=f,n._tr_init(P),h):st(t,b)}function ht(t){var P=et(t);return P===h&&function(B){B.window_size=2*B.w_size,rt(B.head),B.max_lazy_match=c[B.level].max_lazy,B.good_match=c[B.level].good_length,B.nice_match=c[B.level].nice_length,B.max_chain_length=c[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=m-1,B.match_available=0,B.ins_h=0}(t.state),P}function ut(t,P,B,y,d,E){if(!t)return b;var Z=1;if(P===i&&(P=6),y<0?(Z=0,y=-y):15<y&&(Z=2,y-=16),d<1||j<d||B!==x||y<8||15<y||P<0||9<P||E<0||g<E)return st(t,b);y===8&&(y=9);var H=new ot;return(t.state=H).strm=t,H.wrap=Z,H.gzhead=null,H.w_bits=y,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=d+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+m-1)/m),H.window=new r.Buf8(2*H.w_size),H.head=new r.Buf16(H.hash_size),H.prev=new r.Buf16(H.w_size),H.lit_bufsize=1<<d+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new r.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=P,H.strategy=E,H.method=B,ht(t)}c=[new nt(0,0,0,0,function(t,P){var B=65535;for(B>t.pending_buf_size-5&&(B=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ct(t),t.lookahead===0&&P===f)return s;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var y=t.block_start+B;if((t.strstart===0||t.strstart>=y)&&(t.lookahead=t.strstart-y,t.strstart=y,I(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-M&&(I(t,!1),t.strm.avail_out===0))return s}return t.insert=0,P===k?(I(t,!0),t.strm.avail_out===0?it:D):(t.strstart>t.block_start&&(I(t,!1),t.strm.avail_out),s)}),new nt(4,4,8,4,ft),new nt(4,5,16,8,ft),new nt(4,6,32,32,ft),new nt(4,4,16,16,tt),new nt(8,16,32,32,tt),new nt(8,16,128,128,tt),new nt(8,32,128,256,tt),new nt(32,128,258,1024,tt),new nt(32,258,258,4096,tt)],u.deflateInit=function(t,P){return ut(t,P,x,15,8,0)},u.deflateInit2=ut,u.deflateReset=ht,u.deflateResetKeep=et,u.deflateSetHeader=function(t,P){return t&&t.state?t.state.wrap!==2?b:(t.state.gzhead=P,h):b},u.deflate=function(t,P){var B,y,d,E;if(!t||!t.state||5<P||P<0)return t?st(t,b):b;if(y=t.state,!t.output||!t.input&&t.avail_in!==0||y.status===666&&P!==k)return st(t,t.avail_out===0?-5:b);if(y.strm=t,B=y.last_flush,y.last_flush=P,y.status===v)if(y.wrap===2)t.adler=0,V(y,31),V(y,139),V(y,8),y.gzhead?(V(y,(y.gzhead.text?1:0)+(y.gzhead.hcrc?2:0)+(y.gzhead.extra?4:0)+(y.gzhead.name?8:0)+(y.gzhead.comment?16:0)),V(y,255&y.gzhead.time),V(y,y.gzhead.time>>8&255),V(y,y.gzhead.time>>16&255),V(y,y.gzhead.time>>24&255),V(y,y.level===9?2:2<=y.strategy||y.level<2?4:0),V(y,255&y.gzhead.os),y.gzhead.extra&&y.gzhead.extra.length&&(V(y,255&y.gzhead.extra.length),V(y,y.gzhead.extra.length>>8&255)),y.gzhead.hcrc&&(t.adler=l(t.adler,y.pending_buf,y.pending,0)),y.gzindex=0,y.status=69):(V(y,0),V(y,0),V(y,0),V(y,0),V(y,0),V(y,y.level===9?2:2<=y.strategy||y.level<2?4:0),V(y,3),y.status=O);else{var Z=x+(y.w_bits-8<<4)<<8;Z|=(2<=y.strategy||y.level<2?0:y.level<6?1:y.level===6?2:3)<<6,y.strstart!==0&&(Z|=32),Z+=31-Z%31,y.status=O,Y(y,Z),y.strstart!==0&&(Y(y,t.adler>>>16),Y(y,65535&t.adler)),t.adler=1}if(y.status===69)if(y.gzhead.extra){for(d=y.pending;y.gzindex<(65535&y.gzhead.extra.length)&&(y.pending!==y.pending_buf_size||(y.gzhead.hcrc&&y.pending>d&&(t.adler=l(t.adler,y.pending_buf,y.pending-d,d)),N(t),d=y.pending,y.pending!==y.pending_buf_size));)V(y,255&y.gzhead.extra[y.gzindex]),y.gzindex++;y.gzhead.hcrc&&y.pending>d&&(t.adler=l(t.adler,y.pending_buf,y.pending-d,d)),y.gzindex===y.gzhead.extra.length&&(y.gzindex=0,y.status=73)}else y.status=73;if(y.status===73)if(y.gzhead.name){d=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>d&&(t.adler=l(t.adler,y.pending_buf,y.pending-d,d)),N(t),d=y.pending,y.pending===y.pending_buf_size)){E=1;break}E=y.gzindex<y.gzhead.name.length?255&y.gzhead.name.charCodeAt(y.gzindex++):0,V(y,E)}while(E!==0);y.gzhead.hcrc&&y.pending>d&&(t.adler=l(t.adler,y.pending_buf,y.pending-d,d)),E===0&&(y.gzindex=0,y.status=91)}else y.status=91;if(y.status===91)if(y.gzhead.comment){d=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>d&&(t.adler=l(t.adler,y.pending_buf,y.pending-d,d)),N(t),d=y.pending,y.pending===y.pending_buf_size)){E=1;break}E=y.gzindex<y.gzhead.comment.length?255&y.gzhead.comment.charCodeAt(y.gzindex++):0,V(y,E)}while(E!==0);y.gzhead.hcrc&&y.pending>d&&(t.adler=l(t.adler,y.pending_buf,y.pending-d,d)),E===0&&(y.status=103)}else y.status=103;if(y.status===103&&(y.gzhead.hcrc?(y.pending+2>y.pending_buf_size&&N(t),y.pending+2<=y.pending_buf_size&&(V(y,255&t.adler),V(y,t.adler>>8&255),t.adler=0,y.status=O)):y.status=O),y.pending!==0){if(N(t),t.avail_out===0)return y.last_flush=-1,h}else if(t.avail_in===0&&F(P)<=F(B)&&P!==k)return st(t,-5);if(y.status===666&&t.avail_in!==0)return st(t,-5);if(t.avail_in!==0||y.lookahead!==0||P!==f&&y.status!==666){var H=y.strategy===2?function(L,K){for(var J;;){if(L.lookahead===0&&(ct(L),L.lookahead===0)){if(K===f)return s;break}if(L.match_length=0,J=n._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++,J&&(I(L,!1),L.strm.avail_out===0))return s}return L.insert=0,K===k?(I(L,!0),L.strm.avail_out===0?it:D):L.last_lit&&(I(L,!1),L.strm.avail_out===0)?s:G}(y,P):y.strategy===3?function(L,K){for(var J,$,Q,lt,at=L.window;;){if(L.lookahead<=C){if(ct(L),L.lookahead<=C&&K===f)return s;if(L.lookahead===0)break}if(L.match_length=0,L.lookahead>=m&&0<L.strstart&&($=at[Q=L.strstart-1])===at[++Q]&&$===at[++Q]&&$===at[++Q]){lt=L.strstart+C;do;while($===at[++Q]&&$===at[++Q]&&$===at[++Q]&&$===at[++Q]&&$===at[++Q]&&$===at[++Q]&&$===at[++Q]&&$===at[++Q]&&Q<lt);L.match_length=C-(lt-Q),L.match_length>L.lookahead&&(L.match_length=L.lookahead)}if(L.match_length>=m?(J=n._tr_tally(L,1,L.match_length-m),L.lookahead-=L.match_length,L.strstart+=L.match_length,L.match_length=0):(J=n._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++),J&&(I(L,!1),L.strm.avail_out===0))return s}return L.insert=0,K===k?(I(L,!0),L.strm.avail_out===0?it:D):L.last_lit&&(I(L,!1),L.strm.avail_out===0)?s:G}(y,P):c[y.level].func(y,P);if(H!==it&&H!==D||(y.status=666),H===s||H===it)return t.avail_out===0&&(y.last_flush=-1),h;if(H===G&&(P===1?n._tr_align(y):P!==5&&(n._tr_stored_block(y,0,0,!1),P===3&&(rt(y.head),y.lookahead===0&&(y.strstart=0,y.block_start=0,y.insert=0))),N(t),t.avail_out===0))return y.last_flush=-1,h}return P!==k?h:y.wrap<=0?1:(y.wrap===2?(V(y,255&t.adler),V(y,t.adler>>8&255),V(y,t.adler>>16&255),V(y,t.adler>>24&255),V(y,255&t.total_in),V(y,t.total_in>>8&255),V(y,t.total_in>>16&255),V(y,t.total_in>>24&255)):(Y(y,t.adler>>>16),Y(y,65535&t.adler)),N(t),0<y.wrap&&(y.wrap=-y.wrap),y.pending!==0?h:1)},u.deflateEnd=function(t){var P;return t&&t.state?(P=t.state.status)!==v&&P!==69&&P!==73&&P!==91&&P!==103&&P!==O&&P!==666?st(t,b):(t.state=null,P===O?st(t,-3):h):b},u.deflateSetDictionary=function(t,P){var B,y,d,E,Z,H,L,K,J=P.length;if(!t||!t.state||(E=(B=t.state).wrap)===2||E===1&&B.status!==v||B.lookahead)return b;for(E===1&&(t.adler=a(t.adler,P,J,0)),B.wrap=0,J>=B.w_size&&(E===0&&(rt(B.head),B.strstart=0,B.block_start=0,B.insert=0),K=new r.Buf8(B.w_size),r.arraySet(K,P,J-B.w_size,B.w_size,0),P=K,J=B.w_size),Z=t.avail_in,H=t.next_in,L=t.input,t.avail_in=J,t.next_in=0,t.input=P,ct(B);B.lookahead>=m;){for(y=B.strstart,d=B.lookahead-(m-1);B.ins_h=(B.ins_h<<B.hash_shift^B.window[y+m-1])&B.hash_mask,B.prev[y&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=y,y++,--d;);B.strstart=y,B.lookahead=m-1,ct(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=m-1,B.match_available=0,t.next_in=H,t.input=L,t.avail_in=Z,B.wrap=E,h},u.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(o,S,u){S.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(o,S,u){S.exports=function(c,r){var n,a,l,_,f,k,h,b,i,g,p,x,j,T,A,U,z,w,m,C,M,v,O,s,G;n=c.state,a=c.next_in,s=c.input,l=a+(c.avail_in-5),_=c.next_out,G=c.output,f=_-(r-c.avail_out),k=_+(c.avail_out-257),h=n.dmax,b=n.wsize,i=n.whave,g=n.wnext,p=n.window,x=n.hold,j=n.bits,T=n.lencode,A=n.distcode,U=(1<<n.lenbits)-1,z=(1<<n.distbits)-1;t:do{j<15&&(x+=s[a++]<<j,j+=8,x+=s[a++]<<j,j+=8),w=T[x&U];e:for(;;){if(x>>>=m=w>>>24,j-=m,(m=w>>>16&255)===0)G[_++]=65535&w;else{if(!(16&m)){if(!(64&m)){w=T[(65535&w)+(x&(1<<m)-1)];continue e}if(32&m){n.mode=12;break t}c.msg="invalid literal/length code",n.mode=30;break t}C=65535&w,(m&=15)&&(j<m&&(x+=s[a++]<<j,j+=8),C+=x&(1<<m)-1,x>>>=m,j-=m),j<15&&(x+=s[a++]<<j,j+=8,x+=s[a++]<<j,j+=8),w=A[x&z];r:for(;;){if(x>>>=m=w>>>24,j-=m,!(16&(m=w>>>16&255))){if(!(64&m)){w=A[(65535&w)+(x&(1<<m)-1)];continue r}c.msg="invalid distance code",n.mode=30;break t}if(M=65535&w,j<(m&=15)&&(x+=s[a++]<<j,(j+=8)<m&&(x+=s[a++]<<j,j+=8)),h<(M+=x&(1<<m)-1)){c.msg="invalid distance too far back",n.mode=30;break t}if(x>>>=m,j-=m,(m=_-f)<M){if(i<(m=M-m)&&n.sane){c.msg="invalid distance too far back",n.mode=30;break t}if(O=p,(v=0)===g){if(v+=b-m,m<C){for(C-=m;G[_++]=p[v++],--m;);v=_-M,O=G}}else if(g<m){if(v+=b+g-m,(m-=g)<C){for(C-=m;G[_++]=p[v++],--m;);if(v=0,g<C){for(C-=m=g;G[_++]=p[v++],--m;);v=_-M,O=G}}}else if(v+=g-m,m<C){for(C-=m;G[_++]=p[v++],--m;);v=_-M,O=G}for(;2<C;)G[_++]=O[v++],G[_++]=O[v++],G[_++]=O[v++],C-=3;C&&(G[_++]=O[v++],1<C&&(G[_++]=O[v++]))}else{for(v=_-M;G[_++]=G[v++],G[_++]=G[v++],G[_++]=G[v++],2<(C-=3););C&&(G[_++]=G[v++],1<C&&(G[_++]=G[v++]))}break}}break}}while(a<l&&_<k);a-=C=j>>3,x&=(1<<(j-=C<<3))-1,c.next_in=a,c.next_out=_,c.avail_in=a<l?l-a+5:5-(a-l),c.avail_out=_<k?k-_+257:257-(_-k),n.hold=x,n.bits=j}},{}],49:[function(o,S,u){var c=o("../utils/common"),r=o("./adler32"),n=o("./crc32"),a=o("./inffast"),l=o("./inftrees"),_=1,f=2,k=0,h=-2,b=1,i=852,g=592;function p(v){return(v>>>24&255)+(v>>>8&65280)+((65280&v)<<8)+((255&v)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(v){var O;return v&&v.state?(O=v.state,v.total_in=v.total_out=O.total=0,v.msg="",O.wrap&&(v.adler=1&O.wrap),O.mode=b,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new c.Buf32(i),O.distcode=O.distdyn=new c.Buf32(g),O.sane=1,O.back=-1,k):h}function T(v){var O;return v&&v.state?((O=v.state).wsize=0,O.whave=0,O.wnext=0,j(v)):h}function A(v,O){var s,G;return v&&v.state?(G=v.state,O<0?(s=0,O=-O):(s=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?h:(G.window!==null&&G.wbits!==O&&(G.window=null),G.wrap=s,G.wbits=O,T(v))):h}function U(v,O){var s,G;return v?(G=new x,(v.state=G).window=null,(s=A(v,O))!==k&&(v.state=null),s):h}var z,w,m=!0;function C(v){if(m){var O;for(z=new c.Buf32(512),w=new c.Buf32(32),O=0;O<144;)v.lens[O++]=8;for(;O<256;)v.lens[O++]=9;for(;O<280;)v.lens[O++]=7;for(;O<288;)v.lens[O++]=8;for(l(_,v.lens,0,288,z,0,v.work,{bits:9}),O=0;O<32;)v.lens[O++]=5;l(f,v.lens,0,32,w,0,v.work,{bits:5}),m=!1}v.lencode=z,v.lenbits=9,v.distcode=w,v.distbits=5}function M(v,O,s,G){var it,D=v.state;return D.window===null&&(D.wsize=1<<D.wbits,D.wnext=0,D.whave=0,D.window=new c.Buf8(D.wsize)),G>=D.wsize?(c.arraySet(D.window,O,s-D.wsize,D.wsize,0),D.wnext=0,D.whave=D.wsize):(G<(it=D.wsize-D.wnext)&&(it=G),c.arraySet(D.window,O,s-G,it,D.wnext),(G-=it)?(c.arraySet(D.window,O,s-G,G,0),D.wnext=G,D.whave=D.wsize):(D.wnext+=it,D.wnext===D.wsize&&(D.wnext=0),D.whave<D.wsize&&(D.whave+=it))),0}u.inflateReset=T,u.inflateReset2=A,u.inflateResetKeep=j,u.inflateInit=function(v){return U(v,15)},u.inflateInit2=U,u.inflate=function(v,O){var s,G,it,D,st,F,rt,N,I,V,Y,q,ct,ft,tt,nt,ot,et,ht,ut,t,P,B,y,d=0,E=new c.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!v||!v.state||!v.output||!v.input&&v.avail_in!==0)return h;(s=v.state).mode===12&&(s.mode=13),st=v.next_out,it=v.output,rt=v.avail_out,D=v.next_in,G=v.input,F=v.avail_in,N=s.hold,I=s.bits,V=F,Y=rt,P=k;t:for(;;)switch(s.mode){case b:if(s.wrap===0){s.mode=13;break}for(;I<16;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}if(2&s.wrap&&N===35615){E[s.check=0]=255&N,E[1]=N>>>8&255,s.check=n(s.check,E,2,0),I=N=0,s.mode=2;break}if(s.flags=0,s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&N)<<8)+(N>>8))%31){v.msg="incorrect header check",s.mode=30;break}if((15&N)!=8){v.msg="unknown compression method",s.mode=30;break}if(I-=4,t=8+(15&(N>>>=4)),s.wbits===0)s.wbits=t;else if(t>s.wbits){v.msg="invalid window size",s.mode=30;break}s.dmax=1<<t,v.adler=s.check=1,s.mode=512&N?10:12,I=N=0;break;case 2:for(;I<16;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}if(s.flags=N,(255&s.flags)!=8){v.msg="unknown compression method",s.mode=30;break}if(57344&s.flags){v.msg="unknown header flags set",s.mode=30;break}s.head&&(s.head.text=N>>8&1),512&s.flags&&(E[0]=255&N,E[1]=N>>>8&255,s.check=n(s.check,E,2,0)),I=N=0,s.mode=3;case 3:for(;I<32;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}s.head&&(s.head.time=N),512&s.flags&&(E[0]=255&N,E[1]=N>>>8&255,E[2]=N>>>16&255,E[3]=N>>>24&255,s.check=n(s.check,E,4,0)),I=N=0,s.mode=4;case 4:for(;I<16;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}s.head&&(s.head.xflags=255&N,s.head.os=N>>8),512&s.flags&&(E[0]=255&N,E[1]=N>>>8&255,s.check=n(s.check,E,2,0)),I=N=0,s.mode=5;case 5:if(1024&s.flags){for(;I<16;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}s.length=N,s.head&&(s.head.extra_len=N),512&s.flags&&(E[0]=255&N,E[1]=N>>>8&255,s.check=n(s.check,E,2,0)),I=N=0}else s.head&&(s.head.extra=null);s.mode=6;case 6:if(1024&s.flags&&(F<(q=s.length)&&(q=F),q&&(s.head&&(t=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Array(s.head.extra_len)),c.arraySet(s.head.extra,G,D,q,t)),512&s.flags&&(s.check=n(s.check,G,q,D)),F-=q,D+=q,s.length-=q),s.length))break t;s.length=0,s.mode=7;case 7:if(2048&s.flags){if(F===0)break t;for(q=0;t=G[D+q++],s.head&&t&&s.length<65536&&(s.head.name+=String.fromCharCode(t)),t&&q<F;);if(512&s.flags&&(s.check=n(s.check,G,q,D)),F-=q,D+=q,t)break t}else s.head&&(s.head.name=null);s.length=0,s.mode=8;case 8:if(4096&s.flags){if(F===0)break t;for(q=0;t=G[D+q++],s.head&&t&&s.length<65536&&(s.head.comment+=String.fromCharCode(t)),t&&q<F;);if(512&s.flags&&(s.check=n(s.check,G,q,D)),F-=q,D+=q,t)break t}else s.head&&(s.head.comment=null);s.mode=9;case 9:if(512&s.flags){for(;I<16;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}if(N!==(65535&s.check)){v.msg="header crc mismatch",s.mode=30;break}I=N=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),v.adler=s.check=0,s.mode=12;break;case 10:for(;I<32;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}v.adler=s.check=p(N),I=N=0,s.mode=11;case 11:if(s.havedict===0)return v.next_out=st,v.avail_out=rt,v.next_in=D,v.avail_in=F,s.hold=N,s.bits=I,2;v.adler=s.check=1,s.mode=12;case 12:if(O===5||O===6)break t;case 13:if(s.last){N>>>=7&I,I-=7&I,s.mode=27;break}for(;I<3;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}switch(s.last=1&N,I-=1,3&(N>>>=1)){case 0:s.mode=14;break;case 1:if(C(s),s.mode=20,O!==6)break;N>>>=2,I-=2;break t;case 2:s.mode=17;break;case 3:v.msg="invalid block type",s.mode=30}N>>>=2,I-=2;break;case 14:for(N>>>=7&I,I-=7&I;I<32;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}if((65535&N)!=(N>>>16^65535)){v.msg="invalid stored block lengths",s.mode=30;break}if(s.length=65535&N,I=N=0,s.mode=15,O===6)break t;case 15:s.mode=16;case 16:if(q=s.length){if(F<q&&(q=F),rt<q&&(q=rt),q===0)break t;c.arraySet(it,G,D,q,st),F-=q,D+=q,rt-=q,st+=q,s.length-=q;break}s.mode=12;break;case 17:for(;I<14;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}if(s.nlen=257+(31&N),N>>>=5,I-=5,s.ndist=1+(31&N),N>>>=5,I-=5,s.ncode=4+(15&N),N>>>=4,I-=4,286<s.nlen||30<s.ndist){v.msg="too many length or distance symbols",s.mode=30;break}s.have=0,s.mode=18;case 18:for(;s.have<s.ncode;){for(;I<3;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}s.lens[Z[s.have++]]=7&N,N>>>=3,I-=3}for(;s.have<19;)s.lens[Z[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,B={bits:s.lenbits},P=l(0,s.lens,0,19,s.lencode,0,s.work,B),s.lenbits=B.bits,P){v.msg="invalid code lengths set",s.mode=30;break}s.have=0,s.mode=19;case 19:for(;s.have<s.nlen+s.ndist;){for(;nt=(d=s.lencode[N&(1<<s.lenbits)-1])>>>16&255,ot=65535&d,!((tt=d>>>24)<=I);){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}if(ot<16)N>>>=tt,I-=tt,s.lens[s.have++]=ot;else{if(ot===16){for(y=tt+2;I<y;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}if(N>>>=tt,I-=tt,s.have===0){v.msg="invalid bit length repeat",s.mode=30;break}t=s.lens[s.have-1],q=3+(3&N),N>>>=2,I-=2}else if(ot===17){for(y=tt+3;I<y;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}I-=tt,t=0,q=3+(7&(N>>>=tt)),N>>>=3,I-=3}else{for(y=tt+7;I<y;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}I-=tt,t=0,q=11+(127&(N>>>=tt)),N>>>=7,I-=7}if(s.have+q>s.nlen+s.ndist){v.msg="invalid bit length repeat",s.mode=30;break}for(;q--;)s.lens[s.have++]=t}}if(s.mode===30)break;if(s.lens[256]===0){v.msg="invalid code -- missing end-of-block",s.mode=30;break}if(s.lenbits=9,B={bits:s.lenbits},P=l(_,s.lens,0,s.nlen,s.lencode,0,s.work,B),s.lenbits=B.bits,P){v.msg="invalid literal/lengths set",s.mode=30;break}if(s.distbits=6,s.distcode=s.distdyn,B={bits:s.distbits},P=l(f,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,B),s.distbits=B.bits,P){v.msg="invalid distances set",s.mode=30;break}if(s.mode=20,O===6)break t;case 20:s.mode=21;case 21:if(6<=F&&258<=rt){v.next_out=st,v.avail_out=rt,v.next_in=D,v.avail_in=F,s.hold=N,s.bits=I,a(v,Y),st=v.next_out,it=v.output,rt=v.avail_out,D=v.next_in,G=v.input,F=v.avail_in,N=s.hold,I=s.bits,s.mode===12&&(s.back=-1);break}for(s.back=0;nt=(d=s.lencode[N&(1<<s.lenbits)-1])>>>16&255,ot=65535&d,!((tt=d>>>24)<=I);){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}if(nt&&!(240&nt)){for(et=tt,ht=nt,ut=ot;nt=(d=s.lencode[ut+((N&(1<<et+ht)-1)>>et)])>>>16&255,ot=65535&d,!(et+(tt=d>>>24)<=I);){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}N>>>=et,I-=et,s.back+=et}if(N>>>=tt,I-=tt,s.back+=tt,s.length=ot,nt===0){s.mode=26;break}if(32&nt){s.back=-1,s.mode=12;break}if(64&nt){v.msg="invalid literal/length code",s.mode=30;break}s.extra=15&nt,s.mode=22;case 22:if(s.extra){for(y=s.extra;I<y;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}s.length+=N&(1<<s.extra)-1,N>>>=s.extra,I-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=23;case 23:for(;nt=(d=s.distcode[N&(1<<s.distbits)-1])>>>16&255,ot=65535&d,!((tt=d>>>24)<=I);){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}if(!(240&nt)){for(et=tt,ht=nt,ut=ot;nt=(d=s.distcode[ut+((N&(1<<et+ht)-1)>>et)])>>>16&255,ot=65535&d,!(et+(tt=d>>>24)<=I);){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}N>>>=et,I-=et,s.back+=et}if(N>>>=tt,I-=tt,s.back+=tt,64&nt){v.msg="invalid distance code",s.mode=30;break}s.offset=ot,s.extra=15&nt,s.mode=24;case 24:if(s.extra){for(y=s.extra;I<y;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}s.offset+=N&(1<<s.extra)-1,N>>>=s.extra,I-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){v.msg="invalid distance too far back",s.mode=30;break}s.mode=25;case 25:if(rt===0)break t;if(q=Y-rt,s.offset>q){if((q=s.offset-q)>s.whave&&s.sane){v.msg="invalid distance too far back",s.mode=30;break}ct=q>s.wnext?(q-=s.wnext,s.wsize-q):s.wnext-q,q>s.length&&(q=s.length),ft=s.window}else ft=it,ct=st-s.offset,q=s.length;for(rt<q&&(q=rt),rt-=q,s.length-=q;it[st++]=ft[ct++],--q;);s.length===0&&(s.mode=21);break;case 26:if(rt===0)break t;it[st++]=s.length,rt--,s.mode=21;break;case 27:if(s.wrap){for(;I<32;){if(F===0)break t;F--,N|=G[D++]<<I,I+=8}if(Y-=rt,v.total_out+=Y,s.total+=Y,Y&&(v.adler=s.check=s.flags?n(s.check,it,Y,st-Y):r(s.check,it,Y,st-Y)),Y=rt,(s.flags?N:p(N))!==s.check){v.msg="incorrect data check",s.mode=30;break}I=N=0}s.mode=28;case 28:if(s.wrap&&s.flags){for(;I<32;){if(F===0)break t;F--,N+=G[D++]<<I,I+=8}if(N!==(4294967295&s.total)){v.msg="incorrect length check",s.mode=30;break}I=N=0}s.mode=29;case 29:P=1;break t;case 30:P=-3;break t;case 31:return-4;case 32:default:return h}return v.next_out=st,v.avail_out=rt,v.next_in=D,v.avail_in=F,s.hold=N,s.bits=I,(s.wsize||Y!==v.avail_out&&s.mode<30&&(s.mode<27||O!==4))&&M(v,v.output,v.next_out,Y-v.avail_out)?(s.mode=31,-4):(V-=v.avail_in,Y-=v.avail_out,v.total_in+=V,v.total_out+=Y,s.total+=Y,s.wrap&&Y&&(v.adler=s.check=s.flags?n(s.check,it,Y,v.next_out-Y):r(s.check,it,Y,v.next_out-Y)),v.data_type=s.bits+(s.last?64:0)+(s.mode===12?128:0)+(s.mode===20||s.mode===15?256:0),(V==0&&Y===0||O===4)&&P===k&&(P=-5),P)},u.inflateEnd=function(v){if(!v||!v.state)return h;var O=v.state;return O.window&&(O.window=null),v.state=null,k},u.inflateGetHeader=function(v,O){var s;return v&&v.state&&2&(s=v.state).wrap?((s.head=O).done=!1,k):h},u.inflateSetDictionary=function(v,O){var s,G=O.length;return v&&v.state?(s=v.state).wrap!==0&&s.mode!==11?h:s.mode===11&&r(1,O,G,0)!==s.check?-3:M(v,O,G,G)?(s.mode=31,-4):(s.havedict=1,k):h},u.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(o,S,u){var c=o("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];S.exports=function(_,f,k,h,b,i,g,p){var x,j,T,A,U,z,w,m,C,M=p.bits,v=0,O=0,s=0,G=0,it=0,D=0,st=0,F=0,rt=0,N=0,I=null,V=0,Y=new c.Buf16(16),q=new c.Buf16(16),ct=null,ft=0;for(v=0;v<=15;v++)Y[v]=0;for(O=0;O<h;O++)Y[f[k+O]]++;for(it=M,G=15;1<=G&&Y[G]===0;G--);if(G<it&&(it=G),G===0)return b[i++]=20971520,b[i++]=20971520,p.bits=1,0;for(s=1;s<G&&Y[s]===0;s++);for(it<s&&(it=s),v=F=1;v<=15;v++)if(F<<=1,(F-=Y[v])<0)return-1;if(0<F&&(_===0||G!==1))return-1;for(q[1]=0,v=1;v<15;v++)q[v+1]=q[v]+Y[v];for(O=0;O<h;O++)f[k+O]!==0&&(g[q[f[k+O]]++]=O);if(z=_===0?(I=ct=g,19):_===1?(I=r,V-=257,ct=n,ft-=257,256):(I=a,ct=l,-1),v=s,U=i,st=O=N=0,T=-1,A=(rt=1<<(D=it))-1,_===1&&852<rt||_===2&&592<rt)return 1;for(;;){for(w=v-st,C=g[O]<z?(m=0,g[O]):g[O]>z?(m=ct[ft+g[O]],I[V+g[O]]):(m=96,0),x=1<<v-st,s=j=1<<D;b[U+(N>>st)+(j-=x)]=w<<24|m<<16|C|0,j!==0;);for(x=1<<v-1;N&x;)x>>=1;if(x!==0?(N&=x-1,N+=x):N=0,O++,--Y[v]==0){if(v===G)break;v=f[k+g[O]]}if(it<v&&(N&A)!==T){for(st===0&&(st=it),U+=s,F=1<<(D=v-st);D+st<G&&!((F-=Y[D+st])<=0);)D++,F<<=1;if(rt+=1<<D,_===1&&852<rt||_===2&&592<rt)return 1;b[T=N&A]=it<<24|D<<16|U-i|0}}return N!==0&&(b[U+N]=v-st<<24|64<<16|0),p.bits=it,0}},{"../utils/common":41}],51:[function(o,S,u){S.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(o,S,u){var c=o("../utils/common"),r=0,n=1;function a(d){for(var E=d.length;0<=--E;)d[E]=0}var l=0,_=29,f=256,k=f+1+_,h=30,b=19,i=2*k+1,g=15,p=16,x=7,j=256,T=16,A=17,U=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=new Array(2*(k+2));a(M);var v=new Array(2*h);a(v);var O=new Array(512);a(O);var s=new Array(256);a(s);var G=new Array(_);a(G);var it,D,st,F=new Array(h);function rt(d,E,Z,H,L){this.static_tree=d,this.extra_bits=E,this.extra_base=Z,this.elems=H,this.max_length=L,this.has_stree=d&&d.length}function N(d,E){this.dyn_tree=d,this.max_code=0,this.stat_desc=E}function I(d){return d<256?O[d]:O[256+(d>>>7)]}function V(d,E){d.pending_buf[d.pending++]=255&E,d.pending_buf[d.pending++]=E>>>8&255}function Y(d,E,Z){d.bi_valid>p-Z?(d.bi_buf|=E<<d.bi_valid&65535,V(d,d.bi_buf),d.bi_buf=E>>p-d.bi_valid,d.bi_valid+=Z-p):(d.bi_buf|=E<<d.bi_valid&65535,d.bi_valid+=Z)}function q(d,E,Z){Y(d,Z[2*E],Z[2*E+1])}function ct(d,E){for(var Z=0;Z|=1&d,d>>>=1,Z<<=1,0<--E;);return Z>>>1}function ft(d,E,Z){var H,L,K=new Array(g+1),J=0;for(H=1;H<=g;H++)K[H]=J=J+Z[H-1]<<1;for(L=0;L<=E;L++){var $=d[2*L+1];$!==0&&(d[2*L]=ct(K[$]++,$))}}function tt(d){var E;for(E=0;E<k;E++)d.dyn_ltree[2*E]=0;for(E=0;E<h;E++)d.dyn_dtree[2*E]=0;for(E=0;E<b;E++)d.bl_tree[2*E]=0;d.dyn_ltree[2*j]=1,d.opt_len=d.static_len=0,d.last_lit=d.matches=0}function nt(d){8<d.bi_valid?V(d,d.bi_buf):0<d.bi_valid&&(d.pending_buf[d.pending++]=d.bi_buf),d.bi_buf=0,d.bi_valid=0}function ot(d,E,Z,H){var L=2*E,K=2*Z;return d[L]<d[K]||d[L]===d[K]&&H[E]<=H[Z]}function et(d,E,Z){for(var H=d.heap[Z],L=Z<<1;L<=d.heap_len&&(L<d.heap_len&&ot(E,d.heap[L+1],d.heap[L],d.depth)&&L++,!ot(E,H,d.heap[L],d.depth));)d.heap[Z]=d.heap[L],Z=L,L<<=1;d.heap[Z]=H}function ht(d,E,Z){var H,L,K,J,$=0;if(d.last_lit!==0)for(;H=d.pending_buf[d.d_buf+2*$]<<8|d.pending_buf[d.d_buf+2*$+1],L=d.pending_buf[d.l_buf+$],$++,H===0?q(d,L,E):(q(d,(K=s[L])+f+1,E),(J=z[K])!==0&&Y(d,L-=G[K],J),q(d,K=I(--H),Z),(J=w[K])!==0&&Y(d,H-=F[K],J)),$<d.last_lit;);q(d,j,E)}function ut(d,E){var Z,H,L,K=E.dyn_tree,J=E.stat_desc.static_tree,$=E.stat_desc.has_stree,Q=E.stat_desc.elems,lt=-1;for(d.heap_len=0,d.heap_max=i,Z=0;Z<Q;Z++)K[2*Z]!==0?(d.heap[++d.heap_len]=lt=Z,d.depth[Z]=0):K[2*Z+1]=0;for(;d.heap_len<2;)K[2*(L=d.heap[++d.heap_len]=lt<2?++lt:0)]=1,d.depth[L]=0,d.opt_len--,$&&(d.static_len-=J[2*L+1]);for(E.max_code=lt,Z=d.heap_len>>1;1<=Z;Z--)et(d,K,Z);for(L=Q;Z=d.heap[1],d.heap[1]=d.heap[d.heap_len--],et(d,K,1),H=d.heap[1],d.heap[--d.heap_max]=Z,d.heap[--d.heap_max]=H,K[2*L]=K[2*Z]+K[2*H],d.depth[L]=(d.depth[Z]>=d.depth[H]?d.depth[Z]:d.depth[H])+1,K[2*Z+1]=K[2*H+1]=L,d.heap[1]=L++,et(d,K,1),2<=d.heap_len;);d.heap[--d.heap_max]=d.heap[1],function(at,bt){var xt,gt,_t,pt,kt,Dt,wt=bt.dyn_tree,Vt=bt.max_code,_e=bt.stat_desc.static_tree,ve=bt.stat_desc.has_stree,we=bt.stat_desc.extra_bits,qt=bt.stat_desc.extra_base,Ct=bt.stat_desc.max_length,It=0;for(pt=0;pt<=g;pt++)at.bl_count[pt]=0;for(wt[2*at.heap[at.heap_max]+1]=0,xt=at.heap_max+1;xt<i;xt++)Ct<(pt=wt[2*wt[2*(gt=at.heap[xt])+1]+1]+1)&&(pt=Ct,It++),wt[2*gt+1]=pt,Vt<gt||(at.bl_count[pt]++,kt=0,qt<=gt&&(kt=we[gt-qt]),Dt=wt[2*gt],at.opt_len+=Dt*(pt+kt),ve&&(at.static_len+=Dt*(_e[2*gt+1]+kt)));if(It!==0){do{for(pt=Ct-1;at.bl_count[pt]===0;)pt--;at.bl_count[pt]--,at.bl_count[pt+1]+=2,at.bl_count[Ct]--,It-=2}while(0<It);for(pt=Ct;pt!==0;pt--)for(gt=at.bl_count[pt];gt!==0;)Vt<(_t=at.heap[--xt])||(wt[2*_t+1]!==pt&&(at.opt_len+=(pt-wt[2*_t+1])*wt[2*_t],wt[2*_t+1]=pt),gt--)}}(d,E),ft(K,lt,d.bl_count)}function t(d,E,Z){var H,L,K=-1,J=E[1],$=0,Q=7,lt=4;for(J===0&&(Q=138,lt=3),E[2*(Z+1)+1]=65535,H=0;H<=Z;H++)L=J,J=E[2*(H+1)+1],++$<Q&&L===J||($<lt?d.bl_tree[2*L]+=$:L!==0?(L!==K&&d.bl_tree[2*L]++,d.bl_tree[2*T]++):$<=10?d.bl_tree[2*A]++:d.bl_tree[2*U]++,K=L,lt=($=0)===J?(Q=138,3):L===J?(Q=6,3):(Q=7,4))}function P(d,E,Z){var H,L,K=-1,J=E[1],$=0,Q=7,lt=4;for(J===0&&(Q=138,lt=3),H=0;H<=Z;H++)if(L=J,J=E[2*(H+1)+1],!(++$<Q&&L===J)){if($<lt)for(;q(d,L,d.bl_tree),--$!=0;);else L!==0?(L!==K&&(q(d,L,d.bl_tree),$--),q(d,T,d.bl_tree),Y(d,$-3,2)):$<=10?(q(d,A,d.bl_tree),Y(d,$-3,3)):(q(d,U,d.bl_tree),Y(d,$-11,7));K=L,lt=($=0)===J?(Q=138,3):L===J?(Q=6,3):(Q=7,4)}}a(F);var B=!1;function y(d,E,Z,H){Y(d,(l<<1)+(H?1:0),3),function(L,K,J,$){nt(L),V(L,J),V(L,~J),c.arraySet(L.pending_buf,L.window,K,J,L.pending),L.pending+=J}(d,E,Z)}u._tr_init=function(d){B||(function(){var E,Z,H,L,K,J=new Array(g+1);for(L=H=0;L<_-1;L++)for(G[L]=H,E=0;E<1<<z[L];E++)s[H++]=L;for(s[H-1]=L,L=K=0;L<16;L++)for(F[L]=K,E=0;E<1<<w[L];E++)O[K++]=L;for(K>>=7;L<h;L++)for(F[L]=K<<7,E=0;E<1<<w[L]-7;E++)O[256+K++]=L;for(Z=0;Z<=g;Z++)J[Z]=0;for(E=0;E<=143;)M[2*E+1]=8,E++,J[8]++;for(;E<=255;)M[2*E+1]=9,E++,J[9]++;for(;E<=279;)M[2*E+1]=7,E++,J[7]++;for(;E<=287;)M[2*E+1]=8,E++,J[8]++;for(ft(M,k+1,J),E=0;E<h;E++)v[2*E+1]=5,v[2*E]=ct(E,5);it=new rt(M,z,f+1,k,g),D=new rt(v,w,0,h,g),st=new rt(new Array(0),m,0,b,x)}(),B=!0),d.l_desc=new N(d.dyn_ltree,it),d.d_desc=new N(d.dyn_dtree,D),d.bl_desc=new N(d.bl_tree,st),d.bi_buf=0,d.bi_valid=0,tt(d)},u._tr_stored_block=y,u._tr_flush_block=function(d,E,Z,H){var L,K,J=0;0<d.level?(d.strm.data_type===2&&(d.strm.data_type=function($){var Q,lt=4093624447;for(Q=0;Q<=31;Q++,lt>>>=1)if(1&lt&&$.dyn_ltree[2*Q]!==0)return r;if($.dyn_ltree[18]!==0||$.dyn_ltree[20]!==0||$.dyn_ltree[26]!==0)return n;for(Q=32;Q<f;Q++)if($.dyn_ltree[2*Q]!==0)return n;return r}(d)),ut(d,d.l_desc),ut(d,d.d_desc),J=function($){var Q;for(t($,$.dyn_ltree,$.l_desc.max_code),t($,$.dyn_dtree,$.d_desc.max_code),ut($,$.bl_desc),Q=b-1;3<=Q&&$.bl_tree[2*C[Q]+1]===0;Q--);return $.opt_len+=3*(Q+1)+5+5+4,Q}(d),L=d.opt_len+3+7>>>3,(K=d.static_len+3+7>>>3)<=L&&(L=K)):L=K=Z+5,Z+4<=L&&E!==-1?y(d,E,Z,H):d.strategy===4||K===L?(Y(d,2+(H?1:0),3),ht(d,M,v)):(Y(d,4+(H?1:0),3),function($,Q,lt,at){var bt;for(Y($,Q-257,5),Y($,lt-1,5),Y($,at-4,4),bt=0;bt<at;bt++)Y($,$.bl_tree[2*C[bt]+1],3);P($,$.dyn_ltree,Q-1),P($,$.dyn_dtree,lt-1)}(d,d.l_desc.max_code+1,d.d_desc.max_code+1,J+1),ht(d,d.dyn_ltree,d.dyn_dtree)),tt(d),H&&nt(d)},u._tr_tally=function(d,E,Z){return d.pending_buf[d.d_buf+2*d.last_lit]=E>>>8&255,d.pending_buf[d.d_buf+2*d.last_lit+1]=255&E,d.pending_buf[d.l_buf+d.last_lit]=255&Z,d.last_lit++,E===0?d.dyn_ltree[2*Z]++:(d.matches++,E--,d.dyn_ltree[2*(s[Z]+f+1)]++,d.dyn_dtree[2*I(E)]++),d.last_lit===d.lit_bufsize-1},u._tr_align=function(d){Y(d,2,3),q(d,j,M),function(E){E.bi_valid===16?(V(E,E.bi_buf),E.bi_buf=0,E.bi_valid=0):8<=E.bi_valid&&(E.pending_buf[E.pending++]=255&E.bi_buf,E.bi_buf>>=8,E.bi_valid-=8)}(d)}},{"../utils/common":41}],53:[function(o,S,u){S.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(o,S,u){(function(c){(function(r,n){if(!r.setImmediate){var a,l,_,f,k=1,h={},b=!1,i=r.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(r);g=g&&g.setTimeout?g:r,a={}.toString.call(r.process)==="[object process]"?function(T){process.nextTick(function(){x(T)})}:function(){if(r.postMessage&&!r.importScripts){var T=!0,A=r.onmessage;return r.onmessage=function(){T=!1},r.postMessage("","*"),r.onmessage=A,T}}()?(f="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",j,!1):r.attachEvent("onmessage",j),function(T){r.postMessage(f+T,"*")}):r.MessageChannel?((_=new MessageChannel).port1.onmessage=function(T){x(T.data)},function(T){_.port2.postMessage(T)}):i&&"onreadystatechange"in i.createElement("script")?(l=i.documentElement,function(T){var A=i.createElement("script");A.onreadystatechange=function(){x(T),A.onreadystatechange=null,l.removeChild(A),A=null},l.appendChild(A)}):function(T){setTimeout(x,0,T)},g.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var A=new Array(arguments.length-1),U=0;U<A.length;U++)A[U]=arguments[U+1];var z={callback:T,args:A};return h[k]=z,a(k),k++},g.clearImmediate=p}function p(T){delete h[T]}function x(T){if(b)setTimeout(x,0,T);else{var A=h[T];if(A){b=!0;try{(function(U){var z=U.callback,w=U.args;switch(w.length){case 0:z();break;case 1:z(w[0]);break;case 2:z(w[0],w[1]);break;case 3:z(w[0],w[1],w[2]);break;default:z.apply(n,w)}})(A)}finally{p(T),b=!1}}}}function j(T){T.source===r&&typeof T.data=="string"&&T.data.indexOf(f)===0&&x(+T.data.slice(f.length))}})(typeof self>"u"?c===void 0?this:c:self)}).call(this,typeof Et<"u"?Et:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(fe);var ir=fe.exports;const ar=ie(ir);var pe={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(R,W){((o,S)=>{R.exports=S()})(Et,function o(){var S=typeof self<"u"?self:typeof window<"u"?window:S!==void 0?S:{},u,c=!S.document&&!!S.postMessage,r=S.IS_PAPA_WORKER||!1,n={},a=0,l={};function _(w){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(m){var C=A(m);C.chunkSize=parseInt(C.chunkSize),m.step||m.chunk||(C.chunkSize=null),this._handle=new i(C),(this._handle.streamer=this)._config=C}).call(this,w),this.parseChunk=function(m,C){var M=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<M){let O=this._config.newline;O||(v=this._config.quoteChar||'"',O=this._handle.guessLineEndings(m,v)),m=[...m.split(O).slice(M)].join(O)}this.isFirstChunk&&z(this._config.beforeFirstChunk)&&(v=this._config.beforeFirstChunk(m))!==void 0&&(m=v),this.isFirstChunk=!1,this._halted=!1;var M=this._partialLine+m,v=(this._partialLine="",this._handle.parse(M,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(m=v.meta.cursor,M=(this._finished||(this._partialLine=M.substring(m-this._baseIndex),this._baseIndex=m),v&&v.data&&(this._rowCount+=v.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),r)S.postMessage({results:v,workerId:l.WORKER_ID,finished:M});else if(z(this._config.chunk)&&!C){if(this._config.chunk(v,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=v=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(v.data),this._completeResults.errors=this._completeResults.errors.concat(v.errors),this._completeResults.meta=v.meta),this._completed||!M||!z(this._config.complete)||v&&v.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),M||v&&v.meta.paused||this._nextChunk(),v}this._halted=!0},this._sendError=function(m){z(this._config.error)?this._config.error(m):r&&this._config.error&&S.postMessage({workerId:l.WORKER_ID,error:m,finished:!1})}}function f(w){var m;(w=w||{}).chunkSize||(w.chunkSize=l.RemoteChunkSize),_.call(this,w),this._nextChunk=c?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(C){this._input=C,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(m=new XMLHttpRequest,this._config.withCredentials&&(m.withCredentials=this._config.withCredentials),c||(m.onload=U(this._chunkLoaded,this),m.onerror=U(this._chunkError,this)),m.open(this._config.downloadRequestBody?"POST":"GET",this._input,!c),this._config.downloadRequestHeaders){var C,M=this._config.downloadRequestHeaders;for(C in M)m.setRequestHeader(C,M[C])}var v;this._config.chunkSize&&(v=this._start+this._config.chunkSize-1,m.setRequestHeader("Range","bytes="+this._start+"-"+v));try{m.send(this._config.downloadRequestBody)}catch(O){this._chunkError(O.message)}c&&m.status===0&&this._chunkError()}},this._chunkLoaded=function(){m.readyState===4&&(m.status<200||400<=m.status?this._chunkError():(this._start+=this._config.chunkSize||m.responseText.length,this._finished=!this._config.chunkSize||this._start>=(C=>(C=C.getResponseHeader("Content-Range"))!==null?parseInt(C.substring(C.lastIndexOf("/")+1)):-1)(m),this.parseChunk(m.responseText)))},this._chunkError=function(C){C=m.statusText||C,this._sendError(new Error(C))}}function k(w){(w=w||{}).chunkSize||(w.chunkSize=l.LocalChunkSize),_.call(this,w);var m,C,M=typeof FileReader<"u";this.stream=function(v){this._input=v,C=v.slice||v.webkitSlice||v.mozSlice,M?((m=new FileReader).onload=U(this._chunkLoaded,this),m.onerror=U(this._chunkError,this)):m=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var v=this._input,O=(this._config.chunkSize&&(O=Math.min(this._start+this._config.chunkSize,this._input.size),v=C.call(v,this._start,O)),m.readAsText(v,this._config.encoding));M||this._chunkLoaded({target:{result:O}})},this._chunkLoaded=function(v){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(v.target.result)},this._chunkError=function(){this._sendError(m.error)}}function h(w){var m;_.call(this,w=w||{}),this.stream=function(C){return m=C,this._nextChunk()},this._nextChunk=function(){var C,M;if(!this._finished)return C=this._config.chunkSize,m=C?(M=m.substring(0,C),m.substring(C)):(M=m,""),this._finished=!m,this.parseChunk(M)}}function b(w){_.call(this,w=w||{});var m=[],C=!0,M=!1;this.pause=function(){_.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){_.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(v){this._input=v,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){M&&m.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),m.length?this.parseChunk(m.shift()):C=!0},this._streamData=U(function(v){try{m.push(typeof v=="string"?v:v.toString(this._config.encoding)),C&&(C=!1,this._checkIsFinished(),this.parseChunk(m.shift()))}catch(O){this._streamError(O)}},this),this._streamError=U(function(v){this._streamCleanUp(),this._sendError(v)},this),this._streamEnd=U(function(){this._streamCleanUp(),M=!0,this._streamData("")},this),this._streamCleanUp=U(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function i(w){var m,C,M,v,O=Math.pow(2,53),s=-O,G=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,it=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,D=this,st=0,F=0,rt=!1,N=!1,I=[],V={data:[],errors:[],meta:{}};function Y(tt){return w.skipEmptyLines==="greedy"?tt.join("").trim()==="":tt.length===1&&tt[0].length===0}function q(){if(V&&M&&(ft("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),M=!1),w.skipEmptyLines&&(V.data=V.data.filter(function(et){return!Y(et)})),ct()){let et=function(ht,ut){z(w.transformHeader)&&(ht=w.transformHeader(ht,ut)),I.push(ht)};if(V)if(Array.isArray(V.data[0])){for(var tt=0;ct()&&tt<V.data.length;tt++)V.data[tt].forEach(et);V.data.splice(0,1)}else V.data.forEach(et)}function nt(et,ht){for(var ut=w.header?{}:[],t=0;t<et.length;t++){var P=t,B=et[t],B=((y,d)=>(E=>(w.dynamicTypingFunction&&w.dynamicTyping[E]===void 0&&(w.dynamicTyping[E]=w.dynamicTypingFunction(E)),(w.dynamicTyping[E]||w.dynamicTyping)===!0))(y)?d==="true"||d==="TRUE"||d!=="false"&&d!=="FALSE"&&((E=>{if(G.test(E)&&(E=parseFloat(E),s<E&&E<O))return 1})(d)?parseFloat(d):it.test(d)?new Date(d):d===""?null:d):d)(P=w.header?t>=I.length?"__parsed_extra":I[t]:P,B=w.transform?w.transform(B,P):B);P==="__parsed_extra"?(ut[P]=ut[P]||[],ut[P].push(B)):ut[P]=B}return w.header&&(t>I.length?ft("FieldMismatch","TooManyFields","Too many fields: expected "+I.length+" fields but parsed "+t,F+ht):t<I.length&&ft("FieldMismatch","TooFewFields","Too few fields: expected "+I.length+" fields but parsed "+t,F+ht)),ut}var ot;V&&(w.header||w.dynamicTyping||w.transform)&&(ot=1,!V.data.length||Array.isArray(V.data[0])?(V.data=V.data.map(nt),ot=V.data.length):V.data=nt(V.data,0),w.header&&V.meta&&(V.meta.fields=I),F+=ot)}function ct(){return w.header&&I.length===0}function ft(tt,nt,ot,et){tt={type:tt,code:nt,message:ot},et!==void 0&&(tt.row=et),V.errors.push(tt)}z(w.step)&&(v=w.step,w.step=function(tt){V=tt,ct()?q():(q(),V.data.length!==0&&(st+=tt.data.length,w.preview&&st>w.preview?C.abort():(V.data=V.data[0],v(V,D))))}),this.parse=function(tt,nt,ot){var et=w.quoteChar||'"',et=(w.newline||(w.newline=this.guessLineEndings(tt,et)),M=!1,w.delimiter?z(w.delimiter)&&(w.delimiter=w.delimiter(tt),V.meta.delimiter=w.delimiter):((et=((ht,ut,t,P,B)=>{var y,d,E,Z;B=B||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var H=0;H<B.length;H++){for(var L,K=B[H],J=0,$=0,Q=0,lt=(E=void 0,new p({comments:P,delimiter:K,newline:ut,preview:10}).parse(ht)),at=0;at<lt.data.length;at++)t&&Y(lt.data[at])?Q++:(L=lt.data[at].length,$+=L,E===void 0?E=L:0<L&&(J+=Math.abs(L-E),E=L));0<lt.data.length&&($/=lt.data.length-Q),(d===void 0||J<=d)&&(Z===void 0||Z<$)&&1.99<$&&(d=J,y=K,Z=$)}return{successful:!!(w.delimiter=y),bestDelimiter:y}})(tt,w.newline,w.skipEmptyLines,w.comments,w.delimitersToGuess)).successful?w.delimiter=et.bestDelimiter:(M=!0,w.delimiter=l.DefaultDelimiter),V.meta.delimiter=w.delimiter),A(w));return w.preview&&w.header&&et.preview++,m=tt,C=new p(et),V=C.parse(m,nt,ot),q(),rt?{meta:{paused:!0}}:V||{meta:{paused:!1}}},this.paused=function(){return rt},this.pause=function(){rt=!0,C.abort(),m=z(w.chunk)?"":m.substring(C.getCharIndex())},this.resume=function(){D.streamer._halted?(rt=!1,D.streamer.parseChunk(m,!0)):setTimeout(D.resume,3)},this.aborted=function(){return N},this.abort=function(){N=!0,C.abort(),V.meta.aborted=!0,z(w.complete)&&w.complete(V),m=""},this.guessLineEndings=function(ht,et){ht=ht.substring(0,1048576);var et=new RegExp(g(et)+"([^]*?)"+g(et),"gm"),ot=(ht=ht.replace(et,"")).split("\r"),et=ht.split(`
`),ht=1<et.length&&et[0].length<ot[0].length;if(ot.length===1||ht)return`
`;for(var ut=0,t=0;t<ot.length;t++)ot[t][0]===`
`&&ut++;return ut>=ot.length/2?`\r
`:"\r"}}function g(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function p(w){var m=(w=w||{}).delimiter,C=w.newline,M=w.comments,v=w.step,O=w.preview,s=w.fastMode,G=null,it=!1,D=w.quoteChar==null?'"':w.quoteChar,st=D;if(w.escapeChar!==void 0&&(st=w.escapeChar),(typeof m!="string"||-1<l.BAD_DELIMITERS.indexOf(m))&&(m=","),M===m)throw new Error("Comment character same as delimiter");M===!0?M="#":(typeof M!="string"||-1<l.BAD_DELIMITERS.indexOf(M))&&(M=!1),C!==`
`&&C!=="\r"&&C!==`\r
`&&(C=`
`);var F=0,rt=!1;this.parse=function(N,I,V){if(typeof N!="string")throw new Error("Input must be a string");var Y=N.length,q=m.length,ct=C.length,ft=M.length,tt=z(v),nt=[],ot=[],et=[],ht=F=0;if(!N)return J();if(s||s!==!1&&N.indexOf(D)===-1){for(var ut=N.split(C),t=0;t<ut.length;t++){if(et=ut[t],F+=et.length,t!==ut.length-1)F+=C.length;else if(V)return J();if(!M||et.substring(0,ft)!==M){if(tt){if(nt=[],Z(et.split(m)),$(),rt)return J()}else Z(et.split(m));if(O&&O<=t)return nt=nt.slice(0,O),J(!0)}}return J()}for(var P=N.indexOf(m,F),B=N.indexOf(C,F),y=new RegExp(g(st)+g(D),"g"),d=N.indexOf(D,F);;)if(N[F]===D)for(d=F,F++;;){if((d=N.indexOf(D,d+1))===-1)return V||ot.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:nt.length,index:F}),L();if(d===Y-1)return L(N.substring(F,d).replace(y,D));if(D===st&&N[d+1]===st)d++;else if(D===st||d===0||N[d-1]!==st){P!==-1&&P<d+1&&(P=N.indexOf(m,d+1));var E=H((B=B!==-1&&B<d+1?N.indexOf(C,d+1):B)===-1?P:Math.min(P,B));if(N.substr(d+1+E,q)===m){et.push(N.substring(F,d).replace(y,D)),N[F=d+1+E+q]!==D&&(d=N.indexOf(D,F)),P=N.indexOf(m,F),B=N.indexOf(C,F);break}if(E=H(B),N.substring(d+1+E,d+1+E+ct)===C){if(et.push(N.substring(F,d).replace(y,D)),K(d+1+E+ct),P=N.indexOf(m,F),d=N.indexOf(D,F),tt&&($(),rt))return J();if(O&&nt.length>=O)return J(!0);break}ot.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:nt.length,index:F}),d++}}else if(M&&et.length===0&&N.substring(F,F+ft)===M){if(B===-1)return J();F=B+ct,B=N.indexOf(C,F),P=N.indexOf(m,F)}else if(P!==-1&&(P<B||B===-1))et.push(N.substring(F,P)),F=P+q,P=N.indexOf(m,F);else{if(B===-1)break;if(et.push(N.substring(F,B)),K(B+ct),tt&&($(),rt))return J();if(O&&nt.length>=O)return J(!0)}return L();function Z(Q){nt.push(Q),ht=F}function H(Q){var lt=0;return lt=Q!==-1&&(Q=N.substring(d+1,Q))&&Q.trim()===""?Q.length:lt}function L(Q){return V||(Q===void 0&&(Q=N.substring(F)),et.push(Q),F=Y,Z(et),tt&&$()),J()}function K(Q){F=Q,Z(et),et=[],B=N.indexOf(C,F)}function J(Q){if(w.header&&!I&&nt.length&&!it){var lt=nt[0],at=Object.create(null),bt=new Set(lt);let xt=!1;for(let gt=0;gt<lt.length;gt++){let _t=lt[gt];if(at[_t=z(w.transformHeader)?w.transformHeader(_t,gt):_t]){let pt,kt=at[_t];for(;pt=_t+"_"+kt,kt++,bt.has(pt););bt.add(pt),lt[gt]=pt,at[_t]++,xt=!0,(G=G===null?{}:G)[pt]=_t}else at[_t]=1,lt[gt]=_t;bt.add(_t)}xt&&console.warn("Duplicate headers found and renamed."),it=!0}return{data:nt,errors:ot,meta:{delimiter:m,linebreak:C,aborted:rt,truncated:!!Q,cursor:ht+(I||0),renamedHeaders:G}}}function $(){v(J()),nt=[],ot=[]}},this.abort=function(){rt=!0},this.getCharIndex=function(){return F}}function x(w){var m=w.data,C=n[m.workerId],M=!1;if(m.error)C.userError(m.error,m.file);else if(m.results&&m.results.data){var v={abort:function(){M=!0,j(m.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:T,resume:T};if(z(C.userStep)){for(var O=0;O<m.results.data.length&&(C.userStep({data:m.results.data[O],errors:m.results.errors,meta:m.results.meta},v),!M);O++);delete m.results}else z(C.userChunk)&&(C.userChunk(m.results,v,m.file),delete m.results)}m.finished&&!M&&j(m.workerId,m.results)}function j(w,m){var C=n[w];z(C.userComplete)&&C.userComplete(m),C.terminate(),delete n[w]}function T(){throw new Error("Not implemented.")}function A(w){if(typeof w!="object"||w===null)return w;var m,C=Array.isArray(w)?[]:{};for(m in w)C[m]=A(w[m]);return C}function U(w,m){return function(){w.apply(m,arguments)}}function z(w){return typeof w=="function"}return l.parse=function(w,m){var C=(m=m||{}).dynamicTyping||!1;if(z(C)&&(m.dynamicTypingFunction=C,C={}),m.dynamicTyping=C,m.transform=!!z(m.transform)&&m.transform,!m.worker||!l.WORKERS_SUPPORTED)return C=null,l.NODE_STREAM_INPUT,typeof w=="string"?(w=(M=>M.charCodeAt(0)!==65279?M:M.slice(1))(w),C=new(m.download?f:h)(m)):w.readable===!0&&z(w.read)&&z(w.on)?C=new b(m):(S.File&&w instanceof File||w instanceof Object)&&(C=new k(m)),C.stream(w);(C=(()=>{var M;return!!l.WORKERS_SUPPORTED&&(M=(()=>{var v=S.URL||S.webkitURL||null,O=o.toString();return l.BLOB_URL||(l.BLOB_URL=v.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",O,")();"],{type:"text/javascript"})))})(),(M=new S.Worker(M)).onmessage=x,M.id=a++,n[M.id]=M)})()).userStep=m.step,C.userChunk=m.chunk,C.userComplete=m.complete,C.userError=m.error,m.step=z(m.step),m.chunk=z(m.chunk),m.complete=z(m.complete),m.error=z(m.error),delete m.worker,C.postMessage({input:w,config:m,workerId:C.id})},l.unparse=function(w,m){var C=!1,M=!0,v=",",O=`\r
`,s='"',G=s+s,it=!1,D=null,st=!1,F=((()=>{if(typeof m=="object"){if(typeof m.delimiter!="string"||l.BAD_DELIMITERS.filter(function(I){return m.delimiter.indexOf(I)!==-1}).length||(v=m.delimiter),typeof m.quotes!="boolean"&&typeof m.quotes!="function"&&!Array.isArray(m.quotes)||(C=m.quotes),typeof m.skipEmptyLines!="boolean"&&typeof m.skipEmptyLines!="string"||(it=m.skipEmptyLines),typeof m.newline=="string"&&(O=m.newline),typeof m.quoteChar=="string"&&(s=m.quoteChar),typeof m.header=="boolean"&&(M=m.header),Array.isArray(m.columns)){if(m.columns.length===0)throw new Error("Option columns is empty");D=m.columns}m.escapeChar!==void 0&&(G=m.escapeChar+s),m.escapeFormulae instanceof RegExp?st=m.escapeFormulae:typeof m.escapeFormulae=="boolean"&&m.escapeFormulae&&(st=/^[=+\-@\t\r].*$/)}})(),new RegExp(g(s),"g"));if(typeof w=="string"&&(w=JSON.parse(w)),Array.isArray(w)){if(!w.length||Array.isArray(w[0]))return rt(null,w,it);if(typeof w[0]=="object")return rt(D||Object.keys(w[0]),w,it)}else if(typeof w=="object")return typeof w.data=="string"&&(w.data=JSON.parse(w.data)),Array.isArray(w.data)&&(w.fields||(w.fields=w.meta&&w.meta.fields||D),w.fields||(w.fields=Array.isArray(w.data[0])?w.fields:typeof w.data[0]=="object"?Object.keys(w.data[0]):[]),Array.isArray(w.data[0])||typeof w.data[0]=="object"||(w.data=[w.data])),rt(w.fields||[],w.data||[],it);throw new Error("Unable to serialize unrecognized input");function rt(I,V,Y){var q="",ct=(typeof I=="string"&&(I=JSON.parse(I)),typeof V=="string"&&(V=JSON.parse(V)),Array.isArray(I)&&0<I.length),ft=!Array.isArray(V[0]);if(ct&&M){for(var tt=0;tt<I.length;tt++)0<tt&&(q+=v),q+=N(I[tt],tt);0<V.length&&(q+=O)}for(var nt=0;nt<V.length;nt++){var ot=(ct?I:V[nt]).length,et=!1,ht=ct?Object.keys(V[nt]).length===0:V[nt].length===0;if(Y&&!ct&&(et=Y==="greedy"?V[nt].join("").trim()==="":V[nt].length===1&&V[nt][0].length===0),Y==="greedy"&&ct){for(var ut=[],t=0;t<ot;t++){var P=ft?I[t]:t;ut.push(V[nt][P])}et=ut.join("").trim()===""}if(!et){for(var B=0;B<ot;B++){0<B&&!ht&&(q+=v);var y=ct&&ft?I[B]:B;q+=N(V[nt][y],B)}nt<V.length-1&&(!Y||0<ot&&!ht)&&(q+=O)}}return q}function N(I,V){var Y,q;return I==null?"":I.constructor===Date?JSON.stringify(I).slice(1,25):(q=!1,st&&typeof I=="string"&&st.test(I)&&(I="'"+I,q=!0),Y=I.toString().replace(F,G),(q=q||C===!0||typeof C=="function"&&C(I,V)||Array.isArray(C)&&C[V]||((ct,ft)=>{for(var tt=0;tt<ft.length;tt++)if(-1<ct.indexOf(ft[tt]))return!0;return!1})(Y,l.BAD_DELIMITERS)||-1<Y.indexOf(v)||Y.charAt(0)===" "||Y.charAt(Y.length-1)===" ")?s+Y+s:Y)}},l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!c&&!!S.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=p,l.ParserHandle=i,l.NetworkStreamer=f,l.FileStreamer=k,l.StringStreamer=h,l.ReadableStreamStreamer=b,S.jQuery&&((u=S.jQuery).fn.parse=function(w){var m=w.config||{},C=[];return this.each(function(O){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&S.FileReader)||!this.files||this.files.length===0)return!0;for(var s=0;s<this.files.length;s++)C.push({file:this.files[s],inputElem:this,instanceConfig:u.extend({},m)})}),M(),this;function M(){if(C.length===0)z(w.complete)&&w.complete();else{var O,s,G,it,D=C[0];if(z(w.before)){var st=w.before(D.file,D.inputElem);if(typeof st=="object"){if(st.action==="abort")return O="AbortError",s=D.file,G=D.inputElem,it=st.reason,void(z(w.error)&&w.error({name:O},s,G,it));if(st.action==="skip")return void v();typeof st.config=="object"&&(D.instanceConfig=u.extend(D.instanceConfig,st.config))}else if(st==="skip")return void v()}var F=D.instanceConfig.complete;D.instanceConfig.complete=function(rt){z(F)&&F(rt,D.file,D.inputElem),v()},l.parse(D.file,D.instanceConfig)}}function v(){C.splice(0,1),M()}}),r&&(S.onmessage=function(w){w=w.data,l.WORKER_ID===void 0&&w&&(l.WORKER_ID=w.workerId),typeof w.input=="string"?S.postMessage({workerId:l.WORKER_ID,results:l.parse(w.input,w.config),finished:!0}):(S.File&&w.input instanceof File||w.input instanceof Object)&&(w=l.parse(w.input,w.config))&&S.postMessage({workerId:l.WORKER_ID,results:w,finished:!0})}),(f.prototype=Object.create(_.prototype)).constructor=f,(k.prototype=Object.create(_.prototype)).constructor=k,(h.prototype=Object.create(h.prototype)).constructor=h,(b.prototype=Object.create(_.prototype)).constructor=b,l})})(pe);var or=pe.exports;const lr=ie(or);function me(R,W){const o=lr.parse(R,{header:!1,skipEmptyLines:!0,transform:u=>u.trim(),...W});return o.errors.length>0&&console.warn("CSV parsing warnings:",o.errors),o.data.map(u=>Array.isArray(u)?u.map(c=>String(c||"")):[String(u||"")])}const cr=R=>new Promise(W=>{const o=new FileReader;o.onload=function(S){var u;(u=S.target)!=null&&u.result&&ar.loadAsync(S.target.result).then(function(c){W(c)})},o.readAsArrayBuffer(R)}),Yt=async R=>{const W=[],o=[];for(let S=0;S<R.length;S++){const u=R[S];if(u.type==="application/x-zip-compressed"||u.type==="application/zip"){const c=await cr(u),r=[];c.forEach(function(n,a){(a.name.endsWith(".csv")||a.name.endsWith(".xml"))&&r.push({object:a})}),W.push({name:u.name,files:r})}else u.type==="text/csv"||u.type==="text/xml"?o.push(u):dt("Unsupported file: "+u.name,"error")}return[W,o]},hr=async(R,W)=>{for(let o=0;o<R.length;o++){const S=R[o];for(let u=0;u<S.files.length;u++){const c=S.files[u],r=`${S.name}_${u}`;let n="",a;try{n=await ur(c.object)}catch(l){a=l instanceof Error?l.message:void 0}W.push({data:n,key:r,parsingError:a,title:c.object.name.replace(/\.([a-z]+)$/,"")})}}},ge=R=>{const W=Ht(R);if(W)return JSON.stringify(ae(W==null?void 0:W.blocksProps,W==null?void 0:W.desktop,W==null?void 0:W.innerBlocks))},be=R=>{var r;((r=R.at(-1))==null?void 0:r.length)===1&&R.pop();const W=R.reduce((n,a)=>Math.max(n,a.length),0),o={...Ae,colCount:W,rowCount:R.length},S={},u={},c=[];S[ze]=o;for(let n=0;n<R.length;n++){const a=[];for(let l=0;l<W;l++){const _=`${n}-${l}`;a.push(_),u[_]={name:"cell",blockOrder:[],parentId:n.toString()},S[_]={row:n,col:l,colspan:1,rowspan:1};const f=`${n}-${l}-text`;u[f]={name:"text",blockOrder:[],parentId:_},u[_].blockOrder.push(f),S[f]={text:R[n][l]||""}}c.push(a)}return JSON.stringify(ae(S,c,u))},ur=R=>new Promise((W,o)=>{R.async("text").then(S=>{if(R.name.endsWith(".csv"))W(be(me(S)));else if(R.name.endsWith(".xml")){const u=ge(S);W(JSON.stringify(u))}else o("Unsupported file: "+R.name),W(null)})}),dr=async({setLoadings:R,zips:W,rawFiles:o,keepTitles:S})=>{R.current({});const u=dt("Preparing tables...","progress",0),c=[];for(let f=0;f<o.length;f++){let k="",h;try{if(o[f].name.endsWith(".csv"))k=be(me(await o[f].text()));else if(o[f].name.endsWith(".xml"))k=ge(await o[f].text());else throw new Error("Unsupported file: "+o[f].name)}catch(b){k="",h=b instanceof Error?b.message:"Parsing failed"}c.push({data:k,key:f.toString(),parsingError:h,title:o[f].name.replace(/\.([a-z]+)$/,"")})}await hr(W,c);const r=c.length;Nt(u,{progress:0,message:`[0/${r}] Importing tables...`});let n=1,a=0,l=0;for(;l<r;){const f=[];for(let k=0;k<5&&l+k<r;k++){const h=c[l+k],{data:b,key:i,parsingError:g,title:p}=h;if(g){R.current(x=>({...x,[i]:g})),n++,a++;continue}R.current(x=>({...x,[i]:1})),f.push(new Promise(x=>{fetch(WPTB_CFG.ADMIN_URL+"?action=save_table",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({title:S?p:void 0,content:b,security_code:WPTB_CFG.SECURITY_CODE})}).then(j=>{R.current(T=>({...T,[i]:j.ok?2:j.statusText})),j.ok||a++}).catch(j=>{R.current(T=>({...T,[i]:j instanceof Error?j.message:"Something went wrong..."})),a++}).finally(()=>{n++,x(!0)})})),Nt(u,{progress:n/r*100,message:`[${n}/${r}] Importing tables...`})}try{await Promise.all(f)}catch{}l+=5}const _=r-a;_>0?Nt(u,{type:"success",message:`${_} tables imported successfully!`,spawned_at:Date.now(),duration:5e3}):Nt(u,{type:"error",message:"No tables imported.",duration:5e3,spawned_at:Date.now()-1e4}),a>0&&dt(`${a} tables failed to import.`,"error")},Jt=R=>R?R===1?re:R===2?Ne:e.jsx(oe,{content:R,style:{color:"red"},children:Re}):"",fr=({setPage:R})=>{const[W,o]=X.useState(!1),[S,u]=X.useState(!0),[c,r]=X.useState([]),[n,a]=X.useState([]),[l,_]=X.useState({}),[f,k]=X.useState(!1),h=X.useRef(_);X.useEffect(()=>{h.current=_},[_]);const b=async j=>{if(j.preventDefault(),j.stopPropagation(),o(!1),f){dt("Please wait for the previous import to finish.","error");return}const[T,A]=await Yt(j.dataTransfer.files);r([...c,...T]),a([...n,...A])},i=async j=>{if(f){j.target.value="",dt("Please wait for the previous import to finish.","error");return}const[T,A]=await Yt(Array.from(j.target.files));r([...c,...T]),a([...n,...A]),j.target.value=""},g=(j,T)=>{r(A=>{const U=[...A];return T!==void 0?U[j].files.splice(T,1):U.splice(j,1),U})},p=j=>{a(T=>{if(j===void 0)return[];const A=[...T];return A.splice(j,1),A})},x=async()=>{if(f){dt("Please wait for the previous import to finish.","error");return}k(!0),await dr({setLoadings:h,zips:c,rawFiles:n,keepTitles:S}),k(!1)};return e.jsxs("div",{className:"wptb-v2-page",children:[e.jsx(zt,{setPage:R,page:"import"}),e.jsxs("div",{className:"wptb-v2-page-content",children:[e.jsx("div",{className:"wptb-v2-page-content-top",children:e.jsx("h3",{children:"Import Table"})}),e.jsxs("div",{className:mt("wptb-v2-page-content-main wptb-v2-import-page",{"wptb-v2-import-page-has-files":c.length>0||n.length>0}),children:[e.jsxs("div",{className:"wptb-v2-import-page-main-area",children:[e.jsxs("div",{className:"wptb-v2-import-page-file-area",children:[e.jsx("h3",{children:"Pick files"}),e.jsxs("div",{className:mt("wptb-v2-import-page-dropzone",{"wptb-v2-import-page-dropzone-dragover":W}),onDragOver:j=>{o(!0),j.preventDefault(),j.stopPropagation()},onDragLeave:()=>o(!1),onDrop:b,children:[e.jsx("p",{className:"wptb-v2-import-page-dropzone-text",children:"Drag and drop your files here"}),e.jsx("p",{className:"wptb-v2-import-page-dropzone-types",children:"(csv, xml, zip)"}),e.jsx("div",{className:"wptb-v2-divider",children:"or"}),e.jsxs("label",{children:["Browse files",e.jsx("input",{type:"file",accept:".csv, .xml, .zip",onChange:i,multiple:!0})]})]})]}),(c.length>0||n.length>0)&&e.jsxs("div",{className:"wptb-v2-import-page-preview",children:[e.jsxs("h3",{children:["To be imported",e.jsx("button",{type:"button",title:"Clear Files",onClick:()=>{r([]),a([])},children:Lt})]}),n.length>0&&e.jsxs("div",{className:"wptb-v2-import-page-preview-item",children:[e.jsxs("p",{children:["Single tables",!f&&e.jsx("button",{type:"button",onClick:()=>p(),children:Rt})]}),e.jsx("ul",{children:n.map((j,T)=>e.jsxs("li",{children:[j.name,e.jsxs("div",{className:"wptb-v2-import-page-preview-status",children:[Jt(l[T]),!f&&e.jsx("button",{type:"button",onClick:()=>p(T),children:Rt})]})]},`${j.name}_${T}`))})]}),c.map((j,T)=>e.jsxs("div",{className:"wptb-v2-import-page-preview-item",children:[e.jsxs("p",{children:[j.name,!f&&e.jsx("button",{type:"button",onClick:()=>g(T),children:Rt})]}),e.jsx("ul",{children:j.files.map((A,U)=>e.jsxs("li",{children:[A.object.name,e.jsxs("div",{className:"wptb-v2-import-page-preview-status",children:[Jt(l[`${T}_${U}`]),!f&&e.jsx("button",{type:"button",onClick:()=>g(T,U),children:Rt})]})]},`${A.object.name}_${U}`))})]},j.name))]})]}),e.jsxs("div",{className:"wptb-v2-import-page-form",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:S,onChange:()=>u(!S)}),e.jsx("p",{children:"Preserve table titles"})]}),e.jsxs("button",{type:"button",onClick:x,disabled:f,children:[f?e.jsx(Ie,{}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",children:e.jsx("path",{fill:"currentColor",d:"M9 6c0-1.6.8-3 2-4h-1c-3.9 0-7 .9-7 2c0 1 2.6 1.8 6 2m3.8 4.8c-.9.1-1.9.2-2.8.2c-3.9 0-7-.9-7-2v3c0 1.1 3.1 2 7 2s7-.9 7-2v-2c-.9.7-1.9 1-3 1c-.4 0-.8-.1-1.2-.2M10 15c-3.9 0-7-.9-7-2v3c0 1.1 3.1 2 7 2s7-.9 7-2v-3c0 1.1-3.1 2-7 2m0-5h1c-1-.7-1.7-1.8-1.9-3C5.7 6.9 3 6 3 5v3c0 1.1 3.1 2 7 2m4 0c2.2 0 4-1.8 4-4s-1.8-4-4-4s-4 1.8-4 4s1.8 4 4 4m-1-4V3h2v3h2l-3 3l-3-3z"})}),"Import"]})]})]})]})]})},pr=({onSelect:R,onAllSelect:W,apiData:o,searchTxt:S,setSearch:u,items:c,sorting:r})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"wptb-v2-export-page-header",children:[e.jsx("h2",{children:"All Tables"}),e.jsxs("div",{className:"wptb-v2-export-page-search",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48",children:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"4",children:[e.jsx("path",{d:"M21 38c9.389 0 17-7.611 17-17S30.389 4 21 4S4 11.611 4 21s7.611 17 17 17Z"}),e.jsx("path",{strokeLinecap:"round",d:"M26.657 14.343A7.98 7.98 0 0 0 21 12a7.98 7.98 0 0 0-5.657 2.343m17.879 18.879l8.485 8.485"})]})}),e.jsx("input",{type:"search",placeholder:"Search...",value:S,onChange:n=>u(n.target.value)})]})]}),e.jsxs("p",{className:"wptb-pagination-info",children:["Showing ",e.jsx("b",{children:o.page_start})," to ",e.jsx("b",{children:o.page_end})," of"," ",e.jsx("b",{children:o.total_count})," entries"]}),e.jsx(le,{onSelect:R,onAllCheck:W,sorting:r,isLoading:o.loading,items:c,columns:["title","modified","id"],htmlColumns:{title:!0},checkbox:!0})]}),mr=({onUnSelect:R,onAllUnSelect:W,items:o})=>{const S=he("modified","desc"),[u,c]=X.useState(""),[r,n]=X.useState(o);X.useEffect(()=>{n(o)},[o]),X.useEffect(()=>{if(u==="")return n(o);const l=o.filter(_=>_.title.toLowerCase().includes(u.toLowerCase()));n(l)},[u,o]);const a=S[0];return X.useEffect(()=>n(l=>(a.order==="asc"?l.sort((_,f)=>_[a.by].toString().localeCompare(f[a.by].toString())):l.sort((_,f)=>f[a.by].toString().localeCompare(_[a.by].toString())),[...l])),[a]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"wptb-v2-export-page-header",children:[e.jsx("h2",{children:"To Export"}),e.jsxs("div",{className:"wptb-v2-export-page-search",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48",children:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"4",children:[e.jsx("path",{d:"M21 38c9.389 0 17-7.611 17-17S30.389 4 21 4S4 11.611 4 21s7.611 17 17 17Z"}),e.jsx("path",{strokeLinecap:"round",d:"M26.657 14.343A7.98 7.98 0 0 0 21 12a7.98 7.98 0 0 0-5.657 2.343m17.879 18.879l8.485 8.485"})]})}),e.jsx("input",{type:"search",placeholder:"Search...",value:u,onChange:l=>c(l.target.value)})]})]}),e.jsx(le,{onSelect:R,onAllCheck:W,sorting:S,items:r,columns:["title","modified","id"],htmlColumns:{title:!0},checkbox:!0,checked:!0,noItemsMessage:"No tables selected"})]})},Mt=document.createElement("a"),gr=async(R,W)=>{new FormData().append("ids",R);try{const S=new FormData;S.append("nonce",WPTB_CFG.EXPORT_KEY),S.append("action","wptb_table_export_main_export"),S.append("ids",JSON.stringify(R.split(","))),S.append("export_type",W.toLocaleUpperCase());const u=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:S});let c,r="";if(u.headers.get("content-type")==="application/octet-stream"){const l=u.headers.get("content-disposition"),f=new RegExp(/filename="(.+\..+)"/,"g").exec(l||"");if(f===null)throw new Error("Invalid file name header!");r=f[1],c=await u.blob()}else c=await u.json();const a=window.URL.createObjectURL(c);Mt.href=a,Mt.download=r,Mt.click(),window.URL.revokeObjectURL(a),dt('File downloaded as "'+r+'"',"success")}catch(S){dt(S.message||"Something went wrong","error")}},br={xml:e.jsxs(e.Fragment,{children:[e.jsx("b",{children:"XML:"})," an exact copy of your tables will be exported, ideal for backing up and sharing your tables with your other WordPress sites that uses WP Table Builder."]}),csv:e.jsxs(e.Fragment,{children:[e.jsx("b",{children:"CSV:"})," only text content of your tables will be exported, ideal for usage within other apps/plugins."]})},_r=({setPage:R})=>{const W=X.useRef(),[o,S]=X.useState(1),u=he("modified","desc"),[c,r]=X.useState(""),[n,a]=X.useState([]),[l,_]=X.useState(""),[f,k]=X.useState("xml"),[h,b]=X.useState(!1),[i,g,p]=ue({page:o,search:c,sort:u[0],abortCtrl:W.current,skipTables:l});X.useEffect(()=>{a(i.posts)},[i.posts]);const[x,j]=X.useState([]),T=m=>{const C=l+","+m.id;_(C.replace(/^,/,"")),j([...x,m]),a(n.filter(M=>M.id!==m.id)),n.length<=1&&p()},A=m=>{j(x.filter(M=>M.id!==m.id)),a([...n,m]);let C=l.replace(m.id.toString(),"");C=C.replace(/,,/,","),C=C.replace(/(^,)|(,$)/,""),_(C)},U=()=>{if(!n.length)return;const m=[...x];let C=l;n.forEach(M=>{m.push(M),C=C+","+M.id}),C=C.replace(/^,/,""),j(m),_(C),p()},z=()=>{x.length&&(j([]),_(""),a([...n,...x]))},w=()=>{if(!h){if(!l){dt("No tables selected","error");return}b(!0),gr(l,f).then(()=>{b(!1),z()})}};return e.jsxs("div",{className:"wptb-v2-page",children:[e.jsx(zt,{setPage:R,page:"export"}),e.jsxs("div",{className:"wptb-v2-page-content",children:[e.jsx("div",{className:"wptb-v2-page-content-top",children:e.jsx("h3",{children:"Export Table"})}),e.jsxs("div",{className:"wptb-v2-export-page",children:[e.jsxs("div",{className:"wptb-v2-export-page-unselected",children:[e.jsx(pr,{onSelect:T,onAllSelect:U,apiData:i,setSearch:r,searchTxt:c,items:n,sorting:u}),e.jsx(Oe,{apiData:i,setPage:S})]}),e.jsxs("div",{className:"wptb-v2-export-page-exchange",children:[e.jsx("button",{type:"button",onClick:U,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsxs("g",{fill:"none",children:[e.jsx("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),e.jsx("path",{fill:"currentColor",d:"m15.06 5.283l5.657 5.657a1.5 1.5 0 0 1 0 2.12l-5.656 5.658a1.5 1.5 0 0 1-2.122-2.122l3.096-3.096H4.5a1.5 1.5 0 0 1 0-3h11.535L12.94 7.404a1.5 1.5 0 0 1 2.122-2.121Z"})]})})}),e.jsx("button",{type:"button",onClick:z,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsxs("g",{fill:"none",children:[e.jsx("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),e.jsx("path",{fill:"currentColor",d:"M3.283 10.94a1.5 1.5 0 0 0 0 2.12l5.656 5.658a1.5 1.5 0 1 0 2.122-2.122L7.965 13.5H19.5a1.5 1.5 0 0 0 0-3H7.965l3.096-3.096a1.5 1.5 0 1 0-2.122-2.121z"})]})})})]}),e.jsxs("div",{className:"wptb-v2-export-page-selected",children:[e.jsx(mr,{onUnSelect:A,onAllUnSelect:z,items:x}),e.jsxs("div",{className:"wptb-v2-export-page-form",children:[e.jsx("p",{children:"Format:"}),e.jsxs("select",{value:f,onChange:m=>k(m.target.value),children:[e.jsx("option",{value:"xml",children:"XML"}),e.jsx("option",{value:"csv",children:"CSV"})]}),e.jsx(oe,{content:br[f],className:"wptb-v2-export-page-form-info",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10m-1-7v2h2v-2zm2-1.645A3.502 3.502 0 0 0 12 6.5a3.5 3.5 0 0 0-3.433 2.813l1.962.393A1.5 1.5 0 1 1 12 11.5a1 1 0 0 0-1 1V14h2z"})})}),e.jsxs("button",{type:"button",disabled:h,onClick:w,children:[h?e.jsx(Zt,{}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256",children:e.jsx("path",{fill:"currentColor",d:"M74.34 85.66a8 8 0 0 1 11.32-11.32L120 108.69V24a8 8 0 0 1 16 0v84.69l34.34-34.35a8 8 0 0 1 11.32 11.32l-48 48a8 8 0 0 1-11.32 0ZM240 136v64a16 16 0 0 1-16 16H32a16 16 0 0 1-16-16v-64a16 16 0 0 1 16-16h52.4a4 4 0 0 1 2.83 1.17L111 145a24 24 0 0 0 34 0l23.8-23.8a4 4 0 0 1 2.8-1.2H224a16 16 0 0 1 16 16m-40 32a12 12 0 1 0-12 12a12 12 0 0 0 12-12"})}),"Export"]})]})]})]})]})]})},vr=R=>typeof R=="number"||parseInt(R).toString()===R,wr=({table:R,setPage:W})=>{const o=Be(),[S,u]=X.useState(!1),[c,r]=X.useState(R);X.useEffect(()=>{if(r(R),o(Le({isSaving:!1,activeBlock:void 0,timeTravel:{lastSaved:/[^0-9]/.test(R)?void 0:0,cursor:0,total:0}})),!vr(R)){if(!Ft.getState().table[R]){history.replaceState(null,"","?page=wptb"),W("tables");return}u(!0);return}u(!1);const l=new AbortController;return Pt(`/v1/table?id=${R}`,{signal:l.signal}).then(_=>{if(!_.table){dt("Table not found","error",5e3),history.replaceState(null,"","?page=wptb"),W("tables");return}const f=Ht(_.table);f.title=_.name,f.id=R,f.tags=_.tags,f.is_template=_.is_template,Ft.dispatch(se({id:R,table:f})),u(!0)}).catch(_=>null),()=>l.abort()},[R,W,o]);const n=([l,_])=>{l==="saved"&&(r(_.toString()),o(Fe({oldId:R,newId:_.toString()})),history.replaceState(null,"","?page=wptb-builder&table="+_))},a=()=>{if(history.length>2){history.back();return}W("tables")};return e.jsx(Pe,{id:c,isLoaded:S,onSave:n,onClose:a})},yr=()=>{const[R,W]=X.useState(!1),[o,S]=X.useState(WPTB_CFG.SETTINGS.general||{}),u=a=>{var l;if((l=o.allowed_roles)!=null&&l.includes(a)){const _=o.allowed_roles.filter(f=>f!==a);S({...o,allowed_roles:_})}else{const _=[...o.allowed_roles||[],a];S({...o,allowed_roles:_})}},c=async()=>{if(!R){W(!0);try{const a=new FormData;a.append("nonce",WPTB_CFG.SETTINGS.nonce.general),a.append("action","wp_table_builder_settings"),a.append("options",JSON.stringify(o));const l=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:a}),_=await l.json();if(!l.ok){dt(_.message||"Something went wrong","error");return}if(_.error){dt(_.error,"error");return}dt(_.message||"Settings saved successfully","success"),WPTB_CFG.SETTINGS.general=o}catch(a){console.log(a)}finally{W(!1)}}},r=()=>{S(WPTB_CFG.SETTINGS.general||{})},n=WPTB_CFG.SETTINGS.all_roles||{};return e.jsxs("div",{children:[e.jsxs("div",{className:"wptb-v2-general-settings wptb-v2-settings-area",children:[e.jsxs("div",{className:"wptb-v2-setting-group",children:[e.jsx("h3",{children:"Allowed User Roles"}),e.jsx("div",{className:"wptb-v2-setting-group-items",children:Object.keys(n).map(a=>{var l;return e.jsx(St,{label:n[a].name,checked:(l=o.allowed_roles)==null?void 0:l.includes(a),onChange:()=>u(a)},a)})})]}),e.jsxs("div",{className:"wptb-v2-setting-group",children:[e.jsx("h3",{children:"Table Settings"}),e.jsxs("div",{className:"wptb-v2-setting-group-items",children:[e.jsx(St,{label:"Show edit link in frontend",checked:!!o.allow_edit_link_frontend,onChange:()=>S({...o,allow_edit_link_frontend:!o.allow_edit_link_frontend})}),e.jsx(St,{label:"Give credits to WP Table Builder",checked:!!o.give_credits_to_wp_table_builder,onChange:()=>S({...o,give_credits_to_wp_table_builder:!o.give_credits_to_wp_table_builder})}),e.jsx(St,{label:"Restrict users access to own tables",checked:!!o.restrict_users_to_their_tables,onChange:()=>S({...o,restrict_users_to_their_tables:!o.restrict_users_to_their_tables})}),e.jsx(St,{label:"Disable Emoji to Image conversion",checked:!!o.emoji_image_conversion_disabled_status,onChange:()=>S({...o,emoji_image_conversion_disabled_status:!o.emoji_image_conversion_disabled_status})}),e.jsx(St,{label:"Disable theme styles",checked:!!o.disable_theme_styles_for_all,onChange:()=>S({...o,disable_theme_styles_for_all:!o.disable_theme_styles_for_all})})]})]}),e.jsxs("div",{className:"wptb-v2-setting-group",children:[e.jsx("h3",{children:"Plugin Options"}),e.jsxs("div",{className:"wptb-v2-setting-group-items",children:[e.jsx(ce,{rtl:!0,label:"Take over the entire screen in builder",checked:!!o.take_over_entire_screen,onChange:a=>S({...o,take_over_entire_screen:a})}),e.jsx(Tt,{label:"Sidebar Location",value:o.panel_location||"left",onChange:a=>S({...o,panel_location:a}),options:[{value:"left",label:"Left"},{value:"right",label:"Right"}]}),e.jsx(St,{label:"Enable Version Sync",checked:!!o.enable_version_sync,onChange:()=>S({...o,enable_version_sync:!o.enable_version_sync})})]})]})]}),e.jsxs("div",{className:"wptb-v2-setting-btns",children:[e.jsx("button",{type:"button",className:"wptb-btn-revert",onClick:r,disabled:R,children:"Revert"}),e.jsxs("button",{type:"button",className:"wptb-btn-save",onClick:c,disabled:R,children:[R&&At," Save"]})]})]})},xr=()=>{var r;const[R,W]=X.useState(((r=WPTB_CFG.SETTINGS)==null?void 0:r.table_style)||""),[o,S]=X.useState(!1),u=async()=>{if(!o){S(!0);try{const n=new FormData;n.append("nonce",WPTB_CFG.SETTINGS.nonce.styles),n.append("action","wptb-general-styles"),n.append("styles",R);const a=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:n}),l=await a.json();if(!a.ok){dt(l.message||"Something went wrong","error");return}if(l.error){dt(l.error,"error");return}dt(l.message||"Settings saved successfully","success"),WPTB_CFG.SETTINGS.table_style=R}catch(n){console.log(n)}finally{S(!1)}}},c=()=>{W(WPTB_CFG.SETTINGS.table_style||"")};return e.jsxs("div",{children:[e.jsxs("div",{className:"wptb-v2-settings-area wptb-v2-table-settings",children:[e.jsx("p",{children:"These styles will be applied to all tables."}),e.jsx(De,{label:"Custom CSS",rows:10,value:R,onChange:W})]}),e.jsxs("div",{className:"wptb-v2-setting-btns",children:[e.jsx("button",{type:"button",className:"wptb-btn-revert",onClick:c,disabled:o,children:"Revert"}),e.jsxs("button",{type:"button",className:"wptb-btn-save",onClick:u,disabled:o,children:[o&&At," Save"]})]})]})},kr=()=>{var _,f;const[R,W]=X.useState(!1),[o,S]=X.useState(!1),[u,c]=X.useState(((_=WPTB_CFG.SETTINGS)==null?void 0:_.lazy_load)||{enabled:!1}),[r,n]=X.useState(WPTB_CFG.SETTINGS.lazy_load_pro),a=async()=>{if(!R){W(!0);try{const k=new FormData;k.append("nonce",WPTB_CFG.SETTINGS.nonce.lazy_load),k.append("action","wptb_lazy_load");const h={...u,...r,visibilityPercentage:parseInt(r.visibilityPercentage).toString(),iconSize:parseInt(r.iconSize).toString(),imageLoadAnimationSpeed:parseInt(r.imageLoadAnimationSpeed).toString(),imageLoadAnimationPerspective:parseInt(r.imageLoadAnimationPerspective).toString(),iconAnimationOptions:{none:"none",heartBeat:"heartbeat",rotate:"rotate",flip:"flip",jump:"jump"},imageLoadAnimationOptions:{none:"none",slideIn:"slide in",growSling:"grow sling",flash:"flash",flip:"flip"}};k.append("settings",JSON.stringify(h));const b=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:k}),i=await b.json();if(!b.ok){dt(i.message||"Something went wrong","error");return}if(i.error){dt(i.error,"error");return}dt(i.message||"Settings saved successfully","success"),WPTB_CFG.SETTINGS.lazy_load=u,WPTB_CFG.SETTINGS.lazy_load_pro=r}catch(k){console.log(k)}finally{W(!1)}}},l=()=>{c(WPTB_CFG.SETTINGS.lazy_load),n(WPTB_CFG.SETTINGS.lazy_load_pro)};return e.jsxs("div",{children:[e.jsxs("div",{className:"wptb-v2-settings-area wptb-v2-lazy-load-settings",children:[e.jsxs("div",{children:[e.jsx(Ot,{title:"Enable Lazy Load",initialOpen:!0,className:"wptb-v2-lazy-load-group",children:e.jsx(ce,{label:"Enable Lazy Loading Images",checked:!!u.enabled,onChange:k=>c({enabled:k})})}),e.jsxs("div",{className:"wptb-v2-lazy-load-preview",children:[e.jsx("h4",{children:"Preview"}),e.jsxs("div",{className:"wptb-v2-lazy-load-preview-image",children:[e.jsx("img",{src:WPTB_CFG.PLUGIN_URL+"/v2/assets/images/wptb-logo.png",className:`${r.imageLoadAnimation} to-${r.imageLoadAnimationDirection}`,style:{"--transition-speed":1/Number(r.imageLoadAnimationSpeed)+"s"},"data-visible":o}),(r==null?void 0:r.imageLoadAnimation)==="flash"&&e.jsx("div",{style:{background:r.flashColor}})]}),e.jsxs("div",{className:"wptb-v2-lazy-load-preview-btns",children:[e.jsx("button",{type:"button",className:"wptb-v2-lazy-load-preview-reset",disabled:!o,onClick:()=>S(!1),children:"Reset"}),e.jsx("button",{type:"button",className:"wptb-v2-lazy-load-preview-reload",disabled:o,onClick:()=>S(!0),children:"Load Image"})]}),e.jsxs("div",{className:"wptb-v2-lazy-load-notice",children:[e.jsx("h5",{children:"important:"}),e.jsx("p",{children:"After enable, if you are getting any conflicts with your third party lazy load plugin, please whitelist table image elements with wptb-image-element-target class name from plugin settings."})]})]})]}),e.jsxs("div",{className:"wptb-v2-lazy-load-pro",children:[e.jsx(Ue,{name:"global.lazy_load",props:r,setProps:n}),e.jsxs(We,{name:"global.lazy_load",children:[e.jsxs(Ot,{title:"General Options",initialOpen:!0,className:"wptb-v2-lazy-load-group",children:[e.jsx(Ut,{label:"Visibility Percentage",value:r==null?void 0:r.visibilityPercentage,allowedUnits:{"%":{}}}),e.jsx(Wt,{label:"Background Color",value:r==null?void 0:r.backgroundColor})]}),e.jsxs(Ot,{title:"Icon Options",initialOpen:!0,className:"wptb-v2-lazy-load-group",children:[e.jsx(Me,{label:"Icon",value:(f=r==null?void 0:r.iconName)==null?void 0:f.name}),e.jsx(Wt,{label:"Icon Color",value:r==null?void 0:r.iconColor}),e.jsx(Ut,{label:"Icon Size",value:r==null?void 0:r.iconSize}),e.jsx(Tt,{label:"Icon Animation",value:r==null?void 0:r.iconAnimation,options:[{value:"none",label:"None"},{value:"heartbeat",label:"Heartbeat"},{value:"rotate",label:"Rotate"},{value:"flip",label:"Flip"},{value:"jump",label:"Jump"}]})]}),e.jsxs(Ot,{title:"Image Load Options",initialOpen:!0,className:"wptb-v2-lazy-load-group",children:[e.jsx(Tt,{label:"Animation",value:r==null?void 0:r.imageLoadAnimation,options:[{value:"none",label:"None"},{value:"slide-in",label:"Slide In"},{value:"grow-sling",label:"Grow Sling"},{value:"flash",label:"Flash"},{value:"flip",label:"Flip"}]}),(r==null?void 0:r.imageLoadAnimation)==="slide-in"&&e.jsx(Tt,{label:"Direction",value:r==null?void 0:r.imageLoadAnimationDirection,options:[{value:"left",label:"To Left"},{value:"right",label:"To Right"},{value:"top",label:"To Top"},{value:"bottom",label:"To Bottom"}]}),(r==null?void 0:r.imageLoadAnimation)==="flash"&&e.jsx(Wt,{label:"Flash Color",value:r==null?void 0:r.flashColor}),(r==null?void 0:r.imageLoadAnimation)==="flip"&&e.jsxs(e.Fragment,{children:[e.jsx(Tt,{label:"Direction",value:r==null?void 0:r.imageLoadAnimationDirection,options:[{value:"left",label:"To Left"},{value:"right",label:"To Right"}]}),e.jsx(Ut,{label:"Perspective",value:r==null?void 0:r.imageLoadAnimationPerspective})]}),e.jsx(Gt,{label:"Speed",value:Number(r==null?void 0:r.imageLoadAnimationSpeed)||5,max:10})]})]})]})]}),e.jsxs("div",{className:"wptb-v2-setting-btns",children:[e.jsx("button",{type:"button",className:"wptb-btn-revert",onClick:l,disabled:R,children:"Revert"}),e.jsxs("button",{type:"button",className:"wptb-btn-save",onClick:a,disabled:R,children:[R&&At," Save"]})]})]})};let vt=null;const Sr=R=>{const W={},o=document.createElement("div");return o.innerHTML=R,o.querySelectorAll("h4").forEach(u=>{var r,n;const c=(r=u.textContent)==null?void 0:r.trim();c&&(W[c]=((n=u.nextElementSibling)==null?void 0:n.outerHTML)||"")}),W},jr=()=>{const[R,W]=X.useState(vt===null),[o,S]=X.useState(!1),[u,c]=X.useState(vt),[r,n]=X.useState((vt==null?void 0:vt.version)||"");X.useEffect(()=>{if(vt!==null){W(!1),c(vt),n(vt.version);return}fetch("https://api.wordpress.org/plugins/info/1.0/wp-table-builder.json").then(l=>l.json()).then(l=>{if(vt)return;const _={};Object.keys(l.versions).reverse().slice(1,6).forEach(k=>{_[k]=l.versions[k]}),vt={version:l.version,versions:_,changelog:Sr(l.sections.changelog),latest:Object.keys(l.versions).at(-2)},c(vt),n(vt.version)}).finally(()=>{W(!1)})},[]);const a=async()=>{if(o)return;S(!0);const l=new FormData;l.append("action","version_control_manager"),l.append("nonce",WPTB_CFG.SETTINGS.nonce.version),l.append("version",r);try{const _=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:l}),f=await _.json();if(!_.ok){dt(f.message||"Something went wrong","error");return}if(f.error){dt(f.error,"error");return}dt(f.message||"Settings saved successfully","success"),window.location.reload()}catch{dt("Something went wrong","error")}S(!1)};return e.jsxs("div",{className:"wptb-v2-settings-area wptb-v2-version-settings",children:[R||!u?e.jsx("div",{className:"wptb-v2-loading",children:e.jsx(Zt,{})}):e.jsxs("div",{className:"wptb-v2-version-settings-content",children:[e.jsxs("div",{className:"wptb-v2-version-settings-control",children:[e.jsx("p",{className:"wptb-v2-version-settings-encourage",children:"If you are having issues with the current version of the plugin, you can rollback to a previous version."}),e.jsxs("div",{className:"wptb-v2-version-settings-info",children:[e.jsx("div",{children:"Current Version"}),e.jsxs("div",{children:[e.jsx("div",{className:mt({"wptb-v2-version-settings-info-success":u.latest===WPTB_CFG.SETTINGS.version,"wptb-v2-version-settings-info-warning":u.latest!==WPTB_CFG.SETTINGS.version})}),e.jsx("span",{children:WPTB_CFG.SETTINGS.version})]}),e.jsx("div",{children:"Latest Version"}),e.jsxs("div",{children:[e.jsx("div",{className:mt({"wptb-v2-version-settings-info-success":u.latest===WPTB_CFG.SETTINGS.version,"wptb-v2-version-settings-info-warning":u.latest!==WPTB_CFG.SETTINGS.version})}),e.jsx("span",{children:u.latest})]}),e.jsx("div",{children:"Install"}),e.jsx("div",{children:e.jsx("select",{value:r,onChange:l=>n(l.target.value),children:Object.keys(u.versions).map(l=>e.jsx("option",{value:l,children:l},l))})})]}),e.jsxs("div",{className:"wptb-v2-version-settings-warning",children:[e.jsx("h5",{children:"warning:"}),e.jsx("p",{children:"Previous versions may be unstable and unsecure, continue with your own risk and take a backup."})]})]}),e.jsxs("div",{className:"wptb-v2-version-settings-log",children:[e.jsx("h4",{children:r}),e.jsx("div",{dangerouslySetInnerHTML:{__html:u.changelog[r]||""}})]})]}),e.jsx("div",{className:"wptb-v2-setting-btns",children:e.jsxs("button",{type:"button",className:"wptb-btn-save",disabled:o,onClick:a,children:[o&&At," Install ",r]})})]})},Xt={general:yr,tableStyles:xr,lazyLoad:kr,version:jr},Cr=({setPage:R})=>{const[W,o]=X.useState("general"),[S,u]=X.useState(!1),[c,r]=X.useState(!1),n=async()=>{if(r(!1),!S){u(!0);try{const a=new FormData;a.append("nonce",WPTB_CFG.SETTINGS.nonce.general),a.append("action","wptb_toggle_legacy_builder");const l=await fetch(WPTB_CFG.ADMIN_URL,{method:"POST",body:a}),_=await l.json();if(!l.ok){dt(_.message||"Something went wrong","error");return}if(_.error){dt(_.error,"error");return}dt(_.message||"Settings saved successfully","success"),window.location.replace(window.location.href.replace("wptb-settings","wp-table-builder-settings"))}catch(a){console.log(a)}finally{u(!1)}}};return e.jsxs("div",{className:"wptb-v2-page wptb-v2-settings-page",children:[e.jsx(zt,{setPage:R,page:"settings"}),e.jsxs("div",{className:"wptb-v2-page-content",children:[e.jsxs("div",{className:"wptb-v2-page-content-top",children:[e.jsx("h2",{children:jt("WP Table Builder")}),e.jsxs("button",{type:"button",className:"wptb-v2-switch-builder",disabled:S,onClick:()=>r(!0),children:[S&&At," Switch to Legacy Builder"]})]}),e.jsxs("div",{className:"wptb-v2-page-content-main",children:[e.jsxs("div",{className:"wptb-v2-settings-tabs",children:[e.jsx("button",{className:W==="general"?"wptb-v2-active":"",onClick:()=>o("general"),children:"General"}),e.jsx("button",{className:W==="tableStyles"?"wptb-v2-active":"",onClick:()=>o("tableStyles"),children:"Table Styles"}),e.jsx("button",{className:W==="lazyLoad"?"wptb-v2-active":"",onClick:()=>o("lazyLoad"),children:"Lazy Load"}),e.jsx("button",{className:W==="version"?"wptb-v2-active":"",onClick:()=>o("version"),children:"Version Control"})]}),e.jsx("div",{children:Xt[W]&&X.createElement(Xt[W])})]})]}),c&&e.jsxs(ne,{onClose:()=>r(!1),title:"Are you sure to switch?",icon:te,children:[e.jsx("p",{children:"Are you sure you want to miss out on the new features and next generation experience? You can always switch back to the legacy builder."}),e.jsxs("div",{className:"wptb-v2-modal-actions",children:[e.jsx("button",{type:"button",onClick:n,children:"Yes"}),e.jsx("button",{type:"button",onClick:()=>r(!1),children:"No"})]})]})]})},Er={tables:tr,builder:wr,create:sr,import:fr,export:_r,settings:Cr},Qt=()=>{var o,S;const R=new URLSearchParams(window.location.search),W={};for(const[u,c]of R)W[u]=c;return W.page=((S=(o=W.page)==null?void 0:o.replace("wptb",""))==null?void 0:S.substring(1))||"tables",W};function Tr(){const[R,W]=X.useState({}),o=(S,u)=>{u=u||{};const r={page:S==="tables"?"wptb":`wptb-${S}`};for(const a in u){const l=u[a];l&&(r[a]=l)}const n=new URLSearchParams(r).toString();window.history.pushState(null,"","?"+n),u.page=S,W(u)};return X.useEffect(()=>{const S=()=>{const u=Qt();W(u)};return W(Qt()),window.addEventListener("popstate",S),()=>{window.removeEventListener("popstate",S)}},[]),[R,o]}const Ar=()=>{const[R,W]=Tr(),o=Er[R.page];if(o)return e.jsx(o,{...R,setPage:W})};document.addEventListener("DOMContentLoaded",()=>{const R=document.querySelector("#wptb-app-root");!R||typeof WPTB>"u"||Ge(R).render(e.jsx(Ze.StrictMode,{children:e.jsxs(He,{store:Ft,children:[e.jsx(Ar,{}),e.jsx(Ve,{}),e.jsx(qe,{})]})}))});
