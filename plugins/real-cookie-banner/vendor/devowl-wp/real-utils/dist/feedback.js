(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=jQuery;var n=e.n(t);const i=devowlWp_utils;let o;const a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(o||(o=(0,i.createLocalizationFactory)("devowl-wp-real-utils"))).__(...t)},s=()=>window[i.BaseOptions.getPureSlug("real-utils",!0)].others;let l;const r={path:"/feedback/:slug",method:i.RouteHttpVerb.POST};class c{constructor(e,t,n){this.slug=e,this.$handler=n,this.href=t,this.init()}async close(e,t){if(void 0===t&&(t=!1),e.preventDefault(),this.$handler.pointer("widget").find("input, .button").attr("disabled","disabled"),t)window.open(this.href,"_self");else{const{choice:t,note:n,email:o}=this.getValidInput();try{"none"!==t&&await function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(l||(l=(0,i.createRequestFactory)(window[i.BaseOptions.getPureSlug("real-utils",!0)]))).request(...t)}({location:r,request:{reason:t,note:n,email:o},params:{slug:this.slug}})}catch(e){}finally{window.open(this.href,"_self")}}}buttons(){const e=n()(`<a class="button" href="#">${a("Contact support")}</a>`).click((()=>{window.open("https://devowl.io/support/","_blank")})),t=n()(`<a class="button" href="#">${a("Skip & Deactivate")}</a>`).click((e=>{this.close(e,!0)})),i=n()(`<a class="hidden button button-primary" href="#">${a("Deactivate")}</a>`).click((e=>{this.validate()&&this.close(e,!1)}));return n()('<div class="real-utils-pointer-buttons" />').append(i,t,e)}validate(){return this.validateNote()&&this.validatePrivacy()&&this.validateEmail()}validateNote(){const e=n()(`[name="${this.slug}-skip-note"]`).is(":checked"),t=n()(`.notice-${this.slug}-note`),{choice:i,note:o}=this.getValidInput();return e||o||-1!==["upgrade-to-pro","temp","none"].indexOf(i)?(t.hide(),!0):(t.show(),!1)}validatePrivacy(){const e=n()(`[name="${this.slug}-privacy"]`).is(":checked"),t=n()(`.notice-${this.slug}-privacy`),{email:i}=this.getValidInput();return i&&!e?(t.show(),!1):(t.hide(),!0)}validateEmail(){const e=n()(`.notice-${this.slug}-email`),{email:t}=this.getValidInput();return t&&!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.toLowerCase())?(e.show(),!1):(e.hide(),!0)}getValidInput(){const e=n()(`[name="${this.slug}-deactivate-choice"]:checked`).val(),t=n()(`[name="${this.slug}-note"]`).val(),i=t?n()(`[name="${this.slug}-email"]`).val():"";return!e&&t?{choice:"other",note:t,email:i}:e?{choice:e,note:t,email:i}:void 0}init(){const e=a("Too bad you are leaving"),t=s().names[this.slug],i=a("Please give us feedback why you deactivate <strong>%s</strong>.",t),o={"upgrade-to-pro":a("Upgrade to PRO Version"),"not-working":a("Plugin did not work"),"missing-features":a("Not the features I want"),incompatible:a("Incompatible with other themes or plugins"),"missing-doc":a("Lack of documentation"),"found-better-plugin":a("Found a better plugin"),temp:a("Temporary deactivation"),none:a("I do not want to give feedback"),other:a("Other")},l=this.$handler.pointer({pointerClass:"wp-pointer real-utils-feedback-pointer",content:`<h3>${e}</h3><p>${i}</p>\n<fieldset>\n    ${Object.keys(o).map((e=>`<label class="col-2"><input type="radio" name="${this.slug}-deactivate-choice" value="${e}" /> ${o[e]}</label>`)).join("")}\n        <div class="clear"></div>\n        <br />\n    <label class="${this.slug}-section-note">\n        <strong>${a("What could we do better?")}</strong>\n        <input type="text" class="regular-text" name="${this.slug}-note" />\n        <div class="notice notice-${this.slug}-note notice-error notice-alt hidden"><p>${a("Please enter a text here or check the box below.")}</p></div>\n    </label>\n    <label class="${this.slug}-section-note">\n        <input type="checkbox" name="${this.slug}-skip-note" /> ${a("I don't want to add a comment and hence not help to make %s better.",t)}\n    </label>\n    <label class="${this.slug}-section-email" style="display:none">\n        <br /><strong>${a("Email for answer/solution (optional)?")}</strong>\n        <input type="text" class="regular-text" name="${this.slug}-email" />\n        <div class="notice notice-${this.slug}-email notice-error notice-alt hidden"><p>${a("Please provide a valid email.")}</p></div>\n    </label>\n    <label class="${this.slug}-section-email" style="display:none">\n        <input type="checkbox" name="${this.slug}-privacy" /> ${a('I would like to receive an answer for my issue. For this purpose I agree to the data processing of my feedback and my email address. I have read the devowl.io <a href="https://devowl.io/privacy-policy/" target="_blank">privacy policy</a> and agree to it.',t)}\n        <div class="notice notice-${this.slug}-privacy notice-error notice-alt hidden"><p>${a("If you would like to be contacted by us, please accept the privacy policy. If you prefer not to be contacted, leave the email field blank.")}</p></div>\n    </label>\n</fieldset>`,buttons:this.buttons.bind(this)}).pointer("open").pointer("widget");l.find("input").on("input",(()=>{const e=this.getValidInput(),t="none"===(null==e?void 0:e.choice);l.find(".button:eq(0)").css("display",e?"inline-block":"none"),l.find(".button:eq(1)").css("display",e?"none":"inline-block"),l.find(".button:eq(1)").css("display",e?"none":"inline-block"),n()(`[name="${this.slug}-skip-note"]`).parent().css("display",(null==e?void 0:e.note)?"none":"block"),n()(`.${this.slug}-section-email`).css("display",(null==e?void 0:e.note)&&!t?"block":"none"),n()(`.${this.slug}-section-note`).css("display",t?"none":"block")}))}}n()(document).on("click","tr.active .row-actions .deactivate a",(function(e){const[t]=n()(this).parents("tr.active").data("plugin").split("/");if(s().names[t]){const i=n()(this).attr("href");return new c(t,i,n()(this)),e.preventDefault(),!1}return!0}))})();
//# sourceMappingURL=https://sourcemap.devowl.io/real-cookie-banner/5.1.6/569ea29e793da5870080e888f26efa93/feedback.js.map
