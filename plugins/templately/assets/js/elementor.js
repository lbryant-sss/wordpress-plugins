(()=>{"use strict";var e={};function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}function l(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,o(l.key),l)}}function i(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const s=window.wp.i18n;function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}var p=function(){function e(){var n,o,l,i,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(this,e),o=this,l=a(l=e),(n=r(o,d()?Reflect.construct(l,[],a(o).constructor):l.apply(o,i))).openConditionsModal=u.openConditionsModal,n}return c(e,elementorModules.editor.utils.Module),i(e,[{key:"onElementorPreviewLoaded",value:function(){var e;this.addPanelFooterSubmenuItems(),"templately_library"===(null===(e=window.templately)||void 0===e?void 0:e.post_type)&&this.addConditionPanelFooterSubmenuItems()}},{key:"addConditionPanelFooterSubmenuItems",value:function(){var e=elementor.getPanelView().footer.currentView;e.ui.templatelyMenuConditions||(e.ui.templatelyMenuConditions=e.addSubMenuItem("saver-options",{before:"save-template",name:"templately-conditions",icon:"eicon-flow",title:(0,s.__)("Condition (by Templately)","templately"),callback:this.openConditionsModal}))}},{key:"addPanelFooterSubmenuItems",value:function(){var e=elementor.getPanelView().footer.currentView;e.ui.templatelySavePage||(e.ui.templatelySavePage=e.addSubMenuItem("saver-options",{before:"save-template",name:"templately-save-page",icon:"eicon-folder",title:(0,s.__)("Save Page in Templately","templately"),callback:function(){window.templatelyModal({route:"clouds/save-template"},null)}}))}},{key:"removeFooterMenuItems",value:function(){var e=elementor.getPanelView().footer.currentView;e.ui.templatelyMenuConditions&&(e.removeSubMenuItem("saver-options",{name:"templately-conditions"}),delete e.ui.templatelyMenuConditions),e.ui.templatelySavePage&&(e.removeSubMenuItem("saver-options",{name:"templately-save-page"}),delete e.ui.templatelySavePage)}}])}();const m=window.React;var y=e.n(m);const f=elementorV2.editorAppBar,v=elementorV2.icons;function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}var b=function(){function e(){var n,o,l,i,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(this,e),o=this,l=a(l=e),(n=r(o,h()?Reflect.construct(l,[],a(o).constructor):l.apply(o,i))).openConditionsModal=u.openConditionsModal,n}return c(e,elementorModules.editor.utils.Module),i(e,[{key:"onElementorInit",value:function(){var e;this.registerHeaderMenuItems(),"templately_library"===(null===(e=window.templately)||void 0===e?void 0:e.post_type)&&this.registerConditionMenuItems()}},{key:"registerConditionMenuItems",value:function(){var e=this;f.documentOptionsMenu.registerAction({id:"document-display-conditions",group:"default",overwrite:!0,useProps:function(){return{visible:!1,title:"",icon:function(){return null}}}}),f.documentOptionsMenu.registerAction({group:"save",id:"templately-document-display-conditions",priority:20,useProps:function(){return{icon:function(){return y().createElement("i",{className:"elementor-icon eicon-flow","aria-hidden":"true"})},title:(0,s.__)("Condition (by Templately)","elementor"),onClick:e.openConditionsModal}}})}},{key:"registerHeaderMenuItems",value:function(){f.documentOptionsMenu.registerAction({group:"save",id:"templately-document-save-page",priority:20,useProps:function(){return{icon:v.FolderIcon,title:(0,s.__)("Save Page in Templately","elementor"),onClick:function(){window.templatelyModal({route:"clouds/save-template"},null)}}}})}}])}();function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(w=function(){return!!e})()}const g=function(){function e(n){var l,i,u,c;return t(this,e),i=this,u=a(u=e),function(e,t){(t=o(t))in e?Object.defineProperty(e,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):e[t]=null}(l=r(i,w()?Reflect.construct(u,[],a(i).constructor):u.apply(i,c)),"callback"),l.templatelyModal=n,l}return c(e,$e.modules.hookData.Dependency),i(e,[{key:"getCommand",value:function(){return"document/save/default"}},{key:"getId",value:function(){return"templately-theme-builder-show-conditions"}},{key:"register",value:function(){var e,t,n=elementor.config.document.templately_builder;"templately_library"===(null==n?void 0:n.post_type)&&(null===(e=$e.hooks.data.callbacksFlatList["elementor-pro-theme-builder-show-conditions"])||void 0===e||e.deactivate(),null===(t=elementor.getPanelView().footer.currentView.ui.menuConditions)||void 0===t||t.remove());$e.hooks.data.callbacksFlatList[this.getId()]||(this.callback=$e.hooks.registerDataDependency(this))}},{key:"unRegister",value:function(){this.callback.deactivate()}},{key:"getConditions",value:function(e){var t,n=e.force;if(void 0!==n&&n)return!1;var o=elementor.config.document.templately_builder;if(null==o||null===(t=o.conditions)||void 0===t||!t.template_conditions)return!1;var l=o.conditions.template_conditions.length>0;return"templately_library"===o.post_type&&!l}},{key:"apply",value:function(){return this.templatelyModal(),!1}}])}();function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(M=function(){return!!e})()}var k=function(){function e(){var n,o,l,i;return t(this,e),o=this,l=a(l=e),(n=r(o,M()?Reflect.construct(l,[],a(o).constructor):l.apply(o,i))).builderShowConditions=null,n.headerMenuModule=null,n.footerMenuModule=null,n.initSubModules(),n}return c(e,elementorModules.editor.utils.Module),i(e,[{key:"onElementorInit",value:function(){}},{key:"onElementorPreviewLoaded",value:function(){this.initShowConditions()}},{key:"initSubModules",value:function(){this.headerMenuModule=new b({openConditionsModal:this.openTemplatelyConditionsModal.bind(this)}),this.footerMenuModule=new p({openConditionsModal:this.openTemplatelyConditionsModal.bind(this)}),this.builderShowConditions=new g(this.openTemplatelyConditionsModal.bind(this))}},{key:"initShowConditions",value:function(){var e;this.builderShowConditions&&"templately_library"===(null===(e=window.templately)||void 0===e?void 0:e.post_type)&&this.builderShowConditions.register()}},{key:"openTemplatelyConditionsModal",value:function(){var e={platform:"elementor",conditions:!0,templateID:new URLSearchParams(document.location.search).get("post")};window.templatelyModal(e,null)}},{key:"getBuilderShowConditions",value:function(){return this.builderShowConditions}}])}();function S(e,t,n,o,l,i,r){try{var a=e[i](r),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(o,l)}const _=window.regeneratorRuntime;var C=e.n(_);function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(P=function(){return!!e})()}var B=function(){function e(){return t(this,e),n=this,l=arguments,o=a(o=e),r(n,P()?Reflect.construct(o,l||[],a(n).constructor):o.apply(n,l));var n,o,l}return c(e,elementorModules.editor.utils.Module),i(e,[{key:"onElementorInit",value:function(){this.initUtilityFunctions()}},{key:"initUtilityFunctions",value:function(){this.registerSiteLogoUpdate()}},{key:"registerSiteLogoUpdate",value:function(){jQuery(document).on("click",'[data-event="tlSiteLogo:update"]',this.handleSiteLogoUpdate.bind(this))}},{key:"handleSiteLogoUpdate",value:(n=C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,$e.run("panel/global/open");case 1:$e.route("panel/global/settings-site-identity");case 2:case"end":return e.stop()}},e)}),o=function(){var e=this,t=arguments;return new Promise(function(o,l){var i=n.apply(e,t);function r(e){S(i,o,l,r,a,"next",e)}function a(e){S(i,o,l,r,a,"throw",e)}r(void 0)})},function(){return o.apply(this,arguments)})}]);var n,o}();function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(T=function(){return!!e})()}var O=function(){function e(){return t(this,e),n=this,l=arguments,o=a(o=e),r(n,T()?Reflect.construct(o,l||[],a(n).constructor):o.apply(n,l));var n,o,l}return c(e,Marionette.Behavior),i(e,[{key:"ui",value:function(){return{templatelyButton:".elementor-add-templately-button"}}},{key:"events",value:function(){return{"click @ui.templatelyButton":"onTemplatelyButtonClick"}}},{key:"onRender",value:function(){this.addTemplatelyButton()}},{key:"addTemplatelyButton",value:function(){var e=this.$el.find(".elementor-add-section-inner");if(e.length&&!e.find(".elementor-add-templately-button").length){var t=jQuery('\n\t\t\t\t<div data-mode="dark" class="elementor-add-section-area-button elementor-add-templately-button"\n\t\t\t\t\t title="'.concat((0,s.__)("Templately","templately"),'"\n\t\t\t\t\t data-tooltip="').concat((0,s.__)("Templately","templately"),'"\n\t\t\t\t\t aria-label="').concat((0,s.__)("Templately","templately"),'">\n\t\t\t\t\t<i class="eicon-plus" aria-hidden="true"></i>\n\t\t\t\t</div>\n\t\t\t')),n=e.find(".elementor-add-section-drag-title");n.length?n.before(t):e.append(t)}}},{key:"onTemplatelyButtonClick",value:function(e){e.preventDefault(),e.stopPropagation(),window.templatelyModal({route:"elementor/pages"},e)}}])}();function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(E=function(){return!!e})()}var I=function(){function e(){return t(this,e),n=this,l=arguments,o=a(o=e),r(n,E()?Reflect.construct(o,l||[],a(n).constructor):o.apply(n,l));var n,o,l}return c(e,elementorModules.editor.utils.Module),i(e,[{key:"onElementorInit",value:function(){elementor.hooks.addFilter("views/add-section/behaviors",this.registerAddSectionBehavior.bind(this))}},{key:"registerAddSectionBehavior",value:function(e){return e.templately={behaviorClass:O},e}}])}();function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(R=function(){return!!e})()}var j=function(){function e(){var n,o,l,i;return t(this,e),o=this,l=a(l=e),(n=r(o,R()?Reflect.construct(l,[],a(o).constructor):l.apply(o,i))).addSectionModule=null,n.initSubModules(),n}return c(e,elementorModules.editor.utils.Module),i(e,[{key:"onElementorInit",value:function(){this.registerHookFilters()}},{key:"initSubModules",value:function(){this.addSectionModule=new I}},{key:"registerHookFilters",value:function(){elementor.hooks.addFilter("elements/widget/contextMenuGroups",this.templatelyPageSaveMenu.bind(this)),elementor.hooks.addFilter("elements/section/contextMenuGroups",this.templatelyPageSaveMenu.bind(this)),elementor.hooks.addFilter("elements/section/contextMenuGroups",this.templatelyBlockSaveMenu.bind(this)),elementor.hooks.addFilter("elements/container/contextMenuGroups",this.templatelyPageSaveMenu.bind(this)),elementor.hooks.addFilter("elements/container/contextMenuGroups",this.templatelyBlockSaveMenu.bind(this))}},{key:"templatelyPageSaveMenu",value:function(e){var t=e.find(function(e){return"templately_cloud_section"===e.name}),n={name:"templately_cloud_push",icon:"eicon-cloud-check",title:(0,s.__)("Save Page in Templately","templately"),callback:function(){var e={route:"clouds/save-template",currentElement:elementor.previewView.el.firstElementChild.firstElementChild,page:!0};window.templatelyModal(e,null)}};if(t)t.actions.some(function(e){return"templately_cloud_push"===e.name})||t.actions.push(n);else{var o={name:"templately_cloud_section",actions:[n]};e.splice(3,0,o)}return e}},{key:"templatelyBlockSaveMenu",value:function(e,t){var n=e.find(function(e){return"templately_cloud_section"===e.name}),o={name:"templately_cloud_push_section",icon:"eicon-cloud-check",title:(0,s.__)("Save Block in Templately","templately"),callback:function(){var e={route:"clouds/save-template",currentElement:t,page:!1};window.templatelyModal(e,null)}};if(n)n.actions.some(function(e){return"templately_cloud_push_section"===e.name})||n.actions.push(o);else{var l={name:"templately_cloud_section",actions:[o]};e.splice(3,0,l)}return e}}])}();function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(F=function(){return!!e})()}var x,L,V=function(){function e(){var n,o,l,i;return t(this,e),o=this,l=a(l=e),(n=r(o,F()?Reflect.construct(l,[],a(o).constructor):l.apply(o,i))).subModules={},n.initSubModules(),n}return c(e,elementorModules.editor.utils.Module),i(e,[{key:"onElementorInit",value:function(){}},{key:"onElementorPreviewLoaded",value:function(){}},{key:"initSubModules",value:function(){try{this.subModules.elementor=new j,this.subModules.utils=new B,this.subModules.conditions=new k}catch(e){console.error("Error initializing sub-modules:",e)}}},{key:"getSubModule",value:function(e){return this.subModules[e]||null}},{key:"getBuilderShowConditions",value:function(){var e;return(null===(e=this.subModules.conditions)||void 0===e?void 0:e.getBuilderShowConditions())||null}},{key:"destroy",value:function(){Object.values(this.subModules).forEach(function(e){try{e.destroy&&e.destroy()}catch(t){console.error("Error destroying module:",t,e)}}),this.subModules={}}}])}();jQuery,window.templatelyModal=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o=Date.now();return null!=n&&(e=(e=jQuery(n.currentTarget).parents(".elementor-section-wrap").children(".elementor-add-section").length)>1?e-1:e,o=jQuery(n.currentTarget).parents(".elementor-add-section").index(),o=e>1&&o>0?o-e:o,jQuery(n.currentTarget).parents(".elementor-add-section").hasClass("elementor-add-section-inline")||(o=Date.now())),window.TemplatelyIndex=o,t.insertIndex=o,window.TemplatelyModal=elementorCommon.dialogsManager.createWidget("lightbox",{id:"templately-elementor",headerMessage:!1,message:"",hide:{auto:!1,onClick:!1,onOutsideClick:!1,onOutsideContextMenu:!1,onBackgroundClick:!0},position:{my:"center",at:"center"},onShow:function(){var e,n,o=window.TemplatelyModal.getElements("content"),l=null!==(e=null==t?void 0:t.platform)&&void 0!==e?e:"elementor";t.route=null!==(n=null==t?void 0:t.route)&&void 0!==n?n:"elementor/pages",window.TemplatelyAppManager.open(t,o.get(0),l)},onHide:function(){var e;window.TemplatelyModal.destroy(),null!=t&&t.conditions&&(null===(e=x)||void 0===e||e.unRegister(),$e.run("document/save/default"))}}),window.TemplatelyModal.getElements("header").remove(),window.TemplatelyModal.getElements("message").append(window.TemplatelyModal.addElement("content")),window.TemplatelyModal.show()},window.TemplatelyModal=null,L=new V,x=L.getBuilderShowConditions()})();