(()=>{"use strict";var e={20:(e,t,o)=>{var a=o(609),r=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,o){var a,m={},d=null,p=null;for(a in void 0!==o&&(d=""+o),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(p=t.ref),t)n.call(t,a)&&!c.hasOwnProperty(a)&&(m[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===m[a]&&(m[a]=t[a]);return{$$typeof:r,type:e,key:d,ref:p,props:m,_owner:s.current}}},609:e=>{e.exports=window.React},848:(e,t,o)=>{e.exports=o(20)}},t={};const o=window.wc.wcBlocksRegistry,a=window.wc.wcSettings,r=window.wp.element,n=window.wp.htmlEntities,s="mercadopago_blocks_update_cart",c=(e,t,o)=>{const a={name:e,message:t,target:o,plugin:{version:wc_mercadopago_custom_checkout_params.plugin_version},platform:{name:"woocommerce",uri:window.location.href,version:wc_mercadopago_custom_checkout_params.platform_version,location:`${wc_mercadopago_custom_checkout_params.location}_${wc_mercadopago_custom_checkout_params.theme}`}};navigator.sendBeacon("https://api.mercadopago.com/v1/plugins/melidata/errors",JSON.stringify(a))};var m,d=function o(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,o),n.exports}(848);const p="mp_checkout_blocks",i="woo-mercado-pago-ticket",u=(0,a.getSetting)("woo-mercado-pago-ticket_data",{}),_=(0,n.decodeEntities)(u.title)||"Checkout Ticket",l=e=>{const{PaymentMethodLabel:t}=e.components,o=(0,n.decodeEntities)(u?.params?.fee_title||""),a=`${_} ${o}`;return(0,d.jsx)(t,{text:a})},y=e=>{(e=>{const{extensionCartUpdate:t}=wc.blocksCheckout,{eventRegistration:o,emitResponse:a}=e,{onPaymentSetup:n,onCheckoutSuccess:m,onCheckoutFail:d}=o;(0,r.useEffect)((()=>{((e,t)=>{e({namespace:s,data:{action:"add",gateway:t}})})(t,i);const e=n((()=>({type:a.responseTypes.SUCCESS})));return()=>(((e,t)=>{e({namespace:s,data:{action:"remove",gateway:t}})})(t,i),e())}),[n]),(0,r.useEffect)((()=>{const e=m((async e=>{const t=e.processingResponse;return c("MP_TICKET_BLOCKS_SUCCESS",t.paymentStatus,p),{type:a.responseTypes.SUCCESS}}));return()=>e()}),[m]),(0,r.useEffect)((()=>{const e=d((e=>{const t=e.processingResponse;return c("MP_TICKET_BLOCKS_ERROR",t.paymentStatus,p),{type:a.responseTypes.FAIL,messageContext:a.noticeContexts.PAYMENTS,message:t.paymentDetails.message}}));return()=>e()}),[d])})(e);const{eventRegistration:t,emitResponse:o}=e,{onPaymentSetup:a}=t,n=["address_city","address_federal_unit","address_zip_code","address_street_name","address_street_number","address_neighborhood","address_complement"];return(0,r.useEffect)((()=>{const e=a((async()=>{var e;const t=document.querySelector(".mp-input"),a=document.getElementById("mp-doc-number-helper"),r=document.getElementById("mp-payment-method-helper"),s={"mercadopago_ticket[site_id]":document.getElementsByName("mercadopago_ticket[site_id]")[0].value,"mercadopago_ticket[amount]":document.getElementsByName("mercadopago_ticket[amount]")[0].value,"mercadopago_ticket[doc_type]":document.getElementsByName("mercadopago_ticket[doc_type]")[0]?.value,"mercadopago_ticket[doc_number]":null!==(e=document.getElementsByName("mercadopago_ticket[doc_number]")[0]?.value)&&void 0!==e?e:document.getElementsByName("mercadopago_ticket[docNumberError]")[0]?.value};document.querySelector(".mp-checkout-ticket-container").querySelectorAll(".mp-input-radio-radio").forEach((e=>{e.checked&&(s["mercadopago_ticket[payment_method_id]"]=e.value,r.style.display="none")}));const c=document.getElementsByName("mercadopago_ticket[site_id]")[0].value;"MLB"==c&&n.forEach((e=>{s[`mercadopago_ticket[${e}]`]=document.querySelector(`#form-checkout__${e}`).value})),"MLB"!=c&&"MLU"!=c||""!==s["mercadopago_ticket[doc_number]"]||(t.classList.add("mp-error"),d(a,"flex")),s["mercadopago_ticket[payment_method_id]"]||d(r,"flex");const m="MLB"==c&&!addressFieldsFromTicketRowAreValid();function d(e,t){e&&e.style&&(e.style.display=t)}function p(e){return e&&"flex"===e.style.display}return{type:p(a)||p(r)||m?o.responseTypes.ERROR:o.responseTypes.SUCCESS,meta:{paymentMethodData:s}}}));return()=>e()}),[o.responseTypes.ERROR,o.responseTypes.SUCCESS,a]),(0,d.jsx)("div",{dangerouslySetInnerHTML:{__html:u.params.content}})},g={name:i,label:(0,d.jsx)(l,{}),content:(0,d.jsx)(y,{}),edit:(0,d.jsx)(y,{}),canMakePayment:()=>!0,ariaLabel:_,supports:{features:null!==(m=u?.supports)&&void 0!==m?m:[]}};(0,o.registerPaymentMethod)(g)})();