(()=>{"use strict";const e=window.React,t=window.wp.element,n=window.wc.wcBlocksRegistry,s=window.wp.htmlEntities,c=window.wc.wcSettings,a="mercadopago_blocks_update_cart",i=({title:t,description:n,linkText:s,linkSrc:c})=>(0,e.createElement)("div",{className:"mp-test-mode-container"},(0,e.createElement)("test-mode",{title:t,description:n,"link-text":s,"link-src":c})),o=({title:t,subtitle:n,alt:s,linkSrc:c})=>(0,e.createElement)("pix-template",{title:t,subtitle:n,alt:s,src:c}),l=({description:t,linkText:n,linkSrc:s,checkoutClass:c="pro"})=>(0,e.createElement)("div",{className:`mp-checkout-${c}-terms-and-conditions`},(0,e.createElement)("terms-and-conditions",{description:t,"link-text":n,"link-src":s}));var r;const m="mp_checkout_blocks",p="woo-mercado-pago-pix",d=(0,c.getSetting)("woo-mercado-pago-pix_data",{}),u=(0,s.decodeEntities)(d.title)||"Checkout Pix",_=n=>{(e=>{const{extensionCartUpdate:n}=wc.blocksCheckout,{eventRegistration:s,emitResponse:c}=e,{onPaymentSetup:i,onCheckoutSuccess:o,onCheckoutFail:l}=s;(0,t.useEffect)((()=>{((e,t)=>{e({namespace:a,data:{action:"add",gateway:t}})})(n,p);const e=i((()=>({type:c.responseTypes.SUCCESS})));return()=>(((e,t)=>{e({namespace:a,data:{action:"remove",gateway:t}})})(n,p),e())}),[i]),(0,t.useEffect)((()=>{const e=o((async e=>{e.processingResponse.message=p;const t=e.processingResponse;return sendMetric("MP_PIX_BLOCKS_SUCCESS",t.paymentStatus,m),{type:c.responseTypes.SUCCESS}}));return()=>e()}),[o]),(0,t.useEffect)((()=>{const e=l((e=>{const t=e.processingResponse;return sendMetric("MP_PIX_BLOCKS_ERROR",t.paymentStatus,m),{type:c.responseTypes.FAIL,messageContext:c.noticeContexts.PAYMENTS,message:t.paymentDetails.message}}));return()=>e()}),[l])})(n);const{test_mode_title:s,test_mode_description:c,pix_template_title:r,pix_template_subtitle:u,pix_template_src:_,pix_template_alt:k,terms_and_conditions_description:E,terms_and_conditions_link_text:S,terms_and_conditions_link_src:g,test_mode:w,amount:x,message_error_amount:y}=d.params;return null==x?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",{className:"alert-message"},y)):(0,e.createElement)("div",{className:"mp-checkout-container"},(0,e.createElement)("div",{className:"mp-checkout-pix-container"},(0,e.createElement)("div",{className:"mp-checkout-pix-content"},w?(0,e.createElement)(i,{title:s,description:c}):null,(0,e.createElement)(o,{title:r,subtitle:u,alt:k,linkSrc:_}))),(0,e.createElement)(l,{description:E,linkText:S,linkSrc:g,checkoutClass:"pix"}))},k={name:p,label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components,c=(0,s.decodeEntities)(d?.params?.fee_title||""),a=`${u} ${c}`;return(0,e.createElement)(n,{text:a})}),null),content:(0,e.createElement)(_,null),edit:(0,e.createElement)(_,null),canMakePayment:()=>!0,ariaLabel:u,supports:{features:null!==(r=d?.supports)&&void 0!==r?r:[]}};(0,n.registerPaymentMethod)(k)})();