(()=>{"use strict";var e={20:(e,t,o)=>{var n=o(609),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,o){var n,a={},p=null,l=null;for(n in void 0!==o&&(p=""+o),void 0!==t.key&&(p=""+t.key),void 0!==t.ref&&(l=t.ref),t)c.call(t,n)&&!i.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:s,type:e,key:p,ref:l,props:a,_owner:r.current}}t.Fragment=a,t.jsx=p,t.jsxs=p},609:e=>{e.exports=window.React},848:(e,t,o)=>{e.exports=o(20)}},t={};const o=window.wc.wcBlocksRegistry,n=window.wc.wcSettings,s=window.wp.element,a=window.wp.htmlEntities,c="mercadopago_blocks_update_cart";var r=function o(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,o),a.exports}(848);const i=({labelMessage:e,helperInvalid:t,helperEmpty:o,helperWrong:n,inputName:s,hiddenId:a,inputDataCheckout:c,selectId:i,selectName:p,selectDataCheckout:l,flagError:d,documents:m,validate:u})=>(0,r.jsx)("div",{className:"mp-checkout-ticket-input-document",children:(0,r.jsx)("input-document",{"label-message":e,"helper-invalid":t,"helper-empty":o,"helper-wrong":n,"input-name":s,"hidden-id":a,"input-data-checkout":c,"select-id":i,"select-name":p,"select-data-checkout":l,"flag-error":d,documents:m,validate:u})}),p=({description:e,linkText:t,linkSrc:o,checkoutClass:n="pro"})=>(0,r.jsx)("div",{className:`mp-checkout-${n}-terms-and-conditions`,children:(0,r.jsx)("terms-and-conditions",{description:e,"link-text":t,"link-src":o})}),l=({title:e,description:t,linkText:o,linkSrc:n})=>(0,r.jsx)("div",{className:"mp-test-mode-container",children:(0,r.jsx)("test-mode",{title:e,description:t,"link-text":o,"link-src":n})}),d=(e,t,o)=>{const n={name:e,message:t,target:o,plugin:{version:wc_mercadopago_custom_checkout_params.plugin_version},platform:{name:"woocommerce",uri:window.location.href,version:wc_mercadopago_custom_checkout_params.platform_version,location:`${wc_mercadopago_custom_checkout_params.location}_${wc_mercadopago_custom_checkout_params.theme}`}};navigator.sendBeacon("https://api.mercadopago.com/v1/plugins/melidata/errors",JSON.stringify(n))},m=({name:e,label:t,optional:o,options:n,helperMessage:s,hiddenId:a,defaultOption:c})=>(0,r.jsx)("input-select",{name:e,label:t,options:n,optional:o,"helper-message":s,"hidden-id":a,"default-option":c});var u;const _="mp_checkout_blocks",h="woo-mercado-pago-pse",g=(0,n.getSetting)("woo-mercado-pago-pse_data",{}),y=(0,a.decodeEntities)(g.title)||"Checkout Pse",k=e=>{const{PaymentMethodLabel:t}=e.components,o=(0,a.decodeEntities)(g?.params?.fee_title||""),n=`${y} ${o}`;return(0,r.jsx)(t,{text:n})},f=e=>{(e=>{const{extensionCartUpdate:t}=wc.blocksCheckout,{eventRegistration:o,emitResponse:n}=e,{onPaymentSetup:a,onCheckoutSuccess:r,onCheckoutFail:i}=o;(0,s.useEffect)((()=>{((e,t)=>{e({namespace:c,data:{action:"add",gateway:t}})})(t,h);const e=a((()=>({type:n.responseTypes.SUCCESS})));return()=>(((e,t)=>{e({namespace:c,data:{action:"remove",gateway:t}})})(t,h),e())}),[a]),(0,s.useEffect)((()=>{const e=r((async e=>{const t=e.processingResponse;return d("MP_PSE_BLOCKS_SUCCESS",t.paymentStatus,_),{type:n.responseTypes.SUCCESS}}));return()=>e()}),[r]),(0,s.useEffect)((()=>{const e=i((e=>{const t=e.processingResponse;return d("MP_PSE_BLOCKS_ERROR",t.paymentStatus,_),{type:n.responseTypes.FAIL,messageContext:n.noticeContexts.PAYMENTS,message:t.paymentDetails.message}}));return()=>e()}),[i])})(e);const{test_mode_title:t,test_mode_description:o,test_mode_link_text:n,test_mode_link_src:a,input_document_label:u,input_document_helper_empty:y,input_document_helper_invalid:k,input_document_helper_wrong:f,pse_text_label:x,person_type_label:v,amount:S,site_id:w,terms_and_conditions_description:b,terms_and_conditions_link_text:E,terms_and_conditions_link_src:j,test_mode:C,financial_institutions:N,financial_institutions_label:R,financial_institutions_helper:T,financial_placeholder:O,message_error_amount:P}=g.params;if(null==S)return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("p",{className:"alert-message",children:P})});const I=(0,s.useRef)(null),{eventRegistration:M,emitResponse:q}=e,{onPaymentSetup:L}=M;let U={labelMessage:u,helperInvalid:k,helperEmpty:y,helperWrong:f,validate:"true",selectId:"doc_type",flagError:"mercadopago_pse[docNumberError]",inputName:"mercadopago_pse[docNumber]",selectName:"mercadopago_pse[docType]",documents:'["CC","CE","NIT"]'};return(0,s.useEffect)((()=>{const e=L((async()=>{const e=document.querySelector(".mp-checkout-pse-input-document").querySelector(".mp-input-document > input-helper > div"),t={"mercadopago_pse[site_id]":w,"mercadopago_pse[amount]":S.toString(),"mercadopago_pse[doc_type]":I.current.querySelector("#doc_type")?.value,"mercadopago_pse[doc_number]":I.current.querySelector("#form-checkout__identificationNumber-container > input")?.value,"mercadopago_pse[bank]":I.current.querySelector("#mercadopago_pse\\[bank\\]").value,"mercadopago_pse[person_type]":I.current.querySelector("#mercadopago_pse\\[person_type\\]").value};U.documents&&""===t["mercadopago_pse[doc_number]"]&&s(e,"flex");let o=document.querySelector("#mercadopago_pse\\[bank\\]"),n=document.querySelector(".mp-checkout-pse-bank").querySelector("input-helper > div");function s(e,t){e&&e.style&&(e.style.display=t)}function a(e){return e&&"flex"===e.style.display}return""!==o.value&&{financial_placeholder:O}!==o.value||s(n,"flex"),{type:a(n)||a(e)?q.responseTypes.ERROR:q.responseTypes.SUCCESS,meta:{paymentMethodData:t}}}));return()=>e()}),[q.responseTypes.ERROR,q.responseTypes.SUCCESS,L]),(0,r.jsxs)("div",{className:"mp-checkout-container",children:[(0,r.jsx)("p",{className:"mp-checkout-pse-text","data-cy":"checkout-pse-text",children:x}),(0,r.jsx)("div",{className:"mp-checkout-pse-container",children:(0,r.jsxs)("div",{ref:I,className:"mp-checkout-pse-content",children:[C?(0,r.jsx)(l,{title:t,description:o,"link-text":n,"link-src":a}):null,(0,r.jsx)("div",{className:"mp-checkout-pse-person",children:(0,r.jsx)(m,{name:"mercadopago_pse[person_type]",label:v,optional:!1,options:'[{"id":"individual", "description": "individual"},{"id":"association", "description": "asociaciÃ³n"}]'})}),(0,r.jsx)("div",{className:"mp-checkout-pse-input-document",children:U.documents?(0,r.jsx)(i,{...U}):null}),(0,r.jsx)("div",{className:"mp-checkout-pse-bank",children:(0,r.jsx)(m,{name:"mercadopago_pse[bank]",label:R,optional:!1,options:N,"hidden-id":"hidden-financial-pse","helper-message":T,"default-option":O})}),(0,r.jsx)("div",{id:"mp-box-loading"})]})}),(0,r.jsx)(p,{description:b,linkText:E,linkSrc:j,checkoutClass:"pse"})]})},x={name:h,label:(0,r.jsx)(k,{}),content:(0,r.jsx)(f,{}),edit:(0,r.jsx)(f,{}),canMakePayment:()=>!0,ariaLabel:y,supports:{features:null!==(u=g?.supports)&&void 0!==u?u:[]}};(0,o.registerPaymentMethod)(x)})();