import{e as M,_ as B}from"./catalogForm.d14347f6.js";import{D as R,M as n,d9 as W,r as l,J as d,c as m,a9 as D,o as $,aa as S,b as y,w as A,u as o,i as F,x as f,K as x,a as b,ai as L}from"./stepForm.8bc9de25.js";import{l as N}from"./eventListForm.b561069d.js";import P from"./eventCalendarForm.050a5270.js";const T={name:"AmeliaDialogForms"},O=Object.assign(T,{setup(j){let e=f("shortcodeData"),E=R({sbsNew:n(W),cbf:n(M),elf:n(N),ecf:n(P)}),s=l(0);d("dialogWrapperWidth",s);let a=l(!1);d("formDialogVisibility",a);let g=m(()=>"isRestored"in e.value?e.value.isRestored:!1),v=e.value.trigger_type&&e.value.trigger_type==="class"?[...document.getElementsByClassName(e.value.trigger)]:[document.getElementById(e.value.trigger)],p=l(100),_=l(0);d("loadDialogCounter",_),v.forEach(u=>{u.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),a.value=!0,g.value||_.value++,setTimeout(()=>{window.dispatchEvent(new Event("resize"))},p.value)})}),D(()=>{g.value&&v.forEach(u=>{u.dispatchEvent(new Event("click"))})});function z(){a.value=!1}let c=l(0);function h(){c.value=window.visualViewport.height}window.addEventListener("resize",h);let V=f("isMounted");$(()=>{V.value=!0,S("renderPopup",{resizeAfter:p}),h()});const r=f("settings");let t=m(()=>r.customizedData&&e.value.triggered_form in r.customizedData?r.customizedData[e.value.triggered_form].colors:x[e.value.triggered_form].colors),C=m(()=>r.customizedData&&e.value.triggered_form in r.customizedData?r.customizedData[e.value.triggered_form]:x[e.value.triggered_form]),k=m(()=>({"--am-c-primary":t.value.colorPrimary,"--am-c-success":t.value.colorSuccess,"--am-c-error":t.value.colorError,"--am-c-warning":t.value.colorWarning,"--am-c-main-bgr":t.value.colorMainBgr,"--am-c-main-heading-text":t.value.colorMainHeadingText,"--am-c-main-text":t.value.colorMainText,"--am-dvh":c.value?`${c.value}px`:"100dvh"}));return D(()=>{e.value.triggered_form==="sbsNew"&&(s.value=C.value.sidebar.options.self.visibility?"760px":"520px"),e.value.triggered_form==="cbf"&&(s.value="1140px"),e.value.triggered_form==="elf"&&(s.value="792px")},{flush:"post"}),(u,i)=>(b(),y(B,{modelValue:o(a),"onUpdate:modelValue":i[0]||(i[0]=w=>F(a)?a.value=w:a=w),"append-to-body":!0,"modal-class":`amelia-v2-booking am-forms-dialog am-${o(e).triggered_form}`,"close-on-click-modal":!1,"close-on-press-escape":!1,"custom-styles":o(k),"used-for-shortcode":!0,width:o(s),onClosed:z},{default:A(()=>[(b(),y(L(o(E)[o(e).triggered_form])))]),_:1},8,["modelValue","modal-class","custom-styles","width"]))}});export{O as default};
