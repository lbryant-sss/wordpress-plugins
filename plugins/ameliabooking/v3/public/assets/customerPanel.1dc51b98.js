import{bn as Jl,bo as Eu,t as Ql,c as y,r as M,s as F,bp as Lu,b as u,e as x,p as I,u as a,i as ye,y as R,z as _e,v as Y,g as Yr,k as m,w as L,l as ie,f as w,m as ke,n as D,A as Au,bq as $u,br as Iu,bs as Pu,a_ as dt,aT as pe,ba as Dt,at as fi,d as q,bt as Kl,bg as to,j as Oe,ab as _a,x as fe,F as te,b1 as Xa,bu as pn,ap as Ve,bv as ll,an as We,az as fn,ay as gn,bw as Wa,aH as De,aY as en,D as nt,M as Je,a4 as gl,a as Ze,aV as tt,b9 as wt,ah as Tt,_ as He,b8 as et,bx as Bo,by as Ou,bz as Wr,bA as Du,J as Be,K as tn,L as rt,B as ao,a$ as Qa,b0 as Ka,aC as La,bB as Nu,bC as Fo,bD as Mu,bE as Bu,am as ht,bF as so,aK as yt,bG as Os,bH as Ds,aP as gt,aZ as vt,bI as hl,bJ as Fu,bK as es,bL as Hr,af as Zr,bM as Mt,bN as qt,au as Yt,bO as ra,bP as vl,av as Gr,bQ as Vu,bR as Wt,as as Jr,ao as Xr,bS as Ru,aQ as ot,aI as _l,bT as qu,bU as nl,G as lt,bV as hn,h as Qr,bW as Uu,bX as Vo,bY as Ro,bb as ft,bZ as an,b7 as ju,b_ as vn,b$ as zu,c0 as Yu,aN as Oa,aM as _n,aS as Wu,c1 as Hu,c2 as Kr,c3 as Zu,c4 as lo,c5 as Gu,c6 as Ju,c7 as Xu,ae as Qu,aj as Ku}from"./stepForm.1410cce9.js";import{e as ed,f as Ye,u as td,m as at,_ as sn}from"./eventListForm.9cedb535.js";import{_ as ad}from"./catalogForm.4fd23a05.js";function Nt(l,e){let t=e!==""?JSON.parse(l.translations)[e]:JSON.parse(l.translations);if(Jl in t)return t[Jl];let s=Object.keys(t),n=Object.keys(t).map(o=>o.length>2?o.slice(0,2):o),i="";for(let o=0;o<n.length;o++){if(Eu===s[o]&&t[s[o]]){i=t[s[o]];break}n[o]===Jl&&t[s[o]]&&(i=t[s[o]])}return i}function gi(l,e){return l.translations&&JSON.parse(l.translations)[e]&&Nt(l,e)?Nt(l,e):l[e]}function Rt(l){return l.translations&&JSON.parse(l.translations).name&&Nt(l,"name")?Nt(l,"name"):l.name}function sd(l){return l.translations&&Nt(l,"")?Nt(l,""):l.name}function o5(l){return l.translations&&Nt(l,"")?Nt(l,""):l.content}function ld(l){return l.translations&&Nt(l,"name")?Nt(l,"name"):l.label}function nd(l){return l.translations&&Nt(l,"")?Nt(l,""):l.label}function oa(l){return l.translations&&JSON.parse(l.translations).description&&Nt(l,"description")?Nt(l,"description"):l.description}function r5(l){l.services&&l.services.length&&l.services.forEach(e=>{e.name=Rt(e),e.description=oa(e),e.extras.forEach(t=>{t.name=Rt(t),t.description=oa(t)})}),l.locations&&l.locations.length&&l.locations.forEach(e=>{e.name=Rt(e),e.description=oa(e)}),l.packages&&l.packages.length&&l.packages.forEach(e=>{e.name=Rt(e),e.description=oa(e),e.bookable.forEach(t=>{t.service.name=Rt(t.service),t.service.description=oa(t.service),"extras"in t.service&&t.service.extras.forEach(s=>{s.name=Rt(s),s.description=oa(s)})})}),l.categories&&l.categories.length&&l.categories.forEach(e=>{e.name=Rt(e),e.serviceList.forEach(t=>{t.name=Rt(t),t.description=oa(t),t.extras.forEach(s=>{s.name=Rt(s),s.description=oa(s)})})}),l.events&&l.events.length&&l.events.forEach(e=>{e.name=Rt(e),e.description=oa(e),e.extras.forEach(t=>{t.name=Rt(t),t.description=oa(t)})}),l.customFields&&l.customFields.length&&l.customFields.forEach(e=>{e.label=ld(e),e.options.forEach(t=>{t.label=nd(t)})}),l.employees&&l.employees.length&&l.employees.forEach(e=>{e.firstName=gi(e,"firstName"),e.lastName=gi(e,"lastName"),e.description=gi(e,"description")})}const st={props:{modelValue:{type:[Boolean,String,Number],default:!1},id:{type:String},name:{type:String},width:{type:[Number,String]},size:{type:String,default:"default",validator(l){return["large","default","small"].includes(l)}},validateEvent:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeIconClass:{type:String,default:""},inactiveIconClass:{type:String,default:""},activeIcon:{type:String,default:""},inactiveIcon:{type:String,default:""},beforeChange:{type:[Function,Boolean],default:()=>{}},borderColor:{type:String,default:""},inlinePrompt:{type:Boolean,default:!1},parentClass:{type:String,default:""},class:{type:String,default:""}},emits:["update:modelValue","change"],setup(l,{emit:e}){const t=l,{modelValue:s}=Ql(t),n=y({get:()=>s.value,set:c=>e("update:modelValue",c)}),i=M(null),o=F("amColors",M({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#1A2C37",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF",colorBtnWaiting:"#CCA20C",colorBtnWaitingText:"#FFFFFF",colorBtnDanger:"#B4190F",colorBtnDangerText:"#FFFFFF"})),r=y(()=>({"--am-c-switch-bgr-active":o.value.colorBtnPrim,"--am-c-switch-bgr-inactive":o.value.colorInpBorder,"--am-c-switch-action":o.value.colorBtnPrimText,"--am-c-switch-text":o.value.colorMainText}));return(c,d)=>{const f=Lu;return u(),x("div",{class:R(["am-switch-wrapper",l.parentClass]),style:_e(a(r))},[I(f,{id:l.id,ref_key:"amSwitch",ref:i,modelValue:a(n),"onUpdate:modelValue":d[0]||(d[0]=v=>ye(n)?n.value=v:null),class:R(["am-switch",t.class]),name:l.name,width:l.width,size:l.size,"validate-event":l.validateEvent,loading:l.loading,disabled:l.disabled,"active-color":l.activeColor,"inactive-color":l.inactiveColor,"active-text":l.activeText,"inactive-text":l.inactiveText,"active-value":l.activeValue,"inactive-value":l.inactiveValue,"active-icon-class":l.activeIconClass,"inactive-icon-class":l.inactiveIconClass,"active-icon":l.activeIcon,"inactive-icon":l.inactiveIcon,"before-change":l.beforeChange,"border-color":l.borderColor,"inline-prompt":l.inlinePrompt,onChange:d[1]||(d[1]=v=>e("change",v))},null,8,["id","modelValue","class","name","width","size","validate-event","loading","disabled","active-color","inactive-color","active-text","inactive-text","active-value","inactive-value","active-icon-class","inactive-icon-class","active-icon","inactive-icon","before-change","border-color","inline-prompt"])],6)}}};const id={props:{ready:{type:Boolean,default:!0}},setup(l){let e=F("amColors",M({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#1A2C37",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),t=y(()=>({"--am-c-caph-text":e.value.colorMainText,"--am-c-caph-heading-text":e.value.colorMainHeadingText,"--am-c-caph-text-op15":Y(e.value.colorMainText,.15)}));return(s,n)=>(u(),x("div",{class:"am-caph__main",style:_e(a(t))},[Yr(s.$slots,"default")],4))}};const od={key:0},rd={key:1},cd={key:2},ud={name:"MainProfileFooter"},dd=Object.assign(ud,{props:{parentWidth:{type:Number,default:1200},display:{type:String,default:"first"},loading:{type:Boolean,default:!1},customizedLabels:{type:Object,default:()=>({})},deleteFooterType:{type:String,default:"plain"},saveFooterButton:{type:String,default:"filled"},passFooterButton:{type:String,default:"filled"}},setup(l){const e=l,t=F("labels");function s(f){return Object.keys(e.customizedLabels).length&&e.customizedLabels[f]?e.customizedLabels[f]:t[f]}const n=F("settings");let i=F("deleteProfileDialog",M(!1)),o=F("saveProfileChanges",()=>{}),r=F("changeProfilePassword",()=>{}),c=F("amColors"),d=y(()=>({"--am-c-cappf-bgr":c.value.colorMainBgr,"--am-c-cappf-text":c.value.colorMainText,"--am-c-cappf-text-op15":Y(c.value.colorMainText,.15)}));return(f,v)=>(u(),x("div",{class:"am-cappf",style:_e(a(d))},[m("div",{class:R(["am-cappf__options",{"am-only-one":l.display==="second"||!a(n).roles.allowCustomerDeleteProfile}])},[l.display==="first"&&a(n).roles.allowCustomerDeleteProfile?(u(),x("div",od,[I(ke,{category:"danger",size:a(e).parentWidth<=360?"small":"default",type:a(e).deleteFooterType,class:"am-cappf__delete",disabled:l.loading,onClick:v[0]||(v[0]=g=>ye(i)?i.value=!0:i=!0)},{default:L(()=>[ie(w(s("delete_profile")),1)]),_:1},8,["size","type","disabled"])])):D("",!0),l.display==="first"?(u(),x("div",rd,[I(ke,{type:a(e).saveFooterButton,size:a(e).parentWidth<=360?"small":"default",disabled:l.loading,onClick:v[1]||(v[1]=g=>a(o)())},{default:L(()=>[ie(w(s("save_changes")),1)]),_:1},8,["type","size","disabled"])])):D("",!0),l.display==="second"?(u(),x("div",cd,[I(ke,{type:a(e).passFooterButton,size:a(e).parentWidth<=360?"small":"default",disabled:l.loading,onClick:v[2]||(v[2]=g=>a(r)())},{default:L(()=>[ie(w(s("change_password")),1)]),_:1},8,["type","size","disabled"])])):D("",!0)],2)],4))}});const md=m("span",{class:"am-icon-calendar"},null,-1),pd={class:"am-date-picker__input-inner"},fd={class:"am-date-picker__input-start"},gd=m("span",{class:"am-date-picker__input-separator"}," - ",-1),hd={class:"am-date-picker__input-end"},Ht={props:{id:{type:String},modelValue:{type:[String,Array,Object,Number]},type:{type:String,default:"date"},defaultValue:{type:[String,Array,Object,Number]},valueFormat:{type:String},value:{type:[String,Array,Object,Number]},format:{type:String},editable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator(l){return["default","medium","small","mini","micro"].includes(l)}},clearable:{type:Boolean,default:!1},name:{type:String,default:""},placeholder:{type:String,default:"Select Date"},popperClass:{type:String,default:""},teleported:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:Au},prefixIcon:{type:[String,Object],default:$u},disabledDate:{type:Function,default:()=>{}},lang:{type:String,default:""},customInputDisplay:{type:Boolean,default:!1}},emits:["change","input","visible-change","remove-tag","clear","blur","focus","calendar-change","panel-change","update:modelValue"],setup(l,{emit:e}){const t=l,s=g=>{const b={};for(const T in g)b[T]=g[T].value;return b},{size:n,...i}=s(Ql(t));let{modelValue:o}=Ql(t),r=y({get:()=>o.value,set:g=>{e("update:modelValue",g)}});const c=M(null);function d(){c.value&&c.value.focus()}let f=F("amColors"),v=y(()=>({"--am-c-primary":f.value.colorPrimary,"--am-c-success":f.value.colorSuccess,"--am-c-error":f.value.colorError,"--am-c-warning":f.value.colorWarning,"--am-c-main-bgr":f.value.colorMainBgr,"--am-c-main-heading-text":f.value.colorMainHeadingText,"--am-c-main-text":f.value.colorMainText,"--am-c-sb-bgr":f.value.colorSbBgr,"--am-c-sb-text":f.value.colorSbText,"--am-c-inp-bgr":f.value.colorInpBgr,"--am-c-inp-border":f.value.colorInpBorder,"--am-c-inp-text":f.value.colorInpText,"--am-c-inp-text-op03":Y(f.value.colorInpText,.03),"--am-c-inp-text-op60":Y(f.value.colorInpText,.6),"--am-c-inp-placeholder":f.value.colorInpPlaceHolder,"--am-c-drop-bgr":f.value.colorDropBgr,"--am-c-drop-text":f.value.colorDropText,"--am-c-drop-text-op03":Y(f.value.colorDropText,.03),"--am-c-drop-text-op10":Y(f.value.colorDropText,.1),"--am-c-drop-text-op30":Y(f.value.colorDropText,.3),"--am-c-drop-text-op50":Y(f.value.colorDropText,.5),"--am-c-drop-text-op70":Y(f.value.colorDropText,.7),"--am-c-drop-text-op80":Y(f.value.colorDropText,.8),"--am-c-drop-border":f.value.colorDropBorder,"--am-c-btn-prim":f.value.colorBtnPrim,"--am-c-btn-prim-text":f.value.colorBtnPrimText,"--am-c-btn-sec":f.value.colorBtnSec,"--am-c-btn-sec-text":f.value.colorBtnSecText,"--am-c-btn-danger":f.value.colorBtnDanger,"--am-c-btn-danger-text":f.value.colorBtnDangerText,"--am-c-skeleton-op20":Y(f.value.colorMainText,.2),"--am-c-skeleton-op60":Y(f.value.colorMainText,.6),"--am-c-skeleton-sb-op20":Y(f.value.colorSbText,.2),"--am-c-skeleton-sb-op60":Y(f.value.colorSbText,.6)}));return(g,b)=>{const T=Iu,C=Pu;return u(),x("div",{class:R(["am-date-picker-wrapper",`am-date-picker--${a(n)}`])},[t.customInputDisplay&&t.type==="daterange"&&a(r).length?(u(),x("div",{key:0,class:R(["am-date-picker__input",`am-date-picker--${a(n)}`]),onClick:d},[md,m("div",pd,[m("span",fd,w(a(dt)(a(pe)(a(r)[0]).format("YYYY-MM-DD"))),1),gd,m("span",hd,w(a(dt)(a(pe)(a(r)[1]).format("YYYY-MM-DD"))),1)])],2)):D("",!0),I(C,{locale:a(ed)(t.lang)},{default:L(()=>[I(T,Dt(i,{id:l.id,ref_key:"amDatePicker",ref:c,modelValue:a(r),"onUpdate:modelValue":b[0]||(b[0]=_=>ye(r)?r.value=_:r=_),type:l.type,value:l.value,"prefix-icon":l.prefixIcon,"popper-class":l.popperClass,placeholder:l.placeholder,"clear-icon":l.clearIcon,"default-value":l.defaultValue,clearable:l.clearable,"disabled-date":l.disabledDate,disabled:l.disabled,"value-format":l.valueFormat,format:l.format,editable:l.editable,class:["am-date-picker",[`am-date-picker--${a(n)}`,{"am-date-picker--disabled":l.disabled},{"am-date-picker--custom":t.type==="daterange"&&t.customInputDisplay}]],"popper-style":a(v),style:a(v),onInput:b[1]||(b[1]=_=>g.$emit("input",_)),onChange:b[2]||(b[2]=_=>g.$emit("change",_)),onBlur:b[3]||(b[3]=_=>g.$emit("blur",_)),onFocus:b[4]||(b[4]=_=>g.$emit("focus",_)),onCalendarChange:b[5]||(b[5]=_=>g.$emit("calendar-change",_)),onPanelChange:b[6]||(b[6]=_=>g.$emit("panel-change",_))}),null,16,["id","modelValue","type","value","prefix-icon","popper-class","placeholder","clear-icon","default-value","clearable","disabled-date","disabled","value-format","format","editable","popper-style","style","class"])]),_:1},8,["locale"])],2)}}};const vd={class:"am-oit__wrapper"},_d={class:"am-oit"},yd={class:"am-oit__img"},bd={key:0},kd={class:"am-oit__content am-oit__content-short"},Cd={class:"am-oit__data"},xd={class:"am-oit__data-label-name"},wd=["innerHTML"],Td={style:{display:"flex"}},Sd=m("span",{class:"am-icon-circle-info"},null,-1),Ed=[Sd],Ld={class:"am-dialog__title"},Ad={class:"am-dialog__body"},$d={class:"am-dialog__body-heading"},Id={class:"am-oit__img"},Pd={key:0},Od={class:"am-dialog__body-heading__text"},Dd={class:"am-dialog__body-heading__text-name"},Nd=["innerHTML"],Md={inheritAttrs:!1},Bd=Object.assign(Md,{props:{identifier:{type:[String,Number],required:!0},imageThumb:{type:String,default:""},label:{type:[String,Number],default:""},description:{type:String,default:""},price:{type:[String,Number],default:""},dialogTitle:{type:String,default:""},dialogButtonText:{type:String,default:""},badge:{type:[String,Number,Object]}},emits:["click"],setup(l,{emit:e}){const t=l;let s=M(!1);const n=g=>{g.stopPropagation(),s.value=!0},i=()=>{s.value=!1,e("click",t.identifier)};function o(g){return g=g.replace(/<\/p>/g," </p>").replace(/<\/h1>/g," </h1>").replace(/<\/h2>/g," </h2>").replace(/<\/h3>/g," </h3>").replace(/<\/h4>/g," </h4>"),g=g.replace(/<\/li>/g," </li>"),g}function r(){if(t.label){let g="";return t.label.split(" ").forEach(b=>{g+=b.charAt(0).toUpperCase()}),g}}let c=F("primDescBtnType","filled"),d=F("amColors"),f=y(()=>({"--am-oit-c-main-bgr":d.value.colorMainBgr,"--am-oit-c-main-btn-color":d.value.colorBtnPrim,"--am-oit-c-main-btn-color-text":d.value.colorBtnPrimText,"--am-oit-c-main-heading-text":d.value.colorMainHeadingText,"--am-oit-c-main-heading-text-op90":Y(d.value.colorMainHeadingText,.9),"--am-oit-c-main-text":d.value.colorMainText,"--am-c-option-img-text":d.value.colorMainBgr})),v=y(()=>({"--am-c-option-selected":d.value.colorPrimary}));return(g,b)=>(u(),x("span",vd,[m("span",_d,[m("span",yd,[m("span",{class:"am-oit__img-placeholder",style:_e({backgroundImage:`url(${t.imageThumb})`})},[t.imageThumb?D("",!0):(u(),x("span",bd,w(r()),1))],4)]),m("span",kd,[m("span",Cd,[m("span",{class:R(`am-oit__data-label ${l.badge?"am-oit__data-label-wrap":""}`)},[m("span",xd,w(l.label),1),l.badge?(u(),x("span",{key:0,class:"am-oit__data-label-badge",style:_e({background:l.badge.color})},w(l.badge.content),5)):D("",!0)],2),!l.badge&&a(fi)(l.description)?(u(),x("span",{key:0,class:"am-oit__data-description",innerHTML:o(l.description)},null,8,wd)):D("",!0)]),m("span",Td,[t.price?(u(),x("span",{key:0,class:"am-oit__price",style:_e(a(v))},w(t.price),5)):D("",!0),a(fi)(l.description)?(u(),x("span",{key:1,class:"am-oit__info-trigger",onClick:n},Ed)):D("",!0)])])]),a(fi)(l.description)?(u(),q(ad,{key:0,modelValue:a(s),"onUpdate:modelValue":b[0]||(b[0]=T=>ye(s)?s.value=T:s=T),"custom-class":"am-option-template-dialog am-dialog ql-description","append-to-body":!0,"custom-styles":a(f),"destroy-on-close":!0,"align-center":!0,"modal-class":"am-dialog-employee-description"},{title:L(()=>[m("span",Ld,w(l.dialogTitle),1)]),footer:L(()=>[I(ke,{type:a(c),category:"primary",onClick:i},{default:L(()=>[ie(w(l.dialogButtonText),1)]),_:1},8,["type"])]),default:L(()=>[m("div",Ad,[m("div",$d,[m("span",Id,[m("span",{class:"am-oit__img-placeholder",style:_e({backgroundImage:`url(${t.imageThumb})`})},[t.imageThumb?D("",!0):(u(),x("span",Pd,w(r()),1))],4)]),m("div",Od,[m("span",Dd,w(l.label),1),l.badge?(u(),x("span",{key:0,class:"am-dialog__body-heading__text-badge",style:_e({background:l.badge.color})},w(l.badge.content),5)):D("",!0)])]),m("div",{class:"am-dialog__body-content",innerHTML:l.description},null,8,Nd)])]),_:1},8,["modelValue","custom-styles"])):D("",!0)]))}});function Fd(l,e,t){let s={};return l.forEach(n=>{e===""&&n.periods.forEach(f=>{f.periodStart=Kl(f.periodStart),f.periodEnd=Kl(f.periodEnd)});let o=pe(n.periods[0].periodStart,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD"),r=t.getters.getSettings.general.usedLanguages.map(f=>f.length>2?f.slice(0,2):f);(t.getters.getSettings.general.usedLanguages.indexOf(t.getters.getLocalLanguage)!==-1||r.indexOf(t.getters.getLocalLanguage.split("_")[0])!==-1)&&(n.name=Rt(n),n.customTickets.forEach(f=>{f.name=sd(f)})),n.recurring&&n.recurring.until&&(n.recurring.until=n.recurring.until.split(" ")[0]),o in s||(s[o]={date:o,events:[]});let d=n.bookings.some(f=>f.status==="waiting");if(n.full&&n.status==="approved"?n.status="full":n.upcoming&&n.status==="approved"&&(n.status="upcoming"),d&&(n.status="waiting"),t.getters["auth/getProfile"].type==="provider"){let f=JSON.parse(JSON.stringify(n));s[o].events.push(f)}else n.bookings.forEach(f=>{let v=JSON.parse(JSON.stringify(n));v.bookings=[f],s[o].events.push(v)})}),s}function ec(l){let e=0;return l.bookings.forEach(t=>{if(["approved","pending"].includes(t.status)){let s=0;if(t.ticketsData.length>0)for(let i=0;i<t.ticketsData.length;i++)s+=t.ticketsData[i].persons*t.ticketsData[i].price;else s+=l.price;let n=to(l,t.coupon,t.tax?t.tax[0]:null,s,!1);e+=n.price-n.discount+n.tax}}),e>=0?e:0}function Vd(l){let e=[];return l.forEach(t=>{let s=pe(t.periodStart.split(" ")[0],"YYYY-MM-DD"),n=pe(t.periodEnd.split(" ")[0],"YYYY-MM-DD"),i=t.periodStart.split(" ")[1].slice(0,5),o=t.periodEnd.split(" ")[1].slice(0,5);o==="00:00"&&(o="24:00",n.subtract(1,"days"));let r=[];for(;s.isSameOrBefore(n);)r.push(s.format("YYYY-MM-DD")),s.add(1,"days");r.forEach(c=>{e.push({date:c,startTime:i,endTime:o,periodStart:c+" "+i,periodEnd:c+" "+o,zoomLink:l.length>1&&t.zoomMeeting?t.zoomMeeting.joinUrl:"",lessonSpaceLink:l.length>1&&t.lessonSpace?t.lessonSpace:"",googleMeetLink:l.length>1&&t.googleMeetUrl?t.googleMeetUrl:"",microsoftTeamsLink:l.length>1&&t.microsoftTeamsUrl?t.microsoftTeamsUrl:""})})}),e}function Rd(l){let e={};return l.bookings.forEach(t=>{["approved","pending"].includes(t.status)&&t.ticketsData&&t.ticketsData.length&&t.ticketsData.forEach(s=>{s.eventTicketId in e||(e[s.eventTicketId]={persons:0,price:s.price,name:l.customTickets.find(n=>n.id===s.eventTicketId).name}),e[s.eventTicketId].persons=e[s.eventTicketId].persons+s.persons})}),e}function qd(l,e){let t=l.getters["entities/getLocations"];if(e.locationId&&t.length){let s=t.find(n=>n.id===e.locationId);return typeof s<"u"?s:null}else if(e.customLocation)return{address:"",name:e.customLocation};return null}let hi=[],hs=["1788FB","4BBEC6","FBC22D","FA3C52","D696B8","689BCA","26CC2B","FD7E35","E38587","774DFB","31CDF3","6AB76C","FD5FA1","A697C5"];function c5(l,e,t){if(e!==null){let s=t===!0?e.firstName+" "+e.lastName:e.name;if(typeof s<"u")return e.pictureThumbPath=e.pictureThumbPath||Ud(l,s),e.pictureThumbPath}}function $i(l){return l.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().substring(0,3).replace(/[^\w\s]/g,"")}function Ud(l,e,t={},s=!1){let n=$i(e),i=Math.floor(Math.random()*hs.length),o=hs[i];if(hi.push(hs[i]),hs.splice(i,1),hs.length===0&&(hs=hi,hi=[]),s)return t.firstName?l.wpAmeliaPluginURL+"public/img/default-employee.svg":t.latitude?l.wpAmeliaPluginURL+"public/img/default-location.svg":l.wpAmeliaPluginURL+"public/img/default-service.svg";const r=document.createElement("canvas");r.width=100,r.height=100;const c=r.getContext("2d");return c.fillStyle=`#${o}`,c.fillRect(0,0,r.width,r.height),c.font="40px Arial",c.fillStyle="#ffffff",c.textAlign="center",c.textBaseline="middle",c.fillText(n,r.width/2,r.height/2),r.toDataURL("image/png")}const jd={class:"am-msd__item-wrapper"},zd={class:"am-msd__item-inner"},Yd=m("div",{class:"am-msd__item-icon"},[m("span",{class:"am-icon-close"})],-1),Wd=["onClick"],Hd={class:"am-msd__item-inner"},Zd={class:"am-msd__item-icon"},Gd={key:1,class:"am-msd__item-divider"},Jd={class:"am-msd__item-inner"},Xd=m("div",{class:"am-msd__item-icon"},[m("span",{class:"am-icon-logout"})],-1),Qd={class:"am-msd__item-heading"},Kd={props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},monitor:{type:String,required:!0},menuItems:{type:Array,required:!0},customCss:{type:Object,default:()=>{}},width:{type:Number,default:300},position:{type:String,default:"right",validator(l){return["right","left","top","bottom"].includes(l)}}},emits:["click","update:visibility","logout"],setup(l,{emit:e}){const t=l;let s=F("labels");const n=Oe();let i=y(()=>document?document.documentElement.dir==="rtl":!1);function o(f,v){e("click",{step:f,index:v}),e("update:visibility",!1)}function r(){e("update:visibility",!1)}function c(f){return Object.keys(t.customizedLabels).length&&t.customizedLabels[f]?t.customizedLabels[f]:s[f]}let d=y(()=>({"--am-mw-msd":`${t.width}px`}));return(f,v)=>(u(),q(Xa,{visibility:l.visibility,position:l.position,"custom-class":"am-msd","close-outside":!0,"custom-css":{...l.customCss,...a(d)},"onUpdate:visibility":v[1]||(v[1]=g=>a(e)("update:visibility",!1))},{footer:L(()=>[m("div",{class:"am-msd__item",onClick:v[0]||(v[0]=()=>a(e)("logout"))},[m("div",Jd,[Xd,m("p",Qd,w(c("log_out")),1)])])]),default:L(()=>[m("div",jd,[m("div",{class:"am-msd__item",onClick:r},[m("div",zd,[I(_a,{name:"fade"},{default:L(()=>[m("p",{class:R(["am-msd__item-heading",{"am-rtl":a(i)}])},w(c("menu_title")),3)]),_:1}),I(_a,{name:"fade"},{default:L(()=>[Yd]),_:1})])]),(u(!0),x(te,null,fe(l.menuItems,(g,b)=>(u(),x(te,{key:g.key},[g.key!=="packages"||a(n).getters["entities/getPackages"].length?(u(),x("div",{key:0,class:R(["am-msd__item",{selected:l.monitor===g.key}]),onClick:T=>o(g,b)},[m("div",Hd,[m("div",Zd,[m("span",{class:R(`am-icon-${g.icon}`)},null,2)]),I(_a,{name:"fade"},{default:L(()=>[m("p",{class:R(["am-msd__item-heading",{"am-rtl":a(i)}])},w(g.label),3)]),_:2},1024),I(_a,{name:"fade"},{default:L(()=>[m("div",{class:R(["am-msd__item-indicator",{"am-rtl":a(i)}])},[m("span",{class:R(a(i)?"am-icon-arrow-big-left":"am-icon-arrow-big-right")},null,2)],2)]),_:1})])],10,Wd)):D("",!0),b===0?(u(),x("div",Gd)):D("",!0)],64))),128))])]),_:1},8,["visibility","position","custom-css"]))}};const Ii={props:{size:{type:String,default:"default"}},setup(l){const e=l,t=pn().cookies,s=F("settings");let n=F("cabinetType"),{bookingsCounterChanger:i}=F("bookingsCounterChanger",{bookingsCounterChanger:()=>{}});const o=Oe();let r=y({get:()=>o.getters["cabinet/getTimeZone"],set:b=>{o.commit("cabinet/setTimeZone",b||"")}}),c=y(()=>o.getters["appointment/getActive"]||o.getters["event/getActive"]||o.getters["attendee/getActive"]);const d=F("timeZone"),f=F("timeZones");function v(){let b;s.general.showClientTimeZone?b=ll():b=d.value,t.set("ameliaUserTimeZone",b,s.roles[n.value+"Cabinet"].tokenValidTime),i(),o.commit("cabinet/setTimeZone",b)}function g(b){t.set("ameliaUserTimeZone",b,s.roles[n.value+"Cabinet"].tokenValidTime),i()}return(b,T)=>a(c)?D("",!0):(u(),q(We,{key:0,modelValue:a(r),"onUpdate:modelValue":T[0]||(T[0]=C=>ye(r)?r.value=C:r=C),filterable:!0,placeholder:a(ll)(),clearable:!0,size:a(e).size,"custom-class":"am-ctz","prefix-icon":"globe-watch",onClear:v,onChange:g},{default:L(()=>[(u(!0),x(te,null,fe(a(f),(C,_)=>(u(),q(Ve,{key:_,value:C,label:C},{default:L(()=>[ie(w(C),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","size"]))}};function tc(){return"ameliaBooking"in window&&"cabinet"in window.ameliaBooking&&"disableAuthorizationHeader"in window.ameliaBooking.cabinet&&window.ameliaBooking.cabinet.disableAuthorizationHeader}function Ue(l){let e=l.getters["auth/getToken"];return e&&!tc()?{headers:{Authorization:"Bearer "+e}}:{}}const em={key:0,class:"el-skeleton-item-wrapper-title"},tm={name:"AuthSkeleton"},Zt=Object.assign(tm,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(l){const e=l;return(t,s)=>{const n=fn,i=gn;return u(),q(i,{animated:"",class:R(["am-asi-el-skeleton",a(e).mainClass])},{template:L(()=>[a(e).centerFirst?(u(),x("div",em,[I(n,{variant:"rect"})])):D("",!0),(u(!0),x(te,null,fe(new Array(a(e).count),o=>(u(),x("div",{key:o,class:"el-skeleton-item-wrapper"},[I(n,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});function am(l,e){let t=Wa(Wa(Wa(window.location.href,"code"),"state"),"scope");De.post("/google/authorization/token",{authCode:l,userId:en(window.location.href).state,redirectUri:t}).then(()=>{history.pushState(null,null,t)}).catch(s=>{console.log(s)}).finally(()=>{e()})}function sm(l){l.getters["auth/getGoogleLoading"]||(l.commit("auth/setGoogleLoading",!0),De.get("/google/authorization/url/"+l.getters["employee/getId"],Object.assign({redirectUri:window.location.href.split("?")[0]},Ue(l))).then(e=>{window.location.href=e.data.data.authUrl.replace(/redirect_uri=.+?&/,"redirect_uri="+window.location.href+"&")}).catch(e=>{console.log(e),l.commit("auth/setGoogleLoading",!1)}))}function lm(l){l.commit("auth/setGoogleLoading",!0),De.post("/google/disconnect/"+l.getters["employee/getId"]).then(()=>{l.commit("employee/setGoogleId",null),l.commit("employee/setGoogleCalendarId",""),l.commit("employee/setGoogleToken",null),l.commit("auth/setGoogleCalendars",[])}).catch(e=>{console.log(e)}).finally(()=>{l.commit("auth/setGoogleLoading",!1)})}function nm(l,e){let t=Wa(Wa(Wa(window.location.href,"code"),"state"),"type");De.post("/outlook/authorization/token",{authCode:l,userId:en(window.location.href).state.split("amelia-outlook-calendar-auth-")[1],redirectUri:window.location.href.split("?")[0]}).then(()=>{history.pushState({},null,t)}).catch(s=>{console.log(s)}).finally(()=>{e()})}function im(l){l.getters["auth/getOutlookLoading"]||(l.commit("auth/setOutlookLoading",!0),De.get("/outlook/authorization/url/"+l.getters["employee/getId"],Object.assign({redirectUri:window.location.href.split("?")[0]},Ue(l))).then(e=>{window.location.href=e.data.data.authUrl.replace(/redirect_uri=.+?&/,"redirect_uri="+window.location.href+"&")}).catch(e=>{console.log(e),l.commit("auth/setGoogleLoading",!1)}))}function om(l){l.commit("auth/setOutlookLoading",!0),De.post("/outlook/disconnect/"+l.getters["employee/getId"]).then(()=>{l.commit("employee/setOutlookId",""),l.commit("employee/setOutlookCalendarId",""),l.commit("employee/setOutlookToken",null),l.commit("auth/setOutlookCalendars",[])}).catch(e=>{console.log(e)}).finally(()=>{l.commit("auth/setOutlookLoading",!1)})}function rm(l){l.commit("auth/setZoomLoading",!0),De.get("/zoom/users",Object.assign(Ue(l),{params:{source:"cabinet-provider"}})).then(e=>{"data"in e.data&&"users"in e.data.data&&l.commit("auth/setZoomUsers",e.data.data?.users?e.data.data.users:[])}).catch(e=>{console.log(e)}).finally(()=>{l.commit("auth/setZoomLoading",!1)})}function cm(l){l.commit("auth/setStripeLoading",!0),De.get("/stripe/accounts/"+l.getters["employee/getId"],Object.assign({},Ue(l))).then(e=>{e.data.data.account&&(l.commit("auth/setStripeProvider",e.data.data.account),l.getters["employee/getStripeConnect"]||l.commit("employee/setStripeConnect",{id:e.data.data.account.id,amount:null}))}).catch(e=>{console.log(e)}).finally(()=>{l.commit("auth/setStripeLoading",!1)})}function um(l,e){l.commit("auth/setStripeLoading",!0),De.post("/stripe/onboard/"+l.getters["auth/getProfile"].id,Object.assign({returnUrl:window.location.href,accountType:e},Ue(l))).then(t=>{window.location.href=t.data.data.url}).catch(t=>{l.commit("auth/setStripeLoading",!1),console.log("response"in t&&"data"in t.response&&"message"in t.response.data?t.response.data.message:t.message)})}function dm(l){l.commit("auth/setStripeLoading",!0),De.post("/stripe/disconnect/"+l.getters["auth/getProfile"].id,Ue(l)).then(()=>{l.commit("auth/setStripeProvider",{id:"",email:"",type:"",completed:!1}),l.commit("employee/setStripeConnect",null)}).catch(e=>{console.log(e)}).finally(()=>{l.commit("auth/setStripeLoading",!1)})}function mm(l){let e=l.getters["auth/getStripeProvider"];l.commit("auth/setStripeLoading",!0),e.type==="standard"?(window.open("https://dashboard.stripe.com/"+e.id,"_blank"),l.commit("auth/setStripeLoading",!1)):e.type==="express"&&De.post("/stripe/dashboard/"+l.getters["auth/getProfile"].id,Ue(l)).then(t=>{t.data.data.url&&window.open(t.data.data.url,"_blank")}).catch(t=>{console.log(t)}).finally(()=>{l.commit("auth/setStripeLoading",!1)})}let Sa=M(!1);function Pi(l){l.commit("auth/setAppleLoading",!0),De.get("/apple/calendar-list/"+l.getters["employee/getId"],Ue(l)).then(e=>{l.commit("auth/setAppleCalendars",e.data.data?.calendarList?e.data.data.calendarList:[]),l.getters["auth/getAppleCalendars"].map(t=>t.id).indexOf(l.getters["employee/getAppleCalendarId"])===-1&&l.commit("employee/setAppleCalendarId",""),l.commit("employee/setAppleCalendarId",e.data.data?.appleCalendarId),Sa.value=e.data.data.isEmployeeConnectedToPersonalAppleCalendar}).catch(e=>{console.log(e)}).finally(()=>{l.commit("auth/setAppleLoading",!1)})}const pm={class:"am-asi__top"},fm={class:"am-asi__header"},gm={class:"am-asi__text"},hm={class:"am-asi__footer"},vm={class:"am-asi__footer-text"},_m={name:"AuthSignIn"},ym=Object.assign(_m,{setup(l){let e=F("licence"),t=Oe();const s=pn().cookies,n=F("settings");let i=F("amCustomize");const o=F("labels"),r=F("localLanguage");let c=y(()=>n.general.usedLanguages.includes(r.value)),d=y(()=>{let Q=nt({...o}),ee=i.value.signIn.translations;return ee&&Object.keys(ee).forEach(le=>{ee[le][r.value]&&c.value?Q[le]=ee[le][r.value]:ee[le].default&&(Q[le]=ee[le].default)}),Q}),f={components:{IconComponent:He},template:'<IconComponent icon="email"></IconComponent>'},v={components:{IconComponent:He},template:'<IconComponent icon="password"></IconComponent>'},g=M(null),b=M({email:y({get:()=>t.getters["auth/getEmail"],set:Q=>{t.commit("auth/setEmail",Q||"")}}),password:y({get:()=>t.getters["auth/getPassword"],set:Q=>{t.commit("auth/setPassword",Q||"")}})}),T=M({email:[{required:!0,message:d.value.enter_email_or_username_warning,trigger:"submit"}],password:[{required:!0,message:d.value.enter_password_warning,trigger:"submit"}]}),C=M({email:{template:Ye.text,props:{itemName:"email",label:d.value.email_or_username,iconStart:Je(f),placeholder:"",class:"am-asi__item"}},password:{template:Ye.text,props:{itemName:"password",itemType:"password",showPassword:!0,label:d.value.password,iconStart:Je(v),placeholder:"",class:"am-asi__item"}}}),_=F("pageKey"),S=F("cabinetType"),P=y(()=>t.getters.getLoading),k=y(()=>t.getters["auth/getProfileDeleted"]),h=M(!1),A=M("");function O(Q,ee){let le=Bo("token");Q?E(Q,!1,!1,!1):le?E(le,!0,!1,ee):E("",!1,!0,!1)}function E(Q,ee,le,W){let se={cabinetType:S.value,changePass:W};le&&(se.checkIfWpUser=!0);let ge=t.getters["auth/getPassword"],Ie=t.getters["auth/getEmail"];!Q&&ge&&Ie&&(se.password=ge,se.email=Ie),ee&&(se.token=Q),De.post("/users/authenticate",se,Q!==null&&!tc()?{headers:{Authorization:"Bearer "+Q}}:{}).then(ue=>{if("authentication_required"in ue.data.data){n.roles[S.value+"Cabinet"].loginEnabled||(_.value="sendAccessLink");return}if("token"in ue.data.data&&(s.set("ameliaToken",ue.data.data.token,n.roles[S.value+"Cabinet"].tokenValidTime,null,null,!0),s.set("ameliaUserEmail",ue.data.data.user.email,n.roles[S.value+"Cabinet"].tokenValidTime,null,null,!0),t.commit("auth/setToken",ue.data.data.token)),"user"in ue.data.data&&ue.data.data.user.type==="provider"){let me={id:ue.data.data.user.id,firstName:ue.data.data.user.firstName,lastName:ue.data.data.user.lastName,email:ue.data.data.user.email,phone:ue.data.data.user.phone,countryPhoneIso:ue.data.data.user.countryPhoneIso,googleCalendar:{id:"id"in ue.data.data.user.googleCalendar?ue.data.data.user.googleCalendar.id:null,calendarId:ue.data.data.user.googleCalendar.calendarId?ue.data.data.user.googleCalendar.calendarId:"",token:"token"in ue.data.data.user.googleCalendar?ue.data.data.user.googleCalendar.token:null},outlookCalendar:{id:"id"in ue.data.data.user.outlookCalendar?ue.data.data.user.outlookCalendar.id:null,calendarId:ue.data.data.user.outlookCalendar.calendarId?ue.data.data.user.outlookCalendar.calendarId:"",token:"token"in ue.data.data.user.outlookCalendar?ue.data.data.user.outlookCalendar.token:null},appleCalendarId:ue.data.data.user.appleCalendarId?ue.data.data.user.appleCalendarId:"",employeeAppleCalendar:ue.data.data.user.employeeAppleCalendar?ue.data.data.user.employeeAppleCalendar:null,stripeConnect:ue.data.data.user.stripeConnect,zoomUserId:ue.data.data.user.zoomUserId?ue.data.data.user.zoomUserId:"",locationId:ue.data.data.user.locationId,pictureFullPath:ue.data.data.user.pictureFullPath,pictureThumbPath:ue.data.data.user.pictureThumbPath,description:ue.data.data.user.description,weekDayList:ue.data.data.user.weekDayList,specialDayList:ue.data.data.user.specialDayList,dayOffList:ue.data.data.user.dayOffList,serviceList:ue.data.data.user.serviceList};me.serviceList.forEach(z=>{Ou(z)}),t.getters["entities/getReady"]&&(t.commit("entities/setEmployees",[JSON.parse(JSON.stringify(me))]),me.serviceList=Wr(t,me.serviceList)),t.commit("employee/setEmployee",Du(t,me)),t.commit("auth/setOutlookCalendars",ue.data.data.user.outlookCalendar?.calendarList?ue.data.data.user.outlookCalendar.calendarList:[]),t.commit("auth/setGoogleCalendars",ue.data.data.user.googleCalendar?.calendarList?ue.data.data.user.googleCalendar.calendarList:[]),n.appleCalendar&&!e.isLite&&!e.isStarter&&Pi(t),n.payments.stripe.enabled&&n.payments.stripe.connect.enabled&&!e.isLite&&!e.isStarter&&!e.isBasic&&cm(t),n.zoom.enabled&&!e.isLite&&!e.isStarter&&rm(t)}Bo("token")&&window.history.replaceState(null,null,Wa(window.location.href,"token")),t.commit("auth/setProfile",ue.data.data.user),ue.data.data.user.timeZone&&t.commit("cabinet/setTimeZone",ue.data.data.user.timeZone),"set_password"in ue.data.data&&ue.data.data.set_password||"change_password"in ue.data.data&&ue.data.data.change_password?_.value="setPassword":t.commit("auth/setAuthenticated",!0);let ae=S.value==="customer"?n.roles.customerCabinet.tokenValidTime*1e3:n.roles.providerCabinet.tokenValidTime*1e3;ae>0&&ae<18144e5&&setTimeout(()=>{t.dispatch("auth/logout")},ae)}).catch(ue=>{if(!("data"in ue.response.data)&&"message"in ue.response.data){h.value=!0,A.value=ue.response.data.message;return}"invalid_credentials"in ue.response.data.data&&(h.value=!0,A.value=d.value.invalid_credentials)}).finally(()=>{t.commit("setLoading",!1)})}function $(){g.value.validate(Q=>{if(Q)t.commit("setLoading",!0),E(null,!1,!1,!1);else return!1})}function V(){O(s.get("ameliaToken"),"changePass"in en(window.location.href))}gl(()=>{t.commit("setLoading",!0)}),Ze(()=>{if(t.getters["auth/getLoggedOut"])n.roles[S.value+"Cabinet"].loginEnabled||(_.value="sendAccessLink"),t.commit("setLoading",!1);else{let Q=en(window.location.href);n.googleCalendar.enabled&&S.value==="provider"&&Q&&Q.code&&Q.scope?am(Q.code,V):n.outlookCalendar.enabled&&S.value==="provider"&&Q&&Q.code&&Q.state?nm(Q.code,V):V()}});let j=F("containerWidth"),B=y(()=>tt(j.value)),G=F("amFonts"),H=F("amColors"),X=y(()=>({"--am-c-primary":H.value.colorPrimary,"--am-c-success":H.value.colorSuccess,"--am-c-error":H.value.colorError,"--am-c-warning":H.value.colorWarning,"--am-c-main-bgr":H.value.colorMainBgr,"--am-c-main-heading-text":H.value.colorMainHeadingText,"--am-c-main-text":H.value.colorMainText,"--am-c-main-text-op70":Y(H.value.colorMainText,.7),"--am-c-main-text-op60":Y(H.value.colorMainText,.6),"--am-c-main-text-op40":Y(H.value.colorMainText,.4),"--am-c-main-text-op25":Y(H.value.colorMainText,.25),"--am-c-inp-bgr":H.value.colorInpBgr,"--am-c-inp-border":H.value.colorInpBorder,"--am-c-inp-text":H.value.colorInpText,"--am-c-inp-placeholder":H.value.colorInpPlaceHolder,"--am-c-btn-prim":H.value.colorBtnPrim,"--am-c-btn-prim-text":H.value.colorBtnPrimText,"--am-c-skeleton-op20":Y(H.value.colorMainText,.2),"--am-c-skeleton-op60":Y(H.value.colorMainText,.6),"--am-font-family":G.value.fontFamily,"--am-c-scroll-op30":Y(H.value.colorPrimary,.3),"--am-c-scroll-op10":Y(H.value.colorPrimary,.1)}));return(Q,ee)=>{const le=et;return a(P)?(u(),q(a(Zt),{key:1,count:4,"center-first":!0,"main-class":"am-asi-sign-in am-asi"})):(u(),x("div",{key:0,class:"am-asi",style:_e(a(X))},[m("div",pm,[a(k)?(u(),q(wt,{key:0,class:"am-asi__top-message am-asi__top-message-success",type:"success",title:a(d).profile_deleted,description:"","show-icon":!0,closable:!0,onClose:ee[0]||(ee[0]=W=>a(t).commit("auth/setProfileDeleted",!1))},null,8,["title"])):D("",!0),a(h)?(u(),q(wt,{key:1,class:"am-asi__top-message am-asi__top-message-error",type:"error",title:a(A),description:"","show-icon":!0,closable:!0,onClose:ee[1]||(ee[1]=W=>a(t).commit("auth/setProfileDeleted",!1))},null,8,["title"])):D("",!0),m("div",fm,w(a(d).welcome_back),1),m("div",gm,w(a(d).enter_credentials),1)]),I(le,{ref_key:"authFormRef",ref:g,model:a(b),rules:a(T),"label-position":"top",class:R(["am-asi__form",a(B)])},{default:L(()=>[(u(!0),x(te,null,fe(a(C),(W,se)=>(u(),q(Tt(W.template),Dt({key:se,ref_for:!0,ref:"customerCollectorRef",modelValue:a(b)[se],"onUpdate:modelValue":ge=>a(b)[se]=ge},W.props,{onEnter:$}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),I(ke,{class:"am-asi__btn",type:a(i).signIn.options.signInBtn.buttonType,onClick:$},{default:L(()=>[ie(w(a(d).sign_in),1)]),_:1},8,["type"]),m("div",hm,[m("span",vm,w(a(d).forgot_your_password),1),m("span",{class:"am-asi__footer-link",onClick:ee[2]||(ee[2]=W=>ye(_)?_.value="sendAccessLink":_="sendAccessLink")},w(a(d).reset_password),1)])],4))}}});const bm={class:"am-asi__top"},km={class:"am-asi__header"},Cm={class:"am-asi__text"},xm={key:0,class:"am-asi__footer"},wm={name:"AuthReset"},Tm=Object.assign(wm,{setup(l){let e=Oe();const t=F("settings");let s=F("amCustomize");const n=F("labels"),i=F("localLanguage");let o=y(()=>t.general.usedLanguages.includes(i.value)),r=y(()=>{let A=nt({...n}),O=s.value.accessLink.translations;return O&&Object.keys(O).forEach(E=>{O[E][i.value]&&o.value?A[E]=O[E][i.value]:O[E].default&&(A[E]=O[E].default)}),A}),c=M(null),d=M({email:y({get:()=>e.getters["auth/getEmail"],set:A=>{e.commit("auth/setEmail",A||"")}})}),f=M({email:[{required:!0,message:r.value.enter_email_warning,trigger:"submit"}]}),v=M({email:{template:Ye.text,props:{itemName:"email",itemType:"email",label:r.value.email,placeholder:"",class:"am-asi__item"}}}),g=F("pageKey"),b=F("cabinetType"),T=y(()=>e.getters.getLoading);function C(){c.value.validate(A=>{if(A)e.commit("setLoading",!0),De.post("/users/customers/reauthorize",{email:e.getters["auth/getEmail"],locale:window.localeLanguage[0],cabinetType:b.value}).then(()=>{g.value="sendAccessLinkProcess"}).catch(()=>{}).finally(()=>{e.commit("setLoading",!1)});else return!1})}let _=F("containerWidth"),S=y(()=>tt(_.value)),P=F("amFonts"),k=F("amColors"),h=y(()=>({"--am-c-primary":k.value.colorPrimary,"--am-c-success":k.value.colorSuccess,"--am-c-error":k.value.colorError,"--am-c-warning":k.value.colorWarning,"--am-c-main-bgr":k.value.colorMainBgr,"--am-c-main-heading-text":k.value.colorMainHeadingText,"--am-c-main-text":k.value.colorMainText,"--am-c-main-text-op70":Y(k.value.colorMainText,.7),"--am-c-main-text-op60":Y(k.value.colorMainText,.6),"--am-c-main-text-op40":Y(k.value.colorMainText,.4),"--am-c-main-text-op25":Y(k.value.colorMainText,.25),"--am-c-inp-bgr":k.value.colorInpBgr,"--am-c-inp-border":k.value.colorInpBorder,"--am-c-inp-text":k.value.colorInpText,"--am-c-inp-placeholder":k.value.colorInpPlaceHolder,"--am-c-btn-prim":k.value.colorBtnPrim,"--am-c-btn-prim-text":k.value.colorBtnPrimText,"--am-c-skeleton-op20":Y(k.value.colorMainText,.2),"--am-c-skeleton-op60":Y(k.value.colorMainText,.6),"--am-font-family":P.value.fontFamily,"--am-c-scroll-op30":Y(k.value.colorPrimary,.3),"--am-c-scroll-op10":Y(k.value.colorPrimary,.1)}));return(A,O)=>{const E=et;return a(T)?(u(),q(a(Zt),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(u(),x("div",{key:0,class:"am-asi",style:_e(a(h))},[m("div",bm,[m("div",km,w(a(r).access_link_send),1),m("div",Cm,w(a(r).access_link_send_description),1)]),I(E,{ref_key:"authFormRef",ref:c,model:a(d),rules:a(f),"label-position":"top",class:R(["am-asi__form",a(S)])},{default:L(()=>[(u(!0),x(te,null,fe(a(v),($,V)=>(u(),q(Tt($.template),Dt({key:V,ref_for:!0,ref:"customerCollectorRef",modelValue:a(d)[V],"onUpdate:modelValue":j=>a(d)[V]=j},$.props,{onEnter:C}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),I(ke,{class:"am-asi__btn",type:a(s).accessLink.options.sendBtn.buttonType,onClick:C},{default:L(()=>[ie(w(a(r).send),1)]),_:1},8,["type"]),a(t).roles[a(b)+"Cabinet"].loginEnabled?(u(),x("div",xm,[m("span",{class:"am-asi__footer-link",onClick:O[0]||(O[0]=$=>ye(g)?g.value="signIn":g="signIn")},w(a(r).sign_in),1)])):D("",!0)],4))}}});const Sm={class:"am-asi__top"},Em={class:"am-asi__header"},Lm={class:"am-asi__text"},Am={class:"am-asi__email"},$m={class:"am-asi__footer"},Im={class:"am-asi__footer-text"},Pm={name:"AuthResetProcess"},Om=Object.assign(Pm,{setup(l){let e=Oe();const t=F("settings");let s=F("amCustomize");const n=F("labels"),i=F("localLanguage");let o=y(()=>t.general.usedLanguages.includes(i.value)),r=y(()=>{let b=nt({...n}),T=s.value.accessLinkSuccess.translations;return T&&Object.keys(T).forEach(C=>{T[C][i.value]&&o.value?b[C]=T[C][i.value]:T[C].default&&(b[C]=T[C].default)}),b}),c=y(()=>e.getters["auth/getEmail"]),d=F("pageKey"),f=F("amFonts"),v=F("amColors"),g=y(()=>({"--am-c-primary":v.value.colorPrimary,"--am-c-success":v.value.colorSuccess,"--am-c-error":v.value.colorError,"--am-c-warning":v.value.colorWarning,"--am-c-main-bgr":v.value.colorMainBgr,"--am-c-main-heading-text":v.value.colorMainHeadingText,"--am-c-main-text":v.value.colorMainText,"--am-c-main-text-op70":Y(v.value.colorMainText,.7),"--am-c-main-text-op60":Y(v.value.colorMainText,.6),"--am-c-main-text-op40":Y(v.value.colorMainText,.4),"--am-c-main-text-op25":Y(v.value.colorMainText,.25),"--am-c-inp-bgr":v.value.colorInpBgr,"--am-c-inp-border":v.value.colorInpBorder,"--am-c-inp-text":v.value.colorInpText,"--am-c-inp-placeholder":v.value.colorInpPlaceHolder,"--am-c-btn-prim":v.value.colorBtnPrim,"--am-c-btn-prim-text":v.value.colorBtnPrimText,"--am-c-skeleton-op20":Y(v.value.colorMainText,.2),"--am-c-skeleton-op60":Y(v.value.colorMainText,.6),"--am-font-family":f.value.fontFamily,"--am-c-scroll-op30":Y(v.value.colorPrimary,.3),"--am-c-scroll-op10":Y(v.value.colorPrimary,.1)}));return(b,T)=>(u(),x("div",{class:"am-asi",style:_e(a(g))},[m("div",Sm,[m("div",Em,w(a(r).access_link_send_check),1),m("div",Lm,w(a(r).access_link_send_click),1),m("div",Am,w(a(c)),1)]),m("div",$m,[m("span",Im,w(a(r).access_link_send_inbox),1),m("span",{class:"am-asi__footer-link",onClick:T[0]||(T[0]=C=>ye(d)?d.value="sendAccessLink":d="sendAccessLink")},w(a(r).access_link_send_retry),1)])],4))}});const Dm={class:"am-asi__top"},Nm={class:"am-asi__header"},Mm={class:"am-asi__text"},Bm={name:"AuthNewPass"},Fm=Object.assign(Bm,{setup(l){let e=Oe();const t=F("settings");let s=F("amCustomize");const n=F("labels"),i=F("localLanguage");let o=y(()=>t.general.usedLanguages.includes(i.value)),r=y(()=>{let h=nt({...n}),A=s.value.setPass.translations;return A&&Object.keys(A).forEach(O=>{A[O][i.value]&&o.value?h[O]=A[O][i.value]:A[O].default&&(h[O]=A[O].default)}),h}),c=M(null),d=M({newPassword:y({get:()=>e.getters["auth/getNewPassword"],set:h=>{e.commit("auth/setNewPassword",h||"")}}),confirmPassword:y({get:()=>e.getters["auth/getConfirmPassword"],set:h=>{e.commit("auth/setConfirmPassword",h||"")}})}),f=M({newPassword:[{required:!0,message:r.value.new_password_required,trigger:"submit"},{min:4,message:r.value.new_password_length,trigger:"submit"}],confirmPassword:[{required:!0,message:r.value.new_password_required,trigger:"submit"},{min:4,message:r.value.new_password_length,trigger:"submit"},{validator:()=>e.getters["auth/getNewPassword"]===e.getters["auth/getConfirmPassword"],message:r.value.passwords_not_match,trigger:"submit"}]}),v=M({newPassword:{template:Ye.text,props:{itemName:"newPassword",itemType:"password",showPassword:!0,label:r.value.new_password_colon,placeholder:"",minLength:3,class:"am-asi__item"}},confirmPassword:{template:Ye.text,props:{itemName:"confirmPassword",itemType:"password",showPassword:!0,label:r.value.new_password_colon_retype,placeholder:"",minLength:3,class:"am-asi__item"}}}),g=F("cabinetType"),b=y(()=>e.getters.getLoading);function T(){c.value.validate(h=>{if(h&&e.getters["auth/getNewPassword"]===e.getters["auth/getConfirmPassword"]){let A=e.getters["auth/getProfile"];e.commit("setLoading",!0),De.post("/users/"+g.value+"s/"+A.id,{password:e.getters["auth/getNewPassword"]},Object.assign(Ue(e),{params:{source:"cabinet-"+g.value}})).then(()=>{e.commit("auth/setAuthenticated",!0)}).catch(()=>{}).finally(()=>{e.commit("setLoading",!1)})}else return!1})}let C=F("containerWidth"),_=y(()=>tt(C.value)),S=F("amFonts"),P=F("amColors"),k=y(()=>({"--am-c-primary":P.value.colorPrimary,"--am-c-success":P.value.colorSuccess,"--am-c-error":P.value.colorError,"--am-c-warning":P.value.colorWarning,"--am-c-main-bgr":P.value.colorMainBgr,"--am-c-main-heading-text":P.value.colorMainHeadingText,"--am-c-main-text":P.value.colorMainText,"--am-c-main-text-op70":Y(P.value.colorMainText,.7),"--am-c-main-text-op60":Y(P.value.colorMainText,.6),"--am-c-main-text-op40":Y(P.value.colorMainText,.4),"--am-c-main-text-op25":Y(P.value.colorMainText,.25),"--am-c-inp-bgr":P.value.colorInpBgr,"--am-c-inp-border":P.value.colorInpBorder,"--am-c-inp-text":P.value.colorInpText,"--am-c-inp-placeholder":P.value.colorInpPlaceHolder,"--am-c-btn-prim":P.value.colorBtnPrim,"--am-c-btn-prim-text":P.value.colorBtnPrimText,"--am-c-skeleton-op20":Y(P.value.colorMainText,.2),"--am-c-skeleton-op60":Y(P.value.colorMainText,.6),"--am-font-family":S.value.fontFamily,"--am-c-scroll-op30":Y(P.value.colorPrimary,.3),"--am-c-scroll-op10":Y(P.value.colorPrimary,.1)}));return(h,A)=>{const O=et;return a(b)?(u(),q(a(Zt),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(u(),x("div",{key:0,class:"am-asi",style:_e(a(k))},[m("div",Dm,[m("div",Nm,w(a(r).new_password_set),1),m("div",Mm,w(a(r).new_password_set_description),1)]),I(O,{ref_key:"authFormRef",ref:c,model:a(d),rules:a(f),"label-position":"top",class:R(["am-asi__form",a(_)])},{default:L(()=>[(u(!0),x(te,null,fe(a(v),(E,$)=>(u(),q(Tt(E.template),Dt({key:$,ref_for:!0,ref:"customerCollectorRef",modelValue:a(d)[$],"onUpdate:modelValue":V=>a(d)[$]=V},E.props,{onEnter:T}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),I(ke,{class:"am-asi__btn",type:a(s).setPass.options.newPassBtn.buttonType,onClick:T},{default:L(()=>[ie(w(a(r).new_password_set_action),1)]),_:1},8,["type"])],4))}}});const Vm={class:"am-asi__top"},Rm=m("div",{class:"am-asi__img"},[m("span",{class:"am-icon-check"})],-1),qm={class:"am-asi__header"},Um={class:"am-asi__text"},jm={name:"ChangePassSuccess"},zm=Object.assign(jm,{setup(l){const e=F("settings");let t=F("amCustomize");const s=F("labels"),n=F("localLanguage");let i=y(()=>e.general.usedLanguages.includes(n.value)),o=y(()=>{let v=nt({...s}),g=t.value.setPassSuccess.translations;return g&&Object.keys(g).forEach(b=>{g[b][n.value]&&i.value?v[b]=g[b][n.value]:g[b].default&&(v[b]=g[b].default)}),v}),r=F("pageKey"),c=F("amFonts"),d=F("amColors"),f=y(()=>({"--am-c-primary":d.value.colorPrimary,"--am-c-success":d.value.colorSuccess,"--am-c-error":d.value.colorError,"--am-c-warning":d.value.colorWarning,"--am-c-main-bgr":d.value.colorMainBgr,"--am-c-main-heading-text":d.value.colorMainHeadingText,"--am-c-main-text":d.value.colorMainText,"--am-c-main-text-op70":Y(d.value.colorMainText,.7),"--am-c-main-text-op60":Y(d.value.colorMainText,.6),"--am-c-main-text-op40":Y(d.value.colorMainText,.4),"--am-c-main-text-op25":Y(d.value.colorMainText,.25),"--am-c-btn-prim":d.value.colorBtnPrim,"--am-c-btn-prim-text":d.value.colorBtnPrimText,"--am-c-skeleton-op20":Y(d.value.colorMainText,.2),"--am-c-skeleton-op60":Y(d.value.colorMainText,.6),"--am-font-family":c.value.fontFamily,"--am-c-scroll-op30":Y(d.value.colorPrimary,.3),"--am-c-scroll-op10":Y(d.value.colorPrimary,.1)}));return(v,g)=>(u(),x("div",{class:"am-asi",style:_e(a(f))},[m("div",Vm,[Rm,m("div",qm,w(a(o).new_password_changed),1),m("div",Um,w(a(o).new_password_changed_description),1)]),I(ke,{class:"am-asi__btn",type:a(t).setPassSuccess.options.signInBtn.buttonType,onClick:g[0]||(g[0]=b=>ye(r)?r.value="signIn":r="signIn")},{default:L(()=>[ie(w(a(o).sign_in),1)]),_:1},8,["type"])],4))}}),Ym={name:"AuthWrapper"},Wm=Object.assign(Ym,{setup(l){const e=F("settings");let t=M({signIn:Je(ym),sendAccessLink:Je(Tm),sendAccessLinkProcess:Je(Om),setPassword:Je(Fm),changeSuccess:Je(zm)}),s=F("originKey"),n=M("signIn");Be("pageKey",n);const i=M(e.customizedData?e.customizedData.fonts:tn.fonts);Be("amFonts",i);let o=y(()=>e.customizedData&&s.value in e.customizedData?e.customizedData[s.value].colors:tn[s.value].colors);return Be("amColors",o),(r,c)=>(u(),q(Tt(a(t)[a(n)])))}});const Hm={class:"am-csd__inner"},Zm={class:"am-csd__header"},Gm={class:"am-csd__header-text"},Jm={class:"am-csd__content"},Xm={class:"am-csd__footer"},Qm={name:"DeleteProfile"},Km=Object.assign(Qm,{props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},customizedOptions:{type:Object,default:()=>({})}},emits:["close","deleteProfile"],setup(l,{emit:e}){const t=l;let s=F("containerWidth");const n=F("labels");function i(d){return Object.keys(t.customizedLabels).length&&t.customizedLabels[d]?t.customizedLabels[d]:n[d]}let o=F("amFonts"),r=F("amColors"),c=y(()=>({"--am-c-csd-text":r.value.colorMainText,"--am-c-csd-bgr":r.value.colorMainBgr,"--am-c-csd-text-op10":Y(r.value.colorMainText,.1),"--am-font-family":o.value.fontFamily}));return(d,f)=>(u(),q(Xa,{visibility:a(t).visibility,"custom-class":"am-csd am-csd__cancel",style:_e(a(c)),position:"center"},{footer:L(()=>[m("div",Xm,[I(ke,{category:"secondary",size:a(s)<=360?"small":"default",type:a(t).customizedOptions.closeBtn.buttonType,onClick:f[1]||(f[1]=()=>{e("close")})},{default:L(()=>[ie(w(i("close")),1)]),_:1},8,["size","type"]),I(ke,{category:"danger",size:a(s)<=360?"small":"default","loading-icon":"loading",type:a(t).customizedOptions.confirmBtn.buttonType,onClick:f[2]||(f[2]=()=>{e("deleteProfile")})},{default:L(()=>[ie(w(i("delete")),1)]),_:1},8,["size","type"])])]),default:L(()=>[m("div",Hm,[m("div",Zm,[m("div",Gm,w(i("delete_profile")),1),m("div",{class:"am-csd__header-btn",onClick:f[0]||(f[0]=()=>{e("close")})},[I(He,{icon:"close"})])]),m("div",Jm,[m("p",null,w(i("delete_profile_description")),1)])])]),_:1},8,["visibility","style"]))}});const Oi={props:{pageWidth:{type:Number,default:768},count:{type:[Number,String],default:2},itemDirection:{type:String,default:"row",validator(l){return["row","row-reverse","column","column-reverse","initial","revert","unset"].includes(l)}}},setup(l){const e=l;let t=y(()=>tt(e.pageWidth)),s=F("amColors"),n=y(()=>({"--am-c-skeleton-op20":Y(s.value.colorMainText,.2),"--am-c-skeleton-op60":Y(s.value.colorMainText,.6),"--am-c-flex-direction":e.itemDirection}));return(i,o)=>{const r=fn,c=gn;return u(),q(c,{animated:"",class:"am-cps",style:_e(a(n))},{template:L(()=>[(u(!0),x(te,null,fe(new Array(a(e).count),d=>(u(),x("div",{key:d,class:R(["am-cps__item",a(t)])},[I(r,{class:"am-cps__item-label",variant:"rect"}),I(r,{class:"am-cps__item-input",variant:"rect"})],2))),128))]),_:1},8,["style"])}}};const ep={class:"am-capi__inner"},tp=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),ap={name:"CabinetProfile",key:"profile"},sp=Object.assign(ap,{setup(l){let e=Oe(),t=y(()=>e.getters.getLoading),s=M(null),n=M(0),i=F("sidebarCollapsed");window.addEventListener("resize",o);function o(){s.value&&(n.value=s.value.offsetWidth)}rt(i,me=>{me?setTimeout(()=>{r()},1500):setTimeout(()=>{r()},500)});function r(){n.value=s.value.offsetWidth}Ze(()=>{ao(()=>{n.value=s.value.offsetWidth})});let c=y(()=>tt(n.value));const d=F("settings");let f=F("cabinetType"),v=F("amCustomize");const g=F("labels"),b=F("localLanguage");let T=y(()=>d.general.usedLanguages.includes(b.value));function C(me,z){return z&&Object.keys(z).forEach(J=>{z[J][b.value]&&T.value?me[J]=z[J][b.value]:z[J].default&&(me[J]=z[J].default)}),me}let _=y(()=>{let me=nt({...g}),z=v.value.profile.translations;return C(me,z)});function S(me){let z={},J=v.value[me].translations;return C(z,J)}let P=y(()=>v.value.profile.options),k=M("first"),h=M("");function A(){le.value=!1,h.value=""}let O=M(null),E=M(!1),$=M({firstName:y({get:()=>e.getters["auth/getProfile"].firstName,set:me=>{e.commit("auth/setProfileFirstName",me||"")}}),lastName:y({get:()=>e.getters["auth/getProfile"].lastName,set:me=>{e.commit("auth/setProfileLastName",me||"")}}),email:y({get:()=>e.getters["auth/getProfile"].email,set:me=>{e.commit("auth/setProfileEmail",me||"")}}),phone:y({get:()=>e.getters["auth/getProfile"].phone,set:me=>{e.commit("auth/setProfilePhone",me||"")}}),birthday:y({get:()=>e.getters["auth/getProfile"].birthday?e.getters["auth/getProfile"].birthday:"",set:me=>{e.commit("auth/setProfileBirthday",me?pe(me).format("YYYY-MM-DD"):"")}})}),V=M({firstName:{template:Ye.text,props:{itemName:"firstName",label:_.value.first_name_colon,placeholder:_.value.enter_first_name,class:y(()=>`am-capi__item ${c.value}`)}},lastName:{template:Ye.text,props:{itemName:"lastName",label:_.value.last_name_colon,placeholder:_.value.enter_last_name,class:y(()=>`am-capi__item ${c.value}`)}},email:{template:Ye.text,props:{itemName:"email",label:_.value.email_colon,placeholder:_.value.enter_email,class:y(()=>`am-capi__item ${c.value}`)}},phone:{countryPhoneIso:y({get:()=>e.getters["auth/getProfile"].countryPhoneIso?e.getters["auth/getProfile"].countryPhoneIso:"",set:me=>{e.commit("auth/setProfileCountryPhoneIso",me?me.toLowerCase():"")}}),template:Ye.phone,props:{itemName:"phone",label:_.value.phone_colon,placeholder:_.value.enter_phone,defaultCode:y(()=>e.getters["auth/getProfile"].countryPhoneIso?e.getters["auth/getProfile"].countryPhoneIso:""),phoneError:y(()=>E.value),whatsAppLabel:_.value.whatsapp_opt_in_text,isWhatsApp:d.notifications.whatsAppEnabled&&d.notifications.whatsAppAccessToken&&d.notifications.whatsAppBusinessID&&d.notifications.whatsAppPhoneID,class:y(()=>`am-capi__item ${c.value}`)}},birthday:{template:Ye.datepicker,props:{itemName:"birthday",label:_.value.date_of_birth,placeholder:_.value.enter_date_of_birth,clearable:!0,readOnly:!1,class:y(()=>`am-capi__item am-capi__item-birthday ${c.value}`)}}}),j=M({firstName:[{required:!0,message:_.value.enter_first_name_warning,trigger:"submit"}],lastName:[{required:P.value.lastName.required,message:_.value.enter_last_name_warning,trigger:"submit"}],email:[{required:P.value.email.required,type:"email",message:_.value.enter_valid_email_warning,trigger:"submit"}],phone:[{required:P.value.phone.required,message:_.value.enter_phone_warning,trigger:"submit"}],birthday:[{required:P.value.birthday.required,message:_.value.enter_date_of_birth_warning,trigger:"submit"}]}),B=M(!1);Be("deleteProfileDialog",B);function G(){e.commit("auth/setProfileFirstName",$.value.firstName?$.value.firstName.trim():""),e.commit("auth/setProfileLastName",$.value.lastName?$.value.lastName.trim():""),e.commit("auth/setProfileEmail",$.value.email?$.value.email.trim():""),O.value.validate(me=>{if(me){h.value=_.value.profile_data_success;let z=e.getters["auth/getProfile"];e.commit("setLoading",!0),De.post("/users/"+f.value+"s/"+z.id,z,Ue(e)).finally(()=>{e.commit("setLoading",!1),le.value=!0,P.value.phone.required&&$.value.phone&&(E.value=!1)})}else return P.value.phone.required&&!$.value.phone&&(E.value=!0),!1})}Be("saveProfileChanges",G);let H=M(null),X=M({newPass:y({get:()=>e.getters["auth/getNewPassword"],set:me=>{e.commit("auth/setNewPassword",me||"")}}),confirmPass:y({get:()=>e.getters["auth/getConfirmPassword"],set:me=>{e.commit("auth/setConfirmPassword",me||"")}})}),Q=M({newPass:{template:Ye.text,props:{itemName:"newPass",itemType:"password",showPassword:!0,label:_.value.new_password_colon,placeholder:"",minLength:3,class:y(()=>`am-capp__item ${c.value}`)}},confirmPass:{template:Ye.text,props:{itemName:"confirmPass",itemType:"password",showPassword:!0,label:_.value.new_password_colon_retype,placeholder:"",minLength:3,class:y(()=>`am-capp__item ${c.value}`)}}}),ee=M({newPass:[{required:!0,message:_.value.new_password_required,trigger:"submit"},{min:4,message:_.value.new_password_length,trigger:"submit"}],confirmPass:[{required:!0,message:_.value.new_password_required,trigger:"submit"},{min:4,message:_.value.new_password_length,trigger:"submit"},{validator:()=>e.getters["auth/getNewPassword"]===e.getters["auth/getConfirmPassword"],message:_.value.passwords_not_match,trigger:"submit"}]}),le=M(!1);function W(){le.value=!1}function se(){H.value.validate(me=>{if(me){let z=e.getters["auth/getProfile"];e.commit("setLoading",!0),De.post("/users/customers/"+z.id,{password:e.getters["auth/getNewPassword"]},Ue(e)).then(()=>{h.value=_.value.password_success,e.commit("auth/setNewPassword",""),e.commit("auth/setConfirmPassword","")}).catch(()=>{}).finally(()=>{e.commit("setLoading",!1),le.value=!0})}else return!1})}Be("changeProfilePassword",se);function ge(){B.value=!1,e.commit("auth/setProfileDeleted",!0),e.dispatch("auth/logout")}function Ie(){e.commit("setLoading",!0);let me=e.getters["auth/getProfile"]?e.getters["auth/getProfile"].id:null;if(!me)return;let z={email:"",firstName:_.value.customer,lastName:me,phone:"",birthday:"",gender:"",externalId:"",password:""};const J=pn().cookies;De.post("/users/customers/"+me,Object.assign(Ue(e),z)).then(()=>{e.commit("auth/setProfile",{}),J.remove("ameliaUserEmail"),e.commit("setLoading",!1),ge()}).catch(Z=>{e.commit("setLoading",!1),console.log(Z)})}let ue=F("amColors"),ae=y(()=>({"--am-c-capi-primary":ue.value.colorPrimary,"--am-c-capi-text":ue.value.colorMainText,"--am-c-capi-text-op10":Y(ue.value.colorMainText,.1)}));return(me,z)=>{const J=et,Z=Qa,de=Ka;return u(),x("div",{ref_key:"pageContainer",ref:s,class:"am-capi",style:_e(a(ae))},[m("div",ep,[a(le)?(u(),q(wt,{key:0,type:"success","show-border":!0,"close-after":5e3,"custom-class":"am-capi__alert",onClose:A,onTriggerClose:A},{title:L(()=>[tp,ie(" "+w(a(h)),1)]),_:1})):D("",!0),I(de,{modelValue:a(k),"onUpdate:modelValue":z[0]||(z[0]=K=>ye(k)?k.value=K:k=K),class:"am-capi__tabs",onTabClick:W},{default:L(()=>[I(Z,{class:"am-capi__tabs-item",label:a(_).personal_info,name:"first"},{default:L(()=>[a(t)?(u(),q(Oi,{key:1,count:5,"page-width":a(n)},null,8,["page-width"])):(u(),x(te,{key:0},[a(e).getters["auth/getProfile"]?(u(),q(J,{key:0,ref_key:"infoFormRef",ref:O,model:a($),rules:a(j),"label-position":"top",class:R(["am-capi__form",a(c)])},{default:L(()=>[(u(!0),x(te,null,fe(a(v).profile.order,K=>(u(),x(te,{key:K.id},[!a(P)[K.id]||a(P)[K.id].visibility?(u(),q(Tt(a(V)[K.id].template),Dt({key:0,ref_for:!0,ref:"customerCollectorRef",modelValue:a($)[K.id],"onUpdate:modelValue":oe=>a($)[K.id]=oe,countryPhoneIso:a(V)[K.id].countryPhoneIso,"onUpdate:countryPhoneIso":oe=>a(V)[K.id].countryPhoneIso=oe},a(V)[K.id].props),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"])):D("",!0)],64))),128))]),_:1},8,["model","rules","class"])):D("",!0)],64))]),_:1},8,["label"]),I(Z,{class:"am-capi__tabs-item",label:a(_).password_tab,name:"second"},{default:L(()=>[a(t)?(u(),q(Oi,{key:1,"item-direction":"column",count:2,"page-width":a(n)},null,8,["page-width"])):(u(),q(J,{key:0,ref_key:"passFormRef",ref:H,model:a(X),rules:a(ee),"label-position":"top",class:R(["am-capi__form",a(c)])},{default:L(()=>[(u(!0),x(te,null,fe(a(Q),(K,oe)=>(u(),q(Tt(K.template),Dt({key:K.props.itemName,ref_for:!0,ref:"customerPassCollectorRef",modelValue:a(X)[oe],"onUpdate:modelValue":he=>a(X)[oe]=he},K.props),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]))]),_:1},8,["label"])]),_:1},8,["modelValue"]),I(Km,{visibility:a(B),"customized-labels":S("deleteProfile"),"customized-options":a(v).deleteProfile.options,onClose:z[1]||(z[1]=K=>ye(B)?B.value=!1:B=!1),onDeleteProfile:Ie},null,8,["visibility","customized-labels","customized-options"]),I(dd,{loading:a(t),display:a(k),"parent-width":a(n),"customized-labels":a(_),"save-footer-button":a(P).saveFooterButton.buttonType,"delete-footer-type":a(P).deleteFooterButton.buttonType,"pass-footer-button":a(P).passFooterButton.buttonType},null,8,["loading","display","parent-width","customized-labels","save-footer-button","delete-footer-type","pass-footer-button"])])],4)}}});var lp=typeof global=="object"&&global&&global.Object===Object&&global,ac=lp,np=typeof self=="object"&&self&&self.Object===Object&&self,ip=ac||np||Function("return this")(),da=ip,op=da.Symbol,Da=op,sc=Object.prototype,rp=sc.hasOwnProperty,cp=sc.toString,Qs=Da?Da.toStringTag:void 0;function up(l){var e=rp.call(l,Qs),t=l[Qs];try{l[Qs]=void 0;var s=!0}catch{}var n=cp.call(l);return s&&(e?l[Qs]=t:delete l[Qs]),n}var dp=Object.prototype,mp=dp.toString;function pp(l){return mp.call(l)}var fp="[object Null]",gp="[object Undefined]",qo=Da?Da.toStringTag:void 0;function Ns(l){return l==null?l===void 0?gp:fp:qo&&qo in Object(l)?up(l):pp(l)}function ya(l){return l!=null&&typeof l=="object"}var hp=Array.isArray,Ha=hp;function Ba(l){var e=typeof l;return l!=null&&(e=="object"||e=="function")}function lc(l){return l}var vp="[object AsyncFunction]",_p="[object Function]",yp="[object GeneratorFunction]",bp="[object Proxy]";function no(l){if(!Ba(l))return!1;var e=Ns(l);return e==_p||e==yp||e==vp||e==bp}var kp=da["__core-js_shared__"],vi=kp,Uo=function(){var l=/[^.]+$/.exec(vi&&vi.keys&&vi.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}();function Cp(l){return!!Uo&&Uo in l}var xp=Function.prototype,wp=xp.toString;function ts(l){if(l!=null){try{return wp.call(l)}catch{}try{return l+""}catch{}}return""}var Tp=/[\\^$.*+?()[\]{}|]/g,Sp=/^\[object .+?Constructor\]$/,Ep=Function.prototype,Lp=Object.prototype,Ap=Ep.toString,$p=Lp.hasOwnProperty,Ip=RegExp("^"+Ap.call($p).replace(Tp,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Pp(l){if(!Ba(l)||Cp(l))return!1;var e=no(l)?Ip:Sp;return e.test(ts(l))}function Op(l,e){return l?.[e]}function as(l,e){var t=Op(l,e);return Pp(t)?t:void 0}var Dp=as(da,"WeakMap"),Di=Dp,jo=Object.create,Np=function(){function l(){}return function(e){if(!Ba(e))return{};if(jo)return jo(e);l.prototype=e;var t=new l;return l.prototype=void 0,t}}(),Mp=Np;function Bp(l,e,t){switch(t.length){case 0:return l.call(e);case 1:return l.call(e,t[0]);case 2:return l.call(e,t[0],t[1]);case 3:return l.call(e,t[0],t[1],t[2])}return l.apply(e,t)}function nc(l,e){var t=-1,s=l.length;for(e||(e=Array(s));++t<s;)e[t]=l[t];return e}var Fp=800,Vp=16,Rp=Date.now;function qp(l){var e=0,t=0;return function(){var s=Rp(),n=Vp-(s-t);if(t=s,n>0){if(++e>=Fp)return arguments[0]}else e=0;return l.apply(void 0,arguments)}}function Up(l){return function(){return l}}var jp=function(){try{var l=as(Object,"defineProperty");return l({},"",{}),l}catch{}}(),ln=jp,zp=ln?function(l,e){return ln(l,"toString",{configurable:!0,enumerable:!1,value:Up(e),writable:!0})}:lc,Yp=zp,Wp=qp(Yp),Hp=Wp;function Zp(l,e){for(var t=-1,s=l==null?0:l.length;++t<s&&e(l[t],t,l)!==!1;);return l}var Gp=9007199254740991,Jp=/^(?:0|[1-9]\d*)$/;function ic(l,e){var t=typeof l;return e=e??Gp,!!e&&(t=="number"||t!="symbol"&&Jp.test(l))&&l>-1&&l%1==0&&l<e}function io(l,e,t){e=="__proto__"&&ln?ln(l,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):l[e]=t}function yl(l,e){return l===e||l!==l&&e!==e}var Xp=Object.prototype,Qp=Xp.hasOwnProperty;function oc(l,e,t){var s=l[e];(!(Qp.call(l,e)&&yl(s,t))||t===void 0&&!(e in l))&&io(l,e,t)}function bl(l,e,t,s){var n=!t;t||(t={});for(var i=-1,o=e.length;++i<o;){var r=e[i],c=s?s(t[r],l[r],r,t,l):void 0;c===void 0&&(c=l[r]),n?io(t,r,c):oc(t,r,c)}return t}var zo=Math.max;function Kp(l,e,t){return e=zo(e===void 0?l.length-1:e,0),function(){for(var s=arguments,n=-1,i=zo(s.length-e,0),o=Array(i);++n<i;)o[n]=s[e+n];n=-1;for(var r=Array(e+1);++n<e;)r[n]=s[n];return r[e]=t(o),Bp(l,this,r)}}function ef(l,e){return Hp(Kp(l,e,lc),l+"")}var tf=9007199254740991;function rc(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=tf}function yn(l){return l!=null&&rc(l.length)&&!no(l)}function af(l,e,t){if(!Ba(t))return!1;var s=typeof e;return(s=="number"?yn(t)&&ic(e,t.length):s=="string"&&e in t)?yl(t[e],l):!1}function sf(l){return ef(function(e,t){var s=-1,n=t.length,i=n>1?t[n-1]:void 0,o=n>2?t[2]:void 0;for(i=l.length>3&&typeof i=="function"?(n--,i):void 0,o&&af(t[0],t[1],o)&&(i=n<3?void 0:i,n=1),e=Object(e);++s<n;){var r=t[s];r&&l(e,r,s,i)}return e})}var lf=Object.prototype;function oo(l){var e=l&&l.constructor,t=typeof e=="function"&&e.prototype||lf;return l===t}function nf(l,e){for(var t=-1,s=Array(l);++t<l;)s[t]=e(t);return s}var of="[object Arguments]";function Yo(l){return ya(l)&&Ns(l)==of}var cc=Object.prototype,rf=cc.hasOwnProperty,cf=cc.propertyIsEnumerable,uf=Yo(function(){return arguments}())?Yo:function(l){return ya(l)&&rf.call(l,"callee")&&!cf.call(l,"callee")},Ni=uf;function df(){return!1}var uc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Wo=uc&&typeof module=="object"&&module&&!module.nodeType&&module,mf=Wo&&Wo.exports===uc,Ho=mf?da.Buffer:void 0,pf=Ho?Ho.isBuffer:void 0,ff=pf||df,il=ff,gf="[object Arguments]",hf="[object Array]",vf="[object Boolean]",_f="[object Date]",yf="[object Error]",bf="[object Function]",kf="[object Map]",Cf="[object Number]",xf="[object Object]",wf="[object RegExp]",Tf="[object Set]",Sf="[object String]",Ef="[object WeakMap]",Lf="[object ArrayBuffer]",Af="[object DataView]",$f="[object Float32Array]",If="[object Float64Array]",Pf="[object Int8Array]",Of="[object Int16Array]",Df="[object Int32Array]",Nf="[object Uint8Array]",Mf="[object Uint8ClampedArray]",Bf="[object Uint16Array]",Ff="[object Uint32Array]",Ke={};Ke[$f]=Ke[If]=Ke[Pf]=Ke[Of]=Ke[Df]=Ke[Nf]=Ke[Mf]=Ke[Bf]=Ke[Ff]=!0;Ke[gf]=Ke[hf]=Ke[Lf]=Ke[vf]=Ke[Af]=Ke[_f]=Ke[yf]=Ke[bf]=Ke[kf]=Ke[Cf]=Ke[xf]=Ke[wf]=Ke[Tf]=Ke[Sf]=Ke[Ef]=!1;function Vf(l){return ya(l)&&rc(l.length)&&!!Ke[Ns(l)]}function ro(l){return function(e){return l(e)}}var dc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,al=dc&&typeof module=="object"&&module&&!module.nodeType&&module,Rf=al&&al.exports===dc,_i=Rf&&ac.process,qf=function(){try{var l=al&&al.require&&al.require("util").types;return l||_i&&_i.binding&&_i.binding("util")}catch{}}(),$s=qf,Zo=$s&&$s.isTypedArray,Uf=Zo?ro(Zo):Vf,co=Uf,jf=Object.prototype,zf=jf.hasOwnProperty;function mc(l,e){var t=Ha(l),s=!t&&Ni(l),n=!t&&!s&&il(l),i=!t&&!s&&!n&&co(l),o=t||s||n||i,r=o?nf(l.length,String):[],c=r.length;for(var d in l)(e||zf.call(l,d))&&!(o&&(d=="length"||n&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||ic(d,c)))&&r.push(d);return r}function pc(l,e){return function(t){return l(e(t))}}var Yf=pc(Object.keys,Object),Wf=Yf,Hf=Object.prototype,Zf=Hf.hasOwnProperty;function Gf(l){if(!oo(l))return Wf(l);var e=[];for(var t in Object(l))Zf.call(l,t)&&t!="constructor"&&e.push(t);return e}function uo(l){return yn(l)?mc(l):Gf(l)}function Jf(l){var e=[];if(l!=null)for(var t in Object(l))e.push(t);return e}var Xf=Object.prototype,Qf=Xf.hasOwnProperty;function Kf(l){if(!Ba(l))return Jf(l);var e=oo(l),t=[];for(var s in l)s=="constructor"&&(e||!Qf.call(l,s))||t.push(s);return t}function kl(l){return yn(l)?mc(l,!0):Kf(l)}var eg=as(Object,"create"),ol=eg;function tg(){this.__data__=ol?ol(null):{},this.size=0}function ag(l){var e=this.has(l)&&delete this.__data__[l];return this.size-=e?1:0,e}var sg="__lodash_hash_undefined__",lg=Object.prototype,ng=lg.hasOwnProperty;function ig(l){var e=this.__data__;if(ol){var t=e[l];return t===sg?void 0:t}return ng.call(e,l)?e[l]:void 0}var og=Object.prototype,rg=og.hasOwnProperty;function cg(l){var e=this.__data__;return ol?e[l]!==void 0:rg.call(e,l)}var ug="__lodash_hash_undefined__";function dg(l,e){var t=this.__data__;return this.size+=this.has(l)?0:1,t[l]=ol&&e===void 0?ug:e,this}function Za(l){var e=-1,t=l==null?0:l.length;for(this.clear();++e<t;){var s=l[e];this.set(s[0],s[1])}}Za.prototype.clear=tg;Za.prototype.delete=ag;Za.prototype.get=ig;Za.prototype.has=cg;Za.prototype.set=dg;function mg(){this.__data__=[],this.size=0}function bn(l,e){for(var t=l.length;t--;)if(yl(l[t][0],e))return t;return-1}var pg=Array.prototype,fg=pg.splice;function gg(l){var e=this.__data__,t=bn(e,l);if(t<0)return!1;var s=e.length-1;return t==s?e.pop():fg.call(e,t,1),--this.size,!0}function hg(l){var e=this.__data__,t=bn(e,l);return t<0?void 0:e[t][1]}function vg(l){return bn(this.__data__,l)>-1}function _g(l,e){var t=this.__data__,s=bn(t,l);return s<0?(++this.size,t.push([l,e])):t[s][1]=e,this}function Ca(l){var e=-1,t=l==null?0:l.length;for(this.clear();++e<t;){var s=l[e];this.set(s[0],s[1])}}Ca.prototype.clear=mg;Ca.prototype.delete=gg;Ca.prototype.get=hg;Ca.prototype.has=vg;Ca.prototype.set=_g;var yg=as(da,"Map"),rl=yg;function bg(){this.size=0,this.__data__={hash:new Za,map:new(rl||Ca),string:new Za}}function kg(l){var e=typeof l;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?l!=="__proto__":l===null}function kn(l,e){var t=l.__data__;return kg(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Cg(l){var e=kn(this,l).delete(l);return this.size-=e?1:0,e}function xg(l){return kn(this,l).get(l)}function wg(l){return kn(this,l).has(l)}function Tg(l,e){var t=kn(this,l),s=t.size;return t.set(l,e),this.size+=t.size==s?0:1,this}function ss(l){var e=-1,t=l==null?0:l.length;for(this.clear();++e<t;){var s=l[e];this.set(s[0],s[1])}}ss.prototype.clear=bg;ss.prototype.delete=Cg;ss.prototype.get=xg;ss.prototype.has=wg;ss.prototype.set=Tg;function fc(l,e){for(var t=-1,s=e.length,n=l.length;++t<s;)l[n+t]=e[t];return l}var Sg=pc(Object.getPrototypeOf,Object),mo=Sg,Eg="[object Object]",Lg=Function.prototype,Ag=Object.prototype,gc=Lg.toString,$g=Ag.hasOwnProperty,Ig=gc.call(Object);function Pg(l){if(!ya(l)||Ns(l)!=Eg)return!1;var e=mo(l);if(e===null)return!0;var t=$g.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&gc.call(t)==Ig}function Og(){this.__data__=new Ca,this.size=0}function Dg(l){var e=this.__data__,t=e.delete(l);return this.size=e.size,t}function Ng(l){return this.__data__.get(l)}function Mg(l){return this.__data__.has(l)}var Bg=200;function Fg(l,e){var t=this.__data__;if(t instanceof Ca){var s=t.__data__;if(!rl||s.length<Bg-1)return s.push([l,e]),this.size=++t.size,this;t=this.__data__=new ss(s)}return t.set(l,e),this.size=t.size,this}function ca(l){var e=this.__data__=new Ca(l);this.size=e.size}ca.prototype.clear=Og;ca.prototype.delete=Dg;ca.prototype.get=Ng;ca.prototype.has=Mg;ca.prototype.set=Fg;function Vg(l,e){return l&&bl(e,uo(e),l)}function Rg(l,e){return l&&bl(e,kl(e),l)}var hc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Go=hc&&typeof module=="object"&&module&&!module.nodeType&&module,qg=Go&&Go.exports===hc,Jo=qg?da.Buffer:void 0,Xo=Jo?Jo.allocUnsafe:void 0;function vc(l,e){if(e)return l.slice();var t=l.length,s=Xo?Xo(t):new l.constructor(t);return l.copy(s),s}function Ug(l,e){for(var t=-1,s=l==null?0:l.length,n=0,i=[];++t<s;){var o=l[t];e(o,t,l)&&(i[n++]=o)}return i}function _c(){return[]}var jg=Object.prototype,zg=jg.propertyIsEnumerable,Qo=Object.getOwnPropertySymbols,Yg=Qo?function(l){return l==null?[]:(l=Object(l),Ug(Qo(l),function(e){return zg.call(l,e)}))}:_c,po=Yg;function Wg(l,e){return bl(l,po(l),e)}var Hg=Object.getOwnPropertySymbols,Zg=Hg?function(l){for(var e=[];l;)fc(e,po(l)),l=mo(l);return e}:_c,yc=Zg;function Gg(l,e){return bl(l,yc(l),e)}function bc(l,e,t){var s=e(l);return Ha(l)?s:fc(s,t(l))}function Mi(l){return bc(l,uo,po)}function Jg(l){return bc(l,kl,yc)}var Xg=as(da,"DataView"),Bi=Xg,Qg=as(da,"Promise"),Fi=Qg,Kg=as(da,"Set"),Vi=Kg,Ko="[object Map]",eh="[object Object]",er="[object Promise]",tr="[object Set]",ar="[object WeakMap]",sr="[object DataView]",th=ts(Bi),ah=ts(rl),sh=ts(Fi),lh=ts(Vi),nh=ts(Di),Ya=Ns;(Bi&&Ya(new Bi(new ArrayBuffer(1)))!=sr||rl&&Ya(new rl)!=Ko||Fi&&Ya(Fi.resolve())!=er||Vi&&Ya(new Vi)!=tr||Di&&Ya(new Di)!=ar)&&(Ya=function(l){var e=Ns(l),t=e==eh?l.constructor:void 0,s=t?ts(t):"";if(s)switch(s){case th:return sr;case ah:return Ko;case sh:return er;case lh:return tr;case nh:return ar}return e});var cl=Ya,ih=Object.prototype,oh=ih.hasOwnProperty;function rh(l){var e=l.length,t=new l.constructor(e);return e&&typeof l[0]=="string"&&oh.call(l,"index")&&(t.index=l.index,t.input=l.input),t}var ch=da.Uint8Array,nn=ch;function fo(l){var e=new l.constructor(l.byteLength);return new nn(e).set(new nn(l)),e}function uh(l,e){var t=e?fo(l.buffer):l.buffer;return new l.constructor(t,l.byteOffset,l.byteLength)}var dh=/\w*$/;function mh(l){var e=new l.constructor(l.source,dh.exec(l));return e.lastIndex=l.lastIndex,e}var lr=Da?Da.prototype:void 0,nr=lr?lr.valueOf:void 0;function ph(l){return nr?Object(nr.call(l)):{}}function kc(l,e){var t=e?fo(l.buffer):l.buffer;return new l.constructor(t,l.byteOffset,l.length)}var fh="[object Boolean]",gh="[object Date]",hh="[object Map]",vh="[object Number]",_h="[object RegExp]",yh="[object Set]",bh="[object String]",kh="[object Symbol]",Ch="[object ArrayBuffer]",xh="[object DataView]",wh="[object Float32Array]",Th="[object Float64Array]",Sh="[object Int8Array]",Eh="[object Int16Array]",Lh="[object Int32Array]",Ah="[object Uint8Array]",$h="[object Uint8ClampedArray]",Ih="[object Uint16Array]",Ph="[object Uint32Array]";function Oh(l,e,t){var s=l.constructor;switch(e){case Ch:return fo(l);case fh:case gh:return new s(+l);case xh:return uh(l,t);case wh:case Th:case Sh:case Eh:case Lh:case Ah:case $h:case Ih:case Ph:return kc(l,t);case hh:return new s;case vh:case bh:return new s(l);case _h:return mh(l);case yh:return new s;case kh:return ph(l)}}function Cc(l){return typeof l.constructor=="function"&&!oo(l)?Mp(mo(l)):{}}var Dh="[object Map]";function Nh(l){return ya(l)&&cl(l)==Dh}var ir=$s&&$s.isMap,Mh=ir?ro(ir):Nh,Bh=Mh,Fh="[object Set]";function Vh(l){return ya(l)&&cl(l)==Fh}var or=$s&&$s.isSet,Rh=or?ro(or):Vh,qh=Rh,Uh=1,jh=2,zh=4,xc="[object Arguments]",Yh="[object Array]",Wh="[object Boolean]",Hh="[object Date]",Zh="[object Error]",wc="[object Function]",Gh="[object GeneratorFunction]",Jh="[object Map]",Xh="[object Number]",Tc="[object Object]",Qh="[object RegExp]",Kh="[object Set]",ev="[object String]",tv="[object Symbol]",av="[object WeakMap]",sv="[object ArrayBuffer]",lv="[object DataView]",nv="[object Float32Array]",iv="[object Float64Array]",ov="[object Int8Array]",rv="[object Int16Array]",cv="[object Int32Array]",uv="[object Uint8Array]",dv="[object Uint8ClampedArray]",mv="[object Uint16Array]",pv="[object Uint32Array]",Qe={};Qe[xc]=Qe[Yh]=Qe[sv]=Qe[lv]=Qe[Wh]=Qe[Hh]=Qe[nv]=Qe[iv]=Qe[ov]=Qe[rv]=Qe[cv]=Qe[Jh]=Qe[Xh]=Qe[Tc]=Qe[Qh]=Qe[Kh]=Qe[ev]=Qe[tv]=Qe[uv]=Qe[dv]=Qe[mv]=Qe[pv]=!0;Qe[Zh]=Qe[wc]=Qe[av]=!1;function Xl(l,e,t,s,n,i){var o,r=e&Uh,c=e&jh,d=e&zh;if(t&&(o=n?t(l,s,n,i):t(l)),o!==void 0)return o;if(!Ba(l))return l;var f=Ha(l);if(f){if(o=rh(l),!r)return nc(l,o)}else{var v=cl(l),g=v==wc||v==Gh;if(il(l))return vc(l,r);if(v==Tc||v==xc||g&&!n){if(o=c||g?{}:Cc(l),!r)return c?Gg(l,Rg(o,l)):Wg(l,Vg(o,l))}else{if(!Qe[v])return n?l:{};o=Oh(l,v,r)}}i||(i=new ca);var b=i.get(l);if(b)return b;i.set(l,o),qh(l)?l.forEach(function(_){o.add(Xl(_,e,t,_,l,i))}):Bh(l)&&l.forEach(function(_,S){o.set(S,Xl(_,e,t,S,l,i))});var T=d?c?Jg:Mi:c?kl:uo,C=f?void 0:T(l);return Zp(C||l,function(_,S){C&&(S=_,_=l[S]),oc(o,S,Xl(_,e,t,S,l,i))}),o}var fv=1,gv=4;function Ss(l){return Xl(l,fv|gv)}var hv="__lodash_hash_undefined__";function vv(l){return this.__data__.set(l,hv),this}function _v(l){return this.__data__.has(l)}function on(l){var e=-1,t=l==null?0:l.length;for(this.__data__=new ss;++e<t;)this.add(l[e])}on.prototype.add=on.prototype.push=vv;on.prototype.has=_v;function yv(l,e){for(var t=-1,s=l==null?0:l.length;++t<s;)if(e(l[t],t,l))return!0;return!1}function bv(l,e){return l.has(e)}var kv=1,Cv=2;function Sc(l,e,t,s,n,i){var o=t&kv,r=l.length,c=e.length;if(r!=c&&!(o&&c>r))return!1;var d=i.get(l),f=i.get(e);if(d&&f)return d==e&&f==l;var v=-1,g=!0,b=t&Cv?new on:void 0;for(i.set(l,e),i.set(e,l);++v<r;){var T=l[v],C=e[v];if(s)var _=o?s(C,T,v,e,l,i):s(T,C,v,l,e,i);if(_!==void 0){if(_)continue;g=!1;break}if(b){if(!yv(e,function(S,P){if(!bv(b,P)&&(T===S||n(T,S,t,s,i)))return b.push(P)})){g=!1;break}}else if(!(T===C||n(T,C,t,s,i))){g=!1;break}}return i.delete(l),i.delete(e),g}function xv(l){var e=-1,t=Array(l.size);return l.forEach(function(s,n){t[++e]=[n,s]}),t}function wv(l){var e=-1,t=Array(l.size);return l.forEach(function(s){t[++e]=s}),t}var Tv=1,Sv=2,Ev="[object Boolean]",Lv="[object Date]",Av="[object Error]",$v="[object Map]",Iv="[object Number]",Pv="[object RegExp]",Ov="[object Set]",Dv="[object String]",Nv="[object Symbol]",Mv="[object ArrayBuffer]",Bv="[object DataView]",rr=Da?Da.prototype:void 0,yi=rr?rr.valueOf:void 0;function Fv(l,e,t,s,n,i,o){switch(t){case Bv:if(l.byteLength!=e.byteLength||l.byteOffset!=e.byteOffset)return!1;l=l.buffer,e=e.buffer;case Mv:return!(l.byteLength!=e.byteLength||!i(new nn(l),new nn(e)));case Ev:case Lv:case Iv:return yl(+l,+e);case Av:return l.name==e.name&&l.message==e.message;case Pv:case Dv:return l==e+"";case $v:var r=xv;case Ov:var c=s&Tv;if(r||(r=wv),l.size!=e.size&&!c)return!1;var d=o.get(l);if(d)return d==e;s|=Sv,o.set(l,e);var f=Sc(r(l),r(e),s,n,i,o);return o.delete(l),f;case Nv:if(yi)return yi.call(l)==yi.call(e)}return!1}var Vv=1,Rv=Object.prototype,qv=Rv.hasOwnProperty;function Uv(l,e,t,s,n,i){var o=t&Vv,r=Mi(l),c=r.length,d=Mi(e),f=d.length;if(c!=f&&!o)return!1;for(var v=c;v--;){var g=r[v];if(!(o?g in e:qv.call(e,g)))return!1}var b=i.get(l),T=i.get(e);if(b&&T)return b==e&&T==l;var C=!0;i.set(l,e),i.set(e,l);for(var _=o;++v<c;){g=r[v];var S=l[g],P=e[g];if(s)var k=o?s(P,S,g,e,l,i):s(S,P,g,l,e,i);if(!(k===void 0?S===P||n(S,P,t,s,i):k)){C=!1;break}_||(_=g=="constructor")}if(C&&!_){var h=l.constructor,A=e.constructor;h!=A&&"constructor"in l&&"constructor"in e&&!(typeof h=="function"&&h instanceof h&&typeof A=="function"&&A instanceof A)&&(C=!1)}return i.delete(l),i.delete(e),C}var jv=1,cr="[object Arguments]",ur="[object Array]",Ul="[object Object]",zv=Object.prototype,dr=zv.hasOwnProperty;function Yv(l,e,t,s,n,i){var o=Ha(l),r=Ha(e),c=o?ur:cl(l),d=r?ur:cl(e);c=c==cr?Ul:c,d=d==cr?Ul:d;var f=c==Ul,v=d==Ul,g=c==d;if(g&&il(l)){if(!il(e))return!1;o=!0,f=!1}if(g&&!f)return i||(i=new ca),o||co(l)?Sc(l,e,t,s,n,i):Fv(l,e,c,t,s,n,i);if(!(t&jv)){var b=f&&dr.call(l,"__wrapped__"),T=v&&dr.call(e,"__wrapped__");if(b||T){var C=b?l.value():l,_=T?e.value():e;return i||(i=new ca),n(C,_,t,s,i)}}return g?(i||(i=new ca),Uv(l,e,t,s,n,i)):!1}function Ec(l,e,t,s,n){return l===e?!0:l==null||e==null||!ya(l)&&!ya(e)?l!==l&&e!==e:Yv(l,e,t,s,Ec,n)}function Wv(l){return function(e,t,s){for(var n=-1,i=Object(e),o=s(e),r=o.length;r--;){var c=o[l?r:++n];if(t(i[c],c,i)===!1)break}return e}}var Hv=Wv(),Zv=Hv;function Ri(l,e,t){(t!==void 0&&!yl(l[e],t)||t===void 0&&!(e in l))&&io(l,e,t)}function Gv(l){return ya(l)&&yn(l)}function qi(l,e){if(!(e==="constructor"&&typeof l[e]=="function")&&e!="__proto__")return l[e]}function Jv(l){return bl(l,kl(l))}function Xv(l,e,t,s,n,i,o){var r=qi(l,t),c=qi(e,t),d=o.get(c);if(d){Ri(l,t,d);return}var f=i?i(r,c,t+"",l,e,o):void 0,v=f===void 0;if(v){var g=Ha(c),b=!g&&il(c),T=!g&&!b&&co(c);f=c,g||b||T?Ha(r)?f=r:Gv(r)?f=nc(r):b?(v=!1,f=vc(c,!0)):T?(v=!1,f=kc(c,!0)):f=[]:Pg(c)||Ni(c)?(f=r,Ni(r)?f=Jv(r):(!Ba(r)||no(r))&&(f=Cc(c))):v=!1}v&&(o.set(c,f),n(f,c,s,i,o),o.delete(c)),Ri(l,t,f)}function Lc(l,e,t,s,n){l!==e&&Zv(e,function(i,o){if(n||(n=new ca),Ba(i))Xv(l,e,o,t,Lc,s,n);else{var r=s?s(qi(l,o),i,o+"",l,e,n):void 0;r===void 0&&(r=i),Ri(l,o,r)}},kl)}function go(l,e){return Ec(l,e)}var Qv=sf(function(l,e,t){Lc(l,e,t)}),Ia=Qv,Ee=(l=>(l[l.TYPE=3]="TYPE",l[l.LEVEL=12]="LEVEL",l[l.ATTRIBUTE=13]="ATTRIBUTE",l[l.BLOT=14]="BLOT",l[l.INLINE=7]="INLINE",l[l.BLOCK=11]="BLOCK",l[l.BLOCK_BLOT=10]="BLOCK_BLOT",l[l.INLINE_BLOT=6]="INLINE_BLOT",l[l.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",l[l.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",l[l.ANY=15]="ANY",l))(Ee||{});class ua{constructor(e,t,s={}){this.attrName=e,this.keyName=t;const n=Ee.TYPE&Ee.ATTRIBUTE;this.scope=s.scope!=null?s.scope&Ee.LEVEL|n:Ee.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}}class Es extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const Ac=class Ui{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let s=null;try{s=e.parentNode}catch{return null}return this.find(s,t)}return null}create(e,t,s){const n=this.query(t);if(n==null)throw new Es(`Unable to create ${t} blot`);const i=n,o=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:i.create(s),r=new i(e,o,s);return Ui.blots.set(r.domNode,r),r}find(e,t=!1){return Ui.find(e,t)}query(e,t=Ee.ANY){let s;return typeof e=="string"?s=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?s=this.types.text:typeof e=="number"?e&Ee.LEVEL&Ee.BLOCK?s=this.types.block:e&Ee.LEVEL&Ee.INLINE&&(s=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(n=>(s=this.classes[n],!!s)),s=s||this.tags[e.tagName]),s==null?null:"scope"in s&&t&Ee.LEVEL&s.scope&&t&Ee.TYPE&s.scope?s:null}register(...e){return e.map(t=>{const s="blotName"in t,n="attrName"in t;if(!s&&!n)throw new Es("Invalid definition");if(s&&t.blotName==="abstract")throw new Es("Cannot register abstract class");const i=s?t.blotName:n?t.attrName:void 0;return this.types[i]=t,n?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):s&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(o=>o.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(o=>{(this.tags[o]==null||t.className==null)&&(this.tags[o]=t)}))),t})}};Ac.blots=new WeakMap;let Is=Ac;function mr(l,e){return(l.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}class Kv extends ua{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){mr(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const t=(mr(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}}const aa=Kv;function bi(l){const e=l.split("-"),t=e.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return e[0]+t}class e_ extends ua{static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[bi(this.keyName)]=t,!0):!1}remove(e){e.style[bi(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const t=e.style[bi(this.keyName)];return this.canAdd(e,t)?t:""}}const Fa=e_;class t_{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Is.find(this.domNode);if(e==null)return;const t=ua.keys(this.domNode),s=aa.keys(this.domNode),n=Fa.keys(this.domNode);t.concat(s).concat(n).forEach(i=>{const o=e.scroll.query(i,Ee.ATTRIBUTE);o instanceof ua&&(this.attributes[o.attrName]=o)})}copy(e){Object.keys(this.attributes).forEach(t=>{const s=this.attributes[t].value(this.domNode);e.format(t,s)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}}const Cn=t_,$c=class{constructor(e,t){this.scroll=e,this.domNode=t,Is.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Es("Blot definition missing tagName");let t,s;return Array.isArray(this.tagName)?(typeof e=="string"?(s=e.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof e=="number"&&(s=e),typeof s=="number"?t=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?t=document.createElement(s):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Is.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,s,n){const i=this.isolate(e,t);if(this.scroll.query(s,Ee.BLOT)!=null&&n)i.wrap(s,n);else if(this.scroll.query(s,Ee.ATTRIBUTE)!=null){const o=this.scroll.create(this.statics.scope);i.wrap(o),o.format(s,n)}}insertAt(e,t,s){const n=s==null?this.scroll.create("text",t):this.scroll.create(t,s),i=this.split(e);this.parent.insertBefore(n,i||void 0)}isolate(e,t){const s=this.split(e);if(s==null)throw new Error("Attempt to isolate at end");return s.split(t),s}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const s=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const s=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new Es(`Cannot wrap ${e}`);return s.appendChild(this),s}};$c.blotName="abstract";let Ic=$c;const Pc=class extends Ic{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Pc.scope=Ee.INLINE_BLOT;let a_=Pc;const xt=a_;class s_{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const t=e.slice(1);this.append(...t)}}at(e){const t=this.iterator();let s=t();for(;s&&e>0;)e-=1,s=t();return s}contains(e){const t=this.iterator();let s=t();for(;s;){if(s===e)return!0;s=t()}return!1}indexOf(e){const t=this.iterator();let s=t(),n=0;for(;s;){if(s===e)return n;n+=1,s=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,s=this.head;for(;s!=null;){if(s===e)return t;t+=s.length(),s=s.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){const s=this.iterator();let n=s();for(;n;){const i=n.length();if(e<i||t&&e===i&&(n.next==null||n.next.length()!==0))return[n,e];e-=i,n=s()}return[null,0]}forEach(e){const t=this.iterator();let s=t();for(;s;)e(s),s=t()}forEachAt(e,t,s){if(t<=0)return;const[n,i]=this.find(e);let o=e-i;const r=this.iterator(n);let c=r();for(;c&&o<e+t;){const d=c.length();e>o?s(c,e-o,Math.min(t,o+d-e)):s(c,0,Math.min(d,e+t-o)),o+=d,c=r()}}map(e){return this.reduce((t,s)=>(t.push(e(s)),t),[])}reduce(e,t){const s=this.iterator();let n=s();for(;n;)t=e(t,n),n=s();return t}}function pr(l,e){const t=e.find(l);if(t)return t;try{return e.create(l)}catch{const s=e.create(Ee.INLINE);return Array.from(l.childNodes).forEach(n=>{s.domNode.appendChild(n)}),l.parentNode&&l.parentNode.replaceChild(s.domNode,l),s.attach(),s}}const Oc=class Ea extends Ic{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Ea.uiClass&&this.uiNode.classList.add(Ea.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new s_,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const t=pr(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof Es)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(s,n,i)=>{s.deleteAt(n,i)})}descendant(e,t=0){const[s,n]=this.children.find(t);return e.blotName==null&&e(s)||e.blotName!=null&&s instanceof e?[s,n]:s instanceof Ea?s.descendant(e,n):[null,-1]}descendants(e,t=0,s=Number.MAX_VALUE){let n=[],i=s;return this.children.forEachAt(t,s,(o,r,c)=>{(e.blotName==null&&e(o)||e.blotName!=null&&o instanceof e)&&n.push(o),o instanceof Ea&&(n=n.concat(o.descendants(e,r,i))),i-=c}),n}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(s=>t instanceof s)||(t.statics.scope===Ee.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof Ea?t.unwrap():t.remove())})}formatAt(e,t,s,n){this.children.forEachAt(e,t,(i,o,r)=>{i.formatAt(o,r,s,n)})}insertAt(e,t,s){const[n,i]=this.children.find(e);if(n)n.insertAt(i,t,s);else{const o=s==null?this.scroll.create("text",t):this.scroll.create(t,s);this.appendChild(o)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let s=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(s=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(e.domNode,s),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(s=>{e.insertBefore(s,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){const[s,n]=this.children.find(e,t),i=[[this,e]];return s instanceof Ea?i.concat(s.path(n,t)):(s!=null&&i.push([s,n]),i)}removeChild(e){this.children.remove(e)}replaceWith(e,t){const s=typeof e=="string"?this.scroll.create(e,t):e;return s instanceof Ea&&this.moveChildren(s),super.replaceWith(s)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(e,this.length(),(n,i,o)=>{const r=n.split(i,t);r!=null&&s.appendChild(r)}),s}splitAfter(e){const t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){const s=[],n=[];e.forEach(i=>{i.target===this.domNode&&i.type==="childList"&&(s.push(...i.addedNodes),n.push(...i.removedNodes))}),n.forEach(i=>{if(i.parentNode!=null&&i.tagName!=="IFRAME"&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(i);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),s.filter(i=>i.parentNode===this.domNode&&i!==this.uiNode).sort((i,o)=>i===o?0:i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(i=>{let o=null;i.nextSibling!=null&&(o=this.scroll.find(i.nextSibling));const r=pr(i,this.scroll);(r.next!==o||r.next==null)&&(r.parent!=null&&r.parent.removeChild(this),this.insertBefore(r,o||void 0))}),this.enforceAllowedChildren()}};Oc.uiClass="";let l_=Oc;const ea=l_;function n_(l,e){if(Object.keys(l).length!==Object.keys(e).length)return!1;for(const t in l)if(l[t]!==e[t])return!1;return!0}const bs=class ks extends ea{static create(e){return super.create(e)}static formats(e,t){const s=t.query(ks.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Cn(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(s=>{s instanceof ks||(s=s.wrap(ks.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{const s=this.scroll.query(e,Ee.INLINE);if(s==null)return;s instanceof ua?this.attributes.attribute(s,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,s,n){this.formats()[s]!=null||this.scroll.query(s,Ee.ATTRIBUTE)?this.isolate(e,t).format(s,n):super.formatAt(e,t,s,n)}optimize(e){super.optimize(e);const t=this.formats();if(Object.keys(t).length===0)return this.unwrap();const s=this.next;s instanceof ks&&s.prev===this&&n_(t,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(e,t){const s=super.replaceWith(e,t);return this.attributes.copy(s),s}update(e,t){super.update(e,t),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(e,t){const s=super.wrap(e,t);return s instanceof ks&&this.attributes.move(s),s}};bs.allowedChildren=[bs,xt],bs.blotName="inline",bs.scope=Ee.INLINE_BLOT,bs.tagName="SPAN";let i_=bs;const ho=i_,Cs=class ji extends ea{static create(e){return super.create(e)}static formats(e,t){const s=t.query(ji.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Cn(this.domNode)}format(e,t){const s=this.scroll.query(e,Ee.BLOCK);s!=null&&(s instanceof ua?this.attributes.attribute(s,t):e===this.statics.blotName&&!t?this.replaceWith(ji.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,s,n){this.scroll.query(s,Ee.BLOCK)!=null?this.format(s,n):super.formatAt(e,t,s,n)}insertAt(e,t,s){if(s==null||this.scroll.query(t,Ee.INLINE)!=null)super.insertAt(e,t,s);else{const n=this.split(e);if(n!=null){const i=this.scroll.create(t,s);n.parent.insertBefore(i,n)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){const s=super.replaceWith(e,t);return this.attributes.copy(s),s}update(e,t){super.update(e,t),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};Cs.blotName="block",Cs.scope=Ee.BLOCK_BLOT,Cs.tagName="P",Cs.allowedChildren=[ho,Cs,xt];let o_=Cs;const ul=o_,zi=class extends ea{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,s,n){super.formatAt(e,t,s,n),this.enforceAllowedChildren()}insertAt(e,t,s){super.insertAt(e,t,s),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};zi.blotName="container",zi.scope=Ee.BLOCK_BLOT;let r_=zi;const xn=r_;class c_ extends xt{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,s,n){e===0&&t===this.length()?this.format(s,n):super.formatAt(e,t,s,n)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Ft=c_,u_={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d_=100,xs=class extends ea{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,u_),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const s=this.registry.find(e,t);return s?s.scroll===this?s:t?this.find(s.scroll.domNode.parentNode,!0):null:null}query(e,t=Ee.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(e,t)}formatAt(e,t,s,n){this.update(),super.formatAt(e,t,s,n)}insertAt(e,t,s){this.update(),super.insertAt(e,t,s)}optimize(e=[],t={}){super.optimize(t);const s=t.mutationsMap||new WeakMap;let n=Array.from(this.observer.takeRecords());for(;n.length>0;)e.push(n.pop());const i=(c,d=!0)=>{c==null||c===this||c.domNode.parentNode!=null&&(s.has(c.domNode)||s.set(c.domNode,[]),d&&i(c.parent))},o=c=>{s.has(c.domNode)&&(c instanceof ea&&c.children.forEach(o),s.delete(c.domNode),c.optimize(t))};let r=e;for(let c=0;r.length>0;c+=1){if(c>=d_)throw new Error("[Parchment] Maximum optimize iterations reached");for(r.forEach(d=>{const f=this.find(d.target,!0);f!=null&&(f.domNode===d.target&&(d.type==="childList"?(i(this.find(d.previousSibling,!1)),Array.from(d.addedNodes).forEach(v=>{const g=this.find(v,!1);i(g,!1),g instanceof ea&&g.children.forEach(b=>{i(b,!1)})})):d.type==="attributes"&&i(f.prev)),i(f))}),this.children.forEach(o),r=Array.from(this.observer.takeRecords()),n=r.slice();n.length>0;)e.push(n.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const s=new WeakMap;e.map(n=>{const i=this.find(n.target,!0);return i==null?null:s.has(i.domNode)?(s.get(i.domNode).push(n),null):(s.set(i.domNode,[n]),i)}).forEach(n=>{n!=null&&n!==this&&s.has(n.domNode)&&n.update(s.get(n.domNode)||[],t)}),t.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),t),this.optimize(e,t)}};xs.blotName="scroll",xs.defaultChild=ul,xs.allowedChildren=[ul,xn],xs.scope=Ee.BLOCK_BLOT,xs.tagName="DIV";let m_=xs;const vo=m_,Yi=class Dc extends xt{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,s){s==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,s)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Dc&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(e,t){e.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Yi.blotName="text",Yi.scope=Ee.INLINE_BLOT;let p_=Yi;const rn=p_;var f_=Object.freeze(Object.defineProperty({__proto__:null,Attributor:ua,AttributorStore:Cn,BlockBlot:ul,ClassAttributor:aa,ContainerBlot:xn,EmbedBlot:Ft,InlineBlot:ho,LeafBlot:xt,ParentBlot:ea,Registry:Is,Scope:Ee,ScrollBlot:vo,StyleAttributor:Fa,TextBlot:rn},Symbol.toStringTag,{value:"Module"})),Ot={exports:{}},Bt=-1,At=1,ut=0;function dl(l,e,t,s,n){if(l===e)return l?[[ut,l]]:[];if(t!=null){var i=x_(l,e,t);if(i)return i}var o=_o(l,e),r=l.substring(0,o);l=l.substring(o),e=e.substring(o),o=wn(l,e);var c=l.substring(l.length-o);l=l.substring(0,l.length-o),e=e.substring(0,e.length-o);var d=g_(l,e);return r&&d.unshift([ut,r]),c&&d.push([ut,c]),yo(d,n),s&&__(d),d}function g_(l,e){var t;if(!l)return[[At,e]];if(!e)return[[Bt,l]];var s=l.length>e.length?l:e,n=l.length>e.length?e:l,i=s.indexOf(n);if(i!==-1)return t=[[At,s.substring(0,i)],[ut,n],[At,s.substring(i+n.length)]],l.length>e.length&&(t[0][0]=t[2][0]=Bt),t;if(n.length===1)return[[Bt,l],[At,e]];var o=v_(l,e);if(o){var r=o[0],c=o[1],d=o[2],f=o[3],v=o[4],g=dl(r,d),b=dl(c,f);return g.concat([[ut,v]],b)}return h_(l,e)}function h_(l,e){for(var t=l.length,s=e.length,n=Math.ceil((t+s)/2),i=n,o=2*n,r=new Array(o),c=new Array(o),d=0;d<o;d++)r[d]=-1,c[d]=-1;r[i+1]=0,c[i+1]=0;for(var f=t-s,v=f%2!==0,g=0,b=0,T=0,C=0,_=0;_<n;_++){for(var S=-_+g;S<=_-b;S+=2){var P=i+S,k;S===-_||S!==_&&r[P-1]<r[P+1]?k=r[P+1]:k=r[P-1]+1;for(var h=k-S;k<t&&h<s&&l.charAt(k)===e.charAt(h);)k++,h++;if(r[P]=k,k>t)b+=2;else if(h>s)g+=2;else if(v){var A=i+f-S;if(A>=0&&A<o&&c[A]!==-1){var O=t-c[A];if(k>=O)return fr(l,e,k,h)}}}for(var E=-_+T;E<=_-C;E+=2){var A=i+E,O;E===-_||E!==_&&c[A-1]<c[A+1]?O=c[A+1]:O=c[A-1]+1;for(var $=O-E;O<t&&$<s&&l.charAt(t-O-1)===e.charAt(s-$-1);)O++,$++;if(c[A]=O,O>t)C+=2;else if($>s)T+=2;else if(!v){var P=i+f-E;if(P>=0&&P<o&&r[P]!==-1){var k=r[P],h=i+k-P;if(O=t-O,k>=O)return fr(l,e,k,h)}}}}return[[Bt,l],[At,e]]}function fr(l,e,t,s){var n=l.substring(0,t),i=e.substring(0,s),o=l.substring(t),r=e.substring(s),c=dl(n,i),d=dl(o,r);return c.concat(d)}function _o(l,e){if(!l||!e||l.charAt(0)!==e.charAt(0))return 0;for(var t=0,s=Math.min(l.length,e.length),n=s,i=0;t<n;)l.substring(i,n)==e.substring(i,n)?(t=n,i=t):s=n,n=Math.floor((s-t)/2+t);return Nc(l.charCodeAt(n-1))&&n--,n}function gr(l,e){var t=l.length,s=e.length;if(t==0||s==0)return 0;t>s?l=l.substring(t-s):t<s&&(e=e.substring(0,t));var n=Math.min(t,s);if(l==e)return n;for(var i=0,o=1;;){var r=l.substring(n-o),c=e.indexOf(r);if(c==-1)return i;o+=c,(c==0||l.substring(n-o)==e.substring(0,o))&&(i=o,o++)}}function wn(l,e){if(!l||!e||l.slice(-1)!==e.slice(-1))return 0;for(var t=0,s=Math.min(l.length,e.length),n=s,i=0;t<n;)l.substring(l.length-n,l.length-i)==e.substring(e.length-n,e.length-i)?(t=n,i=t):s=n,n=Math.floor((s-t)/2+t);return Mc(l.charCodeAt(l.length-n))&&n--,n}function v_(l,e){var t=l.length>e.length?l:e,s=l.length>e.length?e:l;if(t.length<4||s.length*2<t.length)return null;function n(b,T,C){for(var _=b.substring(C,C+Math.floor(b.length/4)),S=-1,P="",k,h,A,O;(S=T.indexOf(_,S+1))!==-1;){var E=_o(b.substring(C),T.substring(S)),$=wn(b.substring(0,C),T.substring(0,S));P.length<$+E&&(P=T.substring(S-$,S)+T.substring(S,S+E),k=b.substring(0,C-$),h=b.substring(C+E),A=T.substring(0,S-$),O=T.substring(S+E))}return P.length*2>=b.length?[k,h,A,O,P]:null}var i=n(t,s,Math.ceil(t.length/4)),o=n(t,s,Math.ceil(t.length/2)),r;if(!i&&!o)return null;o?i?r=i[4].length>o[4].length?i:o:r=o:r=i;var c,d,f,v;l.length>e.length?(c=r[0],d=r[1],f=r[2],v=r[3]):(f=r[0],v=r[1],c=r[2],d=r[3]);var g=r[4];return[c,d,f,v,g]}function __(l){for(var e=!1,t=[],s=0,n=null,i=0,o=0,r=0,c=0,d=0;i<l.length;)l[i][0]==ut?(t[s++]=i,o=c,r=d,c=0,d=0,n=l[i][1]):(l[i][0]==At?c+=l[i][1].length:d+=l[i][1].length,n&&n.length<=Math.max(o,r)&&n.length<=Math.max(c,d)&&(l.splice(t[s-1],0,[Bt,n]),l[t[s-1]+1][0]=At,s--,s--,i=s>0?t[s-1]:-1,o=0,r=0,c=0,d=0,n=null,e=!0)),i++;for(e&&yo(l),k_(l),i=1;i<l.length;){if(l[i-1][0]==Bt&&l[i][0]==At){var f=l[i-1][1],v=l[i][1],g=gr(f,v),b=gr(v,f);g>=b?(g>=f.length/2||g>=v.length/2)&&(l.splice(i,0,[ut,v.substring(0,g)]),l[i-1][1]=f.substring(0,f.length-g),l[i+1][1]=v.substring(g),i++):(b>=f.length/2||b>=v.length/2)&&(l.splice(i,0,[ut,f.substring(0,b)]),l[i-1][0]=At,l[i-1][1]=v.substring(0,v.length-b),l[i+1][0]=Bt,l[i+1][1]=f.substring(b),i++),i++}i++}}var hr=/[^a-zA-Z0-9]/,vr=/\s/,_r=/[\r\n]/,y_=/\n\r?\n$/,b_=/^\r?\n\r?\n/;function k_(l){function e(b,T){if(!b||!T)return 6;var C=b.charAt(b.length-1),_=T.charAt(0),S=C.match(hr),P=_.match(hr),k=S&&C.match(vr),h=P&&_.match(vr),A=k&&C.match(_r),O=h&&_.match(_r),E=A&&b.match(y_),$=O&&T.match(b_);return E||$?5:A||O?4:S&&!k&&h?3:k||h?2:S||P?1:0}for(var t=1;t<l.length-1;){if(l[t-1][0]==ut&&l[t+1][0]==ut){var s=l[t-1][1],n=l[t][1],i=l[t+1][1],o=wn(s,n);if(o){var r=n.substring(n.length-o);s=s.substring(0,s.length-o),n=r+n.substring(0,n.length-o),i=r+i}for(var c=s,d=n,f=i,v=e(s,n)+e(n,i);n.charAt(0)===i.charAt(0);){s+=n.charAt(0),n=n.substring(1)+i.charAt(0),i=i.substring(1);var g=e(s,n)+e(n,i);g>=v&&(v=g,c=s,d=n,f=i)}l[t-1][1]!=c&&(c?l[t-1][1]=c:(l.splice(t-1,1),t--),l[t][1]=d,f?l[t+1][1]=f:(l.splice(t+1,1),t--))}t++}}function yo(l,e){l.push([ut,""]);for(var t=0,s=0,n=0,i="",o="",r;t<l.length;){if(t<l.length-1&&!l[t][1]){l.splice(t,1);continue}switch(l[t][0]){case At:n++,o+=l[t][1],t++;break;case Bt:s++,i+=l[t][1],t++;break;case ut:var c=t-n-s-1;if(e){if(c>=0&&Fc(l[c][1])){var d=l[c][1].slice(-1);if(l[c][1]=l[c][1].slice(0,-1),i=d+i,o=d+o,!l[c][1]){l.splice(c,1),t--;var f=c-1;l[f]&&l[f][0]===At&&(n++,o=l[f][1]+o,f--),l[f]&&l[f][0]===Bt&&(s++,i=l[f][1]+i,f--),c=f}}if(Bc(l[t][1])){var d=l[t][1].charAt(0);l[t][1]=l[t][1].slice(1),i+=d,o+=d}}if(t<l.length-1&&!l[t][1]){l.splice(t,1);break}if(i.length>0||o.length>0){i.length>0&&o.length>0&&(r=_o(o,i),r!==0&&(c>=0?l[c][1]+=o.substring(0,r):(l.splice(0,0,[ut,o.substring(0,r)]),t++),o=o.substring(r),i=i.substring(r)),r=wn(o,i),r!==0&&(l[t][1]=o.substring(o.length-r)+l[t][1],o=o.substring(0,o.length-r),i=i.substring(0,i.length-r)));var v=n+s;i.length===0&&o.length===0?(l.splice(t-v,v),t=t-v):i.length===0?(l.splice(t-v,v,[At,o]),t=t-v+1):o.length===0?(l.splice(t-v,v,[Bt,i]),t=t-v+1):(l.splice(t-v,v,[Bt,i],[At,o]),t=t-v+2)}t!==0&&l[t-1][0]===ut?(l[t-1][1]+=l[t][1],l.splice(t,1)):t++,n=0,s=0,i="",o="";break}}l[l.length-1][1]===""&&l.pop();var g=!1;for(t=1;t<l.length-1;)l[t-1][0]===ut&&l[t+1][0]===ut&&(l[t][1].substring(l[t][1].length-l[t-1][1].length)===l[t-1][1]?(l[t][1]=l[t-1][1]+l[t][1].substring(0,l[t][1].length-l[t-1][1].length),l[t+1][1]=l[t-1][1]+l[t+1][1],l.splice(t-1,1),g=!0):l[t][1].substring(0,l[t+1][1].length)==l[t+1][1]&&(l[t-1][1]+=l[t+1][1],l[t][1]=l[t][1].substring(l[t+1][1].length)+l[t+1][1],l.splice(t+1,1),g=!0)),t++;g&&yo(l,e)}function Nc(l){return l>=55296&&l<=56319}function Mc(l){return l>=56320&&l<=57343}function Bc(l){return Mc(l.charCodeAt(0))}function Fc(l){return Nc(l.charCodeAt(l.length-1))}function C_(l){for(var e=[],t=0;t<l.length;t++)l[t][1].length>0&&e.push(l[t]);return e}function ki(l,e,t,s){return Fc(l)||Bc(s)?null:C_([[ut,l],[Bt,e],[At,t],[ut,s]])}function x_(l,e,t){var s=typeof t=="number"?{index:t,length:0}:t.oldRange,n=typeof t=="number"?null:t.newRange,i=l.length,o=e.length;if(s.length===0&&(n===null||n.length===0)){var r=s.index,c=l.slice(0,r),d=l.slice(r),f=n?n.index:null;e:{var v=r+o-i;if(f!==null&&f!==v||v<0||v>o)break e;var g=e.slice(0,v),b=e.slice(v);if(b!==d)break e;var T=Math.min(r,v),C=c.slice(0,T),_=g.slice(0,T);if(C!==_)break e;var S=c.slice(T),P=g.slice(T);return ki(C,S,P,d)}e:{if(f!==null&&f!==r)break e;var k=r,g=e.slice(0,k),b=e.slice(k);if(g!==c)break e;var h=Math.min(i-k,o-k),A=d.slice(d.length-h),O=b.slice(b.length-h);if(A!==O)break e;var S=d.slice(0,d.length-h),P=b.slice(0,b.length-h);return ki(c,S,P,A)}}if(s.length>0&&n&&n.length===0){e:{var C=l.slice(0,s.index),A=l.slice(s.index+s.length),T=C.length,h=A.length;if(o<T+h)break e;var _=e.slice(0,T),O=e.slice(o-h);if(C!==_||A!==O)break e;var S=l.slice(T,i-h),P=e.slice(T,o-h);return ki(C,S,P,A)}}return null}function Tn(l,e,t,s){return dl(l,e,t,s,!0)}Tn.INSERT=At;Tn.DELETE=Bt;Tn.EQUAL=ut;var w_=Tn,cn={exports:{}};(function(l,e){var t=200,s="__lodash_hash_undefined__",n=9007199254740991,i="[object Arguments]",o="[object Array]",r="[object Boolean]",c="[object Date]",d="[object Error]",f="[object Function]",v="[object GeneratorFunction]",g="[object Map]",b="[object Number]",T="[object Object]",C="[object Promise]",_="[object RegExp]",S="[object Set]",P="[object String]",k="[object Symbol]",h="[object WeakMap]",A="[object ArrayBuffer]",O="[object DataView]",E="[object Float32Array]",$="[object Float64Array]",V="[object Int8Array]",j="[object Int16Array]",B="[object Int32Array]",G="[object Uint8Array]",H="[object Uint8ClampedArray]",X="[object Uint16Array]",Q="[object Uint32Array]",ee=/[\\^$.*+?()[\]{}|]/g,le=/\w*$/,W=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,ge={};ge[i]=ge[o]=ge[A]=ge[O]=ge[r]=ge[c]=ge[E]=ge[$]=ge[V]=ge[j]=ge[B]=ge[g]=ge[b]=ge[T]=ge[_]=ge[S]=ge[P]=ge[k]=ge[G]=ge[H]=ge[X]=ge[Q]=!0,ge[d]=ge[f]=ge[h]=!1;var Ie=typeof La=="object"&&La&&La.Object===Object&&La,ue=typeof self=="object"&&self&&self.Object===Object&&self,ae=Ie||ue||Function("return this")(),me=e&&!e.nodeType&&e,z=me&&!0&&l&&!l.nodeType&&l,J=z&&z.exports===me;function Z(p,N){return p.set(N[0],N[1]),p}function de(p,N){return p.add(N),p}function K(p,N){for(var U=-1,ne=p?p.length:0;++U<ne&&N(p[U],U,p)!==!1;);return p}function oe(p,N){for(var U=-1,ne=N.length,Ne=p.length;++U<ne;)p[Ne+U]=N[U];return p}function he(p,N,U,ne){var Ne=-1,$e=p?p.length:0;for(ne&&$e&&(U=p[++Ne]);++Ne<$e;)U=N(U,p[Ne],Ne,p);return U}function Ae(p,N){for(var U=-1,ne=Array(p);++U<p;)ne[U]=N(U);return ne}function Te(p,N){return p?.[N]}function je(p){var N=!1;if(p!=null&&typeof p.toString!="function")try{N=!!(p+"")}catch{}return N}function be(p){var N=-1,U=Array(p.size);return p.forEach(function(ne,Ne){U[++N]=[Ne,ne]}),U}function Ce(p,N){return function(U){return p(N(U))}}function Se(p){var N=-1,U=Array(p.size);return p.forEach(function(ne){U[++N]=ne}),U}var Me=Array.prototype,Le=Function.prototype,Xe=Object.prototype,ce=ae["__core-js_shared__"],Fe=function(){var p=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),ve=Le.toString,Re=Xe.hasOwnProperty,Pe=Xe.toString,Bs=RegExp("^"+ve.call(Re).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),St=J?ae.Buffer:void 0,os=ae.Symbol,Fs=ae.Uint8Array,Vt=Ce(Object.getPrototypeOf,Object),Sl=Object.create,El=Xe.propertyIsEnumerable,$n=Me.splice,Vs=Object.getOwnPropertySymbols,rs=St?St.isBuffer:void 0,Ll=Ce(Object.keys,Object),cs=Jt(ae,"DataView"),Va=Jt(ae,"Map"),Gt=Jt(ae,"Promise"),us=Jt(ae,"Set"),Rs=Jt(ae,"WeakMap"),Ra=Jt(Object,"create"),qs=Et(cs),qa=Et(Va),Us=Et(Gt),js=Et(us),zs=Et(Rs),wa=os?os.prototype:void 0,Al=wa?wa.valueOf:void 0;function pa(p){var N=-1,U=p?p.length:0;for(this.clear();++N<U;){var ne=p[N];this.set(ne[0],ne[1])}}function In(){this.__data__=Ra?Ra(null):{}}function Pn(p){return this.has(p)&&delete this.__data__[p]}function On(p){var N=this.__data__;if(Ra){var U=N[p];return U===s?void 0:U}return Re.call(N,p)?N[p]:void 0}function $l(p){var N=this.__data__;return Ra?N[p]!==void 0:Re.call(N,p)}function Ys(p,N){var U=this.__data__;return U[p]=Ra&&N===void 0?s:N,this}pa.prototype.clear=In,pa.prototype.delete=Pn,pa.prototype.get=On,pa.prototype.has=$l,pa.prototype.set=Ys;function mt(p){var N=-1,U=p?p.length:0;for(this.clear();++N<U;){var ne=p[N];this.set(ne[0],ne[1])}}function Dn(){this.__data__=[]}function Nn(p){var N=this.__data__,U=ms(N,p);if(U<0)return!1;var ne=N.length-1;return U==ne?N.pop():$n.call(N,U,1),!0}function Mn(p){var N=this.__data__,U=ms(N,p);return U<0?void 0:N[U][1]}function Bn(p){return ms(this.__data__,p)>-1}function Fn(p,N){var U=this.__data__,ne=ms(U,p);return ne<0?U.push([p,N]):U[ne][1]=N,this}mt.prototype.clear=Dn,mt.prototype.delete=Nn,mt.prototype.get=Mn,mt.prototype.has=Bn,mt.prototype.set=Fn;function bt(p){var N=-1,U=p?p.length:0;for(this.clear();++N<U;){var ne=p[N];this.set(ne[0],ne[1])}}function Vn(){this.__data__={hash:new pa,map:new(Va||mt),string:new pa}}function Rn(p){return ja(this,p).delete(p)}function qn(p){return ja(this,p).get(p)}function Un(p){return ja(this,p).has(p)}function jn(p,N){return ja(this,p).set(p,N),this}bt.prototype.clear=Vn,bt.prototype.delete=Rn,bt.prototype.get=qn,bt.prototype.has=Un,bt.prototype.set=jn;function It(p){this.__data__=new mt(p)}function zn(){this.__data__=new mt}function Yn(p){return this.__data__.delete(p)}function Wn(p){return this.__data__.get(p)}function Hn(p){return this.__data__.has(p)}function Zn(p,N){var U=this.__data__;if(U instanceof mt){var ne=U.__data__;if(!Va||ne.length<t-1)return ne.push([p,N]),this;U=this.__data__=new bt(ne)}return U.set(p,N),this}It.prototype.clear=zn,It.prototype.delete=Yn,It.prototype.get=Wn,It.prototype.has=Hn,It.prototype.set=Zn;function ds(p,N){var U=Gs(p)||fs(p)?Ae(p.length,String):[],ne=U.length,Ne=!!ne;for(var $e in p)(N||Re.call(p,$e))&&!(Ne&&($e=="length"||ri($e,ne)))&&U.push($e);return U}function Il(p,N,U){var ne=p[N];(!(Re.call(p,N)&&Ml(ne,U))||U===void 0&&!(N in p))&&(p[N]=U)}function ms(p,N){for(var U=p.length;U--;)if(Ml(p[U][0],N))return U;return-1}function la(p,N){return p&&Zs(N,Xs(N),p)}function Ws(p,N,U,ne,Ne,$e,qe){var ze;if(ne&&(ze=$e?ne(p,Ne,$e,qe):ne(p)),ze!==void 0)return ze;if(!ia(p))return p;var it=Gs(p);if(it){if(ze=ii(p),!N)return si(p,ze)}else{var Ge=ga(p),kt=Ge==f||Ge==v;if(Bl(p))return ps(p,N);if(Ge==T||Ge==i||kt&&!$e){if(je(p))return $e?p:{};if(ze=na(kt?{}:p),!N)return li(p,la(ze,p))}else{if(!ge[Ge])return $e?p:{};ze=oi(p,Ge,Ws,N)}}qe||(qe=new It);var Pt=qe.get(p);if(Pt)return Pt;if(qe.set(p,ze),!it)var ct=U?ni(p):Xs(p);return K(ct||p,function(Ct,pt){ct&&(pt=Ct,Ct=p[pt]),Il(ze,pt,Ws(Ct,N,U,ne,pt,p,qe))}),ze}function Gn(p){return ia(p)?Sl(p):{}}function Jn(p,N,U){var ne=N(p);return Gs(p)?ne:oe(ne,U(p))}function Xn(p){return Pe.call(p)}function Qn(p){if(!ia(p)||ui(p))return!1;var N=Js(p)||je(p)?Bs:W;return N.test(Et(p))}function Kn(p){if(!Dl(p))return Ll(p);var N=[];for(var U in Object(p))Re.call(p,U)&&U!="constructor"&&N.push(U);return N}function ps(p,N){if(N)return p.slice();var U=new p.constructor(p.length);return p.copy(U),U}function Hs(p){var N=new p.constructor(p.byteLength);return new Fs(N).set(new Fs(p)),N}function Ua(p,N){var U=N?Hs(p.buffer):p.buffer;return new p.constructor(U,p.byteOffset,p.byteLength)}function Pl(p,N,U){var ne=N?U(be(p),!0):be(p);return he(ne,Z,new p.constructor)}function Ol(p){var N=new p.constructor(p.source,le.exec(p));return N.lastIndex=p.lastIndex,N}function ei(p,N,U){var ne=N?U(Se(p),!0):Se(p);return he(ne,de,new p.constructor)}function ti(p){return Al?Object(Al.call(p)):{}}function ai(p,N){var U=N?Hs(p.buffer):p.buffer;return new p.constructor(U,p.byteOffset,p.length)}function si(p,N){var U=-1,ne=p.length;for(N||(N=Array(ne));++U<ne;)N[U]=p[U];return N}function Zs(p,N,U,ne){U||(U={});for(var Ne=-1,$e=N.length;++Ne<$e;){var qe=N[Ne],ze=ne?ne(U[qe],p[qe],qe,U,p):void 0;Il(U,qe,ze===void 0?p[qe]:ze)}return U}function li(p,N){return Zs(p,fa(p),N)}function ni(p){return Jn(p,Xs,fa)}function ja(p,N){var U=p.__data__;return ci(N)?U[typeof N=="string"?"string":"hash"]:U.map}function Jt(p,N){var U=Te(p,N);return Qn(U)?U:void 0}var fa=Vs?Ce(Vs,Object):mi,ga=Xn;(cs&&ga(new cs(new ArrayBuffer(1)))!=O||Va&&ga(new Va)!=g||Gt&&ga(Gt.resolve())!=C||us&&ga(new us)!=S||Rs&&ga(new Rs)!=h)&&(ga=function(p){var N=Pe.call(p),U=N==T?p.constructor:void 0,ne=U?Et(U):void 0;if(ne)switch(ne){case qs:return O;case qa:return g;case Us:return C;case js:return S;case zs:return h}return N});function ii(p){var N=p.length,U=p.constructor(N);return N&&typeof p[0]=="string"&&Re.call(p,"index")&&(U.index=p.index,U.input=p.input),U}function na(p){return typeof p.constructor=="function"&&!Dl(p)?Gn(Vt(p)):{}}function oi(p,N,U,ne){var Ne=p.constructor;switch(N){case A:return Hs(p);case r:case c:return new Ne(+p);case O:return Ua(p,ne);case E:case $:case V:case j:case B:case G:case H:case X:case Q:return ai(p,ne);case g:return Pl(p,ne,U);case b:case P:return new Ne(p);case _:return Ol(p);case S:return ei(p,ne,U);case k:return ti(p)}}function ri(p,N){return N=N??n,!!N&&(typeof p=="number"||se.test(p))&&p>-1&&p%1==0&&p<N}function ci(p){var N=typeof p;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?p!=="__proto__":p===null}function ui(p){return!!Fe&&Fe in p}function Dl(p){var N=p&&p.constructor,U=typeof N=="function"&&N.prototype||Xe;return p===U}function Et(p){if(p!=null){try{return ve.call(p)}catch{}try{return p+""}catch{}}return""}function Nl(p){return Ws(p,!0,!0)}function Ml(p,N){return p===N||p!==p&&N!==N}function fs(p){return di(p)&&Re.call(p,"callee")&&(!El.call(p,"callee")||Pe.call(p)==i)}var Gs=Array.isArray;function gs(p){return p!=null&&Fl(p.length)&&!Js(p)}function di(p){return Vl(p)&&gs(p)}var Bl=rs||pi;function Js(p){var N=ia(p)?Pe.call(p):"";return N==f||N==v}function Fl(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=n}function ia(p){var N=typeof p;return!!p&&(N=="object"||N=="function")}function Vl(p){return!!p&&typeof p=="object"}function Xs(p){return gs(p)?ds(p):Kn(p)}function mi(){return[]}function pi(){return!1}l.exports=Nl})(cn,cn.exports);var un={exports:{}};(function(l,e){var t=200,s="__lodash_hash_undefined__",n=1,i=2,o=9007199254740991,r="[object Arguments]",c="[object Array]",d="[object AsyncFunction]",f="[object Boolean]",v="[object Date]",g="[object Error]",b="[object Function]",T="[object GeneratorFunction]",C="[object Map]",_="[object Number]",S="[object Null]",P="[object Object]",k="[object Promise]",h="[object Proxy]",A="[object RegExp]",O="[object Set]",E="[object String]",$="[object Symbol]",V="[object Undefined]",j="[object WeakMap]",B="[object ArrayBuffer]",G="[object DataView]",H="[object Float32Array]",X="[object Float64Array]",Q="[object Int8Array]",ee="[object Int16Array]",le="[object Int32Array]",W="[object Uint8Array]",se="[object Uint8ClampedArray]",ge="[object Uint16Array]",Ie="[object Uint32Array]",ue=/[\\^$.*+?()[\]{}|]/g,ae=/^\[object .+?Constructor\]$/,me=/^(?:0|[1-9]\d*)$/,z={};z[H]=z[X]=z[Q]=z[ee]=z[le]=z[W]=z[se]=z[ge]=z[Ie]=!0,z[r]=z[c]=z[B]=z[f]=z[G]=z[v]=z[g]=z[b]=z[C]=z[_]=z[P]=z[A]=z[O]=z[E]=z[j]=!1;var J=typeof La=="object"&&La&&La.Object===Object&&La,Z=typeof self=="object"&&self&&self.Object===Object&&self,de=J||Z||Function("return this")(),K=e&&!e.nodeType&&e,oe=K&&!0&&l&&!l.nodeType&&l,he=oe&&oe.exports===K,Ae=he&&J.process,Te=function(){try{return Ae&&Ae.binding&&Ae.binding("util")}catch{}}(),je=Te&&Te.isTypedArray;function be(p,N){for(var U=-1,ne=p==null?0:p.length,Ne=0,$e=[];++U<ne;){var qe=p[U];N(qe,U,p)&&($e[Ne++]=qe)}return $e}function Ce(p,N){for(var U=-1,ne=N.length,Ne=p.length;++U<ne;)p[Ne+U]=N[U];return p}function Se(p,N){for(var U=-1,ne=p==null?0:p.length;++U<ne;)if(N(p[U],U,p))return!0;return!1}function Me(p,N){for(var U=-1,ne=Array(p);++U<p;)ne[U]=N(U);return ne}function Le(p){return function(N){return p(N)}}function Xe(p,N){return p.has(N)}function ce(p,N){return p?.[N]}function Fe(p){var N=-1,U=Array(p.size);return p.forEach(function(ne,Ne){U[++N]=[Ne,ne]}),U}function ve(p,N){return function(U){return p(N(U))}}function Re(p){var N=-1,U=Array(p.size);return p.forEach(function(ne){U[++N]=ne}),U}var Pe=Array.prototype,Bs=Function.prototype,St=Object.prototype,os=de["__core-js_shared__"],Fs=Bs.toString,Vt=St.hasOwnProperty,Sl=function(){var p=/[^.]+$/.exec(os&&os.keys&&os.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),El=St.toString,$n=RegExp("^"+Fs.call(Vt).replace(ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vs=he?de.Buffer:void 0,rs=de.Symbol,Ll=de.Uint8Array,cs=St.propertyIsEnumerable,Va=Pe.splice,Gt=rs?rs.toStringTag:void 0,us=Object.getOwnPropertySymbols,Rs=Vs?Vs.isBuffer:void 0,Ra=ve(Object.keys,Object),qs=fa(de,"DataView"),qa=fa(de,"Map"),Us=fa(de,"Promise"),js=fa(de,"Set"),zs=fa(de,"WeakMap"),wa=fa(Object,"create"),Al=Et(qs),pa=Et(qa),In=Et(Us),Pn=Et(js),On=Et(zs),$l=rs?rs.prototype:void 0,Ys=$l?$l.valueOf:void 0;function mt(p){var N=-1,U=p==null?0:p.length;for(this.clear();++N<U;){var ne=p[N];this.set(ne[0],ne[1])}}function Dn(){this.__data__=wa?wa(null):{},this.size=0}function Nn(p){var N=this.has(p)&&delete this.__data__[p];return this.size-=N?1:0,N}function Mn(p){var N=this.__data__;if(wa){var U=N[p];return U===s?void 0:U}return Vt.call(N,p)?N[p]:void 0}function Bn(p){var N=this.__data__;return wa?N[p]!==void 0:Vt.call(N,p)}function Fn(p,N){var U=this.__data__;return this.size+=this.has(p)?0:1,U[p]=wa&&N===void 0?s:N,this}mt.prototype.clear=Dn,mt.prototype.delete=Nn,mt.prototype.get=Mn,mt.prototype.has=Bn,mt.prototype.set=Fn;function bt(p){var N=-1,U=p==null?0:p.length;for(this.clear();++N<U;){var ne=p[N];this.set(ne[0],ne[1])}}function Vn(){this.__data__=[],this.size=0}function Rn(p){var N=this.__data__,U=ps(N,p);if(U<0)return!1;var ne=N.length-1;return U==ne?N.pop():Va.call(N,U,1),--this.size,!0}function qn(p){var N=this.__data__,U=ps(N,p);return U<0?void 0:N[U][1]}function Un(p){return ps(this.__data__,p)>-1}function jn(p,N){var U=this.__data__,ne=ps(U,p);return ne<0?(++this.size,U.push([p,N])):U[ne][1]=N,this}bt.prototype.clear=Vn,bt.prototype.delete=Rn,bt.prototype.get=qn,bt.prototype.has=Un,bt.prototype.set=jn;function It(p){var N=-1,U=p==null?0:p.length;for(this.clear();++N<U;){var ne=p[N];this.set(ne[0],ne[1])}}function zn(){this.size=0,this.__data__={hash:new mt,map:new(qa||bt),string:new mt}}function Yn(p){var N=Jt(this,p).delete(p);return this.size-=N?1:0,N}function Wn(p){return Jt(this,p).get(p)}function Hn(p){return Jt(this,p).has(p)}function Zn(p,N){var U=Jt(this,p),ne=U.size;return U.set(p,N),this.size+=U.size==ne?0:1,this}It.prototype.clear=zn,It.prototype.delete=Yn,It.prototype.get=Wn,It.prototype.has=Hn,It.prototype.set=Zn;function ds(p){var N=-1,U=p==null?0:p.length;for(this.__data__=new It;++N<U;)this.add(p[N])}function Il(p){return this.__data__.set(p,s),this}function ms(p){return this.__data__.has(p)}ds.prototype.add=ds.prototype.push=Il,ds.prototype.has=ms;function la(p){var N=this.__data__=new bt(p);this.size=N.size}function Ws(){this.__data__=new bt,this.size=0}function Gn(p){var N=this.__data__,U=N.delete(p);return this.size=N.size,U}function Jn(p){return this.__data__.get(p)}function Xn(p){return this.__data__.has(p)}function Qn(p,N){var U=this.__data__;if(U instanceof bt){var ne=U.__data__;if(!qa||ne.length<t-1)return ne.push([p,N]),this.size=++U.size,this;U=this.__data__=new It(ne)}return U.set(p,N),this.size=U.size,this}la.prototype.clear=Ws,la.prototype.delete=Gn,la.prototype.get=Jn,la.prototype.has=Xn,la.prototype.set=Qn;function Kn(p,N){var U=fs(p),ne=!U&&Ml(p),Ne=!U&&!ne&&gs(p),$e=!U&&!ne&&!Ne&&Vl(p),qe=U||ne||Ne||$e,ze=qe?Me(p.length,String):[],it=ze.length;for(var Ge in p)(N||Vt.call(p,Ge))&&!(qe&&(Ge=="length"||Ne&&(Ge=="offset"||Ge=="parent")||$e&&(Ge=="buffer"||Ge=="byteLength"||Ge=="byteOffset")||oi(Ge,it)))&&ze.push(Ge);return ze}function ps(p,N){for(var U=p.length;U--;)if(Nl(p[U][0],N))return U;return-1}function Hs(p,N,U){var ne=N(p);return fs(p)?ne:Ce(ne,U(p))}function Ua(p){return p==null?p===void 0?V:S:Gt&&Gt in Object(p)?ga(p):Dl(p)}function Pl(p){return ia(p)&&Ua(p)==r}function Ol(p,N,U,ne,Ne){return p===N?!0:p==null||N==null||!ia(p)&&!ia(N)?p!==p&&N!==N:ei(p,N,U,ne,Ol,Ne)}function ei(p,N,U,ne,Ne,$e){var qe=fs(p),ze=fs(N),it=qe?c:na(p),Ge=ze?c:na(N);it=it==r?P:it,Ge=Ge==r?P:Ge;var kt=it==P,Pt=Ge==P,ct=it==Ge;if(ct&&gs(p)){if(!gs(N))return!1;qe=!0,kt=!1}if(ct&&!kt)return $e||($e=new la),qe||Vl(p)?Zs(p,N,U,ne,Ne,$e):li(p,N,it,U,ne,Ne,$e);if(!(U&n)){var Ct=kt&&Vt.call(p,"__wrapped__"),pt=Pt&&Vt.call(N,"__wrapped__");if(Ct||pt){var Ta=Ct?p.value():p,ha=pt?N.value():N;return $e||($e=new la),Ne(Ta,ha,U,ne,$e)}}return ct?($e||($e=new la),ni(p,N,U,ne,Ne,$e)):!1}function ti(p){if(!Fl(p)||ci(p))return!1;var N=Bl(p)?$n:ae;return N.test(Et(p))}function ai(p){return ia(p)&&Js(p.length)&&!!z[Ua(p)]}function si(p){if(!ui(p))return Ra(p);var N=[];for(var U in Object(p))Vt.call(p,U)&&U!="constructor"&&N.push(U);return N}function Zs(p,N,U,ne,Ne,$e){var qe=U&n,ze=p.length,it=N.length;if(ze!=it&&!(qe&&it>ze))return!1;var Ge=$e.get(p);if(Ge&&$e.get(N))return Ge==N;var kt=-1,Pt=!0,ct=U&i?new ds:void 0;for($e.set(p,N),$e.set(N,p);++kt<ze;){var Ct=p[kt],pt=N[kt];if(ne)var Ta=qe?ne(pt,Ct,kt,N,p,$e):ne(Ct,pt,kt,p,N,$e);if(Ta!==void 0){if(Ta)continue;Pt=!1;break}if(ct){if(!Se(N,function(ha,za){if(!Xe(ct,za)&&(Ct===ha||Ne(Ct,ha,U,ne,$e)))return ct.push(za)})){Pt=!1;break}}else if(!(Ct===pt||Ne(Ct,pt,U,ne,$e))){Pt=!1;break}}return $e.delete(p),$e.delete(N),Pt}function li(p,N,U,ne,Ne,$e,qe){switch(U){case G:if(p.byteLength!=N.byteLength||p.byteOffset!=N.byteOffset)return!1;p=p.buffer,N=N.buffer;case B:return!(p.byteLength!=N.byteLength||!$e(new Ll(p),new Ll(N)));case f:case v:case _:return Nl(+p,+N);case g:return p.name==N.name&&p.message==N.message;case A:case E:return p==N+"";case C:var ze=Fe;case O:var it=ne&n;if(ze||(ze=Re),p.size!=N.size&&!it)return!1;var Ge=qe.get(p);if(Ge)return Ge==N;ne|=i,qe.set(p,N);var kt=Zs(ze(p),ze(N),ne,Ne,$e,qe);return qe.delete(p),kt;case $:if(Ys)return Ys.call(p)==Ys.call(N)}return!1}function ni(p,N,U,ne,Ne,$e){var qe=U&n,ze=ja(p),it=ze.length,Ge=ja(N),kt=Ge.length;if(it!=kt&&!qe)return!1;for(var Pt=it;Pt--;){var ct=ze[Pt];if(!(qe?ct in N:Vt.call(N,ct)))return!1}var Ct=$e.get(p);if(Ct&&$e.get(N))return Ct==N;var pt=!0;$e.set(p,N),$e.set(N,p);for(var Ta=qe;++Pt<it;){ct=ze[Pt];var ha=p[ct],za=N[ct];if(ne)var Mo=qe?ne(za,ha,ct,N,p,$e):ne(ha,za,ct,p,N,$e);if(!(Mo===void 0?ha===za||Ne(ha,za,U,ne,$e):Mo)){pt=!1;break}Ta||(Ta=ct=="constructor")}if(pt&&!Ta){var Rl=p.constructor,ql=N.constructor;Rl!=ql&&"constructor"in p&&"constructor"in N&&!(typeof Rl=="function"&&Rl instanceof Rl&&typeof ql=="function"&&ql instanceof ql)&&(pt=!1)}return $e.delete(p),$e.delete(N),pt}function ja(p){return Hs(p,Xs,ii)}function Jt(p,N){var U=p.__data__;return ri(N)?U[typeof N=="string"?"string":"hash"]:U.map}function fa(p,N){var U=ce(p,N);return ti(U)?U:void 0}function ga(p){var N=Vt.call(p,Gt),U=p[Gt];try{p[Gt]=void 0;var ne=!0}catch{}var Ne=El.call(p);return ne&&(N?p[Gt]=U:delete p[Gt]),Ne}var ii=us?function(p){return p==null?[]:(p=Object(p),be(us(p),function(N){return cs.call(p,N)}))}:mi,na=Ua;(qs&&na(new qs(new ArrayBuffer(1)))!=G||qa&&na(new qa)!=C||Us&&na(Us.resolve())!=k||js&&na(new js)!=O||zs&&na(new zs)!=j)&&(na=function(p){var N=Ua(p),U=N==P?p.constructor:void 0,ne=U?Et(U):"";if(ne)switch(ne){case Al:return G;case pa:return C;case In:return k;case Pn:return O;case On:return j}return N});function oi(p,N){return N=N??o,!!N&&(typeof p=="number"||me.test(p))&&p>-1&&p%1==0&&p<N}function ri(p){var N=typeof p;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?p!=="__proto__":p===null}function ci(p){return!!Sl&&Sl in p}function ui(p){var N=p&&p.constructor,U=typeof N=="function"&&N.prototype||St;return p===U}function Dl(p){return El.call(p)}function Et(p){if(p!=null){try{return Fs.call(p)}catch{}try{return p+""}catch{}}return""}function Nl(p,N){return p===N||p!==p&&N!==N}var Ml=Pl(function(){return arguments}())?Pl:function(p){return ia(p)&&Vt.call(p,"callee")&&!cs.call(p,"callee")},fs=Array.isArray;function Gs(p){return p!=null&&Js(p.length)&&!Bl(p)}var gs=Rs||pi;function di(p,N){return Ol(p,N)}function Bl(p){if(!Fl(p))return!1;var N=Ua(p);return N==b||N==T||N==d||N==h}function Js(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=o}function Fl(p){var N=typeof p;return p!=null&&(N=="object"||N=="function")}function ia(p){return p!=null&&typeof p=="object"}var Vl=je?Le(je):ai;function Xs(p){return Gs(p)?Kn(p):si(p)}function mi(){return[]}function pi(){return!1}l.exports=di})(un,un.exports);var bo={};Object.defineProperty(bo,"__esModule",{value:!0});const T_=cn.exports,S_=un.exports;var Wi;(function(l){function e(i={},o={},r=!1){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});let c=T_(o);r||(c=Object.keys(c).reduce((d,f)=>(c[f]!=null&&(d[f]=c[f]),d),{}));for(const d in i)i[d]!==void 0&&o[d]===void 0&&(c[d]=i[d]);return Object.keys(c).length>0?c:void 0}l.compose=e;function t(i={},o={}){typeof i!="object"&&(i={}),typeof o!="object"&&(o={});const r=Object.keys(i).concat(Object.keys(o)).reduce((c,d)=>(S_(i[d],o[d])||(c[d]=o[d]===void 0?null:o[d]),c),{});return Object.keys(r).length>0?r:void 0}l.diff=t;function s(i={},o={}){i=i||{};const r=Object.keys(o).reduce((c,d)=>(o[d]!==i[d]&&i[d]!==void 0&&(c[d]=o[d]),c),{});return Object.keys(i).reduce((c,d)=>(i[d]!==o[d]&&o[d]===void 0&&(c[d]=null),c),r)}l.invert=s;function n(i,o,r=!1){if(typeof i!="object")return o;if(typeof o!="object")return;if(!r)return o;const c=Object.keys(o).reduce((d,f)=>(i[f]===void 0&&(d[f]=o[f]),d),{});return Object.keys(c).length>0?c:void 0}l.transform=n})(Wi||(Wi={}));bo.default=Wi;var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});var Hi;(function(l){function e(t){return typeof t.delete=="number"?t.delete:typeof t.retain=="number"?t.retain:typeof t.retain=="object"&&t.retain!==null?1:typeof t.insert=="string"?t.insert.length:1}l.length=e})(Hi||(Hi={}));Sn.default=Hi;var ko={};Object.defineProperty(ko,"__esModule",{value:!0});const yr=Sn;class E_{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);const t=this.ops[this.index];if(t){const s=this.offset,n=yr.default.length(t);if(e>=n-s?(e=n-s,this.index+=1,this.offset=0):this.offset+=e,typeof t.delete=="number")return{delete:e};{const i={};return t.attributes&&(i.attributes=t.attributes),typeof t.retain=="number"?i.retain=e:typeof t.retain=="object"&&t.retain!==null?i.retain=t.retain:typeof t.insert=="string"?i.insert=t.insert.substr(s,e):i.insert=t.insert,i}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?yr.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const e=this.offset,t=this.index,s=this.next(),n=this.ops.slice(this.index);return this.offset=e,this.index=t,[s].concat(n)}}else return[]}}ko.default=E_;(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const t=w_,s=cn.exports,n=un.exports,i=bo;e.AttributeMap=i.default;const o=Sn;e.Op=o.default;const r=ko;e.OpIterator=r.default;const c=String.fromCharCode(0),d=(v,g)=>{if(typeof v!="object"||v===null)throw new Error(`cannot retain a ${typeof v}`);if(typeof g!="object"||g===null)throw new Error(`cannot retain a ${typeof g}`);const b=Object.keys(v)[0];if(!b||b!==Object.keys(g)[0])throw new Error(`embed types not matched: ${b} != ${Object.keys(g)[0]}`);return[b,v[b],g[b]]};class f{constructor(g){Array.isArray(g)?this.ops=g:g!=null&&Array.isArray(g.ops)?this.ops=g.ops:this.ops=[]}static registerEmbed(g,b){this.handlers[g]=b}static unregisterEmbed(g){delete this.handlers[g]}static getHandler(g){const b=this.handlers[g];if(!b)throw new Error(`no handlers for embed type "${g}"`);return b}insert(g,b){const T={};return typeof g=="string"&&g.length===0?this:(T.insert=g,b!=null&&typeof b=="object"&&Object.keys(b).length>0&&(T.attributes=b),this.push(T))}delete(g){return g<=0?this:this.push({delete:g})}retain(g,b){if(typeof g=="number"&&g<=0)return this;const T={retain:g};return b!=null&&typeof b=="object"&&Object.keys(b).length>0&&(T.attributes=b),this.push(T)}push(g){let b=this.ops.length,T=this.ops[b-1];if(g=s(g),typeof T=="object"){if(typeof g.delete=="number"&&typeof T.delete=="number")return this.ops[b-1]={delete:T.delete+g.delete},this;if(typeof T.delete=="number"&&g.insert!=null&&(b-=1,T=this.ops[b-1],typeof T!="object"))return this.ops.unshift(g),this;if(n(g.attributes,T.attributes)){if(typeof g.insert=="string"&&typeof T.insert=="string")return this.ops[b-1]={insert:T.insert+g.insert},typeof g.attributes=="object"&&(this.ops[b-1].attributes=g.attributes),this;if(typeof g.retain=="number"&&typeof T.retain=="number")return this.ops[b-1]={retain:T.retain+g.retain},typeof g.attributes=="object"&&(this.ops[b-1].attributes=g.attributes),this}}return b===this.ops.length?this.ops.push(g):this.ops.splice(b,0,g),this}chop(){const g=this.ops[this.ops.length-1];return g&&typeof g.retain=="number"&&!g.attributes&&this.ops.pop(),this}filter(g){return this.ops.filter(g)}forEach(g){this.ops.forEach(g)}map(g){return this.ops.map(g)}partition(g){const b=[],T=[];return this.forEach(C=>{(g(C)?b:T).push(C)}),[b,T]}reduce(g,b){return this.ops.reduce(g,b)}changeLength(){return this.reduce((g,b)=>b.insert?g+o.default.length(b):b.delete?g-b.delete:g,0)}length(){return this.reduce((g,b)=>g+o.default.length(b),0)}slice(g=0,b=1/0){const T=[],C=new r.default(this.ops);let _=0;for(;_<b&&C.hasNext();){let S;_<g?S=C.next(g-_):(S=C.next(b-_),T.push(S)),_+=o.default.length(S)}return new f(T)}compose(g){const b=new r.default(this.ops),T=new r.default(g.ops),C=[],_=T.peek();if(_!=null&&typeof _.retain=="number"&&_.attributes==null){let P=_.retain;for(;b.peekType()==="insert"&&b.peekLength()<=P;)P-=b.peekLength(),C.push(b.next());_.retain-P>0&&T.next(_.retain-P)}const S=new f(C);for(;b.hasNext()||T.hasNext();)if(T.peekType()==="insert")S.push(T.next());else if(b.peekType()==="delete")S.push(b.next());else{const P=Math.min(b.peekLength(),T.peekLength()),k=b.next(P),h=T.next(P);if(h.retain){const A={};if(typeof k.retain=="number")A.retain=typeof h.retain=="number"?P:h.retain;else if(typeof h.retain=="number")k.retain==null?A.insert=k.insert:A.retain=k.retain;else{const E=k.retain==null?"insert":"retain",[$,V,j]=d(k[E],h.retain),B=f.getHandler($);A[E]={[$]:B.compose(V,j,E==="retain")}}const O=i.default.compose(k.attributes,h.attributes,typeof k.retain=="number");if(O&&(A.attributes=O),S.push(A),!T.hasNext()&&n(S.ops[S.ops.length-1],A)){const E=new f(b.rest());return S.concat(E).chop()}}else typeof h.delete=="number"&&(typeof k.retain=="number"||typeof k.retain=="object"&&k.retain!==null)&&S.push(h)}return S.chop()}concat(g){const b=new f(this.ops.slice());return g.ops.length>0&&(b.push(g.ops[0]),b.ops=b.ops.concat(g.ops.slice(1))),b}diff(g,b){if(this.ops===g.ops)return new f;const T=[this,g].map(k=>k.map(h=>{if(h.insert!=null)return typeof h.insert=="string"?h.insert:c;const A=k===g?"on":"with";throw new Error("diff() called "+A+" non-document")}).join("")),C=new f,_=t(T[0],T[1],b,!0),S=new r.default(this.ops),P=new r.default(g.ops);return _.forEach(k=>{let h=k[1].length;for(;h>0;){let A=0;switch(k[0]){case t.INSERT:A=Math.min(P.peekLength(),h),C.push(P.next(A));break;case t.DELETE:A=Math.min(h,S.peekLength()),S.next(A),C.delete(A);break;case t.EQUAL:A=Math.min(S.peekLength(),P.peekLength(),h);const O=S.next(A),E=P.next(A);n(O.insert,E.insert)?C.retain(A,i.default.diff(O.attributes,E.attributes)):C.push(E).delete(A);break}h-=A}}),C.chop()}eachLine(g,b=`
`){const T=new r.default(this.ops);let C=new f,_=0;for(;T.hasNext();){if(T.peekType()!=="insert")return;const S=T.peek(),P=o.default.length(S)-T.peekLength(),k=typeof S.insert=="string"?S.insert.indexOf(b,P)-P:-1;if(k<0)C.push(T.next());else if(k>0)C.push(T.next(k));else{if(g(C,T.next(1).attributes||{},_)===!1)return;_+=1,C=new f}}C.length()>0&&g(C,{},_)}invert(g){const b=new f;return this.reduce((T,C)=>{if(C.insert)b.delete(o.default.length(C));else{if(typeof C.retain=="number"&&C.attributes==null)return b.retain(C.retain),T+C.retain;if(C.delete||typeof C.retain=="number"){const _=C.delete||C.retain;return g.slice(T,T+_).forEach(P=>{C.delete?b.push(P):C.retain&&C.attributes&&b.retain(o.default.length(P),i.default.invert(C.attributes,P.attributes))}),T+_}else if(typeof C.retain=="object"&&C.retain!==null){const _=g.slice(T,T+1),S=new r.default(_.ops).next(),[P,k,h]=d(C.retain,S.insert),A=f.getHandler(P);return b.retain({[P]:A.invert(k,h)},i.default.invert(C.attributes,S.attributes)),T+1}}return T},0),b.chop()}transform(g,b=!1){if(b=!!b,typeof g=="number")return this.transformPosition(g,b);const T=g,C=new r.default(this.ops),_=new r.default(T.ops),S=new f;for(;C.hasNext()||_.hasNext();)if(C.peekType()==="insert"&&(b||_.peekType()!=="insert"))S.retain(o.default.length(C.next()));else if(_.peekType()==="insert")S.push(_.next());else{const P=Math.min(C.peekLength(),_.peekLength()),k=C.next(P),h=_.next(P);if(k.delete)continue;if(h.delete)S.push(h);else{const A=k.retain,O=h.retain;let E=typeof O=="object"&&O!==null?O:P;if(typeof A=="object"&&A!==null&&typeof O=="object"&&O!==null){const $=Object.keys(A)[0];if($===Object.keys(O)[0]){const V=f.getHandler($);V&&(E={[$]:V.transform(A[$],O[$],b)})}}S.retain(E,i.default.transform(k.attributes,h.attributes,b))}}return S.chop()}transformPosition(g,b=!1){b=!!b;const T=new r.default(this.ops);let C=0;for(;T.hasNext()&&C<=g;){const _=T.peekLength(),S=T.peekType();if(T.next(),S==="delete"){g-=Math.min(_,g-C);continue}else S==="insert"&&(C<g||!b)&&(g+=_);C+=_}return g}}f.Op=o.default,f.OpIterator=r.default,f.AttributeMap=i.default,f.handlers={},e.default=f,l.exports=f,l.exports.default=f})(Ot,Ot.exports);var we=Nu(Ot.exports);class sa extends Ft{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}sa.blotName="break";sa.tagName="BR";class ta extends rn{}const L_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function En(l){return l.replace(/[&<>"']/g,e=>L_[e])}class Lt extends ho{static allowedChildren=[Lt,sa,Ft,ta];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,t){const s=Lt.order.indexOf(e),n=Lt.order.indexOf(t);return s>=0||n>=0?s-n:e===t?0:e<t?-1:1}formatAt(e,t,s,n){if(Lt.compare(this.statics.blotName,s)<0&&this.scroll.query(s,Ee.BLOT)){const i=this.isolate(e,t);n&&i.wrap(s,n)}else super.formatAt(e,t,s,n)}optimize(e){if(super.optimize(e),this.parent instanceof Lt&&Lt.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}const br=1;class _t extends ul{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=Vc(this)),this.cache.delta}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}formatAt(e,t,s,n){t<=0||(this.scroll.query(s,Ee.BLOCK)?e+t===this.length()&&this.format(s,n):super.formatAt(e,Math.min(t,this.length()-e-1),s,n),this.cache={})}insertAt(e,t,s){if(s!=null){super.insertAt(e,t,s),this.cache={};return}if(t.length===0)return;const n=t.split(`
`),i=n.shift();i.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),i):this.children.tail.insertAt(this.children.tail.length(),i),this.cache={});let o=this;n.reduce((r,c)=>(o=o.split(r,!0),o.insertAt(0,c),c.length),e+i.length)}insertBefore(e,t){const{head:s}=this.children;super.insertBefore(e,t),s instanceof sa&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+br),this.cache.length}moveChildren(e,t){super.moveChildren(e,t),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t&&(e===0||e>=this.length()-br)){const n=this.clone();return e===0?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}const s=super.split(e,t);return this.cache={},s}}_t.blotName="block";_t.tagName="P";_t.defaultChild=sa;_t.allowedChildren=[sa,Lt,Ft,ta];class zt extends Ft{attach(){super.attach(),this.attributes=new Cn(this.domNode)}delta(){return new we().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){const s=this.scroll.query(e,Ee.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,t)}formatAt(e,t,s,n){this.format(s,n)}insertAt(e,t,s){if(s!=null){super.insertAt(e,t,s);return}const n=t.split(`
`),i=n.pop(),o=n.map(c=>{const d=this.scroll.create(_t.blotName);return d.insertAt(0,c),d}),r=this.split(e);o.forEach(c=>{this.parent.insertBefore(c,r)}),i&&this.parent.insertBefore(this.scroll.create("text",i),r)}}zt.scope=Ee.BLOCK_BLOT;function Vc(l){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return l.descendants(xt).reduce((t,s)=>s.length()===0?t:t.insert(s.value(),Ut(s,{},e)),new we).insert(`
`,Ut(l))}function Ut(l){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return l==null||("formats"in l&&typeof l.formats=="function"&&(e={...e,...l.formats()},t&&delete e["code-token"]),l.parent==null||l.parent.statics.blotName==="scroll"||l.parent.statics.scope!==l.statics.scope)?e:Ut(l.parent,e,t)}class Qt extends Ft{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,t,s){super(e,t),this.selection=s,this.textNode=document.createTextNode(Qt.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let s=this,n=0;for(;s!=null&&s.statics.scope!==Ee.BLOCK_BLOT;)n+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=Qt.CONTENTS.length,s.optimize(),s.formatAt(n,Qt.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const t=this.prev instanceof ta?this.prev:null,s=t?t.length():0,n=this.next instanceof ta?this.next:null,i=n?n.text:"",{textNode:o}=this,r=o.data.split(Qt.CONTENTS).join("");o.data=Qt.CONTENTS;let c;if(t)c=t,(r||n)&&(t.insertAt(t.length(),r+i),n&&n.remove());else if(n)c=n,n.insertAt(0,r);else{const d=document.createTextNode(r);c=this.scroll.create(d),this.parent.insertBefore(c,this)}if(this.remove(),e){const d=(g,b)=>t&&g===t.domNode?b:g===o?s+b-1:n&&g===n.domNode?s+r.length+b:null,f=d(e.start.node,e.start.offset),v=d(e.end.node,e.end.offset);if(f!==null&&v!==null)return{startNode:c.domNode,startOffset:f,endNode:c.domNode,endOffset:v}}return null}update(e,t){if(e.some(s=>s.type==="characterData"&&s.target===this.textNode)){const s=this.restore();s&&(t.range=s)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=Qt.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}}var Rc={exports:{}};(function(l){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function n(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function i(c,d,f,v,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var b=new n(f,v||c,g),T=t?t+d:d;return c._events[T]?c._events[T].fn?c._events[T]=[c._events[T],b]:c._events[T].push(b):(c._events[T]=b,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function r(){this._events=new s,this._eventsCount=0}r.prototype.eventNames=function(){var d=[],f,v;if(this._eventsCount===0)return d;for(v in f=this._events)e.call(f,v)&&d.push(t?v.slice(1):v);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},r.prototype.listeners=function(d){var f=t?t+d:d,v=this._events[f];if(!v)return[];if(v.fn)return[v.fn];for(var g=0,b=v.length,T=new Array(b);g<b;g++)T[g]=v[g].fn;return T},r.prototype.listenerCount=function(d){var f=t?t+d:d,v=this._events[f];return v?v.fn?1:v.length:0},r.prototype.emit=function(d,f,v,g,b,T){var C=t?t+d:d;if(!this._events[C])return!1;var _=this._events[C],S=arguments.length,P,k;if(_.fn){switch(_.once&&this.removeListener(d,_.fn,void 0,!0),S){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,v),!0;case 4:return _.fn.call(_.context,f,v,g),!0;case 5:return _.fn.call(_.context,f,v,g,b),!0;case 6:return _.fn.call(_.context,f,v,g,b,T),!0}for(k=1,P=new Array(S-1);k<S;k++)P[k-1]=arguments[k];_.fn.apply(_.context,P)}else{var h=_.length,A;for(k=0;k<h;k++)switch(_[k].once&&this.removeListener(d,_[k].fn,void 0,!0),S){case 1:_[k].fn.call(_[k].context);break;case 2:_[k].fn.call(_[k].context,f);break;case 3:_[k].fn.call(_[k].context,f,v);break;case 4:_[k].fn.call(_[k].context,f,v,g);break;default:if(!P)for(A=1,P=new Array(S-1);A<S;A++)P[A-1]=arguments[A];_[k].fn.apply(_[k].context,P)}}return!0},r.prototype.on=function(d,f,v){return i(this,d,f,v,!1)},r.prototype.once=function(d,f,v){return i(this,d,f,v,!0)},r.prototype.removeListener=function(d,f,v,g){var b=t?t+d:d;if(!this._events[b])return this;if(!f)return o(this,b),this;var T=this._events[b];if(T.fn)T.fn===f&&(!g||T.once)&&(!v||T.context===v)&&o(this,b);else{for(var C=0,_=[],S=T.length;C<S;C++)(T[C].fn!==f||g&&!T[C].once||v&&T[C].context!==v)&&_.push(T[C]);_.length?this._events[b]=_.length===1?_[0]:_:o(this,b)}return this},r.prototype.removeAllListeners=function(d){var f;return d?(f=t?t+d:d,this._events[f]&&o(this,f)):(this._events=new s,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=t,r.EventEmitter=r,l.exports=r})(Rc);var A_=Rc.exports,Zi=new WeakMap;const Gi=["error","warn","log","info"];let Ji="warn";function qc(l){if(Ji&&Gi.indexOf(l)<=Gi.indexOf(Ji)){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];console[l](...t)}}function xa(l){return Gi.reduce((e,t)=>(e[t]=qc.bind(console,t,l),e),{})}xa.level=l=>{Ji=l};qc.level=xa.level;const Ci=xa("quill:events"),$_=["selectionchange","mousedown","mouseup","click"];$_.forEach(l=>{document.addEventListener(l,function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(n=>{const i=Zi.get(n);i&&i.emitter&&i.emitter.handleDOM(...t)})})});class xe extends A_{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Ci.error)}emit(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Ci.log.call(Ci,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];(this.domListeners[e.type]||[]).forEach(i=>{let{node:o,handler:r}=i;(e.target===o||o.contains(e.target))&&r(e,...s)})}listenDOM(e,t,s){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:s})}}const xi=xa("quill:selection");class Ga{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}}class I_{constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Ga(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,xe.sources.USER),1)}),this.emitter.on(xe.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(xe.events.SCROLL_UPDATE,(n,i)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);const o=i.some(r=>r.type==="characterData"||r.type==="childList"||r.type==="attributes"&&r.target===this.root);this.update(o?xe.sources.SILENT:n)}catch{}})}),this.emitter.on(xe.events.SCROLL_OPTIMIZE,(s,n)=>{if(n.range){const{startNode:i,startOffset:o,endNode:r,endOffset:c}=n.range;this.setNativeRange(i,o,r,c),this.update(xe.sources.SILENT)}}),this.update(xe.sources.SILENT)}handleComposition(){this.emitter.on(xe.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(xe.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(xe.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();const s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(e,Ee.BLOCK))){if(s.start.node!==this.cursor.textNode){const n=this.scroll.find(s.start.node,!1);if(n==null)return;if(n instanceof xt){const i=n.split(s.start.offset);n.parent.insertBefore(this.cursor,i)}else n.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=this.scroll.length();e=Math.min(e,s-1),t=Math.min(e+t,s-1)-e;let n,[i,o]=this.scroll.leaf(e);if(i==null)return null;if(t>0&&o===i.length()){const[f]=this.scroll.leaf(e+1);if(f){const[v]=this.scroll.line(e),[g]=this.scroll.line(e+1);v===g&&(i=f,o=0)}}[n,o]=i.position(o,!0);const r=document.createRange();if(t>0)return r.setStart(n,o),[i,o]=this.scroll.leaf(e+t),i==null?null:([n,o]=i.position(o,!0),r.setEnd(n,o),r.getBoundingClientRect());let c="left",d;if(n instanceof Text){if(!n.data.length)return null;o<n.data.length?(r.setStart(n,o),r.setEnd(n,o+1)):(r.setStart(n,o-1),r.setEnd(n,o),c="right"),d=r.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;d=i.domNode.getBoundingClientRect(),o>0&&(c="right")}return{bottom:d.top+d.height,height:d.height,left:d[c],right:d[c],top:d.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const t=e.getRangeAt(0);if(t==null)return null;const s=this.normalizeNative(t);return xi.info("getNativeRange",s),s}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&wi(this.root,document.activeElement)}normalizedToRange(e){const t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);const s=t.map(o=>{const[r,c]=o,d=this.scroll.find(r,!0),f=d.offset(this.scroll);return c===0?f:d instanceof xt?f+d.index(r,c):f+d.length()}),n=Math.min(Math.max(...s),this.scroll.length()-1),i=Math.min(n,...s);return new Ga(i,n-i)}normalizeNative(e){if(!wi(this.root,e.startContainer)||!e.collapsed&&!wi(this.root,e.endContainer))return null;const t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(s=>{let{node:n,offset:i}=s;for(;!(n instanceof Text)&&n.childNodes.length>0;)if(n.childNodes.length>i)n=n.childNodes[i],i=0;else if(n.childNodes.length===i)n=n.lastChild,n instanceof Text?i=n.data.length:n.childNodes.length>0?i=n.childNodes.length:i=n.childNodes.length+1;else break;s.node=n,s.offset=i}),t}rangeToNative(e){const t=this.scroll.length(),s=(n,i)=>{n=Math.min(t-1,n);const[o,r]=this.scroll.leaf(n);return o?o.position(r,i):[null,-1]};return[...s(e.index,!1),...s(e.index+e.length,!0)]}setNativeRange(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(xi.info("setNativeRange",e,t,s,n),e!=null&&(this.root.parentNode==null||e.parentNode==null||s.parentNode==null))return;const o=document.getSelection();if(o!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:r}=this.getNativeRange()||{};if(r==null||i||e!==r.startContainer||t!==r.startOffset||s!==r.endContainer||n!==r.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),s instanceof Element&&s.tagName==="BR"&&(n=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);const c=document.createRange();c.setStart(e,t),c.setEnd(s,n),o.removeAllRanges(),o.addRange(c)}}else o.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xe.sources.API;if(typeof t=="string"&&(s=t,t=!1),xi.info("setRange",e),e!=null){const n=this.rangeToNative(e);this.setNativeRange(...n,t)}else this.setNativeRange(null);this.update(s)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xe.sources.USER;const t=this.lastRange,[s,n]=this.getRange();if(this.lastRange=s,this.lastNative=n,this.lastRange!=null&&(this.savedRange=this.lastRange),!go(t,this.lastRange)){if(!this.composing&&n!=null&&n.native.collapsed&&n.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const i=[xe.events.SELECTION_CHANGE,Ss(this.lastRange),Ss(t),e];this.emitter.emit(xe.events.EDITOR_CHANGE,...i),e!==xe.sources.SILENT&&this.emitter.emit(...i)}}}function wi(l,e){try{e.parentNode}catch{return!1}return l.contains(e)}const P_=/^[ -~]*$/;class O_{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();const s=kr(e),n=new we;return N_(s.ops.slice()).reduce((o,r)=>{const c=Ot.exports.Op.length(r);let d=r.attributes||{},f=!1,v=!1;if(r.insert!=null){if(n.retain(c),typeof r.insert=="string"){const T=r.insert;v=!T.endsWith(`
`)&&(t<=o||!!this.scroll.descendant(zt,o)[0]),this.scroll.insertAt(o,T);const[C,_]=this.scroll.line(o);let S=Ia({},Ut(C));if(C instanceof _t){const[P]=C.descendant(xt,_);P&&(S=Ia(S,Ut(P)))}d=Ot.exports.AttributeMap.diff(S,d)||{}}else if(typeof r.insert=="object"){const T=Object.keys(r.insert)[0];if(T==null)return o;const C=this.scroll.query(T,Ee.INLINE)!=null;if(C)(t<=o||!!this.scroll.descendant(zt,o)[0])&&(v=!0);else if(o>0){const[_,S]=this.scroll.descendant(xt,o-1);_ instanceof ta?_.value()[S]!==`
`&&(f=!0):_ instanceof Ft&&_.statics.scope===Ee.INLINE_BLOT&&(f=!0)}if(this.scroll.insertAt(o,T,r.insert[T]),C){const[_]=this.scroll.descendant(xt,o);if(_){const S=Ia({},Ut(_));d=Ot.exports.AttributeMap.diff(S,d)||{}}}}t+=c}else if(n.push(r),r.retain!==null&&typeof r.retain=="object"){const T=Object.keys(r.retain)[0];if(T==null)return o;this.scroll.updateEmbedAt(o,T,r.retain[T])}Object.keys(d).forEach(T=>{this.scroll.formatAt(o,c,T,d[T])});const g=f?1:0,b=v?1:0;return t+=g+b,n.retain(g),n.delete(b),o+c+g+b},0),n.reduce((o,r)=>typeof r.delete=="number"?(this.scroll.deleteAt(o,r.delete),o):o+Ot.exports.Op.length(r),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new we().retain(e).delete(t))}formatLine(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(i=>{this.scroll.lines(e,Math.max(t,1)).forEach(o=>{o.format(i,s[i])})}),this.scroll.optimize();const n=new we().retain(e).retain(t,Ss(s));return this.update(n)}formatText(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(i=>{this.scroll.formatAt(e,t,i,s[i])});const n=new we().retain(e).retain(t,Ss(s));return this.update(n)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new we)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],n=[];t===0?this.scroll.path(e).forEach(r=>{const[c]=r;c instanceof _t?s.push(c):c instanceof xt&&n.push(c)}):(s=this.scroll.lines(e,t),n=this.scroll.descendants(xt,e,t));const[i,o]=[s,n].map(r=>{const c=r.shift();if(c==null)return{};let d=Ut(c);for(;Object.keys(d).length>0;){const f=r.shift();if(f==null)return d;d=D_(Ut(f),d)}return d});return{...i,...o}}getHTML(e,t){const[s,n]=this.scroll.line(e);if(s){const i=s.length();return s.length()>=n+t&&!(n===0&&t===i)?ml(s,n,t,!0):ml(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(e,t){const s=kr(t),n=new we().retain(e).concat(s);return this.scroll.insertContents(e,s),this.update(n)}insertEmbed(e,t,s){return this.scroll.insertAt(e,t,s),this.update(new we().retain(e).insert({[t]:s}))}insertText(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(s).forEach(n=>{this.scroll.formatAt(e,t.length,n,s[n])}),this.update(new we().retain(e).insert(t,Ss(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==_t.blotName)return!1;const t=e;return t.children.length>1?!1:t.children.head instanceof sa}removeFormat(e,t){const s=this.getText(e,t),[n,i]=this.scroll.line(e+t);let o=0,r=new we;n!=null&&(o=n.length()-i,r=n.delta().slice(i,i+o-1).insert(`
`));const d=this.getContents(e,t+o).diff(new we().insert(s).concat(r)),f=new we().retain(e).concat(d);return this.applyDelta(f)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const n=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(P_)&&this.scroll.find(t[0].target)){const i=this.scroll.find(t[0].target),o=Ut(i),r=i.offset(this.scroll),c=t[0].oldValue.replace(Qt.CONTENTS,""),d=new we().insert(c),f=new we().insert(i.value()),v=s&&{oldRange:Cr(s.oldRange,-r),newRange:Cr(s.newRange,-r)};e=new we().retain(r).concat(d.diff(f,v)).reduce((b,T)=>T.insert?b.insert(T.insert,o):b.push(T),new we),this.delta=n.compose(e)}else this.delta=this.getDelta(),(!e||!go(n.compose(e),this.delta))&&(e=n.diff(this.delta,s));return e}}function ws(l,e,t){if(l.length===0){const[b]=Ti(t.pop());return e<=0?`</li></${b}>`:`</li></${b}>${ws([],e-1,t)}`}const[{child:s,offset:n,length:i,indent:o,type:r},...c]=l,[d,f]=Ti(r);if(o>e)return t.push(r),o===e+1?`<${d}><li${f}>${ml(s,n,i)}${ws(c,o,t)}`:`<${d}><li>${ws(l,e+1,t)}`;const v=t[t.length-1];if(o===e&&r===v)return`</li><li${f}>${ml(s,n,i)}${ws(c,o,t)}`;const[g]=Ti(t.pop());return`</li></${g}>${ws(l,e-1,t)}`}function ml(l,e,t){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in l&&typeof l.html=="function")return l.html(e,t);if(l instanceof ta)return En(l.value().slice(e,e+t)).replaceAll(" ","&nbsp;");if(l instanceof ea){if(l.statics.blotName==="list-container"){const d=[];return l.children.forEachAt(e,t,(f,v,g)=>{const b="formats"in f&&typeof f.formats=="function"?f.formats():{};d.push({child:f,offset:v,length:g,indent:b.indent||0,type:b.list})}),ws(d,-1,[])}const n=[];if(l.children.forEachAt(e,t,(d,f,v)=>{n.push(ml(d,f,v))}),s||l.statics.blotName==="list")return n.join("");const{outerHTML:i,innerHTML:o}=l.domNode,[r,c]=i.split(`>${o}<`);return r==="<table"?`<table style="border: 1px solid #000;">${n.join("")}<${c}`:`${r}>${n.join("")}<${c}`}return l.domNode instanceof Element?l.domNode.outerHTML:""}function D_(l,e){return Object.keys(e).reduce((t,s)=>{if(l[s]==null)return t;const n=e[s];return n===l[s]?t[s]=n:Array.isArray(n)?n.indexOf(l[s])<0?t[s]=n.concat([l[s]]):t[s]=n:t[s]=[n,l[s]],t},{})}function Ti(l){const e=l==="ordered"?"ol":"ul";switch(l){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function kr(l){return l.reduce((e,t)=>{if(typeof t.insert=="string"){const s=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(s,t.attributes)}return e.push(t)},new we)}function Cr(l,e){let{index:t,length:s}=l;return new Ga(t+e,s)}function N_(l){const e=[];return l.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((n,i)=>{i&&e.push({insert:`
`,attributes:t.attributes}),n&&e.push({insert:n,attributes:t.attributes})}):e.push(t)}),e}class ma{static DEFAULTS={};constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}}const jl="\uFEFF";class Co extends Ft{constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(jl),this.rightGuard=document.createTextNode(jl),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,s;const n=e.data.split(jl).join("");if(e===this.leftGuard)if(this.prev instanceof ta){const i=this.prev.length();this.prev.insertAt(i,n),t={startNode:this.prev.domNode,startOffset:i+n.length}}else s=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(s),this),t={startNode:s,startOffset:n.length};else e===this.rightGuard&&(this.next instanceof ta?(this.next.insertAt(0,n),t={startNode:this.next.domNode,startOffset:n.length}):(s=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(s),this.next),t={startNode:s,startOffset:n.length}));return e.data=jl,t}update(e,t){e.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){const n=this.restore(s.target);n&&(t.range=n)}})}}class M_{isComposing=!1;constructor(e,t){this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof Co)&&(this.emitter.emit(xe.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(xe.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(xe.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(xe.events.COMPOSITION_END,e),this.isComposing=!1}}class Ms{static DEFAULTS={modules:{}};static themes={default:Ms};modules={};constructor(e,t){this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}const B_=l=>l.parentElement||l.getRootNode().host||null,F_=l=>{const e=l.getBoundingClientRect(),t="offsetWidth"in l&&Math.abs(e.width)/l.offsetWidth||1,s="offsetHeight"in l&&Math.abs(e.height)/l.offsetHeight||1;return{top:e.top,right:e.left+l.clientWidth*t,bottom:e.top+l.clientHeight*s,left:e.left}},zl=l=>{const e=parseInt(l,10);return Number.isNaN(e)?0:e},xr=(l,e,t,s,n,i)=>l<t&&e>s?0:l<t?-(t-l+n):e>s?e-l>s-t?l+n-t:e-s+i:0,V_=(l,e)=>{const t=l.ownerDocument;let s=e,n=l;for(;n;){const i=n===t.body,o=i?{top:0,right:window.visualViewport?.width??t.documentElement.clientWidth,bottom:window.visualViewport?.height??t.documentElement.clientHeight,left:0}:F_(n),r=getComputedStyle(n),c=xr(s.left,s.right,o.left,o.right,zl(r.scrollPaddingLeft),zl(r.scrollPaddingRight)),d=xr(s.top,s.bottom,o.top,o.bottom,zl(r.scrollPaddingTop),zl(r.scrollPaddingBottom));if(c||d)if(i)t.defaultView?.scrollBy(c,d);else{const{scrollLeft:f,scrollTop:v}=n;d&&(n.scrollTop+=d),c&&(n.scrollLeft+=c);const g=n.scrollLeft-f,b=n.scrollTop-v;s={left:s.left-g,top:s.top-b,right:s.right-g,bottom:s.bottom-b}}n=i||r.position==="fixed"?null:B_(n)}},R_=100,q_=["block","break","cursor","inline","scroll","text"],U_=(l,e,t)=>{const s=new Is;return q_.forEach(n=>{const i=e.query(n);i&&s.register(i)}),l.forEach(n=>{let i=e.query(n);i||t.error(`Cannot register "${n}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;i;)if(s.register(i),i="blotName"in i?i.requiredContainer??null:null,o+=1,o>R_){t.error(`Cycle detected in registering blot requiredContainer: "${n}"`);break}}),s},Ls=xa("quill"),Yl=new Is;ea.uiClass="ql-ui";class re{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Yl,theme:"default"};static events=xe.events;static sources=xe.sources;static version="2.0.3";static imports={delta:we,parchment:f_,"core/module":ma,"core/theme":Ms};static debug(e){e===!0&&(e="log"),xa.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Zi.get(e)||Yl.find(e,t)}static import(e){return this.imports[e]==null&&Ls.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in e?e.attrName:e.blotName;typeof s=="string"?this.register(`formats/${s}`,e,t):Object.keys(e).forEach(n=>{this.register(n,e[n],t)})}else{const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!s&&Ls.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&Yl.register(t),typeof t.register=="function"&&t.register(Yl)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=j_(e,t),this.container=this.options.container,this.container==null){Ls.error("Invalid Quill container",e);return}this.options.debug&&re.debug(this.options.debug);const s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Zi.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new xe;const n=vo.blotName,i=this.options.registry.query(n);if(!i||!("blotName"in i))throw new Error(`Cannot initialize Quill without "${n}" blot`);if(this.scroll=new i(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new O_(this.scroll),this.selection=new I_(this.scroll,this.emitter),this.composition=new M_(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(xe.events.EDITOR_CHANGE,o=>{o===xe.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(xe.events.SCROLL_UPDATE,(o,r)=>{const c=this.selection.lastRange,[d]=this.selection.getRange(),f=c&&d?{oldRange:c,newRange:d}:void 0;Xt.call(this,()=>this.editor.update(null,r,f),o)}),this.emitter.on(xe.events.SCROLL_EMBED_UPDATE,(o,r)=>{const c=this.selection.lastRange,[d]=this.selection.getRange(),f=c&&d?{oldRange:c,newRange:d}:void 0;Xt.call(this,()=>{const v=new we().retain(o.offset(this)).retain({[o.statics.blotName]:r});return this.editor.update(v,[],f)},re.sources.USER)}),s){const o=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const s=e;e=document.createElement("div"),e.classList.add(s)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,s){return[e,t,,s]=va(e,t,s),Xt.call(this,()=>this.editor.deleteText(e,t),s,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xe.sources.API;return Xt.call(this,()=>{const n=this.getSelection(!0);let i=new we;if(n==null)return i;if(this.scroll.query(e,Ee.BLOCK))i=this.editor.formatLine(n.index,n.length,{[e]:t});else{if(n.length===0)return this.selection.format(e,t),i;i=this.editor.formatText(n.index,n.length,{[e]:t})}return this.setSelection(n,xe.sources.SILENT),i},s)}formatLine(e,t,s,n,i){let o;return[e,t,o,i]=va(e,t,s,n,i),Xt.call(this,()=>this.editor.formatLine(e,t,o),i,e,0)}formatText(e,t,s,n,i){let o;return[e,t,o,i]=va(e,t,s,n,i),Xt.call(this,()=>this.editor.formatText(e,t,o),i,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof e=="number"?s=this.selection.getBounds(e,t):s=this.selection.getBounds(e.index,e.length),!s)return null;const n=this.container.getBoundingClientRect();return{bottom:s.bottom-n.top,height:s.height,left:s.left-n.left,right:s.right-n.left,top:s.top-n.top,width:s.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=va(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=va(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=va(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:re.sources.API;return Xt.call(this,()=>this.editor.insertEmbed(e,t,s),n,e)}insertText(e,t,s,n,i){let o;return[e,,o,i]=va(e,0,s,n,i),Xt.call(this,()=>this.editor.insertText(e,t,o),i,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,s){return[e,t,,s]=va(e,t,s),Xt.call(this,()=>this.editor.removeFormat(e,t),s,e)}scrollRectIntoView(e){V_(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xe.sources.API;return Xt.call(this,()=>{e=new we(e);const s=this.getLength(),n=this.editor.deleteText(0,s),i=this.editor.insertContents(0,e),o=this.editor.deleteText(this.getLength()-1,1);return n.compose(i).compose(o)},t)}setSelection(e,t,s){e==null?this.selection.setRange(null,t||re.sources.API):([e,t,,s]=va(e,t,s),this.selection.setRange(new Ga(Math.max(0,e),t),s),s!==xe.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xe.sources.API;const s=new we().insert(e);return this.setContents(s,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xe.sources.USER;const t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xe.sources.API;return Xt.call(this,()=>(e=new we(e),this.editor.applyDelta(e)),t,!0)}}function wr(l){return typeof l=="string"?document.querySelector(l):l}function Si(l){return Object.entries(l??{}).reduce((e,t)=>{let[s,n]=t;return{...e,[s]:n===!0?{}:n}},{})}function Tr(l){return Object.fromEntries(Object.entries(l).filter(e=>e[1]!==void 0))}function j_(l,e){const t=wr(l);if(!t)throw new Error("Invalid Quill container");const n=!e.theme||e.theme===re.DEFAULTS.theme?Ms:re.import(`themes/${e.theme}`);if(!n)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:i,...o}=re.DEFAULTS,{modules:r,...c}=n.DEFAULTS;let d=Si(e.modules);d!=null&&d.toolbar&&d.toolbar.constructor!==Object&&(d={...d,toolbar:{container:d.toolbar}});const f=Ia({},Si(i),Si(r),d),v={...o,...Tr(c),...Tr(e)};let g=e.registry;return g?e.formats&&Ls.warn('Ignoring "formats" option because "registry" is specified'):g=e.formats?U_(e.formats,v.registry,Ls):v.registry,{...v,registry:g,container:t,theme:n,modules:Object.entries(f).reduce((b,T)=>{let[C,_]=T;if(!_)return b;const S=re.import(`modules/${C}`);return S==null?(Ls.error(`Cannot load ${C} module. Are you sure you registered it?`),b):{...b,[C]:Ia({},S.DEFAULTS||{},_)}},{}),bounds:wr(v.bounds)}}function Xt(l,e,t,s){if(!this.isEnabled()&&e===xe.sources.USER&&!this.allowReadOnlyEdits)return new we;let n=t==null?null:this.getSelection();const i=this.editor.delta,o=l();if(n!=null&&(t===!0&&(t=n.index),s==null?n=Sr(n,o,e):s!==0&&(n=Sr(n,t,s,e)),this.setSelection(n,xe.sources.SILENT)),o.length()>0){const r=[xe.events.TEXT_CHANGE,o,i,e];this.emitter.emit(xe.events.EDITOR_CHANGE,...r),e!==xe.sources.SILENT&&this.emitter.emit(...r)}return o}function va(l,e,t,s,n){let i={};return typeof l.index=="number"&&typeof l.length=="number"?typeof e!="number"?(n=s,s=t,t=e,e=l.length,l=l.index):(e=l.length,l=l.index):typeof e!="number"&&(n=s,s=t,t=e,e=0),typeof t=="object"?(i=t,n=s):typeof t=="string"&&(s!=null?i[t]=s:n=t),n=n||xe.sources.API,[l,e,i,n]}function Sr(l,e,t,s){const n=typeof t=="number"?t:0;if(l==null)return null;let i,o;return e&&typeof e.transformPosition=="function"?[i,o]=[l.index,l.index+l.length].map(r=>e.transformPosition(r,s!==xe.sources.USER)):[i,o]=[l.index,l.index+l.length].map(r=>r<e||r===e&&s===xe.sources.USER?r:n>=0?r+n:Math.max(e,r+n)),new Ga(i,o-i)}class ls extends xn{}function Er(l){return l instanceof _t||l instanceof zt}function Lr(l){return typeof l.updateContent=="function"}class z_ extends vo{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=_t;static allowedChildren=[_t,zt,ls];constructor(e,t,s){let{emitter:n}=s;super(e,t),this.emitter=n,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",i=>this.handleDragStart(i))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(xe.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(xe.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(xe.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){const[s,n]=this.line(e),[i]=this.line(e+t);if(super.deleteAt(e,t),i!=null&&s!==i&&n>0){if(s instanceof zt||i instanceof zt){this.optimize();return}const o=i.children.head instanceof sa?null:i.children.head;s.moveChildren(i,o),s.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,s,n){super.formatAt(e,t,s,n),this.optimize()}insertAt(e,t,s){if(e>=this.length())if(s==null||this.scroll.query(t,Ee.BLOCK)==null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n),s==null&&t.endsWith(`
`)?n.insertAt(0,t.slice(0,-1),s):n.insertAt(0,t,s)}else{const n=this.scroll.create(t,s);this.appendChild(n)}else super.insertAt(e,t,s);this.optimize()}insertBefore(e,t){if(e.statics.scope===Ee.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(e),super.insertBefore(s,t)}else super.insertBefore(e,t)}insertContents(e,t){const s=this.deltaToRenderBlocks(t.concat(new we().insert(`
`))),n=s.pop();if(n==null)return;this.batchStart();const i=s.shift();if(i){const c=i.type==="block"&&(i.delta.length()===0||!this.descendant(zt,e)[0]&&e<this.length()),d=i.type==="block"?i.delta:new we().insert({[i.key]:i.value});Ei(this,e,d);const f=i.type==="block"?1:0,v=e+d.length()+f;c&&this.insertAt(v-1,`
`);const g=Ut(this.line(e)[0]),b=Ot.exports.AttributeMap.diff(g,i.attributes)||{};Object.keys(b).forEach(T=>{this.formatAt(v-1,1,T,b[T])}),e=v}let[o,r]=this.children.find(e);if(s.length&&(o&&(o=o.split(r),r=0),s.forEach(c=>{if(c.type==="block"){const d=this.createBlock(c.attributes,o||void 0);Ei(d,0,c.delta)}else{const d=this.create(c.key,c.value);this.insertBefore(d,o||void 0),Object.keys(c.attributes).forEach(f=>{d.format(f,c.attributes[f])})}})),n.type==="block"&&n.delta.length()){const c=o?o.offset(o.scroll)+r:this.length();Ei(this,c,n.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const t=this.path(e).pop();if(!t)return[null,-1];const[s,n]=t;return s instanceof xt?[s,n]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(Er,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const s=(n,i,o)=>{let r=[],c=o;return n.children.forEachAt(i,o,(d,f,v)=>{Er(d)?r.push(d):d instanceof xn&&(r=r.concat(s(d,f,c))),c-=v}),r};return s(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(xe.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=xe.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(s=>{let{target:n}=s;const i=this.find(n,!0);return i&&!Lr(i)}),e.length>0&&this.emitter.emit(xe.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(xe.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,s){const[n]=this.descendant(i=>i instanceof zt,e);n&&n.statics.blotName===t&&Lr(n)&&n.updateContent(s)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const t=[];let s=new we;return e.forEach(n=>{const i=n?.insert;if(!!i)if(typeof i=="string"){const o=i.split(`
`);o.slice(0,-1).forEach(c=>{s.insert(c,n.attributes),t.push({type:"block",delta:s,attributes:n.attributes??{}}),s=new we});const r=o[o.length-1];r&&s.insert(r,n.attributes)}else{const o=Object.keys(i)[0];if(!o)return;this.query(o,Ee.INLINE)?s.push(n):(s.length()&&t.push({type:"block",delta:s,attributes:{}}),s=new we,t.push({type:"blockEmbed",key:o,value:i[o],attributes:n.attributes??{}}))}}),s.length()&&t.push({type:"block",delta:s,attributes:{}}),t}createBlock(e,t){let s;const n={};Object.entries(e).forEach(r=>{let[c,d]=r;this.query(c,Ee.BLOCK&Ee.BLOT)!=null?s=c:n[c]=d});const i=this.create(s||this.statics.defaultChild.blotName,s?e[s]:void 0);this.insertBefore(i,t||void 0);const o=i.length();return Object.entries(n).forEach(r=>{let[c,d]=r;i.formatAt(0,o,c,d)}),i}}function Ei(l,e,t){t.reduce((s,n)=>{const i=Ot.exports.Op.length(n);let o=n.attributes||{};if(n.insert!=null){if(typeof n.insert=="string"){const r=n.insert;l.insertAt(s,r);const[c]=l.descendant(xt,s),d=Ut(c);o=Ot.exports.AttributeMap.diff(d,o)||{}}else if(typeof n.insert=="object"){const r=Object.keys(n.insert)[0];if(r==null)return s;if(l.insertAt(s,r,n.insert[r]),l.scroll.query(r,Ee.INLINE)!=null){const[d]=l.descendant(xt,s),f=Ut(d);o=Ot.exports.AttributeMap.diff(f,o)||{}}}}return Object.keys(o).forEach(r=>{l.formatAt(s,i,r,o[r])}),s+i},e)}const xo={scope:Ee.BLOCK,whitelist:["right","center","justify"]},Y_=new ua("align","align",xo),Uc=new aa("align","ql-align",xo),jc=new Fa("align","text-align",xo);class zc extends Fa{value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(n=>`00${parseInt(n,10).toString(16)}`.slice(-2)).join("")}`):t}}const W_=new aa("color","ql-color",{scope:Ee.INLINE}),wo=new zc("color","color",{scope:Ee.INLINE}),H_=new aa("background","ql-bg",{scope:Ee.INLINE}),To=new zc("background","background-color",{scope:Ee.INLINE});class ns extends ls{static create(e){const t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${En(this.code(e,t))}
</pre>`}}class $t extends _t{static TAB="  ";static register(){re.register(ns)}}class So extends Lt{}So.blotName="code";So.tagName="CODE";$t.blotName="code-block";$t.className="ql-code-block";$t.tagName="DIV";ns.blotName="code-block-container";ns.className="ql-code-block-container";ns.tagName="DIV";ns.allowedChildren=[$t];$t.allowedChildren=[ta,sa,Qt];$t.requiredContainer=ns;const Eo={scope:Ee.BLOCK,whitelist:["rtl"]},Yc=new ua("direction","dir",Eo),Wc=new aa("direction","ql-direction",Eo),Hc=new Fa("direction","direction",Eo),Zc={scope:Ee.INLINE,whitelist:["serif","monospace"]},Gc=new aa("font","ql-font",Zc);class Z_ extends Fa{value(e){return super.value(e).replace(/["']/g,"")}}const Jc=new Z_("font","font-family",Zc),Xc=new aa("size","ql-size",{scope:Ee.INLINE,whitelist:["small","large","huge"]}),Qc=new Fa("size","font-size",{scope:Ee.INLINE,whitelist:["10px","18px","32px"]}),G_=xa("quill:keyboard"),J_=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Ln extends ma{static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!t[s]!==e[s]&&t[s]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=Q_(e);if(n==null){G_.warn("Attempted to add invalid keyboard binding",n);return}typeof t=="function"&&(t={handler:t}),typeof s=="function"&&(s={handler:s}),(Array.isArray(n.key)?n.key:[n.key]).forEach(o=>{const r={...n,key:o,...t,...s};this.bindings[r.key]=this.bindings[r.key]||[],this.bindings[r.key].push(r)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const n=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(S=>Ln.match(e,S));if(n.length===0)return;const i=re.find(e.target,!0);if(i&&i.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;const[r,c]=this.quill.getLine(o.index),[d,f]=this.quill.getLeaf(o.index),[v,g]=o.length===0?[d,f]:this.quill.getLeaf(o.index+o.length),b=d instanceof rn?d.value().slice(0,f):"",T=v instanceof rn?v.value().slice(g):"",C={collapsed:o.length===0,empty:o.length===0&&r.length()<=1,format:this.quill.getFormat(o),line:r,offset:c,prefix:b,suffix:T,event:e};n.some(S=>{if(S.collapsed!=null&&S.collapsed!==C.collapsed||S.empty!=null&&S.empty!==C.empty||S.offset!=null&&S.offset!==C.offset)return!1;if(Array.isArray(S.format)){if(S.format.every(P=>C.format[P]==null))return!1}else if(typeof S.format=="object"&&!Object.keys(S.format).every(P=>S.format[P]===!0?C.format[P]!=null:S.format[P]===!1?C.format[P]==null:go(S.format[P],C.format[P])))return!1;return S.prefix!=null&&!S.prefix.test(C.prefix)||S.suffix!=null&&!S.suffix.test(C.suffix)?!1:S.handler.call(this,o,C,S)!==!0})&&e.preventDefault()})}handleBackspace(e,t){const s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let n={};const[i]=this.quill.getLine(e.index);let o=new we().retain(e.index-s).delete(s);if(t.offset===0){const[r]=this.quill.getLine(e.index-1);if(r&&!(r.statics.blotName==="block"&&r.length()<=1)){const d=i.formats(),f=this.quill.getFormat(e.index-1,1);if(n=Ot.exports.AttributeMap.diff(d,f)||{},Object.keys(n).length>0){const v=new we().retain(e.index+i.length()-2).retain(1,n);o=o.compose(v)}}}this.quill.updateContents(o,re.sources.USER),this.quill.focus()}handleDelete(e,t){const s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-s)return;let n={};const[i]=this.quill.getLine(e.index);let o=new we().retain(e.index).delete(s);if(t.offset>=i.length()-1){const[r]=this.quill.getLine(e.index+1);if(r){const c=i.formats(),d=this.quill.getFormat(e.index,1);n=Ot.exports.AttributeMap.diff(c,d)||{},Object.keys(n).length>0&&(o=o.retain(r.length()-1).retain(1,n))}}this.quill.updateContents(o,re.sources.USER),this.quill.focus()}handleDeleteRange(e){Lo({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){const s=Object.keys(t.format).reduce((i,o)=>(this.quill.scroll.query(o,Ee.BLOCK)&&!Array.isArray(t.format[o])&&(i[o]=t.format[o]),i),{}),n=new we().retain(e.index).delete(e.length).insert(`
`,s);this.quill.updateContents(n,re.sources.USER),this.quill.setSelection(e.index+1,re.sources.SILENT),this.quill.focus()}}const X_={bindings:{bold:Li("bold"),italic:Li("italic"),underline:Li("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(l,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",re.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(l,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",re.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(l,e){e.format.indent!=null?this.quill.format("indent","-1",re.sources.USER):e.format.list!=null&&this.quill.format("list",!1,re.sources.USER)}},"indent code-block":Ar(!0),"outdent code-block":Ar(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(l){this.quill.deleteText(l.index-1,1,re.sources.USER)}},tab:{key:"Tab",handler(l,e){if(e.format.table)return!0;this.quill.history.cutoff();const t=new we().retain(l.index).delete(l.length).insert("	");return this.quill.updateContents(t,re.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(l.index+1,re.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,re.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(l,e){const t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(l.index,l.length,t,re.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(l){const[e,t]=this.quill.getLine(l.index),s={...e.formats(),list:"checked"},n=new we().retain(l.index).insert(`
`,s).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(n,re.sources.USER),this.quill.setSelection(l.index+1,re.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(l,e){const[t,s]=this.quill.getLine(l.index),n=new we().retain(l.index).insert(`
`,e.format).retain(t.length()-s-1).retain(1,{header:null});this.quill.updateContents(n,re.sources.USER),this.quill.setSelection(l.index+1,re.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(l){const e=this.quill.getModule("table");if(e){const[t,s,n,i]=e.getTable(l),o=K_(t,s,n,i);if(o==null)return;let r=t.offset();if(o<0){const c=new we().retain(r).insert(`
`);this.quill.updateContents(c,re.sources.USER),this.quill.setSelection(l.index+1,l.length,re.sources.SILENT)}else if(o>0){r+=t.length();const c=new we().retain(r).insert(`
`);this.quill.updateContents(c,re.sources.USER),this.quill.setSelection(r,re.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(l,e){const{event:t,line:s}=e,n=s.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(n-1,re.sources.USER):this.quill.setSelection(n+s.length(),re.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(l,e){if(this.quill.scroll.query("list")==null)return!0;const{length:t}=e.prefix,[s,n]=this.quill.getLine(l.index);if(n>t)return!0;let i;switch(e.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(l.index," ",re.sources.USER),this.quill.history.cutoff();const o=new we().retain(l.index-n).delete(t+1).retain(s.length()-2-n).retain(1,{list:i});return this.quill.updateContents(o,re.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(l.index-t,re.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(l){const[e,t]=this.quill.getLine(l.index);let s=2,n=e;for(;n!=null&&n.length()<=1&&n.formats()["code-block"];)if(n=n.prev,s-=1,s<=0){const i=new we().retain(l.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,re.sources.USER),this.quill.setSelection(l.index-1,re.sources.SILENT),!1}return!0}},"embed left":Wl("ArrowLeft",!1),"embed left shift":Wl("ArrowLeft",!0),"embed right":Wl("ArrowRight",!1),"embed right shift":Wl("ArrowRight",!0),"table down":$r(!1),"table up":$r(!0)}};Ln.DEFAULTS=X_;function Ar(l){return{key:"Tab",shiftKey:!l,format:{"code-block":!0},handler(e,t){let{event:s}=t;const n=this.quill.scroll.query("code-block"),{TAB:i}=n;if(e.length===0&&!s.shiftKey){this.quill.insertText(e.index,i,re.sources.USER),this.quill.setSelection(e.index+i.length,re.sources.SILENT);return}const o=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:r,length:c}=e;o.forEach((d,f)=>{l?(d.insertAt(0,i),f===0?r+=i.length:c+=i.length):d.domNode.textContent.startsWith(i)&&(d.deleteAt(0,i.length),f===0?r-=i.length:c-=i.length)}),this.quill.update(re.sources.USER),this.quill.setSelection(r,c,re.sources.SILENT)}}}function Wl(l,e){return{key:l,shiftKey:e,altKey:null,[l==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:n}=s;l==="ArrowRight"&&(n+=s.length+1);const[i]=this.quill.getLeaf(n);return i instanceof Ft?(l==="ArrowLeft"?e?this.quill.setSelection(s.index-1,s.length+1,re.sources.USER):this.quill.setSelection(s.index-1,re.sources.USER):e?this.quill.setSelection(s.index,s.length+1,re.sources.USER):this.quill.setSelection(s.index+s.length+1,re.sources.USER),!1):!0}}}function Li(l){return{key:l[0],shortKey:!0,handler(e,t){this.quill.format(l,!t.format[l],re.sources.USER)}}}function $r(l){return{key:l?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){const s=l?"prev":"next",n=t.line,i=n.parent[s];if(i!=null){if(i.statics.blotName==="table-row"){let o=i.children.head,r=n;for(;r.prev!=null;)r=r.prev,o=o.next;const c=o.offset(this.quill.scroll)+Math.min(t.offset,o.length()-1);this.quill.setSelection(c,0,re.sources.USER)}}else{const o=n.table()[s];o!=null&&(l?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,re.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,re.sources.USER))}return!1}}}function Q_(l){if(typeof l=="string"||typeof l=="number")l={key:l};else if(typeof l=="object")l=Ss(l);else return null;return l.shortKey&&(l[J_]=l.shortKey,delete l.shortKey),l}function Lo(l){let{quill:e,range:t}=l;const s=e.getLines(t);let n={};if(s.length>1){const i=s[0].formats(),o=s[s.length-1].formats();n=Ot.exports.AttributeMap.diff(o,i)||{}}e.deleteText(t,re.sources.USER),Object.keys(n).length>0&&e.formatLine(t.index,1,n,re.sources.USER),e.setSelection(t.index,re.sources.SILENT)}function K_(l,e,t,s){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?s===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const e1=/font-weight:\s*normal/,t1=["P","OL","UL"],Ir=l=>l&&t1.includes(l.tagName),a1=l=>{Array.from(l.querySelectorAll("br")).filter(e=>Ir(e.previousElementSibling)&&Ir(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},s1=l=>{Array.from(l.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(e1)).forEach(e=>{const t=l.createDocumentFragment();t.append(...e.childNodes),e.parentNode?.replaceChild(t,e)})};function l1(l){l.querySelector('[id^="docs-internal-guid-"]')&&(s1(l),a1(l))}const n1=/\bmso-list:[^;]*ignore/i,i1=/\bmso-list:[^;]*\bl(\d+)/i,o1=/\bmso-list:[^;]*\blevel(\d+)/i,r1=(l,e)=>{const t=l.getAttribute("style"),s=t?.match(i1);if(!s)return null;const n=Number(s[1]),i=t?.match(o1),o=i?Number(i[1]):1,r=new RegExp(`@list l${n}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),c=e.match(r),d=c&&c[1]==="bullet"?"bullet":"ordered";return{id:n,indent:o,type:d,element:l}},c1=l=>{const e=Array.from(l.querySelectorAll("[style*=mso-list]")),t=[],s=[];e.forEach(o=>{(o.getAttribute("style")||"").match(n1)?t.push(o):s.push(o)}),t.forEach(o=>o.parentNode?.removeChild(o));const n=l.documentElement.innerHTML,i=s.map(o=>r1(o,n)).filter(o=>o);for(;i.length;){const o=[];let r=i.shift();for(;r;)o.push(r),r=i.length&&i[0]?.element===r.element.nextElementSibling&&i[0].id===r.id?i.shift():null;const c=document.createElement("ul");o.forEach(v=>{const g=document.createElement("li");g.setAttribute("data-list",v.type),v.indent>1&&g.setAttribute("class",`ql-indent-${v.indent-1}`),g.innerHTML=v.element.innerHTML,c.appendChild(g)});const d=o[0]?.element,{parentNode:f}=d??{};d&&f?.replaceChild(c,d),o.slice(1).forEach(v=>{let{element:g}=v;f?.removeChild(g)})}};function u1(l){l.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&c1(l)}const d1=[u1,l1],m1=l=>{l.documentElement&&d1.forEach(e=>{e(l)})},p1=xa("quill:clipboard"),f1=[[Node.TEXT_NODE,E1],[Node.TEXT_NODE,Or],["br",b1],[Node.ELEMENT_NODE,Or],[Node.ELEMENT_NODE,y1],[Node.ELEMENT_NODE,_1],[Node.ELEMENT_NODE,T1],["li",x1],["ol, ul",w1],["pre",k1],["tr",S1],["b",Ai("bold")],["i",Ai("italic")],["strike",Ai("strike")],["style",C1]],g1=[Y_,Yc].reduce((l,e)=>(l[e.keyName]=e,l),{}),Pr=[jc,To,wo,Hc,Jc,Qc].reduce((l,e)=>(l[e.keyName]=e,l),{});class h1 extends ma{static DEFAULTS={matchers:[]};constructor(e,t){super(e,t),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],f1.concat(this.options.matchers??[]).forEach(s=>{let[n,i]=s;this.addMatcher(n,i)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:s}=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n[$t.blotName])return new we().insert(s||"",{[$t.blotName]:n[$t.blotName]});if(!t)return new we().insert(s||"",n);const i=this.convertHTML(t);return Cl(i,`
`)&&(i.ops[i.ops.length-1].attributes==null||n.table)?i.compose(new we().retain(i.length()-1).delete(1)):i}normalizeHTML(e){m1(e)}convertHTML(e){const t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);const s=t.body,n=new WeakMap,[i,o]=this.prepareMatching(s,n);return Ao(this.quill.scroll,s,i,o,n)}dangerouslyPasteHTML(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:re.sources.API;if(typeof e=="string"){const n=this.convert({html:e,text:""});this.quill.setContents(n,t),this.quill.setSelection(0,re.sources.SILENT)}else{const n=this.convert({html:t,text:""});this.quill.updateContents(new we().retain(e).concat(n),s),this.quill.setSelection(e+n.length(),re.sources.SILENT)}}onCaptureCopy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[s]=this.quill.selection.getRange();if(s==null)return;const{html:n,text:i}=this.onCopy(s,t);e.clipboardData?.setData("text/plain",i),e.clipboardData?.setData("text/html",n),t&&Lo({range:s,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const t=this.quill.getSelection(!0);if(t==null)return;const s=e.clipboardData?.getData("text/html");let n=e.clipboardData?.getData("text/plain");if(!s&&!n){const o=e.clipboardData?.getData("text/uri-list");o&&(n=this.normalizeURIList(o))}const i=Array.from(e.clipboardData?.files||[]);if(!s&&i.length>0){this.quill.uploader.upload(t,i);return}if(s&&i.length>0){const o=new DOMParser().parseFromString(s,"text/html");if(o.body.childElementCount===1&&o.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(t,i);return}}this.onPaste(t,{html:s,text:n})}onCopy(e){const t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:s,html:n}=t;const i=this.quill.getFormat(e.index),o=this.convert({text:s,html:n},i);p1.log("onPaste",o,{text:s,html:n});const r=new we().retain(e.index).delete(e.length).concat(o);this.quill.updateContents(r,re.sources.USER),this.quill.setSelection(r.length()-e.length,re.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){const s=[],n=[];return this.matchers.forEach(i=>{const[o,r]=i;switch(o){case Node.TEXT_NODE:n.push(r);break;case Node.ELEMENT_NODE:s.push(r);break;default:Array.from(e.querySelectorAll(o)).forEach(c=>{t.has(c)?t.get(c)?.push(r):t.set(c,[r])});break}}),[s,n]}}function is(l,e,t,s){return s.query(e)?l.reduce((n,i)=>{if(!i.insert)return n;if(i.attributes&&i.attributes[e])return n.push(i);const o=t?{[e]:t}:{};return n.insert(i.insert,{...o,...i.attributes})},new we):l}function Cl(l,e){let t="";for(let s=l.ops.length-1;s>=0&&t.length<e.length;--s){const n=l.ops[s];if(typeof n.insert!="string")break;t=n.insert+t}return t.slice(-1*e.length)===e}function Aa(l,e){if(!(l instanceof Element))return!1;const t=e.query(l);return t&&t.prototype instanceof Ft?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(l.tagName.toLowerCase())}function v1(l,e){return l.previousElementSibling&&l.nextElementSibling&&!Aa(l.previousElementSibling,e)&&!Aa(l.nextElementSibling,e)}const Hl=new WeakMap;function Kc(l){return l==null?!1:(Hl.has(l)||(l.tagName==="PRE"?Hl.set(l,!0):Hl.set(l,Kc(l.parentNode))),Hl.get(l))}function Ao(l,e,t,s,n){return e.nodeType===e.TEXT_NODE?s.reduce((i,o)=>o(e,i,l),new we):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((i,o)=>{let r=Ao(l,o,t,s,n);return o.nodeType===e.ELEMENT_NODE&&(r=t.reduce((c,d)=>d(o,c,l),r),r=(n.get(o)||[]).reduce((c,d)=>d(o,c,l),r)),i.concat(r)},new we):new we}function Ai(l){return(e,t,s)=>is(t,l,!0,s)}function _1(l,e,t){const s=ua.keys(l),n=aa.keys(l),i=Fa.keys(l),o={};return s.concat(n).concat(i).forEach(r=>{let c=t.query(r,Ee.ATTRIBUTE);c!=null&&(o[c.attrName]=c.value(l),o[c.attrName])||(c=g1[r],c!=null&&(c.attrName===r||c.keyName===r)&&(o[c.attrName]=c.value(l)||void 0),c=Pr[r],c!=null&&(c.attrName===r||c.keyName===r)&&(c=Pr[r],o[c.attrName]=c.value(l)||void 0))}),Object.entries(o).reduce((r,c)=>{let[d,f]=c;return is(r,d,f,t)},e)}function y1(l,e,t){const s=t.query(l);if(s==null)return e;if(s.prototype instanceof Ft){const n={},i=s.value(l);if(i!=null)return n[s.blotName]=i,new we().insert(n,s.formats(l,t))}else if(s.prototype instanceof ul&&!Cl(e,`
`)&&e.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return is(e,s.blotName,s.formats(l,t),t);return e}function b1(l,e){return Cl(e,`
`)||e.insert(`
`),e}function k1(l,e,t){const s=t.query("code-block"),n=s&&"formats"in s&&typeof s.formats=="function"?s.formats(l,t):!0;return is(e,"code-block",n,t)}function C1(){return new we}function x1(l,e,t){const s=t.query(l);if(s==null||s.blotName!=="list"||!Cl(e,`
`))return e;let n=-1,i=l.parentNode;for(;i!=null;)["OL","UL"].includes(i.tagName)&&(n+=1),i=i.parentNode;return n<=0?e:e.reduce((o,r)=>r.insert?r.attributes&&typeof r.attributes.indent=="number"?o.push(r):o.insert(r.insert,{indent:n,...r.attributes||{}}):o,new we)}function w1(l,e,t){const s=l;let n=s.tagName==="OL"?"ordered":"bullet";const i=s.getAttribute("data-checked");return i&&(n=i==="true"?"checked":"unchecked"),is(e,"list",n,t)}function Or(l,e,t){if(!Cl(e,`
`)){if(Aa(l,t)&&(l.childNodes.length>0||l instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&l.nextSibling){let s=l.nextSibling;for(;s!=null;){if(Aa(s,t))return e.insert(`
`);const n=t.query(s);if(n&&n.prototype instanceof zt)return e.insert(`
`);s=s.firstChild}}}return e}function T1(l,e,t){const s={},n=l.style||{};return n.fontStyle==="italic"&&(s.italic=!0),n.textDecoration==="underline"&&(s.underline=!0),n.textDecoration==="line-through"&&(s.strike=!0),(n.fontWeight?.startsWith("bold")||parseInt(n.fontWeight,10)>=700)&&(s.bold=!0),e=Object.entries(s).reduce((i,o)=>{let[r,c]=o;return is(i,r,c,t)},e),parseFloat(n.textIndent||0)>0?new we().insert("	").concat(e):e}function S1(l,e,t){const s=l.parentElement?.tagName==="TABLE"?l.parentElement:l.parentElement?.parentElement;if(s!=null){const i=Array.from(s.querySelectorAll("tr")).indexOf(l)+1;return is(e,"table",i,t)}return e}function E1(l,e,t){let s=l.data;if(l.parentElement?.tagName==="O:P")return e.insert(s.trim());if(!Kc(l)){if(s.trim().length===0&&s.includes(`
`)&&!v1(l,t))return e;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(l.previousSibling==null&&l.parentElement!=null&&Aa(l.parentElement,t)||l.previousSibling instanceof Element&&Aa(l.previousSibling,t))&&(s=s.replace(/^ /,"")),(l.nextSibling==null&&l.parentElement!=null&&Aa(l.parentElement,t)||l.nextSibling instanceof Element&&Aa(l.nextSibling,t))&&(s=s.replace(/ $/,"")),s=s.replaceAll("\xA0"," ")}return e.insert(s)}class L1 extends ma{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,t){super(e,t),this.quill.on(re.events.EDITOR_CHANGE,(s,n,i,o)=>{s===re.events.SELECTION_CHANGE?n&&o!==re.sources.SILENT&&(this.currentRange=n):s===re.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===re.sources.USER?this.record(n,i):this.transform(n)),this.currentRange=Xi(this.currentRange,n))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(e,t){if(this.stack[e].length===0)return;const s=this.stack[e].pop();if(!s)return;const n=this.quill.getContents(),i=s.delta.invert(n);this.stack[t].push({delta:i,range:Xi(s.range,i)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,re.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,t){if(e.ops.length===0)return;this.stack.redo=[];let s=e.invert(t),n=this.currentRange;const i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(s=s.compose(o.delta),n=o.range)}else this.lastRecorded=i;s.length()!==0&&(this.stack.undo.push({delta:s,range:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){Dr(this.stack.undo,e),Dr(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,re.sources.USER);else{const t=$1(this.quill.scroll,e.delta);this.quill.setSelection(t,re.sources.USER)}}}function Dr(l,e){let t=e;for(let s=l.length-1;s>=0;s-=1){const n=l[s];l[s]={delta:t.transform(n.delta,!0),range:n.range&&Xi(n.range,t)},t=n.delta.transform(t),l[s].delta.length()===0&&l.splice(s,1)}}function A1(l,e){const t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(s=>l.query(s,Ee.BLOCK)!=null):!1}function $1(l,e){const t=e.reduce((n,i)=>n+(i.delete||0),0);let s=e.length()-t;return A1(l,e)&&(s-=1),s}function Xi(l,e){if(!l)return l;const t=e.transformPosition(l.index),s=e.transformPosition(l.index+l.length);return{index:t,length:s-t}}class eu extends ma{constructor(e,t){super(e,t),e.root.addEventListener("drop",s=>{s.preventDefault();let n=null;if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(s.clientX,s.clientY);n=document.createRange(),n.setStart(o.offsetNode,o.offset),n.setEnd(o.offsetNode,o.offset)}const i=n&&e.selection.normalizeNative(n);if(i){const o=e.selection.normalizedToRange(i);s.dataTransfer?.files&&this.upload(o,s.dataTransfer.files)}})}upload(e,t){const s=[];Array.from(t).forEach(n=>{n&&this.options.mimetypes?.includes(n.type)&&s.push(n)}),s.length>0&&this.options.handler.call(this,e,s)}}eu.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(l,e){if(!this.quill.scroll.query("image"))return;const t=e.map(s=>new Promise(n=>{const i=new FileReader;i.onload=()=>{n(i.result)},i.readAsDataURL(s)}));Promise.all(t).then(s=>{const n=s.reduce((i,o)=>i.insert({image:o}),new we().retain(l.index).delete(l.length));this.quill.updateContents(n,xe.sources.USER),this.quill.setSelection(l.index+s.length,xe.sources.SILENT)})}};const I1=["insertText","insertReplacementText"];class P1 extends ma{constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||e.on(re.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){Lo({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){const s=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new we().retain(e.index).insert(t,s),re.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,re.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!I1.includes(e.inputType))return;const t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;const s=O1(e);if(s==null)return;const n=this.quill.selection.normalizeNative(t),i=n?this.quill.selection.normalizedToRange(n):null;i&&this.replaceText(i,s)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function O1(l){return typeof l.data=="string"?l.data:l.dataTransfer?.types.includes("text/plain")?l.dataTransfer.getData("text/plain"):null}const D1=/Mac/i.test(navigator.platform),N1=100,M1=l=>!!(l.key==="ArrowLeft"||l.key==="ArrowRight"||l.key==="ArrowUp"||l.key==="ArrowDown"||l.key==="Home"||D1&&l.key==="a"&&l.ctrlKey===!0);class B1 extends ma{isListening=!1;selectionChangeDeadline=0;constructor(e,t){super(e,t),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,t){let{line:s,event:n}=t;if(!(s instanceof ea)||!s.uiNode)return!0;const i=getComputedStyle(s.domNode).direction==="rtl";return i&&n.key!=="ArrowRight"||!i&&n.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(n.shiftKey?1:0),re.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&M1(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+N1,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const t=e.getRangeAt(0);if(t.collapsed!==!0||t.startOffset!==0)return;const s=this.quill.scroll.find(t.startContainer);if(!(s instanceof ea)||!s.uiNode)return;const n=document.createRange();n.setStartAfter(s.uiNode),n.setEndAfter(s.uiNode),e.removeAllRanges(),e.addRange(n)}}re.register({"blots/block":_t,"blots/block/embed":zt,"blots/break":sa,"blots/container":ls,"blots/cursor":Qt,"blots/embed":Co,"blots/inline":Lt,"blots/scroll":z_,"blots/text":ta,"modules/clipboard":h1,"modules/history":L1,"modules/keyboard":Ln,"modules/uploader":eu,"modules/input":P1,"modules/uiNode":B1});class F1 extends aa{add(e,t){let s=0;if(t==="+1"||t==="-1"){const n=this.value(e)||0;s=t==="+1"?n+1:n-1}else typeof t=="number"&&(s=t);return s===0?(this.remove(e),!0):super.add(e,s.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}}const V1=new F1("indent","ql-indent",{scope:Ee.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class R1 extends _t{static blotName="blockquote";static tagName="blockquote"}class q1 extends _t{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class xl extends ls{}xl.blotName="list-container";xl.tagName="OL";class wl extends _t{static create(e){const t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){re.register(xl)}constructor(e,t){super(e,t);const s=t.ownerDocument.createElement("span"),n=i=>{if(!e.isEnabled())return;const o=this.statics.formats(t,e);o==="checked"?(this.format("list","unchecked"),i.preventDefault()):o==="unchecked"&&(this.format("list","checked"),i.preventDefault())};s.addEventListener("mousedown",n),s.addEventListener("touchstart",n),this.attachUI(s)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}}wl.blotName="list";wl.tagName="LI";xl.allowedChildren=[wl];wl.requiredContainer=xl;class $o extends Lt{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class U1 extends $o{static blotName="italic";static tagName=["EM","I"]}class dn extends Lt{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return tu(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}}function tu(l,e){const t=document.createElement("a");t.href=l;const s=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(s)>-1}class j1 extends Lt{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class z1 extends $o{static blotName="strike";static tagName=["S","STRIKE"]}class Y1 extends Lt{static blotName="underline";static tagName="U"}class W1 extends Co{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const Nr=["alt","height","width"];class H1 extends Ft{static blotName="image";static tagName="IMG";static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return Nr.reduce((t,s)=>(e.hasAttribute(s)&&(t[s]=e.getAttribute(s)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return tu(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){Nr.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}}const Mr=["height","width"];class Z1 extends zt{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return Mr.reduce((t,s)=>(e.hasAttribute(s)&&(t[s]=e.getAttribute(s)),t),{})}static sanitize(e){return dn.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){Mr.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const el=new aa("code-token","hljs",{scope:Ee.INLINE});class ba extends Lt{static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains($t.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,s){super(e,t,s),el.add(this.domNode,s)}format(e,t){e!==ba.blotName?super.format(e,t):t?el.add(this.domNode,t):(el.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),el.value(this.domNode)||this.unwrap()}}ba.blotName="code-token";ba.className="ql-token";class jt extends $t{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),ba.blotName,!1),super.replaceWith(e,t)}}class sl extends ns{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===jt.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(e,t)}))}formatAt(e,t,s,n){s===jt.blotName&&(this.forceNext=!0),super.formatAt(e,t,s,n)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const n=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,i=jt.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==n){if(n.trim().length>0||this.cachedText==null){const o=this.children.reduce((c,d)=>c.concat(Vc(d,!1)),new we),r=e(n,i);o.diff(r).reduce((c,d)=>{let{retain:f,attributes:v}=d;return f?(v&&Object.keys(v).forEach(g=>{[jt.blotName,ba.blotName].includes(g)&&this.formatAt(c,f,g,v[g])}),c+f):c},0)}this.cachedText=n,this.forceNext=!1}}html(e,t){const[s]=this.children.find(e);return`<pre data-language="${s?jt.formats(s.domNode):"plain"}">
${En(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const t=jt.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}sl.allowedChildren=[jt];jt.requiredContainer=sl;jt.allowedChildren=[ba,Qt,ta,sa];const G1=(l,e,t)=>{if(typeof l.versionString=="string"){const s=l.versionString.split(".")[0];if(parseInt(s,10)>=11)return l.highlight(t,{language:e}).value}return l.highlight(e,t).value};class au extends ma{static register(){re.register(ba,!0),re.register(jt,!0),re.register(sl,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,n)=>{let{key:i}=n;return s[i]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(re.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof sl))return;const t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:n,label:i}=s;const o=t.ownerDocument.createElement("option");o.textContent=i,o.setAttribute("value",n),t.appendChild(o)}),t.addEventListener("change",()=>{e.format(jt.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=jt.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(re.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(re.sources.USER);const s=this.quill.getSelection();(e==null?this.quill.scroll.descendants(sl):[e]).forEach(i=>{i.highlight(this.highlightBlot,t)}),this.quill.update(re.sources.SILENT),s!=null&&this.quill.setSelection(s,re.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return En(e).split(`
`).reduce((n,i,o)=>(o!==0&&n.insert(`
`,{[$t.blotName]:t}),n.insert(i)),new we);const s=this.quill.root.ownerDocument.createElement("div");return s.classList.add($t.className),s.innerHTML=G1(this.options.hljs,t,e),Ao(this.quill.scroll,s,[(n,i)=>{const o=el.value(n);return o?i.compose(new we().retain(i.length(),{[ba.blotName]:o})):i}],[(n,i)=>n.data.split(`
`).reduce((o,r,c)=>(c!==0&&o.insert(`
`,{[$t.blotName]:t}),o.insert(r)),i)],new WeakMap)}}au.DEFAULTS={hljs:(()=>window.hljs)(),interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Kt extends _t{static blotName="table";static tagName="TD";static create(e){const t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",Io()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===Kt.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class Ja extends ls{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),t=this.children.tail.formats(),s=this.next.children.head.formats(),n=this.next.children.tail.formats();return e.table===t.table&&e.table===s.table&&e.table===n.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;const s=t.formats(),n=t.next.formats();if(s.table!==n.table){const i=this.splitAfter(t);i&&i.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class Pa extends ls{static blotName="table-body";static tagName="TBODY"}class mn extends ls{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(Ja),t=e.reduce((s,n)=>Math.max(n.children.length,s),0);e.forEach(s=>{new Array(t-s.children.length).fill(0).forEach(()=>{let n;s.children.head!=null&&(n=Kt.formats(s.children.head.domNode));const i=this.scroll.create(Kt.blotName,n);s.appendChild(i),i.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){const[t]=this.descendant(Pa);t==null||t.children.head==null||t.children.forEach(s=>{const n=s.children.at(e);n?.remove()})}insertColumn(e){const[t]=this.descendant(Pa);t==null||t.children.head==null||t.children.forEach(s=>{const n=s.children.at(e),i=Kt.formats(s.children.head.domNode),o=this.scroll.create(Kt.blotName,i);s.insertBefore(o,n)})}insertRow(e){const[t]=this.descendant(Pa);if(t==null||t.children.head==null)return;const s=Io(),n=this.scroll.create(Ja.blotName);t.children.head.children.forEach(()=>{const o=this.scroll.create(Kt.blotName,s);n.appendChild(o)});const i=t.children.at(e);t.insertBefore(n,i)}rows(){const e=this.children.head;return e==null?[]:e.children.map(t=>t)}}mn.allowedChildren=[Pa];Pa.requiredContainer=mn;Pa.allowedChildren=[Ja];Ja.requiredContainer=Pa;Ja.allowedChildren=[Kt];Kt.requiredContainer=Ja;function Io(){return`row-${Math.random().toString(36).slice(2,6)}`}class J1 extends ma{static register(){re.register(Kt),re.register(Ja),re.register(Pa),re.register(mn)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(mn).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(re.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(re.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const t=e.offset();e.remove(),this.quill.update(re.sources.USER),this.quill.setSelection(t,re.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[t,s]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==Kt.blotName)return[null,null,null,-1];const n=t.parent;return[n.parent.parent,n,t,s]}insertColumn(e){const t=this.quill.getSelection();if(!t)return;const[s,n,i]=this.getTable(t);if(i==null)return;const o=i.cellOffset();s.insertColumn(o+e),this.quill.update(re.sources.USER);let r=n.rowOffset();e===0&&(r+=1),this.quill.setSelection(t.index+r,t.length,re.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const t=this.quill.getSelection();if(!t)return;const[s,n,i]=this.getTable(t);if(i==null)return;const o=n.rowOffset();s.insertRow(o+e),this.quill.update(re.sources.USER),e>0?this.quill.setSelection(t,re.sources.SILENT):this.quill.setSelection(t.index+n.children.length,t.length,re.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){const s=this.quill.getSelection();if(s==null)return;const n=new Array(e).fill(0).reduce(i=>{const o=new Array(t).fill(`
`).join("");return i.insert(o,{table:Io()})},new we().retain(s.index));this.quill.updateContents(n,re.sources.USER),this.quill.setSelection(s.index,re.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(re.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(re.events.TEXT_CHANGE,(s,n,i)=>{i===re.sources.USER&&this.balanceTables()}),!0):!1)})}}const Br=xa("quill:toolbar");class Po extends ma{constructor(e,t){if(super(e,t),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),X1(s,this.options.container),e.container?.parentNode?.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){Br.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{const n=this.options.handlers?.[s];n&&this.addHandler(s,n)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(re.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(n=>n.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){Br.warn("ignoring attaching to nonexistent format",t,e);return}const s=e.tagName==="SELECT"?"change":"click";e.addEventListener(s,n=>{let i;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const r=e.options[e.selectedIndex];r.hasAttribute("selected")?i=!1:i=r.value||!1}else e.classList.contains("ql-active")?i=!1:i=e.value||!e.hasAttribute("value"),n.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,i);else if(this.quill.scroll.query(t).prototype instanceof Ft){if(i=prompt(`Enter ${t}`),!i)return;this.quill.updateContents(new we().retain(o.index).delete(o.length).insert({[t]:i}),re.sources.USER)}else this.quill.format(t,i,re.sources.USER);this.update(o)}),this.controls.push([t,e])}update(e){const t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(s=>{const[n,i]=s;if(i.tagName==="SELECT"){let o=null;if(e==null)o=null;else if(t[n]==null)o=i.querySelector("option[selected]");else if(!Array.isArray(t[n])){let r=t[n];typeof r=="string"&&(r=r.replace(/"/g,'\\"')),o=i.querySelector(`option[value="${r}"]`)}o==null?(i.value="",i.selectedIndex=-1):o.selected=!0}else if(e==null)i.classList.remove("ql-active"),i.setAttribute("aria-pressed","false");else if(i.hasAttribute("value")){const o=t[n],r=o===i.getAttribute("value")||o!=null&&o.toString()===i.getAttribute("value")||o==null&&!i.getAttribute("value");i.classList.toggle("ql-active",r),i.setAttribute("aria-pressed",r.toString())}else{const o=t[n]!=null;i.classList.toggle("ql-active",o),i.setAttribute("aria-pressed",o.toString())}})}}Po.DEFAULTS={};function Fr(l,e,t){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${e}`),s.setAttribute("aria-pressed","false"),t!=null?(s.value=t,s.setAttribute("aria-label",`${e}: ${t}`)):s.setAttribute("aria-label",e),l.appendChild(s)}function X1(l,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{const s=document.createElement("span");s.classList.add("ql-formats"),t.forEach(n=>{if(typeof n=="string")Fr(s,n);else{const i=Object.keys(n)[0],o=n[i];Array.isArray(o)?Q1(s,i,o):Fr(s,i,o)}}),l.appendChild(s)})}function Q1(l,e,t){const s=document.createElement("select");s.classList.add(`ql-${e}`),t.forEach(n=>{const i=document.createElement("option");n!==!1?i.setAttribute("value",String(n)):i.setAttribute("selected","selected"),s.appendChild(i)}),l.appendChild(s)}Po.DEFAULTS={container:null,handlers:{clean(){const l=this.quill.getSelection();if(l!=null)if(l.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,Ee.INLINE)!=null&&this.quill.format(t,!1,re.sources.USER)})}else this.quill.removeFormat(l.index,l.length,re.sources.USER)},direction(l){const{align:e}=this.quill.getFormat();l==="rtl"&&e==null?this.quill.format("align","right",re.sources.USER):!l&&e==="right"&&this.quill.format("align",!1,re.sources.USER),this.quill.format("direction",l,re.sources.USER)},indent(l){const e=this.quill.getSelection(),t=this.quill.getFormat(e),s=parseInt(t.indent||0,10);if(l==="+1"||l==="-1"){let n=l==="+1"?1:-1;t.direction==="rtl"&&(n*=-1),this.quill.format("indent",s+n,re.sources.USER)}},link(l){l===!0&&(l=prompt("Enter link URL:")),this.quill.format("link",l,re.sources.USER)},list(l){const e=this.quill.getSelection(),t=this.quill.getFormat(e);l==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,re.sources.USER):this.quill.format("list","unchecked",re.sources.USER):this.quill.format("list",l,re.sources.USER)}}};const K1='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',ey='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',ty='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',ay='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',sy='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',ly='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',ny='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',iy='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Vr='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',oy='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',ry='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',cy='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',uy='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',dy='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',my='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',py='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',fy='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',gy='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',hy='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',vy='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',_y='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',yy='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',by='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',ky='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',Cy='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',xy='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',wy='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Ty='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Sy='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Ey='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',Ly='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Ay='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',$y='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>';var pl={align:{"":K1,center:ey,right:ty,justify:ay},background:sy,blockquote:ly,bold:ny,clean:iy,code:Vr,"code-block":Vr,color:oy,direction:{"":ry,rtl:cy},formula:uy,header:{"1":dy,"2":my,"3":py,"4":fy,"5":gy,"6":hy},italic:vy,image:_y,indent:{"+1":yy,"-1":by},link:ky,list:{bullet:Cy,check:xy,ordered:wy},script:{sub:Ty,super:Sy},strike:Ey,table:Ly,underline:Ay,video:$y};const Iy='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let Rr=0;function qr(l,e){l.setAttribute(e,`${l.getAttribute(e)!=="true"}`)}class An{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),qr(this.label,"aria-expanded"),qr(this.options,"aria-hidden")}buildItem(e){const t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");const s=e.getAttribute("value");return s&&t.setAttribute("data-value",s),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.selectItem(t,!0),n.preventDefault();break;case"Escape":this.escape(),n.preventDefault();break}}),t}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=Iy,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${Rr}`,Rr+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{const s=this.buildItem(t);e.appendChild(s),t.selected===!0&&this.selectItem(s)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const s=this.container.querySelector(".ql-selected");e!==s&&(s?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);const t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}}class su extends An{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(e){const t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);const s=this.label.querySelector(".ql-color-label"),n=e&&e.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=n:s.style.fill=n)}}class lu extends An{constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=t[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);const s=e||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}}const Py=l=>{const{overflowY:e}=getComputedStyle(l,null);return e!=="visible"&&e!=="clip"};class nu{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Py(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const t=e.left+e.width/2-this.root.offsetWidth/2,s=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const n=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect();let o=0;if(i.right>n.right&&(o=n.right-i.right,this.root.style.left=`${t+o}px`),i.left<n.left&&(o=n.left-i.left,this.root.style.left=`${t+o}px`),i.bottom>n.bottom){const r=i.bottom-i.top,c=e.bottom-e.top+r;this.root.style.top=`${s-c}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Oy=[!1,"center","right","justify"],Dy=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Ny=[!1,"serif","monospace"],My=["1","2","3",!1],By=["small",!1,"large","huge"];class Tl extends Ms{constructor(e,t){super(e,t);const s=n=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(n.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(i=>{i.container.contains(n.target)||i.close()})};e.emitter.listenDOM("click",document.body,s)}addModule(e){const t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(i=>{if(!!i.startsWith("ql-")&&(i=i.slice(3),t[i]!=null))if(i==="direction")s.innerHTML=t[i][""]+t[i].rtl;else if(typeof t[i]=="string")s.innerHTML=t[i];else{const o=s.value||"";o!=null&&t[i][o]&&(s.innerHTML=t[i][o])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(n=>{if(n.classList.contains("ql-align")&&(n.querySelector("option")==null&&Ks(n,Oy),typeof t.align=="object"))return new lu(n,t.align);if(n.classList.contains("ql-background")||n.classList.contains("ql-color")){const i=n.classList.contains("ql-background")?"background":"color";return n.querySelector("option")==null&&Ks(n,Dy,i==="background"?"#ffffff":"#000000"),new su(n,t[i])}return n.querySelector("option")==null&&(n.classList.contains("ql-font")?Ks(n,Ny):n.classList.contains("ql-header")?Ks(n,My):n.classList.contains("ql-size")&&Ks(n,By)),new An(n)});const s=()=>{this.pickers.forEach(n=>{n.update()})};this.quill.on(xe.events.EDITOR_CHANGE,s)}}Tl.DEFAULTS=Ia({},Ms.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let l=this.container.querySelector("input.ql-image[type=file]");l==null&&(l=document.createElement("input"),l.setAttribute("type","file"),l.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),l.classList.add("ql-image"),l.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,l.files),l.value=""}),this.container.appendChild(l)),l.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class iu extends nu{constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,xe.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,xe.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=Fy(e);case"formula":{if(!e)break;const t=this.quill.getSelection(!0);if(t!=null){const s=t.index+t.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),e,xe.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",xe.sources.USER),this.quill.setSelection(s+2,xe.sources.USER)}break}}this.textbox.value="",this.hide()}}function Fy(l){let e=l.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||l.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=l.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:l}function Ks(l,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(s=>{const n=document.createElement("option");s===t?n.setAttribute("selected","selected"):n.setAttribute("value",String(s)),l.appendChild(n)})}const Vy=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Ry extends iu{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,t){super(e,t),this.quill.on(xe.events.EDITOR_CHANGE,(s,n,i,o)=>{if(s===xe.events.SELECTION_CHANGE)if(n!=null&&n.length>0&&o===xe.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const r=this.quill.getLines(n.index,n.length);if(r.length===1){const c=this.quill.getBounds(n);c!=null&&this.position(c)}else{const c=r[r.length-1],d=this.quill.getIndex(c),f=Math.min(c.length()-1,n.index+n.length-d),v=this.quill.getBounds(new Ga(d,f));v!=null&&this.position(v)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(xe.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){const t=super.position(e),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",t!==0&&(s.style.marginLeft=`${-1*t-s.offsetWidth/2}px`),t}}class ou extends Tl{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=Vy),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new Ry(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),pl),this.buildPickers(e.container.querySelectorAll("select"),pl))}}ou.DEFAULTS=Ia({},Tl.DEFAULTS,{modules:{toolbar:{handlers:{link(l){l?this.quill.theme.tooltip.edit():this.quill.format("link",!1,re.sources.USER)}}}}});const qy=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Uy extends iu{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,xe.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(xe.events.SELECTION_CHANGE,(e,t,s)=>{if(e!=null){if(e.length===0&&s===xe.sources.USER){const[n,i]=this.quill.scroll.descendant(dn,e.index);if(n!=null){this.linkRange=new Ga(e.index-i,n.length());const o=dn.formats(n.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const r=this.quill.getBounds(this.linkRange);r!=null&&this.position(r);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class ru extends Tl{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=qy),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),pl),this.buildPickers(e.container.querySelectorAll("select"),pl),this.tooltip=new Uy(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,s)=>{e.handlers.link.call(e,!s.format.link)}))}}ru.DEFAULTS=Ia({},Tl.DEFAULTS,{modules:{toolbar:{handlers:{link(l){if(l){const e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);const{tooltip:s}=this.quill.theme;s.edit("link",t)}else this.quill.format("link",!1,re.sources.USER)}}}}});re.register({"attributors/attribute/direction":Yc,"attributors/class/align":Uc,"attributors/class/background":H_,"attributors/class/color":W_,"attributors/class/direction":Wc,"attributors/class/font":Gc,"attributors/class/size":Xc,"attributors/style/align":jc,"attributors/style/background":To,"attributors/style/color":wo,"attributors/style/direction":Hc,"attributors/style/font":Jc,"attributors/style/size":Qc},!0);re.register({"formats/align":Uc,"formats/direction":Wc,"formats/indent":V1,"formats/background":To,"formats/color":wo,"formats/font":Gc,"formats/size":Xc,"formats/blockquote":R1,"formats/code-block":$t,"formats/header":q1,"formats/list":wl,"formats/bold":$o,"formats/code":So,"formats/italic":U1,"formats/link":dn,"formats/script":j1,"formats/strike":z1,"formats/underline":Y1,"formats/formula":W1,"formats/image":H1,"formats/video":Z1,"modules/syntax":au,"modules/table":J1,"modules/toolbar":Po,"themes/bubble":ou,"themes/snow":ru,"ui/icons":pl,"ui/picker":An,"ui/icon-picker":lu,"ui/color-picker":su,"ui/tooltip":nu},!0);const jy={props:{content:String,value:String,disabled:{type:Boolean,default:!1},options:{type:Object,default:()=>({})}},emits:["ready","change","input","blur","focus","update:value"],setup(l,{emit:e}){const t=l,s={theme:"snow",boundary:document.body,modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},placeholder:"Insert content here ...",readOnly:!1},n=f=>{const v=new MutationObserver(g=>{g.forEach(()=>{})});return v.observe(f,{childList:!0,subtree:!0}),v},i=M(null);let o=null,r="";const c=(f,v)=>{for(const g in v)!f[g]||g!=="modules"?f[g]=v[g]:c(f[g],v[g]);return f},d=()=>{if(i.value){const f=c(s,t.options);f.readOnly=!!t.disabled,o=new re(i.value,f),t.value&&o.clipboard.dangerouslyPasteHTML(t.value),o.on("selection-change",v=>{e(v?"focus":"blur",o)}),o.on("text-change",()=>{t.disabled&&o.enable(!1);let v=i.value.children[0].innerHTML;const g=o.getText();v==="<p><br></p>"&&(v=""),r=v,e("update:value",r),e("change",{html:v,text:g,quill:o})}),e("ready",o)}};return rt(()=>t.value,f=>{o&&f!==r?(r=f,o.clipboard.dangerouslyPasteHTML(f)):f||o.setText("")}),rt(()=>t.disabled,f=>{o&&o.enable(!f)}),Ze(()=>{if(d(),i.value){const f=n(i.value);Fo(()=>{f.disconnect()})}}),Mu(()=>{const f=i.value.previousSibling;f&&f.nodeType===1&&f.className.indexOf("ql-toolbar")>-1&&f.parentNode.removeChild(f)}),Fo(()=>{o=null}),(f,v)=>(u(),x("section",{ref_key:"editor",ref:i},null,512))}};const zy={class:"am-desc-editor__header"},Yy={class:"am-desc-editor__header-warning"},Wy=m("span",{class:"am-icon-triangle-info"},null,-1),Hy={key:1,class:"am-quill-wrapper"},cu={props:{modelValue:{type:String,default:""},mode:{type:String,default:"html"}},emits:["update:modelValue","setMode"],setup(l,{emit:e}){const t=l;let s=F("amLabels"),n=M(t.mode),i=y({get:()=>t.modelValue,set:v=>{e("update:modelValue",v)}});function o(){n.value="text",e("setMode","text")}function r(){n.value="html",e("setMode","html")}const c={theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]]},readOnly:!1};let d=F("amColors",M({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#808A90",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),f=y(()=>({"--am-c-desce-text-op03":Y(d.value.colorMainText,.03),"--am-c-desce-warn-op10":Y(d.value.colorWarning,.1)}));return(v,g)=>a(n)?(u(),x("div",{key:0,class:"am-desc-editor",style:_e(a(f))},[m("div",zy,[I(Bu,null,{default:L(()=>[I(ke,{category:a(n)==="text"?"primary":"secondary",type:a(n)==="text"?"filled":"plain",size:"small",onClick:o},{default:L(()=>[ie(w(a(s).text_mode),1)]),_:1},8,["category","type"]),I(ke,{category:a(n)==="html"?"primary":"secondary",type:a(n)==="html"?"filled":"plain",size:"small",onClick:r},{default:L(()=>[ie(w(a(s).html_mode),1)]),_:1},8,["category","type"])]),_:1}),m("div",Yy,[Wy,ie(" "+w(a(s).content_mode_tooltip),1)])]),a(n)==="html"?(u(),q(ht,{key:0,modelValue:a(i),"onUpdate:modelValue":g[0]||(g[0]=b=>ye(i)?i.value=b:i=b),type:"textarea",rows:3,style:{width:"100%"}},null,8,["modelValue"])):D("",!0),a(n)==="text"?(u(),x("div",Hy,[I(jy,{value:a(i),"onUpdate:value":g[1]||(g[1]=b=>ye(i)?i.value=b:i=b),options:c},null,8,["value"])])):D("",!0)],4)):D("",!0)}};const Zy=["innerHTML"],Gy={props:{responsiveClass:{type:String,default:""}},setup(l,{expose:e}){const t=l,s=Oe(),n=F("settings");let i=F("amLabels"),o=y(()=>s.getters["entities/getEmployee"](s.getters["employee/getId"])),r=y(()=>s.getters["entities/getLocations"]),c=y(()=>r.value.map(C=>({value:C.id,label:C.name}))),d=M(null),f=M(!1),v=M({firstName:y({get:()=>s.getters["employee/getFirstName"],set:C=>{s.commit("employee/setFirstName",C||"")}}),lastName:y({get:()=>s.getters["employee/getLastName"],set:C=>{s.commit("employee/setLastName",C||"")}}),email:y({get:()=>s.getters["employee/getEmail"],set:C=>{s.commit("employee/setEmail",C||"")}}),phone:y({get:()=>s.getters["employee/getPhone"],set:C=>{s.commit("employee/setPhone",C||"")}}),locationId:y({get:()=>s.getters["employee/getLocationId"],set:C=>{s.commit("employee/setLocationId",C||"")}}),description:y({get:()=>s.getters["employee/getDescription"],set:C=>{s.commit("employee/setDescription",C||"")}})}),g=y(()=>({firstName:[{required:!0,message:i.enter_first_name_warning,trigger:["submit","change"]}],lastName:[{required:!0,message:i.enter_last_name_warning,trigger:["submit","change"]}],email:[{required:!0,message:i.enter_email_warning,trigger:["submit","change"]}],locationId:[{required:r.value.filter(C=>C.status==="visible").length>0,message:i.enter_location_warning,trigger:["submit","change"]}]})),b=M({firstName:{template:Ye.text,props:{itemName:"firstName",label:i.first_name_colon,placeholder:i.enter_first_name,class:y(()=>`am-caepif__item ${t.responsiveClass}`)}},lastName:{template:Ye.text,props:{itemName:"lastName",label:i.last_name_colon,placeholder:i.enter_last_name,class:y(()=>`am-caepif__item ${t.responsiveClass}`)}},email:{template:Ye.text,props:{itemName:"email",label:i.email_colon,placeholder:i.enter_email,class:y(()=>`am-caepif__item ${t.responsiveClass}`)}},phone:{countryPhoneIso:y({get:()=>s.getters["auth/getProfile"].countryPhoneIso?s.getters["auth/getProfile"].countryPhoneIso:"",set:C=>{s.commit("auth/setProfileCountryPhoneIso",C?C.toLowerCase():"")}}),template:Ye.phone,props:{itemName:"phone",label:i.phone_colon,placeholder:i.enter_phone,defaultCode:y(()=>s.getters["auth/getProfile"].countryPhoneIso?s.getters["auth/getProfile"].countryPhoneIso:""),phoneError:y(()=>f.value),whatsAppLabel:i.whatsapp_opt_in_text,isWhatsApp:n.notifications.whatsAppEnabled&&n.notifications.whatsAppAccessToken&&n.notifications.whatsAppBusinessID&&n.notifications.whatsAppPhoneID,class:y(()=>`am-caepif__item ${t.responsiveClass}`)}}}),T=M({locationId:{template:Ye.select,props:{itemName:"locationId",label:`${i.location}:`,placeholder:i.select_location,class:y(()=>`am-caepif__item ${t.responsiveClass} ${n.zoom.enabled||"am-w-100"}`),options:c.value}}});return gl(()=>{r.value.length||delete T.value.locationId}),e({employeeFormRef:d}),(C,_)=>{const S=yt,P=et;return u(),q(P,{ref_key:"employeeFormRef",ref:d,model:a(v),rules:a(g),"label-position":"top",class:R(["am-caepif",t.responsiveClass])},{default:L(()=>[m("div",{class:R(["am-caepif__block",[{"am-w-70":a(o).pictureFullPath},t.responsiveClass]])},[(u(!0),x(te,null,fe(a(b),(k,h)=>(u(),q(Tt(k.template),Dt({key:h,ref_for:!0,ref:"customerCollectorRef",modelValue:a(v)[h],"onUpdate:modelValue":A=>a(v)[h]=A,countryPhoneIso:k.countryPhoneIso,"onUpdate:countryPhoneIso":A=>k.countryPhoneIso=A},k.props),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"]))),128))],2),a(o).pictureFullPath?(u(),x("div",{key:0,class:R(["am-caepif__block am-w-30",t.responsiveClass])},[m("div",{class:"am-caepif__img",style:_e({backgroundImage:`url(${a(o).pictureFullPath})`})},null,4)],2)):D("",!0),m("div",{class:R(["am-caepif__block",t.responsiveClass])},[(u(!0),x(te,null,fe(a(T),(k,h)=>(u(),q(Tt(k.template),Dt({key:h,ref_for:!0,ref:"customerCollectorRef",modelValue:a(v)[h],"onUpdate:modelValue":A=>a(v)[h]=A},k.props,so(k.handlers?k.handlers:{})),{default:L(()=>[k.slots&&k.slots.default?(u(),x("div",{key:0,innerHTML:k.slots.default},null,8,Zy)):D("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue"]))),128)),I(S,{label:a(i).description_colon},{default:L(()=>[I(cu,{modelValue:a(v).description,"onUpdate:modelValue":_[0]||(_[0]=k=>a(v).description=k),mode:a(s).getters["employee/getDescriptionMode"],onSetMode:_[1]||(_[1]=k=>a(s).commit("employee/setDescriptionMode",k))},null,8,["modelValue","mode"])]),_:1},8,["label"])],2)]),_:1},8,["model","rules","class"])}}};const Jy={class:"am-caes__category-header"},Xy={class:"am-caes__category-header__text"},Qy={class:"am-caes__service-header"},Ky={class:"am-caes__service-header__text"},eb={class:"am-caes__service-content"},tb={class:"am-caes__service-content__text"},ab={class:"am-caes__service-content__text"},sb={class:"am-caes__service-content__text"},lb={class:"am-caes__service-content__inner am-caes__service-content__disabled"},nb={class:"am-caes__service-content__text"},ib={name:"CabinetEmployeeProfileServices"},ob=Object.assign(ib,{props:{responsiveClass:{type:String,default:""}},setup(l){const e=l;let t=Oe(),s=F("amLabels"),n=M(""),i={components:{IconComponent:He},template:'<IconComponent icon="search"/>'},o=M({}),r=y(()=>t.getters["employee/getEmployee"]),c=y(()=>t.getters["entities/getCategories"].filter(_=>_.status==="visible"&&_.serviceList.length>0&&(!n.value.trim()||_.serviceList.filter(S=>S.name.toLowerCase().includes(n.value.toLowerCase().trim())).length))),d=y(()=>c.value.length===1?"category_"+c.value[0].id:null),f=M(0);function v(_){const S=_.serviceList.filter(P=>r.value.serviceList[_.id][P.id].enabled);return S.length>0&&S.length<_.serviceList.length}function g(_){const S=_.serviceList.filter(P=>r.value.serviceList[_.id][P.id].enabled);o.value[_.id]=S.length!==0}function b(_,S){S.serviceList.forEach(P=>{t.commit("employee/setServiceEnabled",{categoryId:S.id,serviceId:P.id,value:_})})}Ze(()=>{c.value.forEach(_=>{o.value[_.id]=_.serviceList.filter(S=>r.value.serviceList[_.id][S.id].enabled).length!==0})});let T=F("amColors"),C=y(()=>({"--am-c-caes-primary":T.value.colorPrimary,"--am-c-caes-text":T.value.colorMainText,"--am-c-caes-text-op03":Y(T.value.colorMainText,.03),"--am-c-caes-inp-bgr-op03":Y(T.value.colorInpBgr,.03)}));return(_,S)=>{const P=Os,k=Ds;return u(),x("div",null,[m("div",null,[I(ht,{modelValue:a(n),"onUpdate:modelValue":S[0]||(S[0]=h=>ye(n)?n.value=h:n=h),"icon-start":a(i)},null,8,["modelValue","icon-start"])]),I(k,{modelValue:a(d),"onUpdate:modelValue":S[2]||(S[2]=h=>ye(d)?d.value=h:d=h),class:"am-caes",style:_e(a(C))},{default:L(()=>[(u(!0),x(te,null,fe(a(c),h=>(u(),q(P,{key:"category_"+h.id,name:"category_"+h.id,class:"am-caes__category"},{title:L(()=>[m("div",Jy,[I(gt,{modelValue:a(o)[h.id],"onUpdate:modelValue":A=>a(o)[h.id]=A,indeterminate:v(h),onClick:A=>{A.stopPropagation(),ye(d)?d.value=`category_${h.id}`:d=`category_${h.id}`},onChange:A=>b(A,h)},null,8,["modelValue","onUpdate:modelValue","indeterminate","onClick","onChange"]),m("div",Xy,w(h.name),1)])]),default:L(()=>[I(k,{modelValue:a(f),"onUpdate:modelValue":S[1]||(S[1]=A=>ye(f)?f.value=A:f=A),class:"am-caes__inner"},{default:L(()=>[(u(!0),x(te,null,fe(a(c).find(A=>A.id===h.id).serviceList.filter(A=>!a(n).trim()||A.name.toLowerCase().includes(a(n).toLowerCase())),A=>(u(),q(P,{key:`service_${A.id}`,name:`service_${A.id}`,class:"am-caes__service"},{title:L(()=>[m("div",Qy,[I(gt,{modelValue:a(r).serviceList[h.id][A.id].enabled,"onUpdate:modelValue":O=>a(r).serviceList[h.id][A.id].enabled=O,onClick:O=>{O.stopPropagation(),ye(f)?f.value=`service_${A.id}`:f=`service_${A.id}`},onChange:O=>g(h)},null,8,["modelValue","onUpdate:modelValue","onClick","onChange"]),m("div",Ky,w(A.name),1)])]),default:L(()=>[m("div",eb,[m("div",{class:R(["am-caes__service-content__item",e.responsiveClass])},[m("div",tb,w(a(s).minimum_capacity),1),I(vt,{modelValue:a(r).serviceList[h.id][A.id].minCapacity,"onUpdate:modelValue":O=>a(r).serviceList[h.id][A.id].minCapacity=O,class:"am-caes__service-content__inner",min:1,size:"small"},null,8,["modelValue","onUpdate:modelValue"])],2),m("div",{class:R(["am-caes__service-content__item",e.responsiveClass])},[m("div",ab,w(a(s).maximum_capacity),1),I(vt,{modelValue:a(r).serviceList[h.id][A.id].maxCapacity,"onUpdate:modelValue":O=>a(r).serviceList[h.id][A.id].maxCapacity=O,class:"am-caes__service-content__inner",min:a(r).serviceList[h.id][A.id].minCapacity,size:"small"},null,8,["modelValue","onUpdate:modelValue","min"])],2),(u(!0),x(te,null,fe(a(r).serviceList[h.id][A.id].customPricing.durations,(O,E)=>(u(),x(te,{key:E},[m("div",{class:R(["am-caes__service-content__item",e.responsiveClass])},[m("div",sb,w(a(s).duration),1),m("div",lb,w(a(hl)(E,a(s).h,a(s).min)),1)],2),m("div",{class:R(["am-caes__service-content__item",e.responsiveClass])},[m("div",nb,w(a(s).price),1),I(ht,{modelValue:O.price,"onUpdate:modelValue":$=>O.price=$,class:"am-caes__service-content__inner",placeholder:"",size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue"])],2)],64))),128))])]),_:2},1032,["name"]))),128))]),_:2},1032,["modelValue"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","style"])])}}});const $a={props:{modelValue:{type:String},id:{type:String,default:""},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},size:{type:String,default:"default",validator(l){return["default","medium","small","mini","micro"].includes(l)}},placeholder:{type:String,default:""},start:{type:String,default:""},end:{type:String,default:""},step:{type:String,default:""},minTime:{type:String,default:""},maxTime:{type:String,default:""},name:{type:String,default:""},prefixIcon:{type:[String,Object,Function],default:Je({components:{IconComponent:He},template:'<IconComponent icon="clock"/>'})},suffixIcon:{type:[String,Object,Function],default:Je({components:{IconComponent:He},template:'<IconComponent icon="arrow-up"/>'})},clearIcon:{type:[String,Object,Function],default:Je({components:{IconComponent:He},template:'<IconComponent icon="close"/>'})},appendToBody:{type:Boolean,default:!0},popperClass:{type:String,default:""},class:{type:String,default:""},parentClass:{type:String,default:""},format:{type:String,default:"HH:mm"}},emits:["update:modelValue"],setup(l,{emit:e}){const t=l,{modelValue:s}=Ql(t),n=y({get:()=>s.value,set:d=>{e("update:modelValue",d)}}),i=M(null);Ze(()=>{i.value.select.popperPaneRef.style.setProperty("--am-c-option-bgr",r.value.colorDropBgr),i.value.select.popperPaneRef.style.setProperty("--am-c-option-border",r.value.colorDropBorder),i.value.select.popperPaneRef.style.setProperty("--am-c-option-text",r.value.colorDropText),i.value.select.popperPaneRef.style.setProperty("--am-c-option-text-op65",Y(r.value.colorDropText,.65)),i.value.select.popperPaneRef.style.setProperty("--am-c-option-text-op50",Y(r.value.colorDropText,.5)),i.value.select.popperPaneRef.style.setProperty("--am-c-option-hover",Y(r.value.colorDropText,.1)),i.value.select.popperPaneRef.style.setProperty("--am-c-option-selected",r.value.colorPrimary),i.value.select.popperPaneRef.style.setProperty("--am-c-option-selected-op10",Y(r.value.colorPrimary,.1)),i.value.select.popperPaneRef.style.setProperty("--am-c-option-img-bgr",r.value.colorSuccess),i.value.select.popperPaneRef.style.setProperty("--am-c-option-img-text",r.value.colorMainBgr),i.value.select.popperPaneRef.style.setProperty("--am-font-family",o.value.fontFamily)});let o=F("amFonts",M({fontFamily:"Amelia Roboto, sans-serif",fontUrl:"",customFontFamily:"",fontFormat:"",customFontSelected:!1})),r=F("amColors",M({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#808A90",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),c=y(()=>({"--am-c-timeselect-bgr":r.value.colorInpBgr,"--am-c-timeselect-border":r.value.colorInpBorder,"--am-c-timeselect-text":r.value.colorInpText,"--am-c-timeselect-placeholder":r.value.colorInpPlaceHolder,"--am-c-timeselect-shadow":Y(r.value.colorInpText,.05),"--am-c-timeselect-text-op60":Y(r.value.colorInpText,.6),"--am-c-timeselect-text-op40":Y(r.value.colorInpText,.4),"--am-c-timeselect-text-op10":Y(r.value.colorInpText,.03),"--am-font-family":o.value.fontFamily}));return(d,f)=>{const v=Fu;return u(),x("div",{class:R(["am-time-select__wrapper",l.parentClass]),style:_e(a(c))},[I(v,{id:l.id,ref_key:"amTimeSelect",ref:i,modelValue:a(n),"onUpdate:modelValue":f[0]||(f[0]=g=>ye(n)?n.value=g:null),class:R(["am-time-select",[`am-time-select--${l.size}`,{"am-time-select--disabled":l.disabled},t.class]]),disabled:l.disabled,placeholder:l.placeholder,"append-to-body":l.appendToBody,"clear-icon":l.clearIcon,clearable:l.clearable,editable:l.editable,name:l.name,"popper-class":`am-time-select__popper${l.popperClass?" "+l.popperClass:l.popperClass}`,"prefix-icon":l.prefixIcon,"suffix-icon":l.suffixIcon,end:l.end,"max-time":l.maxTime,"min-time":l.minTime,start:l.start,step:l.step,format:l.format},null,8,["id","modelValue","class","disabled","placeholder","append-to-body","clear-icon","clearable","editable","name","popper-class","prefix-icon","suffix-icon","end","max-time","min-time","start","step","format"])],6)}}};const rb={class:"am-csd__period-header"},cb={class:"am-csd__period-content__inner"},ub=m("span",{class:"am-icon-clearable"},null,-1),db={name:"WorkPeriod"},mb=Object.assign(db,{props:{title:{type:String,default:""},visibility:{type:Boolean,default:!1},origin:{type:String,default:""},periodIndex:{type:Number,default:0},originIndex:{type:Number,default:0},isNew:{type:Boolean,default:!1}},emits:["close"],setup(l,{emit:e}){const t=l;let s=Oe();const n=F("settings");let i=F("amLabels"),o=F("pageWidth"),r=M(null),c=y(()=>t.visibility);const{width:d}=es(r),f=y(()=>tt(d.value));rt(c,Q=>{Q&&setTimeout(()=>{C.value=JSON.parse(JSON.stringify(O.value[t.periodIndex]))},300)});let v=M(!1),g=M(null),b=M("");function T(){v.value=!1,b.value=""}let C=M(null),_=M({startTime:y({get:()=>E.value.startTime,set:Q=>{E.value.startTime=Q}}),endTime:y({get:()=>E.value.endTime,set:Q=>{E.value.endTime=Q}}),periodServiceList:y({get:()=>E.value.periodServiceList,set:Q=>{E.value.periodServiceList=Q}}),periodLocationList:y({get:()=>E.value.periodLocationList,set:Q=>{E.value.periodLocationList=Q}})}),S=M(null),P=y(()=>({startTime:[{required:!0,message:i.select_time_warning,trigger:["submit","change"]}],endTime:[{required:!0,message:i.select_time_warning,trigger:["submit","change"]}]})),k=M();Be("formWrapper",k);let h=M(s.getters["entities/getLocations"]),A=y(()=>{let Q=Hr(s),ee=E.value.periodServiceList.filter(le=>Q.map(W=>W.id).indexOf(le)===-1);return Q.concat(s.getters["entities/getServices"].filter(le=>ee.indexOf(le.id)!==-1))}),O=y(()=>s.getters["employee/getEmployee"][t.origin][t.originIndex].periodList),E=y(()=>t.periodIndex!==null?O.value[t.periodIndex]:null);function $(Q){return Mt(qt(Q)-n.general.timeSlotLength)}function V(Q){let ee=Mt(qt(Q)+n.general.timeSlotLength);return ee==="00:00"?null:ee}function j(){S.value.validate(Q=>{Q?e("close"):console.log(111)})}function B(){t.isNew?O.value.pop():O.value[t.periodIndex]=C.value,e("close")}let G=F("amFonts"),H=F("amColors"),X=y(()=>({"--am-c-csd-text":H.value.colorMainText,"--am-c-csd-bgr":H.value.colorMainBgr,"--am-c-csd-text-op10":Y(H.value.colorMainText,.1),"--am-c-scroll-op30":Y(H.value.colorPrimary,.3),"--am-c-scroll-op10":Y(H.value.colorPrimary,.1),"--am-font-family":G.value.fontFamily}));return(Q,ee)=>{const le=yt,W=et;return u(),q(Xa,{visibility:a(t).visibility,style:_e(a(X)),"custom-class":`am-csd am-csd__period${a(o)<=400?" am-w-100":""}`,position:"center","onUpdate:visibility":B},Zr({footer:L(()=>[m("div",{class:R(["am-csd__period-footer",a(f)])},[I(ke,{category:"secondary",type:"plain",size:a(o)>430?"default":"small",onClick:B},{default:L(()=>[ie(w(a(i).cancel),1)]),_:1},8,["size"]),I(ke,{size:a(o)>430?"default":"small",onClick:j},{default:L(()=>[ie(w(a(i).save),1)]),_:1},8,["size"])],2)]),default:L(()=>[a(E)?(u(),x("div",{key:0,ref_key:"popupPeriodRef",ref:r,class:"am-csd__period-content"},[m("div",cb,[a(v)?(u(),q(wt,{key:0,ref_key:"alertContainer",ref:g,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:T,onTriggerClose:T},{title:L(()=>[ub,ie(" "+w(a(b)),1)]),_:1},512)):D("",!0),I(W,{ref_key:"periodFormRef",ref:S,class:"am-csd__period-form",rules:a(P),model:a(_),"label-position":"top"},{default:L(()=>[I(le,{label:`${a(i).time}:`,prop:"startTime",class:R(["am-csd__period-form__item am-w-50",a(f)])},{default:L(()=>[I($a,{modelValue:a(E).startTime,"onUpdate:modelValue":ee[0]||(ee[0]=se=>a(E).startTime=se),placeholder:a(i).from,start:"00:00",end:$("24:00"),"min-time":a(t).periodIndex===0?null:$(a(O)[a(t).periodIndex-1].endTime),"max-time":a(t).periodIndex===a(O).length-1?null:a(E).endTime,step:a(Mt)(a(n).general.timeSlotLength)},null,8,["modelValue","placeholder","end","min-time","max-time","step"])]),_:1},8,["label","class"]),I(le,{label:`${a(i).time}:`,prop:"endTime",class:R(["am-csd__period-form__item am-w-50",a(f)])},{default:L(()=>[I($a,{modelValue:a(E).endTime,"onUpdate:modelValue":ee[1]||(ee[1]=se=>a(E).endTime=se),placeholder:a(i).to_upper,disabled:!a(E).startTime,start:V("00:00"),end:"24:00","min-time":a(E).startTime,"max-time":a(t).periodIndex===a(O).length-1?null:V(a(O)[a(t).periodIndex+1].startTime),step:a(Mt)(a(n).general.timeSlotLength)},null,8,["modelValue","placeholder","disabled","start","min-time","max-time","step"])]),_:1},8,["label","class"]),I(le,{label:`${a(i).heading_services}:`,prop:"periodServiceList",class:"am-csd__period-form__item"},{default:L(()=>[I(We,{modelValue:a(E).periodServiceList,"onUpdate:modelValue":ee[2]||(ee[2]=se=>a(E).periodServiceList=se),placeholder:`${a(i).all_services}`,multiple:""},{default:L(()=>[(u(!0),x(te,null,fe(a(A),se=>(u(),q(Ve,{key:se.id,value:se.id,label:se.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(h).length>0?(u(),q(le,{key:0,label:`${a(i).location}:`,prop:"periodLocationList",class:"am-csd__period-form__item"},{default:L(()=>[I(We,{modelValue:a(E).periodLocationList,"onUpdate:modelValue":ee[3]||(ee[3]=se=>a(E).periodLocationList=se),placeholder:`${a(i).all_locations}`,multiple:""},{default:L(()=>[(u(!0),x(te,null,fe(a(h),se=>(u(),q(Ve,{key:se.id,value:se.id,label:se.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):D("",!0)]),_:1},8,["rules","model"])])],512)):D("",!0)]),_:2},[a(t).title?{name:"header",fn:L(()=>[m("div",rb,w(a(t).title),1)])}:void 0]),1032,["visibility","style","custom-class"])}}});const pb={class:"am-csd__timeOut-header"},fb={class:"am-csd__timeOut-content__inner"},gb=m("span",{class:"am-icon-clearable"},null,-1),hb={name:"WorkTimeOut"},vb=Object.assign(hb,{props:{title:{type:String,default:""},visibility:{type:Boolean,default:!1},origin:{type:String,default:""},timeOutIndex:{type:Number,default:0},originIndex:{type:Number,default:0},isNew:{type:Boolean,default:!1}},emits:["close"],setup(l,{emit:e}){const t=l;let s=Oe();const n=F("settings");let i=F("amLabels"),o=F("pageWidth"),r=M(null),c=y(()=>t.visibility);const{width:d}=es(r),f=y(()=>tt(d.value));rt(c,X=>{X&&setTimeout(()=>{C.value=JSON.parse(JSON.stringify(h.value[t.timeOutIndex]))},300)});let v=M(!1),g=M(null),b=M("");function T(){v.value=!1,b.value=""}let C=M(null),_=M({startTime:y({get:()=>O.value.startTime,set:X=>{O.value.startTime=X}}),endTime:y({get:()=>O.value.endTime,set:X=>{O.value.endTime=X}})}),S=M(null),P=y(()=>({startTime:[{required:!0,message:i.select_time_warning,trigger:["submit","change"]}],endTime:[{required:!0,message:i.select_time_warning,trigger:["submit","change"]}]})),k=M();Be("formWrapper",k);let h=y(()=>s.getters["employee/getEmployee"][t.origin][t.originIndex].timeOutList),A=y(()=>s.getters["employee/getEmployee"][t.origin][t.originIndex].periodList),O=y(()=>t.timeOutIndex!==null?h.value[t.timeOutIndex]:null);y(()=>A.value.length?$(A.value[0].startTime):"00:00"),y(()=>A.value.length?E(A.value[A.value.length-1].endTime):"00:00");function E(X){return Mt(qt(X)-n.general.timeSlotLength)}function $(X){let Q=Mt(qt(X)+n.general.timeSlotLength);return Q==="00:00"?null:Q}function V(){S.value.validate(X=>{X?e("close"):console.log(111)})}function j(){t.isNew?h.value.pop():h.value[t.timeOutIndex]=C.value,e("close")}let B=F("amFonts"),G=F("amColors"),H=y(()=>({"--am-c-csd-text":G.value.colorMainText,"--am-c-csd-bgr":G.value.colorMainBgr,"--am-c-csd-text-op10":Y(G.value.colorMainText,.1),"--am-c-scroll-op30":Y(G.value.colorPrimary,.3),"--am-c-scroll-op10":Y(G.value.colorPrimary,.1),"--am-font-family":B.value.fontFamily}));return(X,Q)=>{const ee=yt,le=et;return u(),q(Xa,{visibility:a(t).visibility,style:_e(a(H)),"custom-class":`am-csd am-csd__timeOut${a(o)<=400?" am-w-100":""}`,position:"center","onUpdate:visibility":j},Zr({footer:L(()=>[m("div",{class:R(["am-csd__timeOut-footer",a(f)])},[I(ke,{category:"secondary",type:"plain",size:a(o)>430?"default":"small",onClick:j},{default:L(()=>[ie(w(a(i).cancel),1)]),_:1},8,["size"]),I(ke,{size:a(o)>430?"default":"small",onClick:V},{default:L(()=>[ie(w(a(i).save),1)]),_:1},8,["size"])],2)]),default:L(()=>[a(O)?(u(),x("div",{key:0,ref_key:"popupTimeOutRef",ref:r,class:"am-csd__timeOut-content"},[m("div",fb,[a(v)?(u(),q(wt,{key:0,ref_key:"alertContainer",ref:g,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:T,onTriggerClose:T},{title:L(()=>[gb,ie(" "+w(a(b)),1)]),_:1},512)):D("",!0),I(le,{ref_key:"timeOutFormRef",ref:S,class:"am-csd__timeOut-form",rules:a(P),model:a(_),"label-position":"top"},{default:L(()=>[I(ee,{label:`${a(i).time}:`,prop:"startTime",class:R(["am-csd__timeOut-form__item am-w-50",a(f)])},{default:L(()=>[I($a,{modelValue:a(O).startTime,"onUpdate:modelValue":Q[0]||(Q[0]=W=>a(O).startTime=W),placeholder:a(i).from,start:$(a(A)[0].startTime),end:E(a(A)[a(A).length-1].endTime),step:a(Mt)(a(n).general.timeSlotLength),"max-time":a(h)[a(t).timeOutIndex].endTime},null,8,["modelValue","placeholder","start","end","step","max-time"])]),_:1},8,["label","class"]),I(ee,{label:`${a(i).time}:`,prop:"endTime",class:R(["am-csd__timeOut-form__item am-w-50",a(f)])},{default:L(()=>[I($a,{modelValue:a(O).endTime,"onUpdate:modelValue":Q[1]||(Q[1]=W=>a(O).endTime=W),placeholder:a(i).to_upper,disabled:!a(O).startTime,start:$(a(A)[0].startTime),end:E(a(A)[a(A).length-1].endTime),"min-time":a(h)[a(t).timeOutIndex].startTime,step:a(Mt)(a(n).general.timeSlotLength)},null,8,["modelValue","placeholder","disabled","start","end","min-time","step"])]),_:1},8,["label","class"])]),_:1},8,["rules","model"])])],512)):D("",!0)]),_:2},[a(t).title?{name:"header",fn:L(()=>[m("div",pb,w(a(t).title),1)])}:void 0]),1032,["visibility","style","custom-class"])}}});const _b={class:"am-cc__edit"},yb=m("span",{class:"am-icon-edit"},null,-1),bb={class:"am-cc__edit-text"},kb=m("span",{class:"am-icon-search"},null,-1),Cb={class:"am-cc__edit-text"},xb=m("span",{class:"am-icon-clearable"},null,-1),wb={class:"am-cc__edit-text"},Tb=m("span",{class:"am-icon-clearable"},null,-1),Sb={class:"am-cc__edit-text"},Eb={name:"DotsPopup"},ka=Object.assign(Eb,{props:{index:{type:Number,default:0},referenceClass:{type:String,default:""},haveDuplicate:{type:Boolean,default:!1},haveDelete:{type:Boolean,default:!0},haveEdit:{type:Boolean,default:!0},haveView:{type:Boolean,default:!1}},emits:["remove","edit","duplicate"],setup(l,{emit:e}){const t=l;let s=F("amLabels"),n=M(!1);function i(b){b.stopPropagation(),n.value=!n.value}function o(){e("edit",t.index),d()}function r(){e("remove",t.index),d()}function c(){e("duplicate",t.index),d()}function d(){n.value=!1}let f=F("amFonts"),v=F("amColors"),g=y(()=>({"--am-c-cc-error":v.value.colorError,"--am-c-cc-error-op15":Y(v.value.colorError,.15),"--am-c-cc-bgr":v.value.colorMainBgr,"--am-c-cc-text":v.value.colorMainText,"--am-c-cc-text-op10":Y(v.value.colorMainText,.1),"--am-c-cc-text-op15":Y(v.value.colorMainText,.15),"--am-font-family":f.value.fontFamily}));return(b,T)=>{const C=vl;return u(),q(C,{ref:"editRef",visible:a(n),"onUpdate:visible":T[0]||(T[0]=_=>ye(n)?n.value=_:n=_),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":a(g),trigger:"click"},{reference:L(()=>[m("span",{class:R(["am-cc__edit-btn am-icon-dots-vertical",a(t).referenceClass]),onClick:i},null,2)]),default:L(()=>[Yt((u(),x("div",_b,[a(t).haveEdit?(u(),x("div",{key:0,class:"am-cc__edit-item",onClick:o},[yb,m("span",bb,w(a(s).edit),1)])):D("",!0),a(t).haveView?(u(),x("div",{key:1,class:"am-cc__edit-item",onClick:o},[kb,m("span",Cb,w(a(s).view),1)])):D("",!0),a(t).haveDelete?(u(),x("div",{key:2,class:"am-cc__edit-item am-delete",onClick:r},[xb,m("span",wb,w(a(s).delete),1)])):D("",!0),a(t).haveDuplicate?(u(),x("div",{key:3,class:"am-cc__edit-item am-clone",onClick:c},[Tb,m("span",Sb,w(a(s).duplicate),1)])):D("",!0)])),[[a(ra),d]])]),_:1},8,["visible","popper-style"])}}});const Lb={class:"am-caeper__heading-item am-w-20"},Ab={class:"am-caeper__heading-item am-w-40"},$b={class:"am-caeper__heading-item am-w-40"},Ib={key:1},Pb={class:"am-caeper__heading-item am-w-20"},Ob={key:0,class:"am-caeper__error"},Db={name:"WorkPeriods"},uu=Object.assign(Db,{props:{title:{type:String,default:""},type:{type:String,default:""},index:{type:Number,default:0},enabled:{type:Boolean,default:!1},headerVisible:{type:Boolean,default:!0},applyToAllDaysVisible:{type:Boolean,default:!0},footerVisible:{type:Boolean,default:!0},editVisible:{type:Boolean,default:!0},error:{type:String,default:""},responsiveClass:{type:String,default:""}},emits:["addPeriod"],setup(l,{emit:e}){const t=l;let s=Oe(),n=F("amLabels"),i=y(()=>s.getters["entities/getLocations"]),o=y(()=>s.getters["entities/getServices"]),r=y(()=>Hr(s)),c=y(()=>{let P=s.getters["employee/getEmployee"];switch(t.type){case"weekDayList":return P.weekDayList[t.index].periodList;case"specialDayList":return P.specialDayList[t.index].periodList}return[]}),d=y(()=>{let P=s.getters["employee/getEmployee"];return t.type==="weekDayList"?P.weekDayList[t.index].timeOutList:[]}),f=M(null),v=M(null),g=M(null);function b(){c.value.push({id:null,locationId:null,startTime:"",endTime:"",periodLocationList:[],periodServiceList:[],editing:!0}),g.value=!0,f.value=c.value.length-1,e("addPeriod")}function T(){let P=[];s.getters["employee/getEmployee"].weekDayList[t.index].periodList.forEach(k=>{P.push({id:null,locationId:null,startTime:k.startTime,endTime:k.endTime,periodLocationList:[...k.periodLocationList],periodServiceList:[...k.periodServiceList],editing:!1})}),s.getters["employee/getEmployee"].weekDayList.forEach((k,h)=>{h!==t.index&&(k.periodList=JSON.parse(JSON.stringify(P)))})}function C(){return!c.value.length||!c.value.filter(P=>P.startTime&&P.endTime).length||c.value[c.value.length-1].endTime!=="00:00"}let _=F("amColors"),S=y(()=>({"--am-c-caeper-bgr":_.value.colorMainBgr,"--am-c-caeper-text":_.value.colorMainText,"--am-c-caeper-text-op80":Y(_.value.colorMainText,.8)}));return(P,k)=>Yt((u(),x("div",{class:"am-caeper",style:_e(a(S))},[a(t).headerVisible&&a(c).length?(u(),x("div",{key:0,class:R(["am-caeper__heading",a(t).responsiveClass])},[m("div",Lb,w(a(n).time),1),m("div",Ab,w(a(n).service_colon),1),m("div",$b,w(a(n).location),1)],2)):D("",!0),(u(!0),x(te,null,fe(a(c),(h,A)=>(u(),x("div",{key:A,class:"am-caeper__content"},[m("div",{class:R(["am-caeper__content-item am-w-20",a(t).responsiveClass])},w(h.startTime?h.startTime.substring(0,5):"")+" - "+w(h.endTime?h.endTime.substring(0,5):""),3),m("div",{class:R(["am-caeper__content-item am-w-40",[a(t).responsiveClass,{"am-cabinet-empty":!h.periodServiceList.length}]])},w(h.periodServiceList.filter(O=>a(r).map(E=>E.id).indexOf(O)!==-1).map(O=>a(o).find(E=>E.id===O).name).join(", ")),3),m("div",{class:R(["am-caeper__content-item am-w-40",[a(t).responsiveClass,{"am-cabinet-empty":!h.periodLocationList.length}]])},w(h.periodLocationList.map(O=>a(i).find(E=>E.id===O).name).join(", ")),3),a(t).editVisible?(u(),q(ka,{key:0,index:A,onRemove:O=>a(c).splice(A,1),onEdit:O=>ye(f)?f.value=A:f=A},null,8,["index","onRemove","onEdit"])):D("",!0)]))),128)),a(d).length?(u(),x("span",Ib,w(a(n).breaks),1)):D("",!0),a(t).headerVisible&&a(d).length?(u(),x("div",{key:2,class:R(["am-caeper__heading",a(t).responsiveClass])},[m("div",Pb,w(a(n).time),1)],2)):D("",!0),(u(!0),x(te,null,fe(a(d),(h,A)=>(u(),x("div",{key:A,class:"am-caeper__content"},[m("div",{class:R(["am-caeper__content-item am-w-20",a(t).responsiveClass])},w(h.startTime?h.startTime.substring(0,5):"")+" - "+w(h.endTime?h.endTime.substring(0,5):""),3),a(t).editVisible?(u(),q(ka,{key:0,index:A,onRemove:O=>a(d).splice(A,1),onEdit:O=>ye(v)?v.value=A:v=A},null,8,["index","onRemove","onEdit"])):D("",!0)]))),128)),a(t).footerVisible?(u(),x("div",{key:3,class:R(["am-caeper__footer",[{"am-error":a(t).error},a(t).responsiveClass]])},[a(t).error?(u(),x("div",Ob,w(a(t).error),1)):D("",!0),C()?(u(),q(ke,{key:1,prefix:"plus",size:"small",onClick:k[0]||(k[0]=h=>b())},{default:L(()=>[ie(w(a(n).add_period),1)]),_:1})):D("",!0),a(t).applyToAllDaysVisible?(u(),q(ke,{key:2,size:"small",category:"secondary",type:"plain",onClick:T},{default:L(()=>[ie(w(a(n).apply_to_all_days),1)]),_:1})):D("",!0)],2)):D("",!0),I(mb,{title:a(t).title,visibility:a(f)!==null,origin:a(t).type,"period-index":a(f),"origin-index":l.index,"is-new":a(g),onClose:k[1]||(k[1]=()=>{ye(f)?f.value=null:f=null,ye(g)?g.value=null:g=null})},null,8,["title","visibility","origin","period-index","origin-index","is-new"]),I(vb,{title:a(n).break_hours,visibility:a(v)!==null,origin:a(t).type,"time-out-index":a(v),"origin-index":l.index,"is-new":!1,"is-break":!0,onClose:k[2]||(k[2]=()=>{ye(v)?v.value=null:v=null})},null,8,["title","visibility","origin","time-out-index","origin-index"])],4)),[[Gr,a(t).enabled]])}});const Nb={class:"am-caewh__header"},Mb={class:"am-caewh__header-text"},Bb={class:"am-caewh__content"},Fb={name:"WeekDays"},Vb=Object.assign(Fb,{props:{responsiveClass:{type:String,default:""}},setup(l){const e=l;let t=Oe(),s=F("amLabels"),n=y(()=>t.getters["employee/getEmployee"]),i=M([{label:s.weekday_monday,value:"monday"},{label:s.weekday_tuesday,value:"tuesday"},{label:s.weekday_wednesday,value:"wednesday"},{label:s.weekday_thursday,value:"thursday"},{label:s.weekday_friday,value:"friday"},{label:s.weekday_saturday,value:"saturday"},{label:s.weekday_sunday,value:"sunday"}]),o=F("amColors"),r=y(()=>({"--am-c-caewh-primary":o.value.colorPrimary,"--am-c-caewh-bgr":o.value.colorMainBgr,"--am-c-caewh-text":o.value.colorMainText,"--am-c-caewh-text-op03":Y(o.value.colorMainText,.03),"--am-c-caewh-bgr-op03":Y(o.value.colorInpBgr,.03)}));return(c,d)=>(u(),x("div",{class:"am-caewh",style:_e(a(r))},[(u(!0),x(te,null,fe(a(n).weekDayList,(f,v)=>(u(),x("div",{key:v,class:"am-caewh__item"},[m("div",Nb,[m("div",Mb,w(a(i)[v].label),1),I(st,{modelValue:f.enabled,"onUpdate:modelValue":g=>f.enabled=g,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),m("div",Bb,[I(uu,{title:a(s).working_hours,enabled:f.enabled,index:v,type:"weekDayList","responsive-class":a(e).responsiveClass},null,8,["title","enabled","index","responsive-class"])])]))),128))],4))}});const Rb={class:"am-ces__img-holder"},qb={width:"240",height:"195",viewBox:"0 0 240 195",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ub={"clip-path":"url(#clip0_1811_81872)"},jb=["fill"],zb=["fill"],Yb=["fill"],Wb=["fill"],Hb=["fill"],Zb=["fill"],Gb=["fill"],Jb={opacity:"0.5"},Xb=["fill"],Qb=["fill"],Kb=["fill"],e0=["fill"],t0=["fill"],a0=["stroke"],s0={opacity:"0.5"},l0=["stroke"],n0=Vu('<circle cx="109.964" cy="55.167" r="34.0723" transform="rotate(-45 109.964 55.167)" fill="url(#paint0_linear_1811_81872)" fill-opacity="0.7"></circle><mask id="mask0_1811_81872" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="75" y="21" width="69" height="69"><circle cx="109.714" cy="55.167" r="34.0723" transform="rotate(-45 109.714 55.167)" fill="url(#paint1_linear_1811_81872)"></circle></mask><g mask="url(#mask0_1811_81872)"><rect x="111.095" y="4.51782" width="10.0968" height="107.245" transform="rotate(30 111.095 4.51782)" fill="url(#paint2_linear_1811_81872)" fill-opacity="0.6"></rect><rect x="125.427" y="2.67041" width="3.39099" height="107.245" transform="rotate(30 125.427 2.67041)" fill="url(#paint3_linear_1811_81872)" fill-opacity="0.6"></rect></g>',3),i0={id:"paint0_linear_1811_81872",x1:"144.037",y1:"91.6409",x2:"83.5731",y2:"31.1781",gradientUnits:"userSpaceOnUse"},o0=["stop-color"],r0=["stop-color"],c0={id:"paint1_linear_1811_81872",x1:"143.786",y1:"91.6409",x2:"83.3226",y2:"31.1781",gradientUnits:"userSpaceOnUse"},u0=["stop-color"],d0=["stop-color"],m0={id:"paint2_linear_1811_81872",x1:"116.144",y1:"4.51782",x2:"116.144",y2:"111.763",gradientUnits:"userSpaceOnUse"},p0=["stop-color"],f0=["stop-color"],g0={id:"paint3_linear_1811_81872",x1:"127.122",y1:"2.67041",x2:"127.122",y2:"109.915",gradientUnits:"userSpaceOnUse"},h0=["stop-color"],v0=["stop-color"],_0={id:"clip0_1811_81872"},y0=["fill"],b0={class:"am-ces__content"},k0={class:"am-ces__heading"},C0={class:"am-ces__text"},Na={props:{heading:{type:String,default:""},text:{type:String,default:""}},setup(l){const e=l;let t=F("amColors"),s=y(()=>({"--am-c-ces-text":t.value.colorMainText,"--am-c-ces-text-op70":Y(t.value.colorMainText,.7)}));return(n,i)=>(u(),x("div",{class:"am-ces",style:_e(a(s))},[m("div",Rb,[(u(),x("svg",qb,[m("g",Ub,[m("path",{d:"M10.0934 144.996C11.624 145.051 13.0595 145.879 14.0693 147.034C15.0791 148.184 15.6995 149.633 16.0934 151.114C16.8587 153.976 16.3878 157.359 15.5727 160.207C12.4708 159.097 10.5599 155.792 9.69496 154.053C8.32741 151.304 7.5259 145.513 10.0889 144.996",fill:a(t).colorMainText},null,8,jb),m("path",{d:"M20.033 163.676C19.0549 162.272 19.0322 160.32 19.8066 158.79C20.5809 157.264 22.0662 156.163 23.7009 155.661C24.4571 155.43 25.3356 155.33 25.9922 155.769C26.6081 156.181 26.8752 156.987 26.7937 157.721C26.7122 158.455 26.3409 159.129 25.9017 159.723C24.3937 161.765 22.5598 163.463 20.033 163.671",fill:a(t).colorMainText},null,8,zb),m("path",{d:"M20.3771 173.244C20.3771 173.244 20.3137 173.036 20.2367 172.651C20.1552 172.225 20.0465 171.677 19.9198 171.021C19.6752 169.649 19.2858 167.697 19.5801 165.541C19.8609 163.395 20.7167 161.557 21.6133 160.461C22.0526 159.908 22.4782 159.514 22.7907 159.274C22.9401 159.148 23.076 159.071 23.1575 159.007C23.2435 158.948 23.2933 158.921 23.2979 158.93C23.3296 158.966 22.5733 159.437 21.7356 160.556C20.8888 161.656 20.0737 163.458 19.793 165.573C19.5032 167.688 19.8609 169.621 20.0692 170.998C20.1779 171.691 20.2684 172.252 20.3228 172.642C20.3726 173.031 20.3952 173.249 20.3771 173.249V173.244Z",fill:a(t).colorMainText},null,8,Yb),m("path",{d:"M11.0894 149.357C11.0894 149.357 11.1392 149.434 11.2161 149.593C11.2977 149.769 11.4063 150 11.5377 150.281C11.8094 150.883 12.1988 151.757 12.6652 152.839C13.598 155.009 14.8478 158.024 16.152 161.38C17.4561 164.74 18.5656 167.81 19.3354 170.038C19.7203 171.152 20.0282 172.058 20.232 172.687C20.3271 172.986 20.4041 173.226 20.4629 173.412C20.5128 173.579 20.5354 173.665 20.5309 173.67C20.5263 173.674 20.4856 173.588 20.4222 173.425C20.3543 173.239 20.2637 173.004 20.155 172.714C19.9195 172.071 19.5935 171.179 19.195 170.088C18.3845 167.869 17.2524 164.812 15.9528 161.452C14.6486 158.097 13.426 155.076 12.5294 152.894C12.0901 151.821 11.7278 150.942 11.4652 150.308C11.3475 150.018 11.2569 149.783 11.1844 149.602C11.1211 149.439 11.0939 149.353 11.0984 149.348L11.0894 149.357Z",fill:a(t).colorMainText},null,8,Wb),m("path",{d:"M16.6956 166.913C14.8662 163.802 11.4564 161.683 7.85639 161.421C6.94167 161.353 5.83676 161.507 5.42922 162.331C5.02167 163.155 5.56507 164.128 6.18997 164.808C8.78922 167.62 13.1817 168.602 16.7273 167.162",fill:a(t).colorMainText},null,8,Hb),m("path",{d:"M9.25113 163.875C9.25113 163.875 9.4549 163.87 9.82622 163.897C10.0119 163.911 10.2383 163.925 10.4964 163.974C10.7545 164.024 11.0534 164.051 11.3749 164.137C11.6964 164.214 12.0541 164.296 12.4209 164.427C12.7968 164.536 13.1817 164.699 13.5847 164.871C14.3817 165.233 15.233 165.709 16.0391 166.325C16.8406 166.95 17.5153 167.647 18.0677 168.331C18.3304 168.679 18.584 169.014 18.7832 169.354C19.0006 169.68 19.1636 170.006 19.313 170.3C19.476 170.59 19.5711 170.876 19.6798 171.116C19.7885 171.356 19.8519 171.573 19.9062 171.75C20.0149 172.103 20.0692 172.297 20.0557 172.302C20.0104 172.32 19.7885 171.528 19.1772 170.368C19.0187 170.083 18.8511 169.766 18.6292 169.449C18.43 169.119 18.1764 168.797 17.9092 168.457C17.3613 167.792 16.6911 167.113 15.9032 166.497C15.1108 165.89 14.2821 165.419 13.4987 165.052C13.1047 164.88 12.7243 164.713 12.3575 164.599C11.9998 164.463 11.6511 164.377 11.3341 164.287C10.0617 163.965 9.24207 163.92 9.2466 163.875H9.25113Z",fill:a(t).colorMainText},null,8,Zb),m("path",{d:"M91.9065 80.3956L75.8945 162.72L73.7979 173.497L180.693 172.972C185.488 172.95 189.74 168.688 191.285 162.362L210.24 84.6386C211.413 79.8341 208.841 74.8394 205.2 74.8394L97.0099 74.9526C94.619 74.9526 92.5314 77.185 91.9065 80.3956Z",fill:a(t).colorMainBgr},null,8,Gb),m("g",Jb,[m("path",{d:"M91.9065 80.3951L75.8945 162.72L73.7979 173.497L180.693 172.972C185.488 172.949 189.74 168.688 191.285 162.362L210.24 84.6381C211.413 79.8336 208.841 74.8389 205.2 74.8389L97.0099 74.9521C94.619 74.9521 92.5314 77.1845 91.9065 80.3951Z",fill:a(t).colorMainText},null,8,Xb)]),m("path",{d:"M170.441 157.146L159.125 65.9412C158.663 62.2053 155.683 59.4159 152.169 59.4295L127.35 59.511C125.511 59.5155 123.75 60.2989 122.445 61.6846L110.663 74.2099L41.6378 74.5721C37.422 74.5948 34.1797 78.5842 34.7367 83.0718L45.2469 167.366C45.7133 171.097 48.6839 173.882 52.1933 173.873L172.488 173.638C185.887 173.914 187.164 169.961 187.164 169.961C171.808 173.362 170.441 157.159 170.441 157.15V157.146Z",fill:a(t).colorMainText},null,8,Qb),m("rect",{x:"130.984",y:"80.0801",width:"5.5062",height:"25.0888",rx:"2.7531",transform:"rotate(-45 130.984 80.0801)",fill:a(t).colorMainBgr},null,8,Kb),m("path",{d:"M147.845 104.347C142.496 98.9978 142.496 90.3249 147.845 84.9756C148.737 84.084 150.182 84.084 151.074 84.9756L178.063 111.965C181.183 115.085 181.183 120.144 178.063 123.265C174.942 126.385 169.883 126.385 166.763 123.265L147.845 104.347Z",fill:a(t).colorMainBgr},null,8,e0),m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M151.42 91.7928C151.138 91.5115 150.682 91.5115 150.401 91.7928C150.12 92.0741 150.12 92.5303 150.401 92.8116L161.801 104.212C162.083 104.493 162.539 104.493 162.82 104.212C163.101 103.931 163.101 103.474 162.82 103.193L151.42 91.7928ZM165.702 105.806C165.42 105.524 164.964 105.524 164.683 105.806C164.402 106.087 164.402 106.543 164.683 106.825L165.11 107.252C165.391 107.533 165.847 107.533 166.129 107.252C166.41 106.97 166.41 106.514 166.129 106.233L165.702 105.806Z",fill:a(t).colorMainText},null,8,t0),m("circle",{cx:"109.964",cy:"55.167",r:"37.6805",transform:"rotate(-45 109.964 55.167)",stroke:a(t).colorMainText,"stroke-width":"8"},null,8,a0),m("g",s0,[m("circle",{cx:"109.964",cy:"55.167",r:"37.6805",transform:"rotate(-45 109.964 55.167)",stroke:a(t).colorMainBgr,"stroke-width":"8"},null,8,l0)]),n0]),m("defs",null,[m("linearGradient",i0,[m("stop",{"stop-color":a(t).colorMainBgr},null,8,o0),m("stop",{offset:"1","stop-color":a(t).colorMainBgr},null,8,r0)]),m("linearGradient",c0,[m("stop",{"stop-color":a(t).colorMainBgr},null,8,u0),m("stop",{offset:"1","stop-color":a(t).colorMainBgr},null,8,d0)]),m("linearGradient",m0,[m("stop",{"stop-color":a(t).colorMainText},null,8,p0),m("stop",{offset:"1","stop-color":a(t).colorMainText,"stop-opacity":"0"},null,8,f0)]),m("linearGradient",g0,[m("stop",{"stop-color":a(t).colorMainText},null,8,h0),m("stop",{offset:"1","stop-color":a(t).colorMainText,"stop-opacity":"0"},null,8,v0)]),m("clipPath",_0,[m("rect",{width:"240",height:"194.717",fill:a(t).colorMainText},null,8,y0)])])]))]),m("div",b0,[m("div",k0,w(a(e).heading),1),m("div",C0,w(a(e).text),1)])],4))}};const x0={class:"am-caesd__item"},w0={class:"am-caesd__item-header"},T0={key:2},S0={key:0,class:"am-caesd__footer"},E0={name:"SpecialDays"},L0=Object.assign(E0,{props:{responsiveClass:{type:String,default:""}},setup(l){const e=l;let t=Oe(),s=F("amLabels"),n=F("localLanguage"),i=y(()=>t.getters["employee/getEmployee"].specialDayList),o=nt({data:null,index:null}),r=M({range:y({get:()=>t.getters["employee/getEmployee"].specialDayList[o.index].range,set:h=>{t.getters["employee/getEmployee"].specialDayList[o.index].range=h}})}),c=M([]),d=y(()=>({range:[{required:!0,message:s.select_date_warning,trigger:["submit","change"]}]}));function f(h){i.value.splice(h,1)}function v(h){o.index=h,o.data=JSON.parse(JSON.stringify(i.value[h]))}function g(h){let A=[];i.value[h].periodList.forEach(O=>{A.push({id:null,locationId:null,startTime:O.startTime,endTime:O.endTime,periodLocationList:[...O.periodLocationList],periodServiceList:[...O.periodServiceList],editing:!1})}),t.getters["employee/getEmployee"].specialDayList.push({id:null,range:[],periodList:A}),o.index=i.value.length-1,o.data={}}let b=M("");function T(h){let A=t.getters["employee/getEmployee"].specialDayList[h].periodList;c.value[h].validate(O=>{O&&A.length>0?(b.value="",o.index=null,o.data=null):b.value="Please add period to special day"})}function C(h){Object.keys(o.data).length===0?i.value.pop():i.value[h]=o.data,o.index=null,o.data=null,b.value=""}function _(){i.value.push({id:null,range:[],periodList:[]}),o.index=i.value.length-1,o.data={}}function S(h,A){h?c.value[A]=h:c.value.splice(A,1)}let P=F("amColors"),k=y(()=>({"--am-c-caesd-bgr":P.value.colorMainBgr,"--am-c-caesd-text":P.value.colorMainText,"--am-c-caesd-text-op03":Y(P.value.colorMainText,.03),"--am-c-caesd-text-op80":Y(P.value.colorMainText,.8)}));return(h,A)=>{const O=yt,E=et;return u(),x("div",{class:"am-caesd",style:_e(a(k))},[(u(!0),x(te,null,fe(a(i),($,V)=>(u(),x("div",{key:V,class:"am-caesd__content"},[m("div",x0,[m("div",w0,[a(o).index!==V?(u(),x(te,{key:0},[m("div",null,w($.range[0]?a(dt)(a(pe)($.range[0]).format("YYYY-MM-DD")):"")+" - "+w($.range[1]?a(dt)(a(pe)($.range[1]).format("YYYY-MM-DD")):""),1),I(ka,{index:V,"have-duplicate":!0,onRemove:j=>f(V),onEdit:j=>v(V),onDuplicate:j=>g(V)},null,8,["index","onRemove","onEdit","onDuplicate"])],64)):D("",!0),a(o).index===V?(u(),q(E,{key:1,ref_for:!0,ref:j=>S(j,V),class:"am-caesd__form",rules:a(d),model:a(r),"label-position":"top"},{default:L(()=>[I(O,{prop:"range"},{default:L(()=>[I(Ht,{modelValue:a(r).range,"onUpdate:modelValue":A[0]||(A[0]=j=>a(r).range=j),type:"daterange",size:"small","popper-class":"am-cap__datepicker-popper","prefix-icon":Je({components:{IconComponent:He},template:"<IconComponent icon='calendar'/>"}),format:a(Wt)(),placeholder:a(s).select_date,lang:a(n)},null,8,["modelValue","prefix-icon","format","placeholder","lang"])]),_:1})]),_:2},1032,["rules","model"])):D("",!0),a(b)?(u(),x("div",T0)):D("",!0)]),m("div",{class:R(["am-caesd__item-inner",{"am-editable":a(o).index===V}])},[I(uu,{title:a(s).special_days,enabled:!0,index:V,type:"specialDayList","apply-to-all-days-visible":!1,"header-visible":a(o).index===V,"edit-visible":a(o).index===V,"footer-visible":a(o).index===V,error:a(o).index===V?a(b):"","responsive-class":a(e).responsiveClass,onAddPeriod:A[1]||(A[1]=()=>{ye(b)?b.value="":b=""})},null,8,["title","index","header-visible","edit-visible","footer-visible","error","responsive-class"])],2)]),a(o).index===V?(u(),x("div",S0,[I(ke,{category:"secondary",type:"plain",size:"small",onClick:j=>C(V)},{default:L(()=>[ie(w(a(s).cancel),1)]),_:2},1032,["onClick"]),I(ke,{size:"small",onClick:j=>T(V)},{default:L(()=>[ie(w(a(s).save),1)]),_:2},1032,["onClick"])])):D("",!0)]))),128)),a(i).length===0?(u(),q(Na,{key:0,heading:a(s).no_special_days_yet},null,8,["heading"])):D("",!0),a(o).index===null?(u(),x("div",{key:1,class:R(a(i).length===0?"add-btn":"")},[I(ke,{size:"small",onClick:A[2]||(A[2]=$=>_())},{default:L(()=>[ie(w(a(s).add_special_day),1)]),_:1})],2)):D("",!0)],4)}}});const A0={key:0,class:"am-caedo__title_emp"},$0={class:"am-caedo__heading-item am-w-50"},I0={class:"am-caedo__heading-item am-w-30"},P0={class:"am-caedo__heading-item am-w-20"},O0={class:"am-caedo__content-item"},D0={key:0,class:"am-caedo__wrapper"},N0={class:"am-caedo__footer"},M0={key:4,class:"am-caedo__title_global"},B0={class:"am-caedo__heading-item am-w-50"},F0={class:"am-caedo__heading-item am-w-30"},V0={class:"am-caedo__heading-item am-w-20"},R0={class:"am-caedo__content-item"},q0={name:"DaysOff"},U0=Object.assign(q0,{props:{responsiveClass:{type:String,default:""}},setup(l){const e=l;let t=Oe(),s=F("amLabels"),n=F("localLanguage");const i=F("settings");let o=y(()=>t.getters["employee/getEmployee"].dayOffList),r=M([]),c=nt({data:null,index:null}),d=M({range:y({get:()=>t.getters["employee/getEmployee"].dayOffList[c.index].range,set:A=>{t.getters["employee/getEmployee"].dayOffList[c.index].range=A}}),name:y({get:()=>t.getters["employee/getEmployee"].dayOffList[c.index].name,set:A=>{t.getters["employee/getEmployee"].dayOffList[c.index].name=A}}),repeat:y({get:()=>t.getters["employee/getEmployee"].dayOffList[c.index].repeat,set:A=>{t.getters["employee/getEmployee"].dayOffList[c.index].repeat=A}})}),f=M([]),v=y(()=>({range:[{required:!0,message:s.select_date_warning,trigger:["submit","change"]}],name:[{required:!0,message:s.days_off_name_warning,trigger:["submit","change"]}]}));function g(A){o.value.splice(A,1)}function b(A){c.index=A,c.data=JSON.parse(JSON.stringify(o.value[A]))}function T(A){f.value[A].validate(O=>{O&&(c.index=null,c.data=null)})}function C(A){Object.keys(c.data).length===0?o.value.pop():o.value[A]=c.data,c.index=null,c.data=null}function _(){o.value.push({id:null,name:"",repeat:!1,range:[]}),c.index=o.value.length-1,c.data={}}function S(A){let O=A.range[0]?dt(pe(A.range[0]).format("YYYY-MM-DD")):"",E=A.range[1]?dt(pe(A.range[1]).format("YYYY-MM-DD")):"";return`${O} - ${E}`}function P(A,O){A?f.value[O]=A:f.value.splice(O,1)}Ze(()=>{r.value=i.daysOff.map(A=>new Object({range:[A.startDate,A.endDate],name:A.name,repeat:A.repeat}))});let k=F("amColors"),h=y(()=>({"--am-c-caedo-bgr":k.value.colorMainBgr,"--am-c-caedo-text":k.value.colorMainText,"--am-c-caedo-text-op80":Y(k.value.colorMainText,.8),"--am-c-caedo-text-op03":Y(k.value.colorMainText,.03)}));return(A,O)=>{const E=yt,$=et;return u(),x("div",{class:"am-caedo",style:_e(a(h))},[a(r).length?(u(),x("span",A0,w(a(s).employee_days_off),1)):D("",!0),a(o).length||a(r).length?(u(),x("div",{key:1,class:R(["am-caedo__heading",a(e).responsiveClass])},[m("div",$0,w(a(s).date),1),m("div",I0,w(a(s).name),1),m("div",P0,w(a(s).days_off_repeat_yearly),1)],2)):D("",!0),(u(!0),x(te,null,fe(a(o),(V,j)=>(u(),x("div",{key:j,class:"am-caedo__content"},[m("div",O0,[m("div",{class:R(["am-caedo__content-item__inner am-w-50",a(e).responsiveClass])},[m("div",{class:R(["am-caedo__content-item__label",a(e).responsiveClass])},w(a(s).date),3),ie(" "+w(S(V)),1)],2),m("div",{class:R(["am-caedo__content-item__inner am-w-30",a(e).responsiveClass])},[m("div",{class:R(["am-caedo__content-item__label",a(e).responsiveClass])},w(a(s).name),3),ie(" "+w(V.name),1)],2),m("div",{class:R(["am-caedo__content-item__inner am-w-20",a(e).responsiveClass])},[m("div",{class:R(["am-caedo__content-item__label",a(e).responsiveClass])},w(a(s).days_off_repeat_yearly),3),ie(" "+w(V.repeat?a(s).yes:a(s).no),1)],2),a(c).index===null?(u(),q(ka,{key:0,index:j,onRemove:B=>g(j),onEdit:B=>b(j)},null,8,["index","onRemove","onEdit"])):D("",!0)]),a(c).index===j?(u(),x("div",D0,[I($,{ref_for:!0,ref:B=>P(B,j),class:"am-caedo__form",rules:a(v),model:a(d),"label-position":"top"},{default:L(()=>[I(E,{label:`${a(s).date}:`,prop:"range"},{default:L(()=>[I(Ht,{modelValue:a(d).range,"onUpdate:modelValue":O[0]||(O[0]=B=>a(d).range=B),type:"daterange","popper-class":"am-cap__datepicker-popper",format:a(Wt)(),placeholder:a(s).select_date,lang:a(n)},null,8,["modelValue","format","placeholder","lang"])]),_:1},8,["label"]),I(E,{label:`${a(s).name}:`,prop:"name"},{default:L(()=>[I(ht,{modelValue:a(d).name,"onUpdate:modelValue":O[1]||(O[1]=B=>a(d).name=B)},null,8,["modelValue"])]),_:1},8,["label"]),I(E,{prop:"repeat"},{default:L(()=>[I(gt,{modelValue:a(d).repeat,"onUpdate:modelValue":O[2]||(O[2]=B=>a(d).repeat=B),label:a(s).days_off_repeat_yearly},null,8,["modelValue","label"])]),_:1})]),_:2},1032,["rules","model"]),m("div",N0,[I(ke,{category:"secondary",size:"small",type:"plain",onClick:B=>C(j)},{default:L(()=>[ie(w(a(s).cancel),1)]),_:2},1032,["onClick"]),I(ke,{size:"small",onClick:B=>T(j)},{default:L(()=>[ie(w(a(s).save),1)]),_:2},1032,["onClick"])])])):D("",!0)]))),128)),a(o).length===0&&a(r).length===0?(u(),q(Na,{key:2,heading:a(s).no_days_off_yet},null,8,["heading"])):D("",!0),a(c).index===null?(u(),x("div",{key:3,class:R(a(o).length===0&&a(r).length===0?"add-btn":"")},[I(ke,{size:"small",onClick:O[3]||(O[3]=V=>_())},{default:L(()=>[ie(w(a(s).add_day_off),1)]),_:1})],2)):D("",!0),a(r).length?(u(),x("span",M0,w(a(s).company_days_off),1)):D("",!0),a(r).length?(u(),x("div",{key:5,class:R(["am-caedo__heading",a(e).responsiveClass])},[m("div",B0,w(a(s).date),1),m("div",F0,w(a(s).name),1),m("div",V0,w(a(s).days_off_repeat_yearly),1)],2)):D("",!0),(u(!0),x(te,null,fe(a(r),(V,j)=>(u(),x("div",{key:j,class:"am-caedo__content"},[m("div",R0,[m("div",{class:R(["am-caedo__content-item__inner am-w-50",a(e).responsiveClass])},[m("div",{class:R(["am-caedo__content-item__label",a(e).responsiveClass])},w(a(s).date),3),ie(" "+w(S(V)),1)],2),m("div",{class:R(["am-caedo__content-item__inner am-w-30",a(e).responsiveClass])},[m("div",{class:R(["am-caedo__content-item__label",a(e).responsiveClass])},w(a(s).name),3),ie(" "+w(V.name),1)],2),m("div",{class:R(["am-caedo__content-item__inner am-w-20",a(e).responsiveClass])},[m("div",{class:R(["am-caedo__content-item__label",a(e).responsiveClass])},w(a(s).days_off_repeat_yearly),3),ie(" "+w(V.repeat?a(s).yes:a(s).no),1)],2)])]))),128))],4)}}});const j0={class:"am-cc__edit"},z0={class:"am-cc__edit-text"},Y0={class:"am-cc__edit-text"},W0={class:"am-cc__edit"},H0={class:"am-cc__edit-text"},Z0={class:"am-cc__edit-text"},G0={class:"am-cc__edit"},J0={class:"am-cc__edit-text"},X0={class:"am-cc__edit-text"},Q0={name:"StripeConnect"},K0=Object.assign(Q0,{setup(l){let e=Oe(),t=F("amLabels"),s=y(()=>e.getters["auth/getStripeProvider"]),n=M(!1);function i(b){b.stopPropagation(),n.value=!n.value}function o(b){um(e,b),d()}function r(){mm(e),d()}function c(){dm(e),d()}function d(){n.value=!1}let f=F("amFonts"),v=F("amColors"),g=y(()=>({"--am-c-cc-error":v.value.colorError,"--am-c-cc-error-op15":Y(v.value.colorError,.15),"--am-c-cc-bgr":v.value.colorMainBgr,"--am-c-cc-text":v.value.colorMainText,"--am-c-cc-text-op10":Y(v.value.colorMainText,.1),"--am-c-cc-text-op15":Y(v.value.colorMainText,.15),"--am-font-family":f.value.fontFamily}));return(b,T)=>{const C=vl;return a(s)&&a(s).id&&a(s).completed?(u(),q(C,{key:0,ref:"stripeConnectRef",visible:a(n),"onUpdate:visible":T[2]||(T[2]=_=>ye(n)?n.value=_:n=_),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":a(g),trigger:"click"},{reference:L(()=>[I(ke,{onClick:i},{default:L(()=>[ie(w(a(t).stripe_connect)+" "+w("("+(a(s).email?a(s).email:a(s).id)+")"),1)]),_:1})]),default:L(()=>[Yt((u(),x("div",j0,[m("div",{class:"am-cc__edit-item",onClick:T[0]||(T[0]=_=>r())},[m("span",z0,w(a(t).stripe_preview),1)]),m("div",{class:"am-cc__edit-item",onClick:T[1]||(T[1]=_=>c())},[m("span",Y0,w(a(t).disconnect),1)])])),[[a(ra),d]])]),_:1},8,["visible","popper-style"])):a(s)&&a(s).id&&!a(s).completed?(u(),q(C,{key:1,ref:"stripeConnectRef",visible:a(n),"onUpdate:visible":T[5]||(T[5]=_=>ye(n)?n.value=_:n=_),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":a(g),trigger:"click"},{reference:L(()=>[I(ke,{onClick:i},{default:L(()=>[ie(w(a(t).stripe_connect)+" "+w("("+(a(s).email?a(s).email:a(s).id)+")"),1)]),_:1})]),default:L(()=>[Yt((u(),x("div",W0,[m("div",{class:"am-cc__edit-item",onClick:T[3]||(T[3]=_=>o(a(s).type))},[m("span",H0,w(a(t).stripe_onboard),1)]),m("div",{class:"am-cc__edit-item",onClick:T[4]||(T[4]=_=>c())},[m("span",Z0,w(a(t).disconnect),1)])])),[[a(ra),d]])]),_:1},8,["visible","popper-style"])):(u(),q(C,{key:2,ref:"stripeConnectRef",visible:a(n),"onUpdate:visible":T[8]||(T[8]=_=>ye(n)?n.value=_:n=_),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":a(g),trigger:"click"},{reference:L(()=>[I(ke,{onClick:i},{default:L(()=>[ie(w(a(t).stripe_connect),1)]),_:1})]),default:L(()=>[Yt((u(),x("div",G0,[m("div",{class:"am-cc__edit-item",onClick:T[6]||(T[6]=_=>o("standard"))},[m("span",J0,w(a(t).stripe_account_standard),1)]),m("div",{class:"am-cc__edit-item",onClick:T[7]||(T[7]=_=>o("express"))},[m("span",X0,w(a(t).stripe_account_express),1)])])),[[a(ra),d]])]),_:1},8,["visible","popper-style"]))}}});const ek=["innerHTML"],tk={key:2,class:"am-caedo__apple"},ak={class:"am-caedo__apple__connect"},sk={props:{responsiveClass:{type:String,default:""}},setup(l){const e=l;let t=M(""),s=M("error"),n=M(!1);function i(){n.value=!1,t.value=""}const o=Oe(),r=F("baseUrls"),c=F("settings");let d=F("amLabels"),f=y(()=>o.getters["auth/getGoogleLoading"]||o.getters["auth/getOutlookLoading"]||o.getters["auth/getAppleLoading"]||o.getters["auth/getStripeLoading"]||o.getters["auth/getZoomLoading"]),v=y(()=>{let E=o.getters["auth/getZoomUsers"];return E.length?E.map($=>({value:$.id,label:`${$.first_name} ${$.last_name} (${$.email})`})):[]}),g=y(()=>{let E=o.getters["auth/getGoogleCalendars"];return E.length?E.map($=>({value:$.calendarId,label:$.summary})):[]}),b=y(()=>{let E=o.getters["auth/getOutlookCalendars"];return E.length?E.map($=>({value:$.id,label:$.name})):[]}),T=y(()=>{let E=o.getters["auth/getAppleCalendars"];return E.length?E.map($=>({value:$.id,label:$.name})):[]}),C=M(null),_=M({iCloudId:y({get:()=>o.getters["employee/getEmployeeAppleCalendarICloudId"],set:E=>{o.commit("employee/setEmployeeAppleCalendarICloudId",E||"")}}),appSpecificPassword:y({get:()=>o.getters["employee/getEmployeeAppleCalendarAppSpecificPassword"],set:E=>{o.commit("employee/setEmployeeAppleCalendarAppSpecificPassword",E||null)}})}),S=y(()=>o.getters["employee/getGoogleToken"]?d.google_sign_out:d.google_sign_in),P=y(()=>o.getters["employee/getOutlookToken"]?d.outlook_sign_out:d.outlook_sign_in),k=M({googleId:y({get:()=>o.getters["employee/getGoogleCalendarId"],set:E=>{o.commit("employee/setGoogleCalendarId",E||"")}}),googleBtn:"",outlookId:y({get:()=>o.getters["employee/getOutlookCalendarId"],set:E=>{o.commit("employee/setOutlookCalendarId",E||"")}}),outlookBtn:"",zoomUserId:y({get:()=>o.getters["employee/getZoomUserId"],set:E=>{o.commit("employee/setZoomUserId",E||"")}}),appleId:y({get:()=>o.getters["employee/getAppleCalendarId"],set:E=>{o.commit("employee/setAppleCalendarId",E||"")}})}),h=M({googleId:{template:Ye.select,props:{itemName:"googleId",label:d.google_calendar,placeholder:"",class:y(()=>`am-caepif__item ${e.responsiveClass}`),disabled:y(()=>!o.getters["employee/getGoogleToken"]),clearable:!1,options:g.value,loading:y(()=>o.getters["auth/getGoogleLoading"]),loadingIcon:"loading"}},googleBtn:{template:Je(ke),props:{class:y(()=>`am-caepif__item am-google-calendar-button ${e.responsiveClass}`),category:y(()=>"primary")},slots:{default:y(()=>`<img src="${r.wpAmeliaPluginURL}/v3/src/assets/img/cabinet/google-button.svg" alt="Google" />${S.value}`)},handlers:{click:()=>{o.getters["employee/getGoogleToken"]?lm(o):sm(o)}}},outlookId:{template:Ye.select,props:{itemName:"outlookId",label:d.outlook_calendar,placeholder:"",class:y(()=>`am-caepif__item ${e.responsiveClass}`),disabled:y(()=>!o.getters["employee/getOutlookToken"]),clearable:!1,options:b.value,loading:y(()=>o.getters["auth/getOutlookLoading"]),loadingIcon:"loading"}},outlookBtn:{template:Je(ke),props:{class:y(()=>`am-caepif__item am-outlook-button ${e.responsiveClass}`),category:y(()=>"primary")},slots:{default:y(()=>`<div class="am-outlook-img"><img src="${r.wpAmeliaPluginURL}/v3/src/assets/img/cabinet/outlook-calendar.png" alt="Outlook"/></div>${P.value}`)},handlers:{click:()=>{o.getters["employee/getOutlookToken"]?om(o):im(o)}}},zoomUserId:{template:Ye.select,props:{itemName:"zoomUserId",label:d.zoom_user,placeholder:d.zoom_user_placeholder,class:y(()=>`am-caepif__item ${e.responsiveClass}`),options:v.value}},appleId:{template:Ye.select,props:{itemName:"appleId",label:d.apple_calendar,placeholder:"",class:y(()=>`am-caepif__item ${e.responsiveClass}`),disabled:!1,clearable:y(()=>!Sa.value),options:y(()=>T.value),loading:y(()=>o.getters["auth/getAppleLoading"]),loadingIcon:"loading"}}});Ze(()=>{C.value.contentVisibility=Sa.value}),gl(()=>{c.zoom.enabled||delete h.value.zoomUserId,c.googleCalendar.enabled||(delete h.value.googleId,delete h.value.googleBtn),c.outlookCalendar.enabled||(delete h.value.outlookId,delete h.value.outlookBtn),c.appleCalendar||delete h.value.appleId});function A(E){const $={iCloudId:E.getters["employee/getEmployeeAppleCalendarICloudId"],appSpecificPassword:E.getters["employee/getEmployeeAppleCalendarAppSpecificPassword"]};De.post("/apple/connect/"+E.getters["employee/getId"],{employeeAppleCalendar:$}).then(()=>{E.commit("employee/setEmployeeAppleCalendarICloudId",$.iCloudId),E.commit("employee/setEmployeeAppleCalendarAppSpecificPassword",$.appSpecificPassword),Pi(E)}).catch(V=>{n.value=!0,t.value=V.response.data.message,s.value="error"}).finally(()=>{n.value=!0})}function O(E){E.commit("auth/setAppleLoading",!0),De.post("/apple/disconnect-employee/"+E.getters["employee/getId"]).then(()=>{E.commit("employee/setEmployeeAppleCalendarICloudId",null),E.commit("employee/setEmployeeAppleCalendarAppSpecificPassword",null),Sa.value=!1,Pi(E),T.value=E.getters["auth/getAppleCalendars"]}).catch($=>{console.log($)}).finally(()=>{E.commit("auth/setAppleLoading",!1)})}return(E,$)=>{const V=yt,j=et;return a(f)?(u(),q(Zt,{key:1})):(u(),q(j,{key:0,ref:"employeeFormRef",model:a(k),"label-position":"top",class:R(["am-caedo",e.responsiveClass])},{default:L(()=>[a(c).payments.stripe.enabled&&a(c).payments.stripe.connect.enabled?(u(),q(K0,{key:0})):D("",!0),m("div",{class:R(["am-caepif__block",e.responsiveClass])},[(u(!0),x(te,null,fe(a(h),(B,G)=>(u(),q(Tt(B.template),Dt({key:G,ref_for:!0,ref:"customerCollectorRef",modelValue:a(k)[G],"onUpdate:modelValue":H=>a(k)[G]=H},B.props,so(B.handlers?B.handlers:{})),{default:L(()=>[B.slots&&B.slots.default?(u(),x("div",{key:0,innerHTML:B.slots.default},null,8,ek)):D("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue"]))),128))],2),a(n)?(u(),q(wt,{key:1,type:"error","show-border":!0,"close-after":5e3,onClose:i,onTriggerClose:i},{default:L(()=>[ie(w(a(t)),1)]),_:1})):D("",!0),a(c).appleCalendar?(u(),x("div",tk,[I(Xr,null,{default:L(()=>[I(Jr,{side:!0,delay:500,ref_key:"appleVisibility",ref:C},{heading:L(()=>[ie(w(a(d).apple_calendar_personal),1)]),default:L(()=>[m("div",ak,[I(V,{label:a(d).apple_icloud_id,class:"am-caedo__apple__connect__item"},{default:L(()=>[I(ht,{modelValue:a(_).iCloudId,"onUpdate:modelValue":$[0]||($[0]=B=>a(_).iCloudId=B),disabled:a(Sa),placeholder:a(d).apple_icloud_id},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),I(V,{label:a(d).apple_app_specific_password,class:"am-caedo__apple__connect__item"},{default:L(()=>[I(ht,{modelValue:a(_).appSpecificPassword,"onUpdate:modelValue":$[1]||($[1]=B=>a(_).appSpecificPassword=B),type:"password",showPassword:!0,disabled:a(Sa),placeholder:a(d).apple_app_specific_password},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),I(ke,{onClick:$[2]||($[2]=B=>a(Sa)?O(a(o)):A(a(o)))},{default:L(()=>[ie(w(a(Sa)?a(d).apple_disconnect:a(d).apple_connect),1)]),_:1})])]),_:1},512)]),_:1})])):D("",!0)]),_:1},8,["model","class"]))}}};const lk={props:{tabActive:{type:String,required:!0},passwordActive:{type:Boolean,default:!1}},emits:["changePassword","savePassword","saveChanges"],setup(l,{emit:e}){const t=l;let s=F("amLabels");function n(){t.tabActive==="password"?e("savePassword"):e("saveChanges")}let i=F("amColors"),o=y(()=>({"--am-c-caepf-text-op15":Y(i.value.colorMainText,.15)}));return(r,c)=>(u(),x("div",{class:R(["am-caepf",{"am-single-btn":t.tabActive!=="details"||t.passwordActive}]),style:_e(a(o))},[t.tabActive==="details"&&!t.passwordActive?(u(),q(ke,{key:0,size:"medium",category:"secondary",type:"plain",onClick:c[0]||(c[0]=d=>e("changePassword"))},{default:L(()=>[ie(w(a(s).change_password),1)]),_:1})):D("",!0),I(ke,{size:"medium",onClick:n},{default:L(()=>[ie(w(t.tabActive!=="password"?a(s).save:a(s).change_password),1)]),_:1})],6))}},nk={props:{responsiveClass:{type:String,default:""}},setup(l,{expose:e}){const t=l,s=Oe();let n=F("amLabels"),i=M(null),o=M({newPass:y({get:()=>s.getters["auth/getNewPassword"],set:d=>{s.commit("auth/setNewPassword",d||"")}}),confirmPass:y({get:()=>s.getters["auth/getConfirmPassword"],set:d=>{s.commit("auth/setConfirmPassword",d||"")}})}),r=M({newPass:{template:Ye.text,props:{itemName:"newPass",itemType:"password",showPassword:!0,label:n.new_password_colon,placeholder:"",minLength:3,class:y(()=>`am-capp__item ${t.responsiveClass}`)}},confirmPass:{template:Ye.text,props:{itemName:"confirmPass",itemType:"password",showPassword:!0,label:n.new_password_colon_retype,placeholder:"",minLength:3,class:y(()=>`am-capp__item ${t.responsiveClass}`)}}}),c=M({newPass:[{required:!0,message:n.new_password_required,trigger:"submit"},{min:4,message:n.new_password_length,trigger:"submit"}],confirmPass:[{required:!0,message:n.new_password_required,trigger:"submit"},{min:4,message:n.new_password_length,trigger:"submit"},{validator:()=>s.getters["auth/getNewPassword"]===s.getters["auth/getConfirmPassword"],message:n.passwords_not_match,trigger:"submit"}]});return e({passFormRef:i}),(d,f)=>{const v=et;return u(),q(v,{ref_key:"passFormRef",ref:i,model:a(o),rules:a(c),"label-position":"top",class:R(["am-capi__form",l.responsiveClass])},{default:L(()=>[(u(!0),x(te,null,fe(a(r),(g,b)=>(u(),q(Tt(g.template),Dt({key:g.props.itemName,ref_for:!0,ref:"customerPassCollectorRef",modelValue:a(o)[b],"onUpdate:modelValue":T=>a(o)[b]=T},g.props),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"])}}};const ik=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),ok={name:"CabinetEmployeeProfile"},rk=Object.assign(ok,{setup(l){let e=Oe();const t=F("settings");let s=F("amLabels"),n=M(null);const{width:i}=es(n);let o=y(()=>tt(i.value));Be("pageWidth",i);let r=y(()=>e.getters["entities/getReady"]);const c=M("details");let d=M(""),f=M("success"),v=M(!1);function g(){v.value=!1}function b(){v.value=!1,d.value=""}let T=M(null),C=y(()=>e.getters["employee/getEmployee"]),_=y(()=>e.getters["auth/getGoogleLoading"]||e.getters["auth/getOutlookLoading"]||e.getters["auth/getAppleLoading"]||e.getters["auth/getStripeLoading"]||e.getters["auth/getZoomLoading"]),S=M(!1),P=F("timeZone");function k(){T.value.employeeFormRef.validate(j=>{!j||(S.value=!0,De.post("/users/providers/"+C.value.id,Ru(e,P.value),Object.assign(Ue(e),{params:{source:"cabinet-provider"}})).then(()=>{d.value=s.profile_data_success,f.value="success"}).catch(B=>{d.value=B.response.data.message,f.value="error"}).finally(()=>{v.value=!0,S.value=!1}))})}let h=M(null),A=M(!1);function O(){A.value=!0,c.value="password"}function E(){h.value.passFormRef.validate(j=>{if(j){let B=e.getters["auth/getProfile"];S.value=!0,De.post("/users/providers/"+B.id,{password:e.getters["auth/getNewPassword"]},Ue(e)).then(()=>{d.value=s.password_success,A.value=!1,c.value="details",e.commit("auth/setNewPassword",""),e.commit("auth/setConfirmPassword","")}).catch(()=>{v.value=!0}).finally(()=>{S.value=!1})}})}let $=F("amColors"),V=y(()=>({"--am-c-caep-primary":$.value.colorPrimary,"--am-c-caep-text":$.value.colorMainText,"--am-c-caep-text-op10":Y($.value.colorMainText,.1)}));return(j,B)=>{const G=Qa,H=Ka;return u(),x("div",{ref_key:"pageContainer",ref:n,class:"am-caep",style:_e(a(V))},[a(r)&&!a(S)&&!a(_)?(u(),x("div",{key:0,class:R(["am-caep__inner",a(o)])},[a(v)?(u(),q(wt,{key:0,type:a(f),"show-border":!0,"close-after":5e3,"custom-class":"am-capi__alert",onClose:b,onTriggerClose:b},{title:L(()=>[ik,ie(" "+w(a(d)),1)]),_:1},8,["type"])):D("",!0),I(H,{modelValue:c.value,"onUpdate:modelValue":B[0]||(B[0]=X=>c.value=X)},{default:L(()=>[I(G,{label:a(s).details,name:"details",onClick:g},{default:L(()=>[I(Gy,{ref_key:"detailsRef",ref:T,"responsive-class":a(o)},null,8,["responsive-class"])]),_:1},8,["label"]),a(t).roles.allowConfigureServices?(u(),q(G,{key:0,label:a(s).heading_services,name:"services"},{default:L(()=>[I(ob,{"responsive-class":a(o)},null,8,["responsive-class"])]),_:1},8,["label"])):D("",!0),a(t).roles.allowConfigureSchedule?(u(),q(G,{key:1,label:a(s).working_hours,name:"workingHours"},{default:L(()=>[I(Vb,{"responsive-class":a(o)},null,8,["responsive-class"])]),_:1},8,["label"])):D("",!0),a(t).roles.allowConfigureSpecialDays?(u(),q(G,{key:2,label:a(s).special_days,name:"specialDays"},{default:L(()=>[I(L0,{"responsive-class":a(o)},null,8,["responsive-class"])]),_:1},8,["label"])):D("",!0),a(t).roles.allowConfigureDaysOff?(u(),q(G,{key:3,label:a(s).days_off,name:"daysOff"},{default:L(()=>[I(U0,{"responsive-class":a(o)},null,8,["responsive-class"])]),_:1},8,["label"])):D("",!0),a(A)?(u(),q(G,{key:4,label:a(s).password,name:"password"},{default:L(()=>[a(S)?(u(),q(Oi,{key:1,"item-direction":"column",count:2})):(u(),q(nk,{key:0,ref_key:"changePassRef",ref:h},null,512))]),_:1},8,["label"])):D("",!0),a(t).zoom.enabled||a(t).googleCalendar.enabled||a(t).outlookCalendar.enabled||a(t).appleCalendar||a(t).payments.stripe.enabled&&a(t).payments.stripe.connect.enabled?(u(),q(G,{key:5,label:a(s).integrations_settings,name:"integrations"},{default:L(()=>[I(sk,{"responsive-class":a(o)},null,8,["responsive-class"])]),_:1},8,["label"])):D("",!0)]),_:1},8,["modelValue"]),I(lk,{"tab-active":c.value,"password-active":a(A),onChangePassword:O,onSavePassword:E,onSaveChanges:k},null,8,["tab-active","password-active"])],2)):(u(),q(Zt,{key:1}))],4)}}});function du(l,e){De.get("/users/customers",{params:_l(l)}).then(t=>{e(t.data.data.users)}).catch(()=>{e([])})}function fl(l,e="",t={},s=()=>{}){l.commit("customerInfo/setLoading",!0),setTimeout(()=>{du(Object.assign({search:e,page:1,limit:ot.general.customersFilterLimit,skipCount:1},t),n=>{l.commit("customerInfo/setCustomers",n),l.commit("customerInfo/setLoading",!1),s()})},500)}function Oo(l){l.getters["customerInfo/getCustomers"].length||fl(l)}const ck={key:0,class:"am-capf__zone"},uk={class:"am-capf__menu"},dk=m("span",{class:"am-icon-filter"},null,-1),mk={key:0},pk={key:0,class:"am-capf__list"},fk=["onClick"],gk=m("span",{class:"am-icon-close"},null,-1),hk=[gk],vk={name:"CabinetFilters"},Do=Object.assign(vk,{props:{paramList:{type:[Object,Array],default:()=>[]},stepKey:{type:String,default:""},responsiveClass:{type:String,default:""},empty:{type:Boolean,default:!1}},emits:["changeFilters","addAppointment"],setup(l,{emit:e}){const t=l;let s=Oe(),n=y(()=>s.getters["entities/getReady"]),i=y(()=>s.getters.getLoading),o=y(()=>t.stepKey==="packages"?"packagesList":t.stepKey);const r=F("shortcodeData"),c=F("settings");let d=F("amCustomize");const f=F("labels"),v=F("localLanguage");let g=y(()=>c.general.usedLanguages.includes(v.value)),b=y(()=>{let ee=nt({...f});if(t.stepKey){let le=d.value[o.value].translations;le&&Object.keys(le).forEach(W=>{le[W][v.value]&&g.value?ee[W]=le[W][v.value]:le[W].default&&(ee[W]=le[W].default)})}return ee});function T(ee){return ee==="customers"?"user":ee==="services"?"service":ee==="providers"?"employee":ee==="locations"?"locations":ee==="packages"?"shipment":ee==="events"?"star-outline":""}function C(){e("changeFilters")}let _=F("containerWidth"),S={components:{IconComponent:He},template:'<IconComponent icon="filter"/>'},P=M(!1),k=M({dates:y({get:()=>s.getters["cabinetFilters/getDates"],set:ee=>{qu(ee[0],ee[1]),s.commit("cabinetFilters/setDates",ee),e("changeFilters")}}),customers:y({get:()=>s.getters["cabinetFilters/getCustomers"],set:ee=>{s.commit("cabinetFilters/setCustomers",ee)}}),services:y({get:()=>s.getters["cabinetFilters/getServices"],set:ee=>{s.commit("cabinetFilters/setServices",ee)}}),providers:y({get:()=>s.getters["cabinetFilters/getProviders"],set:ee=>{s.commit("cabinetFilters/setProviders",ee)}}),locations:y({get:()=>s.getters["cabinetFilters/getLocations"],set:ee=>{s.commit("cabinetFilters/setLocations",ee)}}),packages:y({get:()=>s.getters["cabinetFilters/getPackages"],set:ee=>{s.commit("cabinetFilters/setPackages",ee)}}),events:y({get:()=>s.getters["cabinetFilters/getEvents"],set:ee=>{s.commit("cabinetFilters/setEvents",ee)}})}),h=y(()=>t.stepKey==="events"?s.getters["cabinetFilters/getEventFiltersOption"](r.value.cabinetType):t.stepKey==="packages"?s.getters["cabinetFilters/getPackageFilterOptions"]:s.getters["cabinetFilters/getAppointmentFilterOptions"](r.value.cabinetType)),A=y(()=>{let ee=0;return Object.keys(h.value).forEach(le=>{d.value[o.value].options[`${le}Filter`].visibility&&(le==="customers"||le==="events"||h.value[le].length>0)&&ee++}),ee});function O(ee,le){switch(ee){case"customers":$(le);break;case"events":V(le);break}}function E(){r.value.cabinetType==="employee"&&$("",s.getters["auth/getPreloadedCustomers"])}function $(ee="",le=[]){if(le.length){s.dispatch("cabinetFilters/injectCustomerOptions",le);return}setTimeout(()=>{du({search:ee,page:1,limit:ot.general.customersFilterLimit,skipCount:1},W=>{s.dispatch("cabinetFilters/injectCustomerOptions",W),s.getters["auth/getPreloadedCustomers"].length===0&&s.commit("auth/setPreloadedCustomers",W)})},500)}function V(ee="",le=[]){if(le.length){s.dispatch("cabinetFilters/injectEventsOptions",le);return}setTimeout(()=>{td({dates:[pe().format("YYYY-MM-DD")],timeZone:s.getters["cabinet/getTimeZone"],group:!0,page:1,limit:c.general.itemsPerPageBackEnd,search:ee},W=>{s.dispatch("cabinetFilters/injectEventsOptions",W)})},500)}function j(ee){let le=ee.charAt(0).toUpperCase()+ee.slice(1);s.commit(`cabinetFilters/set${le}`,[]),e("changeFilters")}let B=y(()=>d.value[o.value].options),G=y(()=>t.stepKey==="appointments"?r.value.cabinetType==="employee"?B.value.servicesFilter.visibility||B.value.customersFilter.visibility||B.value.locationsFilter.visibility:B.value.servicesFilter.visibility||B.value.providersFilter.visibility||B.value.locationsFilter.visibility:t.stepKey==="events"?r.value.cabinetType==="employee"?B.value.eventsFilter.visibility||B.value.customersFilter.visibility||B.value.locationsFilter.visibility:B.value.eventsFilter.visibility||B.value.providersFilter.visibility||B.value.locationsFilter.visibility:B.value.packagesFilter.visibility||B.value.servicesFilter.visibility||B.value.providersFilter.visibility||B.value.locationsFilter.visibility),H=y(()=>t.stepKey==="appointments"?r.value.cabinetType==="employee"?!!(h.value.services.length||h.value.customers.length||h.value.locations.length):!!(h.value.services.length||h.value.providers.length||h.value.locations.length):t.stepKey==="events"?r.value.cabinetType==="employee"?!!(h.value.events.length||h.value.customers.length||h.value.locations.length):!!(h.value.events.length||h.value.providers.length||h.value.locations.length):!!(h.value.packages.length||h.value.services.length||h.value.providers.length||h.value.locations.length));Ze(()=>{E()});let X=F("amColors"),Q=y(()=>({"--am-c-capf-heading-text":X.value.colorMainText,"--am-c-capf-text":X.value.colorInpText,"--am-c-capf-text-op10":Y(X.value.colorInpText,.1),"--am-c-select-border":X.value.colorInpBorder,"--am-c-select-bgr":X.value.colorInpBgr}));return(ee,le)=>!a(i)&&a(n)?(u(),x("div",{key:0,class:"am-capf",style:_e(a(Q))},[a(_)<=480&&a(B).timeZone.visibility&&a(t).stepKey!=="packages"?(u(),x("div",ck,[I(Ii,{size:"small"})])):D("",!0),m("div",uk,[a(_)<=480&&a(B).timeZone.visibility&&a(t).stepKey==="packages"?(u(),q(Ii,{key:0,size:"small"})):D("",!0),a(t).stepKey!=="packages"?(u(),q(Ht,{key:1,modelValue:a(k).dates,"onUpdate:modelValue":le[0]||(le[0]=W=>a(k).dates=W),type:"daterange",editable:!1,size:"small",clearable:!1,format:a(Wt)(),style:_e(a(Q)),lang:a(v),class:R(["am-capf__menu-datepicker",a(t).responsiveClass]),"popper-class":"am-capf__menu-datepicker-popper","custom-input-display":!0},null,8,["modelValue","format","style","lang","class"])):D("",!0),!a(t).empty&&a(G)&&a(H)?(u(),q(ke,{key:2,icon:a(S),"icon-only":a(_)<=700,"custom-class":"am-capf__menu-btn",size:"small",category:"primary",type:a(B).filterBtn?a(B).filterBtn.buttonType:"filled",onClick:le[1]||(le[1]=W=>ye(P)?P.value=!a(P):P=!a(P))},{default:L(()=>[dk,a(_)>700?(u(),x("span",mk,w(a(b).filters),1)):D("",!0)]),_:1},8,["icon","icon-only","type"])):D("",!0)]),I(_a,{name:"am-slide-fade"},{default:L(()=>[a(P)&&!a(t).empty?(u(),x("div",pk,[(u(!0),x(te,null,fe(Object.keys(a(h)),W=>(u(),x(te,{key:W},[(a(h)[W].length>0||W==="customers"||W==="events")&&a(d)[a(o)].options[`${W}Filter`].visibility?(u(),x("span",{key:0,class:R(["am-capf__list-item",[{"am-selected":a(k)[W].length>0},`am-capf__list-item-${a(A)}`,a(t).responsiveClass]])},[I(We,{id:`am-select-${W}`,modelValue:a(k)[W],"onUpdate:modelValue":se=>a(k)[W]=se,multiple:W!=="customers"&&W!=="events",remote:"",clearable:"",filterable:W==="customers"||W==="events",placeholder:a(b)[W+(W==="customers"?"":"_dropdown")],"prefix-icon":T(W),"collapse-tags":!0,size:"small","popper-class":"am-filter-select-popper","remote-method":se=>{O(W,se)},onChange:C,onClear:E},{default:L(()=>[(u(!0),x(te,null,fe(a(h)[W],se=>(u(),q(Ve,{key:se.id,value:se.id,label:se.firstName?se.firstName+" "+se.lastName:se.name},null,8,["value","label"]))),128))]),_:2},1032,["id","modelValue","onUpdate:modelValue","multiple","filterable","placeholder","prefix-icon","remote-method"]),a(k)[W].length>0?(u(),x("span",{key:0,class:"am-capf__clear",onClick:se=>j(W)},hk,8,fk)):D("",!0)],2)):D("",!0)],64))),128))])):D("",!0)]),_:1})],4)):D("",!0)}});function _k(l,e){let t=l.getters["entities/getService"](e.serviceId),s=0,n=0;return e.bookings.forEach(i=>{if(["approved","pending"].includes(i.status)){let o=i.duration?i.duration:t.duration;o>s&&(s=o);let r=0;i.extras.forEach(c=>{r+=t.extras.find(f=>f.id===c.extraId).duration*c.quantity}),r>n&&(n=r)}}),s+n}function mu(l,e,t){for(let s in l)l[s].appointments.forEach(n=>{let i={};n.bookings.forEach(r=>{r.customerId in i||(i[r.customerId]=[]),i[r.customerId][r.id]=r.status});let o={};for(let r in i)for(let c in i[r])(!(r in o)||i[r][c]==="approved"||i[r][c]==="pending")&&(o[r]=c);n.bookings.forEach(r=>{r.customerId in o&&parseInt(r.id)!==parseInt(o[r.customerId])||(e===""&&(n.bookingStart=Kl(n.bookingStart),n.bookingEnd=Kl(n.bookingEnd)),t||(n.bookings=[r]))})});if(e===""){let s={};for(let n in l)l[n].appointments.forEach(i=>{let o=i.bookingStart.split(" ")[0];o in s?s[o].appointments.push(i):s[o]={appointments:[i],date:o}});return s}return l}function pu(l,e){let t=[];return l.forEach(s=>{if(["approved","pending"].includes(s.status)&&s.customFields){let n=JSON.parse(s.customFields);Object.keys(n).forEach(i=>{let o=n[i].type==="file"?n[i]?.value?n[i].value:"":n[i].value;(Array.isArray(o)?o.length:o)&&t.push({label:n[i].label,value:o})})}}),e==="customer"?t:[...new Set(t.filter(s=>s.value).map(s=>s.label))].map(s=>new Object({label:s}))}function yk(l,e){let t={};return l.forEach(s=>{["approved","pending"].includes(s.status)&&s.extras.forEach(n=>{n.extraId in t||(t[n.extraId]={quantity:0,price:n.price,name:e.extras.find(i=>i.id===n.extraId).name}),t[n.extraId].quantity=t[n.extraId].quantity+n.quantity})}),t}const bk={class:"am-cc__periods-date"},kk={class:"am-cc__periods-time"},Ck={key:0,class:"am-cc__periods-link__list"},xk=["href"],wk=m("span",{class:"am-icon-link"},null,-1),Tk=["href"],Sk=m("span",{class:"am-icon-link"},null,-1),Ek=["href"],Lk=m("span",{class:"am-icon-link"},null,-1),Ak=["href"],$k=m("span",{class:"am-icon-link"},null,-1),Ik={name:"TemplatePeriods"},Pk=Object.assign(Ik,{props:{data:{type:[Array,Object,String]}},setup(l){const e=l,t=F("amLabels");let s=F("containerWidth"),n=y(()=>tt(s.value));return(i,o)=>(u(),x("div",{class:R(["am-cc__periods",a(n)])},[(u(!0),x(te,null,fe(a(e).data,(r,c)=>(u(),x("div",{key:c,class:"am-cc__periods-item"},[m("span",bk,w(a(dt)(r.date)),1),m("span",kk,w(`${a(nl)(r.startTime)} - ${a(nl)(r.endTime)}`),1),r.googleMeetLink||r.zoomLink||r.lessonSpaceLink||r.microsoftTeamsLink?(u(),x("div",Ck,[r.googleMeetLink?(u(),x("a",{key:0,class:"am-cc__periods-link",href:r.googleMeetLink,target:"_blank"},[wk,ie(" "+w(a(t).google_meet_link),1)],8,xk)):D("",!0),r.microsoftTeamsLink?(u(),x("a",{key:1,class:"am-cc__periods-link",href:r.microsoftTeamsLink,target:"_blank"},[Sk,ie(" "+w(a(t).microsoft_teams_link),1)],8,Tk)):D("",!0),r.zoomLink?(u(),x("a",{key:2,class:"am-cc__periods-link",href:r.zoomLink,target:"_blank"},[Lk,ie(" "+w(a(t).zoom_link),1)],8,Ek)):D("",!0),r.lessonSpaceLink?(u(),x("a",{key:3,class:"am-cc__periods-link",href:r.lessonSpaceLink,target:"_blank"},[$k,ie(" "+w(a(t).lesson_space_link),1)],8,Ak)):D("",!0)])):D("",!0)]))),128))],2))}});const Ok={class:"am-cc__extras-name"},Dk={key:0,class:"am-cc__extras-duration"},Nk={key:1,class:"am-cc__extras-price"},Mk={key:2,class:"am-cc__extras-quantity"},Bk={name:"TemplateExtras"},Fk=Object.assign(Bk,{props:{data:{type:[Array,Object,String]}},setup(l){const e=l,t=F("amLabels"),s=F("shortcodeData");let n=F("containerWidth"),i=y(()=>tt(n.value));return(o,r)=>(u(),x("div",{class:R(["am-cc__extras",a(i)])},[(u(!0),x(te,null,fe(a(e).data,(c,d)=>(u(),x("div",{key:d,class:"am-cc__extras-item"},[m("span",Ok,w(c.name),1),c.duration||c.price||c.quantity?(u(),x("div",{key:0,class:R(["am-cc__extras-item__inner",[{"am-flex-space":!c.price&&c.duration},{"am-flex-end":!c.duration}]])},[c.duration?(u(),x("span",Dk,w(a(hl)(c.duration,a(t).h,a(t).min)),1)):D("",!0),a(s).cabinetType==="customer"&&c.price?(u(),x("span",Nk,w(a(lt)(c.price)),1)):D("",!0),c.quantity?(u(),x("span",Mk," x"+w(c.quantity),1)):D("",!0)],2)):D("",!0)]))),128))],2))}});const Vk={class:"am-cc__tickets-item_inner"},Rk={class:"am-cc__tickets-name"},qk={class:"am-cc__tickets-calc"},Uk={key:0,class:"am-cc__tickets-price"},jk={name:"TemplateTickets"},zk=Object.assign(jk,{props:{data:{type:[Array,Object,String]}},setup(l){const e=l,t=F("amLabels"),s=F("shortcodeData");let n=F("containerWidth"),i=y(()=>tt(n.value));return(o,r)=>(u(),x("div",{class:R(["am-cc__tickets",a(i)])},[(u(!0),x(te,null,fe(a(e).data,(c,d)=>(u(),x("div",{key:d,class:"am-cc__tickets-item"},[m("div",Vk,[m("span",Rk,w(c.name),1),m("span",qk,w(`${c.persons} ${c.persons>1?a(t).event_tickets:a(t).event_ticket}${a(s).cabinetType==="customer"?" x "+a(lt)(c.price):""}`),1)]),a(s).cabinetType==="customer"?(u(),x("div",Uk,w(a(lt)(c.persons*c.price)),1)):D("",!0)]))),128))],2))}});const Yk=["innerHTML"],Wk={key:0,class:"am-cc__cf-value"},Hk={class:"am-cc__cf-value__inner"},Zk={name:"TemplateCustomFields"},Gk=Object.assign(Zk,{props:{data:{type:[Array,Object,String]}},setup(l){const e=l;let t=F("containerWidth"),s=y(()=>tt(t.value));function n(i){return i?Array.isArray(i)?i.length===0?"/":i.map(o=>typeof o=="object"&&o!==null&&!Array.isArray(o)?o.name||"/":o||"/").join(", "):i:"/"}return(i,o)=>(u(),x("div",{class:R(["am-cc__cf",a(s)])},[(u(!0),x(te,null,fe(a(e).data,(r,c)=>(u(),x("div",{key:c,class:"am-cc__cf-item"},[m("span",{class:"am-cc__cf-name",innerHTML:r.label},null,8,Yk),"value"in r?(u(),x("div",Wk,[m("span",Hk,w(n(r.value)),1)])):D("",!0)]))),128))],2))}});const Jk={class:"am-cc__employee-heading"},Xk={class:"am-cc__employee-heading__inner"},Qk={class:"am-cc__employee-name"},Kk=["innerHTML"],eC={key:1,class:"am-cc__employee-wrapper"},tC={class:"am-cc__employee-heading"},aC={class:"am-cc__employee-heading__inner"},sC={class:"am-cc__employee-name"},lC=["innerHTML"],nC={name:"TemplateEmployee"},iC=Object.assign(nC,{props:{data:{type:[Object,Array]}},setup(l){const e=l;let t=y(()=>!Array.isArray(e.data)),s=F("containerWidth"),n=y(()=>tt(s.value));function i(c){let d=c.firstName.charAt(0).toUpperCase(),f=c.lastName.charAt(0).toUpperCase();return`${d}${f}`}function o(c){return c.pictureThumbPath?{backgroundImage:`url(${c.pictureThumbPath})`}:{}}function r(c){return c&&c.includes("<!-- Content -->")?c.slice(16).length:c?c.length:!1}return(c,d)=>(u(),x("div",{class:R(["am-cc__employee",a(n)])},[a(t)?(u(),x(te,{key:0},[m("div",Jk,[m("span",{class:"am-cc__employee-img",style:_e(o(a(e).data))},[a(e).data.pictureThumbPath?D("",!0):(u(),x(te,{key:0},[ie(w(i(a(e).data)),1)],64))],4),m("div",Xk,[m("span",Qk,w(`${a(e).data.firstName} ${a(e).data.lastName}`),1),a(e).data.badge?(u(),x("span",{key:0,class:"am-cc__employee-badge",style:_e({background:a(e).data.badge.color})},w(a(e).data.badge.content),5)):D("",!0)])]),a(e).data.description?(u(),x("div",{key:0,class:R(["am-cc__employee-desc",{"ql-description":a(e).data.description.includes("<!-- Content -->")}]),innerHTML:a(e).data.description},null,10,Kk)):D("",!0)],64)):(u(),x("div",eC,[(u(!0),x(te,null,fe(a(e).data,f=>(u(),x(te,{key:f.id},[m("div",tC,[m("span",{class:"am-cc__employee-img",style:_e(o(f))},[f.pictureThumbPath?D("",!0):(u(),x(te,{key:0},[ie(w(i(f)),1)],64))],4),m("div",aC,[m("span",sC,w(`${f.firstName} ${f.lastName}`),1),f.badge?(u(),x("span",{key:0,class:"am-cc__employee-badge",style:_e({background:f.badge.color})},w(f.badge.content),5)):D("",!0)])]),r(f.description)?(u(),x("div",{key:0,class:R(["am-cc__employee-desc",{"ql-description":f.description.includes("<!-- Content -->")}]),innerHTML:f.description},null,10,lC)):D("",!0)],64))),128))]))],2))}});const oC={class:"am-cc__customers-item_inner"},rC={class:"am-cc__customers-name"},cC={class:"am-cc__customers-info"},uC={class:"am-cc__customers-info"},dC={name:"TemplateCustomers"},mC=Object.assign(dC,{props:{data:{type:[Array,Object,String]}},setup(l){const e=l;let t=F("containerWidth"),s=y(()=>tt(t.value));return(n,i)=>(u(),x("div",{class:R(["am-cc__customers",a(s)])},[(u(!0),x(te,null,fe(a(e).data,(o,r)=>(u(),x("div",{key:r,class:"am-cc__customers-item"},[m("div",oC,[m("span",rC,w(o.firstName)+" "+w(o.lastName),1),m("span",cC,w(o.email),1),m("span",uC,w(o.phone),1)])]))),128))],2))}});const pC={class:"am-cc__popover-inner"},fC={key:0,class:"am-cc__popover-heading"},gC={name:"CollapseCardPopoverTemplate"},vs=Object.assign(gC,{props:{headerText:{type:String,default:""},type:{type:String,required:!0},contentData:{type:[Array,Object,String],default:""}},setup(l){const e=l;let t=M({period:Je(Pk),extras:Je(Fk),ticket:Je(zk),customField:Je(Gk),employee:Je(iC),customers:Je(mC)}),s=F("amFonts"),n=F("amColors"),i=y(()=>({"--am-c-cc-primary":n.value.colorPrimary,"--am-c-cc-primary-op70":Y(n.value.colorPrimary,.7),"--am-c-cc-success":n.value.colorSuccess,"--am-c-cc-success-op15":Y(n.value.colorSuccess,.15),"--am-c-cc-bgr":n.value.colorMainBgr,"--am-c-cc-text":n.value.colorMainText,"--am-c-cc-text-op10":Y(n.value.colorMainText,.1),"--am-c-cc-text-op15":Y(n.value.colorMainText,.15),"--am-c-cc-text-op70":Y(n.value.colorMainText,.7),"--am-c-cc-text-op80":Y(n.value.colorMainText,.8),"--am-c-cc-text-op90":Y(n.value.colorMainText,.9),"--am-c-scroll-op30":Y(n.value.colorPrimary,.3),"--am-c-scroll-op10":Y(n.value.colorPrimary,.1),"--am-font-family":s.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px"}));return(o,r)=>{const c=vl;return u(),q(c,{"show-arrow":!1,persistent:!1,width:"auto","popper-class":"am-cc__popover","popper-style":a(i),trigger:"click"},{reference:L(()=>[Yr(o.$slots,"default")]),default:L(()=>[m("div",pC,[a(e).headerText?(u(),x("div",fC,w(a(e).headerText),1)):D("",!0),(u(),q(Tt(a(t)[a(e).type]),{class:"am-cc__popover-content",data:a(e).contentData},null,8,["data"]))])]),_:3},8,["popper-style"])}}});function hC(l){let e=to(null,l.coupon,l.tax?l.tax[0]:null,l.price-l.price/100*l.discount,!1);return e.price-e.discount+e.tax}const _s=nt(window.wpAmeliaLabels);function Ur(l,e,t,s=null){t.type==="package"&&l.commit("cabinet/setPackageLoading",!0),t.type==="appointment"&&l.commit("cabinet/setAppointmentsLoading",!0),t.type==="event"&&l.commit("cabinet/setEventsLoading",!0),l.commit("cabinet/setPaymentLinkLoader",t.bookings?t.bookings[0].id:t.id);let n=JSON.parse(JSON.stringify(t)),i=JSON.parse(JSON.stringify(l.getters["auth/getProfile"]));i.birthday=null,n.customer=i,n.type!=="package"?(n[n.type]=t,n.booking=t.bookings[0],n.paymentId=t.bookings[0].payments[0].id):n=Object.assign(n,n.package),De.post("/payments/link",{data:n,paymentMethod:e}).then(o=>{!o.data.data.error&&o.data.data.paymentLink?window.location.href=o.data.data.paymentLink:l.commit("cabinet/setPaymentLinkError",{value:!0,type:t.type})}).catch(o=>{l.commit("cabinet/setPaymentLinkError",{value:!0,type:t.type})}).finally(()=>{l.commit("cabinet/setPaymentLinkLoader",null),t.type==="package"&&l.commit("cabinet/setPackageLoading",!1),t.type==="appointment"&&l.commit("cabinet/setAppointmentsLoading",!1),t.type==="event"&&l.commit("cabinet/setEventsLoading",!1)})}function Qi(l,e){if(l.type!=="package"&&(!l.bookings||l.bookings.length===0))return!1;e=JSON.parse(e);let t=e&&"payments"in e&&e.payments&&"paymentLinks"in e.payments&&e.payments.paymentLinks?e.payments.paymentLinks:ot.payments.paymentLinks,s=!1;switch(l.type){case"package":s=!l.end||pe(l.end,"YYYY-MM-DD HH:mm").isAfter(pe());break;case"appointment":s=pe(l.bookingStart,"YYYY-MM-DD HH:mm:ss").isAfter(pe())&&l.bookings[0].payments.length>0;break;case"event":s=pe(l.periods[l.periods.length-1].periodEnd,"YYYY-MM-DD HH:mm:ss").isAfter(pe())&&l.bookings[0].payments.length>0;break}return Ki(ot).length&&ot&&t&&t.enabled&&s}function Ki(l){typeof l=="string"&&(l=JSON.parse(l));let e=[];return l=l.payments,ot.payments.wc.enabled?e.push({value:"wc",label:_s.wc}):ot.payments.mollie.enabled&&(!("mollie"in l)||l.mollie.enabled)?e.push({value:"mollie",label:_s.on_line}):(ot.payments.payPal.enabled&&(!("payPal"in l)||l.payPal.enabled)&&e.push({value:"payPal",label:_s.pay_pal}),ot.payments.stripe.enabled&&(!("stripe"in l)||l.stripe.enabled)&&e.push({value:"stripe",label:_s.credit_card}),ot.payments.razorpay.enabled&&(!("razorpay"in l)||l.razorpay.enabled)&&e.push({value:"razorpay",label:_s.razorpay}),ot.payments.square.enabled&&(!("square"in l)||l.square.enabled)&&e.push({value:"square",label:_s.square})),e}function Zl(l,e){switch(e.type){case"appointment":{let t=hn(l,{price:e.bookings[0].price,persons:e.bookings[0].persons,aggregatedPrice:e.bookings[0].aggregatedPrice,extras:e.bookings[0].extras,serviceId:null,tax:e.bookings[0].tax,coupon:e.bookings[0].coupon},!1);return t.total-t.discount+t.tax>e.bookings[0].payments.filter(s=>s.status!=="refunded"&&s.status!=="pending").reduce((s,n)=>s+n.amount,0)}case"event":return ec(e)>e.bookings[0].payments.filter(t=>t.status!=="refunded"&&t.status!=="pending").reduce((t,s)=>t+s.amount,0);case"package":return hC(e)>e.payments.filter(t=>t.status!=="refunded"&&t.status!=="pending").reduce((t,s)=>t+s.amount,0)}}const vC={class:"am-cc__edit"},_C=["onClick"],yC={class:"am-cc__edit-text"},bC={name:"PaymentButton"},fu=Object.assign(bC,{props:{reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},type:{type:String},btnSize:{type:String,default:"mini"},class:{type:String,default:""}},setup(l){const e=l;let t=Oe();const s=F("amLabels");let n=y(()=>Ki(e.bookable.settings)),i=y(()=>t.getters["cabinet/getPaymentLinkLoader"]),o=Qr({components:{IconComponent:He},template:'<IconComponent icon="arrow-down"></IconComponent>'}),r=M(!1);function c(C){C.stopPropagation(),n.value.length===1?Ur(t,n.value[0].value,e.reservation):r.value=!r.value}function d(){r.value=!1}let f=M(!1);function v(){f.value=!1}let g=F("amFonts"),b=F("amColors"),T=y(()=>({"--am-c-cc-primary":b.value.colorPrimary,"--am-c-cc-primary-op70":Y(b.value.colorPrimary,.7),"--am-c-cc-error":b.value.colorError,"--am-c-cc-error-op15":Y(b.value.colorError,.15),"--am-c-cc-warning":b.value.colorWarning,"--am-c-cc-warning-op15":Y(b.value.colorWarning,.15),"--am-c-cc-success":b.value.colorSuccess,"--am-c-cc-success-op15":Y(b.value.colorSuccess,.15),"--am-c-cc-bgr":b.value.colorMainBgr,"--am-c-cc-text":b.value.colorMainText,"--am-c-cc-text-op10":Y(b.value.colorMainText,.1),"--am-c-cc-text-op15":Y(b.value.colorMainText,.15),"--am-c-cc-text-op70":Y(b.value.colorMainText,.7),"--am-c-cc-text-op90":Y(b.value.colorMainText,.9),"--am-font-family":g.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px"}));return(C,_)=>{const S=vl;return a(Qi)(a(e).reservation,a(e).bookable.settings)?(u(),q(S,{key:0,ref:"payRef",visible:a(r),"onUpdate:visible":_[0]||(_[0]=P=>ye(r)?r.value=P:r=P),persistent:!1,"show-arrow":!1,"popper-class":"am-cc__popper","popper-style":a(T),trigger:"click"},{reference:L(()=>[I(ke,{size:a(e).btnSize,type:a(e).type,suffix:a(n).length>1&&a(Zl)(a(t),a(e).reservation)?a(o):"",class:R([{"am-button-single":a(n).length===1||!a(Zl)(a(t),a(e).reservation)},a(e).class]),loading:!!a(i),"loading-icon":"loading",disabled:!a(Zl)(a(t),a(e).reservation),onClick:c},{default:L(()=>[ie(w(a(Zl)(a(t),a(e).reservation)?a(s).pay_now_btn:a(s).paid),1)]),_:1},8,["size","type","suffix","class","loading","disabled"])]),default:L(()=>[Yt((u(),x("div",vC,[(u(!0),x(te,null,fe(a(Ki)(a(e).bookable.settings),P=>Yt((u(),x("div",{key:P.value,class:"am-cc__edit-item",onClick:k=>a(Ur)(a(t),P.value,a(e).reservation)},[m("span",yC,w(P.label),1)],8,_C)),[[a(ra),d]])),128))])),[[a(ra),v]])]),_:1},8,["visible","popper-style"])):D("",!0)}}});const kC={class:"am-cc__time"},CC={key:0,class:"am-cc__name"},xC={key:0,class:"am-cc__name"},wC={key:1,class:"am-cc__places"},TC={key:2,class:"am-cc__customer"},SC={key:0,class:"am-cc__edit"},EC=m("span",{class:"am-icon-edit"},null,-1),LC={class:"am-cc__edit-text"},AC={key:0,class:"am-cc__edit"},$C=m("span",{class:"am-icon-users-plus"},null,-1),IC={class:"am-cc__edit-text"},PC={class:"am-cc__edit"},OC=m("span",{class:"am-icon-user"},null,-1),DC={class:"am-cc__edit-text"},NC={class:"am-cc__edit"},MC=m("span",{class:"am-icon-date-time"},null,-1),BC={class:"am-cc__edit-text"},FC=m("span",{class:"am-icon-clearable"},null,-1),VC={class:"am-cc__edit-text"},RC={class:"am-cc__content-inner"},qC={class:"am-cc__data"},UC=m("span",{class:"am-icon-user"},null,-1),jC={class:"am-cc__data-text"},zC={class:"am-cc__data"},YC=m("span",{class:"am-icon-user"},null,-1),WC={class:"am-cc__data-text"},HC={key:2,class:"am-cc__data"},ZC=m("span",{class:"am-icon-payments"},null,-1),GC={class:"am-cc__data-text"},JC={key:3,class:"am-cc__data"},XC=m("span",{class:"am-icon-clock"},null,-1),QC={class:"am-cc__data-text"},KC={class:"am-cc__data"},ex=m("span",{class:"am-icon-clock"},null,-1),tx={class:"am-cc__data-text"},ax={key:5,class:"am-cc__data link"},sx=m("span",{class:"am-icon-link"},null,-1),lx=["href"],nx={key:6,class:"am-cc__data link"},ix=m("span",{class:"am-icon-link"},null,-1),ox=["href"],rx={key:7,class:"am-cc__data link"},cx=m("span",{class:"am-icon-link"},null,-1),ux=["href"],dx={key:8,class:"am-cc__data link"},mx=m("span",{class:"am-icon-link"},null,-1),px=["href"],fx={class:"am-cc__data"},gx=m("span",{class:"am-icon-border-plus"},null,-1),hx={class:"am-cc__data-text"},vx={class:"am-cc__data"},_x=m("span",{class:"am-icon-file-text"},null,-1),yx={class:"am-cc__data-text"},bx={class:"am-cc__data"},kx=m("span",{class:"am-icon-tickets"},null,-1),Cx={class:"am-cc__data-text"},xx=m("span",{class:"am-icon-locations"},null,-1),wx=["href"],Tx={key:1,class:"am-cc__data-text"},Sx={name:"CollapseCard"},gu=Object.assign(Sx,{props:{start:{type:[String,Object,Array,Function],required:!0},name:{type:String,default:""},employee:{type:[Object,Array],default:()=>{}},customers:{type:[Array],default:()=>{}},location:{type:[String,Object],default:""},price:{type:Number,default:0},duration:{type:Number,default:0},periods:{type:Array,default:()=>{}},extras:{type:Object,default:()=>{}},tickets:{type:Object,default:()=>{}},customFields:{type:Array,default:()=>[]},googleMeetLink:{type:String,default:""},microsoftTeamsLink:{type:String,default:""},zoomLink:{type:String,default:""},lessonSpaceLink:{type:String,default:""},reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},booking:{type:Object,default:()=>{}},isPackageBooking:{type:Boolean,default:!1},responsiveClass:{type:String,default:""},parentWidth:{type:Number,default:1200},customizedOptions:{type:Object,required:!0}},emits:["cancelBooking","rescheduling","editAppointment","editEvent","addEventAttendee","listEventAttendees"],setup(l,{emit:e}){const t=l,s=F("shortcodeData"),n=F("settings");let i=F("originKey");const o=F("amLabels");let r=M(!1);function c(A){A.stopPropagation(),r.value=!r.value}function d(){r.value=!1}function f(){e("cancelBooking",t.booking),r.value=!1}function v(A){e("edit"+A.charAt(0).toUpperCase()+A.slice(1),t.reservation),r.value=!1}function g(A){e("addEventAttendee",A),r.value=!1}function b(A){e("listEventAttendees",A),r.value=!1}function T(){e("rescheduling",t.reservation,t.booking),r.value=!1}function C(A){return Array.isArray(A)?o.value.event_staff:!Array.isArray(A)&&A.rank&&A.rank==="organizer"?o.value.event_organizer:`${t.employee.firstName} ${t.employee.lastName}`}let _=y(()=>t.reservation.type==="event"?t.reservation.maxCapacity-t.reservation.places+"/"+t.reservation.maxCapacity:""),S=y(()=>{if(t.reservation.type==="appointment")return{label:o.value[s.value.cabinetType==="employee"||t.booking.status==="approved"?t.reservation.status:t.booking.status],class:s.value.cabinetType==="employee"||t.booking.status==="approved"?t.reservation.status:t.booking.status};if(t.reservation.type==="event"){if(s.value.cabinetType==="customer")return{label:o.value[t.booking.status],class:t.booking.status};switch(t.reservation.status){case"rejected":case"canceled":return{label:o.value.canceled,class:"canceled"};case"full":return{label:o.value.full,class:"full"};case"waiting":return{label:o.value.waiting_list,class:"waiting"};case"upcoming":return{label:o.value.upcoming,class:"upcoming"};case"approved":if(t.reservation.closed)return{label:o.value.closed,class:"closed"};if(t.reservation.opened&&t.reservation.places>0)return{label:o.value.opened,class:"opened"}}}return{label:"",class:""}}),P=F("amFonts"),k=F("amColors"),h=y(()=>({"--am-c-cc-primary":k.value.colorPrimary,"--am-c-cc-primary-op15":Y(k.value.colorPrimary,.15),"--am-c-cc-primary-op70":Y(k.value.colorPrimary,.7),"--am-c-cc-error":k.value.colorError,"--am-c-cc-error-op15":Y(k.value.colorError,.15),"--am-c-cc-warning":k.value.colorWarning,"--am-c-cc-warning-op15":Y(k.value.colorWarning,.15),"--am-c-cc-success":k.value.colorSuccess,"--am-c-cc-success-op15":Y(k.value.colorSuccess,.15),"--am-c-cc-bgr":k.value.colorMainBgr,"--am-c-cc-text":k.value.colorMainText,"--am-c-cc-text-op03":Y(k.value.colorMainText,.03),"--am-c-cc-text-op10":Y(k.value.colorMainText,.1),"--am-c-cc-text-op15":Y(k.value.colorMainText,.15),"--am-c-cc-text-op70":Y(k.value.colorMainText,.7),"--am-c-cc-text-op90":Y(k.value.colorMainText,.9),"--am-font-family":P.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px"}));return(A,O)=>{const E=vl;return u(),x("div",{class:"am-cc",style:_e(a(h))},[I(Xr,null,{default:L(()=>[I(Jr,{"heading-class":"am-cc__heading-wrapper",side:a(t).parentWidth>500},{heading:L(()=>[m("div",{class:R(["am-cc__heading",a(t).responsiveClass])},[m("div",{class:R(["am-cc__heading-info",a(t).responsiveClass])},[m("div",{class:R(["am-cc__heading-info__part",a(t).responsiveClass])},[m("div",kC,w(a(t).start),1),a(t).parentWidth>650?(u(),x("div",CC,w(a(t).name),1)):D("",!0),a(t).reservation.type==="event"&&a(s).cabinetType==="employee"&&a(t).parentWidth<=650?(u(),x("div",{key:1,class:R(["am-cc__places",a(t).responsiveClass])},w(a(_)),3)):D("",!0),a(t).reservation.type==="appointment"&&a(s).cabinetType==="employee"&&a(t).customers.length===1&&a(t).customizedOptions.customer.visibility&&a(t).parentWidth<=650?(u(),x("div",{key:2,class:R(["am-cc__customer",a(t).responsiveClass])},w(`${a(t).customers[0].firstName} ${a(t).customers[0].lastName}`),3)):D("",!0),(a(t).booking||a(s).cabinetType==="employee")&&a(t).parentWidth<=650?(u(),x("div",{key:3,class:R(["am-cc__status",`am-cc__status-${a(S).class}`])},w(a(S).label),3)):D("",!0)],2),m("div",{class:R(["am-cc__heading-info__part",a(t).responsiveClass])},[a(t).parentWidth<=650?(u(),x("div",xC,w(a(t).name),1)):D("",!0),a(t).reservation.type==="event"&&a(s).cabinetType==="employee"&&a(t).parentWidth>650?(u(),x("div",wC,w(a(_)),1)):D("",!0),a(t).reservation.type==="appointment"&&a(s).cabinetType==="employee"&&a(t).customers.length===1&&a(t).customizedOptions.customer.visibility&&a(t).parentWidth>650?(u(),x("div",TC,w(`${a(t).customers[0].firstName} ${a(t).customers[0].lastName}`),1)):D("",!0),(a(t).booking||a(s).cabinetType==="employee")&&a(t).parentWidth>650?(u(),x("div",{key:3,class:R(["am-cc__status",`am-cc__status-${a(S).class}`])},w(a(S).label),3)):D("",!0)],2)],2),a(s).cabinetType==="employee"?(u(),x("div",{key:0,class:R(["am-cc__heading-actions",a(t).responsiveClass])},[a(t).reservation.type!=="appointment"||a(n).roles.allowWriteAppointments?(u(),q(E,{key:0,ref:"editRef",visible:a(r),"onUpdate:visible":O[3]||(O[3]=$=>ye(r)?r.value=$:r=$),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":a(h),trigger:"click"},{reference:L(()=>[a(t).reservation?(u(),x("span",{key:0,class:"am-cc__edit-btn am-icon-dots-vertical",onClick:c})):D("",!0)]),default:L(()=>[a(t).reservation.type==="appointment"&&a(n).roles.allowWriteAppointments||a(t).reservation.type==="event"&&a(n).roles.allowWriteEvents?Yt((u(),x("div",SC,[m("div",{class:"am-cc__edit-item am-edit",onClick:O[0]||(O[0]=$=>v(a(t).reservation.type))},[EC,m("span",LC,w(a(o).edit),1)])])),[[a(ra),d]]):D("",!0),a(t).reservation.type==="event"?(u(),x(te,{key:1},[a(n).roles.allowWriteEvents?Yt((u(),x("div",AC,[m("div",{class:"am-cc__edit-item am-edit",onClick:O[1]||(O[1]=$=>g(a(t).reservation))},[$C,m("span",IC,w(a(o).event_add_attendee),1)])])),[[a(ra),d]]):D("",!0),Yt((u(),x("div",PC,[m("div",{class:"am-cc__edit-item am-edit",onClick:O[2]||(O[2]=$=>b(a(t).reservation))},[OC,m("span",DC,w(a(o).attendees),1)])])),[[a(ra),d]])],64)):D("",!0)]),_:1},8,["visible","popper-style"])):D("",!0)],2)):(a(t).booking&&a(t).booking.status==="approved"||a(t).booking.status==="pending"||a(t).booking.status==="waiting")&&(!a(t).isPackageBooking&&a(t).booking.price>0&&a(Qi)(a(t).reservation,a(t).bookable.settings)||!!(a(t).reservation.cancelable||a(n).roles.allowCustomerReschedule&&a(t).reservation.reschedulable))?(u(),x("div",{key:1,class:R(["am-cc__heading-actions",a(t).responsiveClass])},[a(t).booking.status!=="waiting"&&!a(t).isPackageBooking&&a(t).booking.price>0&&a(Qi)(a(t).reservation,a(t).bookable.settings)?(u(),q(fu,{key:0,reservation:a(t).reservation,bookable:a(t).bookable},null,8,["reservation","bookable"])):D("",!0),a(t).reservation.cancelable||a(n).roles.allowCustomerReschedule&&a(t).reservation.reschedulable?(u(),q(E,{key:1,ref:"editRef",visible:a(r),"onUpdate:visible":O[4]||(O[4]=$=>ye(r)?r.value=$:r=$),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":a(h),trigger:"click"},{reference:L(()=>[a(t).booking?(u(),x("span",{key:0,class:"am-cc__edit-btn am-icon-dots-vertical",onClick:c})):D("",!0)]),default:L(()=>[Yt((u(),x("div",NC,[a(t).reservation.type==="appointment"&&a(n).roles.allowCustomerReschedule&&a(t).reservation.reschedulable?(u(),x("div",{key:0,class:"am-cc__edit-item",onClick:T},[MC,m("span",BC,w(a(o).reschedule),1)])):D("",!0),a(t).reservation.cancelable?(u(),x("div",{key:1,class:"am-cc__edit-item am-delete",onClick:f},[FC,m("span",VC,w(a(o).cancel),1)])):D("",!0)])),[[a(ra),d]])]),_:1},8,["visible","popper-style"])):D("",!0)],2)):D("",!0)],2)]),default:L(()=>[m("div",{class:R(["am-cc__content",a(t).responsiveClass])},[m("div",RC,[a(i)==="capc"&&l.customizedOptions.employee.visibility?(u(),x(te,{key:0},[(Array.isArray(a(t).employee)?a(t).employee.length:Object.keys(a(t).employee).length)?(u(),q(vs,{key:0,"header-text":Array.isArray(a(t).employee)?a(o).view_employees:a(o).provider_profile,type:"employee","content-data":a(t).employee},{default:L(()=>[m("div",qC,[UC,m("span",jC,w(C(a(t).employee)),1)])]),_:1},8,["header-text","content-data"])):D("",!0)],64)):D("",!0),a(i)==="cape"&&a(t).reservation.type==="appointment"&&a(t).customers.length>1&&a(t).customizedOptions.customer.visibility?(u(),x(te,{key:1},[a(t).customers.length?(u(),q(vs,{key:0,"header-text":a(o).customers,type:"customers","content-data":a(t).customers},{default:L(()=>[m("div",zC,[YC,m("span",WC,w(a(o).customers),1)])]),_:1},8,["header-text","content-data"])):D("",!0)],64)):D("",!0),a(t).price&&a(t).customizedOptions.price.visibility?(u(),x("div",HC,[ZC,m("span",GC,w(a(lt)(a(t).price)),1)])):D("",!0),a(t).duration?(u(),x("div",JC,[XC,m("span",QC,w(a(hl)(a(t).duration,a(o).h,a(o).min)),1)])):D("",!0),l.periods.length?(u(),q(vs,{key:4,"header-text":a(o).event_timetable,type:"period","content-data":a(t).periods},{default:L(()=>[m("div",KC,[ex,m("span",tx,w(a(o).event_timetable),1)])]),_:1},8,["header-text","content-data"])):D("",!0),a(t).googleMeetLink?(u(),x("div",ax,[sx,m("a",{class:"am-cc__data-text link",href:a(t).googleMeetLink,target:"_blank"},w(a(o).google_meet_link),9,lx)])):D("",!0),a(t).microsoftTeamsLink?(u(),x("div",nx,[ix,m("a",{class:"am-cc__data-text link",href:a(t).microsoftTeamsLink,target:"_blank"},w(a(o).microsoft_teams_link),9,ox)])):D("",!0),a(t).zoomLink?(u(),x("div",rx,[cx,m("a",{class:"am-cc__data-text link",href:a(t).zoomLink,target:"_blank"},w(a(o).zoom_link),9,ux)])):D("",!0),a(t).lessonSpaceLink?(u(),x("div",dx,[mx,m("a",{class:"am-cc__data-text link",href:a(t).lessonSpaceLink,target:"_blank"},w(a(o).lesson_space_link),9,px)])):D("",!0),Object.keys(a(t).extras).length?(u(),q(vs,{key:9,"header-text":`${Object.keys(a(t).extras).length} ${a(o).extras}`,type:"extras","content-data":a(t).extras},{default:L(()=>[m("div",fx,[gx,m("span",hx,w(`${Object.keys(a(t).extras).length} ${a(o).extras}`),1)])]),_:1},8,["header-text","content-data"])):D("",!0),a(t).customFields.length?(u(),q(vs,{key:10,"header-text":a(o).custom_fields,type:"customField","content-data":a(t).customFields},{default:L(()=>[m("div",vx,[_x,m("span",yx,w(a(o).custom_fields),1)])]),_:1},8,["header-text","content-data"])):D("",!0),Object.keys(a(t).tickets).length?(u(),q(vs,{key:11,"header-text":a(o).event_tickets,type:"ticket","content-data":a(t).tickets},{default:L(()=>[m("div",bx,[kx,m("span",Cx,w(a(o).event_tickets),1)])]),_:1},8,["header-text","content-data"])):D("",!0),a(t).location?(u(),x("div",{key:12,class:R(["am-cc__data",{link:a(t).location.address}])},[xx,a(t).location.address?(u(),x("a",{key:0,class:"am-cc__data-text",href:`https://maps.google.com/?q=${a(t).location.address}`,target:"_blank"},w(a(t).location.name),9,wx)):(u(),x("span",Tx,w(a(t).location.name),1))],2)):D("",!0)])],2)]),_:1},8,["side"])]),_:1})],4)}}});const Ex={class:"am-csd__header"},Lx={class:"am-csd__header-text"},Ax=m("span",{class:"am-icon-clearable"},null,-1),$x={class:"am-csd__footer"},Ix={name:"AppointmentBooking"},hu=Object.assign(Ix,{props:{visibility:{type:Boolean,default:!1},appointment:{type:Object,default:null},employees:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},slotsParams:{type:Object,default:()=>{}},labels:{type:Object,required:!0},customizedOptions:{type:Object,required:!0}},emits:["close","success","error","employee-selection","location-selection"],setup(l,{emit:e}){const t=l;let s=Oe();const n=F("settings");let i=F("amLabels"),o=M(null),r=M(null);rt(()=>t.appointment,be=>{setTimeout(()=>{O.value++},200);let Ce=JSON.parse(JSON.stringify(be));Ce&&Ce.bookingStart&&(o.value=Ce.bookingStart.split(" ")[0],r.value=Ce.bookingStart.split(" ")[1].substring(0,5))});let c=M(null),d=M(0),f=F("sidebarCollapsed");window.addEventListener("resize",v);function v(){c.value&&(d.value=c.value.offsetWidth)}rt(f,be=>{be?setTimeout(()=>{g()},1500):setTimeout(()=>{g()},500)});function g(){d.value=c.value.offsetWidth}Ze(()=>{ao(()=>{d.value=c.value.offsetWidth})});let b=y(()=>t.visibility);rt(b,be=>{be&&setTimeout(()=>{d.value=c.value.offsetWidth},300)});let T=y(()=>tt(d.value)),C=M(!1),_=M(null),S=M("");function P(){C.value=!1,S.value=""}let k=M(null),h=y(()=>k.value?k.value.calendarSlotsLoading:!0),A=F("cabinetType"),O=M(0),E=M(!1),$=M({employee:null,location:null}),V=M(!0),j=M(!0),B=y(()=>t.appointment&&!t.appointment.id&&(t.employees.length||t.locations.length)&&(t.customizedOptions.employee.visibility||t.customizedOptions.location.visibility)&&(V.value||j.value)),G=M(null),H=y(()=>B.value?{employee:[{required:"employee"in t.customizedOptions?t.customizedOptions.employee.required:!1,message:i.value.please_select_employee,trigger:"submit"}],location:[{required:"location"in t.customizedOptions?t.customizedOptions.location.required:!1,message:i.value.please_select_location,trigger:"submit"}]}:{}),X=y(()=>{let be={};return $.value.employee?be.providerIds=[$.value.employee]:"providerIds"in t.slotsParams&&t.slotsParams.providerIds.length&&(be.providerIds=t.slotsParams.providerIds),$.value.location?be.locationId=$.value.location:"locationId"in t.slotsParams&&t.slotsParams.locationId?be.locationId=t.slotsParams.locationId:be.locationId=null,Object.assign({},t.slotsParams,be)});function Q(){G.value&&G.value.clearValidate(),E.value=!0,O.value++,e("employee-selection",$.value.employee),e("location-selection",$.value.location)}function ee(be){$.value.employee=be,Q()}function le(){B.value&&($.value.employee=null,$.value.location=null,V.value=!0,j.value=!0,Q()),e("close")}rt(b,be=>{be&&t.employees.length===1&&($.value.employee=t.employees[0].id,V.value=!1),be&&t.locations.length===1&&($.value.location=t.locations[0].id,j.value=!1),be&&(t.locations.length===1||t.employees.length===1)&&Q()});let W=M();Be("formWrapper",W);let se=y(()=>s.getters["entities/getService"](t.appointment.serviceId).duration);Be("calendarSlotDuration",se);let ge=M(!0);Be("calendarChangeSideBar",ge);let Ie=M(0);Be("calendarServiceDuration",Ie);function ue(){"id"in t.appointment?me():J()}function ae(be){let Ce=be?"UTC":s.getters["cabinet/getTimeZone"],Se=o.value+" "+r.value,Me=null,Le=null;if(be){let Xe=Ro(Se);Le=Vo(Xe),Me=Xe}else Me=Se;return{utcOffset:Le,bookingStart:Me,timeZone:Ce}}function me(){k.value.calendarSlotsLoading=!0;let be=ae(!1);ll()===s.getters["cabinet/getTimeZone"]&&n.general.showClientTimeZone&&(be.utcOffset=Vo(Ro(o.value+" "+r.value))),De.post("/bookings/reassign/"+t.appointment.bookings.filter(Ce=>Ce.status==="approved"||Ce.status==="pending")[0].id,be,Object.assign(Ue(s),{params:{source:"cabinet-"+A.value}})).then(()=>{k.value.calendarSlotsLoading=!1,e("success",{message:i.value.appointment_rescheduled})}).catch(Ce=>{k.value.calendarSlotsLoading=!1,Ce.response&&(!("data"in Ce.response.data)&&"message"in Ce.response.data&&(C.value=!0,S.value=Ce.response.data.message,setTimeout(function(){ft(W.value,_.value.$el,0,300)},500)),"data"in Ce.response&&"data"in Ce.response.data&&"cancelBookingUnavailable"in Ce.response.data.data&&(C.value=!0,S.value=t.labels.booking_cancel_exception,setTimeout(function(){ft(W.value,_.value.$el,0,300)},500)),"data"in Ce.response&&"data"in Ce.response.data&&"timeSlotUnavailable"in Ce.response.data.data&&Ce.response.data.data.timeSlotUnavailable===!0&&(C.value=!0,S.value=t.labels.time_slot_unavailable,setTimeout(function(){ft(W.value,_.value.$el,0,300)},500)),"data"in Ce.response&&"data"in Ce.response.data&&"rescheduleBookingUnavailable"in Ce.response.data.data&&Ce.response.data.data.rescheduleBookingUnavailable===!0&&(C.value=!0,S.value=t.labels.booking_reschedule_exception,setTimeout(function(){ft(W.value,_.value.$el,0,300)},500))),e("error")})}function z(){k.value.calendarSlotsLoading=!0;let be=ae(n.general.showClientTimeZone&&s.getters["cabinet/getTimeZone"]===ll()),Ce=JSON.parse(JSON.stringify(t.appointment));Ce.bookingStart=be.bookingStart,Ce.bookings[0].utcOffset=be.utcOffset,Ce.bookings[0].timeZone=be.timeZone,Ce.providerId=parseInt(Z.value),Ce.locationId=parseInt(de.value),De.post("/bookings",Ce,Ue(s)).then(Se=>{k.value.calendarSlotsLoading=!1,ju(s,Se),e("success",{message:i.value.booking_added_success})}).catch(Se=>{k.value.calendarSlotsLoading=!1,Se.response&&("customerAlreadyBooked"in Se.response.data.data&&Se.response.data.data.customerAlreadyBooked===!0&&(C.value=!0,S.value=t.labels.customer_already_booked_app,setTimeout(function(){ft(W.value,_.value.$el,0,300)},500)),"timeSlotUnavailable"in Se.response.data.data&&Se.response.data.data.timeSlotUnavailable===!0&&(C.value=!0,S.value=t.labels.time_slot_unavailable,setTimeout(function(){ft(W.value,_.value.$el,0,300)},500)),"packageBookingUnavailable"in Se.response.data.data&&Se.response.data.data.packageBookingUnavailable===!0&&(C.value=!0,S.value=t.labels.package_booking_unavailable,setTimeout(function(){ft(W.value,_.value.$el,0,300)},500)),"customerBlocked"in Se.response.data.data&&Se.response.data.data.customerBlocked===!0&&(C.value=!0,S.value=t.labels.customer_blocked,setTimeout(function(){ft(W.value,_.value.$el,0,300)},500))),e("error",Se)})}function J(){B.value?G.value.validate(be=>{be?z():setTimeout(()=>{ft(W.value,G.value.$el,0,300)},200)}):z()}let Z=M(null),de=M(null),K=M(null);function oe(be,Ce){if(K.value=Ce,E.value=!1,!t.appointment.bookingStart)return{calendarStartDate:an(Object.keys(Ce))[0],calendarEventSlots:[],calendarEventSlot:null};let Se=t.appointment.bookingStart.split(" ");return{calendarStartDate:Se[0],calendarEventSlots:Se[0]in Ce?Object.keys(Ce[Se[0]]):[],calendarEventSlot:Se[1].slice(0,5)}}Be("useSlotsCallback",oe),Be("useRange",()=>{if(!t.appointment.bookingStart)return{start:null,end:null};let be=t.appointment.bookingStart.split(" ")[0];return{start:pe(be,"YYYY-MM-DD").startOf("month").subtract(6,"days").format("YYYY-MM-DD"),end:pe(be,"YYYY-MM-DD").endOf("month").add(12,"days").format("YYYY-MM-DD")}}),Be("useSelectedDuration",()=>{});function he(){let be=Object.keys(K.value[o.value]);be.length&&(Z.value=r.value&&K.value[o.value][r.value]?K.value[o.value][r.value][0][0]:K.value[o.value][be[0]][0][0],de.value=r.value&&K.value[o.value][r.value]?K.value[o.value][r.value][0][1]:K.value[o.value][be[0]][0][1])}Be("useBusySlots",()=>[]),Be("useSelectedDate",(be,Ce)=>(o.value=Ce,t.appointment&&t.appointment.bookingStart&&(r.value=t.appointment.bookingStart.split(" ")[1].substring(0,5)),he(),Object.keys(K.value[Ce]))),Be("useSelectedTime",(be,Ce)=>{r.value=Ce.substring(0,5),o.value?he():t.appointment&&(o.value=t.appointment.bookingStart.split(" ")[0],he())}),Be("useDeselectedDate",()=>{o.value="",r.value="",Z.value=null,de.value=null});let Ae=F("amFonts"),Te=F("amColors"),je=y(()=>({"--am-c-csd-text":Te.value.colorMainText,"--am-c-csd-bgr":Te.value.colorMainBgr,"--am-c-csd-text-op10":Y(Te.value.colorMainText,.1),"--am-c-scroll-op30":Y(Te.value.colorPrimary,.3),"--am-c-scroll-op10":Y(Te.value.colorPrimary,.1),"--am-font-family":Ae.value.fontFamily}));return(be,Ce)=>{const Se=yt,Me=et;return u(),q(Xa,{visibility:a(t).visibility,"custom-class":"am-csd am-csd__reschedule",style:_e(a(je)),position:"center"},{footer:L(()=>[m("div",$x,[I(ke,{category:"secondary",size:a(d)<=360?"small":"default",type:a(t).customizedOptions.cancelBtn.buttonType,disabled:a(E)||a(h),onClick:le},{default:L(()=>[ie(w(l.labels.cancel),1)]),_:1},8,["size","type","disabled"]),I(ke,{size:a(d)<=360?"small":"default",type:a(t).customizedOptions.continueBtn.buttonType,disabled:!!(a(E)||a(h)||!a(o)||!a(r)),onClick:ue},{default:L(()=>[ie(w(l.labels.continue),1)]),_:1},8,["size","type","disabled"])])]),default:L(()=>[m("div",{ref_key:"popupInnerRef",ref:c,class:"am-csd__inner"},[m("div",Ex,[m("div",Lx,w(l.labels.no_selected_slot_requirements),1),m("div",{class:"am-csd__header-btn",onClick:le},[I(He,{icon:"close"})])]),m("div",{ref_key:"rescheduleRef",ref:W,class:"am-csd__content"},[a(C)?(u(),q(wt,{key:0,ref_key:"alertContainer",ref:_,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:P,onTriggerClose:P},{title:L(()=>[Ax,ie(" "+w(a(S)),1)]),_:1},512)):D("",!0),a(B)?(u(),q(Me,{key:1,ref_key:"packageFormRef",ref:G,class:"am-csd__filter-wrapper",rules:a(H),model:a($),"label-position":"top"},{default:L(()=>[m("div",{class:R(["am-csd__filter am-csd__filter-employee",a(T)])},[a(t).employees.length&&a(V)&&a(t).customizedOptions.employee.visibility?(u(),q(Se,{key:0,class:R([{"am-csd__filter-full":!(a(t).locations.length&&a(j)&&a(t).customizedOptions.location.visibility)},a(T)]),label:`${a(i).package_appointment_employee}:`,prop:"employee"},{default:L(()=>[I(We,{modelValue:a($).employee,"onUpdate:modelValue":Ce[0]||(Ce[0]=Le=>a($).employee=Le),clearable:"",filterable:a(t).customizedOptions.employee.filterable,placeholder:`${a(i).package_select_employee}...`,"fit-input-width":!0,"popper-class":"am-csd__filter-employees",disabled:a(E),onChange:Q},{default:L(()=>[(u(!0),x(te,null,fe(a(t).employees,Le=>(u(),q(Ve,{key:Le.id,value:Le.id,label:`${Le.firstName} ${Le.lastName}`},{default:L(()=>[I(Bd,{identifier:Le.id,label:`${Le.firstName} ${Le.lastName}`,price:0,"image-thumb":Le.pictureThumbPath,description:Le.description,"dialog-title":a(i).employee_information_package,"dialog-button-text":a(i).select_this_employee_package,badge:Le.badge,onClick:ee},null,8,["identifier","label","image-thumb","description","dialog-title","dialog-button-text","badge"])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):D("",!0),a(t).locations.length&&a(j)&&a(t).customizedOptions.location.visibility?(u(),q(Se,{key:1,class:R([{"am-csd__filter-full":!(a(t).employees.length&&a(V)&&a(t).customizedOptions.employee.visibility)},a(T)]),label:`${a(i).package_appointment_location}:`,prop:"location"},{default:L(()=>[I(We,{modelValue:a($).location,"onUpdate:modelValue":Ce[1]||(Ce[1]=Le=>a($).location=Le),clearable:"",filterable:a(t).customizedOptions.location.filterable,placeholder:`${a(i).package_select_location}...`,"fit-input-width":!0,disabled:a(E),onChange:Q},{default:L(()=>[(u(!0),x(te,null,fe(a(t).locations,Le=>(u(),q(Ve,{key:Le.id,value:Le.id,label:Le.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):D("",!0)],2)]),_:1},8,["rules","model"])):D("",!0),a(t).appointment!==null?(u(),q(Uu,{key:2,id:0,ref_key:"calendarRef",ref:k,"preselect-slot":!1,"load-counter":a(O),"end-time":a(t).customizedOptions.endTimeVisibility.visibility,"time-zone":a(t).customizedOptions.timeZoneVisibility.visibility,"label-slots-selected":l.labels.date_time_slots_selected,"fetched-slots":null,"service-id":0,date:a(t).appointment&&a(t).appointment.bookingStart?a(t).appointment.bookingStart.split(" ")[0]:"","slots-params":a(X)},null,8,["load-counter","end-time","time-zone","label-slots-selected","date","slots-params"])):D("",!0)],512)],512)]),_:1},8,["visibility","style"])}}});const Px={class:"am-csd__inner"},Ox={class:"am-csd__header"},Dx={class:"am-csd__header-text"},Nx={class:"am-csd__content"},Mx={class:"am-ccpss__heading"},Bx={class:"am-csd__footer"},Fx={name:"CancelBooking"},Ma=Object.assign(Fx,{props:{visibility:{type:Boolean,required:!0},title:{type:String,default:""},description:{type:String,default:""},closeBtnText:{type:String,required:!0},confirmBtnText:{type:String,required:!0},loading:{type:Boolean,default:!1},count:{type:Number,default:1},customizedOptions:{type:Object,required:!0}},emits:["close","confirm","decline"],setup(l,{emit:e}){const t=l;let s=F("containerWidth"),n=F("amFonts"),i=F("amColors"),o=y(()=>({"--am-c-csd-text":i.value.colorMainText,"--am-c-csd-bgr":i.value.colorMainBgr,"--am-font-family":n.value.fontFamily}));return(r,c)=>{const d=fn,f=gn;return u(),q(Xa,{visibility:a(t).visibility,"custom-class":"am-csd am-csd__cancel",style:_e(a(o)),position:"center"},{footer:L(()=>[m("div",Bx,[I(ke,{category:"secondary",size:a(s)<=360?"small":"default",type:l.customizedOptions.cancelBtn.buttonType,disabled:l.loading,onClick:c[1]||(c[1]=()=>{e("decline")})},{default:L(()=>[ie(w(a(t).closeBtnText),1)]),_:1},8,["size","type","disabled"]),I(ke,{category:"danger",size:a(s)<=360?"small":"default",type:l.customizedOptions.confirmBtn.buttonType,disabled:l.loading,onClick:c[2]||(c[2]=()=>{e("confirm")})},{default:L(()=>[ie(w(a(t).confirmBtnText),1)]),_:1},8,["size","type","disabled"])])]),default:L(()=>[m("div",Px,[l.loading?(u(),q(f,{key:1,animated:"",class:"am-ccpss"},{template:L(()=>[m("div",Mx,[I(d,{variant:"rect"})]),(u(!0),x(te,null,fe(new Array(a(t).count),v=>(u(),x("div",{key:v,class:"am-ccpss__text"},[I(d,{variant:"rect"})]))),128))]),_:1})):(u(),x(te,{key:0},[m("div",Ox,[m("div",Dx,w(a(t).title),1),m("div",{class:"am-csd__header-btn",onClick:c[0]||(c[0]=()=>{e("close")})},[I(He,{icon:"close"})])]),m("div",Nx,[m("p",null,w(a(t).description),1)])],64))])]),_:1},8,["visibility","style"])}}});const Vx={name:"CabinetAppointmentsList"},vu=Object.assign(Vx,{props:{groupedAppointments:{type:Object,default:null},responsiveClass:{type:String,default:""},pageWidth:{type:Number},isPackageBooking:{type:Boolean,default:!1},stepKey:{type:String,required:!0}},emits:["booked","canceled","editAppointment"],setup(l,{emit:e}){const t=l;let s=Oe(),n=F("originKey");const i=F("settings");let o=F("amLabels"),r=F("cabinetType"),c=M(null),d=M(null),f=M(null);function v(V=null){d.value=null,e("booked",V)}let g=M(!1);function b(){g.value=!0,De.post("/bookings/cancel/"+c.value.id,{type:"appointment"},Object.assign(Ue(s),{params:{source:"cabinet-"+r.value}})).then(()=>{c.value=null,e("canceled",{message:o.value.appointment_canceled})}).catch(V=>{console.log(V)}).finally(()=>{g.value=!1})}function T(V){let j={total:0,bookable:0,discount:0,tax:0};return V.bookings.forEach(B=>{if(B.status==="approved"||B.status==="pending"){let G=hn(s,{price:B.price,persons:B.persons,aggregatedPrice:B.aggregatedPrice,extras:B.extras,tax:B.tax,coupon:B.coupon},!1);j.total+=G.total,j.bookable+=G.bookable,j.discount+=G.discount,j.tax+=G.tax}}),j.total-j.discount+j.tax}function C(V){let j=[],B=0,G=V;G.bookings.forEach(X=>{X.extras.forEach(Q=>{j.push({id:Q.extraId,quantity:Q.quantity})}),"duration"in X&&X.duration&&X.duration>B&&(X.status==="approved"||X.status==="pending")&&(B=X.duration)});let H={serviceId:G.serviceId,serviceDuration:B||null,locationId:G.locationId,providerIds:[G.providerId],extras:JSON.stringify(j),excludeAppointmentId:G.isGroup?null:G.id,group:1,timeZone:s.getters["cabinet/getTimeZone"],page:"cabinet"};d.value=V,f.value=H}function _(V){return s.getters["entities/getEmployee"](V)}let S=F("amCustomize");const P=F("labels"),k=F("localLanguage");let h=y(()=>i.general.usedLanguages.includes(k.value));function A(V){let j=nt({...P}),B=S.value[V].translations;return B&&Object.keys(B).forEach(G=>{B[G][k.value]&&h.value?j[G]=B[G][k.value]:B[G].default&&(j[G]=B[G].default)}),j}function O(V){return S.value[V].options}let E=F("amColors"),$=y(()=>({"--am-c-capa-bgr":E.value.colorMainBgr,"--am-c-capa-text":E.value.colorMainText,"--am-c-capa-text-op70":Y(E.value.colorMainText,.7),"--am-c-capa-text-op25":Y(E.value.colorMainText,.25),"--am-c-capa-primary":E.value.colorPrimary}));return(V,j)=>(u(),x(te,null,[m("div",{class:R(["am-capa__wrapper",[{"am-no-border":a(t).groupedAppointments&&Object.keys(a(t).groupedAppointments).length===1},a(t).responsiveClass]]),style:_e(a($))},[(u(!0),x(te,null,fe(a(t).groupedAppointments,(B,G)=>(u(),x("div",{key:G,class:"am-capa"},[m("div",{class:R(["am-capa__date",[{"am-today":a(dt)(G)===a(dt)(a(at)().format("YYYY-MM-DD"))},{"am-no-flag":a(t).groupedAppointments&&Object.keys(a(t).groupedAppointments).length===1},a(t).responsiveClass]])},w(a(dt)(G)),3),(u(!0),x(te,null,fe(B.appointments,(H,X)=>(u(),x(te,{key:X},[a(s).getters["entities/getService"](H.serviceId)?(u(),q(gu,{key:0,start:a(nl)(H.bookingStart.split(" ")[1].slice(0,5)),name:a(s).getters["entities/getService"](H.serviceId).name,employee:_(H.provider.id),customers:H.bookings.filter(Q=>Q.status!=="rejected"&&Q.status!=="canceled").map(Q=>Q.customer),price:T(H),duration:a(_k)(a(s),H),periods:[],extras:a(yk)(H.bookings,a(s).getters["entities/getService"](H.serviceId)),tickets:[],"custom-fields":a(pu)(H.bookings,a(r)),location:H.locationId?a(s).getters["entities/getLocation"](H.locationId):null,"google-meet-link":H.googleMeetUrl,"microsoft-teams-link":H.microsoftTeamsUrl,"zoom-link":H.zoomMeeting?H.zoomMeeting.joinUrl:"","lesson-space-link":H.lessonSpace,bookable:H.service,reservation:H,booking:H.bookings[0],"is-package-booking":a(t).isPackageBooking,"responsive-class":a(t).responsiveClass,"parent-width":a(t).pageWidth,"customized-options":O(a(t).stepKey),onCancelBooking:j[0]||(j[0]=Q=>{ye(c)?c.value=Q:c=Q}),onRescheduling:C,onEditAppointment:j[1]||(j[1]=Q=>{a(e)("editAppointment",Q)})},null,8,["start","name","employee","customers","price","duration","extras","custom-fields","location","google-meet-link","microsoft-teams-link","zoom-link","lesson-space-link","bookable","reservation","booking","is-package-booking","responsive-class","parent-width","customized-options"])):D("",!0)],64))),128))]))),128))],6),a(n)==="capc"?(u(),q(Ma,{key:0,visibility:a(c)!==null,title:A("cancelAppointment").cancel_appointment,description:A("cancelAppointment").confirm_cancel_appointment,"close-btn-text":A("cancelAppointment").close,"confirm-btn-text":A("cancelAppointment").confirm,"customized-options":O("cancelAppointment"),loading:a(g),onClose:j[2]||(j[2]=B=>ye(c)?c.value=null:c=null),onDecline:j[3]||(j[3]=B=>ye(c)?c.value=null:c=null),onConfirm:b},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"])):D("",!0),a(n)==="capc"?(u(),q(hu,{key:1,visibility:a(d)!==null,appointment:a(d),"slots-params":a(f),labels:A("rescheduleAppointment"),"customized-options":O("rescheduleAppointment"),onClose:j[4]||(j[4]=B=>ye(d)?d.value=null:d=null),onSuccess:v,onError:j[5]||(j[5]=()=>{})},null,8,["visibility","appointment","slots-params","labels","customized-options"])):D("",!0)],64))}});const Rx={class:"am-capai-def__notify"},qx=["innerHTML"],Ux={props:{slotsProps:{type:Object,required:!0},slotsLoading:{type:Boolean,required:!0},isDisabledDate:{type:Function,required:!0},freeSlots:{type:Object,required:!0},times:{type:Array,required:!0},getFreeTimes:{type:Function,required:!0}},emits:["removeSlots","fetchSlots","changedSlotCondition","getSelectedDatesTimes","filterOut","getFreeTimes","selectDate","selectTime"],setup(l,{expose:e,emit:t}){const s=l;let n=Oe(),i=F("amLabels"),o=F("localLanguage");const r=F("settings");let c=F("licence");const d=M(null);let{width:f}=es(d),v=y(()=>tt(f.value)),g=M({categoryId:y({get:()=>n.getters["appointment/getCategoryId"],set:H=>{n.commit("appointment/setCategoryId",H||null)}}),serviceId:y({get:()=>n.getters["appointment/getServiceId"],set:H=>{n.commit("appointment/setServiceId",H||null)}}),providerId:y({get:()=>n.getters["appointment/getProviderId"],set:H=>{n.commit("appointment/setProviderId",H||null)}}),locationId:y({get:()=>n.getters["appointment/getLocationId"],set:H=>{n.commit("appointment/setLocationId",H||null)}}),lessonSpace:y({get:()=>n.getters["appointment/getLessonSpace"],set:H=>{n.commit("appointment/setLessonSpace",H||"")}}),startDate:y({get:()=>n.getters["appointment/getStartDate"],set:H=>{n.commit("appointment/setStartDate",H||"")}}),startTime:y({get:()=>n.getters["appointment/getStartTime"],set:H=>{n.commit("appointment/setStartTime",H||"")}}),notifyParticipants:y({get:()=>n.getters["appointment/getNotifyParticipants"],set:H=>{n.commit("appointment/setNotifyParticipants",H)}}),internalNotes:y({get:()=>n.getters["appointment/getInternalNotes"],set:H=>{n.commit("appointment/setInternalNotes",H||"")}})}),b=y(()=>({serviceId:[{required:!0,message:i.value.please_select_service,trigger:["submit","change"]}],startDate:[{required:!0,message:i.value.select_date_warning,trigger:["submit","change"]}],startTime:[{required:!0,message:i.value.select_time_warning,trigger:["submit","change"]}]})),T=y(()=>n.getters["entities/filteredCategories"](n.getters["appointment/getSelection"])),C=M(n.getters["entities/filteredCategories"]({categoryId:null,serviceId:null,providerId:n.getters["appointment/getProviderId"],locationId:null})),_=y(()=>n.getters["entities/filteredServices"](n.getters["appointment/getSelection"])),S=M(n.getters["entities/filteredServices"]({categoryId:null,serviceId:null,providerId:n.getters["appointment/getProviderId"],locationId:null})),P=y(()=>n.getters["appointment/getId"]&&n.getters["appointment/getServiceId"]&&S.value.map(H=>H.id).indexOf(n.getters["appointment/getServiceId"])===-1?n.getters["entities/getService"](n.getters["appointment/getServiceId"]):null),k=y(()=>n.getters["entities/filteredLocations"](n.getters["appointment/getSelection"])),h=M(n.getters["entities/filteredLocations"]({categoryId:null,serviceId:null,providerId:n.getters["appointment/getProviderId"],locationId:null})),A=y(()=>n.getters["appointment/getId"]&&n.getters["appointment/getLocationId"]&&h.value.map(H=>H.id).indexOf(n.getters["appointment/getLocationId"])===-1?n.getters["entities/getLocation"](n.getters["appointment/getLocationId"]):null),O=M(n.getters["entities/getSpaces"]);function E(){n.commit("appointment/setTargetedDate",null),n.commit("appointment/setStartDate",null),n.commit("appointment/setStartTime",null),t("removeSlots")}function $(H,X=null,Q=!1){let ee=n.getters["appointment/getTargetedDate"];!H&&!ee?H=pe().toDate():!H&&ee&&(H=ee),n.commit("appointment/setTargetedDate",H&&Q?H:ee),g.value.serviceId&&t("fetchSlots",H,X,Q)}function V(){g.value.startDate&&$(g.value.startDate)}function j(H){t("selectTime",H)}function B(H){H?t("selectDate",H):E()}function G(H){H?(clearTimeout(this.searchSpacesTimer),n.commit("auth/setSpacesLoading",!0),De.get("/entities",{params:{types:["spaces"],lessonSpaceSearch:H}}).then(X=>{O.value=X.data.data.spaces}).catch(X=>{console.log(X)}).finally(()=>{n.commit("auth/setSpacesLoading",!1)})):O.value=n.getters["entities/getSpaces"]}return rt(()=>g.value.serviceId,H=>{n.dispatch("appointment/updateEmployeeService",H||null),H&&(n.dispatch("appointment/recreateAllBookingCustomFields",{label:i.value.required_field}),V())}),Ze(()=>{S.value.length===1&&!n.getters["appointment/getId"]&&n.commit("appointment/setServiceId",S.value[0].id),h.value.length===1&&!n.getters["appointment/getId"]&&n.commit("appointment/setLocationId",h.value[0].id)}),e({detailsFormRef:d}),(H,X)=>{const Q=yt,ee=vn,le=et;return u(),q(le,{ref_key:"detailsFormRef",ref:d,model:a(g),rules:a(b),class:"am-capai-def"},{default:L(()=>[a(C).length>1?(u(),q(Q,{key:0,label:`${a(i).category}`,class:"am-capai-def__item"},{default:L(()=>[I(We,{modelValue:a(g).categoryId,"onUpdate:modelValue":X[0]||(X[0]=W=>a(g).categoryId=W),clearable:"",filterable:"",placeholder:`${a(i).select_service_category}`},{default:L(()=>[(u(!0),x(te,null,fe(a(C),W=>(u(),q(Ve,{key:W.id,value:W.id,label:W.name,disabled:a(g).serviceId&&typeof a(T).find(se=>se.id===W.id)>"u"},null,8,["value","label","disabled"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):D("",!0),I(Q,{label:`${a(i).services_dropdown}`,prop:"serviceId",class:"am-capai-def__item"},{default:L(()=>[I(We,{modelValue:a(g).serviceId,"onUpdate:modelValue":X[1]||(X[1]=W=>a(g).serviceId=W),disabled:a(S).length===1,clearable:"",filterable:"",placeholder:`${a(i).select_service}`},{default:L(()=>[(u(!0),x(te,null,fe(a(S),W=>(u(),q(Ve,{key:W.id,value:W.id,label:W.name,disabled:typeof a(_).find(se=>se.id===W.id)>"u"},null,8,["value","label","disabled"]))),128)),a(P)?(u(),q(Ve,{key:a(P).id,value:a(P).id,label:a(P).name},null,8,["value","label"])):D("",!0)]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),!a(c).isStarter&&a(h).length>1?(u(),q(Q,{key:1,label:`${a(i).location}`,class:"am-capai-def__item"},{default:L(()=>[I(We,{modelValue:a(g).locationId,"onUpdate:modelValue":X[2]||(X[2]=W=>a(g).locationId=W),disabled:a(h).length===1,clearable:"",filterable:"",placeholder:`${a(i).select_location}`,onChange:V},{default:L(()=>[(u(!0),x(te,null,fe(a(h),W=>(u(),q(Ve,{key:W.id,value:W.id,label:W.name,disabled:a(A)===null&&typeof a(k).find(se=>se.id===W.id)>"u"},null,8,["value","label","disabled"]))),128)),a(A)?(u(),q(Ve,{key:a(A).id,value:a(A).id,label:a(A).name},null,8,["value","label"])):D("",!0)]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])):D("",!0),a(r).lessonSpace.enabled?(u(),q(Q,{key:2,label:`${a(i).lesson_space}`,class:"am-capai-def__item"},{default:L(()=>[I(We,{modelValue:a(g).lessonSpace,"onUpdate:modelValue":X[3]||(X[3]=W=>a(g).lessonSpace=W),filterable:"",clearable:"",remote:"","remote-method":G,placeholder:`${a(i).select}`},{default:L(()=>[(u(),q(Ve,{key:0,value:0,label:a(i).lesson_space_new_space},null,8,["label"])),(u(!0),x(te,null,fe(a(O),W=>(u(),q(Ve,{key:W.id,value:W.id,label:W.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):D("",!0),I(Q,{label:`${a(i).date}`,prop:"startDate",class:R(["am-capai-def__item am-w-50",a(v)])},{default:L(()=>[I(Ht,{modelValue:a(g).startDate,"onUpdate:modelValue":X[4]||(X[4]=W=>a(g).startDate=W),type:"date",format:a(Wt)(),placeholder:a(i).select_date,clearable:!0,size:"default",lang:a(o),disabled:!a(g).serviceId,"disabled-date":(W,se)=>a(s).isDisabledDate(W,null,!0,se),"popper-class":l.slotsLoading?"am-slots-loader":"",onPanelChange:X[5]||(X[5]=W=>{$(W,null,!0)}),onChange:B,onFocus:X[6]||(X[6]=W=>a(g).serviceId&&!a(g).startDate?$(null,null,!0):!1)},null,8,["modelValue","format","placeholder","lang","disabled","disabled-date","popper-class"])]),_:1},8,["label","class"]),I(Q,{label:`${a(i).time}`,prop:"startTime",class:R(["am-capai-def__item am-w-50",a(v)])},{default:L(()=>[I(We,{modelValue:a(g).startTime,"onUpdate:modelValue":X[7]||(X[7]=W=>a(g).startTime=W),placeholder:`${a(i).select_time}`,disabled:!a(g).startDate,"prefix-icon":"clock","prefix-icon-color":"var(--am-c-select-placeholder)",onChange:j},{default:L(()=>[(u(!0),x(te,null,fe(a(s).getFreeTimes(null,{date:a(g).startDate,times:a(s).times,time:a(g).startTime},!0),W=>(u(),q(Ve,{key:W,value:W,label:W},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label","class"]),I(Q,{class:"am-capai-def__item"},{default:L(()=>[m("div",Rx,[I(gt,{modelValue:a(g).notifyParticipants,"onUpdate:modelValue":X[8]||(X[8]=W=>a(g).notifyParticipants=W),label:a(i).notify_customers},null,8,["modelValue","label"]),I(ee,{effect:"dark",placement:"top"},{content:L(()=>[m("div",{innerHTML:a(i).notify_customers_tooltip},null,8,qx)]),default:L(()=>[I(He,{icon:"info-reverse"})]),_:1})])]),_:1}),I(Q,{label:`${a(i).note_internal}`,class:"am-capai-def__item"},{default:L(()=>[I(ht,{modelValue:a(g).internalNotes,"onUpdate:modelValue":X[9]||(X[9]=W=>a(g).internalNotes=W),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])}}};function _u(l,e){return Object.assign({},e,{gender:e.gender?e.gender:"",note:e.note?e.note:"",phone:e.phone?e.phone:"",birthday:e.birthday?pe(e.birthday.date.split(" ")[0]).toDate():null,translations:e.translations?JSON.parse(e.translations):{defaultLanguage:""}})}function jx(l){let e=l.getters["customerInfo/getCustomer"];return Object.assign({},e,{birthday:e.birthday?pe(e.birthday).format("YYYY-MM-DD"):null,translations:e.translations.defaultLanguage?JSON.stringify(e.translations):null})}const ys=nt(window.wpAmeliaLabels);function zx(){return[{value:"approved",label:ys.approved,icon:"check",color:"var(--am-c-success)"},{value:"pending",label:ys.pending,icon:"refresh",color:"var(--am-c-warning)"},{value:"canceled",label:ys.canceled,icon:"close",color:"var(--am-c-error)"},{value:"rejected",label:ys.rejected,icon:"info-reverse",color:"var(--am-c-main-text)"},{value:"waiting",label:ys.waiting,icon:"clock",color:"var(--am-c-warning)"},{value:"no-show",label:ys["no-show"],icon:"clock",color:"var(--am-c-warning)"}]}const Yx=m("span",{class:"am-icon-triangle-info"},null,-1),Wx={key:0,class:"am-capai-warn__content"},Hx={key:0,class:"am-capai-warn__heading"},Zx={key:1,class:"am-capai-warn__text"},yu={props:{heading:{type:String,default:""},text:{type:String,default:""}},setup(l){const e=l;let t=F("amColors"),s=y(()=>({"--am-c-warning":t.value.colorWarning,"--am-c-warning-op10":Y(t.value.colorWarning,.1),"--am-c-main-text":t.value.colorMainText,"--am-c-main-text-op10":Y(t.value.colorMainText,.1)}));return(n,i)=>(u(),x("div",{class:"am-capai-warn",style:_e(a(s))},[Yx,e.heading||e.text?(u(),x("div",Wx,[e.heading?(u(),x("div",Hx,w(e.heading),1)):D("",!0),e.text?(u(),x("div",Zx,w(e.text),1)):D("",!0)])):D("",!0)],4))}};const Gx={class:"am-cap-aec__header"},Jx=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),bu={props:{visibility:{type:Boolean,required:!0},customCss:{type:Object,default:()=>{}},responsiveClass:{type:String,default:""}},emits:["update:visibility","addedCustomer"],setup(l,{emit:e}){const t=l,s=F("settings");let n=F("amLabels");const i=Oe();let o=M(null),r=M(!1),c=M("success"),d=M("");function f(){r.value=!1,i.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}let v=y(()=>i.getters["customerInfo/getCustomerId"]),g=y(()=>{let E=[];return s.wordpress.locale in i.getters["entities/getSettings"].languages&&E.push({value:i.getters["entities/getSettings"].languages[s.wordpress.locale].wp_locale,label:i.getters["entities/getSettings"].languages[s.wordpress.locale].name}),s.general.usedLanguages.forEach($=>{$ in i.getters["entities/getSettings"].languages&&E.push({value:i.getters["entities/getSettings"].languages[$].wp_locale,label:i.getters["entities/getSettings"].languages[$].name})}),E}),b=M(null),T=M(!1),C=M({firstName:y({get:()=>i.getters["customerInfo/getCustomerFirstName"],set:E=>{i.commit("customerInfo/setCustomerFirstName",E||"")}}),lastName:y({get:()=>i.getters["customerInfo/getCustomerLastName"],set:E=>{i.commit("customerInfo/setCustomerLastName",E||"")}}),email:y({get:()=>i.getters["customerInfo/getCustomerEmail"],set:E=>{i.commit("customerInfo/setCustomerEmail",E||"")}}),phone:y({get:()=>i.getters["customerInfo/getCustomerPhone"],set:E=>{i.commit("customerInfo/setCustomerPhone",E||"")}}),language:y({get:()=>i.getters["customerInfo/getCustomerLanguage"],set:E=>{i.commit("customerInfo/setCustomerLanguage",E||"")}}),gender:y({get:()=>i.getters["customerInfo/getCustomerGender"],set:E=>{i.commit("customerInfo/setCustomerGender",E||"")}}),birthday:y({get:()=>i.getters["customerInfo/getCustomerBirthday"]||"",set:E=>{i.commit("customerInfo/setCustomerBirthday",E?pe(E).format("YYYY-MM-DD"):"")}}),note:y({get:()=>i.getters["customerInfo/getCustomerNote"],set:E=>{i.commit("customerInfo/setCustomerNote",E||"")}})}),_=M({firstName:[{required:!0,message:n.value.enter_first_name_warning,trigger:["submit","blur"]}],lastName:[{required:!0,message:n.value.enter_last_name_warning,trigger:["submit","blur"]}]}),S=M({firstName:{template:Ye.text,props:{itemName:"firstName",label:n.value.first_name_colon,placeholder:n.value.enter_first_name,class:y(()=>`am-cap-aec__form-item ${t.responsiveClass}`),iconStart:Je({components:{IconComponent:He},template:'<IconComponent icon="user"/>'})}},lastName:{template:Ye.text,props:{itemName:"lastName",label:n.value.last_name_colon,placeholder:n.value.enter_last_name,class:y(()=>`am-cap-aec__form-item ${t.responsiveClass}`),iconStart:Je({components:{IconComponent:He},template:'<IconComponent icon="user"/>'})}},email:{template:Ye.text,props:{itemName:"email",label:n.value.email_colon,placeholder:n.value.enter_email,class:y(()=>`am-cap-aec__form-item ${t.responsiveClass}`),iconStart:Je({components:{IconComponent:He},template:'<IconComponent icon="email"/>'})}},phone:{countryPhoneIso:y({get:()=>i.getters["customerInfo/getCustomerCountryPhoneIso"]||"",set:E=>{i.commit("customerInfo/setCustomerCountryPhoneIso",E?E.toLowerCase():"")}}),template:Ye.phone,props:{itemName:"phone",label:n.value.phone_colon,placeholder:n.value.enter_phone,defaultCode:y(()=>i.getters["customerInfo/getCustomerCountryPhoneIso"]||""),phoneError:y(()=>T.value),whatsAppLabel:n.value.whatsapp_opt_in_text,isWhatsApp:s.notifications.whatsAppEnabled&&s.notifications.whatsAppAccessToken&&s.notifications.whatsAppBusinessID&&s.notifications.whatsAppPhoneID,class:y(()=>`am-cap-aec__form-item ${t.responsiveClass}`)}},language:{template:Ye.select,props:{itemName:"language",label:n.value.notification_language,placeholder:n.value.language,class:y(()=>`am-cap-aec__form-item ${t.responsiveClass}`),prefixIcon:Je({components:{IconComponent:He},template:`
          <IconComponent icon="pennant"/>`}),options:g.value}},gender:{template:Ye.select,props:{itemName:"gender",label:n.value.gender,class:y(()=>`am-cap-aec__form-item ${t.responsiveClass}`),prefixIcon:Je({components:{IconComponent:He},template:`
          <IconComponent icon="gender"/>`}),options:[{label:n.value.female,value:"female"},{label:n.value.male,value:"male"}]}},birthday:{template:Ye.datepicker,props:{itemName:"birthday",label:n.value.date_of_birth,placeholder:n.value.enter_date_of_birth,clearable:!0,readOnly:!1,class:y(()=>`am-cap-aec__form-item ${t.responsiveClass}`)}},note:{template:Ye["text-area"],props:{itemName:"note",label:n.value.note_internal,itemType:"textarea",class:y(()=>`am-cap-aec__form-item ${t.responsiveClass}`)}}});function P(){i.dispatch("customerInfo/resetCustomer"),e("update:visibility",!1)}let k=y(()=>i.getters["customerInfo/getLoading"]);function h(){b.value.validate(E=>{if(!E)return;i.commit("customerInfo/setLoading",!0);let $=jx(i);De.post("/users/customers"+($.id?"/"+$.id:""),$,Object.assign(Ue(i),{params:{source:"cabinet-provider"}})).then(V=>{i.commit("auth/setPreloadedCustomers",i.getters["auth/getPreloadedCustomers"].concat([V.data.data.user]).sort((j,B)=>j.id-B.id)),e("addedCustomer",V.data.data.user),P()}).catch(V=>{"response"in V&&V.response&&(d.value=V.response.data.message,r.value=!0)}).finally(()=>{i.commit("customerInfo/setLoading",!1)})})}let A=F("amColors"),O=y(()=>({"--am-c-aec-text":A.value.colorMainText}));return(E,$)=>{const V=et;return u(),q(Xa,{visibility:t.visibility,position:"center","custom-class":"am-slide-popup-aec","custom-css":{...l.customCss,...a(O)},"onUpdate:visibility":P},{header:L(()=>[m("div",Gx,[a(v)?(u(),x(te,{key:0},[ie(w(a(n).edit_customer),1)],64)):(u(),x(te,{key:1},[ie(w(a(n).add_customer),1)],64))])]),footer:L(()=>[I(ke,{type:"plain",category:"secondary",onClick:P},{default:L(()=>[ie(w(a(n).cancel),1)]),_:1}),I(ke,{onClick:h},{default:L(()=>[ie(w(a(n).save),1)]),_:1})]),default:L(()=>[a(r)?(u(),q(wt,{key:0,ref_key:"alertContainer",ref:o,type:a(c),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:f,onTriggerClose:f},{title:L(()=>[Jx,ie(" "+w(a(d)),1)]),_:1},8,["type"])):D("",!0),a(k)?(u(),q(Zt,{key:2})):(u(),q(V,{key:1,ref_key:"customerFormRef",ref:b,model:a(C),rules:a(_),"label-position":"top",class:"am-cap-aec__form"},{default:L(()=>[(u(!0),x(te,null,fe(a(S),(j,B)=>(u(),q(Tt(j.template),Dt({key:B},j.props,{modelValue:a(C)[B],"onUpdate:modelValue":G=>a(C)[B]=G,countryPhoneIso:j.countryPhoneIso,"onUpdate:countryPhoneIso":G=>j.countryPhoneIso=G}),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"]))),128))]),_:1},8,["model","rules"]))]),_:1},8,["visibility","custom-css"])}}};const Xx={class:"am-cap__cust-option"},Qx={class:"am-cap__cust-option__heading"},Kx={key:0,class:"am-cap__cust-option__inner"},e2={key:1,class:"am-cap__cust-option__inner"},t2={class:"am-capai-cuf__content"},a2={class:"am-capai-cuf__bulk-label"},s2={key:0,class:"am-capai-customer__data"},l2=m("span",{class:"am-icon-phone"},null,-1),n2=["href"],i2={key:1,class:"am-capai-customer__data"},o2=m("span",{class:"am-icon-email"},null,-1),r2=["href"],c2={props:{responsiveClass:{type:String,default:""},capacityWarning:{type:String,default:""},appointmentCapacity:{type:Number,default:0},savedAppointment:{type:Object,default:()=>{}}},emits:["changedSlotCondition"],setup(l,{expose:e,emit:t}){const s=l;let n=Oe();const i=F("shortcodeData"),o=F("settings");let r=F("amCustomize"),c=F("amLabels"),d=F("pageWidth"),f=y(()=>n.getters["appointment/getEmployeeService"]),v=M(null),g=M({customersIds:y({get:()=>n.getters["customerInfo/getCustomersIds"],set:se=>n.commit("customerInfo/setCustomersIds",se)})}),b=M({customersIds:[{required:!0,message:c.value.select_customers,trigger:["submit","change"]}]}),T=y(()=>n.getters["customerInfo/getLoading"]),C=y(()=>n.getters["customerInfo/getCustomers"]),_=M(o.general.defaultAppointmentStatus),S=y(()=>zx().filter(se=>n.getters["appointment/getId"]?se.value!=="waiting":(se.value==="approved"||se.value==="pending")&&se.value!=="no-show")),P=y(()=>n.getters["appointment/getBookings"]?n.getters["appointment/getBookings"]:[]),k=M(!1);function h(se){n.commit("customerInfo/setCustomersIds",[se.id].concat(n.getters["customerInfo/getCustomersIds"])),n.commit("customerInfo/setCustomers",[se].concat(n.getters["customerInfo/getCustomers"])),A()}function A(){let se=n.getters["appointment/getBookings"].map(z=>parseInt(z.customer.id)),ge=!1,Ie=f.value.settings?JSON.parse(f.value.settings):null;g.value.customersIds.filter(z=>!se.includes(z)).forEach(z=>{let J={};s.savedAppointment&&s.savedAppointment.bookings.forEach(Z=>{parseInt(Z.customer.id)===parseInt(z)&&(J=Z)}),ge=n.getters["appointment/getBookings"].length>1,n.getters["appointment/getBookings"].push(Object.assign({id:null,customer:C.value.find(Z=>Z.id===parseInt(z)),persons:1,status:Ie&&"general"in Ie&&"defaultAppointmentStatus"in Ie.general?Ie.general.defaultAppointmentStatus:o.general.defaultAppointmentStatus,duration:Object.keys(f.value.customPricing.durations)[0],extras:f.value.extras.map(Z=>new Object({extraId:Z.id,quantity:0})),customFields:{}},J)),n.dispatch("appointment/resetBookingCustomFields",n.getters["appointment/getBookings"].length-1),n.dispatch("appointment/addCustomFieldsFormRules",{key:n.getters["appointment/getBookings"].length-1,label:c.value.required_field}),n.commit("appointment/setBooking",{index:n.getters["appointment/getBookings"].length-1,value:n.getters["appointment/getBookings"][n.getters["appointment/getBookings"].length-1]})});let ue=se.filter(z=>!g.value.customersIds.includes(z)),ae=[];n.getters["appointment/getBookings"].forEach((z,J)=>{ue.indexOf(z.customer.id)!==-1&&ae.push(J)});let me=n.getters["appointment/getBookings"].length;for(let z=me-1;z>=0;z--)ae.indexOf(z)!==-1&&(ge=!0,n.dispatch("appointment/removeBooking",z));ge&&t("changedSlotCondition")}function O(){n.dispatch("customerInfo/resetCustomer"),k.value=!0}function E(se){n.dispatch("customerInfo/resetCustomer"),n.commit("customerInfo/setLoading",!0),k.value=!0,De.get("/users/customers/"+se,Object.assign({params:{source:"cabinet-provider"}},Ue(n))).then(ge=>{n.commit("customerInfo/setCustomer",_u(n,ge.data.data.user))}).catch(ge=>{console.log(ge)}).finally(()=>{n.commit("customerInfo/setLoading",!1)})}function $(se){n.dispatch("appointment/removeBooking",se),n.dispatch("appointment/deleteAllCustomFieldsFormRules"),n.dispatch("appointment/addAllCustomFieldsFormRules",{label:c.value.required_field}),t("changedSlotCondition")}const{noShowData:V}=F("noShowData");function j(se,ge){return se&&ge?"am-w-50":""}function B(se){se&&n.commit("appointment/setAllBookingsStatus",se)}function G(se,ge){n.commit("appointment/setBookingStatus",{index:se,value:ge})}function H(se,ge){n.commit("appointment/setBookingPersons",{index:se,value:ge}),t("changedSlotCondition")}function X(se,ge){n.commit("appointment/setBookingDuration",{index:se,value:ge}),t("changedSlotCondition")}let Q=y(()=>i.value.cabinetType==="employee"?r.value.appointments.options.customerPhone.visibility:!0),ee=y(()=>i.value.cabinetType==="employee"?r.value.appointments.options.customerEmail.visibility:!0),le=F("amColors"),W=y(()=>({"--am-c-card-text":le.value.colorMainText}));return Ze(()=>{if(n.getters["appointment/getId"]){let se=n.getters["appointment/getBookings"].map(ge=>ge.customer.id);n.commit("customerInfo/setCustomersIds",se),fl(n,"",{limit:se.length,customers:se},()=>{n.commit("customerInfo/setCustomers",n.getters["customerInfo/getCustomers"].concat(n.getters["auth/getPreloadedCustomers"].filter(ge=>n.getters["customerInfo/getCustomers"].map(Ie=>Ie.id).indexOf(ge.id)===-1)).sort((ge,Ie)=>ge.id-Ie.id))})}else n.commit("customerInfo/setCustomers",n.getters["auth/getPreloadedCustomers"])}),e({customersFormRef:v}),(se,ge)=>{const Ie=yt,ue=et;return u(),x("div",{class:"am-capai-cuf",style:_e(a(W))},[s.capacityWarning?(u(),q(yu,{key:0,heading:s.capacityWarning},null,8,["heading"])):D("",!0),m("div",{class:R(["am-capai-cuf__heading",s.responsiveClass])},[I(ue,{ref_key:"customersFormRef",ref:v,model:a(g),rules:a(b),class:R(["am-capai-cuf__heading-form",s.responsiveClass])},{default:L(()=>[I(Ie,{prop:"customersIds",class:"am-capai-cuf__heading-form__item"},{default:L(()=>[I(We,{modelValue:a(g).customersIds,"onUpdate:modelValue":ge[0]||(ge[0]=ae=>a(g).customersIds=ae),filterable:"",clearable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",remote:"","popper-class":"am-capai-cuf__popper-customer",placeholder:`${a(c).select_customers}`,"remote-method":ae=>{a(fl)(a(n),ae)},loading:a(T),onChange:A,onFocus:ge[1]||(ge[1]=ae=>a(Oo)(a(n)))},{default:L(()=>[(u(!0),x(te,null,fe(a(C),ae=>(u(),q(Ve,{key:ae.id,disabled:a(f)?.maxCapacity===l.appointmentCapacity&&a(g).customersIds.indexOf(ae.id)===-1,value:ae.id,label:ae.email&&a(ee)?ae.email:ae.firstName+" "+ae.lastName},{default:L(()=>[m("div",Xx,[m("div",Qx,w(ae.firstName+" "+ae.lastName),1),a(ee)&&ae.email?(u(),x("div",Kx,w(ae.email),1)):D("",!0),a(Q)&&ae.phone?(u(),x("div",e2,w(ae.phone),1)):D("",!0)])]),_:2},1032,["disabled","value","label"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading"])]),_:1})]),_:1},8,["model","rules","class"]),a(o).roles.allowWriteCustomers?(u(),q(ke,{key:0,class:R(["am-capai-cuf__heading-add",s.responsiveClass]),size:"default",prefix:"plus",icon:"plus","icon-only":a(d)<=540,disabled:a(f)?.maxCapacity===l.appointmentCapacity,onClick:O},{default:L(()=>[ie(w(a(c).new_customer),1)]),_:1},8,["class","icon-only","disabled"])):D("",!0)],2),m("div",t2,[a(n).getters["appointment/getBookings"].length>1?(u(),x("div",{key:0,class:R(["am-capai-cuf__bulk",s.responsiveClass])},[m("div",a2,w(a(c).change_group_status),1),I(We,{modelValue:a(_),"onUpdate:modelValue":ge[2]||(ge[2]=ae=>ye(_)?_.value=ae:_=ae),clearable:"",size:"small",placeholder:"Group Status","popper-class":"am-capai-cuf__popper","parent-class":`am-capai-cuf__bulk-status ${s.responsiveClass}`,"prefix-icon":a(_)?a(S).find(ae=>ae.value===a(_)).icon:"circle-empty","prefix-icon-color":a(_)?a(S).find(ae=>ae.value===a(_)).color:"var(--am-c-select-text-op40)",onChange:B},{default:L(()=>[(u(!0),x(te,null,fe(a(S),ae=>(u(),q(Ve,{key:ae.value,value:ae.value,label:ae.label},{default:L(()=>[m("span",{class:R(`am-icon-${ae.icon}`),style:_e(`color: ${ae.color}`)},null,6),ie(" "+w(ae.label),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","parent-class","prefix-icon","prefix-icon-color"])],2)):D("",!0),(u(!0),x(te,null,fe(a(P),(ae,me)=>(u(),x("div",{key:me,class:R(["am-capai-cuf__card",s.responsiveClass])},[m("div",{class:R(["am-capai-cuf__card-info",s.responsiveClass])},[m("div",{class:R(["am-capai-customer__name",a(V)(ae.customer.noShowCount).class])},[a(V)(ae.customer.noShowCount).icon?(u(),x("span",{key:0,class:R(`am-icon-${a(V)(ae.customer.noShowCount).icon}`)},null,2)):D("",!0),ie(" "+w(ae.customer.firstName+" "+ae.customer.lastName),1)],2),ae.customer.phone&&a(Q)?(u(),x("div",s2,[l2,m("a",{href:`tel:${ae.customer.phone}`},w(ae.customer.phone),9,n2)])):D("",!0),ae.customer.email&&a(ee)?(u(),x("div",i2,[o2,m("a",{href:`mailto:${ae.customer.email}`},w(ae.customer.email),9,r2)])):D("",!0)],2),m("div",{class:R(["am-capai-cuf__card-booking",s.responsiveClass])},[I(We,{modelValue:ae.status,"onUpdate:modelValue":z=>ae.status=z,"prefix-icon":a(S).find(z=>z.value===ae.status).icon,"prefix-icon-color":a(S).find(z=>z.value===ae.status).color,"popper-class":"am-capai-cuf__popper",size:"small",onChange:z=>G(me,z)},{default:L(()=>[(u(!0),x(te,null,fe(a(S),z=>(u(),q(Ve,{key:z.value,value:z.value,label:a(S).find(J=>J.value===ae.status).label},{default:L(()=>[m("span",{class:R(`am-icon-${z.icon}`),style:_e(`color: ${z.color}`)},null,6),ie(" "+w(z.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","prefix-icon","prefix-icon-color","onChange"]),a(f).maxCapacity>1?(u(),q(We,{key:0,modelValue:ae.persons,"onUpdate:modelValue":z=>ae.persons=z,"parent-class":`${j(a(f).maxCapacity>1,Object.keys(a(f).customPricing.durations).length>1)} ${s.responsiveClass}`,placeholder:a(c).persons,"prefix-icon":"users","prefix-icon-color":"var(--am-c-card-text)",size:"small",onChange:z=>H(me,z)},{default:L(()=>[(u(!0),x(te,null,fe(a(f)?.maxCapacity,z=>(u(),q(Ve,{key:z,disabled:l.appointmentCapacity-ae.persons+z>a(f)?.maxCapacity,value:z,label:z},null,8,["disabled","value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","parent-class","placeholder","onChange"])):D("",!0),Object.keys(a(f).customPricing.durations).length>1?(u(),q(We,{key:1,modelValue:ae.duration,"onUpdate:modelValue":z=>ae.duration=z,"parent-class":`${j(a(f).maxCapacity>1,Object.keys(a(f).customPricing.durations).length>1)} ${s.responsiveClass}`,placeholder:a(c).duration,"prefix-icon":"clock","prefix-icon-color":"var(--am-c-card-text)",size:"small",onChange:z=>X(me,z)},{default:L(()=>[(u(!0),x(te,null,fe(Object.keys(a(f).customPricing.durations),z=>(u(),q(Ve,{key:z,value:z,label:a(hl)(z,a(c).h,a(c).min)},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","parent-class","placeholder","onChange"])):D("",!0)],2),I(ka,{index:me,"reference-class":s.responsiveClass,"have-edit":a(o).roles.allowWriteCustomers,onRemove:$,onEdit:z=>E(ae.customer.id)},null,8,["index","reference-class","have-edit","onEdit"])],2))),128))]),a(k)?(u(),q(bu,{key:1,visibility:a(k),"responsive-class":s.responsiveClass,"onUpdate:visibility":ge[3]||(ge[3]=ae=>ye(k)?k.value=ae:k=ae),onAddedCustomer:h},null,8,["visibility","responsive-class"])):D("",!0)],4)}}};const u2=m("span",{class:"am-icon-email"},null,-1),d2=["href"],m2=m("span",{class:"am-icon-phone"},null,-1),p2=["href"],f2={props:{responsiveClass:{type:String,default:""}},setup(l,{expose:e}){const t=l;let s=Oe();const n=F("shortcodeData");let i=F("amCustomize");const o=F("settings");let r=F("amLabels"),c=M(null),d=M({}),f=y(()=>s.getters["appointment/getCustomFieldsRules"]),v=M({}),g=y(()=>s.getters["appointment/getCustomFields"]),b=y(()=>s.getters["appointment/getServiceId"]),T=y(()=>s.getters["customerInfo/getCustomersIds"]),C=M(null);function _(O,E){let $=s.getters["appointment/getBookings"][O].id;(E.type!=="file"||$)&&(d.value[`${O}cf${E.id}`]=y({get:()=>{let V=s.getters["appointment/getBookings"][O].customFields[E.id]?.value;return V||""},set:V=>s.dispatch("appointment/updateBookingCustomField",{bookingKey:O,fieldId:E.id,value:V})}))}function S(O,E){let $=s.getters["appointment/getBookings"][O].id;(E.type!=="file"||$)&&(v.value[O][E.id]={template:Ye[E.type],props:{id:E.id,itemName:`${O}cf${E.id}`,label:E.label,options:E.options,class:`am-capai-cfields__item am-cf-width-${E.width}`}}),E.type==="text-area"&&(v.value[O][E.id].props={...v.value[O][E.id].props,itemType:"textarea"}),E.type==="file"&&$&&(v.value[O][E.id].props={...v.value[O][E.id].props,btnLabel:r.value.upload_file_here,isUpload:!1,bookingId:$}),E.type==="datepicker"&&(v.value[O][E.id].props={...v.value[O][E.id].props,weekStartsFromDay:o.wordpress.startOfWeek})}function P(){d.value={},s.getters["appointment/getBookings"].forEach((O,E)=>{v.value[E]={},s.getters["appointment/getCustomFields"].forEach($=>{_(E,$),S(E,$)})})}const{noShowData:k}=F("noShowData");let h=y(()=>n.value.cabinetType==="employee"?i.value.appointments.options.customerPhone.visibility:!0),A=y(()=>n.value.cabinetType==="employee"?i.value.appointments.options.customerEmail.visibility:!0);return rt([b,T],()=>{P()}),gl(()=>{P()}),Ze(()=>{s.getters["appointment/getBookings"].filter(O=>O.status!=="canceled"&&O.status!=="rejected").length<2&&(C.value=0)}),e({customFieldsFormRef:c}),(O,E)=>{const $=Os,V=Ds,j=et;return u(),q(j,{ref_key:"customFieldsFormRef",ref:c,model:a(d),rules:a(f),"label-position":"top",class:R(["am-capai-cfields am-capai-cfields__form",t.responsiveClass])},{default:L(()=>[I(V,{modelValue:a(C),"onUpdate:modelValue":E[0]||(E[0]=B=>ye(C)?C.value=B:C=B),class:"am-capai-collapse",accordion:""},{default:L(()=>[(u(!0),x(te,null,fe(a(s).getters["appointment/getBookings"].filter(B=>B.status!=="canceled"&&B.status!=="rejected"),(B,G)=>(u(),q($,{key:G,name:G,class:"am-capai-collapse__item"},{title:L(()=>[m("div",{class:R(["am-capai-customer__name",[{"am-pb-16":!(B.customer.email&&a(A)||B.customer.phone&&a(h))},a(k)(B.customer.noShowCount).class]])},[a(k)(B.customer.noShowCount).icon?(u(),x("span",{key:0,class:R(`am-icon-${a(k)(B.customer.noShowCount).icon}`)},null,2)):D("",!0),ie(" "+w(B.customer.firstName+" "+B.customer.lastName),1)],2)]),default:L(()=>[B.customer.email&&a(A)||B.customer.phone&&a(h)?(u(),x("div",{key:0,class:R(["am-capai-customer__data-wrapper",t.responsiveClass])},[B.customer.email&&a(A)?(u(),x("div",{key:0,class:R(["am-capai-customer__data",t.responsiveClass])},[u2,m("a",{href:`mailto:${B.customer.email}`},w(B.customer.email),9,d2)],2)):D("",!0),B.customer.phone&&a(h)?(u(),x("div",{key:1,class:R(["am-capai-customer__data",t.responsiveClass])},[m2,m("a",{href:`tel:${B.customer.phone}`},w(B.customer.phone),9,p2)],2)):D("",!0)],2)):D("",!0),(u(!0),x(te,null,fe(a(g),H=>(u(),x(te,{key:G+"_"+H.id},[G in a(v)&&`${G}cf${H.id}`in a(d)?(u(),q(Tt(a(v)[G][H.id].template),Dt({key:0,modelValue:a(d)[`${G}cf${H.id}`],"onUpdate:modelValue":X=>a(d)[`${G}cf${H.id}`]=X},a(v)[G][H.id].props),null,16,["modelValue","onUpdate:modelValue"])):D("",!0)],64))),128))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["model","rules","class"])}}};const g2={key:0,class:"am-capai-ext__heading-extra"},h2=m("span",{class:"am-icon-email"},null,-1),v2=["href"],_2=m("span",{class:"am-icon-phone"},null,-1),y2=["href"],b2={class:"am-capai-ext__wrapper"},k2={class:"am-capai-ext__inner-info"},C2={class:"am-capai-ext__inner-name"},x2={key:0,class:"am-capai-ext__inner-duration"},w2={class:"am-capai-ext__total"},T2={props:{responsiveClass:{type:String,default:""}},emits:["changedSlotCondition"],setup(l,{emit:e}){const t=l,s=Oe(),n=F("shortcodeData");let i=F("amCustomize"),o=F("amLabels"),r=y(()=>s.getters["appointment/getEmployeeService"]),c=y(()=>s.getters["appointment/getBookings"]),d=M(null);function f(P,k,h){P.duration&&(h.extras[k].quantity===0||h.extras[k].quantity===1)&&e("changedSlotCondition")}function v(P){return P.extras.length?P.extras.reduce((k,h)=>k+("price"in h?h.price:r.value.extras.find(A=>A.id===h.extraId).price)*h.quantity,0):0}function g(P){return P.filter(k=>k.quantity>0).length}const{noShowData:b}=F("noShowData");let T=y(()=>n.value.cabinetType==="employee"?i.value.appointments.options.customerPhone.visibility:!0),C=y(()=>n.value.cabinetType==="employee"?i.value.appointments.options.customerEmail.visibility:!0),_=F("amColors"),S=y(()=>({"--am-c-ext-text-op60":Y(_.value.colorMainText,.6)}));return Ze(()=>{c.value.filter(P=>P.status!=="canceled"&&P.status!=="rejected").length<2&&(d.value=0)}),(P,k)=>{const h=Os,A=Ds;return u(),q(A,{modelValue:a(d),"onUpdate:modelValue":k[0]||(k[0]=O=>ye(d)?d.value=O:d=O),class:"am-capai-ext am-capai-collapse",accordion:"",style:_e(a(S))},{default:L(()=>[(u(!0),x(te,null,fe(a(c).filter(O=>O.status!=="canceled"&&O.status!=="rejected"),(O,E)=>(u(),q(h,{key:E,name:E,class:"am-capai-ext__item am-capai-collapse__item"},{title:L(()=>[m("div",{class:R(["am-capai-ext__heading",{"am-pb-16":!(O.customer.email&&a(C)||O.customer.phone&&a(T))}])},[m("div",{class:R(["am-capai-customer__name",a(b)(O.customer.noShowCount).class])},[a(b)(O.customer.noShowCount).icon?(u(),x("span",{key:0,class:R(`am-icon-${a(b)(O.customer.noShowCount).icon}`)},null,2)):D("",!0),ie(" "+w(O.customer.firstName+" "+O.customer.lastName),1)],2),g(O.extras)>0?(u(),x("div",g2,w(`${a(o).extras}: ${g(O.extras)}`),1)):D("",!0)],2)]),default:L(()=>[O.customer.email&&a(C)||O.customer.phone&&a(T)?(u(),x("div",{key:0,class:R(["am-capai-customer__data-wrapper",t.responsiveClass])},[O.customer.email&&a(C)?(u(),x("div",{key:0,class:R(["am-capai-customer__data",t.responsiveClass])},[h2,m("a",{href:`mailto:${O.customer.email}`},w(O.customer.email),9,v2)],2)):D("",!0),O.customer.phone&&a(T)?(u(),x("div",{key:1,class:R(["am-capai-customer__data",t.responsiveClass])},[_2,m("a",{href:`tel:${O.customer.phone}`},w(O.customer.phone),9,y2)],2)):D("",!0)],2)):D("",!0),m("div",b2,[(u(!0),x(te,null,fe(a(r).extras,($,V)=>(u(),x("div",{key:V,class:R(["am-capai-ext__inner",[{"am-border-bottom":V!==a(r).extras.length-1},t.responsiveClass]])},[m("div",k2,[m("div",C2,w($.name),1),$.duration?(u(),x("div",x2,w(`${a(o).duration}: ${a(hl)($.duration,a(o).h,a(o).min)}`),1)):D("",!0)]),m("div",{class:R(["am-capai-ext__inner-selection",t.responsiveClass])},[m("div",{class:R(["am-capai-ext__inner-price",t.responsiveClass])},[$.price?(u(),x(te,{key:0},[ie(w(a(lt)("price"in O.extras[V]?O.extras[V].price:$.price)),1)],64)):(u(),x(te,{key:1},[ie(w(a(o).free),1)],64))],2),I(vt,{modelValue:O.extras[V].quantity,"onUpdate:modelValue":j=>O.extras[V].quantity=j,class:R(t.responsiveClass),size:"small",min:0,max:$.maxQuantity,onChange:j=>f($,V,O)},null,8,["modelValue","onUpdate:modelValue","class","max","onChange"])],2)],2))),128)),m("div",w2,w(`${a(o).subtotal}: ${a(lt)(v(O))}`),1)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","style"])}}};function jr(l,e){let t=pe(l,"YYYY-MM-DD"),s=pe(t).add(e,"M"),n=pe(s).startOf("month");return t.date()!==s.date()&&s.isSame(n.format("YYYY-MM-DD"))&&s.subtract(1,"d"),s}function S2(l,e,t){let s=pe(l,"YYYY-MM-DD").startOf("month").day(t);s.format("M")!==l.format("M")&&s.add(7,"days");let n=s.add(7*(e-1),"days");return l.format("M")!==n.format("M")&&n.subtract(7,"days"),n}function E2(l,e,t,s,n,i,o,r){let c=t?pe(t):pe().add(s,"days"),d=pe(e,"YYYY-MM-DD"),f={},v=[];switch(n){case"daily":v.push(pe(e,"YYYY-MM-DD"));break;case"weekly":let b=pe(e,"YYYY-MM-DD").isoWeekday();o.forEach((T,C)=>{if(T.selected){let _=C+1,S=pe(e,"YYYY-MM-DD");b<_?v.push(S.add(_-b,"days")):b===_?v.push(S):b>_&&v.push(S.subtract(b-_,"days"));let P=c||l;S.isSameOrBefore(P)&&S.isAfter(d)&&(f[S.format("YYYY-MM-DD")]=S)}});break;case"monthly":v.push(pe(e,"YYYY-MM-DD"));break}let g=v.length>0;for(;g;)for(let b=0;b<v.length;b++){switch(n){case"daily":v[b].add(i,"days");break;case"weekly":v[b].add(i*7,"days");break;case"monthly":let T=v[b].isoWeekday();v[b]=r===0?jr(v[b].format("YYYY-MM-DD"),i):S2(jr(v[b].startOf("month").format("YYYY-MM-DD"),i),r,T);break}g=v[b].isSameOrBefore(c),g&&(f[pe(v[b]).format("YYYY-MM-DD")]=pe(v[b]))}return f}function L2(l,e,t,s,n,i,o){let r=pe(s,"YYYY-MM-DD"),c=i?pe(i,"YYYY-MM-DD"):null,d={},f={};an(Object.keys(e)).forEach(g=>{f[g]=pe(g+" 00:00:00")});let v=pe(s,"YYYY-MM-DD").format("YYYY-MM-DD");for(let g in t){let b=pe(g,"YYYY-MM-DD"),T=c?b.isSameOrBefore(c):!0;if(g in e&&Object.keys(e[g]).length&&!(g in d)&&T){let C=n in e[g],_=C?n:Object.keys(e[g])[0];d[g]={isSubstituteDate:!1,isSubstituteTime:!C,time:_,times:Object.keys(e[g]),slot:e[g][_]}}else if(g!==v&&!(g in d)&&T){let C=null,_=null;for(let h in f)if((l.recurringSub==="past"||l.recurringSub==="both")&&f[h].isBefore(t[g])&&f[h].isAfter(r)&&h!==g&&!(h in d)&&(C=f[h]),(l.recurringSub==="future"||l.recurringSub==="both")&&f[h].isAfter(t[g])&&h!==g&&!(h in d)){_=f[h];break}let S=C!==null?pe(t[g]).diff(C,"days"):null,P=_!==null?pe(_).diff(t[g],"days"):null,k=null;if(S&&P?k=S<P?C:_:S?k=C:P&&(k=_),k!==null&&(c?pe(k).isSameOrBefore(c):!0)){let h=pe(k).format("YYYY-MM-DD");if(h in e&&!(g in d)&&!(h in t)){let A=n in e[h],O=A?n:Object.keys(e[h])[0];d[h]={isSubstituteDate:!0,isSubstituteTime:!A,time:O,times:Object.keys(e[h]),slot:e[h][O]}}}}if(c?!T:an(Object.keys(d)).length>=o)break}return d}const A2={class:"am-fs__rs-every"},$2={key:1},I2={class:"am-fs__rs-on-week"},P2=["onClick"],O2={key:2},D2={class:"am-fs__rs-on-month"},N2={class:"am-fs__rs-ends"},M2={class:"am-fs__rs-ends-choose"},B2={class:"am-fs__rs-ends-options"},F2={class:"am-fs__rs-ends-after"},V2={class:"am-fs__rs-summary"},R2={key:0},q2={key:1},U2={key:0},j2=ie(", "),z2={key:0},Y2={key:1},W2={name:"RecurringSetup"},H2=Object.assign(W2,{props:{service:{type:Object,default:()=>{}},startDate:{type:String,default:""},startTime:{type:String,default:""},maxDate:{type:String,default:""},globalClass:{type:String,default:""}},setup(l){const e=l;let t=F("amLabels"),s=F("amCustomize"),n=Oe(),i=F("containerWidth",0),o=y(()=>i.value<560||i.value-240<520),r=y({get:()=>n.getters["recurring/getRepeatType"],set:O=>{n.commit("recurring/setRepeatType",O)}}),c=y({get:()=>n.getters["recurring/getRepeatInterval"],set:O=>{n.commit("recurring/setRepeatInterval",O)}}),d=y({get:()=>n.getters["recurring/getOccurrenceType"],set:O=>{n.commit("recurring/setOccurrenceType",O)}}),f=y({get:()=>n.getters["recurring/getOccurrenceDate"]?n.getters["recurring/getOccurrenceDate"]:new Date(e.startDate),set:O=>{n.commit("recurring/setOccurrenceDate",O)}}),v=y({get:()=>n.getters["recurring/getOccurrenceCount"],set:O=>{n.commit("recurring/setOccurrenceCount",O)}}),g=y({get:()=>n.getters["recurring/getMonthly"],set:O=>{n.commit("recurring/setMonthly",O)}});const b=M([{label:t.value.recurrence_day,labelPlural:t.value.recurrence_days,value:"daily"},{label:t.value.recurrence_week,labelPlural:t.value.recurrence_weeks,value:"weekly"},{label:t.value.recurrence_month,labelPlural:t.value.recurrence_months,value:"monthly"}]),T=M([{label:t.value.recurrence_specific_date,value:0},{label:t.value.recurrence_first,value:1},{label:t.value.recurrence_second,value:2},{label:t.value.recurrence_third,value:3},{label:t.value.recurrence_fourth,value:4},{label:t.value.recurrence_last,value:5}]);let C=M(pe(e.startDate).format("dddd").toLowerCase()),_=M([{label:"Mon",labelFull:"Monday",value:"monday",selected:!1},{label:"Tue",labelFull:"Tuesday",value:"tuesday",selected:!1},{label:"Wed",labelFull:"Wednesday",value:"wednesday",selected:!1},{label:"Thu",labelFull:"Thursday",value:"thursday",selected:!1},{label:"Fri",labelFull:"Friday",value:"friday",selected:!1},{label:"Sat",labelFull:"Saturday",value:"saturday",selected:!1},{label:"Sun",labelFull:"Sunday",value:"sunday",selected:!1}]),S=y(()=>_.value.find(O=>O.value===pe(e.startDate,"YYYY-MM-DD").format("dddd").toLowerCase()).labelFull);function P(O){f.value=pe(O,"YYYY-MM-DD").toDate()}function k(O,E=!1){let $=_.value.find(V=>V.value===O);$.selected=E?!0:!$.selected,n.commit("recurring/setDays",{value:O,selected:$.selected})}Ze(()=>{Jl&&(_.value=_.value.map((E,$)=>({...E,label:zu[$],labelFull:Yu[$]})));let O=n.getters["recurring/getDays"].filter(E=>E.selected);O.length===0?k(_.value.find(E=>C.value&&E.value===C.value).value,!0):O.forEach(E=>{k(E.value,!0)}),e.service.recurringCycle!=="all"&&n.commit("recurring/setRepeatType",e.service.recurringCycle)});let h=F("amColors"),A=y(()=>({"--am-c-rs-text":h.value.colorMainText,"--am-c-rs-text-op60":Y(h.value.colorMainText,.6),"--am-c-rs-bgr":h.value.colorMainBgr,"--am-c-rs-primary":h.value.colorPrimary,"--am-c-rs-inp-border":h.value.colorInpBorder}));return(O,E)=>(u(),x("div",{class:R(["am-fs__rs",[{"am-fs__rs-mobile":a(o)},a(e).globalClass]]),style:_e(a(A))},[a(s)&&a(s).recurringStep&&a(s).recurringStep.options.heading.visibility?(u(),x(te,{key:0},[m("p",null,w(a(t).recurrence),1),m("span",null,w(a(t).recurrence_choosing_time),1)],64)):D("",!0),m("p",null,w(a(t).repeat_every)+":",1),m("div",A2,[I(a(vt),{modelValue:a(c),"onUpdate:modelValue":E[0]||(E[0]=$=>ye(c)?c.value=$:c=$),min:1,max:100},null,8,["modelValue"]),I(a(We),{modelValue:a(r),"onUpdate:modelValue":E[1]||(E[1]=$=>ye(r)?r.value=$:r=$),disabled:a(e).service.recurringCycle!=="all"},{default:L(()=>[(u(!0),x(te,null,fe(b.value,($,V)=>(u(),q(a(Ve),{key:V,label:$.label,value:$.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),a(r)==="weekly"?(u(),x("div",$2,[m("p",null,w(`${a(t).recurrence_repeat_on}:`),1),m("div",I2,[(u(!0),x(te,null,fe(a(_),($,V)=>(u(),x("div",{key:V,class:R({"am-fs__rs-on-week-selected":a(_).find(j=>j.value===$.value).selected}),onClick:j=>k($.value)},w($.label),11,P2))),128))])])):D("",!0),a(r)==="monthly"?(u(),x("div",O2,[m("p",null,w(`${a(t).recurrence_repeat_on}:`),1),m("div",D2,[I(a(We),{modelValue:a(g),"onUpdate:modelValue":E[2]||(E[2]=$=>ye(g)?g.value=$:g=$)},{default:L(()=>[(u(!0),x(te,null,fe(T.value,($,V)=>(u(),q(a(Ve),{key:V,label:$.label+(V!==0?" "+a(S):""),value:$.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):D("",!0),m("p",null,w(`${a(t).recurrence_ends}:`),1),m("span",null,w(a(t).recurrence_choose_ends),1),m("div",N2,[m("div",M2,[I(a(_n),{modelValue:a(d),"onUpdate:modelValue":E[3]||(E[3]=$=>ye(d)?d.value=$:d=$)},{default:L(()=>[I(a(Oa),{label:"On"},{default:L(()=>[ie(w(a(t).recurrence_on),1)]),_:1}),I(a(Oa),{label:"After"},{default:L(()=>[ie(w(a(t).recurrence_after),1)]),_:1})]),_:1},8,["modelValue"])]),m("div",B2,[I(a(Wu),{"calendar-minimum-date":a(e).startDate,disabled:a(d)!=="On","input-placeholder":a(t).recurrence_select_date,"calendar-maximum-date":a(e).maxDate,onSelectedDate:P},null,8,["calendar-minimum-date","disabled","input-placeholder","calendar-maximum-date"]),m("div",F2,[I(a(vt),{modelValue:a(v),"onUpdate:modelValue":E[4]||(E[4]=$=>ye(v)?v.value=$:v=$),disabled:a(d)!=="After",min:1,max:100},null,8,["modelValue","disabled"]),m("span",null,w(` ${a(t).occurrences}`),1)])])]),m("div",V2,[m("p",null,w(`${a(t).appointment_repeats}:`),1),m("p",null,[ie(w(`${a(t).recurrence_every} ${a(c)>1?a(c):""} ${b.value.find($=>$.value===a(r))?b.value.find($=>$.value===a(r)).label:""}`)+" ",1),a(r)==="weekly"?(u(),x("span",R2,w(`${a(t).repeats_on} ${a(_).filter($=>$.selected).map($=>$.labelFull).join(", ")}`),1)):D("",!0),a(r)==="monthly"?(u(),x("span",q2,[ie(w(` ${a(t).repeats_on} ${T.value[a(g)].label}`)+" ",1),a(g)!==0?(u(),x("span",U2,w(` ${a(S)}`),1)):D("",!0),j2])):D("",!0),m("span",null,w(` ${a(t).repeats_from} ${a(dt)(a(e).startDate)} ${a(t).repeats_at} ${a(nl)(a(e).startTime)}`),1)]),m("p",null,[a(d)==="After"?(u(),x("span",z2,w(a(t).number_of_recurrences)+" "+w(` ${a(v)}`),1)):a(f)?(u(),x("span",Y2,w(a(t).ends_on)+" "+w(` ${a(dt)(a(Hu)(a(f)))}`),1)):D("",!0)])])],6))}});const Z2={class:"am-capai-recurr__enable"},G2={key:0,class:"am-capai-recurr__content"},J2={key:1,class:"am-capai-recurr__list"},X2={class:"am-capai-recurr__list-heading"},Q2={class:"am-capai-recurr__list-heading__text"},K2=m("span",{class:"am-icon-refresh"},null,-1),ew={class:"am-capai-recurr__table"},tw={key:2,class:"am-capai-recurr__actions"},aw={props:{responsiveClass:{type:String,default:""},maximumBookingStartDate:{type:String,required:!0},slotsLoading:{type:Boolean,required:!0},slotsProps:{type:Object,required:!0},freeSlots:{type:Object,required:!0},getFreeTimes:{type:Function,required:!0},isDisabledDate:{type:Function,required:!0},getSelectedDatesTimes:{type:Function,required:!0}},emits:["fetchSlots"],setup(l,{emit:e}){const t=l,s=Oe(),n=F("settings");let i=F("amLabels"),o=F("localLanguage"),r=y(()=>s.getters["appointment/getEmployeeService"]),c=M(!1),d=M(2),f=M(!1),v=F("recurringList"),g=M(!0);function b(){let E=s.getters["recurring/getOccurrenceType"]==="On"?at(s.getters["recurring/getOccurrenceDate"]).format("YYYY-MM-DD"):null,$=E2(t.maximumBookingStartDate,at(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD"),E,n.general.numberOfDaysAvailableForBooking,s.getters["recurring/getRepeatType"],s.getters["recurring/getRepeatInterval"],s.getters["recurring/getDays"],s.getters["recurring/getMonthly"]);d.value=s.getters["recurring/getOccurrenceType"]==="On"?Object.keys($).length:s.getters["recurring/getOccurrenceCount"],f.value=!0;let V=an(Object.keys($));Kr(Object.assign({startDateTime:at(s.getters["appointment/getStartDate"]).startOf("month").subtract(6,"days").format("YYYY-MM-DD"),endDateTime:V.length?at(V[V.length-1]).endOf("month").add(11,"days").format("YYYY-MM-DD"):at().add(n.general.numberOfDaysAvailableForBooking,"days").format("YYYY-MM-DD")},t.slotsProps),null,j=>{let B=L2(r.value,j,$,at(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD"),s.getters["appointment/getStartTime"],E,s.getters["recurring/getOccurrenceType"]==="After"?s.getters["recurring/getOccurrenceCount"]:null);v.value=[],Object.keys(B).forEach(G=>{v.value.push(Object.assign({date:at(G).toDate(),editing:!1},B[G]))}),f.value=!1})}function T(){v.value=null}function C(E){let $=at(v.value[E].date).format("YYYY-MM-DD");v.value[E].times=Object.keys(t.freeSlots[$]);let V=t.getSelectedDatesTimes(E,!1);$ in V&&v.value[E].time in V[$]&&(v.value[E].time="")}function _(E){v.value.splice(E,1)}function S(E){v.value[E].editing=!0}function P(E){v.value[E].editing=!1}let k=M(null);function h(E,$,V=!1){!E&&!k.value?E=at().toDate():!E&&k.value&&(E=k.value),k.value=E&&V?E:k.value,e("fetchSlots",E,$,V)}let A=F("amColors"),O=y(()=>({"--am-c-recurr-bgr-op05":Y(A.value.colorPrimary,.05),"--am-c-warning-op10":Y(A.value.colorWarning,.1),"--am-c-main-text-op10":Y(A.value.colorMainText,.1)}));return rt(c,E=>{E||(v.value=null)}),(E,$)=>(u(),x("div",{class:"am-capai-recurr",style:_e(a(O))},[m("div",Z2,[I(gt,{modelValue:a(c),"onUpdate:modelValue":$[0]||($[0]=V=>ye(c)?c.value=V:c=V),label:"Enable Recurring appointment"},null,8,["modelValue"])]),a(c)?(u(),x("div",G2,[!a(f)&&!a(v)?(u(),q(H2,{key:0,"start-date":a(at)(a(s).getters["appointment/getStartDate"]).format("YYYY-MM-DD"),"start-time":a(s).getters["appointment/getStartTime"],"max-date":a(t).maximumBookingStartDate,service:a(r)},null,8,["start-date","start-time","max-date","service"])):(u(),x(te,{key:1},[a(v)?(u(),x("div",J2,[m("div",X2,[m("div",Q2,[K2,m("div",null,w(`${a(v).length} appointments total`),1)]),m("div",{class:"am-capai-recurr__list-heading__action",onClick:$[1]||($[1]=()=>{ye(g)?g.value=!a(g):g=!a(g)})},w(a(g)?a(i).show_less:a(i).show_more),1)]),a(g)?(u(),x(te,{key:0},[a(v).filter(V=>V.isSubstituteDate||V.isSubstituteTime).length?(u(),q(yu,{key:0,heading:a(i).recurring_unavailable_slots,text:a(i).recurring_sub_message1},null,8,["heading","text"])):D("",!0),m("div",ew,[(u(!0),x(te,null,fe(a(v),(V,j)=>(u(),x("div",{key:j,class:R(["am-capai-recurr__row",[{"am-warn":V.isSubstituteDate||V.isSubstituteTime},a(t).responsiveClass]])},[m("div",{class:R(["am-capai-recurr__row-num",a(t).responsiveClass])},w(j+1),3),m("div",{class:R(["am-capai-recurr__row-date",[{"am-disable":!V.editing},a(t).responsiveClass]])},[I(Ht,{modelValue:V.date,"onUpdate:modelValue":B=>V.date=B,type:"date",format:a(Wt)(),placeholder:"Pick a day",size:"small",lang:a(o),"disabled-date":(B,G)=>a(t).isDisabledDate(B,V.editing,!1,G),"popper-class":a(t).slotsLoading?"slots-loader":"",onPanelChange:B=>{h(B,j,!0)},onChange:B=>C(j),onFocus:B=>h(V.date,j,!0)},null,8,["modelValue","onUpdate:modelValue","format","lang","disabled-date","popper-class","onPanelChange","onChange","onFocus"])],2),m("div",{class:R(["am-capai-recurr__row-time",[{"am-disable":!V.editing},a(t).responsiveClass]])},[I(We,{modelValue:V.time,"onUpdate:modelValue":B=>V.time=B,size:"small",placeholder:`${a(i).select_time}`,disabled:!V.date},{default:L(()=>[(u(!0),x(te,null,fe(V.editing?a(t).getFreeTimes(j,a(v)[j],!1):a(v)[j].times,B=>(u(),q(Ve,{key:B,value:B,label:B},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled"])],2),m("div",{class:R(["am-capai-recurr__row-actions",a(t).responsiveClass])},[V.editing?(u(),q(ke,{key:1,category:"primary",size:"small",onClick:B=>P(j)},{default:L(()=>[ie(w(a(i).save),1)]),_:2},1032,["onClick"])):(u(),q(ka,{key:0,index:j,onRemove:_,onEdit:S},null,8,["index"]))],2)],2))),128))])],64)):D("",!0)])):(u(),q(Zt,{key:0,count:a(d)},null,8,["count"]))],64)),a(f)?D("",!0):(u(),x("div",tw,[a(v)?D("",!0):(u(),q(ke,{key:0,category:"primary",size:"medium",onClick:$[2]||($[2]=V=>b())},{default:L(()=>[ie(w(a(i).recurring_list),1)]),_:1})),a(v)?(u(),q(ke,{key:1,category:"secondary",type:"plain",size:"medium",onClick:$[3]||($[3]=V=>T())},{default:L(()=>[ie(w(a(i).recurring_settings),1)]),_:1})):D("",!0)]))])):D("",!0)],4))}};const sw=m("span",{class:"am-icon-email"},null,-1),lw=["href"],nw=m("span",{class:"am-icon-phone"},null,-1),iw=["href"],ow={class:"am-capai-linked__list"},rw={class:"am-capai-linked__list-index"},cw={class:"am-capai-linked__list-date"},uw=m("span",{class:"am-icon-calendar"},null,-1),dw={class:"am-capai-linked__list-action"},mw={props:{responsiveClass:{type:String,default:""},linkedAppointments:{type:Array,required:!0}},emits:["editLinkedAppointment"],setup(l,{emit:e}){const t=l;let s=Oe();const n=F("shortcodeData");let i=F("amCustomize"),o=M(null);function r(C){return t.linkedAppointments.filter(_=>_.bookings.filter(S=>parseInt(S.customer.id)===parseInt(C.customer.id)).length)}const{noShowData:c}=F("noShowData");let d=F("amLabels");function f(C){s.commit("appointment/resetAppointment",{providerId:s.getters["auth/getProfile"].id}),s.commit("customerInfo/setCustomers",[]),s.commit("customerInfo/setCustomersIds",[]),e("editLinkedAppointment",C)}let v=y(()=>n.value.cabinetType==="employee"?i.value.appointments.options.customerPhone.visibility:!0),g=y(()=>n.value.cabinetType==="employee"?i.value.appointments.options.customerEmail.visibility:!0),b=F("amColors"),T=y(()=>({"--am-c-linked-bgr-op05":Y(b.value.colorMainText,.05)}));return Ze(()=>{s.getters["appointment/getBookings"].filter(C=>C.status!=="canceled"&&C.status!=="rejected").length<2&&(o.value=0)}),(C,_)=>{const S=Os,P=Ds;return u(),q(P,{modelValue:a(o),"onUpdate:modelValue":_[0]||(_[0]=k=>ye(o)?o.value=k:o=k),class:"am-capai-collapse am-capai-linked",accordion:"",style:_e(a(T))},{default:L(()=>[(u(!0),x(te,null,fe(a(s).getters["appointment/getBookings"],(k,h)=>(u(),x(te,{key:h},[r(k).length?(u(),q(S,{key:0,name:h,class:"am-capai-collapse__item"},{title:L(()=>[m("div",{class:R(["am-capai-customer__name",[{"am-pb-16":!(k.customer.email&&a(g)||k.customer.phone&&a(v))},a(c)(k.customer.noShowCount).class]])},[a(c)(k.customer.noShowCount).icon?(u(),x("span",{key:0,class:R(`am-icon-${a(c)(k.customer.noShowCount).icon}`)},null,2)):D("",!0),ie(" "+w(k.customer.firstName+" "+k.customer.lastName),1)],2)]),default:L(()=>[k.customer.email&&a(g)||k.customer.phone&&a(v)?(u(),x("div",{key:0,class:R(["am-capai-customer__data-wrapper",a(t).responsiveClass])},[k.customer.email&&a(g)?(u(),x("div",{key:0,class:R(["am-capai-customer__data",a(t).responsiveClass])},[sw,m("a",{href:`mailto:${k.customer.email}`},w(k.customer.email),9,lw)],2)):D("",!0),k.customer.phone&&a(v)?(u(),x("div",{key:1,class:R(["am-capai-customer__data",a(t).responsiveClass])},[nw,m("a",{href:`tel:${k.customer.phone}`},w(k.customer.phone),9,iw)],2)):D("",!0)],2)):D("",!0),m("div",ow,[(u(!0),x(te,null,fe(r(k),(A,O)=>(u(),x("div",{key:k.id+"-"+O,class:R(["am-capai-linked__list-item",a(t).responsiveClass])},[m("div",rw,w(O+1),1),m("div",cw,[uw,ie(" "+w(a(Zu)(A.bookingStart)),1)]),m("div",dw,[I(ke,{category:"primary",size:"small",onClick:E=>f(A)},{default:L(()=>[ie(w(a(d).edit),1)]),_:2},1032,["onClick"])])],2))),128))])]),_:2},1032,["name"])):D("",!0)],64))),128))]),_:1},8,["modelValue","style"])}}},tl=nt(window.wpAmeliaLabels);function ku(l){if(l.gateway==="onSite")return tl.on_site;if(l.gateway==="wc")return l.gatewayTitle;if(l.gateway)return l.gateway.charAt(0).toUpperCase()+l.gateway.slice(1)}function eo(l){switch(l){case"paid":return tl.paid;case"pending":return tl.pending;case"partiallyPaid":return tl.partially_paid;case"refunded":return tl.refunded}}function Ts(l,e){switch(l){case"paid":return{icon:"am-icon-checkmark-circle",color:e.colorSuccess};case"pending":return{icon:"am-icon-refresh",color:e.colorWarning};case"partiallyPaid":return{icon:"am-icon-prepaid",color:e.colorPrimary};case"refunded":return{icon:"am-icon-refund",color:e.colorError}}}const pw={class:"am-capai-pay__heading-status"},fw={class:"am-capai-pay__heading-status__text"},gw=m("span",{class:"am-icon-email"},null,-1),hw=["href"],vw=m("span",{class:"am-icon-phone"},null,-1),_w=["href"],yw={class:"am-capai-pay__row-label"},bw={class:"am-capai-pay__row-value"},kw={class:"am-capai-pay__row-label"},Cw={class:"am-capai-pay__row-value"},xw={class:"am-capai-pay__row-label"},ww={class:"am-capai-pay__row-value"},Tw={key:0,class:"am-divider"},Sw={class:"am-capai-pay__row-label"},Ew={class:"am-capai-pay__row-label"},Lw={class:"am-capai-pay__row-label"},Aw={class:"am-capai-pay__row-label"},$w={class:"am-capai-pay__row-label"},Iw={class:"am-capai-pay__row-label"},Pw={class:"am-capai-pay__row-label"},Ow={class:"am-capai-pay__row-label"},Dw={class:"am-capai-pay__row-label"},Nw={props:{responsiveClass:{type:String,default:""}},setup(l){const e=l;let t=Oe();const s=F("shortcodeData");let n=F("amCustomize"),i=F("pageWidth"),o=F("amLabels"),r=y(()=>s.value.cabinetType==="employee"?n.value.appointments.options.customerPhone.visibility:!0),c=y(()=>s.value.cabinetType==="employee"?n.value.appointments.options.customerEmail.visibility:!0),d=M(null),f=y(()=>t.getters["appointment/getBookings"].filter(C=>"id"in C&&C.id&&C.status!=="canceled"&&C.status!=="rejected")),v=y(()=>{let C=[];return f.value.forEach((_,S)=>{C.push(hn(t,{price:_.price,persons:_.persons,aggregatedPrice:_.aggregatedPrice,extras:_.extras.filter(P=>"id"in P&&P.id),serviceId:t.getters["appointment/getServiceId"],tax:_.tax,coupon:_.coupon},!1)),C[S].deposit=_.payments.length?_.payments[0].amount:0,C[S].paid=_.payments.reduce((P,k)=>P+k.amount,0),C[S].status=_.payments.reduce((P,k)=>P+k.amount,0),_.payments.filter(P=>P.status!=="refunded").length===0?C[S].status="refunded":C[S].paid-(C[S].total-C[S].discount+C[S].tax)===0?C[S].status="paid":C[S].paid?C[S].status="partiallyPaid":C[S].status="pending"}),C});const{noShowData:g}=F("noShowData");let b=F("amColors"),T=y(()=>({"--am-c-pay-text-op03":Y(b.value.colorMainText,.03)}));return Ze(()=>{t.getters["appointment/getBookings"].filter(C=>C.status!=="canceled"&&C.status!=="rejected").length<2&&(d.value=0)}),(C,_)=>{const S=Os,P=Ds;return u(),q(P,{modelValue:a(d),"onUpdate:modelValue":_[0]||(_[0]=k=>ye(d)?d.value=k:d=k),class:"am-capai-collapse am-capai-pay",accordion:"",style:_e(a(T))},{default:L(()=>[(u(!0),x(te,null,fe(a(f),(k,h)=>(u(),q(S,{key:h,name:h,class:"am-capai-collapse__item"},{title:L(()=>[m("div",{class:R(["am-capai-pay__heading",{"am-pb-16":!(k.customer.email&&a(c)||k.customer.phone&&a(r))}])},[m("div",{class:R(["am-capai-customer__name",a(g)(k.customer.noShowCount).class])},[a(g)(k.customer.noShowCount).icon?(u(),x("span",{key:0,class:R(`am-icon-${a(g)(k.customer.noShowCount).icon}`)},null,2)):D("",!0),ie(" "+w(k.customer.firstName+" "+k.customer.lastName),1)],2),m("div",pw,[m("span",{class:R(a(Ts)(a(v)[h].status,a(b)).icon),style:_e({color:a(Ts)(a(v)[h].status,a(b)).color})},null,6),m("div",fw,w(a(eo)(a(v)[h].status)),1)])],2)]),default:L(()=>[k.customer.email&&a(c)||k.customer.phone&&a(r)?(u(),x("div",{key:0,class:R(["am-capai-customer__data-wrapper",a(e).responsiveClass])},[k.customer.email&&a(c)?(u(),x("div",{key:0,class:R(["am-capai-customer__data",a(e).responsiveClass])},[gw,m("a",{href:`mailto:${k.customer.email}`},w(k.customer.email),9,hw)],2)):D("",!0),k.customer.phone&&a(r)?(u(),x("div",{key:1,class:R(["am-capai-customer__data",a(e).responsiveClass])},[vw,m("a",{href:`tel:${k.customer.phone}`},w(k.customer.phone),9,_w)],2)):D("",!0)],2)):D("",!0),m("div",{class:R(["am-capai-pay__content",a(e).responsiveClass])},[(u(!0),x(te,null,fe(k.payments,(A,O)=>(u(),x(te,{key:O},[m("div",{class:R(["am-capai-pay__row",a(e).responsiveClass])},[m("div",yw,w(a(o).date),1),m("div",bw,w(a(dt)(A.dateTime.split(" ")[0])),1)],2),m("div",{class:R(["am-capai-pay__row",a(e).responsiveClass])},[m("div",kw,w(a(o).payment_method),1),m("div",Cw,w(a(ku)(A)),1)],2),m("div",{class:R(["am-capai-pay__row",a(e).responsiveClass])},[m("div",xw,w(a(o).status),1),m("div",ww,[m("span",{class:R(a(Ts)(a(v)[h].status,a(b)).icon),style:_e({color:a(Ts)(a(v)[h].status,a(b)).color})},null,6),ie(" "+w(a(eo)(A.status)),1)])],2)],64))),128)),a(i)>480?(u(),x("div",Tw)):D("",!0),m("div",{class:R(["am-capai-pay__row",a(e).responsiveClass])},[m("div",Sw,w(a(o).price),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":a(i)>480}])},w(a(lt)(a(v)[h].bookable)),3)],2),m("div",{class:R(["am-capai-pay__row",a(e).responsiveClass])},[m("div",Ew,w(a(o).extras),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":a(i)>480}])},w(a(lt)(a(v)[h].total-a(v)[h].bookable)),3)],2),m("div",{class:R(["am-capai-pay__row",a(e).responsiveClass])},[m("div",Lw,w(a(o).subtotal),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":a(i)>480}])},w(a(lt)(a(v)[h].total)),3)],2),m("div",{class:R(["am-capai-pay__row",a(e).responsiveClass])},[m("div",Aw,w(a(o).discount_amount),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":a(i)>480}])},w(a(lt)(a(v)[h].discount)),3)],2),m("div",{class:R(["am-capai-pay__row",a(e).responsiveClass])},[m("div",$w,w(a(o).tax),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":a(i)>480}])},w(a(lt)(a(v)[h].tax)),3)],2),m("div",{class:R(["am-capai-pay__row",a(e).responsiveClass])},[m("div",Iw,w(a(o).paid_deposit),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":a(i)>480}])},w(a(lt)(a(v)[h].deposit)),3)],2),m("div",{class:R(["am-capai-pay__row",a(e).responsiveClass])},[m("div",Pw,w(a(o).paid_remaining_amount),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":a(i)>480}])},w(a(lt)(a(v)[h].paid-a(v)[h].deposit)),3)],2),m("div",{class:R(["am-capai-pay__row",a(e).responsiveClass])},[m("div",Ow,w(a(o).due),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":a(i)>480}])},w(a(lt)(a(v)[h].paid-(a(v)[h].total-a(v)[h].discount+a(v)[h].tax))),3)],2),m("div",{class:R(["am-capai-pay__row",a(e).responsiveClass])},[m("div",Dw,w(a(o).total),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":a(i)>480}])},w(a(lt)(a(v)[h].total-a(v)[h].discount+a(v)[h].tax)),3)],2)],2)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","style"])}}};const Mw={class:"am-capai__footer"},Bw={name:"CabinetAppointment"},Fw=Object.assign(Bw,{props:{responsiveClass:{type:String,default:""},pageWidth:{type:Number},linkedAppointments:{type:Array,default:()=>[]}},emits:["close","save","editLinkedAppointment"],setup(l,{emit:e}){const t=l;let s=Oe(),n=F("amLabels");const i=F("settings"),o=M("details"),r=M(null);let c=y(()=>s.getters["appointment/getEmployeeService"]),d=M(null),f=M(""),v=y(()=>s.getters["appointment/getBookings"].length?s.getters["appointment/getBookings"].filter(J=>J.status==="approved"||J.status==="pending").map(J=>J.persons).reduce((J,Z)=>J+Z,0):0),g=M(null),b=y(()=>s.getters["appointment/getCustomFields"]),T=M(null);Be("recurringList",T);function C(J,Z){let de=pe(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD"),K={};return s.getters["appointment/getStartDate"]&&s.getters["appointment/getStartTime"]&&!Z&&(K[de]={},K[de][s.getters["appointment/getStartTime"]]=!0),T.value&&T.value.forEach((oe,he)=>{if(oe.time&&(J!==null?he!==J:!0)){let Ae=pe(oe.date).format("YYYY-MM-DD");Ae in K||(K[Ae]={}),K[Ae][oe.time]=!0}}),K}function _(J,Z,de){if(Z.date===null)return[];let K=pe(Z.date).format("YYYY-MM-DD"),oe=C(J,de),he=Z.time?qt(Z.time):null;if(K in oe){let Ae=Z.times.filter(je=>!Object.keys(oe[K]).includes(je)),Te=[];return Ae.forEach(je=>{let be=qt(je),Ce=!0;Object.keys(oe[K]).map(Se=>qt(Se)).sort((Se,Me)=>Se-Me).forEach(Se=>{be<Se?be+c.value.duration+c.value.timeAfter>Se&&(Ce=!1):Se+c.value.duration+c.value.timeAfter>be&&(Ce=!1)}),Ce&&(he!==null&&be>he&&Te.indexOf(Z.time)===-1&&Te.push(Z.time),Te.push(je))}),S(K,oe,Te)}return S(K,oe,Z.times)}function S(J,Z,de){let K=[],oe=!1,he=pe(J,"YYYY-MM-DD").subtract(1,"days").format("YYYY-MM-DD");if(he in Z){let Te=Object.keys(Z[he]).map(be=>qt(be)).sort((be,Ce)=>be-Ce),je=Te[Te.length-1]+c.value.duration+c.value.timeAfter;je>86400&&(de.forEach(be=>{je-86400<=qt(be)&&K.push(be)}),de=K,oe=!0)}let Ae=pe(J,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD");if(Ae in Z){let Te=Object.keys(Z[Ae]).map(je=>qt(je)).sort((je,be)=>je-be);Te[0]-c.value.duration-c.value.timeAfter<0&&(de.forEach(je=>{let be=qt(je);(be+c.value.duration+c.value.timeAfter<=86400||Te[0]>=be+c.value.duration+c.value.timeAfter-86400)&&K.push(je)}),oe=!0)}return oe?K:de}let P=M(""),k=M({}),h=M([]);function A(J){h.value=Object.keys(k.value[pe(J).format("YYYY-MM-DD")])}function O(J){let Z=k.value[pe(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD")][J][0][1];Z&&s.commit("appointment/setLocationId",Z)}function E(J,Z,de,K){let oe=pe(J).format("YYYY-MM-DD");return typeof K>"u"&&!(oe in k.value&&(Z?_(null,{date:J,times:Object.keys(k.value[oe])},de).length:!0))}let $=M(!1),V=y(()=>{let J={};return s.getters["appointment/getBookings"].filter(Z=>Z.status==="pending"||Z.status==="approved").forEach(Z=>{Z.extras.forEach(de=>{de.quantity&&!(de.extraId in J)&&(J[de.extraId]={id:de.extraId,quantity:de.quantity})})}),{serviceId:s.getters["appointment/getServiceId"],serviceDuration:Math.max.apply(Math,s.getters["appointment/getBookings"].filter(Z=>Z.status!=="canceled"&&Z.status!=="rejected").map(Z=>Z.duration)),providerIds:s.getters["appointment/getProviderId"]?[s.getters["appointment/getProviderId"]]:[],locationId:s.getters["appointment/getLocationId"],extras:JSON.stringify(Object.values(J)),persons:v.value?v.value:1,excludeAppointmentId:s.getters["appointment/getId"],group:1,timeZone:s.getters["cabinet/getTimeZone"],monthsLoad:1,page:"appointments"}});function j(J=!1){s.getters["appointment/getStartDate"]&&B(s.getters["appointment/getStartDate"],null,!1,J)}function B(J,Z=null,de=!1,K=!1){s.getters["appointment/getServiceId"]&&($.value=!0,Kr(Object.assign({startDateTime:J?pe(J).startOf("month").subtract(6,"days").format("YYYY-MM-DD"):null,endDateTime:J?pe(J).endOf("month").add(6,"days").format("YYYY-MM-DD"):null},V.value),{},(oe,he,Ae,Te)=>{if(P.value=Te,s.getters["appointment/getStartDate"]&&Z===null&&!de){let je=pe(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD");je in oe?(s.getters["appointment/getStartTime"]&&!(s.getters["appointment/getStartTime"]in oe[je])&&!K&&s.commit("appointment/setStartTime",null),h.value=Object.keys(oe[je]),k.value=oe):K||(k.value={},s.commit("appointment/setStartTime",null),s.commit("appointment/setStartDate",null),s.commit("appointment/setTargetedDate",null),h.value=[])}else k.value=oe;$.value=!1},()=>{}))}function G(){k.value={},P.value=null,T.value=null}function H(J){if(J){if(J===1)return{class:"am-no-show-1",icon:"no-show-1"};if(J===2)return{class:"am-no-show-2",icon:"no-show-2"};if(J>2)return{class:"am-no-show-3",icon:"no-show-3"}}return{class:"",icon:""}}Be("noShowData",{noShowData:H});let X=M(!1),Q=M("");function ee(){X.value=!1,Q.value=""}let le=M(!1),W=M(null),se=M(!1);function ge(J,Z){let de=0,K=s.getters["entities/getEmployeeService"](s.getters["appointment/getProviderId"],s.getters["appointment/getServiceId"]);return Z.filter(oe=>oe.status!=="canceled"&&oe.status!=="rejected").forEach(oe=>{let he={id:"id"in oe?oe.id:null,price:"price"in oe?oe.price:K.customPricing.durations[oe.duration].price,persons:oe.persons,aggregatedPrice:"aggregatedPrice"in oe?oe.aggregatedPrice:K.aggregatedPrice,extras:oe.extras.filter(Te=>"id"in Te&&Te.id),serviceId:J,coupon:oe.coupon};"tax"in oe&&(he.tax=oe.tax);let Ae=hn(s,he,!1);de+=Ae.total-Ae.discount+Ae.tax}),de}function Ie(){let J=M(!0);if(g.value?.customFieldsFormRef.validate(K=>{K||(o.value="customFields",J.value=!1)}),d.value?.customersFormRef.validate(K=>{(!K||!s.getters["customerInfo/getCustomersIds"].length)&&(o.value="customers",J.value=!1)}),r.value?.detailsFormRef.validate(K=>{!K&&(!s.getters["appointment/getServiceId"]||!s.getters["appointment/getStartDate"]||!s.getters["appointment/getStartTime"])&&(o.value="details",J.value=!1)}),J.value===!1)return;if(f.value=s.getters["appointment/getBookings"].filter(K=>K.status!=="canceled"&&K.status!=="rejected").map(K=>K.persons).reduce((K,oe)=>K+oe,0)>c.value.maxCapacity?n.value.select_max_customer_count_warning+" "+c.value.maxCapacity:"",f.value){o.value="customers";return}let Z=i.payments.paymentLinks&&i.payments.paymentLinks.enabled,de=c.value.settings?JSON.parse(c.value.settings):null;de&&"payments"in de&&"paymentLinks"in de.payments&&(Z=de.payments.paymentLinks.enabled),W.value&&Z&&ge(s.getters["appointment/getServiceId"],s.getters["appointment/getBookings"])>ge(W.value.serviceId,W.value.bookings)?se.value=!0:ue(!1)}function ue(J){se.value=!1;let Z=[];s.getters["appointment/getBookings"].forEach(he=>{let Ae={};Object.keys(he.customFields).forEach(Te=>{Ae[Te]=Object.assign({},he.customFields[Te],{value:he.customFields[Te].type==="datepicker"?he.customFields[Te].value?pe(he.customFields[Te].value).format("YYYY-MM-DD"):null:he.customFields[Te].value})}),Z.push(Object.assign({},he,{customerId:he.customer.id,extras:he.extras.filter(Te=>Te.quantity),customFields:Ae}))});let de=[];if(W.value){let he=W.value.bookings.map(Te=>"id"in Te&&Te.id),Ae=Z.map(Te=>"id"in Te&&Te.id);de=W.value.bookings.filter(Te=>he.filter(je=>!Ae.includes(je)).includes(Te.id)).map(Te=>new Object({id:Te.id}))}let K=s.getters["cabinet/getTimeZone"],oe={serviceId:s.getters["appointment/getServiceId"],providerId:s.getters["appointment/getProviderId"],locationId:s.getters["appointment/getLocationId"],bookings:Z,removedBookings:de,bookingStart:pe(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD")+" "+s.getters["appointment/getStartTime"],utc:K==="UTC",timeZone:K==="UTC"?null:K,notifyParticipants:s.getters["appointment/getNotifyParticipants"]?1:0,internalNotes:s.getters["appointment/getInternalNotes"],id:s.getters["appointment/getId"],payment:{gateway:"onSite"},recurring:T.value?T.value.map(he=>new Object({bookingStart:pe(he.date).format("YYYY-MM-DD")+" "+he.time,providerId:he.slot[0][0],locationId:he.slot[0][1]})):[],lessonSpace:s.getters["appointment/getLessonSpace"]?"https://www.thelessonspace.com/space/"+s.getters["appointment/getLessonSpace"]:null,createPaymentLinks:J};le.value=!0,De.post("/appointments"+(s.getters["appointment/getId"]?"/"+s.getters["appointment/getId"]:""),oe,Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(he=>{he.data.data.appointment.id&&ae("save")}).catch(he=>{Q.value=n.value.error,"response"in he&&"data"in he.response&&"data"in he.response.data&&("timeSlotUnavailable"in he.response.data.data&&he.response.data.data.timeSlotUnavailable===!0&&(Q.value=n.value.time_slot_unavailable,o.value="details"),"customerAlreadyBooked"in he.response.data.data&&he.response.data.data.customerAlreadyBooked===!0&&(Q.value=n.value.customer_already_booked,o.value="customers")),X.value=!0}).finally(()=>{le.value=!1})}function ae(J){s.commit("appointment/setActive",!1),e(J)}Ze(()=>{if(s.commit("appointment/setActive",!0),s.getters["appointment/getId"]){W.value=JSON.parse(JSON.stringify(s.getters["appointment/getAppointmentData"]));let J=s.getters["entities/filteredLocations"]({categoryId:null,serviceId:null,providerId:s.getters["appointment/getProviderId"],locationId:null}),Z=s.getters["entities/filteredServices"]({categoryId:null,serviceId:null,providerId:s.getters["appointment/getProviderId"],locationId:null});s.getters["appointment/getId"]&&s.getters["appointment/getServiceId"]&&Z.map(K=>K.id).indexOf(s.getters["appointment/getServiceId"])===-1||s.getters["appointment/getId"]&&s.getters["appointment/getLocationId"]&&J.map(K=>K.id).indexOf(s.getters["appointment/getLocationId"])===-1||j(!0)}s.getters["appointment/getServiceId"]&&(s.dispatch("appointment/updateEmployeeService",s.getters["appointment/getServiceId"]),s.dispatch("appointment/addAllCustomFieldsFormRules",{label:n.value.required_field}))});let me=F("amColors"),z=y(()=>({"--am-c-capai-text":me.value.colorMainText,"--am-c-capai-text-op10":Y(me.value.colorMainText,.1),"--am-c-capai-primary":me.value.colorPrimary,"--am-c-cust-no1":me.value.colorMainText,"--am-c-cust-no1-bgr":Y(me.value.colorMainText,.1),"--am-c-cust-no2":me.value.colorWarning,"--am-c-cust-no2-bgr":Y(me.value.colorWarning,.1),"--am-c-cust-no3":me.value.colorError,"--am-c-cust-no3-bgr":Y(me.value.colorError,.1),"--am-c-cust-link":Y(me.value.colorMainText,.5),"--am-c-cust-text":me.value.colorMainText}));return(J,Z)=>{const de=Qa,K=Ka;return a(le)?(u(),q(Zt,{key:1})):(u(),x("div",{key:0,class:R(["am-capai",[{"am-no-border":!0},a(t).responsiveClass]]),style:_e(a(z))},[a(X)?(u(),q(wt,{key:0,class:"am-asi__top-message am-asi__top-message-error",type:"error","show-icon":!0,"show-border":!0,"close-after":5e3,onClose:ee,onTriggerClose:ee},{title:L(()=>[ie(w(a(Q)),1)]),_:1})):D("",!0),I(K,{modelValue:o.value,"onUpdate:modelValue":Z[1]||(Z[1]=oe=>o.value=oe)},{default:L(()=>[I(de,{label:a(n).details,name:"details"},{default:L(()=>[I(Ux,{ref_key:"appointmentDetailsRef",ref:r,"slots-props":a(V),"slots-loading":a($),"free-slots":a(k),"is-disabled-date":E,times:a(h),"get-free-times":_,onRemoveSlots:G,onFetchSlots:B,onSelectDate:A,onSelectTime:O},null,8,["slots-props","slots-loading","free-slots","times"])]),_:1},8,["label"]),a(c)?(u(),q(de,{key:0,label:a(n).customers,name:"customers"},{default:L(()=>[I(c2,{ref_key:"appointmentCustomersRef",ref:d,"responsive-class":a(t).responsiveClass,"capacity-warning":a(f),"appointment-capacity":a(v),"saved-appointment":a(W),onChangedSlotCondition:j},null,8,["responsive-class","capacity-warning","appointment-capacity","saved-appointment"])]),_:1},8,["label"])):D("",!0),a(c)&&a(c).extras.length&&a(s).getters["appointment/getBookings"].length?(u(),q(de,{key:1,label:a(n).extras,name:"extras"},{default:L(()=>[I(T2,{"responsive-class":a(t).responsiveClass,onChangedSlotCondition:j},null,8,["responsive-class"])]),_:1},8,["label"])):D("",!0),a(c)&&a(b).length&&a(s).getters["appointment/getBookings"].length?(u(),q(de,{key:2,label:a(n).custom_fields,name:"customFields"},{default:L(()=>[I(f2,{ref_key:"appointmentCustomFieldsRef",ref:g,"responsive-class":a(t).responsiveClass},null,8,["responsive-class"])]),_:1},8,["label"])):D("",!0),a(s).getters["appointment/getId"]&&l.linkedAppointments.length?(u(),q(de,{key:3,label:a(n).linked,name:"linked"},{default:L(()=>[I(mw,{"linked-appointments":l.linkedAppointments,"responsive-class":a(t).responsiveClass,onEditLinkedAppointment:Z[0]||(Z[0]=oe=>a(e)("editLinkedAppointment",oe))},null,8,["linked-appointments","responsive-class"])]),_:1},8,["label"])):D("",!0),a(c)&&a(c).recurringCycle!=="disabled"&&a(s).getters["appointment/getStartDate"]&&a(s).getters["appointment/getStartTime"]&&!a(s).getters["appointment/getId"]&&!!a(s).getters["customerInfo/getCustomersIds"].length?(u(),q(de,{key:4,label:a(n).recurring,name:"recurring"},{default:L(()=>[I(aw,{"free-slots":a(k),"slots-props":a(V),"maximum-booking-start-date":a(P),"get-free-times":_,"get-selected-dates-times":C,"is-disabled-date":E,"slots-loading":a($),"responsive-class":a(t).responsiveClass,onFetchSlots:B},null,8,["free-slots","slots-props","maximum-booking-start-date","slots-loading","responsive-class"])]),_:1},8,["label"])):D("",!0),a(s).getters["appointment/getId"]?(u(),q(de,{key:5,label:a(n).payment,name:"payment"},{default:L(()=>[I(Nw,{"responsive-class":a(t).responsiveClass},null,8,["responsive-class"])]),_:1},8,["label"])):D("",!0)]),_:1},8,["modelValue"]),m("div",Mw,[I(ke,{category:"secondary",size:"default",type:"plain",onClick:Z[2]||(Z[2]=()=>{a(e)("close")})},{default:L(()=>[ie(w(a(n).cancel),1)]),_:1}),I(ke,{size:"default",onClick:Ie},{default:L(()=>[ie(w(a(n).save),1)]),_:1})]),I(Ma,{visibility:a(se),title:a(n).confirm,description:a(n).price_changed_message,"close-btn-text":a(n).no,"confirm-btn-text":a(n).yes,"customized-options":{cancelBtn:{buttonType:"plain"},confirmBtn:{buttonType:"filled"}},onDecline:Z[3]||(Z[3]=oe=>ue(!1)),onConfirm:Z[4]||(Z[4]=oe=>ue(!0)),onClose:Z[5]||(Z[5]=oe=>ye(se)?se.value=!1:se=!1)},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"])],6))}}});const Vw={key:0,class:"el-skeleton-item-wrapper-title"},Rw={name:"AuthSkeleton"},No=Object.assign(Rw,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(l){const e=l;return(t,s)=>{const n=fn,i=gn;return u(),q(i,{animated:"",class:R(["am-asi-el-skeleton",[{"am-asi":a(e).mainClass}]])},{template:L(()=>[a(e).centerFirst?(u(),x("div",Vw,[I(n,{variant:"rect"})])):D("",!0),(u(!0),x(te,null,fe(new Array(a(e).count),o=>(u(),x("div",{key:o,class:"el-skeleton-item-wrapper"},[I(n,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});const qw=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),Uw={key:2,class:"am-cap__actions"},jw={name:"CabinetAppointments",key:"appointments"},zw=Object.assign(jw,{props:{loadBookingsCounter:{type:Number,default:0},appointments:{type:Object,default:null}},setup(l){const e=l;let t=Oe();const s=F("settings");let n=F("amCustomize");const i=F("shortcodeData"),o=F("labels"),r=F("localLanguage");let c=y(()=>s.general.usedLanguages.includes(r.value)),d=y(()=>{let le=nt({...o}),W=n.value.appointments.translations;return W&&Object.keys(W).forEach(se=>{W[se][r.value]&&c.value?le[se]=W[se][r.value]:W[se].default&&(le[se]=W[se].default)}),le});Be("amLabels",d);const f=M(null),{width:v}=es(f);let g=y(()=>tt(v.value));Be("pageWidth",v);let b=M(null),T=M(!1),C=M("success"),_=M("");function S(){T.value=!1,t.commit("cabinet/setPaymentLinkError",{value:!1,type:"appointment"})}let P=F("cabinetType");t.commit("cabinetFilters/setDates",lo(P.value));let k=y(()=>t.getters["cabinet/getAppointmentsLoading"]),h=y(()=>t.getters["entities/getReady"]),A=M(null),O=M(0),E=M(1);function $(le){E.value=le,V(null,le)}function V(le=null,W=1){t.commit("cabinet/setAppointmentsLoading",!0);let se=JSON.parse(JSON.stringify(t.getters["cabinetFilters/getAppointmentsFilters"])),ge=t.getters["cabinet/getTimeZone"];se.dates=se.dates.map(ue=>pe(ue).format("YYYY-MM-DD")),se.timeZone=ge,se.source="cabinet-"+P.value,se.page=W,t.commit("auth/setLoadingAppointmentsCounter",t.getters["auth/getLoadingAppointmentsCounter"]+1);let Ie=t.getters["auth/getLoadingAppointmentsCounter"];De.get("/appointments",Object.assign(Ue(t),{params:_l(se)})).then(ue=>{Ie===t.getters["auth/getLoadingAppointmentsCounter"]&&(O.value=ue.data.data.total,A.value=mu(ue.data.data.appointments,ge,P.value==="provider"))}).catch(ue=>{ue?.response?.data?.data?.reauthorize!==void 0&&ue.response.data.data.reauthorize&&t.dispatch("auth/logout"),console.log(ue)}).finally(()=>{Ie===t.getters["auth/getLoadingAppointmentsCounter"]&&(t.commit("cabinet/setAppointmentsLoading",!1),le&&"message"in le&&(T.value=!0,_.value=le.message,f.value&&b.value&&setTimeout(function(){ft(f.value,b.value.$el,0,300)},500)))})}let j=M([]);function B(le){t.commit("cabinet/setAppointmentsLoading",!0),De.get("/appointments/"+le.id,Object.assign({params:{source:"cabinet-"+P.value,timeZone:t.getters["cabinet/getTimeZone"]}},Ue(t))).then(W=>{let se=W.data.data.appointment.bookingStart.split(" "),ge=t.getters["entities/getService"](W.data.data.appointment.serviceId),Ie=[];W.data.data.appointment.bookings.forEach(ue=>{let ae=[];ge.extras.sort((z,J)=>z.position-J.position).forEach(z=>{ae.push({extraId:z.id,quantity:0});let J=ue.extras.find(Z=>Z.extraId===z.id);typeof J<"u"&&(ae[ae.length-1]=J)});let me=ue.customFields?JSON.parse(ue.customFields):{};Object.keys(me).forEach(z=>{me[z]=Object.assign({},me[z],{value:me[z].type==="datepicker"?me[z].value?pe(me[z].value).toDate():"":me[z].value})}),Ie.push({id:ue.id,customer:le.bookings.find(z=>z.id===ue.id).customer,persons:ue.persons,status:ue.status,duration:ue.duration?ue.duration.toString():null,extras:ae,customFields:me,payments:ue.payments,price:ue.price,aggregatedPrice:ue.aggregatedPrice,tax:ue.tax,coupon:ue.coupon})}),t.commit("appointment/setAppointment",{id:W.data.data.appointment.id,categoryId:ge.categoryId,serviceId:W.data.data.appointment.serviceId,providerId:W.data.data.appointment.providerId,locationId:W.data.data.appointment.locationId,internalNotes:W.data.data.appointment.internalNotes,lessonSpace:W.data.data.appointment.lessonSpace!==null?W.data.data.appointment.lessonSpace.split("https://www.thelessonspace.com/space/")[1]:null,startDate:pe(se[0]).toDate(),startTime:se[1].substring(0,5),bookings:Ie}),j.value=W.data.data.recurring,G.value=!0}).catch(W=>{console.log(W)}).finally(()=>{t.commit("cabinet/setAppointmentsLoading",!1)})}let G=M(!1);function H(){T.value=!0,_.value=d.value.appointment_saved,f.value&&b.value&&setTimeout(function(){ft(f.value,b.value.$el,0,300)},500),V(),Q()}function X(){ee(),G.value=!0}function Q(){G.value=!1,ee()}function ee(){t.commit("appointment/resetAppointment",{providerId:t.getters["auth/getProfile"].id}),t.commit("customerInfo/setCustomers",[]),t.commit("customerInfo/setCustomersIds",[])}return rt(()=>e.loadBookingsCounter,()=>{V()}),Ze(()=>{V()}),(le,W)=>(u(),x("div",{ref_key:"pageContainer",ref:f,class:R(["am-cap am-capa-main",{"am-capai-main":a(G)}])},[m("div",{class:R(["am-capa-main__inner",a(g)])},[a(T)?(u(),q(wt,{key:0,ref_key:"alertContainer",ref:b,type:a(C),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:S,onTriggerClose:S},{title:L(()=>[qw,ie(" "+w(a(_)),1)]),_:1},8,["type"])):D("",!0),!a(G)&&a(h)?(u(),q(Do,{key:1,"step-key":"appointments","responsive-class":a(g),empty:!1,onAddAppointment:X,onChangeFilters:V},null,8,["responsive-class"])):D("",!0),a(i).cabinetType==="employee"&&a(s).roles.allowWriteAppointments&&!a(G)&&a(h)?(u(),x("div",Uw,[I(ke,{prefix:"plus",size:"small",category:"primary",type:a(n).appointments.options.newAppBtn.buttonType,onClick:X},{default:L(()=>[m("span",null,w(a(d).new_appointment),1)]),_:1},8,["type"])])):D("",!0),!a(k)&&a(h)?(u(),x(te,{key:3},[!a(G)&&a(A)&&Object.keys(a(A)).length>0?(u(),q(vu,{key:0,"grouped-appointments":a(A),"page-width":a(v),"responsive-class":a(g),"step-key":"appointments",onCanceled:V,onBooked:V,onEditAppointment:B},null,8,["grouped-appointments","page-width","responsive-class"])):a(G)?D("",!0):(u(),q(Na,{key:1,heading:a(d).no_app_found,text:a(d).have_no_app},null,8,["heading","text"])),!a(G)&&a(A)&&Object.keys(a(A)).length>0&&a(O)>a(s).general.itemsPerPageBackEnd?(u(),q(sn,{key:2,"page-size":a(s).general.itemsPerPageBackEnd,"pager-count":5,layout:"prev, pager, next",total:a(O),"current-page":a(E),onCurrentChange:$},null,8,["page-size","total","current-page"])):D("",!0),a(G)?(u(),q(Fw,{key:3,"page-width":a(v),"responsive-class":a(g),"linked-appointments":a(j),onEditLinkedAppointment:B,onClose:Q,onSave:H},null,8,["page-width","responsive-class","linked-appointments"])):D("",!0)],64)):(u(),q(No,{key:4}))],2)],2))}});function Ps(l,e,t={},s={}){for(let n in e)n in l&&e[n]&&typeof e[n]=="object"?(n in s||(s[n]={}),Ps(l[n],e[n],n in t?t[n]:l[n],s[n]),Object.keys(s[n]).length===0&&delete s[n]):n in t?s[n]=t[n]:n in l?s[n]=l[n]:s[n]=e[n];return s}function Yw(l){ot.activation.stash&&De.post("/stash",{},Object.assign(Ue(l),{params:{source:"cabinet-provider"}})).then(()=>{}).catch(()=>{})}function Ww(l,e){let t=l.getters["event/getDefaultEvent"],s=[],n={};e.customTickets.length&&e.bookings.forEach(r=>{r.ticketsData.forEach(c=>{n[c.eventTicketId]=!0})}),e.customTickets.forEach(r=>{JSON.parse(r.dateRanges).forEach((c,d)=>{d in s||s.push({enabled:c.enabled,range:[pe(c.startDate,"YYYY-MM-DD").toDate(),pe(c.endDate,"YYYY-MM-DD").toDate()],tickets:[]}),s[d].tickets.push({price:c.price})}),r.booked=r.id in n});let i=!e.description||e.description.startsWith("<!-- Content -->")?"text":"html",o=e.description?e.description.replace("<!-- Content -->",""):"";return Object.assign({},e,{description:o,descriptionMode:i,tags:e.tags.map(r=>r.name),organizerId:e.organizerId,periods:e.periods.map(r=>new Object({id:r.id,eventId:r.eventId,appleCalendarEventId:r.appleCalendarEventId,googleCalendarEventId:r.googleCalendarEventId,googleMeetUrl:r.googleMeetUrl,outlookCalendarEventId:r.outlookCalendarEventId,startDate:pe(r.periodStart.split(" ")[0],"YYYY-MM-DD").toDate(),endDate:pe(r.periodEnd.split(" ")[0],"YYYY-MM-DD").toDate(),startTime:r.periodStart.split(" ")[1].substring(0,5),endTime:r.periodEnd.split(" ")[1].substring(0,5)})),bookingOpens:{disabled:e.bookingOpens===null,date:e.bookingOpens?pe(e.bookingOpens.split(" ")[0],"YYYY-MM-DD").toDate():null,time:e.bookingOpens?e.bookingOpens.split(" ")[1].substring(0,5):null},bookingOpensRec:e.bookingOpensRec==="same",bookingCloses:{disabled:e.bookingCloses===null,date:e.bookingCloses?pe(e.bookingCloses.split(" ")[0],"YYYY-MM-DD").toDate():null,time:e.bookingCloses?e.bookingCloses.split(" ")[1].substring(0,5):null},bookingClosesRec:e.bookingClosesRec==="same",recurringEnabled:e.recurring&&e.recurring.cycle!==null,recurring:e.recurring!==null?Object.assign({},e.recurring,{until:e.recurring.until?pe(e.recurring.until.split(" ")[0],"YYYY-MM-DD").toDate():null,monthDate:e.recurring.monthDate?pe(e.recurring.monthDate.split(" ")[0],"YYYY-MM-DD").toDate():null}):t.recurring,depositEnabled:e.depositPayment!=="disabled",depositPayment:e.depositPayment!=="disabled"?e.depositPayment:"percentage",customTicketsRangesEnabled:s.length>0,customTicketsRanges:s,maxCustomCapacity:e.maxCustomCapacity===null?1:e.maxCustomCapacity,maxCustomCapacityEnabled:e.maxCustomCapacity!==null,closeAfterMinEnabled:e.closeAfterMin>0,closeAfterMinBookings:e.closeAfterMinBookings?"on":"off",maxExtraPeopleEnabled:!!e.maxExtraPeople,locationId:e.locationId===null&&e.customLocation?0:e.locationId,settings:Ps(ot,t.settings,e.settings?JSON.parse(e.settings):{},{})})}function Hw(l){let e=l.getters["event/getDefaultEvent"],t=[];l.getters["event/getCustomTickets"].forEach((n,i)=>{let o=[];l.getters["event/getCustomTicketsRanges"].filter(r=>r.range[0]&&r.range[1]).forEach(r=>{o.push({startDate:pe(r.range[0]).format("YYYY-MM-DD"),endDate:pe(r.range[1]).format("YYYY-MM-DD"),price:r.tickets[i].price})}),t.push(Object.assign({},n,{dateRanges:JSON.stringify(o)}))});let s=Ps(Ps(ot,e.settings,{},{}),e.settings,l.getters["event/getSettings"],{});return Object.keys(l.getters["event/getSettings"]).forEach(n=>{Object.keys(l.getters["event/getSettings"][n]).forEach(i=>{l.getters["event/getSettings"][n][i]!==null&&typeof l.getters["event/getSettings"][n][i]=="object"?(Object.keys(l.getters["event/getSettings"][n][i]).forEach(o=>{(l.getters["event/getSettings"][n][i][o]===ot[n][i][o]||ot[n][i][o]&&(l.getters["event/getSettings"][n][i][o]===""||l.getters["event/getSettings"][n][i][o]===null))&&delete s[n][i][o]}),typeof s[n][i]=="object"&&Object.keys(s[n][i]).length===0&&delete s[n][i]):n in ot&&i in ot[n]&&(s[n][i]===ot[n][i]||ot[n][i]&&(l.getters["event/getSettings"][n][i]===""||l.getters["event/getSettings"][n][i]===null))&&delete s[n][i]}),Object.keys(s[n]).length===0&&delete s[n]}),{aggregatedPrice:l.getters["event/getAggregatedPrice"],bookMultipleTimes:l.getters["event/getBookMultipleTimes"],bookingCloses:!l.getters["event/getBookingClosesDisabled"]&&l.getters["event/getBookingClosesDate"]&&l.getters["event/getBookingClosesTime"]?pe(l.getters["event/getBookingClosesDate"]).format("YYYY-MM-DD")+" "+l.getters["event/getBookingClosesTime"]+":00":null,bookingClosesRec:l.getters["event/getBookingClosesRec"]?"same":"calculate",bookingOpens:!l.getters["event/getBookingOpensDisabled"]&&l.getters["event/getBookingOpensDate"]&&l.getters["event/getBookingOpensTime"]?pe(l.getters["event/getBookingOpensDate"]).format("YYYY-MM-DD")+" "+l.getters["event/getBookingOpensTime"]+":00":null,bookingOpensRec:l.getters["event/getBookingOpensRec"]?"same":"calculate",bringingAnyone:l.getters["event/getBringingAnyone"],closeAfterMin:l.getters["event/getCloseAfterMin"],closeAfterMinBookings:l.getters["event/getCloseAfterMinBookings"],color:l.getters["event/getColor"],customLocation:l.getters["event/getCustomLocation"],customPricing:l.getters["event/getCustomPricing"],customTickets:t,deposit:l.getters["event/getDeposit"],depositPayment:l.getters["event/getDepositEnabled"]?l.getters["event/getDepositPayment"]:"disabled",depositPerPerson:l.getters["event/getDepositPerPerson"],description:l.getters["event/getDescription"]&&l.getters["event/getDescriptionMode"]==="text"?"<!-- Content -->"+l.getters["event/getDescription"]:l.getters["event/getDescription"],fullPayment:l.getters["event/getFullPayment"],gallery:l.getters["event/getGallery"],id:l.getters["event/getId"],locationId:l.getters["event/getLocationId"]===0?null:l.getters["event/getLocationId"],maxCapacity:l.getters["event/getMaxCapacity"],maxCustomCapacity:l.getters["event/getMaxCustomCapacityEnabled"]?l.getters["event/getMaxCustomCapacity"]:null,maxExtraPeople:l.getters["event/getMaxExtraPeopleEnabled"]?l.getters["event/getMaxExtraPeople"]:null,name:l.getters["event/getName"],notifyParticipants:l.getters["event/getNotifyParticipants"],organizerId:l.getters["event/getOrganizerId"],parentId:l.getters["event/getParentId"],periods:Cu(l),price:l.getters["event/getPrice"],providers:l.getters["event/getId"]?l.getters["event/getProviders"]:[{id:l.getters["auth/getProfile"].id,firstName:l.getters["auth/getProfile"].firstName,lastName:l.getters["auth/getProfile"].lastName,email:l.getters["auth/getProfile"].email,type:"provider"}],recurring:l.getters["event/getRecurringEnabled"]?Object.assign({},l.getters["event/getRecurring"],{until:pe(l.getters["event/getRecurringUntil"]).format("YYYY-MM-DD"),monthDate:l.getters["event/getRecurringMonthDate"]?pe(l.getters["event/getRecurringMonthDate"]).format("YYYY-MM-DD"):null}):null,settings:Object.keys(s).length?JSON.stringify(s):null,show:l.getters["event/getShow"],tags:l.getters["event/getTags"].map(n=>new Object({name:n})),timeZone:l.getters["cabinet/getTimeZone"],translations:l.getters["event/getTranslations"],utc:l.getters["cabinet/getTimeZone"]==="UTC",zoomUserId:l.getters["event/getZoomUserId"]}}function Cu(l){return l.getters["event/getPeriods"].map(e=>new Object({id:e.id,eventId:e.eventId,appleCalendarEventId:e.appleCalendarEventId,googleCalendarEventId:e.googleCalendarEventId,googleMeetUrl:e.googleMeetUrl,outlookCalendarEventId:e.outlookCalendarEventId,microsoftTeamsUrl:e.microsoftTeamsUrl,periodStart:l.getters["cabinet/getTimeZone"]==="UTC"?pe(e.startDate).utc().format("YYYY-MM-DD")+" "+e.startTime+":00":pe(e.startDate).format("YYYY-MM-DD")+" "+e.startTime+":00",periodEnd:l.getters["cabinet/getTimeZone"]==="UTC"?pe(e.endDate).utc().format("YYYY-MM-DD")+" "+e.endTime+":00":pe(e.endDate).format("YYYY-MM-DD")+" "+e.endTime+":00"}))}const Gl=nt(window.wpAmeliaLabels);function zr(l,e={}){return Object.assign(e,{id:l.id,eventId:l.event.id,customer:l.customer,customerId:l.customer.id,persons:l.persons,customFields:l.customFields?JSON.parse(l.customFields):{},ticketsData:l.ticketsData,status:l.status,tax:l.tax,price:l.price,coupon:l.coupon,payments:l.payments})}function xu(l){let e={};return Object.keys(l.getters["attendee/getCustomFields"]).forEach(t=>{e[t]={label:l.getters["attendee/getCustomFields"][t].label,type:l.getters["attendee/getCustomFields"][t].type,value:l.getters["attendee/getCustomFields"][t].type==="datepicker"?l.getters["attendee/getCustomFields"][t].value?pe(l.getters["attendee/getCustomFields"][t].value).format("YYYY-MM-DD"):null:l.getters["attendee/getCustomFields"][t].value}}),{id:l.getters["attendee/getId"],type:"event",eventId:l.getters["attendee/getEventId"],bookings:[{customerId:l.getters["attendee/getCustomerId"],persons:l.getters["attendee/getPersons"],customFields:e,ticketsData:l.getters["attendee/getTickets"],status:l.getters["attendee/getStatus"],coupon:l.getters["attendee/getCoupon"]}],status:l.getters["attendee/getStatus"],validateCoupon:!1,isBackendOrCabinet:!0,createPaymentLinks:!1,payment:{gateway:"onSite"}}}function As(l,e,t=null){let s=e.customFields,n=t&&t.customPricing?t.customTickets.map((i,o)=>new Object({eventTicketId:i.id,persons:o===0&&!Object.keys(e.ticketsData).length?1:0,price:i.price})):[];return t&&(l.getters["entities/getCustomFields"].filter(i=>i.allEvents||i.events.map(o=>o.id).indexOf(t.id)!==-1&&i.type!=="content"&&i.type!=="file").forEach(i=>{s[i.id]={type:i.type,label:i.label,value:i.id in s?s[i.id].value:i.type==="checkbox"||i.type==="file"?[]:"",width:i.width,options:i.options,id:i.id,required:i.required}}),t.customPricing&&Object.keys(e.ticketsData).forEach(i=>{let o=n.find(r=>r.eventTicketId===e.ticketsData[i].eventTicketId);o.id=e.ticketsData[i].id,o.persons=e.ticketsData[i].persons,o.price=e.ticketsData[i].price,o.customerBookingId=e.ticketsData[i].customerBookingId})),Object.assign({},e,{eventId:t?t.id:null,customFields:s,ticketsData:n})}function wu(){return[{label:Gl.approved,value:"approved",icon:"check",color:"var(--am-c-success)"},{label:Gl.waiting,value:"waiting",icon:"clock",color:"var(--am-c-warning)"},{label:Gl.canceled,value:"canceled",icon:"close",color:"var(--am-c-error)"},{label:Gl["no-show"],value:"no-show",icon:"clock",color:"var(--am-c-warning)"}]}function Tu(l){let e=0;return l.getters["attendee/getTickets"].length?l.getters["attendee/getTickets"].forEach(t=>{t.persons&&(e+=l.getters["attendee/getAggregatedPrice"]?t.price*t.persons:t.price)}):e=l.getters["attendee/getAggregatedPrice"]?l.getters["attendee/getPrice"]*l.getters["attendee/getPersons"]:l.getters["attendee/getPrice"],to(null,l.getters["attendee/getCoupon"],l.getters["attendee/getTax"]&&l.getters["attendee/getTax"].length?l.getters["attendee/getTax"][0]:null,e,!1)}const Zw=["innerHTML"],Gw=["innerHTML"],Jw={setup(l,{expose:e}){let t=Oe(),s=F("amLabels"),n=F("licence");const i=F("settings");let o=M(t.getters["entities/getLocations"]),r=M(t.getters["entities/getTags"]),c=M(null),d=M({name:y({get:()=>t.getters["event/getName"],set:T=>{t.commit("event/setName",T)}}),locationId:y({get:()=>t.getters["event/getLocationId"],set:T=>{t.commit("event/setLocationId",T)}}),customLocation:y({get:()=>t.getters["event/getCustomLocation"],set:T=>{t.commit("event/setCustomLocation",T)}}),organizerId:y({get:()=>t.getters["event/getOrganizerId"],set:T=>{t.commit("event/setOrganizerId",T)}}),zoomUserId:y({get:()=>t.getters["event/getZoomUserId"],set:T=>{t.commit("event/setZoomUserId",T)}}),tags:y({get:()=>t.getters["event/getTags"],set:T=>{t.commit("event/setTags",T)}}),notifyParticipants:y({get:()=>t.getters["event/getNotifyParticipants"],set:T=>{t.commit("event/setNotifyParticipants",T)}}),description:y({get:()=>t.getters["event/getDescription"],set:T=>{t.commit("event/setDescription",T||"")}})}),f=y(()=>d.value.organizerId!==null);function v(T){t.commit("event/setOrganizerId",T?t.getters["auth/getProfile"].id:null)}let g=y(()=>({name:[{required:!0,message:s.value.please_enter_name,trigger:["submit","change"]}]})),b=y(()=>{let T=t.getters["auth/getZoomUsers"];return T.length?T.map(C=>({value:C.id,label:`${C.first_name} ${C.last_name} (${C.email})`})):[]});return e({detailsFormRef:c}),(T,C)=>{const _=yt,S=vn,P=et;return u(),q(P,{ref_key:"detailsFormRef",ref:c,model:a(d),rules:a(g),class:"am-capei-def"},{default:L(()=>[I(_,{prop:"name",label:`${a(s).name}:`,class:"am-capei-def__item"},{default:L(()=>[I(ht,{modelValue:a(d).name,"onUpdate:modelValue":C[0]||(C[0]=k=>a(d).name=k),placeholder:a(s).enter_event_name},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),!a(n).isStarter&&a(o).length>1?(u(),q(_,{key:0,label:`${a(s).event_select_address}:`,class:"am-capei-def__item"},{default:L(()=>[I(We,{modelValue:a(d).locationId,"onUpdate:modelValue":C[1]||(C[1]=k=>a(d).locationId=k),placeholder:a(s).select},{default:L(()=>[(u(),q(Ve,{key:0,value:0,label:a(s).event_custom_address},null,8,["label"])),(u(!0),x(te,null,fe(a(o),k=>(u(),q(Ve,{key:k.id,value:k.id,label:k.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):D("",!0),a(d).locationId?D("",!0):(u(),q(_,{key:1,label:`${a(s).event_custom_address}:`,class:"am-capei-def__item"},{default:L(()=>[I(ht,{modelValue:a(d).customLocation,"onUpdate:modelValue":C[2]||(C[2]=k=>a(d).customLocation=k)},null,8,["modelValue"])]),_:1},8,["label"])),a(i).zoom.enabled?(u(),q(_,{key:2,label:`${a(s).zoom_user}:`,class:"am-capei-def__item"},{default:L(()=>[I(We,{modelValue:a(d).zoomUserId,"onUpdate:modelValue":C[3]||(C[3]=k=>a(d).zoomUserId=k),clearable:"",placeholder:a(s).zoom_user_placeholder},{default:L(()=>[(u(!0),x(te,null,fe(a(b),k=>(u(),q(Ve,{key:k.value,value:k.value,label:k.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):D("",!0),!a(n).isStarter&&(a(i).googleCalendar.enabled||a(i).outlookCalendar.enabled||a(i).appleCalendar)&&(a(t).getters["employee/getGoogleCalendarId"]||a(t).getters["employee/getOutlookCalendarId"]||a(t).getters["employee/getAppleCalendarId"])?(u(),q(_,{key:3,class:"am-capei-def__item am-capei-def__item-tool"},{default:L(()=>[I(st,{modelValue:a(f),"onUpdate:modelValue":C[4]||(C[4]=k=>ye(f)?f.value=k:f=k),disabled:a(d).organizerId&&a(d).organizerId!==a(t).getters["auth/getProfile"].id,"active-text":a(s).event_organizer,onChange:v},null,8,["modelValue","disabled","active-text"]),I(S,{effect:"dark",placement:"top"},{content:L(()=>[m("div",{innerHTML:a(s).event_organizer_tooltip},null,8,Zw)]),default:L(()=>[I(He,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1})):D("",!0),I(_,{label:`${a(s).event_tags}:`,class:"am-capei-def__item"},{default:L(()=>[I(We,{modelValue:a(d).tags,"onUpdate:modelValue":C[5]||(C[5]=k=>a(d).tags=k),clearable:"",filterable:"",multiple:"","allow-create":!0,placeholder:a(s).event_tags_select_or_create},{default:L(()=>[(u(!0),x(te,null,fe(a(r),(k,h)=>(u(),q(Ve,{key:h,value:k.name,label:k.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),I(_,{class:"am-capei-def__item am-capei-def__item-tool"},{default:L(()=>[I(st,{modelValue:a(d).notifyParticipants,"onUpdate:modelValue":C[6]||(C[6]=k=>a(d).notifyParticipants=k),"active-text":a(s).notify_attendees},null,8,["modelValue","active-text"]),I(S,{effect:"dark",placement:"top"},{content:L(()=>[m("div",{innerHTML:a(s).notify_attendees_tooltip},null,8,Gw)]),default:L(()=>[I(He,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1}),I(_,{prop:"description",label:a(s).description_colon,class:"am-capei-def__item"},{default:L(()=>[I(cu,{modelValue:a(d).description,"onUpdate:modelValue":C[7]||(C[7]=k=>a(d).description=k),mode:a(t).getters["event/getDescriptionMode"],onSetMode:C[8]||(C[8]=k=>a(t).commit("event/setDescriptionMode",k))},null,8,["modelValue","mode"])]),_:1},8,["label"])]),_:1},8,["model","rules"])}}};const Xw={class:"am-capei-per__segment"},Qw={key:0,class:"am-capei-per__delete"},Kw={class:"am-capei-per__segment"},eT=["innerHTML"],tT={class:"am-capei-per__segment"},aT=["innerHTML"],sT={props:{pageWidth:{type:Number,default:0}},setup(l,{expose:e}){const t=l;let s=y(()=>tt(t.pageWidth));const n=Oe(),i=F("settings");let o=F("amLabels"),r=F("localLanguage"),c=M(at());function d(k,h){const A=at(k)<c.value;return(h?at(k)>at(h):!1)||A}function f(k,h){return h?at(k)<at(h):at(k)<c.value}function v(k){return at(k)<c.value}function g(){let k=!0;C.value.validate(h=>{h||(k=!1)}),k&&_.value.periods.push({eventId:n.getters["event/getId"]?n.getters["event/getId"]:null,startDate:null,endDate:null,startTime:null,endTime:null})}function b(k){n.getters["event/getId"]&&_.value.periods[k]?.id&&_.value.periods[k].id&&_.value.periods.forEach((h,A)=>{A!==k&&!h?.id&&(_.value.periods[A].id=_.value.periods[k].id,_.value.periods[A].eventId=_.value.periods[k].eventId,_.value.periods[A].appleCalendarEventId=_.value.periods[k].appleCalendarEventId,_.value.periods[A].googleCalendarEventId=_.value.periods[k].googleCalendarEventId,_.value.periods[A].googleMeetUrl=_.value.periods[k].googleMeetUrl,_.value.periods[A].outlookCalendarEventId=_.value.periods[k].outlookCalendarEventId,_.value.periods[A].microsoftTeamsUrl=_.value.periods[k].microsoftTeamsUrl)}),_.value.periods.splice(k,1)}let T=y(()=>n.getters["event/getRecurringEnabled"]),C=M(null),_=M({periods:y({get:()=>n.getters["event/getPeriods"],set:k=>{n.commit("event/setPeriods",k)}}),bookingOpensDisabled:y({get:()=>n.getters["event/getBookingOpensDisabled"],set:k=>{n.commit("event/setBookingOpensDisabled",k)}}),bookingOpensDate:y({get:()=>n.getters["event/getBookingOpensDate"],set:k=>{n.commit("event/setBookingOpensDate",k)}}),bookingOpensTime:y({get:()=>n.getters["event/getBookingOpensTime"],set:k=>{n.commit("event/setBookingOpensTime",k)}}),bookingOpensRec:y({get:()=>n.getters["event/getBookingOpensRec"],set:k=>{n.commit("event/setBookingOpensRec",k)}}),bookingClosesDisabled:y({get:()=>n.getters["event/getBookingClosesDisabled"],set:k=>{n.commit("event/setBookingClosesDisabled",k)}}),bookingClosesDate:y({get:()=>n.getters["event/getBookingClosesDate"],set:k=>{n.commit("event/setBookingClosesDate",k)}}),bookingClosesTime:y({get:()=>n.getters["event/getBookingClosesTime"],set:k=>{n.commit("event/setBookingClosesTime",k)}}),bookingClosesRec:y({get:()=>n.getters["event/getBookingClosesRec"],set:k=>{n.commit("event/setBookingClosesRec",k)}})});e({periodsFormRef:C});let S=F("amColors"),P=y(()=>({"--am-c-capei-per-text":S.value.colorMainText,"--am-c-capei-per-text-op03":Y(S.value.colorMainText,.03),"--am-c-capei-per-inp-bgr-op03":Y(S.value.colorInpBgr,.03)}));return(k,h)=>{const A=yt,O=vn,E=et;return u(),q(E,{ref_key:"periodsFormRef",ref:C,model:a(_),"label-position":"top",class:"am-capei-per",style:_e(a(P))},{default:L(()=>[m("div",Xw,[(u(!0),x(te,null,fe(a(_).periods,($,V)=>(u(),x(te,{key:V},[I(A,{prop:"periods."+V+".startDate",rules:{required:!0,message:a(o).select_date_warning,trigger:["blur","change"]},label:`${a(o).start_date}:`,class:R(["am-capei-per__item am-w-50",a(s)])},{default:L(()=>[I(Ht,{modelValue:$.startDate,"onUpdate:modelValue":j=>$.startDate=j,format:a(Wt)(),lang:a(r),"disabled-date":j=>d(j,$.endDate)},null,8,["modelValue","onUpdate:modelValue","format","lang","disabled-date"])]),_:2},1032,["prop","rules","label","class"]),I(A,{prop:"periods."+V+".endDate",rules:{required:!0,message:a(o).select_date_warning,trigger:["blur","change"]},label:`${a(o).end_date}:`,class:R(["am-capei-per__item am-w-50",a(s)])},{default:L(()=>[I(Ht,{modelValue:$.endDate,"onUpdate:modelValue":j=>$.endDate=j,format:a(Wt)(),lang:a(r),"disabled-date":j=>f(j,$.startDate)},null,8,["modelValue","onUpdate:modelValue","format","lang","disabled-date"])]),_:2},1032,["prop","rules","label","class"]),I(A,{prop:"periods."+V+".startTime",rules:{required:!0,message:a(o).select_time_warning,trigger:["blur","change"]},label:`${a(o).start_time}:`,class:R(["am-capei-per__item am-w-50",a(s)])},{default:L(()=>[I($a,{modelValue:$.startTime,"onUpdate:modelValue":j=>$.startTime=j,start:"00:00",end:a(Mt)(a(qt)("24:00")-a(i).general.timeSlotLength),"min-time":null,"max-time":$.endTime,step:a(Mt)(a(i).general.timeSlotLength),clearable:!1,placeholder:a(o).select_time},null,8,["modelValue","onUpdate:modelValue","end","max-time","step","placeholder"])]),_:2},1032,["prop","rules","label","class"]),I(A,{prop:"periods."+V+".endTime",rules:{required:!0,message:a(o).select_time_warning,trigger:["blur","change"]},label:`${a(o).end_time}:`,class:R(["am-capei-per__item am-w-50",a(s)])},{default:L(()=>[I($a,{modelValue:$.endTime,"onUpdate:modelValue":j=>$.endTime=j,disabled:!$.startTime,start:"00:00",end:"24:00","min-time":$.startTime,"max-time":null,step:a(Mt)(a(i).general.timeSlotLength),clearable:!1,placeholder:a(o).select_time},null,8,["modelValue","onUpdate:modelValue","disabled","min-time","step","placeholder"])]),_:2},1032,["prop","rules","label","class"]),a(_).periods.length>1?(u(),x("div",Qw,[I(ke,{size:"default",category:"danger",onClick:j=>b(V)},{default:L(()=>[ie(w(a(o).delete_period),1)]),_:2},1032,["onClick"])])):D("",!0)],64))),128)),I(ke,{size:"default",onClick:h[0]||(h[0]=$=>g())},{default:L(()=>[ie(w(a(o).add_period),1)]),_:1})]),m("div",Kw,[I(gt,{modelValue:a(_).bookingOpensDisabled,"onUpdate:modelValue":h[1]||(h[1]=$=>a(_).bookingOpensDisabled=$),label:a(o).event_booking_opens_now},null,8,["modelValue","label"]),a(_).bookingOpensDisabled?D("",!0):(u(),x(te,{key:0},[I(A,{label:`${a(o).date}:`,prop:"bookingOpensDate",rules:{required:!0,message:a(o).select_date_warning,trigger:["blur","change"]},class:R(["am-capei-per__item am-w-50",a(s)])},{default:L(()=>[I(Ht,{modelValue:a(_).bookingOpensDate,"onUpdate:modelValue":h[2]||(h[2]=$=>a(_).bookingOpensDate=$),format:a(Wt)(),lang:a(r),"disabled-date":v},null,8,["modelValue","format","lang"])]),_:1},8,["label","rules","class"]),I(A,{label:`${a(o).time}:`,prop:"bookingOpensTime",rules:{required:!0,message:a(o).select_time_warning,trigger:["blur","change"]},class:R(["am-capei-per__item am-w-50",a(s)])},{default:L(()=>[I($a,{modelValue:a(_).bookingOpensTime,"onUpdate:modelValue":h[3]||(h[3]=$=>a(_).bookingOpensTime=$),placeholder:a(o).select_time,step:a(Mt)(a(i).general.timeSlotLength),start:"00:00",end:"24:00",clearable:!1},null,8,["modelValue","placeholder","step"])]),_:1},8,["label","rules","class"])],64)),a(T)?(u(),q(gt,{key:1,modelValue:a(_).bookingOpensRec,"onUpdate:modelValue":h[4]||(h[4]=$=>a(_).bookingOpensRec=$)},{default:L(()=>[ie(w(a(o).apply_to_all)+" ",1),I(O,{effect:"dark",placement:"top"},{content:L(()=>[m("div",{innerHTML:a(o).event_booking_closes_apply},null,8,eT)]),default:L(()=>[I(He,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1},8,["modelValue"])):D("",!0)]),m("div",tT,[I(gt,{modelValue:a(_).bookingClosesDisabled,"onUpdate:modelValue":h[5]||(h[5]=$=>a(_).bookingClosesDisabled=$),label:a(o).event_booking_closes_after},null,8,["modelValue","label"]),a(_).bookingClosesDisabled?D("",!0):(u(),x(te,{key:0},[I(A,{label:`${a(o).date}:`,prop:"bookingClosesDate",rules:{required:!0,message:a(o).select_date_warning,trigger:["blur","change"]},class:R(["am-capei-per__item am-w-50",a(s)])},{default:L(()=>[I(Ht,{modelValue:a(_).bookingClosesDate,"onUpdate:modelValue":h[6]||(h[6]=$=>a(_).bookingClosesDate=$),format:a(Wt)(),lang:a(r),"disabled-date":v},null,8,["modelValue","format","lang"])]),_:1},8,["label","rules","class"]),I(A,{label:`${a(o).time}:`,prop:"bookingClosesTime",rules:{required:!0,message:a(o).select_time_warning,trigger:["blur","change"]},class:R(["am-capei-per__item am-w-50",a(s)])},{default:L(()=>[I($a,{modelValue:a(_).bookingClosesTime,"onUpdate:modelValue":h[7]||(h[7]=$=>a(_).bookingClosesTime=$),step:a(Mt)(a(i).general.timeSlotLength),start:"00:00",end:"24:00",clearable:!1,placeholder:a(o).select_time},null,8,["modelValue","step","placeholder"])]),_:1},8,["label","rules","class"])],64)),a(T)?(u(),q(gt,{key:1,modelValue:a(_).bookingClosesRec,"onUpdate:modelValue":h[8]||(h[8]=$=>a(_).bookingClosesRec=$)},{default:L(()=>[ie(w(a(o).apply_to_all)+" ",1),I(O,{effect:"dark",placement:"top"},{content:L(()=>[m("div",{innerHTML:a(o).event_booking_closes_apply},null,8,aT)]),default:L(()=>[I(He,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1},8,["modelValue"])):D("",!0)])]),_:1},8,["model","style"])}}};const lT={class:"am-capei-recurr__header"},nT={class:"am-capei-recurr__header-text"},iT={props:{pageWidth:{type:Number,default:0},recurringUntil:{type:Object,default:null}},setup(l,{expose:e}){const t=l;let s=y(()=>tt(t.pageWidth));const n=Oe();let i=F("amLabels"),o=F("localLanguage"),r=M([{label:i.value.day,value:"daily"},{label:i.value.week,value:"weekly"},{label:i.value.month,value:"monthly"},{label:i.value.year,value:"yearly"}]),c=M([{label:i.value.recurring_date_first,value:"first"},{label:i.value.recurring_date_second,value:"second"},{label:i.value.recurring_date_third,value:"third"},{label:i.value.recurring_date_fourth,value:"fourth"},{label:i.value.recurring_date_fifth,value:"fifth"},{label:i.value.recurring_date_last,value:"last"}]),d=[{label:i.value.weekday_monday,value:"monday"},{label:i.value.weekday_tuesday,value:"tuesday"},{label:i.value.weekday_wednesday,value:"wednesday"},{label:i.value.weekday_thursday,value:"thursday"},{label:i.value.weekday_friday,value:"friday"},{label:i.value.weekday_saturday,value:"saturday"},{label:i.value.weekday_sunday,value:"sunday"}],f=M(null),v=M({enabled:y({get:()=>n.getters["event/getRecurringEnabled"],set:P=>{n.commit("event/setRecurringEnabled",P)}}),cycle:y({get:()=>n.getters["event/getRecurringCycle"],set:P=>{n.commit("event/setRecurringCycle",P)}}),cycleInterval:y({get:()=>n.getters["event/getRecurringCycleInterval"],set:P=>{n.commit("event/setRecurringCycleInterval",P)}}),monthDate:y({get:()=>n.getters["event/getRecurringMonthDate"],set:P=>{n.commit("event/setRecurringMonthDate",P)}}),monthlyOnDay:y({get:()=>n.getters["event/getRecurringMonthlyOnDay"],set:P=>{n.commit("event/setRecurringMonthlyOnDay",P)}}),monthlyOnRepeat:y({get:()=>n.getters["event/getRecurringMonthlyOnRepeat"],set:P=>{n.commit("event/setRecurringMonthlyOnRepeat",P)}}),monthlyRepeat:y({get:()=>n.getters["event/getRecurringMonthlyRepeat"],set:P=>{n.commit("event/setRecurringMonthlyRepeat",P)}}),order:y({get:()=>n.getters["event/getRecurringOrder"],set:P=>{n.commit("event/setRecurringOrder",P)}}),until:y({get:()=>n.getters["event/getRecurringUntil"],set:P=>{n.commit("event/setRecurringUntil",P)}})}),g=y(()=>({cycle:[{required:!0,message:i.value.select_cycle_warning,trigger:["submit","change"]}],until:[{required:!0,message:i.value.select_date_warning,trigger:["submit","change"]}],monthDate:[{required:!0,message:i.value.select_date_warning,trigger:["submit","change"]}]})),b=y(()=>n.getters["event/getPeriods"]),T=y(()=>t.recurringUntil!==null?t.recurringUntil:b.value.length?at(b.value[0].startDate,"YYYY-MM-DD"):at());function C(P){return at(P)<=T.value}e({recurringFormRef:f});let _=F("amColors"),S=y(()=>({"--am-c-capei-recurr-text":_.value.colorMainText,"--am-c-capei-recurr-text-op03":Y(_.value.colorMainText,.03),"--am-c-capei-recurr-inp-bgr-op03":Y(_.value.colorInpBgr,.03),"--am-c-capei-recurr-bgr-op03":Y(_.value.colorMainText,.03)}));return(P,k)=>{const h=yt,A=et;return u(),x("div",{class:"am-capei-recurr",style:_e(a(S))},[m("div",lT,[m("div",nT,w(a(i).event_recurring_check),1),I(st,{modelValue:a(v).enabled,"onUpdate:modelValue":k[0]||(k[0]=O=>a(v).enabled=O),disabled:!a(b).length||!a(b)[0].startDate||!a(b)[0].endDate},null,8,["modelValue","disabled"])]),a(v).enabled&&a(b).length&&a(b)[0].startDate&&a(b)[0].endDate?(u(),q(A,{key:0,ref_key:"recurringFormRef",ref:f,rules:a(g),model:a(v),"label-position":"top",class:"am-capei-recurr__form"},{default:L(()=>[I(h,{label:`${a(i).repeat_every}`,class:R(["am-capei-recurr__form-item am-ws-150",a(s)])},{default:L(()=>[I(vt,{modelValue:a(v).cycleInterval,"onUpdate:modelValue":k[1]||(k[1]=O=>a(v).cycleInterval=O),min:1,disabled:a(t).recurringUntil!==null},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]),I(h,{prop:"cycle",class:R(["am-capei-recurr__form-item am-inline-ws-150 am-align-end",a(s)])},{default:L(()=>[I(We,{modelValue:a(v).cycle,"onUpdate:modelValue":k[2]||(k[2]=O=>a(v).cycle=O),clearable:"",placeholder:a(i).select_repeat_period,disabled:a(t).recurringUntil!==null},{default:L(()=>[(u(!0),x(te,null,fe(a(r),(O,E)=>(u(),q(Ve,{key:E,value:O.value,label:O.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["class"]),a(v).cycle==="monthly"?(u(),q(_n,{key:0,modelValue:a(v).monthlyRepeat,"onUpdate:modelValue":k[6]||(k[6]=O=>a(v).monthlyRepeat=O),class:"am-w-100",disabled:a(t).recurringUntil!==null},{default:L(()=>[I(h,{class:"am-capei-recurr__form-item"},{default:L(()=>[I(Oa,{label:"each",value:"each"},{default:L(()=>[ie(w(a(i).recurrence_each),1)]),_:1})]),_:1}),I(h,{prop:"monthDate",class:"am-capei-recurr__form-item"},{default:L(()=>[I(Ht,{modelValue:a(v).monthDate,"onUpdate:modelValue":k[3]||(k[3]=O=>a(v).monthDate=O),disabled:a(v).monthlyRepeat==="on"||a(t).recurringUntil!==null,format:a(Wt)(),lang:a(o)},null,8,["modelValue","disabled","format","lang"])]),_:1}),I(h,{prop:"on",class:"am-capei-recurr__form-item"},{default:L(()=>[I(Oa,{label:"on",value:"on"},{default:L(()=>[ie(w(a(i).recurrence_on),1)]),_:1})]),_:1}),I(h,{class:R(["am-capei-recurr__form-item am-w-50",a(s)])},{default:L(()=>[I(We,{modelValue:a(v).monthlyOnRepeat,"onUpdate:modelValue":k[4]||(k[4]=O=>a(v).monthlyOnRepeat=O),disabled:a(v).monthlyRepeat==="each"||a(t).recurringUntil!==null,placeholder:a(i).select_repeat_period},{default:L(()=>[(u(!0),x(te,null,fe(a(c),(O,E)=>(u(),q(Ve,{key:E,value:O.value,label:O.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["class"]),I(h,{class:R(["am-capei-recurr__form-item am-w-50",a(s)])},{default:L(()=>[I(We,{modelValue:a(v).monthlyOnDay,"onUpdate:modelValue":k[5]||(k[5]=O=>a(v).monthlyOnDay=O),disabled:a(v).monthlyRepeat==="each",placeholder:a(i).select_repeat_period},{default:L(()=>[(u(!0),x(te,null,fe(a(d),(O,E)=>(u(),q(Ve,{key:E,value:O.value,label:O.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["class"])]),_:1},8,["modelValue","disabled"])):D("",!0),I(h,{label:a(i).event_recurring_until,prop:"until",class:"am-capei-recurr__form-item"},{default:L(()=>[I(Ht,{modelValue:a(v).until,"onUpdate:modelValue":k[7]||(k[7]=O=>a(v).until=O),format:a(Wt)(),lang:a(o),"disabled-date":C},null,8,["modelValue","format","lang"])]),_:1},8,["label"])]),_:1},8,["rules","model"])):D("",!0)],4)}}};const oT={class:"am-capei-price__heading"},rT={key:0,class:"am-capei-price__segment"},cT={key:0,class:"am-capei-price__block"},uT={class:"am-capei-price__block-header"},dT={class:"am-capei-price__block-header__text"},mT={key:1,class:"am-capei-price__segment"},pT={key:1,class:"am-capei-price__block"},fT={class:"am-capei-price__block-header"},gT={class:"am-capei-price__block-header__text"},hT={key:0,class:"am-capei-price__block-heading am-pl-32 am-pr-44"},vT={class:"am-capei-price__block-heading__item am-custom-pricing am-w-40"},_T={class:"am-capei-price__block-heading__item am-custom-pricing am-w-30"},yT={class:"am-capei-price__block-heading__item am-custom-pricing am-w-30"},bT={key:1,class:"am-separator am-order-6"},kT=m("div",{class:"am-separator"},null,-1),CT={class:"am-capei-price__part"},xT=m("div",{class:"am-separator"},null,-1),wT={class:"am-capei-price__block-header"},TT={class:"am-capei-price__block-header__text"},ST={key:1,class:"am-capei-price__block-segment"},ET={key:0,class:"am-capei-price__block-heading"},LT={class:"am-capei-price__block-heading__item am-custom-date am-w-50"},AT={class:"am-capei-price__block-heading__item am-custom-date am-w-50"},$T=m("div",{class:"am-separator"},null,-1),IT={key:2,class:"am-capei-price__block"},PT={class:"am-capei-price__block-header"},OT={class:"am-capei-price__block-header__text"},DT={key:0,class:"am-capei-price__part"},NT={key:3,class:"am-capei-price__block"},MT={class:"am-capei-price__block-header"},BT={class:"am-capei-price__block-header__text"},FT={key:0,class:"am-capei-price__part"},VT={props:{pageWidth:{type:Number,default:0}},setup(l,{expose:e}){const t=l;let s=y(()=>tt(t.pageWidth)),n=Oe(),i=F("amLabels"),o=F("localLanguage"),r=F("licence"),c={components:{IconComponent:He},template:'<IconComponent icon="plus"/>'};function d(E){let $=pe(E),V=!1;if(h.value.customTicketsRanges.forEach(G=>{!V&&G.range[0]&&G.range[1]&&(V=pe(G.range[0])<=$&&pe(G.range[1])>=$)}),V)return!0;let j=n.getters["event/getBookingOpensDisabled"]?pe():pe(n.getters["event/getBookingOpensDate"]),B=n.getters["event/getBookingClosesDisabled"]?n.getters["event/getPeriods"][0].startDate?pe(n.getters["event/getPeriods"][0].startDate,"YYYY-MM-DD"):pe():pe(n.getters["event/getBookingClosesDate"]);return $<j||$>B}let f=y(()=>n.getters["event/getEvent"]),v=y(()=>h.value.customPricing?h.value.customTickets.reduce((E,$)=>E+$.spots,0)>1:h.value.maxCapacity>1),g=y(()=>h.value.customPricing?h.value.customTickets.reduce((E,$)=>E+$.spots,0):0),b=y(()=>h.value.customPricing&&h.value.maxCustomCapacityEnabled?h.value.maxCustomCapacity:h.value.customPricing?g.value:h.value.maxCapacity);function T(){h.value.customPricing&&h.value.customTickets.length===0&&_()}function C(E){h.value.customTickets.splice(E,1)}function _(){h.value.customTickets.push({enabled:!0,name:"",spots:1,waitingListSpots:0,price:0}),h.value.customTicketsRanges.forEach(E=>{E.tickets.push(new Object({price:0}))})}function S(E){h.value.customTicketsRanges.splice(E,1)}function P(){h.value.customTicketsRanges.push({range:["",""],tickets:h.value.customTickets.map(E=>new Object({price:E.price}))})}const k=M(null);let h=M({price:y({get:()=>n.getters["event/getPrice"],set:E=>{n.commit("event/setPrice",E)}}),maxCapacity:y({get:()=>n.getters["event/getMaxCapacity"],set:E=>{n.commit("event/setMaxCapacity",E)}}),bringingAnyone:y({get:()=>n.getters["event/getBringingAnyone"],set:E=>{n.commit("event/setBringingAnyone",E)}}),aggregatedPrice:y({get:()=>n.getters["event/getAggregatedPrice"],set:E=>{n.commit("event/setAggregatedPrice",E)}}),bookMultipleTimes:y({get:()=>n.getters["event/getBookMultipleTimes"],set:E=>{n.commit("event/setBookMultipleTimes",E)}}),depositEnabled:y({get:()=>n.getters["event/getDepositEnabled"],set:E=>{n.commit("event/setDepositEnabled",E)}}),deposit:y({get:()=>n.getters["event/getDeposit"],set:E=>{n.commit("event/setDeposit",E)}}),depositPayment:y({get:()=>n.getters["event/getDepositPayment"],set:E=>{n.commit("event/setDepositPayment",E)}}),depositPerPerson:y({get:()=>n.getters["event/getDepositPerPerson"],set:E=>{n.commit("event/setDepositPerPerson",E)}}),fullPayment:y({get:()=>n.getters["event/getFullPayment"],set:E=>{n.commit("event/setFullPayment",E)}}),customPricing:y({get:()=>n.getters["event/getCustomPricing"],set:E=>{n.commit("event/setCustomPricing",E)}}),customTickets:y({get:()=>n.getters["event/getCustomTickets"],set:E=>{n.commit("event/setCustomTickets",E)}}),customTicketsRangesEnabled:y({get:()=>n.getters["event/getCustomTicketsRangesEnabled"],set:E=>{n.commit("event/setCustomTicketsRangesEnabled",E)}}),customTicketsRanges:y({get:()=>n.getters["event/getCustomTicketsRanges"],set:E=>{n.commit("event/setCustomTicketsRanges",E)}}),maxCustomCapacityEnabled:y({get:()=>n.getters["event/getMaxCustomCapacityEnabled"],set:E=>{n.commit("event/setMaxCustomCapacityEnabled",E)}}),maxCustomCapacity:y({get:()=>n.getters["event/getMaxCustomCapacity"],set:E=>{n.commit("event/setMaxCustomCapacity",E)}}),closeAfterMinEnabled:y({get:()=>n.getters["event/getCloseAfterMinEnabled"],set:E=>{n.commit("event/setCloseAfterMinEnabled",E)}}),closeAfterMin:y({get:()=>n.getters["event/getCloseAfterMin"],set:E=>{n.commit("event/setCloseAfterMin",E)}}),closeAfterMinBookings:y({get:()=>n.getters["event/getCloseAfterMinBookings"],set:E=>{n.commit("event/setCloseAfterMinBookings",E)}}),maxExtraPeopleEnabled:y({get:()=>n.getters["event/getMaxExtraPeopleEnabled"],set:E=>{n.commit("event/setMaxExtraPeopleEnabled",E)}}),maxExtraPeople:y({get:()=>n.getters["event/getMaxExtraPeople"],set:E=>{n.commit("event/setMaxExtraPeople",E)}})});e({pricingFormRef:k});let A=F("amColors"),O=y(()=>({"--am-c-capei-price-text":A.value.colorMainText,"--am-c-capei-price-text-op03":Y(A.value.colorMainText,.03),"--am-c-capei-price-inp-bgr-op03":Y(A.value.colorInpBgr,.03)}));return(E,$)=>{const V=yt,j=et;return u(),q(j,{ref_key:"pricingFormRef",ref:k,model:a(h),style:_e(a(O)),class:"am-capei-price"},{default:L(()=>[m("div",oT,[I(V,{label:`${a(i).price}:`,class:R(["am-capei-price__item am-w-50",a(s)])},{default:L(()=>[I(ht,{modelValue:a(h).price,"onUpdate:modelValue":$[0]||($[0]=B=>a(h).price=B),disabled:a(h).customPricing,"is-money":!0},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]),I(V,{label:`${a(i).event_max_capacity}:`,class:R(["am-capei-price__item am-w-50",a(s)])},{default:L(()=>[I(vt,{modelValue:a(h).maxCapacity,"onUpdate:modelValue":$[1]||($[1]=B=>a(h).maxCapacity=B),disabled:a(h).customPricing,min:1},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]),a(v)?(u(),x("div",rT,[I(gt,{modelValue:a(h).bringingAnyone,"onUpdate:modelValue":$[2]||($[2]=B=>a(h).bringingAnyone=B),label:a(i).event_bringing_anyone},null,8,["modelValue","label"]),a(h).bringingAnyone?(u(),q(gt,{key:0,modelValue:a(h).aggregatedPrice,"onUpdate:modelValue":$[3]||($[3]=B=>a(h).aggregatedPrice=B),label:a(i).event_aggregated_price},null,8,["modelValue","label"])):D("",!0),I(gt,{modelValue:a(h).bookMultipleTimes,"onUpdate:modelValue":$[4]||($[4]=B=>a(h).bookMultipleTimes=B),label:a(i).event_book_more_than_once},null,8,["modelValue","label"])])):D("",!0)]),a(r).isStarter?D("",!0):(u(),x("div",cT,[m("div",uT,[m("div",dT,w(a(i).deposit_enabled),1),I(st,{modelValue:a(h).depositEnabled,"onUpdate:modelValue":$[5]||($[5]=B=>a(h).depositEnabled=B)},null,8,["modelValue"])]),a(h).depositEnabled?(u(),x(te,{key:0},[I(V,{label:`${a(i).deposit_payment}:`,class:R(["am-capei-price__item am-w-50",a(s)])},{default:L(()=>[I(We,{modelValue:a(h).depositPayment,"onUpdate:modelValue":$[6]||($[6]=B=>a(h).depositPayment=B)},{default:L(()=>[I(Ve,{value:"percentage",label:a(i).amount_percentage},null,8,["label"]),I(Ve,{value:"fixed",label:a(i).amount_fixed},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label","class"]),a(h).depositPayment==="fixed"?(u(),q(V,{key:0,label:`${a(i).amount} (${a(Gu)()}):`,class:R(["am-capei-price__item am-w-50",a(s)])},{default:L(()=>[I(ht,{modelValue:a(h).deposit,"onUpdate:modelValue":$[7]||($[7]=B=>a(h).deposit=B),"is-money":!0},null,8,["modelValue"])]),_:1},8,["label","class"])):D("",!0),a(h).depositPayment==="percentage"?(u(),q(V,{key:1,label:`${a(i).amount} (%):`,class:R(["am-capei-price__item am-w-50",a(s)])},{default:L(()=>[I(vt,{modelValue:a(h).deposit,"onUpdate:modelValue":$[8]||($[8]=B=>a(h).deposit=B),min:1,max:100},null,8,["modelValue"])]),_:1},8,["label","class"])):D("",!0)],64)):D("",!0),a(h).depositEnabled?(u(),x("div",mT,[I(gt,{modelValue:a(h).depositPerPerson,"onUpdate:modelValue":$[9]||($[9]=B=>a(h).depositPerPerson=B),label:a(i).deposit_per_person},null,8,["modelValue","label"]),I(gt,{modelValue:a(h).fullPayment,"onUpdate:modelValue":$[10]||($[10]=B=>a(h).fullPayment=B),label:a(i).allow_total_event_amount},null,8,["modelValue","label"])])):D("",!0)])),a(r).isStarter?D("",!0):(u(),x("div",pT,[m("div",fT,[m("div",gT,w(a(i).custom_pricing_enabled),1),I(st,{modelValue:a(h).customPricing,"onUpdate:modelValue":$[11]||($[11]=B=>a(h).customPricing=B),disabled:a(f).bookings&&a(f).bookings.length>0,onChange:T},null,8,["modelValue","disabled"])]),a(h).customPricing?(u(),x(te,{key:0},[t.pageWidth>545?(u(),x("div",hT,[m("div",vT,w(a(i).name)+": ",1),m("div",_T,w(a(i).price)+": ",1),m("div",yT,w(a(i).spots)+": ",1)])):D("",!0),(u(!0),x(te,null,fe(a(h).customTickets,(B,G)=>(u(),x("div",{key:G,class:"am-capei-price__block-segment am-custom-76"},[m("div",{class:R(["am-capei-price__block-inner am-ws-16",{"am-mt-22":t.pageWidth<546}])},[I(V,null,{default:L(()=>[I(gt,{modelValue:B.enabled,"onUpdate:modelValue":H=>B.enabled=H},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)],2),m("div",{class:R(["am-capei-price__block-inner",[{"am-we-40":t.pageWidth>545},{"am-we-100":t.pageWidth<546}]])},[I(V,{label:t.pageWidth<546?`${a(i).name}:`:""},{default:L(()=>[I(ht,{modelValue:B.name,"onUpdate:modelValue":H=>B.name=H,disabled:!B.enabled},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label"])],2),m("div",{class:R(["am-capei-price__block-inner",[{"am-we-30":t.pageWidth>545},{"am-w-50 am-order-2":t.pageWidth<546},{"am-w-100":t.pageWidth<401}]])},[I(V,{label:t.pageWidth<546?a(i).price:""},{default:L(()=>[I(ht,{modelValue:B.price,"onUpdate:modelValue":H=>B.price=H,disabled:!B.enabled,"is-money":!0},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label"])],2),m("div",{class:R(["am-capei-price__block-inner",[{"am-we-30":t.pageWidth>545},{"am-w-50 am-order-3":t.pageWidth<546},{"am-w-100":t.pageWidth<401}]])},[I(V,{label:t.pageWidth<546?`${a(i).spots}:`:""},{default:L(()=>[I(vt,{modelValue:B.spots,"onUpdate:modelValue":H=>B.spots=H,min:1,disabled:!B.enabled||a(h).maxCustomCapacityEnabled},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label"])],2),!B.booked&&a(h).customTickets.length>1?(u(),x("div",{key:0,class:R(["am-capei-price__block-delete",{"am-order-1 am-mt-22":t.pageWidth<546}])},[I(ke,{category:"secondary",type:"plain",size:"mini","icon-only":!0,icon:{components:{IconComponent:He},template:"<IconComponent icon='bucket'/>"},onClick:H=>C(G)},null,8,["icon","onClick"])],2)):D("",!0),t.pageWidth<546?(u(),x("div",bT)):D("",!0)]))),128)),I(ke,{icon:a(c),prefix:"plus",size:"default",category:"primary",type:"filled",onClick:_},{default:L(()=>[ie(w(a(i).add_ticket_category),1)]),_:1},8,["icon"]),kT,m("div",CT,[m("div",{class:R(["am-capei-price__part-item",[{"am-w-100":t.pageWidth<546},{"am-w-50":t.pageWidth>545}]])},[I(gt,{modelValue:a(h).maxCustomCapacityEnabled,"onUpdate:modelValue":$[12]||($[12]=B=>a(h).maxCustomCapacityEnabled=B),label:`${a(i).event_max_capacity}:`},null,8,["modelValue","label"])],2),m("div",{class:R(["am-capei-price__part-item",[{"am-w-100":t.pageWidth<546},{"am-w-50":t.pageWidth>545}]])},[I(vt,{modelValue:a(h).maxCustomCapacity,"onUpdate:modelValue":$[13]||($[13]=B=>a(h).maxCustomCapacity=B),min:1,disabled:!a(h).maxCustomCapacityEnabled},null,8,["modelValue","disabled"])],2)]),xT,m("div",wT,[m("div",TT,w(a(i).pricing_by_date_enabled),1),I(st,{modelValue:a(h).customTicketsRangesEnabled,"onUpdate:modelValue":$[14]||($[14]=B=>a(h).customTicketsRangesEnabled=B)},null,8,["modelValue"])]),a(h).customTicketsRangesEnabled?(u(),x("div",ST,[(u(!0),x(te,null,fe(a(h).customTicketsRanges,(B,G)=>(u(),x(te,{key:G},[I(V,{label:`${a(i).event_date_range}:`,class:"am-capei-price__date-range"},{default:L(()=>[I(Ht,{modelValue:B.range,"onUpdate:modelValue":H=>B.range=H,type:"daterange",format:a(Wt)(),placeholder:"Pick a day",lang:a(o),"disabled-date":d},null,8,["modelValue","onUpdate:modelValue","format","lang"]),I(ke,{category:"secondary",type:"plain",size:"mini","icon-only":!0,icon:{components:{IconComponent:He},template:"<IconComponent icon='bucket'/>"},onClick:H=>S(G)},null,8,["icon","onClick"])]),_:2},1032,["label"]),t.pageWidth>545?(u(),x("div",ET,[m("div",LT,w(a(i).name)+": ",1),m("div",AT,w(a(i).price)+": ",1)])):D("",!0),(u(!0),x(te,null,fe(a(h).customTickets,(H,X)=>(u(),x(te,{key:X},[m("div",{class:R(["am-capei-price__block-inner",[{"am-w-50":t.pageWidth>545},{"am-w-100":t.pageWidth<546}]])},[I(V,{label:t.pageWidth<546?`${a(i).name}:`:""},{default:L(()=>[I(ht,{modelValue:H.name,"onUpdate:modelValue":Q=>H.name=Q,disabled:!0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])],2),m("div",{class:R(["am-capei-price__block-inner",[{"am-w-50":t.pageWidth>545},{"am-w-100":t.pageWidth<546}]])},[I(V,{label:t.pageWidth<546?`${a(i).price}:`:""},{default:L(()=>[I(ht,{modelValue:B.tickets[X].price,"onUpdate:modelValue":Q=>B.tickets[X].price=Q,"is-money":!0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])],2)],64))),128)),$T],64))),128)),I(ke,{icon:a(c),prefix:"plus",size:"default",category:"primary",type:"filled",onClick:P},{default:L(()=>[ie(w(a(i).event_add_date_range),1)]),_:1},8,["icon"])])):D("",!0)],64)):D("",!0)])),a(h).maxCapacity>1||a(h).maxCustomCapacity>1||a(g)>1?(u(),x("div",IT,[m("div",PT,[m("div",OT,w(a(i).event_close_after_min),1),I(st,{modelValue:a(h).closeAfterMinEnabled,"onUpdate:modelValue":$[15]||($[15]=B=>a(h).closeAfterMinEnabled=B)},null,8,["modelValue"])]),a(h).closeAfterMinEnabled&&(a(h).maxCapacity>1||a(h).maxCustomCapacity>1||a(g)>1)?(u(),x("div",DT,[I(_n,{modelValue:a(h).closeAfterMinBookings,"onUpdate:modelValue":$[16]||($[16]=B=>a(h).closeAfterMinBookings=B),class:R(["am-capei-price__part-item",[{"am-w-100":t.pageWidth<546},{"am-w-50":t.pageWidth>545}]])},{default:L(()=>[I(Oa,{label:"off"},{default:L(()=>[ie(w(a(i).event_close_min_total),1)]),_:1}),I(Oa,{label:"on"},{default:L(()=>[ie(w(a(i).event_close_min_bookings),1)]),_:1})]),_:1},8,["modelValue","class"]),I(V,{class:R(["am-capei-price__part-item",[{"am-w-100":t.pageWidth<546},{"am-w-50":t.pageWidth>545}]])},{default:L(()=>[I(vt,{modelValue:a(h).closeAfterMin,"onUpdate:modelValue":$[17]||($[17]=B=>a(h).closeAfterMin=B),min:1,max:a(b)},null,8,["modelValue","max"])]),_:1},8,["class"])])):D("",!0)])):D("",!0),a(h).maxCapacity>1||a(h).maxCustomCapacity>1||a(g)>1?(u(),x("div",NT,[m("div",MT,[m("div",BT,w(a(i).limit_extra_people),1),I(st,{modelValue:a(h).maxExtraPeopleEnabled,"onUpdate:modelValue":$[18]||($[18]=B=>a(h).maxExtraPeopleEnabled=B)},null,8,["modelValue"])]),a(h).maxExtraPeopleEnabled&&(a(h).maxCapacity>1||a(h).maxCustomCapacity>1||a(g)>1)?(u(),x("div",FT,[I(V,{label:`${a(i).limit_extra_people_set}:`,class:"am-capei-price__part-item am-w-100"},{default:L(()=>[I(vt,{modelValue:a(h).maxExtraPeople,"onUpdate:modelValue":$[19]||($[19]=B=>a(h).maxExtraPeople=B),min:0,max:a(b)-1},null,8,["modelValue","max"])]),_:1},8,["label"])])):D("",!0)])):D("",!0)]),_:1},8,["model","style"])}}};const RT={class:"am-capei-custef__heading"},qT={class:"am-capei-custef__colors"},UT=["onClick"],jT={key:0,class:"am-icon-check"},zT={setup(l){let e=Oe(),t=F("amLabels");const s=M(null);let n=M(1),i=M(["#1788FB","#4BBEC6","#FBC22D","#FA3C52","#D696B8","#689BCA","#26CC2B","#FD7E35","#E38587","#774DFB"]),o=M({color:y({get:()=>e.getters["event/getColor"],set:r=>{e.commit("event/setColor",r)}}),show:y({get:()=>e.getters["event/getShow"],set:r=>{e.commit("event/setShow",r)}})});return Ze(()=>{let r=e.getters["event/getColor"];i.value.filter(d=>d===r).length>0?n.value=1:n.value=2}),(r,c)=>{const d=yt,f=Ju,v=et;return u(),q(v,{ref_key:"customizeFormRef",ref:s,model:a(o),class:"am-capei-custef"},{default:L(()=>[m("div",RT,w(a(t).event_colors),1),I(_n,{modelValue:a(n),"onUpdate:modelValue":c[2]||(c[2]=g=>ye(n)?n.value=g:n=g)},{default:L(()=>[I(d,{class:"am-capei-custef__item"},{default:L(()=>[I(Oa,{label:1},{default:L(()=>[ie(w(a(t).event_colors_preset)+": ",1)]),_:1}),m("div",qT,[(u(!0),x(te,null,fe(a(i),g=>(u(),x("div",{key:g,class:R(["am-capei-custef__colors-item",{"am-disabled":a(n)===2}]),onClick:b=>a(e).commit("event/setColor",g)},[m("div",{class:"am-capei-custef__colors-item__inner",style:_e({backgroundColor:g})},[g===a(o).color?(u(),x("span",jT)):D("",!0)],4)],10,UT))),128))])]),_:1}),I(d,{class:"am-capei-custef__item"},{default:L(()=>[I(Oa,{label:2},{default:L(()=>[ie(w(a(t).event_colors_custom)+": ",1)]),_:1}),I(f,{modelValue:a(o).color,"onUpdate:modelValue":c[0]||(c[0]=g=>a(o).color=g),disabled:a(n)===1},null,8,["modelValue","disabled"])]),_:1}),I(d,{class:"am-capei-custef__item"},{default:L(()=>[I(gt,{modelValue:a(o).show,"onUpdate:modelValue":c[1]||(c[1]=g=>a(o).show=g),label:a(t).event_show_on_site},null,8,["modelValue","label"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])}}};const YT={class:"am-capei-waiting__header"},WT={class:"am-capei-waiting__header-text"},HT={class:"am-capei-waiting__header"},ZT={class:"am-capei-waiting__header-text"},GT={props:{pageWidth:{type:Number,default:0},waitingListUntil:{type:Object,default:null}},setup(l,{expose:e}){const t=l;let s=y(()=>tt(t.pageWidth));const n=Oe();let i=F("amLabels"),o=M(null),r=M({enabled:y({get:()=>n.getters["event/getWaitingListEnabled"],set:b=>{n.commit("event/setWaitingListEnabled",b)}}),maxCapacity:y({get:()=>n.getters["event/getWaitingListMaxCapacity"],set:b=>{n.commit("event/setWaitingListMaxCapacity",b)}}),maxExtraPeopleEnabled:y({get:()=>n.getters["event/getWaitingListMaxExtraPeopleEnabled"],set:b=>{n.commit("event/setWaitingListMaxExtraPeopleEnabled",b)}}),maxExtraPeople:y({get:()=>n.getters["event/getWaitingListMaxExtraPeople"],set:b=>{n.commit("event/setWaitingListMaxExtraPeople",b)}})}),c=y(()=>n.getters["event/getCustomTickets"]),d=y(()=>n.getters["event/getCustomPricing"]),f=y(()=>n.getters["event/getMaxCustomCapacityEnabled"]);e({waitingListFormRef:o});let v=F("amColors"),g=y(()=>({"--am-c-capei-waiting-text":v.value.colorMainText,"--am-c-capei-waiting-text-op03":Y(v.value.colorMainText,.03),"--am-c-capei-waiting-inp-bgr-op03":Y(v.value.colorInpBgr,.03),"--am-c-capei-waiting-bgr-op05":Y(v.value.colorPrimary,.05)}));return(b,T)=>{const C=yt,_=et;return u(),x("div",{class:"am-capei-waiting",style:_e(a(g))},[m("div",YT,[m("div",WT,w(a(i).events_show_waiting_list_booking_full),1),I(st,{modelValue:a(r).enabled,"onUpdate:modelValue":T[0]||(T[0]=S=>a(r).enabled=S)},null,8,["modelValue"])]),a(r).enabled?(u(),q(_,{key:0,ref_key:"waitingListFormRef",ref:o,model:a(r),"label-position":"top"},{default:L(()=>[!a(d)||a(f)?(u(),q(C,{key:0,label:`${a(i).maximum_capacity}`,class:R(["am-capei-waiting__item",a(s)])},{default:L(()=>[I(vt,{modelValue:a(r).maxCapacity,"onUpdate:modelValue":T[1]||(T[1]=S=>a(r).maxCapacity=S),min:1},null,8,["modelValue"])]),_:1},8,["label","class"])):D("",!0),a(d)?(u(!0),x(te,{key:1},fe(a(c),(S,P)=>(u(),q(C,{key:P,label:S.name,class:R(["am-capei-waiting__item",a(s)])},{default:L(()=>[I(vt,{modelValue:S.waitingListSpots,"onUpdate:modelValue":k=>S.waitingListSpots=k,min:1,disabled:a(f)},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label","class"]))),128)):D("",!0),m("div",HT,[m("div",ZT,w(a(i).limit_extra_people),1),I(st,{modelValue:a(r).maxExtraPeopleEnabled,"onUpdate:modelValue":T[2]||(T[2]=S=>a(r).maxExtraPeopleEnabled=S)},null,8,["modelValue"])]),a(r).maxExtraPeopleEnabled?(u(),q(C,{key:2,class:R(a(s))},{default:L(()=>[I(vt,{modelValue:a(r).maxExtraPeople,"onUpdate:modelValue":T[3]||(T[3]=S=>a(r).maxExtraPeople=S),min:0,disabled:!a(r).maxExtraPeopleEnabled},null,8,["modelValue","disabled"])]),_:1},8,["class"])):D("",!0)]),_:1},8,["model"])):D("",!0)],4)}}};const JT={class:"am-capei-sef__header"},XT=m("span",{class:"am-icon-options"},null,-1),QT={class:"am-capei-sef__header-text"},KT={class:"am-capei-sef__content"},e8=["innerHTML"],t8=["innerHTML"],a8={class:"am-capei-sef__header"},s8=m("span",{class:"am-icon-payments"},null,-1),l8={class:"am-capei-sef__header-text"},n8={class:"am-capei-sef__content"},i8={class:"am-capei-sef__segment"},o8={key:0,class:"am-capei-sef__heading"},r8={class:"am-capei-sef__heading-text"},c8=["innerHTML"],u8=["innerHTML"],d8={key:0,class:"am-capei-sef__heading"},m8={class:"am-capei-sef__heading-text"},p8={class:"am-capei-sef__segment"},f8={key:0,class:"am-capei-sef__heading"},g8={class:"am-capei-sef__heading-text"},h8={key:1,class:"am-capei-sef__heading"},v8=["src"],_8={key:2,class:"am-capei-sef__heading"},y8=["src"],b8={key:3,class:"am-capei-sef__heading"},k8=["src"],C8={key:4,class:"am-capei-sef__heading"},x8=["src"],w8={key:5,class:"am-capei-sef__heading"},T8=["src"],S8={class:"am-capei-sef__header"},E8=m("span",{class:"am-icon-options"},null,-1),L8={class:"am-capei-sef__header-text"},A8={key:0,class:"am-capei-sef__heading"},$8={class:"am-capei-sef__heading-text"},I8={key:1,class:"am-capei-sef__heading"},P8={class:"am-capei-sef__heading-text"},O8={key:2,class:"am-capei-sef__heading"},D8={class:"am-capei-sef__heading-text"},N8={setup(l){let e=Oe(),t=F("licence"),s=F("amLabels");const n=F("settings"),i=F("baseUrls");let o=M([{label:s.value.disabled,value:0},{label:s.value.min10,value:600},{label:s.value.min12,value:720},{label:s.value.min15,value:900},{label:s.value.min30,value:1800},{label:s.value.min45,value:2700},{label:s.value.h1,value:3600},{label:s.value.h1min30,value:5400},{label:s.value.h2,value:7200},{label:s.value.h3,value:10800},{label:s.value.h4,value:14400},{label:s.value.h6,value:21600},{label:s.value.h8,value:28800},{label:s.value.h9,value:32400},{label:s.value.h10,value:36e3},{label:s.value.h11,value:39600},{label:s.value.h12,value:43200},{label:s.value.day1,value:86400},{label:s.value.days2,value:172800},{label:s.value.days3,value:259200},{label:s.value.days4,value:345600},{label:s.value.days5,value:432e3},{label:s.value.days6,value:518400},{label:s.value.week1,value:604800},{label:s.value.weeks2,value:1209600},{label:s.value.weeks3,value:1814400},{label:s.value.weeks4,value:2419200},{label:s.value.months3,value:7884e3},{label:s.value.months6,value:15768e3}]),r=M([]),c=M(!1),d=M(0),f=M(null),v=y(()=>{if(r.value.length){let h=r.value.find(A=>A.id===n.payments.wc.productId);return typeof h<"u"?h.name:s.value.select}return""});function g(){n.payments.wc.enabled&&b({id:S.value.paymentsWcProductId},h=>{r.value=h.length?h:[]})}function b(h,A){clearTimeout(f.value),c.value=!0,d.value++,f.value=setTimeout(()=>{let O=d.value;De.get("/payment/wc/products",{params:h}).then(E=>{O>=d.value&&A(E.data.data.products.sort(($,V)=>$.name.toLowerCase()>V.name.toLowerCase()?1:-1))}).finally(()=>{c.value=!1})},500)}function T(h){h&&b({name:h},A=>{r.value=A})}let C=M("");const _=M(null);let S=M({generalMinimumTimeRequirementPriorToCanceling:y({get:()=>e.getters["event/getSettingsGeneralMinimumTimeRequirementPriorToCanceling"],set:h=>{e.commit("event/setSettingsGeneralMinimumTimeRequirementPriorToCanceling",h)}}),generalRedirectUrlAfterAppointment:y({get:()=>e.getters["event/getSettingsGeneralRedirectUrlAfterAppointment"],set:h=>{e.commit("event/setSettingsGeneralRedirectUrlAfterAppointment",h)}}),paymentsPaymentLinksEnabled:y({get:()=>e.getters["event/getSettingsPaymentsPaymentLinksEnabled"],set:h=>{e.commit("event/setSettingsPaymentsPaymentLinksEnabled",h)}}),paymentsPaymentLinksRedirectUrl:y({get:()=>e.getters["event/getSettingsPaymentsPaymentLinksRedirectUrl"],set:h=>{e.commit("event/setSettingsPaymentsPaymentLinksRedirectUrl",h)}}),paymentsOnSite:y({get:()=>e.getters["event/getSettingsPaymentsOnSite"],set:h=>{e.commit("event/setSettingsPaymentsOnSite",h)}}),paymentsWcEnabled:y({get:()=>e.getters["event/getSettingsPaymentsWcEnabled"],set:h=>{e.commit("event/setSettingsPaymentsWcEnabled",h)}}),paymentsWcProductId:y({get:()=>e.getters["event/getSettingsPaymentsWcProductId"],set:h=>{e.commit("event/setSettingsPaymentsWcProductId",h)}}),paymentsStripeEnabled:y({get:()=>e.getters["event/getSettingsPaymentsStripeEnabled"],set:h=>{e.commit("event/setSettingsPaymentsStripeEnabled",h)}}),paymentsPayPalEnabled:y({get:()=>e.getters["event/getSettingsPaymentsPayPalEnabled"],set:h=>{e.commit("event/setSettingsPaymentsPayPalEnabled",h)}}),paymentsMollieEnabled:y({get:()=>e.getters["event/getSettingsPaymentsMollieEnabled"],set:h=>{e.commit("event/setSettingsPaymentsMollieEnabled",h)}}),paymentsRazorpayEnabled:y({get:()=>e.getters["event/getSettingsPaymentsRazorpayEnabled"],set:h=>{e.commit("event/setSettingsPaymentsRazorpayEnabled",h)}}),paymentsSquareEnabled:y({get:()=>e.getters["event/getSettingsPaymentsSquareEnabled"],set:h=>{e.commit("event/setSettingsPaymentsSquareEnabled",h)}}),integrationsGoogleMeetEnabled:y({get:()=>e.getters["event/getSettingsIntegrationsGoogleMeetEnabled"],set:h=>{e.commit("event/setSettingsIntegrationsGoogleMeetEnabled",h)}}),integrationsMicrosoftTeamsEnabled:y({get:()=>e.getters["event/getSettingsIntegrationsMicrosoftTeamsEnabled"],set:h=>{e.commit("event/setSettingsIntegrationsMicrosoftTeamsEnabled",h)}}),integrationsLessonSpaceEnabled:y({get:()=>e.getters["event/getSettingsIntegrationsLessonSpaceEnabled"],set:h=>{e.commit("event/setSettingsIntegrationsLessonSpaceEnabled",h)}})});Ze(()=>{S.value.generalMinimumTimeRequirementPriorToCanceling===n.general.minimumTimeRequirementPriorToCanceling&&e.commit("event/setSettingsGeneralMinimumTimeRequirementPriorToCanceling",""),S.value.generalRedirectUrlAfterAppointment===n.general.redirectUrlAfterAppointment&&e.commit("event/setSettingsGeneralRedirectUrlAfterAppointment",""),S.value.paymentsPaymentLinksRedirectUrl===n.payments.paymentLinks.redirectUrl&&e.commit("event/setSettingsPaymentsPaymentLinksRedirectUrl",""),g()});let P=F("amColors"),k=y(()=>({"--am-c-capei-sef-primary":P.value.colorPrimary,"--am-c-capei-sef-text":P.value.colorMainText,"--am-c-capei-sef-text-op03":Y(P.value.colorMainText,.03),"--am-c-capei-sef-bgr":P.value.colorMainBgr}));return(h,A)=>{const O=vn,E=yt,$=Os,V=Ds,j=et;return u(),q(j,{ref_key:"settingsFormRef",ref:_,model:a(S),class:"am-capei-sef",style:_e(a(k))},{default:L(()=>[I(V,{modelValue:a(C),"onUpdate:modelValue":A[15]||(A[15]=B=>ye(C)?C.value=B:C=B),accordion:"",class:"am-capei-sef__collapse"},{default:L(()=>[I($,{name:"general",class:"am-capei-sef__collapse-item"},{title:L(()=>[m("div",JT,[XT,m("div",QT,w(a(s).general),1)])]),default:L(()=>[m("div",KT,[I(E,null,{label:L(()=>[ie(w(a(s).minimum_time_before_canceling)+" ",1),I(O,{effect:"dark",placement:"top"},{content:L(()=>[m("div",{innerHTML:a(s).minimum_time_before_canceling_tooltip},null,8,e8)]),default:L(()=>[I(He,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),default:L(()=>[I(We,{modelValue:a(S).generalMinimumTimeRequirementPriorToCanceling,"onUpdate:modelValue":A[0]||(A[0]=B=>a(S).generalMinimumTimeRequirementPriorToCanceling=B),placeholder:a(o).find(B=>B.value===a(n).general.minimumTimeRequirementPriorToCanceling).label,clearable:""},{default:L(()=>[(u(!0),x(te,null,fe(a(o),(B,G)=>(u(),q(Ve,{key:G,value:B.value,label:B.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),I(E,null,{label:L(()=>[ie(w(a(s).redirect_url_after_appointment)+" ",1),I(O,{effect:"dark",placement:"top"},{content:L(()=>[m("div",{innerHTML:a(s).redirect_url_after_appointment_tooltip},null,8,t8)]),default:L(()=>[I(He,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),default:L(()=>[I(ht,{modelValue:a(S).generalRedirectUrlAfterAppointment,"onUpdate:modelValue":A[1]||(A[1]=B=>a(S).generalRedirectUrlAfterAppointment=B),placeholder:a(n).general.redirectUrlAfterAppointment},null,8,["modelValue","placeholder"])]),_:1})])]),_:1}),I($,{name:"payment",class:"am-capei-sef__collapse-item"},{title:L(()=>[m("div",a8,[s8,m("div",l8,w(a(s).payments),1)])]),default:L(()=>[m("div",n8,[m("div",i8,[a(t).isStarter?D("",!0):(u(),x("div",o8,[m("div",r8,[ie(w(a(s).payment_links_enable)+" ",1),I(O,{effect:"dark",placement:"top"},{content:L(()=>[m("div",{innerHTML:a(s).payment_links_enable_tooltip},null,8,c8)]),default:L(()=>[I(He,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),I(st,{modelValue:a(S).paymentsPaymentLinksEnabled,"onUpdate:modelValue":A[2]||(A[2]=B=>a(S).paymentsPaymentLinksEnabled=B)},null,8,["modelValue"])])),a(S).paymentsPaymentLinksEnabled&&!a(t).isStarter?(u(),q(E,{key:1,label:a(s).redirect_url_after_appointment},{label:L(()=>[ie(w(a(s).redirect_url_after_appointment)+" ",1),I(O,{effect:"dark",placement:"top"},{content:L(()=>[m("div",{innerHTML:a(t).isPro||a(t).isDeveloper?a(s).redirect_url_after_app_or_package_tt:a(s).redirect_url_after_appointment_tooltip},null,8,u8)]),default:L(()=>[I(He,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),default:L(()=>[I(ht,{modelValue:a(S).paymentsPaymentLinksRedirectUrl,"onUpdate:modelValue":A[3]||(A[3]=B=>a(S).paymentsPaymentLinksRedirectUrl=B),placeholder:a(n).payments.paymentLinks.redirectUrl},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):D("",!0)]),a(n).payments.onSite?(u(),x("div",d8,[m("div",m8,w(a(s).on_site),1),I(st,{modelValue:a(S).paymentsOnSite,"onUpdate:modelValue":A[4]||(A[4]=B=>a(S).paymentsOnSite=B)},null,8,["modelValue"])])):D("",!0),m("div",p8,[a(n).payments.wc.enabled?(u(),x("div",f8,[m("div",g8,w(a(s).wc_service),1),I(st,{modelValue:a(S).paymentsWcEnabled,"onUpdate:modelValue":A[5]||(A[5]=B=>a(S).paymentsWcEnabled=B)},null,8,["modelValue"])])):D("",!0),a(S).paymentsWcEnabled?(u(),q(E,{key:1},{default:L(()=>[I(We,{modelValue:a(S).paymentsWcProductId,"onUpdate:modelValue":A[6]||(A[6]=B=>a(S).paymentsWcProductId=B),clearable:"",filterable:"",remote:"",placeholder:a(v),loading:a(c),"remote-method":T},{default:L(()=>[(u(!0),x(te,null,fe(a(r),(B,G)=>(u(),q(Ve,{key:G,value:B.id,label:B.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","loading"])]),_:1})):D("",!0)]),a(n).payments.payPal.enabled?(u(),x("div",h8,[m("img",{style:{width:"60px"},src:a(i).wpAmeliaPluginURL+"public/img/payments/paypal-light.svg",alt:"PayPal"},null,8,v8),I(st,{modelValue:a(S).paymentsPayPalEnabled,"onUpdate:modelValue":A[7]||(A[7]=B=>a(S).paymentsPayPalEnabled=B)},null,8,["modelValue"])])):D("",!0),a(n).payments.stripe.enabled?(u(),x("div",_8,[m("img",{style:{width:"60px"},src:a(i).wpAmeliaPluginURL+"public/img/payments/stripe.svg",alt:"Stripe"},null,8,y8),I(st,{modelValue:a(S).paymentsStripeEnabled,"onUpdate:modelValue":A[8]||(A[8]=B=>a(S).paymentsStripeEnabled=B)},null,8,["modelValue"])])):D("",!0),a(n).payments.mollie.enabled?(u(),x("div",b8,[m("img",{style:{width:"60px"},src:a(i).wpAmeliaPluginURL+"public/img/payments/mollie.svg",alt:"Mollie"},null,8,k8),I(st,{modelValue:a(S).paymentsMollieEnabled,"onUpdate:modelValue":A[9]||(A[9]=B=>a(S).paymentsMollieEnabled=B)},null,8,["modelValue"])])):D("",!0),a(n).payments.square.enabled?(u(),x("div",C8,[m("img",{style:{width:"60px"},src:a(i).wpAmeliaPluginURL+"public/img/payments/square.svg",alt:"Square"},null,8,x8),I(st,{modelValue:a(S).paymentsSquareEnabled,"onUpdate:modelValue":A[10]||(A[10]=B=>a(S).paymentsSquareEnabled=B)},null,8,["modelValue"])])):D("",!0),a(n).payments.razorpay.enabled?(u(),x("div",w8,[m("img",{style:{width:"60px"},src:a(i).wpAmeliaPluginURL+"public/img/payments/razorpay.svg",alt:"Razorpay"},null,8,T8),I(st,{modelValue:a(S).paymentsRazorpayEnabled,"onUpdate:modelValue":A[11]||(A[11]=B=>a(S).paymentsRazorpayEnabled=B)},null,8,["modelValue"])])):D("",!0)])]),_:1}),a(n).googleCalendar.enabled&&a(n).googleMeet.enabled||a(n).outlookCalendar.enabled&&a(n).microsoftTeams.enabled||a(n).lessonSpace.enabled?(u(),q($,{key:0,name:"integrations",class:"am-capei-sef__collapse-item"},{title:L(()=>[m("div",S8,[E8,m("div",L8,w(a(s).integrations_settings),1)])]),default:L(()=>[a(n).googleCalendar.enabled&&a(n).googleMeet.enabled?(u(),x("div",A8,[m("div",$8,w(a(s).enable_google_meet),1),I(st,{modelValue:a(S).integrationsGoogleMeetEnabled,"onUpdate:modelValue":A[12]||(A[12]=B=>a(S).integrationsGoogleMeetEnabled=B)},null,8,["modelValue"])])):D("",!0),a(n).outlookCalendar.enabled&&a(n).microsoftTeams.enabled?(u(),x("div",I8,[m("div",P8,w(a(s).enable_microsoft_teams),1),I(st,{modelValue:a(S).integrationsMicrosoftTeamsEnabled,"onUpdate:modelValue":A[13]||(A[13]=B=>a(S).integrationsMicrosoftTeamsEnabled=B)},null,8,["modelValue"])])):D("",!0),a(n).lessonSpace.enabled?(u(),x("div",O8,[m("div",D8,w(a(s).lesson_space),1),I(st,{modelValue:a(S).integrationsLessonSpaceEnabled,"onUpdate:modelValue":A[14]||(A[14]=B=>a(S).integrationsLessonSpaceEnabled=B)},null,8,["modelValue"])])):D("",!0)]),_:1})):D("",!0)]),_:1},8,["modelValue"])]),_:1},8,["model","style"])}}};const M8={class:"am-capei__footer-actions"},B8={name:"CabinetEvent"},F8=Object.assign(B8,{props:{responsiveClass:{type:String,default:""},pageWidth:{type:Number}},emits:["close","save","duplicate"],setup(l,{emit:e}){const t=l;let s=Oe(),n=F("amLabels");const i=F("settings");let o=F("licence");const r=M("details");let c=M(null),d=M(null),f=M(null),v=M(null),g=M(null),b=M(!0),T=M(!1),C=M(!1);function _(){e("duplicate",Object.assign(JSON.parse(JSON.stringify(s.getters["event/getEvent"])),{id:null,bookings:[]}))}function S(){let $=!0;c.value?.detailsFormRef.validate(V=>{V||(r.value="details",$=!1)}),$&&(d.value?.periodsFormRef.validate(V=>{V||(r.value="periods",$=!1)}),$&&(s.getters["event/getRecurringEnabled"]&&f.value?.recurringFormRef.validate(V=>{V||(r.value="recurring",$=!1)}),$&&h(V=>{V?C.value=!0:k()})))}function P($){b.value=!0,De.post("/events"+(s.getters["event/getId"]?"/"+s.getters["event/getId"]:""),Object.assign(Hw(s),{applyGlobally:$}),Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{Yw(s),A("save")}).catch(V=>{console.log(V)}).finally(()=>{b.value=!1})}function k(){g.value?(b.value=!1,C.value=!1,T.value=!0):P(!1)}function h($){let V=s.getters["event/getOrganizerId"]?s.getters["employee/getEmployee"]:null;if(V&&(V.googleCalendar||V.outlookCalendar)){b.value=!0;let j=s.getters["event/getProviders"].map(B=>new Object({id:B.id}));De.post("/events/calendar",{providers:s.getters["event/getProviders"].map(B=>B.id).indexOf(V.id)===-1?j.concat([{id:V.id}]):j,periods:Cu(s),eventIds:[s.getters["event/getId"],s.getters["event/getParentId"]],recurring:s.getters["event/getRecurring"]},Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{$(!1)}).catch(()=>{$(!0),b.value=!1})}else $(!1)}function A($){s.commit("event/setActive",!1),e($)}Ze(()=>{s.getters["event/getId"]&&s.getters["event/getRecurringUntil"]&&(g.value=at(s.getters["event/getRecurringUntil"].toISOString().split("T")[0])),s.commit("event/setActive",!0),b.value=!1});let O=F("amColors"),E=y(()=>({"--am-c-capei-text":O.value.colorMainText,"--am-c-capei-text-op10":Y(O.value.colorMainText,.1),"--am-c-capei-primary":O.value.colorPrimary,"--am-c-cust-no1":O.value.colorMainText,"--am-c-cust-no1-bgr":Y(O.value.colorMainText,.1),"--am-c-cust-no2":O.value.colorWarning,"--am-c-cust-no2-bgr":Y(O.value.colorWarning,.1),"--am-c-cust-no3":O.value.colorError,"--am-c-cust-no3-bgr":Y(O.value.colorError,.1),"--am-c-cust-link":Y(O.value.colorMainText,.5),"--am-c-cust-text":O.value.colorMainText}));return($,V)=>{const j=Qa,B=Ka;return u(),x(te,null,[a(b)?(u(),q(Zt,{key:1})):(u(),x("div",{key:0,class:R(["am-capei",a(t).responsiveClass]),style:_e(a(E))},[I(B,{modelValue:r.value,"onUpdate:modelValue":V[0]||(V[0]=G=>r.value=G),class:"am-ap__tabs"},{default:L(()=>[I(j,{label:a(n).details,name:"details"},{default:L(()=>[I(Jw,{ref_key:"eventDetailsRef",ref:c},null,512)]),_:1},8,["label"]),I(j,{label:a(n).periods,name:"periods"},{default:L(()=>[I(sT,{ref_key:"eventPeriodsRef",ref:d,"page-width":a(t).pageWidth},null,8,["page-width"])]),_:1},8,["label"]),a(o).isStarter?D("",!0):(u(),q(j,{key:0,label:a(n).recurring,name:"recurring"},{default:L(()=>[I(iT,{ref_key:"eventRecurringRef",ref:f,"page-width":a(t).pageWidth,"recurring-until":a(g)},null,8,["page-width","recurring-until"])]),_:1},8,["label"])),I(j,{label:a(n).pricing,name:"pricing"},{default:L(()=>[I(VT,{ref_key:"eventPricingRef",ref:v,"page-width":a(t).pageWidth},null,8,["page-width"])]),_:1},8,["label"]),I(j,{label:a(n).customize,name:"customize"},{default:L(()=>[I(zT)]),_:1},8,["label"]),a(i).appointments.waitingListEvents.enabled&&!a(o).isStarter&&!a(o).isBasic?(u(),q(j,{key:1,label:a(n).waiting_list,name:"waitingList"},{default:L(()=>[I(GT,{"page-width":a(t).pageWidth},null,8,["page-width"])]),_:1},8,["label"])):D("",!0),I(j,{label:a(n).settings,name:"settings"},{default:L(()=>[I(N8)]),_:1},8,["label"])]),_:1},8,["modelValue"]),m("div",{class:R(["am-capei__footer",[{"am-capei__footer_new":!a(s).getters["event/getId"]},a(t).responsiveClass]])},[a(s).getters["event/getId"]?(u(),q(ke,{key:0,class:"am-capei__footer-duplicate","icon-only":!0,icon:"duplicate",type:"plain",category:"secondary",onClick:_})):D("",!0),m("div",M8,[I(ke,{category:"secondary",size:"default",type:"plain",onClick:V[1]||(V[1]=()=>{a(e)("close")})},{default:L(()=>[ie(w(a(n).cancel),1)]),_:1}),I(ke,{size:"default",onClick:S},{default:L(()=>[ie(w(a(n).save),1)]),_:1})])],2)],6)),I(Ma,{visibility:a(T)&&a(g)!==null,title:a(n).confirm,description:a(n).confirm_save_following,"close-btn-text":a(n).save_single,"confirm-btn-text":a(n).update_following,"customized-options":{cancelBtn:{type:"plain"},confirmBtn:{type:""}},onDecline:V[2]||(V[2]=G=>P(!1)),onConfirm:V[3]||(V[3]=G=>P(!0)),onClose:V[4]||(V[4]=G=>ye(T)?T.value=!1:T=!1)},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"]),I(Ma,{visibility:a(C),title:a(n).confirm,description:a(n).confirm_save_conflict,"close-btn-text":a(n).cancel,"confirm-btn-text":a(n).confirm,"customized-options":{cancelBtn:{buttonType:"plain"},confirmBtn:{buttonType:"filled"}},onDecline:V[5]||(V[5]=G=>ye(C)?C.value=!1:C=!1),onConfirm:k,onClose:V[6]||(V[6]=G=>ye(C)?C.value=!1:C=!1)},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"])],64)}}});const V8={class:"am-cap__att"},R8={class:"am-cap-customers"},q8={class:"am-cap__cust-option"},U8={class:"am-cap__cust-option__heading"},j8={key:0,class:"am-cap__cust-option__inner"},z8={key:1,class:"am-cap__cust-option__inner"},Y8={key:0,class:"am-cap-cust__data-wrapper"},W8={key:0,class:"am-cap-cust__data"},H8=m("span",{class:"am-icon-phone"},null,-1),Z8=["href"],G8={key:1,class:"am-cap-cust__data"},J8=m("span",{class:"am-icon-email"},null,-1),X8=["href"],Q8={class:"am-cap__att-heading"},K8={props:{event:{type:Object,default:()=>{}},isNew:{type:Boolean,default:!1},pageWidth:{type:Number,required:!0}},setup(l,{expose:e}){const t=l;let s=y(()=>tt(t.pageWidth)),n=Oe(),i=F("amLabels");const o=F("settings"),r=F("shortcodeData");let c=F("amCustomize"),d=y(()=>r.value.cabinetType==="employee"?c.value.events.options.customerPhone.visibility:!0),f=y(()=>r.value.cabinetType==="employee"?c.value.events.options.customerEmail.visibility:!0),v=M(null),g=M({customerId:y({get:()=>n.getters["attendee/getCustomerId"],set:j=>n.commit("attendee/setCustomerId",j)}),status:y({get:()=>n.getters["attendee/getStatus"],set:j=>n.commit("attendee/setStatus",j)}),persons:y({get:()=>n.getters["attendee/getPersons"],set:j=>n.commit("attendee/setPersons",j)}),tickets:y({get:()=>n.getters["attendee/getTickets"],set:j=>n.commit("attendee/setTickets",j)})}),b=M({customerId:[{required:!0,message:i.value.select_customer,trigger:["submit","change"]}]}),T=y(()=>t.event.settings?JSON.parse(t.event.settings):null),C=M(wu().filter(j=>j.value!=="canceled"&&(!o.appointments.waitingListEvents.enabled||(T.value?"waitingList"in T.value&&!T.value.waitingList.enabled:!0)?j.value!=="waiting":!0)&&j.value!=="no-show")),_=y(()=>n.getters["customerInfo/getLoading"]),S=y(()=>n.getters["customerInfo/getCustomers"]),P=y(()=>g.value.customerId?S.value.find(j=>j.id===g.value.customerId):null);function k(j){n.dispatch("customerInfo/resetCustomer"),n.commit("customerInfo/setLoading",!0),h.value=!0,De.get("/users/customers/"+j,Object.assign({params:{source:"cabinet-provider"}},Ue(n))).then(B=>{n.commit("customerInfo/setCustomer",_u(n,B.data.data.user))}).catch(B=>{console.log(B)}).finally(()=>{n.commit("customerInfo/setLoading",!1)})}let h=M(!1);function A(){n.dispatch("customerInfo/resetCustomer"),h.value=!0}function O(j){n.commit("customerInfo/setCustomers",[j]),n.commit("attendee/setCustomerId",j.id)}Ze(()=>{n.getters["attendee/getId"]||n.commit("customerInfo/setCustomers",n.getters["auth/getPreloadedCustomers"])}),e({detailsFormRef:v});function E(j){if(j){if(j===1)return{class:"am-no-show-1",icon:"no-show-1"};if(j===2)return{class:"am-no-show-2",icon:"no-show-2"};if(j>2)return{class:"am-no-show-3",icon:"no-show-3"}}return{class:"",icon:""}}let $=F("amColors"),V=y(()=>({"--am-c-cust-no1":$.value.colorMainText,"--am-c-cust-no1-bgr":Y($.value.colorMainText,.1),"--am-c-cust-no2":$.value.colorWarning,"--am-c-cust-no2-bgr":Y($.value.colorWarning,.1),"--am-c-cust-no3":$.value.colorError,"--am-c-cust-no3-bgr":Y($.value.colorError,.1),"--am-c-cust-text":$.value.colorMainText,"--am-c-cust-link":Y($.value.colorMainText,.5)}));return(j,B)=>{const G=yt,H=et;return u(),x("div",V8,[I(H,{ref_key:"detailsFormRef",ref:v,model:a(g),rules:a(b),class:"am-cap__att-form"},{default:L(()=>[m("div",R8,[t.isNew?(u(),q(G,{key:0,prop:"customerId",class:"am-cap__att-form__item am-w-100"},{default:L(()=>[I(We,{modelValue:a(g).customerId,"onUpdate:modelValue":B[0]||(B[0]=X=>a(g).customerId=X),filterable:"",clearable:"","collapse-tags":"","collapse-tags-tooltip":"",remote:"","prefix-icon":"search","prefix-icon-color":"var(--am-c-inp-text)","popper-class":"am-cap-cust__popper",placeholder:a(i).event_attendees_search,"remote-method":X=>{a(fl)(a(n),X)},loading:a(_),onFocus:B[1]||(B[1]=X=>a(Oo)(a(n)))},{default:L(()=>[(u(!0),x(te,null,fe(a(S),X=>(u(),q(Ve,{key:X.id,value:X.id,label:X.email?X.email:X.firstName+" "+X.lastName},{default:L(()=>[m("div",q8,[m("div",U8,w(X.firstName+" "+X.lastName),1),X.email&&a(f)?(u(),x("div",j8,w(X.email),1)):D("",!0),X.phone&&a(d)?(u(),x("div",z8,w(X.phone),1)):D("",!0)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading"])]),_:1})):D("",!0),!a(n).getters["attendee/getId"]&&a(o).roles.allowWriteCustomers?(u(),q(ke,{key:1,class:R(["am-capai-cuf__heading-add",t.responsiveClass]),size:"default",disabled:!!a(g).customerId,prefix:"plus",icon:"plus","icon-only":t.pageWidth<=420,onClick:A},{default:L(()=>[ie(w(a(i).new_customer),1)]),_:1},8,["class","disabled","icon-only"])):D("",!0)]),a(P)?(u(),x("div",{key:0,class:R(["am-cap-attendee",a(s)])},[m("div",{class:R(["am-cap-cust",a(s)]),style:_e(a(V))},[m("div",{class:R(["am-cap-cust__name",E(0).class])},[E(0).icon?(u(),x("span",{key:0,class:R(`am-icon-${E(0).icon}`)},null,2)):D("",!0),ie(" "+w(a(P).firstName+" "+a(P).lastName),1)],2),a(P).phone&&a(d)||a(P).email&&a(f)?(u(),x("div",Y8,[a(P).phone&&a(d)?(u(),x("div",W8,[H8,m("a",{href:`tel:${a(P).phone}`},w(a(P).phone),9,Z8)])):D("",!0),a(P).email&&a(f)?(u(),x("div",G8,[J8,m("a",{href:`mailto:${a(P).email}`},w(a(P).email),9,X8)])):D("",!0)])):D("",!0)],6),I(G,{prop:"status",class:R(["am-cap__att-form__item",a(s)])},{default:L(()=>[I(We,{modelValue:a(g).status,"onUpdate:modelValue":B[2]||(B[2]=X=>a(g).status=X),disabled:!t.isNew,placeholder:a(i).select,"prefix-icon":a(C).find(X=>X.value===a(g).status).icon,"prefix-icon-color":a(C).find(X=>X.value===a(g).status).color,"popper-class":"am-capei-att__popper"},{default:L(()=>[(u(!0),x(te,null,fe(a(C),X=>(u(),q(Ve,{key:X.value,value:X.value,label:X.label},{default:L(()=>[m("span",{class:R(`am-icon-${X.icon}`),style:_e({color:X.color})},null,6),ie(" "+w(X.label),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","disabled","placeholder","prefix-icon","prefix-icon-color"])]),_:1},8,["class"]),a(o).roles.allowWriteCustomers?(u(),q(ka,{key:0,"have-delete":!1,"reference-class":a(s),onEdit:B[3]||(B[3]=X=>k(a(P).id))},null,8,["reference-class"])):D("",!0)],2)):D("",!0),a(P)?(u(),x(te,{key:1},[t.event.customPricing?(u(),x(te,{key:1},[m("div",Q8,w(`${a(i).event_book_tickets}:`),1),(u(!0),x(te,null,fe(a(g).tickets,(X,Q)=>(u(),q(G,{key:Q,label:t.event.customTickets.find(ee=>ee.id===X.eventTicketId).name,class:R(["am-cap__att-form__item",a(s)])},{default:L(()=>[I(vt,{modelValue:X.persons,"onUpdate:modelValue":ee=>X.persons=ee,min:0,disabled:!a(o).roles.allowWriteEvents},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label","class"]))),128))],64)):(u(),q(G,{key:0,prop:"persons",label:`${a(i).event_book_persons}:`,class:R(["am-cap__att-form__item",a(s)])},{default:L(()=>[I(vt,{modelValue:a(g).persons,"onUpdate:modelValue":B[4]||(B[4]=X=>a(g).persons=X),min:1,disabled:!a(o).roles.allowWriteEvents},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]))],64)):D("",!0),a(P)?D("",!0):(u(),q(Na,{key:2,heading:a(i).no_attendees_yet},null,8,["heading"]))]),_:1},8,["model","rules"]),a(h)?(u(),q(bu,{key:0,visibility:a(h),"responsive-class":t.responsiveClass,"onUpdate:visibility":B[5]||(B[5]=X=>ye(h)?h.value=X:h=X),onAddedCustomer:O},null,8,["visibility","responsive-class"])):D("",!0)])}}};const eS={props:{responsiveClass:{type:String,default:""}},setup(l,{expose:e}){const t=l;let s=Oe();const n=F("settings");let i=F("amLabels"),o=M(null),r=M({}),c=M({}),d=M({}),f=y(()=>s.getters["attendee/getCustomFields"]);function v(T,C){let _=s.getters["attendee/getId"];(T.type!=="file"||_)&&(r.value[C]=y({get:()=>{let S=s.getters["attendee/getCustomFields"][C]?.value;return S||""},set:S=>s.commit("attendee/setCustomFields",{id:C,value:S})}))}function g(T,C){let _=s.getters["attendee/getId"];(T.type!=="file"||_)&&(d.value[C]={template:Ye[T.type],props:{id:C,itemName:C.toString(),label:T.label,options:T.options,class:`am-capei-att-cf__item am-cf-width-${T.width}`}}),T.type==="text-area"&&(d.value[C].props={...d.value[C].props,itemType:"textarea"}),T.type==="file"&&_&&(d.value[C].props={...d.value[C].props,btnLabel:i.value.upload_file_here,isUpload:!1,bookingId:_}),T.type==="datepicker"&&(d.value[C].props={...d.value[C].props,weekStartsFromDay:n.wordpress.startOfWeek})}function b(T){let C=s.getters["attendee/getId"];(T.type!=="file"||C)&&(c.value[T.id]=[{message:i.value.required_field,required:T.required,trigger:["submit","change"]}])}return Ze(()=>{r.value={},d.value={};for(let T in f.value)v(f.value[T],T),g(f.value[T],T),b(f.value[T])}),e({customFieldsFormRef:o}),(T,C)=>{const _=et;return u(),q(_,{ref_key:"customFieldsFormRef",ref:o,model:a(r),rules:a(c),"label-position":"top",class:R(["am-capei-att-cf__form",t.responsiveClass])},{default:L(()=>[(u(!0),x(te,null,fe(Object.keys(a(f)),S=>(u(),x(te,{key:S},[S in a(r)?(u(),q(Tt(a(d)[S].template),Dt({key:0,modelValue:a(r)[S],"onUpdate:modelValue":P=>a(r)[S]=P},a(d)[S].props),null,16,["modelValue","onUpdate:modelValue"])):D("",!0)],64))),128))]),_:1},8,["model","rules","class"])}}};const tS={class:"am-capai-pay__row-label"},aS={class:"am-capai-pay__row-value"},sS={class:"am-capai-pay__row-label"},lS={class:"am-capai-pay__row-value"},nS={class:"am-capai-pay__row-label"},iS={class:"am-capai-pay__row-value"},oS={key:0,class:"am-divider"},rS={class:"am-capai-pay__row-label"},cS={class:"am-capai-pay__row-label"},uS={class:"am-capai-pay__row-label"},dS={class:"am-capai-pay__row-label"},mS={class:"am-capai-pay__row-label"},pS={class:"am-capai-pay__row-label"},fS={class:"am-capai-pay__row-label"},gS={props:{event:{type:Object,default:()=>{}},pageWidth:{type:Number,default:0}},setup(l){const e=l;let t=Oe(),s=F("amLabels"),n=y(()=>t.getters["attendee/getPayments"]),i=y(()=>Object.assign(Tu(t),{deposit:n.value[0].amount,paid:n.value.reduce((c,d)=>c+d.amount,0)})),o=F("amColors"),r=y(()=>({"--am-c-pay-text-op03":Y(o.value.colorMainText,.03)}));return(c,d)=>(u(),x("div",{class:R(["am-capai-pay__content",e.responsiveClass]),style:_e(a(r))},[(u(!0),x(te,null,fe(a(n),(f,v)=>(u(),x(te,{key:v},[m("div",{class:R(["am-capai-pay__row",e.responsiveClass])},[m("div",tS,w(a(s).date),1),m("div",aS,w(a(dt)(f.dateTime.split(" ")[0])),1)],2),m("div",{class:R(["am-capai-pay__row",e.responsiveClass])},[m("div",sS,w(a(s).payment_method),1),m("div",lS,w(a(ku)(f)),1)],2),m("div",{class:R(["am-capai-pay__row",e.responsiveClass])},[m("div",nS,w(a(s).status),1),m("div",iS,[m("span",{class:R(a(Ts)(f.status,a(o)).icon),style:_e({color:a(Ts)(f.status,a(o)).color})},null,6),ie(" "+w(a(eo)(f.status)),1)])],2)],64))),128)),e.pageWidth>480?(u(),x("div",oS)):D("",!0),m("div",{class:R(["am-capai-pay__row",e.responsiveClass])},[m("div",rS,w(a(s).price),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":e.pageWidth>480}])},w(a(lt)(a(i).price)),3)],2),m("div",{class:R(["am-capai-pay__row",e.responsiveClass])},[m("div",cS,w(a(s).discount_amount),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":e.pageWidth>480}])},w(a(lt)(a(i).discount)),3)],2),m("div",{class:R(["am-capai-pay__row",e.responsiveClass])},[m("div",uS,w(a(s).tax),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":e.pageWidth>480}])},w(a(lt)(a(i).tax)),3)],2),m("div",{class:R(["am-capai-pay__row",e.responsiveClass])},[m("div",dS,w(a(s).paid_deposit),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":e.pageWidth>480}])},w(a(lt)(a(i).deposit)),3)],2),m("div",{class:R(["am-capai-pay__row",e.responsiveClass])},[m("div",mS,w(a(s).paid_remaining_amount),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":e.pageWidth>480}])},w(a(lt)(a(i).paid-a(i).deposit)),3)],2),m("div",{class:R(["am-capai-pay__row",e.responsiveClass])},[m("div",pS,w(a(s).due),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":e.pageWidth>480}])},w(a(lt)(a(i).paid-(a(i).price-a(i).discount+a(i).tax))),3)],2),m("div",{class:R(["am-capai-pay__row",e.responsiveClass])},[m("div",fS,w(a(s).total),1),m("div",{class:R(["am-capai-pay__row-value",{"am-pl-34":e.pageWidth>480}])},w(a(lt)(a(i).price-a(i).discount+a(i).tax)),3)],2)],6))}};const hS=m("span",{class:"am-icon-clearable"},null,-1),vS={class:"am-capei-atti__footer"},_S={name:"CabinetEventAttendee"},Su=Object.assign(_S,{props:{title:{type:String,default:""},visibility:{type:Boolean,default:!1},isNew:{type:Boolean,default:!1},event:{type:Object,default:()=>{}},pageWidth:{type:Number,default:0}},emits:["close","save"],setup(l,{emit:e}){const t=l;let s=Oe(),n=F("amLabels");const i=F("settings");let o=M(!1),r=y(()=>s.getters["attendee/getCustomFields"]);const c=M("details");let d=M(null),f=M(null),v=M(!1),g=M(null),b=M("");function T(){v.value=!1,b.value=""}let C=M(!1),_=M();Be("formWrapper",_);function S(){let $=Tu(s);return $.price-$.discount+$.tax}function P(){let $=!0;if(f.value?.customFieldsFormRef.validate(B=>{B||(c.value="customFields",$=!1)}),d.value?.detailsFormRef.validate(B=>{B||(c.value="details",$=!1)}),!$)return;let V=i.payments.paymentLinks&&i.payments.paymentLinks.enabled,j=t.event.settings?JSON.parse(t.event.settings):null;j&&"payments"in j&&"paymentLinks"in j.payments&&(V=j.payments.paymentLinks.enabled),V&&s.getters["attendee/getId"]&&S()>h.value?C.value=!0:k(!1)}function k($){o.value=!0,De.post(s.getters["attendee/getId"]?"/events/bookings/"+s.getters["attendee/getId"]:"/bookings",Object.assign(xu(s),{runInstantPostBookingActions:!0,createPaymentLinks:$}),Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{e("save"),s.commit("attendee/setActive",!1)}).catch(V=>{console.log(V)}).finally(()=>{o.value=!1})}let h=M(0);function A(){s.commit("attendee/setActive",!1),e("close")}Ze(()=>{s.commit("attendee/setActive",!0),s.getters["attendee/getId"]&&(h.value=S())});let O=F("amColors"),E=y(()=>({"--am-c-capai-text":O.value.colorMainText,"--am-c-capai-text-op10":Y(O.value.colorMainText,.1),"--am-c-capai-primary":O.value.colorPrimary,"--am-c-cust-no1":O.value.colorMainText,"--am-c-cust-no1-bgr":Y(O.value.colorMainText,.1),"--am-c-cust-no2":O.value.colorWarning,"--am-c-cust-no2-bgr":Y(O.value.colorWarning,.1),"--am-c-cust-no3":O.value.colorError,"--am-c-cust-no3-bgr":Y(O.value.colorError,.1),"--am-c-cust-link":Y(O.value.colorMainText,.5),"--am-c-cust-text":O.value.colorMainText}));return($,V)=>{const j=Qa,B=Ka;return a(o)?(u(),q(Zt,{key:1})):(u(),x("div",{key:0,class:R(["am-capei-atti",[{"am-no-border":!0},a(t).responsiveClass]]),style:_e(a(E))},[a(v)?(u(),q(wt,{key:0,ref_key:"alertContainer",ref:g,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:T,onTriggerClose:T},{title:L(()=>[hS,ie(" "+w(a(b)),1)]),_:1},512)):D("",!0),I(B,{modelValue:c.value,"onUpdate:modelValue":V[0]||(V[0]=G=>c.value=G)},{default:L(()=>[I(j,{label:a(n).details,name:"details"},{default:L(()=>[I(a(K8),{ref_key:"attendeeDetailsRef",ref:d,event:a(t).event,"is-new":a(t).isNew,"page-width":a(t).pageWidth},null,8,["event","is-new","page-width"])]),_:1},8,["label"]),Object.keys(a(r)).length?(u(),q(j,{key:0,label:a(n).custom_fields,name:"customFields"},{default:L(()=>[I(a(eS),{ref_key:"attendeeCustomFieldsRef",ref:f,event:a(t).event},null,8,["event"])]),_:1},8,["label"])):D("",!0),a(s).getters["attendee/getId"]?(u(),q(j,{key:1,label:a(n).payment,name:"payment"},{default:L(()=>[I(a(gS),{event:a(t).event,"page-width":a(t).pageWidth},null,8,["event","page-width"])]),_:1},8,["label"])):D("",!0)]),_:1},8,["modelValue"]),m("div",vS,[I(ke,{category:"secondary",size:"default",type:"plain",onClick:A},{default:L(()=>[ie(w(a(i).roles.allowWriteEvents?a(n).cancel:a(n).close),1)]),_:1}),a(i).roles.allowWriteEvents?(u(),q(ke,{key:0,size:"default",onClick:P},{default:L(()=>[ie(w(a(n).save),1)]),_:1})):D("",!0)]),I(Ma,{visibility:a(C),title:a(n).confirm,description:a(n).price_changed_message,"close-btn-text":a(n).no,"confirm-btn-text":a(n).yes,"customized-options":{cancelBtn:{buttonType:"plain"},confirmBtn:{buttonType:"filled"}},onDecline:V[1]||(V[1]=G=>k(!1)),onConfirm:V[2]||(V[2]=G=>k(!0)),onClose:V[3]||(V[3]=G=>ye(C)?C.value=!1:C=!1)},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"])],6))}}});const yS=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),bS={key:1,class:"am-capei-att__top"},kS={class:"am-capei-att__top-heading"},CS={class:"am-capei-att__top-text"},xS={key:0,class:"am-capei-att__top-places"},wS={class:"am-cap__cust-option"},TS={class:"am-cap__cust-option__heading"},SS={key:0,class:"am-cap__cust-option__inner"},ES={key:1,class:"am-cap__cust-option__inner"},LS={key:0,class:"am-capei-att__card-wrapper"},AS={key:0,class:"am-capei-customer__data-wrapper"},$S={key:0,class:"am-capei-customer__data"},IS=m("span",{class:"am-icon-phone"},null,-1),PS=["href"],OS={key:1,class:"am-capei-customer__data"},DS=m("span",{class:"am-icon-email"},null,-1),NS=["href"],MS={key:0,class:"am-capei-att__card-tickets"},BS={class:"am-capei-att__card-label"},FS={class:"am-capei-att__card-tickets__inner"},VS={key:1,class:"am-capei-att__card-persons"},RS={class:"am-capei-att__card-label"},qS={class:"am-capei-att__card-person"},US={key:0,class:"am-capei-att__card-wrapper"},jS={key:0,class:"am-capei-customer__data-wrapper"},zS={key:0,class:"am-capei-customer__data"},YS=m("span",{class:"am-icon-phone"},null,-1),WS=["href"],HS={key:1,class:"am-capei-customer__data"},ZS=m("span",{class:"am-icon-email"},null,-1),GS=["href"],JS={key:0,class:"am-capei-att__card-tickets"},XS={class:"am-capei-att__card-label"},QS={class:"am-capei-att__card-tickets__inner"},KS={key:1,class:"am-capei-att__card-persons"},eE={class:"am-capei-att__card-label"},tE={class:"am-capei-att__card-person"},aE={name:"CabinetEventAttendees"},sE=Object.assign(aE,{props:{responsiveClass:{type:String,default:""},pageWidth:{type:Number},event:{type:Object,default:()=>{}}},emits:["close","openAttendee"],setup(l,{emit:e}){const t=l;let s=Oe(),n=F("amLabels");const i=F("settings"),o=F("shortcodeData");let r=F("amCustomize"),c=y(()=>o.value.cabinetType==="employee"?r.value.events.options.customerPhone.visibility:!0),d=y(()=>o.value.cabinetType==="employee"?r.value.events.options.customerEmail.visibility:!0),f=M(null),v=M(!1),g=M("success"),b=M("");function T(){v.value=!1,s.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}let C=M(!1),_=M(!1),S=M(!1),P=M([]),k=M(0),h=M(1),A=M(!1),O=M([]),E=M(0),$=M(1),V=y(()=>t.event.settings?JSON.parse(t.event.settings):null);const{noShowData:j}=F("noShowData");let B=M(!1),G=M(null),H=M(!1);function X(){G.value=null,B.value=!1}function Q(Se,Me){G.value=Se,H.value=Me,B.value=!0}let ee=M(null);function le(){s.commit("attendee/setActive",!1),v.value=!0,b.value=n.value.event_attendee_saved,ee.value&&f.value&&setTimeout(function(){ft(ee.value,f.value.$el,0,300)},500),J(Ie.value==="approved"?["approved","canceled"]:["waiting"]),W()}function W(){C.value=!1,_.value=!1,e("openAttendee",!1)}function se(){s.commit("attendee/setAttendee",As(s,s.getters["attendee/getDefaultAttendee"],t.event)),C.value=!0,e("openAttendee",!0)}function ge(Se){let Me=s.getters["customerInfo/getCustomers"],Le=s.getters["customerInfo/getCustomersIds"];Me.filter(Xe=>Xe.id===Se.customer.id).length===0&&(Me.push(Se.customer),s.commit("customerInfo/setCustomers",Me)),Le.indexOf(Se.customer.id)===-1&&(Le.push(Se.customer.id),s.commit("customerInfo/setCustomersIds",Le)),s.commit("attendee/setAttendee",As(s,Se,t.event)),_.value=!0,C.value=!0,e("openAttendee",!0)}const Ie=M("approved");function ue(){switch(Ie.value){case"approved":h.value=1;break;case"waiting":$.value=1;break}J(Ie.value==="approved"?["approved","canceled"]:["waiting"])}let ae=M(null),me=y(()=>s.getters["customerInfo/getLoading"]),z=y(()=>s.getters["customerInfo/getCustomers"]);function J(Se,Me=1){Se[0]==="approved"?S.value=!0:A.value=!0,De.get("/bookings/events",Object.assign(Ue(s),{params:_l({source:"cabinet-provider",statuses:Se,page:Me,limit:parseInt(i.general.itemsPerPageBackEnd),events:[t.event.id],customers:ae.value?[ae.value]:[]})})).then(Le=>{Se[0]==="approved"?(he.value=Le.data.data.attendeeCount,Ae.value=Le.data.data.maxCapacity,P.value=Le.data.data.bookings.filter(Xe=>Xe.status==="approved"||Xe.status==="canceled").reduce((Xe,ce)=>(Xe.push(As(s,zr(ce,s.getters["attendee/getAttendee"]),t.event)),Xe),[]),k.value=Le.data.data.filteredCount):(he.value=Le.data.data.waitingCount,Ae.value=Le.data.data.waitingCapacity,O.value=Le.data.data.bookings.filter(Xe=>Xe.status==="waiting").reduce((Xe,ce)=>(Xe.push(zr(ce)),Xe),[]),E.value=Le.data.data.filteredCount)}).catch(Le=>{console.log(Le)}).finally(()=>{S.value=!1,A.value=!1})}function Z(Se,Me){De.post("/events/bookings/"+Se,{status:Me,bookings:[{status:Me}]},Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{}).catch(Le=>{console.log(Le)}).finally(()=>{})}function de(Se){let Me=Ie.value==="approved"?["approved","canceled"]:["waiting"];Me[0]==="approved"?h.value=Se:$.value=Se,J(Me,Se)}function K(){B.value=!1,H.value?A.value=!0:S.value=!0,De.post("/events/bookings/delete/"+G.value.id,xu(s),Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{de(h.value)}).catch(()=>{A.value=!1,S.value=!1})}let oe=M(wu().filter(Se=>(!i.appointments.waitingListEvents.enabled||(V.value?"waitingList"in V.value&&!V.value.waitingList.enabled:!0)?Se.value!=="waiting":!0)&&(i.roles.enableNoShowTag?!0:Se.value!=="no-show"))),he=M(0),Ae=M(0),Te=y(()=>`${he.value}/${Ae.value}`),je=y(()=>he.value===1?n.value.attendee:n.value.attendees);Ze(()=>{J(["approved","canceled"]),s.commit("customerInfo/setCustomers",s.getters["auth/getPreloadedCustomers"])});let be=F("amColors"),Ce=y(()=>({"--am-c-capei-att-primary":be.value.colorPrimary,"--am-c-capei-att-text":be.value.colorMainText,"--am-c-capei-att-text-op90":Y(be.value.colorMainText,.9),"--am-c-capei-att-text-op10":Y(be.value.colorMainText,.1)}));return(Se,Me)=>{const Le=Qa,Xe=Ka;return u(),x("div",{ref_key:"attendeesContainer",ref:ee,class:"am-capei-att",style:_e(a(Ce))},[a(v)?(u(),q(wt,{key:0,ref_key:"alertContainer",ref:f,type:a(g),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:T,onTriggerClose:T},{title:L(()=>[yS,ie(" "+w(a(b)),1)]),_:1},8,["type"])):D("",!0),a(C)?D("",!0):(u(),x("div",bS,[m("div",kS,[m("div",CS,w(a(t).event.name),1),a(Ae)?(u(),x("div",xS,w(a(Te))+" "+w(a(je)),1)):D("",!0)]),I(ke,{category:"secondary",type:"plain",size:"small",class:"am-capei-att__back",onClick:Me[0]||(Me[0]=ce=>a(e)("close"))},{default:L(()=>[ie(w(a(n).back),1)]),_:1})])),a(C)?D("",!0):(u(),x("div",{key:2,class:R(["am-capei-att__header",a(t).responsiveClass])},[I(We,{modelValue:a(ae),"onUpdate:modelValue":Me[1]||(Me[1]=ce=>ye(ae)?ae.value=ce:ae=ce),filterable:"",clearable:"","collapse-tags":"","collapse-tags-tooltip":"",remote:"","prefix-icon":"search","prefix-icon-color":"var(--am-c-capei-att-text)","popper-class":"am-cap-cust__popper",placeholder:a(n).event_attendees_search,"remote-method":ce=>{a(fl)(a(s),ce)},loading:a(me),onFocus:Me[2]||(Me[2]=ce=>a(Oo)(a(s))),onChange:Me[3]||(Me[3]=ce=>J(Ie.value==="approved"?["approved","canceled"]:["waiting"],1))},{default:L(()=>[(u(!0),x(te,null,fe(a(z),ce=>(u(),q(Ve,{key:ce.id,value:ce.id,label:`${ce.firstName} ${ce.lastName}`},{default:L(()=>[m("div",wS,[m("div",TS,w(ce.firstName+" "+ce.lastName),1),a(d)?(u(),x("div",SS,w(ce.email),1)):D("",!0),a(c)?(u(),x("div",ES,w(ce.phone),1)):D("",!0)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading"]),a(i).roles.allowWriteEvents?(u(),q(ke,{key:0,prefix:"plus",icon:"plus","icon-only":a(t).pageWidth<540,onClick:se},{default:L(()=>[ie(w(a(n).event_add_attendee),1)]),_:1},8,["icon-only"])):D("",!0)],2)),a(C)?D("",!0):(u(),q(Xe,{key:3,modelValue:Ie.value,"onUpdate:modelValue":Me[4]||(Me[4]=ce=>Ie.value=ce),onTabClick:ue},{default:L(()=>[I(Le,{label:a(n).attendees,name:"approved"},{default:L(()=>[a(S)?(u(),q(Zt,{key:1})):(u(),x("div",LS,[a(P).length?(u(),x(te,{key:0},[(u(!0),x(te,null,fe(a(P),(ce,Fe)=>(u(),x("div",{key:Fe,class:R(["am-capei-att__card",a(t).responsiveClass])},[m("div",{class:R(["am-capei-att__card-inner",a(t).responsiveClass])},[m("div",{class:R(["am-capei-att__info",a(t).responsiveClass])},[m("div",{class:R(["am-capei-customer__name",a(j)(0).class])},[a(j)(0).icon?(u(),x("span",{key:0,class:R(`am-icon-${a(j)(0).icon}`)},null,2)):D("",!0),ie(" "+w(ce.customer.firstName+" "+ce.customer.lastName),1)],2),ce.customer.phone&&a(c)||ce.customer.email&&a(d)?(u(),x("div",AS,[ce.customer.phone&&a(c)?(u(),x("div",$S,[IS,m("a",{href:`tel:${ce.customer.phone}`},w(ce.customer.phone),9,PS)])):D("",!0),ce.customer.email&&a(d)?(u(),x("div",OS,[DS,m("a",{href:`mailto:${ce.customer.email}`},w(ce.customer.email),9,NS)])):D("",!0)])):D("",!0)],2),I(We,{modelValue:ce.status,"onUpdate:modelValue":ve=>ce.status=ve,placeholder:a(n).select,disabled:!a(i).roles.allowWriteEvents,"prefix-icon":a(oe).find(ve=>ve.value===ce.status).icon,"prefix-icon-color":a(oe).find(ve=>ve.value===ce.status).color,"popper-class":"am-capei-att__popper","parent-class":a(t).responsiveClass,onChange:ve=>{Z(ce.id,ve)}},{default:L(()=>[(u(!0),x(te,null,fe(a(oe),ve=>(u(),q(Ve,{key:ve.value,value:ve.value,label:ve.label},{default:L(()=>[m("span",{class:R(`am-icon-${ve.icon}`),style:_e({color:ve.color})},null,6),ie(" "+w(ve.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled","prefix-icon","prefix-icon-color","parent-class","onChange"])],2),ce.ticketsData.length?(u(),x("div",MS,[m("div",BS,w(a(n).event_book_tickets)+": ",1),m("div",FS,[(u(!0),x(te,null,fe(ce.ticketsData,(ve,Re)=>(u(),x("div",{key:Re,class:"am-capei-att__card-ticket"},w(ve.persons)+" x "+w(a(t).event.customTickets.find(Pe=>Pe.id===ve.eventTicketId).name),1))),128))])])):(u(),x("div",VS,[m("div",RS,w(a(n).event_book_persons)+": ",1),m("div",qS,w(ce.persons),1)])),a(i).roles.allowWriteEvents?(u(),q(ka,{key:2,index:Fe,"reference-class":a(t).responsiveClass,onEdit:ve=>ge(ce),onRemove:ve=>Q(ce,!1)},null,8,["index","reference-class","onEdit","onRemove"])):D("",!0)],2))),128)),a(k)>a(i).general.itemsPerPageBackEnd?(u(),q(sn,{key:0,"page-size":a(i).general.itemsPerPageBackEnd,"pager-count":5,layout:"prev, pager, next",total:a(k),"current-page":a(h),onCurrentChange:de},null,8,["page-size","total","current-page"])):D("",!0)],64)):(u(),q(Na,{key:1,heading:a(n).no_attendees_yet},null,8,["heading"]))]))]),_:1},8,["label"]),a(i).appointments.waitingListEvents.enabled&&a(V)!==null&&"waitingList"in a(V)&&a(V).waitingList.enabled?(u(),q(Le,{key:0,label:a(n).waiting_list,name:"waiting"},{default:L(()=>[a(A)?(u(),q(Zt,{key:1})):(u(),x("div",US,[a(O).length?(u(),x(te,{key:0},[(u(!0),x(te,null,fe(a(O),(ce,Fe)=>(u(),x("div",{key:Fe,class:"am-capei-att__card"},[m("div",{class:R(["am-capei-att__card-inner",a(t).responsiveClass])},[m("div",{class:R(["am-capei-att__info",a(t).responsiveClass])},[m("div",{class:R(["am-capei-customer__name",a(j)(0).class])},[a(j)(0).icon?(u(),x("span",{key:0,class:R(`am-icon-${a(j)(0).icon}`)},null,2)):D("",!0),ie(" "+w(ce.customer.firstName+" "+ce.customer.lastName),1)],2),ce.customer.phone&&a(c)||ce.customer.email&&a(d)?(u(),x("div",jS,[ce.customer.phone&&a(c)?(u(),x("div",zS,[YS,m("a",{href:`tel:${ce.customer.phone}`},w(ce.customer.phone),9,WS)])):D("",!0),ce.customer.email&&a(d)?(u(),x("div",HS,[ZS,m("a",{href:`mailto:${ce.customer.email}`},w(ce.customer.email),9,GS)])):D("",!0)])):D("",!0)],2),I(We,{modelValue:ce.status,"onUpdate:modelValue":ve=>ce.status=ve,placeholder:a(n).select,disabled:!a(i).roles.allowWriteEvents,"prefix-icon":a(oe).find(ve=>ve.value===ce.status).icon,"prefix-icon-color":a(oe).find(ve=>ve.value===ce.status).color,"popper-class":"am-capei-att__popper",onChange:ve=>{Z(ce.id,ve)}},{default:L(()=>[(u(!0),x(te,null,fe(a(oe),ve=>(u(),q(Ve,{key:ve.value,value:ve.value,label:ve.label},{default:L(()=>[m("span",{class:R(`am-icon-${ve.icon}`),style:_e({color:ve.color})},null,6),ie(" "+w(ve.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled","prefix-icon","prefix-icon-color","onChange"])],2),Object.keys(ce.ticketsData).length?(u(),x("div",JS,[m("div",XS,w(a(n).event_book_tickets)+": ",1),m("div",QS,[(u(!0),x(te,null,fe(ce.ticketsData,(ve,Re)=>(u(),x("div",{key:Re,class:"am-capei-att__card-ticket"},w(ve.persons)+" x "+w(a(t).event.customTickets.find(Pe=>Pe.id===ve.eventTicketId).name),1))),128))])])):(u(),x("div",KS,[m("div",eE,w(a(n).event_book_persons)+": ",1),m("div",tE,w(ce.persons),1)])),a(i).roles.allowWriteEvents?(u(),q(ka,{key:2,index:Fe,"reference-class":a(t).responsiveClass,onEdit:ve=>ge(ce),onRemove:ve=>Q(ce,!0)},null,8,["index","reference-class","onEdit","onRemove"])):D("",!0)]))),128)),a(E)>a(i).general.itemsPerPageBackEnd?(u(),q(sn,{key:0,"page-size":a(i).general.itemsPerPageBackEnd,"pager-count":5,layout:"prev, pager, next",total:a(E),"current-page":a($),onCurrentChange:de},null,8,["page-size","total","current-page"])):D("",!0)],64)):(u(),q(Na,{key:1,heading:a(n).no_attendees_yet},null,8,["heading"]))]))]),_:1},8,["label"])):D("",!0)]),_:1},8,["modelValue"])),I(Ma,{visibility:a(B),title:a(n).confirm,description:a(n).event_attendee_remove,"close-btn-text":a(n).no,"confirm-btn-text":a(n).yes,"customized-options":{cancelBtn:{buttonType:"plain"},confirmBtn:{buttonType:"filled"}},onDecline:X,onConfirm:K,onClose:X},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"]),a(C)?(u(),q(Su,{key:4,visibility:a(C),title:a(_)?a(n).event_edit_attendee:a(n).event_add_attendee,event:a(t).event,"page-width":a(t).pageWidth,"is-new":!a(_),onSave:le,onClose:W},null,8,["visibility","title","event","page-width","is-new"])):D("",!0)],4)}}});const lE=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),nE={key:2,class:"am-cap__actions"},iE={name:"CabinetEvents",key:"events"},oE=Object.assign(iE,{props:{loadBookingsCounter:{type:Number,default:0}},setup(l){const e=l;let t=Oe(),s=M(null),{width:n}=es(s),i=y(()=>tt(n.value)),o={components:{IconComponent:He},template:'<IconComponent icon="plus"/>'};const r=F("settings");let c=F("originKey"),d=F("amCustomize");const f=F("shortcodeData"),v=F("labels"),g=F("localLanguage");let b=y(()=>r.general.usedLanguages.includes(g.value)),T=y(()=>{let ce=nt({...v}),Fe=d.value.events.translations;return Fe&&Object.keys(Fe).forEach(ve=>{Fe[ve][g.value]&&b.value?ce[ve]=Fe[ve][g.value]:Fe[ve].default&&(ce[ve]=Fe[ve].default)}),ce});Be("amLabels",T);let C=M(null),_=M(!1),S=M("success"),P=M("");function k(){_.value=!1,t.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}function h(ce){let Fe=nt({...v}),ve=d.value[ce].translations;return ve&&Object.keys(ve).forEach(Re=>{ve[Re][g.value]&&b.value?Fe[Re]=ve[Re][g.value]:ve[Re].default&&(Fe[Re]=ve[Re].default)}),Fe}function A(ce){return d.value[ce].options}let O=y(()=>t.getters["entities/getReady"]),E=F("cabinetType");t.commit("cabinetFilters/setDates",lo(E.value));let $=y(()=>t.getters["cabinet/getEventsLoading"]),V=M(!1),j=M(null),B=M(null),G=M(0),H=M(1);function X(ce){H.value=ce,Q(ce)}function Q(ce=1){j.value=null,t.commit("cabinet/setEventsLoading",!0);let Fe=t.getters["cabinet/getTimeZone"],ve=JSON.parse(JSON.stringify(t.getters["cabinetFilters/getEventsFilters"]));ve.dates=ve.dates.map(Pe=>pe(Pe).format("YYYY-MM-DD")),ve.timeZone=Fe,ve.source="cabinet-"+E.value,ve.id=ve.events,ve.group=!0,ve.page=ce,ve.limit=r.general.itemsPerPageBackEnd,ve.customers&&(ve.customerId=ve.customers),t.commit("auth/setLoadingEventsCounter",t.getters["auth/getLoadingEventsCounter"]+1);let Re=t.getters["auth/getLoadingEventsCounter"];De.get("/events",Object.assign(Ue(t),{params:_l(ve)})).then(Pe=>{Re===t.getters["auth/getLoadingEventsCounter"]&&(t.dispatch("cabinetFilters/injectEventsOptions",Pe.data.data.events),t.commit("auth/setPreloadedEvents",Pe.data.data.events),G.value=Pe.data.data.count,t.commit("eventEntities/setEvents",Pe.data.data.events),B.value=Fd(Pe.data.data.events,t.getters["cabinet/getTimeZone"],t))}).catch(Pe=>{Pe?.response?.data?.data?.reauthorize!==void 0&&Pe.response.data.data.reauthorize&&t.dispatch("auth/logout"),console.log(Pe)}).finally(()=>{Re===t.getters["auth/getLoadingEventsCounter"]&&t.commit("cabinet/setEventsLoading",!1)})}function ee(ce){t.commit("cabinet/setEventsLoading",!0),De.get("/events/"+ce.id,Object.assign({params:{source:"cabinet-"+E.value,timeZone:t.getters["cabinet/getTimeZone"]}},Ue(t))).then(Fe=>{t.commit("event/setEvent",Ww(t,Fe.data.data.event)),le.value=!0}).catch(Fe=>{console.log(Fe)}).finally(()=>{t.commit("cabinet/setEventsLoading",!1)})}let le=M(!1),W=M(!1),se=M(!1),ge=M(!1),Ie=M(!1),ue=M(null);function ae(ce){t.commit("cabinet/setEventsLoading",!0),le.value=!1,setTimeout(()=>{t.commit("event/setEvent",ce),le.value=!0,t.commit("cabinet/setEventsLoading",!1)},500)}function me(){_.value=!0,P.value=T.value.event_saved,s.value&&C.value&&setTimeout(function(){ft(s.value,C.value.$el,0,300)},500),Q(),Te()}function z(){je(),le.value=!0}function J(ce){ue.value=ce,Ae(As(t,t.getters["attendee/getDefaultAttendee"],ce)),se.value=!0}function Z(){Q(H.value),de()}function de(){se.value=!1,ge.value=!1}function K(ce){ue.value=ce,W.value=!0}function oe(){ue.value=null,Q(H.value),Ae(As(t,t.getters["attendee/getDefaultAttendee"])),W.value=!1,Ie.value=!1}function he(ce){Ie.value=ce}function Ae(ce={}){t.commit("attendee/setAttendee",ce)}function Te(){le.value=!1,je()}function je(){t.commit("event/setEvent",{bookings:[],settings:Ps(r,t.getters["event/getSettings"],{},{})})}let be=M(!1);function Ce(){be.value=!0,De.post("/bookings/cancel/"+j.value.id,{type:"event",source:"cabinet-"+E.value},Object.assign(Ue(t),{params:{source:"cabinet-"+E.value}})).then(()=>{j.value=null,Q(),_.value=!0,P.value=T.value.event_canceled,s.value&&C.value&&setTimeout(function(){ft(s.value,C.value.$el,0,300)},500)}).catch(ce=>{!("data"in ce.response.data)&&"message"in ce.response.data&&(_.value=!0,P.value=ce.response.data.message,s.value&&C.value&&setTimeout(function(){ft(s.value,C.value.$el,0,300)},500))}).finally(()=>{be.value=!1})}rt(()=>e.loadBookingsCounter,()=>{Q()}),Ze(()=>{Q()});function Se(ce){let Fe=[],ve=t.getters["entities/getEmployees"];if(ce.organizerId&&ve.find(Re=>Re.id===ce.organizerId)){let Re={...ve.find(Pe=>Pe.id===ce.organizerId),rank:"organizer"};if(!ce.providers.length)return Re;Fe.push(Re)}return ce.providers.length&&ce.providers.forEach(Re=>{Re.id!==ce.organizerId&&ve.find(Pe=>Pe.id===Re.id)&&Fe.push(ve.find(Pe=>Pe.id===Re.id))}),Fe}function Me(ce){if(ce){if(ce===1)return{class:"am-no-show-1",icon:"no-show-1"};if(ce===2)return{class:"am-no-show-2",icon:"no-show-2"};if(ce>2)return{class:"am-no-show-3",icon:"no-show-3"}}return{class:"",icon:""}}Be("noShowData",{noShowData:Me});let Le=F("amColors"),Xe=y(()=>({"--am-c-cape-bgr":Le.value.colorMainBgr,"--am-c-cape-text":Le.value.colorMainText,"--am-c-cape-text-op70":Y(Le.value.colorMainText,.7),"--am-c-cape-text-op25":Y(Le.value.colorMainText,.25),"--am-c-cape-primary":Le.value.colorPrimary,"--am-c-cust-no1":Le.value.colorMainText,"--am-c-cust-no1-bgr":Y(Le.value.colorMainText,.1),"--am-c-cust-no2":Le.value.colorWarning,"--am-c-cust-no2-bgr":Y(Le.value.colorWarning,.1),"--am-c-cust-no3":Le.value.colorError,"--am-c-cust-no3-bgr":Y(Le.value.colorError,.1),"--am-c-cust-text":Le.value.colorMainText,"--am-c-cust-link":Y(Le.value.colorMainText,.5)}));return(ce,Fe)=>(u(),x("div",{ref_key:"pageContainer",ref:s,class:R(["am-cap am-cape-main",{"am-capei-main":a(le)||a(se)||a(Ie)}]),style:_e(a(Xe))},[m("div",{class:R(["am-cape-main__inner",a(i)])},[a(_)?(u(),q(wt,{key:0,ref_key:"alertContainer",ref:C,type:a(S),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:k,onTriggerClose:k},{title:L(()=>[lE,ie(" "+w(a(P)),1)]),_:1},8,["type"])):D("",!0),!a(se)&&!a(le)&&!a(W)&&a(O)?(u(),q(Do,{key:1,"step-key":"events",empty:a(V),"responsive-class":a(i),onChangeFilters:Q},null,8,["empty","responsive-class"])):D("",!0),a(f).cabinetType==="employee"&&a(r).roles.allowWriteEvents&&!a(se)&&!a(le)&&!a(W)&&a(O)?(u(),x("div",nE,[I(ke,{icon:a(o),prefix:"plus",size:"small",category:"primary",type:a(d).events.options.newEvtBtn.buttonType,onClick:z},{default:L(()=>[m("span",null,w(a(T).new_event),1)]),_:1},8,["icon","type"])])):D("",!0),!a($)&&a(O)?(u(),x(te,{key:3},[!a(se)&&!a(le)&&!a(W)&&a(B)&&Object.keys(a(B)).length>0?(u(),x("div",{key:0,class:R(["am-cape__wrapper",[{"am-no-border":a(B)&&Object.keys(a(B)).length===1},a(i)]])},[(u(!0),x(te,null,fe(a(B),(ve,Re)=>(u(),x("div",{key:Re,class:"am-cape"},[m("div",{class:R(["am-cape__date",[{"am-today":a(dt)(Re)===a(dt)(a(pe)().format("YYYY-MM-DD"))},{"am-no-flag":a(B)&&Object.keys(a(B)).length===1},a(i)]])},w(a(dt)(Re)),3),(u(!0),x(te,null,fe(ve.events,(Pe,Bs)=>(u(),q(gu,{key:Bs,start:a(nl)(Pe.periods[0].periodStart.split(" ")[1].slice(0,5)),name:Pe.name,employee:Se(Pe),customers:Pe.bookings.filter(St=>St.status!=="rejected"&&St.status!=="canceled").map(St=>St.customer),price:a(ec)(Pe),duration:null,periods:(ce.periods=a(Vd)(Pe.periods))?ce.periods:[],extras:[],tickets:a(Rd)(Pe),"custom-fields":a(pu)(Pe.bookings,a(f).cabinetType),location:a(qd)(a(t),Pe),"google-meet-link":Pe.periods.length===1&&Pe.periods[0].googleMeetUrl?Pe.periods[0].googleMeetUrl:"","microsoft-teams-link":Pe.periods.length===1&&Pe.periods[0].microsoftTeamsUrl?Pe.periods[0].microsoftTeamsUrl:"","zoom-link":Pe.periods.length===1&&Pe.periods[0].zoomMeeting?Pe.periods[0].zoomMeeting.joinUrl:"","lesson-space-link":Pe.periods.length===1&&Pe.periods[0].lessonSpace?Pe.periods[0].lessonSpace:"",bookable:Pe,reservation:Pe,booking:Pe.bookings[0],"responsive-class":a(i),"parent-width":a(n),"customized-options":A("events"),onEditEvent:ee,onAddEventAttendee:J,onListEventAttendees:K,onCancelBooking:Fe[0]||(Fe[0]=St=>{ye(j)?j.value=St:j=St})},null,8,["start","name","employee","customers","price","periods","tickets","custom-fields","location","google-meet-link","microsoft-teams-link","zoom-link","lesson-space-link","bookable","reservation","booking","responsive-class","parent-width","customized-options"]))),128))]))),128))],2)):D("",!0),!a(se)&&!a(le)&&!a(W)&&(a(B)===null||Object.keys(a(B)).length===0)?(u(),q(Na,{key:1,heading:a(T).no_evt_found,text:a(T).have_no_evt},null,8,["heading","text"])):D("",!0),!a(se)&&!a(le)&&!a(W)&&a(B)&&Object.keys(a(B)).length>0&&a(G)>a(r).general.itemsPerPageBackEnd?(u(),q(sn,{key:2,"page-size":a(r).general.itemsPerPageBackEnd,"pager-count":5,layout:"prev, pager, next",total:a(G),"current-page":a(H),onCurrentChange:X},null,8,["page-size","total","current-page"])):D("",!0),a(le)?(u(),q(F8,{key:3,"page-width":a(n),"responsive-class":a(i),onClose:Te,onSave:me,onDuplicate:ae},null,8,["page-width","responsive-class"])):D("",!0),!a(se)&&a(W)?(u(),q(sE,{key:4,event:a(ue),"page-width":a(n),"responsive-class":a(i),onClose:oe,onOpenAttendee:he},null,8,["event","page-width","responsive-class"])):D("",!0),a(se)?(u(),q(Su,{key:5,visibility:a(se),title:a(ge)?a(T).event_edit_attendee:a(T).event_add_attendee,event:a(ue),"page-width":a(n),"is-new":!a(ge),onSave:Z,onClose:de},null,8,["visibility","title","event","page-width","is-new"])):D("",!0),a(c)==="capc"?(u(),q(Ma,{key:6,visibility:a(j)!==null,title:h("cancelEvent").cancel_event,description:h("cancelEvent").confirm_cancel_event,"close-btn-text":h("cancelEvent").close,"confirm-btn-text":h("cancelEvent").confirm,"customized-options":A("cancelEvent"),loading:a(be),onClose:Fe[1]||(Fe[1]=ve=>ye(j)?j.value=null:j=null),onDecline:Fe[2]||(Fe[2]=ve=>ye(j)?j.value=null:j=null),onConfirm:Ce},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"])):D("",!0)],64)):(u(),q(No,{key:4}))],2)],6))}});const rE={class:"am-sc__top-left"},cE={class:"am-sc__name"},uE={key:0,class:"am-sc__date"},dE={key:1,class:"am-sc__date"},mE=["onClick"],pE={class:"am-sc__capacity"},fE=m("div",{class:"am-sc__btn"},[m("span",{class:"am-icon-arrow-right"})],-1),gE={key:0,class:"am-sc__bottom"},hE={class:"am-sc__expiration"},vE=m("span",{class:"am-icon-triangle-info"},null,-1),_E={name:"CabinetPackagesList"},yE=Object.assign(_E,{props:{packages:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""}},emits:["click"],setup(l,{emit:e}){const t=l;function s(_){return pe(_,"YYYY-MM-DD").diff(pe(),"days")}function n(_){e("click",_)}function i(_,S,P){let k=0;return Object.keys(_).forEach(h=>{(S===null||parseInt(S)===parseInt(h))&&(k+=_[h].purchaseData[P])}),k}function o(_){return _===1?b.value.appointment_booked:b.value.appointments_booked}function r(_){let S=_.packageData.sharedCapacity?_.packageData.sharedCount:i(_.services,null,"count"),P=_.packageData.sharedCapacity?_.packageData.sharedTotal:i(_.services,null,"total");return`${P-S}/${P} ${o(P-S)}`}const c=F("settings");let d=F("amCustomize");const f=F("labels"),v=F("localLanguage");let g=y(()=>c.general.usedLanguages.includes(v.value)),b=y(()=>{let _=nt({...f}),S=d.value.packagesList.translations;return S&&Object.keys(S).forEach(P=>{S[P][v.value]&&g.value?_[P]=S[P][v.value]:S[P].default&&(_[P]=S[P].default)}),_}),T=F("amColors"),C=y(()=>({"--am-c-sc-bgr":T.value.colorMainBgr,"--am-c-sc-bgr-op15":Y(T.value.colorMainText,.15),"--am-c-sc-text":T.value.colorMainText,"--am-c-sc-text-op80":Y(T.value.colorMainText,.8),"--am-c-sc-text-op60":Y(T.value.colorMainText,.6),"--am-c-sc-warning-op50":Y(T.value.colorWarning,.5)}));return(_,S)=>a(t).packages.length?(u(!0),x(te,{key:0},fe(a(t).packages,P=>(u(),x("div",{key:P[0],style:_e(a(C)),class:R(["am-sc",{"am-sc__canceled":P[1].packageData.status==="canceled"}])},[m("div",{class:R(["am-sc__top",l.responsiveClass])},[m("div",rE,[m("div",cE,w(P[1].packageData.name),1),P[1].packageData.end?(u(),x("div",uE,w(a(b).package_book_expire)+" "+w(a(dt)(P[1].packageData.end.split(" ")[0])),1)):(u(),x("div",dE,w(`${a(b).package_book_expiration} ${a(b).package_book_unlimited}`),1))]),m("div",{class:R(["am-sc__top-right",l.responsiveClass]),onClick:k=>n(P[0])},[m("div",pE,w(r(P[1])),1),fE],10,mE)],2),P[1].packageData.end&&P[1].packageData.status!=="canceled"?(u(),x(te,{key:0},[s(P[1].packageData.end.split(" ")[0])>0?(u(),x("div",gE,[m("span",hE,[vE,ie(" "+w(`${a(b).package_deal_expire_in} ${s(P[1].packageData.end.split(" ")[0])} ${a(b).expires_days}, ${a(b).appointments_deal_expire}`),1)])])):D("",!0)],64)):D("",!0)],6))),128)):(u(),q(Na,{key:1,heading:a(b).no_pack_found,text:a(b).have_no_pack},null,8,["heading","text"]))}});const bE=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),kE={class:"am-cappa__back"},CE={class:"am-cappa__heading-left"},xE={key:0,class:"am-cappa__img-name"},wE={class:"am-cappa__info"},TE={class:"am-cappa__name"},SE={key:0,class:"am-cappa__date"},EE={key:1,class:"am-cappa__date"},LE={key:2,class:"am-cappa__capacity"},AE={class:"am-cappa__service-heading"},$E={class:"am-cappa__service-right"},IE={key:0,class:"am-cappa__service-img__name"},PE={class:"am-cappa__service-info"},OE={class:"am-cappa__service-name"},DE={key:0,class:"am-cappa__service-capacity"},NE={name:"CabinetPackageAppointmentsList",key:"packagesList"},ME=Object.assign(NE,{props:{data:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""},pageWidth:{type:Number}},emits:["goBack","booked","canceled","cancelError"],setup(l,{emit:e}){const t=l;let s=Oe(),n=y(()=>s.getters.getSettings),i=Qr({components:{IconComponent:He},template:'<IconComponent icon="arrow-left"></IconComponent>'}),{selectedPackageCustomerId:o}=F("packageSelection"),r=y(()=>s.getters["entities/getPackage"](t.data.packageData.id)),c=y(()=>r.value.bookable.find(z=>parseInt(z.service.id)===parseInt(C.value))),d=M(null),f=M(null),v=y(()=>{let z=s.getters["entities/getEntitiesRelations"],J=s.getters["entities/getUnfilteredEmployees"],Z=[];if(c.value){if(f.value)Object.keys(z).forEach(K=>{_.value&&_.value.serviceId in z[K]&&z[K][parseInt(_.value.serviceId)].indexOf(f.value)!==-1&&Z.push(parseInt(K))});else{let K=[];if(c.value.locations.length)K=c.value.locations.map(oe=>oe.id);else for(let oe in z)c.value.service.id in z[oe]&&(K=K.concat(z[oe][c.value.service.id]));for(let oe in z)c.value.service.id in z[oe]&&K.forEach(he=>{z[oe][c.value.service.id].indexOf(he)!==-1&&Z.push(parseInt(oe))})}let de=c.value.providers.length?c.value.providers.map(K=>K.id):J.map(K=>K.id);return J.filter(K=>de.indexOf(K.id)!==-1&&Z.indexOf(K.id)!==-1&&(s.getters["entities/getShowHidden"]||K.status==="visible"))}return[]}),g=y(()=>{let z=s.getters["entities/getEntitiesRelations"],J=s.getters["entities/getUnfilteredLocations"],Z=[];if(c.value){if(d.value)Z=z[d.value][c.value.service.id];else{let K=[];if(c.value.providers.length)K=c.value.providers.map(oe=>oe.id);else for(let oe in z)c.value.service.id in z[oe]&&K.push(parseInt(oe));for(let oe in z)c.value.service.id in z[oe]&&K.indexOf(parseInt(oe))!==-1&&(Z=Z.concat(z[oe][c.value.service.id]))}let de=c.value.locations.length?c.value.locations.map(K=>K.id):J.map(K=>K.id);return J.filter(K=>de.indexOf(K.id)!==-1&&Z.indexOf(K.id)!==-1&&(s.getters["entities/getShowHidden"]||K.status==="visible"))}return[]}),b=y(()=>{let z=[];return Object.keys(t.data.services).forEach(J=>{Object.keys(t.data.services[J].appointments).forEach(Z=>{t.data.services[J].appointments[Z].appointments.forEach(de=>{z.push(de)})})}),{type:"package",package:r.value,booking:null,bookable:r.value,paymentId:t.data.packageData.payments.length?t.data.packageData.payments[0].id:null,customer:s.getters["auth/getProfile"],packageCustomerId:parseInt(o.value),packageReservations:z,payments:t.data.packageData.payments,price:t.data.packageData.price,tax:t.data.packageData.tax,coupon:t.data.packageData.coupon,discount:t.data.packageData.discount,end:t.data.packageData.end}}),T=M(!1),C=M(null),_=M(null),S=M(null);Ze(()=>{C.value=Object.keys(t.data.services)[0]});function P(z,J,Z){let de=0;return Object.keys(z).forEach(K=>{(J===null||parseInt(J)===parseInt(K))&&(de+=z[K].purchaseData[Z])}),de}function k(z){return z===1?ee.value.appointment_booked:ee.value.appointments_booked}function h(z,J=null){let Z=z.packageData.sharedCapacity?z.packageData.sharedCount:P(z.services,J,"count"),de=z.packageData.sharedCapacity?z.packageData.sharedTotal:P(z.services,J,"total");return`${de-Z}/${de} ${k(de-Z)}`}function A(z){C.value=z.paneName}function O(){let z=s.getters["auth/getProfile"],J=s.getters["cabinet/getTimeZone"]?s.getters["cabinet/getTimeZone"]:"UTC",Z={serviceId:parseInt(C.value),group:1,timeZone:s.getters["cabinet/getTimeZone"],page:"cabinet"},de=r.value.bookable.find(K=>parseInt(K.service.id)===parseInt(C.value)).providers.map(K=>K.id);de.length&&(Z.providerIds=de),Z.locationId=null,S.value=Z,_.value={type:"appointment",bookings:[{packageCustomerService:{id:t.data.services[C.value].purchaseData.packageCustomerServiceId},customer:{id:z.id,firstName:z.firstName,lastName:z.lastName,email:z.email,phone:z.phone,countryPhoneIso:z.countryPhoneIso,externalId:z.externalId},customerId:z.id,customFields:null,persons:1,extras:[],deposit:0}],serviceId:C.value,locationId:t.data.services[C.value].purchaseData.locitionId,providerId:t.data.services[C.value].purchaseData.employeeId,isGroup:!0,notifyParticipants:n.value.notifications.notifyCustomers?1:0,payment:null,recurring:[],package:[],timeZone:J===""?Intl.DateTimeFormat().resolvedOptions().timeZone:J,utc:J==="",locale:window.localeLanguage[0]}}function E(z){_.value=null,e("booked",z)}let $=M(!1);function V(){$.value=!0,De.post("/packages/customers/"+parseInt(o.value),{status:"canceled"},Ue(s)).then(()=>{T.value=!1,e("canceled",{message:ee.value.package_purchase_canceled})}).catch(z=>{z.response&&e("cancelError",z.response.data)}).finally(()=>{$.value=!1})}function j(z){e("booked",z)}function B(){e("goBack")}let G=F("amCustomize");const H=F("labels"),X=F("localLanguage");let Q=y(()=>n.value.general.usedLanguages.includes(X.value)),ee=y(()=>{let z=nt({...H}),J=G.value.packageAppointmentsList.translations;return J&&Object.keys(J).forEach(Z=>{J[Z][X.value]&&Q.value?z[Z]=J[Z][X.value]:J[Z].default&&(z[Z]=J[Z].default)}),z});Be("amLabels",ee);let le=y(()=>s.getters["cabinet/getPaymentLinkError"].package),W=M("error"),se=M(ee.value.payment_link_error);function ge(){le.value=!1,s.commit("cabinet/setPaymentLinkError",{value:!1,type:"package"})}function Ie(z){let J=nt({...H}),Z=G.value[z].translations;return Z&&Object.keys(Z).forEach(de=>{Z[de][X.value]&&Q.value?J[de]=Z[de][X.value]:Z[de].default&&(J[de]=Z[de].default)}),J}function ue(z){return G.value[z].options}let ae=F("amColors"),me=y(()=>({"--am-c-cappa-text":ae.value.colorMainText,"--am-c-cappa-bgr":ae.value.colorMainBgr,"--am-c-cappa-text-op80":Y(ae.value.colorMainText,.8),"--am-c-cappa-text-op70":Y(ae.value.colorMainText,.7),"--am-c-cappa-text-op20":Y(ae.value.colorMainText,.2),"--am-c-cappa-primary":ae.value.colorPrimary}));return(z,J)=>{const Z=Qa,de=Ka;return u(),x("div",{class:"am-cappa",style:_e(a(me))},[a(le)?(u(),q(wt,{key:0,ref:"alertContainer",type:a(W),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:ge,onTriggerClose:ge},{title:L(()=>[bE,ie(" "+w(a(se)),1)]),_:1},8,["type"])):D("",!0),m("div",kE,[I(ke,{"custom-class":"am-cappa__back-btn",icon:a(i),type:a(G).packageAppointmentsList.options.backBtn.buttonType,size:"micro",category:"secondary","icon-only":"",onClick:B},null,8,["icon","type"]),m("span",null,w(a(ee).back_btn),1)]),m("div",{class:R(["am-cappa__heading",l.responsiveClass])},[m("div",CE,[m("div",{class:"am-cappa__img",style:_e(a(t).data.packageData.pictureThumbPath?{backgroundImage:`url(${a(t).data.packageData.pictureThumbPath})`}:{})},[a(t).data.packageData.pictureThumbPath?D("",!0):(u(),x("span",xE,w(a($i)(a(t).data.packageData.name)),1)),m("span",{class:"am-cappa__img-color",style:_e({backgroundColor:a(t).data.packageData.color})},null,4)],4),m("div",wE,[m("div",TE,w(a(t).data.packageData.name),1),a(t).data.packageData.end?(u(),x("div",SE,w(a(ee).package_book_expire)+" "+w(a(dt)(a(t).data.packageData.end.split(" ")[0])),1)):(u(),x("div",EE,w(`${a(ee).package_book_expiration} ${a(ee).package_book_unlimited}`),1)),Object.keys(a(t).data.services).length>1?(u(),x("div",LE,w(h(a(t).data)),1)):D("",!0)])]),m("div",{class:R(["am-cappa__heading-right",l.responsiveClass])},[a(n).roles.allowCustomerCancelPackages&&a(t).data.packageData.status!=="canceled"?(u(),q(ke,{key:0,category:"danger",size:"small",class:R(["am-cappa__actions",l.responsiveClass]),type:a(G).packageAppointmentsList.options.cancelBtn.buttonType,onClick:J[0]||(J[0]=()=>{ye(T)?T.value=!0:T=!0})},{default:L(()=>[ie(w(a(ee).cancel),1)]),_:1},8,["class","type"])):D("",!0),a(t).data.packageData.status==="approved"&&a(t).data.packageData.price>0?(u(),q(fu,{key:1,"btn-size":"small",class:R(`am-cappa__actions ${l.responsiveClass}`),type:a(G).packageAppointmentsList.options.payBtn.buttonType,reservation:a(b),bookable:a(r)},null,8,["class","type","reservation","bookable"])):D("",!0)],2)],2),I(de,{modelValue:a(C),"onUpdate:modelValue":J[1]||(J[1]=K=>ye(C)?C.value=K:C=K),class:"am-cappa__service",onTabClick:A},{default:L(()=>[(u(!0),x(te,null,fe(Object.keys(a(t).data.services),K=>(u(),q(Z,{key:K,name:K},{label:L(()=>[m("div",AE,w(a(t).data.services[K].purchaseData.name),1)]),default:L(()=>[a(C)===K?(u(),x(te,{key:0},[m("div",{class:R(["am-cappa__service-top",l.responsiveClass])},[m("div",$E,[m("div",{class:"am-cappa__service-img",style:_e(a(t).data.services[a(C)].purchaseData.pictureThumbPath?{backgroundImage:`url(${a(t).data.services[a(C)].purchaseData.pictureThumbPath})`}:{})},[a(t).data.services[a(C)].purchaseData.pictureThumbPath?D("",!0):(u(),x("span",IE,w(a($i)(a(t).data.services[a(C)].purchaseData.name)),1)),m("span",{class:"am-cappa__service-img__color",style:_e({backgroundColor:a(t).data.services[a(C)].purchaseData.color})},null,4)],4),m("div",PE,[m("div",OE,w(a(t).data.services[a(C)].purchaseData.name),1),a(t).data.packageData.sharedCapacity?D("",!0):(u(),x("div",DE,w(h(a(t).data,a(C))),1))])]),a(t).data.packageData.status!=="canceled"?(u(),q(ke,{key:0,class:R(["am-cappa__service-book",l.responsiveClass]),size:"small",type:a(G).packageAppointmentsList.options.bookBtn.buttonType,disabled:P(a(t).data.services,a(C),"count")===0,onClick:O},{default:L(()=>[ie(w(a(ee).book_now),1)]),_:1},8,["class","type","disabled"])):D("",!0)],2),I(vu,{"grouped-appointments":a(t).data.services[a(C)].appointments,"page-width":l.pageWidth,"responsive-class":l.responsiveClass,"is-package-booking":!0,"step-key":"packageAppointmentsList",onCanceled:j,onBooked:j},null,8,["grouped-appointments","page-width","responsive-class"])],64)):D("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),I(Ma,{loading:a($),visibility:a(T),title:Ie("cancelPackage").cancel_package,description:Ie("cancelPackage").confirm_cancel_package,"close-btn-text":Ie("cancelPackage").close,"confirm-btn-text":Ie("cancelPackage").confirm,"customized-options":ue("cancelPackage"),onClose:J[2]||(J[2]=()=>{ye(T)?T.value=!1:T=!1}),onDecline:J[3]||(J[3]=()=>{ye(T)?T.value=!1:T=!1}),onConfirm:V},null,8,["loading","visibility","title","description","close-btn-text","confirm-btn-text","customized-options"]),I(hu,{visibility:a(_)!==null&&!a(_).id,appointment:a(_),employees:a(v),locations:a(g),"slots-params":a(S),labels:Ie("bookAppointment"),"customized-options":ue("bookAppointment"),onClose:J[4]||(J[4]=K=>ye(_)?_.value=null:_=null),onSuccess:E,onError:J[5]||(J[5]=()=>{}),onEmployeeSelection:J[6]||(J[6]=K=>ye(d)?d.value=K:d=K),onLocationSelection:J[7]||(J[7]=K=>ye(f)?f.value=K:f=K)},null,8,["visibility","appointment","employees","locations","slots-params","labels","customized-options"])],4)}}});const BE=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),FE={name:"CabinetPackages",key:"packages"},VE=Object.assign(FE,{props:{loadBookingsCounter:{type:Number,default:0}},setup(l){const e=l;let t=Oe(),s=M(null),n=M(0),i=F("sidebarCollapsed");window.addEventListener("resize",o);function o(){s.value&&(n.value=s.value.offsetWidth)}rt(i,G=>{G?setTimeout(()=>{r()},1500):setTimeout(()=>{r()},500)});function r(){n.value=s.value.offsetWidth}Ze(()=>{ao(()=>{n.value=s.value.offsetWidth})});let c=y(()=>tt(n.value)),d=M(null),f=M(!1),v=M("success"),g=M("");function b(){f.value=!1,g.value=""}let T=F("cabinetType");t.commit("cabinetFilters/setDates",lo(T.value));let C=y(()=>t.getters["cabinet/getPackageLoading"]),_=M([]),S=M(null);function P(){let G=t.getters["cabinetFilters/getPackages"],H=t.getters["cabinetFilters/getServices"],X=t.getters["cabinetFilters/getProviders"],Q=t.getters["cabinetFilters/getLocations"];_.value=E.value.filter(ee=>{let le=t.getters["entities/getPackageEntities"](ee[1].packageData.id);return(H.length===0||H.filter(W=>le.services.includes(W)).length>0)&&(X.length===0||X.filter(W=>le.providers.includes(W)).length>0)&&(Q.length===0||Q.filter(W=>le.locations.includes(W)).length>0)&&(G.length===0||G.filter(W=>le.packages.includes(W)).length>0)})}function k(G,H,X){let Q=0;return Object.keys(G).forEach(ee=>{(H===null||parseInt(H)===parseInt(ee))&&(Q+=G[ee].purchaseData[X])}),Q}function h(G){let H=k(G.services,null,"count"),X=k(G.services,null,"total");return X-H===X}function A(G){t.commit("cabinet/setPackageLoading",!0);let H=t.getters["cabinet/getTimeZone"],X=JSON.parse(JSON.stringify(t.getters["cabinetFilters/getPackagesFilters"]));X.timeZone=H,X.source="cabinet-"+T.value,X.activePackages=0,De.get("/appointments",_l(Object.assign(Ue(t),{params:X}))).then(Q=>{let ee={};Q.data.data.availablePackageBookings.forEach(ae=>{ae.packages.forEach(me=>{me.services.forEach(z=>{z.bookings.forEach(J=>{let Z=t.getters["entities/getPackage"](me.packageId);if(Z&&(J.packageCustomerId in ee||(ee[J.packageCustomerId]={packageData:{id:Z.id,name:Z.name,start:J.start,end:J.end,price:J.price,tax:J.tax,coupon:J.coupon,status:J.status,type:"package",payments:J.payments,sharedCapacity:J.sharedCapacity,sharedTotal:J.total,sharedCount:J.count,discount:0,color:Z.color,pictureFullPath:Z.pictureFullPath,pictureThumbPath:Z.pictureThumbPath},services:{}}),!(z.serviceId in ee[J.packageCustomerId].services))){let de=t.getters["entities/getService"](z.serviceId);ee[J.packageCustomerId].services[z.serviceId]={appointments:{},purchaseData:{packageCustomerServiceId:J.id,total:J.total,count:J.count,employeeId:J.employeeId,locationId:J.locationId,name:de.name,color:de.color,pictureThumbPath:de.pictureThumbPath}}}})})})});let le=mu(Q.data.data.appointments,H,T.value==="provider");Object.keys(le).forEach(ae=>{le[ae].appointments.forEach(me=>{me.bookings.forEach(z=>{let J=z.packageCustomerService.packageCustomer.id;J in ee&&(ae in ee[J].services[me.serviceId].appointments||(ee[J].services[me.serviceId].appointments[ae]={date:ae,appointments:[]}),ee[J].services[me.serviceId].appointments[ae].appointments.push(me))})})});let W=Object.entries(ee).filter(ae=>ae[1].packageData.status==="canceled"),se=Object.entries(ee).filter(ae=>ae[1].packageData.status!=="canceled"&&h(ae[1])),ge=Object.entries(ee).filter(ae=>ae[1].packageData.status!=="canceled"&&!h(ae[1])&&ae[1].packageData.end===null),Ie=Object.entries(ee).filter(ae=>ae[1].packageData.status!=="canceled"&&!h(ae[1])&&ae[1].packageData.end!==null).sort((ae,me)=>pe(ae[1].packageData.end,"YYYY-MM-DD HH:mm:ss").diff(pe(me[1].packageData.end,"YYYY-MM-DD HH:mm:ss"),"minutes"));if(_.value=[...Ie,...ge,...se,...W],E.value=[...Ie,...ge,...se,...W],!(X.packages.length||X.services.length||X.providers.length||X.locations.length)){let ae=[],me=[],z=[],J=[];_.value.forEach(Z=>{let de=t.getters["entities/getPackageEntities"](Z[1].packageData.id);ae=ae.concat(de.services),me=me.concat(de.providers),z=z.concat(de.locations),J=J.concat(de.packages)}),t.dispatch("cabinetFilters/injectServiceOptions",ae.filter((Z,de,K)=>K.indexOf(Z)===de)),t.dispatch("cabinetFilters/injectProviderOptions",me.filter((Z,de,K)=>K.indexOf(Z)===de)),t.dispatch("cabinetFilters/injectLocationOptions",z.filter((Z,de,K)=>K.indexOf(Z)===de)),t.dispatch("cabinetFilters/injectPackagesOptions",J.filter((Z,de,K)=>K.indexOf(Z)===de))}}).catch(Q=>{console.log(Q)}).finally(()=>{t.commit("cabinet/setPackageLoading",!1),G&&"message"in G&&(f.value=!0,g.value=G.message,s.value&&d.value&&setTimeout(function(){ft(s.value,d.value.$el,0,300)},500))})}function O(G){f.value=!0,g.value=G.message,v.value="error",s.value&&d.value&&setTimeout(function(){ft(s.value,d.value.$el,0,300)},500)}Be("packageSelection",{selectedPackageCustomerId:S});let E=M([]);rt(()=>e.loadBookingsCounter,()=>{A()}),Ze(()=>{A()});let $=y(()=>({list:{template:Je(yE),props:{packages:_.value,responsiveClass:c.value},handlers:{click:j}},item:{template:Je(ME),props:{data:S.value?_.value.find(G=>G[0]===S.value)[1]:{},responsiveClass:c.value,pageWidth:n.value},handlers:{goBack:B,booked:A,canceled:A,cancelError:O}}})),V=M("list");function j(G){S.value=G,V.value="item"}function B(){S.value=null,V.value="list"}return(G,H)=>(u(),x("div",{ref_key:"pageContainer",ref:s,class:"am-cap"},[a(f)?(u(),q(wt,{key:0,ref_key:"alertContainer",ref:d,type:a(v),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:b,onTriggerClose:b},{title:L(()=>[BE,ie(" "+w(a(g)),1)]),_:1},8,["type"])):D("",!0),Yt(I(Do,{"step-key":"packages","responsive-class":a(c),onChangeFilters:P},null,8,["responsive-class"]),[[Gr,a(V)==="list"]]),a(C)?(u(),q(No,{key:2})):(u(),q(Tt(a($)[a(V)].template),Dt({key:1},a($)[a(V)].props,so(a($)[a(V)].handlers)),null,16))],512))}});const RE=m("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),qE=m("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),UE=["href"],jE={class:"am-fs-sb__page-wrapper am-fs-sb__page-wrapper__cabinet"},zE=["onClick"],YE={class:"am-fs-sb__page-icon"},WE={key:1,class:"am-fs-sb__page-divider"},HE={class:"am-fs-sb__page-inner"},ZE=m("div",{class:"am-fs-sb__page-icon"},[m("span",{class:"am-icon-dashboard"})],-1),GE=m("div",{class:"am-fs-sb__page-divider"},null,-1),JE={class:"am-fs-sb__page-inner"},XE=m("div",{class:"am-fs-sb__page-icon"},[m("span",{class:"am-icon-logout"})],-1),QE={class:"am-caph"},KE={class:"am-caph__text"},e5=m("span",{class:"am-icon-menu"},null,-1),t5=[e5],a5={name:"CustomerPanel"},s5=Object.assign(a5,{setup(l){const e=pn().cookies,t=Oe();let s=y(()=>t.getters.getIsRtl);const n=F("shortcodeData");let i=y(()=>t.getters["auth/getAuthenticated"]);rt(i,oe=>{oe&&(t.commit("auth/setNewPassword",""),t.commit("auth/setConfirmPassword",""))});let o=M(n.value.cabinetType==="employee"?"provider":"customer");Be("cabinetType",o);let r=F("licence"),c=y(()=>o.value==="provider"?"cape":"capc");Be("originKey",c);let d=M(null),{width:f}=es(d);Be("containerWidth",f);const v=F("settings"),g=y(()=>v.customizedData&&c.value in v.customizedData?v.customizedData[c.value]:tn[c.value]);Be("amCustomize",g);const b=M(v.customizedData?v.customizedData.fonts:tn.fonts);Be("amFonts",b);const T=F("labels");Be("amLabels",T);const C=F("localLanguage");let _=y(()=>v.general.usedLanguages.includes(C.value)),S=y(()=>{let oe=nt({...T});return v.customizedData&&Object.keys(g.value).forEach(he=>{if(he!=="colors"&&g.value[he].translations){let Ae=g.value[he].translations;Object.keys(Ae).forEach(Te=>{Ae[Te][C.value]&&_.value?oe[Te]=Ae[Te][C.value]:Ae[Te].default&&(oe[Te]=Ae[Te].default)})}}),oe});function P(){let oe=document.head||document.getElementsByTagName("head")[0];oe.querySelector("#amCustomFont")&&oe.querySelector("#amCustomFont").remove();let he="@font-face {font-family: 'comic'; src: url(http://localhost/amelia-test/wp-content/uploads/amelia/fonts/comic.woff);}",Ae=document.createElement("style");oe.appendChild(Ae),Ae.setAttribute("type","text/css"),Ae.setAttribute("id","amCustomFont"),Ae.appendChild(document.createTextNode(he))}b.value.customFontSelected&&P();let k=y(()=>Q.value==="packages"?g.value.packagesList.options:g.value[Q.value].options),h=M(!1),A=M(!1);Be("sidebarCollapsed",Xu(A));let O=M("");rt(A,oe=>{oe?setTimeout(()=>{O.value="am-collapsed"},1e3):O.value=""});let E=M(null),$=M(0),V=y(()=>f.value>480);Ze(()=>{E.value&&setTimeout(()=>{$.value=E.value.offsetHeight},200),setTimeout(()=>{A.value=f.value<=600?!0:g.value.sidebar.options.toggle.visibility},1300)});const j=()=>{f.value<=600?A.value=!0:A.value=g.value.sidebar.options.toggle.visibility};window.addEventListener("resize",j),rt(f,oe=>{h.value=oe>481?!1:h.value});const B=y(()=>t.getters["entities/getReady"]);rt(B,oe=>{if(oe){if(n.value.cabinetType==="employee"&&t.getters["employee/getId"]){let he=t.getters["employee/getEmployee"];t.commit("employee/setServiceList",Wr(t,he.serviceList)),t.commit("entities/setEmployees",[t.getters["entities/getEmployee"](t.getters["employee/getId"])])}t.dispatch("cabinetFilters/injectServiceOptions",t.getters["entities/getServices"].map(he=>he.id)),t.dispatch("cabinetFilters/injectProviderOptions",o.value==="customer"?t.getters["entities/getEmployees"].map(he=>he.id):[]),t.dispatch("cabinetFilters/injectLocationOptions",t.getters["entities/getLocations"].map(he=>he.id))}});const G=F("baseUrls");let H=["employees","categories","locations","packages","entitiesRelations","customFields"];n.value.cabinetType==="employee"&&(H=H.concat(["taxes","spaces","tags","settings"])),t.dispatch("entities/getEntities",{types:H,licence:"basic",loadEntities:!0,showHidden:!0,isPanel:!0});let X=y(()=>t.getters.getReady),Q=M(n.value.appointments||!n.value.events?"appointments":"events"),ee=M({profile:Je(n.value.cabinetType==="employee"?rk:sp)});(n.value.appointments||!n.value.events)&&(ee.value.appointments=Je(zw)),(n.value.events||!n.value.appointments)&&(ee.value.events=Je(oE)),(n.value.appointments||!n.value.events)&&(r.isPro||r.isDeveloper)&&(ee.value.packages=Je(VE));const le=M([{key:"profile",icon:"user",pageLabel:S.value.my_profile,label:y(()=>c.value==="cape"?`${t.getters["auth/getProfile"].firstName} ${t.getters["auth/getProfile"].lastName}`:g.value.profile.options.lastName.visibility?`${t.getters["auth/getProfile"].firstName} ${t.getters["auth/getProfile"].lastName}`:`${t.getters["auth/getProfile"].firstName}`)}]);(n.value.appointments||!n.value.events)&&le.value.push({key:"appointments",icon:"service",label:S.value.appointments}),(n.value.events||!n.value.appointments)&&le.value.push({key:"events",icon:"star-outline",label:S.value.events}),n.value.cabinetType==="customer"&&(n.value.appointments||!n.value.events)&&(r.isPro||r.isDeveloper)&&le.value.push({key:"packages",icon:"shipment",label:S.value.packages}),Be("sidebarSteps",le),Ze(()=>{W.value=le.value.findIndex(oe=>oe.key===Q.value)});let W=M(0);function se(oe,he){n.value.cabinetType==="employee"&&(oe.key!=="appointments"&&(t.commit("appointment/resetAppointment",{providerId:t.getters["auth/getProfile"].id,categoryId:null,serviceId:null,locationId:null}),t.commit("customerInfo/setCustomers",[]),t.commit("customerInfo/setCustomersIds",[])),oe.key!=="events"&&(t.commit("event/setEvent",{settings:Ps(v,t.getters["event/getSettings"],{},{})}),t.commit("attendee/setAttendee",As(t,t.getters["attendee/getDefaultAttendee"])))),Q.value=oe.key,W.value=he,t.commit("cabinetFilters/setResetFilters")}function ge(oe){n.value.cabinetType==="employee"&&n.value.profile&&oe.step.key==="profile"||(se(oe.step,oe.index),t.commit("cabinetFilters/setResetFilters"))}function Ie(){t.dispatch("auth/logout")}function ue(){h.value=!1,Ie()}let ae=M(0);function me(){ae.value++}let z=y(()=>{switch(le.value[W.value].key){case"profile":return le.value[W.value].pageLabel;case"appointments":return t.getters["appointment/getActive"]&&!t.getters["appointment/getId"]?S.value.new_appointment:t.getters["appointment/getActive"]&&t.getters["appointment/getId"]?S.value.edit_appointment:le.value[W.value].label;case"events":return t.getters["attendee/getActive"]&&!t.getters["attendee/getId"]?S.value.event_add_attendee:t.getters["attendee/getActive"]&&t.getters["attendee/getId"]?S.value.event_edit_attendee:t.getters["event/getActive"]&&!t.getters["event/getId"]?S.value.new_event:t.getters["event/getActive"]&&t.getters["event/getId"]?S.value.edit_event:le.value[W.value].label;default:return le.value[W.value].label}});Be("bookingsCounterChanger",{bookingsCounterChanger:me});const J=F("timeZone");gl(()=>{if(!v.general.showClientTimeZone){let oe=J.value;e.get("ameliaUserTimeZone")&&(oe=e.get("ameliaUserTimeZone")),t.commit("cabinet/setTimeZone",oe)}t.getters["cabinet/getTimeZone"]||t.commit("cabinet/setTimeZone",ll())});let Z=y(()=>g.value.colors);Be("amColors",Z);let de=y(()=>({"--am-c-primary":Z.value.colorPrimary,"--am-c-success":Z.value.colorSuccess,"--am-c-error":Z.value.colorError,"--am-c-warning":Z.value.colorWarning,"--am-c-main-bgr":Z.value.colorMainBgr,"--am-c-main-heading-text":Z.value.colorMainHeadingText,"--am-c-main-text":Z.value.colorMainText,"--am-c-sb-bgr":Z.value.colorSbBgr,"--am-c-sb-text":Z.value.colorSbText,"--am-c-inp-bgr":Z.value.colorInpBgr,"--am-c-inp-border":Z.value.colorInpBorder,"--am-c-inp-text":Z.value.colorInpText,"--am-c-inp-placeholder":Z.value.colorInpPlaceHolder,"--am-c-drop-bgr":Z.value.colorDropBgr,"--am-c-drop-text":Z.value.colorDropText,"--am-c-btn-prim":Z.value.colorBtnPrim,"--am-c-btn-prim-text":Z.value.colorBtnPrimText,"--am-c-btn-sec":Z.value.colorBtnSec,"--am-c-btn-sec-text":Z.value.colorBtnSecText,"--am-c-btn-danger":Z.value.colorBtnDanger,"--am-c-btn-danger-text":Z.value.colorBtnDangerText,"--am-c-skeleton-op20":Y(Z.value.colorMainText,.2),"--am-c-skeleton-op60":Y(Z.value.colorMainText,.6),"--am-c-skeleton-sb-op20":Y(Z.value.colorSbText,.2),"--am-c-skeleton-sb-op60":Y(Z.value.colorSbText,.6),"--am-c-scroll-op30":Y(Z.value.colorPrimary,.3),"--am-c-scroll-op10":Y(Z.value.colorPrimary,.1),"--am-font-family":b.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px","--am-mw-main":V.value?A.value?"858px":"1024px":"520px","--am-brad-main":V.value?"0 0.5rem 0.5rem 0":"0.5rem"})),K=y(()=>({"--am-c-msd-bgr":Z.value.colorSbBgr,"--am-c-msd-text":Z.value.colorSbText,"--am-c-msd-text-op05":Y(Z.value.colorSbText,.05),"--am-c-msd-text-op10":Y(Z.value.colorSbText,.1),"--am-c-msd-text-op60":Y(Z.value.colorSbText,.6)}));return(oe,he)=>(u(),x(te,null,[b.value.customFontSelected?D("",!0):(u(),x(te,{key:0},[RE,qE,m("link",{rel:"stylesheet",type:"text/css",href:`${a(G).wpAmeliaPluginURL}v3/src/assets/scss/common/fonts/font.css`,media:"all"},null,8,UE)],64)),m("div",{id:"amelia-container",ref_key:"ameliaContainer",ref:d,class:R(["am-cap__wrapper",[{"am-collapsed":a(A)},{"am-auth":!a(i)}]]),style:_e(a(de))},[a(i)?D("",!0):(u(),q(Wm,{key:0})),a(i)?(u(),x(te,{key:1},[a(V)?(u(),q(Qu,{key:0,class:R(["am-fs-sb",[{"am-collapsed":a(A)},{"am-rtl":a(s)}]]),style:_e({width:a(A)?"72px":"240px",paddingBottom:`${a($)+16}px`})},{"step-list":L(()=>[m("div",jE,[(u(!0),x(te,null,fe(le.value,(Ae,Te)=>(u(),x(te,{key:Ae.key},[Ae.key!=="packages"||a(t).getters["entities/getPackages"].length?(u(),x("div",{key:0,class:R(["am-fs-sb__page",{selected:a(Q)===Ae.key}]),style:_e({"pointer-events":a(n).cabinetType==="employee"&&a(n).profile&&Ae.key==="profile"?"none":""}),onClick:()=>{a(n).cabinetType==="employee"&&a(n).profile&&Ae.key==="profile"||se(Ae,Te)}},[m("div",{class:R(["am-fs-sb__page-inner",{"am-collapsed":a(A)}])},[m("div",YE,[m("span",{class:R(`am-icon-${Ae.icon}`)},null,2)]),I(_a,{name:"fade"},{default:L(()=>[a(A)?D("",!0):(u(),x("p",{key:0,class:R(["am-fs-sb__page-heading",[a(O),{"am-rtl":a(s)}]])},w(Ae.label),3))]),_:2},1024),I(_a,{name:"fade"},{default:L(()=>[a(A)?D("",!0):(u(),x("div",{key:0,class:R(["am-fs-sb__page-indicator",[a(O),{"am-rtl":a(s)}]])},[m("span",{class:R(a(s)?"am-icon-arrow-big-left":"am-icon-arrow-big-right")},null,2)],2))]),_:1})],2)],14,zE)):D("",!0),Te===0&&le.value[0].key==="profile"?(u(),x("div",WE)):D("",!0)],64))),128))])]),"support-info":L(()=>[m("div",{ref_key:"sidebarFooterRef",ref:E,class:"am-fs-sb__footer"},[m("div",{class:"am-fs-sb__page",onClick:he[0]||(he[0]=Ae=>ye(A)?A.value=!a(A):A=!a(A))},[m("div",HE,[ZE,I(_a,{name:"fade"},{default:L(()=>[a(A)?D("",!0):(u(),x("p",{key:0,class:R(["am-fs-sb__page-heading",a(O)])},w(a(S).toggle_sidebar),3))]),_:1})])]),GE,m("div",{class:"am-fs-sb__page",onClick:Ie},[m("div",JE,[XE,I(_a,{name:"fade"},{default:L(()=>[a(A)?D("",!0):(u(),x("p",{key:0,class:R(["am-fs-sb__page-heading",a(O)])},w(a(S).log_out),3))]),_:1})])])],512)]),_:1},8,["class","style"])):D("",!0),I(Ku,{"max-width":786,"old-responsive":!1},{header:L(()=>[I(id,{ready:a(X)},{default:L(()=>[m("div",QE,[m("div",KE,w(a(z)),1),a(V)?D("",!0):(u(),x("div",{key:0,class:"am-caph__menu",onClick:he[1]||(he[1]=()=>ye(h)?h.value=!a(h):h=!a(h))},t5)),a(B)&&a(V)&&(a(n).cabinetType==="customer"?a(Q)!=="profile"&&a(k).timeZone.visibility:!0)?(u(),q(Ii,{key:1})):D("",!0),I(Kd,{"menu-items":le.value,monitor:a(Q),visibility:a(h),"custom-css":a(K),"customized-labels":a(S),position:"right",width:240,"onUpdate:visibility":he[2]||(he[2]=Ae=>ye(h)?h.value=Ae:h=Ae),onClick:ge,onLogout:ue},null,8,["menu-items","monitor","visibility","custom-css","customized-labels"])])]),_:1},8,["ready"])]),step:L(()=>[(u(),q(Tt(a(ee)[a(Q)]),{class:"am-fs__main-content","load-bookings-counter":a(ae)},null,8,["load-bookings-counter"]))]),_:1})],64)):D("",!0)],6)],64))}});var f5=Object.freeze(Object.defineProperty({__proto__:null,default:s5},Symbol.toStringTag,{value:"Module"}));export{f5 as C,st as _,dd as a,Ht as b,Bd as c,Vd as d,c5 as e,id as f,Kd as g,r5 as h,o5 as i,Rt as j,oa as k,sd as l,ec as u};
