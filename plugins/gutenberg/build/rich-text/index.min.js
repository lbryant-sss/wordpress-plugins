"use strict";var wp;(wp||={}).richText=(()=>{var lr=Object.create;var lt=Object.defineProperty;var pr=Object.getOwnPropertyDescriptor;var dr=Object.getOwnPropertyNames;var hr=Object.getPrototypeOf,gr=Object.prototype.hasOwnProperty;var W=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Rt=(e,t)=>{for(var r in t)lt(e,r,{get:t[r],enumerable:!0})},Wt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of dr(t))!gr.call(e,o)&&o!==r&&lt(e,o,{get:()=>t[o],enumerable:!(n=pr(t,o))||n.enumerable});return e};var y=(e,t,r)=>(r=e!=null?lr(hr(e)):{},Wt(t||!e||!e.__esModule?lt(r,"default",{value:e,enumerable:!0}):r,e)),yr=e=>Wt(lt({},"__esModule",{value:!0}),e);var q=W((mn,zt)=>{zt.exports=window.wp.data});var Qt=W((bn,Yt)=>{Yt.exports=window.wp.escapeHtml});var ve=W((yo,ye)=>{ye.exports=window.wp.a11y});var we=W((vo,Ee)=>{Ee.exports=window.wp.i18n});var I=W((No,Te)=>{Te.exports=window.wp.element});var Ne=W((Ao,Fe)=>{Fe.exports=window.wp.deprecated});var xt=W((Ro,Re)=>{Re.exports=window.wp.compose});var Kt=W((jo,Je)=>{Je.exports=window.wp.keycodes});var un={};Rt(un,{RichTextData:()=>_,__experimentalRichText:()=>ar,__unstableCreateElement:()=>V,__unstableToDom:()=>Vt,__unstableUseRichText:()=>cr,applyFormat:()=>dt,concat:()=>se,create:()=>L,getActiveFormat:()=>nt,getActiveFormats:()=>z,getActiveObject:()=>ce,getTextContent:()=>rt,insert:()=>st,insertObject:()=>le,isCollapsed:()=>ot,isEmpty:()=>ae,join:()=>ue,registerFormatType:()=>fe,remove:()=>vt,removeFormat:()=>yt,replace:()=>me,slice:()=>Et,split:()=>pe,store:()=>A,toHTMLString:()=>J,toggleFormat:()=>be,unregisterFormatType:()=>xe,useAnchor:()=>Se,useAnchorRef:()=>Ce});var pt=y(q());var Xt=y(q());function vr(e={},t){switch(t.type){case"ADD_FORMAT_TYPES":return{...e,...t.formatTypes.reduce((r,n)=>({...r,[n.name]:n}),{})};case"REMOVE_FORMAT_TYPES":return Object.fromEntries(Object.entries(e).filter(([r])=>!t.names.includes(r)))}return e}var Jt=(0,Xt.combineReducers)({formatTypes:vr});var St={};Rt(St,{getFormatType:()=>Er,getFormatTypeForBareElement:()=>wr,getFormatTypeForClassName:()=>br,getFormatTypes:()=>_t});var Zt=y(q()),_t=(0,Zt.createSelector)(e=>Object.values(e.formatTypes),e=>[e.formatTypes]);function Er(e,t){return e.formatTypes[t]}function wr(e,t){let r=_t(e);return r.find(({className:n,tagName:o})=>n===null&&t===o)||r.find(({className:n,tagName:o})=>n===null&&o==="*")}function br(e,t){return _t(e).find(({className:r})=>r===null?!1:` ${t} `.indexOf(` ${r} `)>=0)}var Ot={};Rt(Ot,{addFormatTypes:()=>xr,removeFormatTypes:()=>Tr});function xr(e){return{type:"ADD_FORMAT_TYPES",formatTypes:Array.isArray(e)?e:[e]}}function Tr(e){return{type:"REMOVE_FORMAT_TYPES",names:Array.isArray(e)?e:[e]}}var Fr="core/rich-text",A=(0,pt.createReduxStore)(Fr,{reducer:Jt,selectors:St,actions:Ot});(0,pt.register)(A);function Y(e,t){if(e===t)return!0;if(!e||!t||e.type!==t.type)return!1;let r=e.attributes,n=t.attributes;if(r===n)return!0;if(!r||!n)return!1;let o=Object.keys(r),c=Object.keys(n);if(o.length!==c.length)return!1;let i=o.length;for(let s=0;s<i;s++){let a=o[s];if(r[a]!==n[a])return!1}return!0}function R(e){let t=e.formats.slice();return t.forEach((r,n)=>{let o=t[n-1];if(o){let c=r.slice();c.forEach((i,s)=>{let a=o[s];Y(i,a)&&(c[s]=a)}),t[n]=c}}),{...e,formats:t}}function Gt(e,t,r){return e=e.slice(),e[t]=r,e}function dt(e,t,r=e.start,n=e.end){let{formats:o,activeFormats:c}=e,i=o.slice();if(r===n){let s=i[r]?.find(({type:a})=>a===t.type);if(s){let a=i[r].indexOf(s);for(;i[r]&&i[r][a]===s;)i[r]=Gt(i[r],a,t),r--;for(n++;i[n]&&i[n][a]===s;)i[n]=Gt(i[n],a,t),n++}}else{let s=1/0;for(let a=r;a<n;a++)if(i[a]){i[a]=i[a].filter(({type:f})=>f!==t.type);let u=i[a].length;u<s&&(s=u)}else i[a]=[],s=0;for(let a=r;a<n;a++)i[a].splice(s,0,t)}return R({...e,formats:i,activeFormats:[...c?.filter(({type:s})=>s!==t.type)||[],t]})}var Mt=y(q());function V({implementation:e},t){return V.body||(V.body=e.createHTMLDocument("").body),V.body.innerHTML=t,V.body}var et=y(Qt());function z(e,t=[]){let{formats:r,start:n,end:o,activeFormats:c}=e;if(n===void 0)return t;if(n===o){if(c)return c;let u=r[n-1]||t,f=r[n]||t;return u.length<f.length?u:f}if(!r[n])return t;let i=r.slice(n,o),s=[...i[0]],a=i.length;for(;a--;){let u=i[a];if(!u)return t;let f=s.length;for(;f--;){let m=s[f];u.find(p=>Y(m,p))||s.splice(f,1)}if(s.length===0)return t}return s||t}var It=y(q());function Dt(e){return(0,It.select)(A).getFormatType(e)}function ee(e,t){if(t)return e;let r={};for(let n in e){let o=n;n.startsWith("data-disable-rich-text-")&&(o=n.slice(23)),r[o]=e[n]}return r}function ht({type:e,tagName:t,attributes:r,unregisteredAttributes:n,object:o,boundaryClass:c,isEditableTree:i}){let s=Dt(e),a={};if(c&&i&&(a["data-rich-text-format-boundary"]="true"),!s)return r&&(a={...r,...a}),{type:e,attributes:ee(a,i),object:o};a={...n,...a};for(let u in r){let f=s.attributes?s.attributes[u]:!1;f?a[f]=r[u]:a[u]=r[u]}return s.className&&(a.class?a.class=`${s.className} ${a.class}`:a.class=s.className),{type:t||s.tagName,object:s.object,attributes:ee(a,i)}}function Nr(e,t,r){do if(e[r]!==t[r])return!1;while(r--);return!0}function gt({value:e,preserveWhiteSpace:t,createEmpty:r,append:n,getLastChild:o,getParent:c,isText:i,getText:s,remove:a,appendText:u,onStartIndex:f,onEndIndex:m,isEditableTree:p,placeholder:T}){let{formats:E,replacements:v,text:g,start:w,end:b}=e,d=E.length+1,C=r(),k=z(e),P=k[k.length-1],B,j;n(C,"");for(let x=0;x<d;x++){let h=g.charAt(x),N=p&&(!j||j===`
`),O=E[x],l=o(C);if(O&&O.forEach((D,$)=>{if(l&&B&&Nr(O,B,$)){l=o(l);return}let{type:G,tagName:tt,attributes:Ct,unregisteredAttributes:mt}=D,ur=p&&D===P,fr=c(l),mr=n(fr,ht({type:G,tagName:tt,attributes:Ct,unregisteredAttributes:mt,boundaryClass:ur,isEditableTree:p}));i(l)&&s(l).length===0&&a(l),l=n(mr,"")}),x===0&&(f&&w===0&&f(C,l),m&&b===0&&m(C,l)),h==="\uFFFC"){let D=v[x];if(!D)continue;let{type:$,attributes:G,innerHTML:tt}=D,Ct=Dt($);if(p&&$==="#comment")l=n(c(l),{type:"span",attributes:{contenteditable:"false","data-rich-text-comment":G["data-rich-text-comment"]}}),n(n(l,{type:"span"}),G["data-rich-text-comment"].trim());else if(!p&&$==="script")l=n(c(l),ht({type:"script",isEditableTree:p})),n(l,{html:decodeURIComponent(G["data-rich-text-script"])});else if(Ct?.contentEditable===!1){if(l=c(l),p){let mt={contenteditable:"false","data-rich-text-bogus":!0};w===x&&b===x+1&&(mt["data-rich-text-format-boundary"]=!0),l=n(l,{type:"span",attributes:mt}),p&&x+1===g.length&&n(c(l),"\uFEFF")}l=n(l,ht({...D,isEditableTree:p})),tt&&n(l,{html:tt})}else l=n(c(l),ht({...D,object:!0,isEditableTree:p}));l=n(c(l),"")}else!t&&h===`
`?(l=n(c(l),{type:"br",attributes:p?{"data-rich-text-line-break":"true"}:void 0,object:!0}),l=n(c(l),"")):i(l)?u(l,h):l=n(c(l),h);f&&w===x+1&&f(C,l),m&&b===x+1&&m(C,l),N&&x===g.length&&(n(c(l),"\uFEFF"),T&&g.length===0&&n(c(l),{type:"span",attributes:{"data-rich-text-placeholder":T,style:"pointer-events:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;"}})),B=O,j=h}return C}function J({value:e,preserveWhiteSpace:t}){let r=gt({value:e,preserveWhiteSpace:t,createEmpty:Ar,append:Cr,getLastChild:Lr,getParent:_r,isText:Sr,getText:Or,remove:Dr,appendText:Rr});return re(r.children)}function Ar(){return{}}function Lr({children:e}){return e&&e[e.length-1]}function Cr(e,t){return typeof t=="string"&&(t={text:t}),t.parent=e,e.children=e.children||[],e.children.push(t),t}function Rr(e,t){e.text+=t}function _r({parent:e}){return e}function Sr({text:e}){return typeof e=="string"}function Or({text:e}){return e}function Dr(e){let t=e.parent.children.indexOf(e);return t!==-1&&e.parent.children.splice(t,1),e}function Mr({type:e,attributes:t,object:r,children:n}){if(e==="#comment")return`<!--${t["data-rich-text-comment"]}-->`;let o="";for(let c in t)(0,et.isValidAttributeName)(c)&&(o+=` ${c}="${(0,et.escapeAttribute)(t[c])}"`);return r?`<${e}${o}>`:`<${e}${o}>${re(n)}</${e}>`}function re(e=[]){return e.map(t=>t.html!==void 0?t.html:t.text===void 0?Mr(t):(0,et.escapeEditableHTML)(t.text)).join("")}function rt({text:e}){return e.replace("\uFFFC","")}function Q(){return{formats:[],replacements:[],text:""}}function Hr({tagName:e,attributes:t}){let r;if(t&&t.class&&(r=(0,Mt.select)(A).getFormatTypeForClassName(t.class),r&&(t.class=` ${t.class} `.replace(` ${r.className} `," ").trim(),t.class||delete t.class)),r||(r=(0,Mt.select)(A).getFormatTypeForBareElement(e)),!r)return t?{type:e,attributes:t}:{type:e};if(r.__experimentalCreatePrepareEditableTree&&!r.__experimentalCreateOnChangeEditableValue)return null;if(!t)return{formatType:r,type:r.name,tagName:e};let n={},o={},c={...t};for(let i in r.attributes){let s=r.attributes[i];n[i]=c[s],delete c[s],typeof n[i]>"u"&&delete n[i]}for(let i in c)o[i]=t[i];return r.contentEditable===!1&&delete o.contenteditable,{formatType:r,type:r.name,tagName:e,attributes:n,unregisteredAttributes:o}}var _=class e{#t;static empty(){return new e}static fromPlainText(t){return new e(L({text:t}))}static fromHTMLString(t){return new e(L({html:t}))}static fromHTMLElement(t,r={}){let{preserveWhiteSpace:n=!1}=r,o=n?t:oe(t),c=new e(L({element:o}));return Object.defineProperty(c,"originalHTML",{value:t.innerHTML}),c}constructor(t=Q()){this.#t=t}toPlainText(){return rt(this.#t)}toHTMLString({preserveWhiteSpace:t}={}){return this.originalHTML||J({value:this.#t,preserveWhiteSpace:t})}valueOf(){return this.toHTMLString()}toString(){return this.toHTMLString()}toJSON(){return this.toHTMLString()}get length(){return this.text.length}get formats(){return this.#t.formats}get replacements(){return this.#t.replacements}get text(){return this.#t.text}};for(let e of Object.getOwnPropertyNames(String.prototype))_.prototype.hasOwnProperty(e)||Object.defineProperty(_.prototype,e,{value(...t){return this.toHTMLString()[e](...t)}});function L({element:e,text:t,html:r,range:n,__unstableIsEditableTree:o}={}){return r instanceof _?{text:r.text,formats:r.formats,replacements:r.replacements}:typeof t=="string"&&t.length>0?{formats:Array(t.length),replacements:Array(t.length),text:t}:(typeof r=="string"&&r.length>0&&(e=V(document,r)),typeof e!="object"?Q():ie({element:e,range:n,isEditableTree:o}))}function Z(e,t,r,n){if(!r)return;let{parentNode:o}=t,{startContainer:c,startOffset:i,endContainer:s,endOffset:a}=r,u=e.text.length;n.start!==void 0?e.start=u+n.start:t===c&&t.nodeType===t.TEXT_NODE?e.start=u+i:o===c&&t===c.childNodes[i]?e.start=u:o===c&&t===c.childNodes[i-1]?e.start=u+n.text.length:t===c&&(e.start=u),n.end!==void 0?e.end=u+n.end:t===s&&t.nodeType===t.TEXT_NODE?e.end=u+a:o===s&&t===s.childNodes[a-1]?e.end=u+n.text.length:o===s&&t===s.childNodes[a]?e.end=u:t===s&&(e.end=u+a)}function kr(e,t,r){if(!t)return;let{startContainer:n,endContainer:o}=t,{startOffset:c,endOffset:i}=t;return e===n&&(c=r(e.nodeValue.slice(0,c)).length),e===o&&(i=r(e.nodeValue.slice(0,i)).length),{startContainer:n,startOffset:c,endContainer:o,endOffset:i}}function oe(e,t=!0){let r=e.cloneNode(!0);return r.normalize(),Array.from(r.childNodes).forEach((n,o,c)=>{if(n.nodeType===n.TEXT_NODE){let i=n.nodeValue;/[\n\t\r\f]/.test(i)&&(i=i.replace(/[\n\t\r\f]+/g," ")),i.indexOf("  ")!==-1&&(i=i.replace(/ {2,}/g," ")),o===0&&i.startsWith(" ")?i=i.slice(1):t&&o===c.length-1&&i.endsWith(" ")&&(i=i.slice(0,-1)),n.nodeValue=i}else n.nodeType===n.ELEMENT_NODE&&n.replaceWith(oe(n,!1))}),r}var $r="\r";function ne(e){return e.replace(new RegExp(`[${"\uFEFF"}${"\uFFFC"}${$r}]`,"gu"),"")}function ie({element:e,range:t,isEditableTree:r}){let n=Q();if(!e)return n;if(!e.hasChildNodes())return Z(n,e,t,Q()),n;let o=e.childNodes.length;for(let i=0;i<o;i++){let s=e.childNodes[i],a=s.nodeName.toLowerCase();if(s.nodeType===s.TEXT_NODE){let m=ne(s.nodeValue);t=kr(s,t,ne),Z(n,s,t,{text:m}),n.formats.length+=m.length,n.replacements.length+=m.length,n.text+=m;continue}if(s.nodeType===s.COMMENT_NODE||s.nodeType===s.ELEMENT_NODE&&s.tagName==="SPAN"&&s.hasAttribute("data-rich-text-comment")){let m={formats:[,],replacements:[{type:"#comment",attributes:{"data-rich-text-comment":s.nodeType===s.COMMENT_NODE?s.nodeValue:s.getAttribute("data-rich-text-comment")}}],text:"\uFFFC"};Z(n,s,t,m),U(n,m);continue}if(s.nodeType!==s.ELEMENT_NODE)continue;if(r&&a==="br"&&!s.getAttribute("data-rich-text-line-break")){Z(n,s,t,Q());continue}if(a==="script"){let m={formats:[,],replacements:[{type:a,attributes:{"data-rich-text-script":s.getAttribute("data-rich-text-script")||encodeURIComponent(s.innerHTML)}}],text:"\uFFFC"};Z(n,s,t,m),U(n,m);continue}if(a==="br"){Z(n,s,t,Q()),U(n,L({text:`
`}));continue}let u=Hr({tagName:a,attributes:Vr({element:s})});if(u?.formatType?.contentEditable===!1){delete u.formatType,Z(n,s,t,Q()),U(n,{formats:[,],replacements:[{...u,innerHTML:s.innerHTML}],text:"\uFFFC"});continue}u&&delete u.formatType;let f=ie({element:s,range:t,isEditableTree:r});if(Z(n,s,t,f),!u||s.getAttribute("data-rich-text-placeholder")||s.getAttribute("data-rich-text-bogus"))U(n,f);else if(f.text.length===0)u.attributes&&U(n,{formats:[,],replacements:[u],text:"\uFFFC"});else{let m=function(p){if(m.formats===p)return m.newFormats;let T=p?[u,...p]:[u];return m.formats=p,m.newFormats=T,T};var c=m;m.newFormats=[u],U(n,{...f,formats:Array.from(f.formats,m)})}}return n}function Vr({element:e}){if(!e.hasAttributes())return;let t=e.attributes.length,r;for(let n=0;n<t;n++){let{name:o,value:c}=e.attributes[n];if(o.indexOf("data-rich-text-")===0)continue;let i=/^on/i.test(o)?"data-disable-rich-text-"+o:o;r=r||{},r[i]=c}return r}function U(e,t){return e.formats=e.formats.concat(t.formats),e.replacements=e.replacements.concat(t.replacements),e.text+=t.text,e}function se(...e){return R(e.reduce(U,L()))}function nt(e,t){return z(e).find(({type:r})=>r===t)}function ce({start:e,end:t,replacements:r,text:n}){if(!(e+1!==t||n[e]!=="\uFFFC"))return r[e]}function ot({start:e,end:t}){if(!(e===void 0||t===void 0))return e===t}function ae({text:e}){return e.length===0}function ue(e,t=""){return typeof t=="string"&&(t=L({text:t})),R(e.reduce((r,{formats:n,replacements:o,text:c})=>({formats:r.formats.concat(t.formats,n),replacements:r.replacements.concat(t.replacements,o),text:r.text+t.text+c})))}var it=y(q());function fe(e,t){if(t={name:e,...t},typeof t.name!="string"){window.console.error("Format names must be strings.");return}if(!/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(t.name)){window.console.error("Format names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-format");return}if((0,it.select)(A).getFormatType(t.name)){window.console.error('Format "'+t.name+'" is already registered.');return}if(typeof t.tagName!="string"||t.tagName===""){window.console.error("Format tag names must be a string.");return}if((typeof t.className!="string"||t.className==="")&&t.className!==null){window.console.error("Format class names must be a string, or null to handle bare elements.");return}if(!/^[_a-zA-Z]+[a-zA-Z0-9_-]*$/.test(t.className)){window.console.error("A class name must begin with a letter, followed by any number of hyphens, underscores, letters, or numbers.");return}if(t.className===null){let r=(0,it.select)(A).getFormatTypeForBareElement(t.tagName);if(r&&r.name!=="core/unknown"){window.console.error(`Format "${r.name}" is already registered to handle bare tag name "${t.tagName}".`);return}}else{let r=(0,it.select)(A).getFormatTypeForClassName(t.className);if(r){window.console.error(`Format "${r.name}" is already registered to handle class name "${t.className}".`);return}}if(!("title"in t)||t.title===""){window.console.error('The format "'+t.name+'" must have a title.');return}if("keywords"in t&&t.keywords.length>3){window.console.error('The format "'+t.name+'" can have a maximum of 3 keywords.');return}if(typeof t.title!="string"){window.console.error("Format titles must be strings.");return}return(0,it.dispatch)(A).addFormatTypes(t),t}function yt(e,t,r=e.start,n=e.end){let{formats:o,activeFormats:c}=e,i=o.slice();if(r===n){let s=i[r]?.find(({type:a})=>a===t);if(s){for(;i[r]?.find(a=>a===s);)Ht(i,r,t),r--;for(n++;i[n]?.find(a=>a===s);)Ht(i,n,t),n++}}else for(let s=r;s<n;s++)i[s]&&Ht(i,s,t);return R({...e,formats:i,activeFormats:c?.filter(({type:s})=>s!==t)||[]})}function Ht(e,t,r){let n=e[t].filter(({type:o})=>o!==r);n.length?e[t]=n:delete e[t]}function st(e,t,r=e.start,n=e.end){let{formats:o,replacements:c,text:i}=e;typeof t=="string"&&(t=L({text:t}));let s=r+t.text.length;return R({formats:o.slice(0,r).concat(t.formats,o.slice(n)),replacements:c.slice(0,r).concat(t.replacements,c.slice(n)),text:i.slice(0,r)+t.text+i.slice(n),start:s,end:s})}function vt(e,t,r){return st(e,L(),t,r)}function me({formats:e,replacements:t,text:r,start:n,end:o},c,i){return r=r.replace(c,(s,...a)=>{let u=a[a.length-2],f=i,m,p;return typeof f=="function"&&(f=i(s,...a)),typeof f=="object"?(m=f.formats,p=f.replacements,f=f.text):(m=Array(f.length),p=Array(f.length),e[u]&&(m=m.fill(e[u]))),e=e.slice(0,u).concat(m,e.slice(u+s.length)),t=t.slice(0,u).concat(p,t.slice(u+s.length)),n&&(n=o=u+f.length),f}),R({formats:e,replacements:t,text:r,start:n,end:o})}function le(e,t,r,n){return st(e,{formats:[,],replacements:[t],text:"\uFFFC"},r,n)}function Et(e,t=e.start,r=e.end){let{formats:n,replacements:o,text:c}=e;return t===void 0||r===void 0?{...e}:{formats:n.slice(t,r),replacements:o.slice(t,r),text:c.slice(t,r)}}function pe({formats:e,replacements:t,text:r,start:n,end:o},c){if(typeof c!="string")return Pr(...arguments);let i=0;return r.split(c).map(s=>{let a=i,u={formats:e.slice(a,a+s.length),replacements:t.slice(a,a+s.length),text:s};return i+=c.length+s.length,n!==void 0&&o!==void 0&&(n>=a&&n<i?u.start=n-a:n<a&&o>a&&(u.start=0),o>=a&&o<i?u.end=o-a:n<i&&o>i&&(u.end=s.length)),u})}function Pr({formats:e,replacements:t,text:r,start:n,end:o},c=n,i=o){if(n===void 0||o===void 0)return;let s={formats:e.slice(0,c),replacements:t.slice(0,c),text:r.slice(0,c)},a={formats:e.slice(i),replacements:t.slice(i),text:r.slice(i),start:0,end:0};return[s,a]}function wt(e,t){return e===t||e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}var kt="http://www.w3.org/1998/Math/MathML";function $t(e,t,r){let n=e.parentNode,o=0;for(;e=e.previousSibling;)o++;return r=[o,...r],n!==t&&(r=$t(n,t,r)),r}function de(e,t){for(t=[...t];e&&t.length>1;)e=e.childNodes[t.shift()];return{node:e,offset:t[0]}}function Br(e,t){if(t.html!==void 0)return e.innerHTML+=t.html;typeof t=="string"&&(t=e.ownerDocument.createTextNode(t));let{type:r,attributes:n}=t;if(r)if(r==="#comment")t=e.ownerDocument.createComment(n["data-rich-text-comment"]);else{let o=e.namespaceURI;r==="math"?t=e.ownerDocument.createElementNS(kt,r):o===kt?e.tagName==="MTEXT"?t=e.ownerDocument.createElement(r):t=e.ownerDocument.createElementNS(kt,r):t=e.ownerDocument.createElement(r);for(let c in n)t.setAttribute(c,n[c])}return e.appendChild(t)}function jr(e,t){e.appendData(t)}function qr({lastChild:e}){return e}function Ur({parentNode:e}){return e}function Kr(e){return e.nodeType===e.TEXT_NODE}function Wr({nodeValue:e}){return e}function zr(e){return e.parentNode.removeChild(e)}function Vt({value:e,prepareEditableTree:t,isEditableTree:r=!0,placeholder:n,doc:o=document}){let c=[],i=[];return t&&(e={...e,formats:t(e)}),{body:gt({value:e,createEmpty:()=>V(o,""),append:Br,getLastChild:qr,getParent:Ur,isText:Kr,getText:Wr,remove:zr,appendText:jr,onStartIndex(u,f){c=$t(f,u,[f.nodeValue.length])},onEndIndex(u,f){i=$t(f,u,[f.nodeValue.length])},isEditableTree:r,placeholder:n}),selection:{startPath:c,endPath:i}}}function he({value:e,current:t,prepareEditableTree:r,__unstableDomOnly:n,placeholder:o}){let{body:c,selection:i}=Vt({value:e,prepareEditableTree:r,placeholder:o,doc:t.ownerDocument});ge(c,t),e.start!==void 0&&!n&&Xr(i,t)}function ge(e,t){let r=0,n;for(;n=e.firstChild;){let o=t.childNodes[r];if(!o)t.appendChild(n);else if(o.isEqualNode(n))e.removeChild(n);else if(o.nodeName!==n.nodeName||o.nodeType===o.TEXT_NODE&&o.data!==n.data)t.replaceChild(n,o);else{let c=o.attributes,i=n.attributes;if(c){let s=c.length;for(;s--;){let{name:a}=c[s];n.getAttribute(a)||o.removeAttribute(a)}}if(i)for(let s=0;s<i.length;s++){let{name:a,value:u}=i[s];o.getAttribute(a)!==u&&o.setAttribute(a,u)}ge(n,o),e.removeChild(n)}r++}for(;t.childNodes[r];)t.removeChild(t.childNodes[r])}function Xr({startPath:e,endPath:t},r){let{node:n,offset:o}=de(r,e),{node:c,offset:i}=de(r,t),{ownerDocument:s}=r,{defaultView:a}=s,u=a.getSelection(),f=s.createRange();f.setStart(n,o),f.setEnd(c,i);let{activeElement:m}=s;if(u.rangeCount>0){if(wt(f,u.getRangeAt(0)))return;u.removeAllRanges()}u.addRange(f),m!==s.activeElement&&m instanceof a.HTMLElement&&m.focus()}var Pt=y(ve()),ct=y(we());function be(e,t){return nt(e,t.type)?(t.title&&(0,Pt.speak)((0,ct.sprintf)((0,ct.__)("%s removed."),t.title),"assertive"),yt(e,t.type)):(t.title&&(0,Pt.speak)((0,ct.sprintf)((0,ct.__)("%s applied."),t.title),"assertive"),dt(e,t))}var bt=y(q());function xe(e){let t=(0,bt.select)(A).getFormatType(e);if(!t){window.console.error(`Format ${e} is not registered.`);return}return(0,bt.dispatch)(A).removeFormatTypes(e),t}var Ae=y(I()),Le=y(Ne());function Ce({ref:e,value:t,settings:r={}}){(0,Le.default)("`useAnchorRef` hook",{since:"6.1",alternative:"`useAnchor` hook"});let{tagName:n,className:o,name:c}=r,i=c?nt(t,c):void 0;return(0,Ae.useMemo)(()=>{if(!e.current)return;let{ownerDocument:{defaultView:s}}=e.current,a=s.getSelection();if(!a.rangeCount)return;let u=a.getRangeAt(0);if(!i)return u;let f=u.startContainer;for(f=f.nextElementSibling||f;f.nodeType!==f.ELEMENT_NODE;)f=f.parentNode;return f.closest(n+(o?"."+o:""))},[i,t.start,t.end,n,o])}var _e=y(xt()),Tt=y(I());function Jr(e,t,r,n){let o=e.startContainer;if(o.nodeType===o.TEXT_NODE&&e.startOffset===o.length&&o.nextSibling)for(o=o.nextSibling;o.firstChild;)o=o.firstChild;if(o.nodeType!==o.ELEMENT_NODE&&(o=o.parentElement),!o||o===t||!t.contains(o))return;let c=r+(n?"."+n:"");for(;o!==t;){if(o.matches(c))return o;o=o.parentElement}}function Zr(e,t){return{contextElement:t,getBoundingClientRect(){return t.contains(e.startContainer)?e.getBoundingClientRect():t.getBoundingClientRect()}}}function Bt(e,t,r){if(!e)return;let{ownerDocument:n}=e,{defaultView:o}=n,c=o.getSelection();if(!c||!c.rangeCount)return;let i=c.getRangeAt(0);if(!i||!i.startContainer)return;let s=Jr(i,e,t,r);return s||Zr(i,e)}function Se({editableContentElement:e,settings:t={}}){let{tagName:r,className:n,isActive:o}=t,[c,i]=(0,Tt.useState)(()=>Bt(e,r,n)),s=(0,_e.usePrevious)(o);return(0,Tt.useLayoutEffect)(()=>{if(!e)return;function a(){i(Bt(e,r,n))}function u(){m.addEventListener("selectionchange",a)}function f(){m.removeEventListener("selectionchange",a)}let{ownerDocument:m}=e;return(e===m.activeElement||!s&&o||s&&!o)&&(i(Bt(e,r,n)),u()),e.addEventListener("focusin",u),e.addEventListener("focusout",f),()=>{f(),e.removeEventListener("focusin",u),e.removeEventListener("focusout",f)}},[e,r,n,o,s]),c}var H=y(I()),Lt=y(xt()),sr=y(q());var Oe=y(I()),Gr="pre-wrap",Yr="1px";function De(){return(0,Oe.useCallback)(e=>{e&&(e.style.whiteSpace=Gr,e.style.minWidth=Yr)},[])}var Qr={grad:.9,turn:360,rad:360/(2*Math.PI)},K=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},F=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},S=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},qe=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Me=function(e){return{r:S(e.r,0,255),g:S(e.g,0,255),b:S(e.b,0,255),a:S(e.a)}},jt=function(e){return{r:F(e.r),g:F(e.g),b:F(e.b),a:F(e.a,3)}},Ir=/^#([0-9a-f]{3,8})$/i,Ft=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Ue=function(e){var t=e.r,r=e.g,n=e.b,o=e.a,c=Math.max(t,r,n),i=c-Math.min(t,r,n),s=i?c===t?(r-n)/i:c===r?2+(n-t)/i:4+(t-r)/i:0;return{h:60*(s<0?s+6:s),s:c?i/c*100:0,v:c/255*100,a:o}},Ke=function(e){var t=e.h,r=e.s,n=e.v,o=e.a;t=t/360*6,r/=100,n/=100;var c=Math.floor(t),i=n*(1-r),s=n*(1-(t-c)*r),a=n*(1-(1-t+c)*r),u=c%6;return{r:255*[n,s,i,i,a,n][u],g:255*[a,n,n,s,i,i][u],b:255*[i,i,a,n,n,s][u],a:o}},He=function(e){return{h:qe(e.h),s:S(e.s,0,100),l:S(e.l,0,100),a:S(e.a)}},ke=function(e){return{h:F(e.h),s:F(e.s),l:F(e.l),a:F(e.a,3)}},$e=function(e){return Ke((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},ft=function(e){return{h:(t=Ue(e)).h,s:(o=(200-(r=t.s))*(n=t.v)/100)>0&&o<200?r*n/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,r,n,o},tn=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,en=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rn=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nn=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ve={string:[[function(e){var t=Ir.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?F(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?F(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=rn.exec(e)||nn.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Me({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=tn.exec(e)||en.exec(e);if(!t)return null;var r,n,o=He({h:(r=t[1],n=t[2],n===void 0&&(n="deg"),Number(r)*(Qr[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return $e(o)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,o=e.a,c=o===void 0?1:o;return K(t)&&K(r)&&K(n)?Me({r:Number(t),g:Number(r),b:Number(n),a:Number(c)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,o=e.a,c=o===void 0?1:o;if(!K(t)||!K(r)||!K(n))return null;var i=He({h:Number(t),s:Number(r),l:Number(n),a:Number(c)});return $e(i)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,o=e.a,c=o===void 0?1:o;if(!K(t)||!K(r)||!K(n))return null;var i=(function(s){return{h:qe(s.h),s:S(s.s,0,100),v:S(s.v,0,100),a:S(s.a)}})({h:Number(t),s:Number(r),v:Number(n),a:Number(c)});return Ke(i)},"hsv"]]},Pe=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},on=function(e){return typeof e=="string"?Pe(e.trim(),Ve.string):typeof e=="object"&&e!==null?Pe(e,Ve.object):[null,void 0]};var qt=function(e,t){var r=ft(e);return{h:r.h,s:S(r.s+100*t,0,100),l:r.l,a:r.a}},Ut=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Be=function(e,t){var r=ft(e);return{h:r.h,s:r.s,l:S(r.l+100*t,0,100),a:r.a}},je=(function(){function e(t){this.parsed=on(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return F(Ut(this.rgba),2)},e.prototype.isDark=function(){return Ut(this.rgba)<.5},e.prototype.isLight=function(){return Ut(this.rgba)>=.5},e.prototype.toHex=function(){return t=jt(this.rgba),r=t.r,n=t.g,o=t.b,i=(c=t.a)<1?Ft(F(255*c)):"","#"+Ft(r)+Ft(n)+Ft(o)+i;var t,r,n,o,c,i},e.prototype.toRgb=function(){return jt(this.rgba)},e.prototype.toRgbString=function(){return t=jt(this.rgba),r=t.r,n=t.g,o=t.b,(c=t.a)<1?"rgba("+r+", "+n+", "+o+", "+c+")":"rgb("+r+", "+n+", "+o+")";var t,r,n,o,c},e.prototype.toHsl=function(){return ke(ft(this.rgba))},e.prototype.toHslString=function(){return t=ke(ft(this.rgba)),r=t.h,n=t.s,o=t.l,(c=t.a)<1?"hsla("+r+", "+n+"%, "+o+"%, "+c+")":"hsl("+r+", "+n+"%, "+o+"%)";var t,r,n,o,c},e.prototype.toHsv=function(){return t=Ue(this.rgba),{h:F(t.h),s:F(t.s),v:F(t.v),a:F(t.a,3)};var t},e.prototype.invert=function(){return M({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),M(qt(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),M(qt(this.rgba,-t))},e.prototype.grayscale=function(){return M(qt(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),M(Be(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),M(Be(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?M({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):F(this.rgba.a,3);var r},e.prototype.hue=function(t){var r=ft(this.rgba);return typeof t=="number"?M({h:t,s:r.s,l:r.l,a:r.a}):F(r.h)},e.prototype.isEqual=function(t){return this.toHex()===M(t).toHex()},e})(),M=function(e){return e instanceof je?e:new je(e)};var Nt=y(I());function We({record:e}){let t=(0,Nt.useRef)(),{activeFormats:r=[],replacements:n,start:o}=e.current,c=n[o];return(0,Nt.useEffect)(()=>{if((!r||!r.length)&&!c)return;let i="*[data-rich-text-format-boundary]",s=t.current.querySelector(i);if(!s)return;let{ownerDocument:a}=s,{defaultView:u}=a,f=u.getComputedStyle(s),m=M(f.color).alpha(.2).toRgbString(),p=`.rich-text:focus ${i}`,T=`background-color: ${m}`,E=`${p} {${T}}`,v="rich-text-boundary-style",g=a.getElementById(v);g||(g=a.createElement("style"),g.id=v,a.head.appendChild(g)),g.innerHTML!==E&&(g.innerHTML=E)},[r,c]),t}var ut=y(I()),or=y(xt());var ze=e=>t=>{function r(o){let{record:c}=e.current,{ownerDocument:i}=t;if(ot(c.current)||!t.contains(i.activeElement))return;let s=Et(c.current),a=rt(s),u=J({value:s});o.clipboardData.setData("text/plain",a),o.clipboardData.setData("text/html",u),o.clipboardData.setData("rich-text","true"),o.preventDefault(),o.type==="cut"&&i.execCommand("delete")}let{defaultView:n}=t.ownerDocument;return n.addEventListener("copy",r),n.addEventListener("cut",r),()=>{n.removeEventListener("copy",r),n.removeEventListener("cut",r)}};var Xe=()=>e=>{function t(n){let{target:o}=n;if(o===e||o.textContent&&o.isContentEditable)return;let{ownerDocument:c}=o,{defaultView:i}=c,s=i.getSelection();if(s.containsNode(o))return;let a=c.createRange(),u=o.isContentEditable?o:o.closest("[contenteditable]");a.selectNode(u),s.removeAllRanges(),s.addRange(a),n.preventDefault()}function r(n){n.relatedTarget&&!e.contains(n.relatedTarget)&&n.relatedTarget.tagName==="A"&&t(n)}return e.addEventListener("click",t),e.addEventListener("focusin",r),()=>{e.removeEventListener("click",t),e.removeEventListener("focusin",r)}};var at=y(Kt());var Ze=[],Ge=e=>t=>{function r(n){let{keyCode:o,shiftKey:c,altKey:i,metaKey:s,ctrlKey:a}=n;if(c||i||s||a||o!==at.LEFT&&o!==at.RIGHT)return;let{record:u,applyRecord:f,forceRender:m}=e.current,{text:p,formats:T,start:E,end:v,activeFormats:g=[]}=u.current,w=ot(u.current),{ownerDocument:b}=t,{defaultView:d}=b,{direction:C}=d.getComputedStyle(t),k=C==="rtl"?at.RIGHT:at.LEFT,P=n.keyCode===k;if(w&&g.length===0&&(E===0&&P||v===p.length&&!P)||!w)return;let B=T[E-1]||Ze,j=T[E]||Ze,x=P?B:j,h=g.every((G,tt)=>G===x[tt]),N=g.length;if(h?N<x.length&&N++:N--,N===g.length){u.current._newActiveFormats=x;return}n.preventDefault();let D=(h?x:P?j:B).slice(0,N),$={...u.current,activeFormats:D};u.current=$,f($),m()}return t.addEventListener("keydown",r),()=>{t.removeEventListener("keydown",r)}};var At=y(Kt());var Ye=e=>t=>{function r(n){let{keyCode:o}=n,{createRecord:c,handleChange:i}=e.current;if(n.defaultPrevented||o!==At.DELETE&&o!==At.BACKSPACE)return;let s=c(),{start:a,end:u,text:f}=s;a===0&&u!==0&&u===f.length&&(i(vt(s)),n.preventDefault())}return t.addEventListener("keydown",r),()=>{t.removeEventListener("keydown",r)}};function Qe({value:e,start:t,end:r,formats:n}){let o=Math.min(t,r),c=Math.max(t,r),i=e.formats[o-1]||[],s=e.formats[c]||[];for(e.activeFormats=n.map((a,u)=>{if(i[u]){if(Y(a,i[u]))return i[u]}else if(s[u]&&Y(a,s[u]))return s[u];return a});--r>=t;)e.activeFormats.length>0?e.formats[r]=e.activeFormats:delete e.formats[r];return e}var sn=new Set(["insertParagraph","insertOrderedList","insertUnorderedList","insertHorizontalRule","insertLink"]),Ie=[],tr="data-rich-text-placeholder";function cn(e){let t=e.getSelection(),{anchorNode:r,anchorOffset:n}=t;if(r.nodeType!==r.ELEMENT_NODE)return;let o=r.childNodes[n];!o||o.nodeType!==o.ELEMENT_NODE||!o.hasAttribute(tr)||t.collapseToStart()}var er=e=>t=>{let{ownerDocument:r}=t,{defaultView:n}=r,o=!1;function c(f){if(o)return;let m;f&&(m=f.inputType);let{record:p,applyRecord:T,createRecord:E,handleChange:v}=e.current;if(m&&(m.indexOf("format")===0||sn.has(m))){T(p.current);return}let g=E(),{start:w,activeFormats:b=[]}=p.current,d=Qe({value:g,start:w,end:g.start,formats:b});v(d)}function i(){let{record:f,applyRecord:m,createRecord:p,onSelectionChange:T}=e.current;if(t.contentEditable!=="true")return;if(r.activeElement!==t){r.removeEventListener("selectionchange",i);return}if(o)return;let{start:E,end:v,text:g}=p(),w=f.current;if(g!==w.text){c();return}if(E===w.start&&v===w.end){w.text.length===0&&E===0&&cn(n);return}let b={...w,start:E,end:v,activeFormats:w._newActiveFormats,_newActiveFormats:void 0},d=z(b,Ie);b.activeFormats=d,f.current=b,m(b,{domOnly:!0}),T(E,v)}function s(){o=!0,r.removeEventListener("selectionchange",i),t.querySelector(`[${tr}]`)?.remove()}function a(){o=!1,c({inputType:"insertText"}),r.addEventListener("selectionchange",i)}function u(){let{record:f,isSelected:m,onSelectionChange:p,applyRecord:T}=e.current;t.parentElement.closest('[contenteditable="true"]')||(m?T(f.current,{domOnly:!0}):f.current={...f.current,start:void 0,end:void 0,activeFormats:Ie},p(f.current.start,f.current.end),window.queueMicrotask(i),r.addEventListener("selectionchange",i))}return t.addEventListener("input",c),t.addEventListener("compositionstart",s),t.addEventListener("compositionend",a),t.addEventListener("focus",u),()=>{t.removeEventListener("input",c),t.removeEventListener("compositionstart",s),t.removeEventListener("compositionend",a),t.removeEventListener("focus",u)}};var rr=()=>e=>{let{ownerDocument:t}=e,{defaultView:r}=t,n=r?.getSelection(),o;function c(){return n.rangeCount?n.getRangeAt(0):null}function i(s){let a=s.type==="keydown"?"keyup":"pointerup";function u(){t.removeEventListener(a,f),t.removeEventListener("selectionchange",u),t.removeEventListener("input",u)}function f(){u(),!wt(o,c())&&t.dispatchEvent(new Event("selectionchange"))}t.addEventListener(a,f),t.addEventListener("selectionchange",u),t.addEventListener("input",u),o=c()}return e.addEventListener("pointerdown",i),e.addEventListener("keydown",i),()=>{e.removeEventListener("pointerdown",i),e.removeEventListener("keydown",i)}};function nr(){return e=>{let{ownerDocument:t}=e,{defaultView:r}=t,n=null;function o(i){i.defaultPrevented||i.target!==e&&i.target.contains(e)&&(n=e.getAttribute("contenteditable"),e.setAttribute("contenteditable","false"),r.getSelection().removeAllRanges())}function c(){n!==null&&(e.setAttribute("contenteditable",n),n=null)}return r.addEventListener("pointerdown",o),r.addEventListener("pointerup",c),()=>{r.removeEventListener("pointerdown",o),r.removeEventListener("pointerup",c)}}}var an=[ze,Xe,Ge,Ye,er,rr,nr];function ir(e){let t=(0,ut.useRef)(e);(0,ut.useInsertionEffect)(()=>{t.current=e});let r=(0,ut.useMemo)(()=>an.map(n=>n(t)),[t]);return(0,or.useRefEffect)(n=>{let o=r.map(c=>c(n));return()=>{o.forEach(c=>c())}},[r])}function cr({value:e="",selectionStart:t,selectionEnd:r,placeholder:n,onSelectionChange:o,preserveWhiteSpace:c,onChange:i,__unstableDisableFormats:s,__unstableIsSelected:a,__unstableDependencies:u=[],__unstableAfterParse:f,__unstableBeforeSerialize:m,__unstableAddInvisibleFormats:p}){let T=(0,sr.useRegistry)(),[,E]=(0,H.useReducer)(()=>({})),v=(0,H.useRef)();function g(){let{ownerDocument:{defaultView:h}}=v.current,N=h.getSelection(),O=N.rangeCount>0?N.getRangeAt(0):null;return L({element:v.current,range:O,__unstableIsEditableTree:!0})}function w(h,{domOnly:N}={}){he({value:h,current:v.current,prepareEditableTree:p,__unstableDomOnly:N,placeholder:n})}let b=(0,H.useRef)(e),d=(0,H.useRef)();function C(){b.current=e,d.current=e,e instanceof _||(d.current=e?_.fromHTMLString(e,{preserveWhiteSpace:c}):_.empty()),d.current={text:d.current.text,formats:d.current.formats,replacements:d.current.replacements},s&&(d.current.formats=Array(e.length),d.current.replacements=Array(e.length)),f&&(d.current.formats=f(d.current)),d.current.start=t,d.current.end=r}let k=(0,H.useRef)(!1);d.current?(t!==d.current.start||r!==d.current.end)&&(k.current=a,d.current={...d.current,start:t,end:r,activeFormats:void 0}):(k.current=a,C());function P(h){if(d.current=h,w(h),s)b.current=h.text;else{let $=m?m(h):h.formats;h={...h,formats:$},typeof e=="string"?b.current=J({value:h,preserveWhiteSpace:c}):b.current=new _(h)}let{start:N,end:O,formats:l,text:D}=d.current;T.batch(()=>{o(N,O),i(b.current,{__unstableFormats:l,__unstableText:D})}),E()}function B(){let h=b.current;C();let N=h&&typeof h=="string"&&typeof e=="string"&&h.length!==e.length,O=v.current?.contains(v.current.ownerDocument.activeElement),l=N&&!O;w(d.current,{domOnly:l})}let j=(0,H.useRef)(!1);(0,H.useLayoutEffect)(()=>{j.current&&e!==b.current&&(B(),E())},[e]),(0,H.useLayoutEffect)(()=>{k.current&&(v.current.ownerDocument.activeElement!==v.current&&v.current.focus(),w(d.current),k.current=!1)},[k.current]);let x=(0,Lt.useMergeRefs)([v,De(),We({record:d}),ir({record:d,handleChange:P,applyRecord:w,createRecord:g,isSelected:a,onSelectionChange:o,forceRender:E}),(0,Lt.useRefEffect)(()=>{B(),j.current=!0},[n,...u])]);return{value:d.current,getValue:()=>d.current,onChange:P,ref:x}}function ar(){}return yr(un);})();
//# sourceMappingURL=index.min.js.map
