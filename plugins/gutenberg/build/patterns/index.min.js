var wp;(wp||={}).patterns=(()=>{var Aa=Object.create;var wt=Object.defineProperty;var La=Object.getOwnPropertyDescriptor;var Ma=Object.getOwnPropertyNames;var Ia=Object.getPrototypeOf,Ua=Object.prototype.hasOwnProperty;var k=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports),Ft=(t,a)=>{for(var r in a)wt(t,r,{get:a[r],enumerable:!0})},_e=(t,a,r,i)=>{if(a&&typeof a=="object"||typeof a=="function")for(let s of Ma(a))!Ua.call(t,s)&&s!==r&&wt(t,s,{get:()=>a[s],enumerable:!(i=La(a,s))||i.enumerable});return t};var e=(t,a,r)=>(r=t!=null?Aa(Ia(t)):{},_e(a||!t||!t.__esModule?wt(r,"default",{value:t,enumerable:!0}):r,t)),ja=t=>_e(wt({},"__esModule",{value:!0}),t);var T=k((ar,ye)=>{ye.exports=window.wp.data});var pt=k((or,ve)=>{ve.exports=window.wp.blocks});var V=k((sr,ke)=>{ke.exports=window.wp.coreData});var Y=k((lr,we)=>{we.exports=window.wp.blockEditor});var Ee=k((mr,Be)=>{Be.exports=window.wp.privateApis});var v=k((hr,Oe)=>{Oe.exports=window.ReactJSXRuntime});var R=k((_r,De)=>{De.exports=window.wp.components});var L=k((yr,Ae)=>{Ae.exports=window.wp.element});var B=k((br,Le)=>{Le.exports=window.wp.i18n});var it=k((xr,ze)=>{ze.exports=window.wp.notices});var Ye=k((Tr,Ve)=>{Ve.exports=window.wp.compose});var Et=k((Pr,Fe)=>{Fe.exports=window.wp.htmlEntities});var te=k((Vr,ia)=>{ia.exports=window.wp.primitives});var ua=k((Qr,da)=>{da.exports=window.wp.url});var me=k((lo,ya)=>{ya.exports=window.wp.a11y});var tr={};Ft(tr,{privateApis:()=>Oa,store:()=>A});var Bt=e(T());var be=e(T());function za(t={},a){return a?.type==="SET_EDITING_PATTERN"?{...t,[a.clientId]:a.isEditing}:t}var Se=(0,be.combineReducers)({isEditingPattern:za});var Ht={};Ft(Ht,{convertSyncedPatternToStatic:()=>Fa,createPattern:()=>Va,createPatternFromFile:()=>Ya,setEditingPattern:()=>Ha});var Pt=e(pt()),Te=e(V()),Tt=e(Y());var et={theme:"pattern",user:"wp_block"},Ct="all-patterns",Ce="my-patterns",xe=["core","pattern-directory/core","pattern-directory/featured"],S={full:"fully",unsynced:"unsynced"},xt={"core/paragraph":["content"],"core/heading":["content"],"core/button":["text","url","linkTarget","rel"],"core/image":["id","url","title","alt","caption"]},lt="core/pattern-overrides";var Va=(t,a,r,i)=>async({registry:s})=>{let m=a===S.unsynced?{wp_pattern_sync_status:a}:void 0,f={title:t,content:r,status:"publish",meta:m,wp_pattern_category:i};return await s.dispatch(Te.store).saveEntityRecord("postType","wp_block",f)},Ya=(t,a)=>async({dispatch:r})=>{let i=await t.text(),s;try{s=JSON.parse(i)}catch{throw new Error("Invalid JSON file")}if(s.__file!=="wp_block"||!s.title||!s.content||typeof s.title!="string"||typeof s.content!="string"||s.syncStatus&&typeof s.syncStatus!="string")throw new Error("Invalid pattern JSON file");return await r.createPattern(s.title,s.syncStatus,s.content,a)},Fa=t=>({registry:a})=>{let r=a.select(Tt.store).getBlock(t),i=r.attributes?.content;function s(f){return f.map(o=>{let l=o.attributes.metadata;if(l&&(l={...l},delete l.id,delete l.bindings,i?.[l.name]))for(let[n,d]of Object.entries(i[l.name]))(0,Pt.getBlockType)(o.name)?.attributes[n]&&(o.attributes[n]=d);return(0,Pt.cloneBlock)(o,{metadata:l&&Object.keys(l).length>0?l:void 0},s(o.innerBlocks))})}let m=a.select(Tt.store).getBlocks(r.clientId);a.dispatch(Tt.store).replaceBlocks(r.clientId,s(m))};function Ha(t,a){return{type:"SET_EDITING_PATTERN",clientId:t,isEditing:a}}var Pe="core/patterns";var Gt={};Ft(Gt,{isEditingPattern:()=>Ga});function Ga(t,a){return t.isEditingPattern[a]}var Re=e(Ee()),{lock:Ne,unlock:P}=(0,Re.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/patterns");var qa={reducer:Se},A=(0,Bt.createReduxStore)(Pe,{...qa});(0,Bt.register)(A);P(A).registerPrivateActions(Ht);P(A).registerPrivateSelectors(Gt);var Wt=e(v()),gt=e(Y()),Me=e(R()),Jt=e(T()),Ie=e(L()),Ue=e(B());function ct(t){return Object.keys(xt).includes(t.name)&&!!t.attributes.metadata?.name&&!!t.attributes.metadata?.bindings&&Object.values(t.attributes.metadata.bindings).some(a=>a.source==="core/pattern-overrides")}function qt(t){return t.some(a=>ct(a)?!0:qt(a.innerBlocks))}var{BlockQuickNavigation:Wa}=P(gt.privateApis);function je(){let t=(0,Jt.useSelect)(i=>i(gt.store).getClientIdsWithDescendants(),[]),{getBlock:a}=(0,Jt.useSelect)(gt.store),r=(0,Ie.useMemo)(()=>t.filter(i=>{let s=a(i);return ct(s)}),[t,a]);return r?.length?(0,Wt.jsx)(Me.PanelBody,{title:(0,Ue.__)("Overrides"),children:(0,Wt.jsx)(Wa,{clientIds:r})}):null}var N=e(v()),E=e(R()),J=e(B()),ht=e(L()),_t=e(T()),Xe=e(it()),Ze=e(V());var He=e(v()),Ge=e(B()),Rt=e(L()),qe=e(R()),We=e(Ye()),Je=e(Et()),Ja=t=>(0,Je.decodeEntities)(t),Nt="wp_pattern_category";function $e({categoryTerms:t,onChange:a,categoryMap:r}){let[i,s]=(0,Rt.useState)(""),m=(0,We.useDebounce)(s,500),f=(0,Rt.useMemo)(()=>Array.from(r.values()).map(l=>Ja(l.label)).filter(l=>i!==""?l.toLowerCase().includes(i.toLowerCase()):!0).sort((l,n)=>l.localeCompare(n)),[i,r]);function o(l){let n=l.reduce((d,p)=>(d.some(g=>g.toLowerCase()===p.toLowerCase())||d.push(p),d),[]);a(n)}return(0,He.jsx)(qe.FormTokenField,{className:"patterns-menu-items__convert-modal-categories",value:t,suggestions:f,onChange:o,onInputChange:m,label:(0,Ge.__)("Categories"),tokenizeOnBlur:!0,__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})}var Ot=e(T()),$t=e(V()),Ke=e(L());function Dt(){let{saveEntityRecord:t,invalidateResolution:a}=(0,Ot.useDispatch)($t.store),{corePatternCategories:r,userPatternCategories:i}=(0,Ot.useSelect)(f=>{let{getUserPatternCategories:o,getBlockPatternCategories:l}=f($t.store);return{corePatternCategories:l(),userPatternCategories:o()}},[]),s=(0,Ke.useMemo)(()=>{let f=new Map;return i.forEach(o=>{f.set(o.label.toLowerCase(),{label:o.label,name:o.name,id:o.id})}),r.forEach(o=>{!f.has(o.label.toLowerCase())&&o.name!=="query"&&f.set(o.label.toLowerCase(),{label:o.label,name:o.name})}),f},[i,r]);async function m(f){try{let o=s.get(f.toLowerCase());if(o?.id)return o.id;let l=o?{name:o.label,slug:o.name}:{name:f},n=await t("taxonomy",Nt,l,{throwOnError:!0});return a("getUserPatternCategories"),n.id}catch(o){if(o.code!=="term_exists")throw o;return o.data.term_id}}return{categoryMap:s,findOrCreateTerm:m}}function ft({className:t="patterns-menu-items__convert-modal",modalTitle:a,...r}){let i=(0,_t.useSelect)(s=>s(Ze.store).getPostType(et.user)?.labels?.add_new_item,[]);return(0,N.jsx)(E.Modal,{title:a||i,onRequestClose:r.onClose,overlayClassName:t,focusOnMount:"firstContentElement",size:"small",children:(0,N.jsx)(Kt,{...r})})}function Kt({confirmLabel:t=(0,J.__)("Add"),defaultCategories:a=[],content:r,onClose:i,onError:s,onSuccess:m,defaultSyncType:f=S.full,defaultTitle:o=""}){let[l,n]=(0,ht.useState)(f),[d,p]=(0,ht.useState)(a),[g,h]=(0,ht.useState)(o),[u,c]=(0,ht.useState)(!1),{createPattern:x}=P((0,_t.useDispatch)(A)),{createErrorNotice:w}=(0,_t.useDispatch)(Xe.store),{categoryMap:Q,findOrCreateTerm:ut}=Dt();async function D(q,tt){if(!(!g||u))try{c(!0);let y=await Promise.all(d.map(W=>ut(W))),ge=await x(q,tt,typeof r=="function"?r():r,y);m({pattern:ge,categoryId:Ct})}catch(y){w(y.message,{type:"snackbar",id:"pattern-create"}),s?.()}finally{c(!1),p([]),h("")}}return(0,N.jsx)("form",{onSubmit:q=>{q.preventDefault(),D(g,l)},children:(0,N.jsxs)(E.__experimentalVStack,{spacing:"5",children:[(0,N.jsx)(E.TextControl,{label:(0,J.__)("Name"),value:g,onChange:h,placeholder:(0,J.__)("My pattern"),className:"patterns-create-modal__name-input",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,N.jsx)($e,{categoryTerms:d,onChange:p,categoryMap:Q}),(0,N.jsx)(E.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,J._x)("Synced","pattern (singular)"),help:(0,J.__)("Sync this pattern across multiple locations."),checked:l===S.full,onChange:()=>{n(l===S.full?S.unsynced:S.full)}}),(0,N.jsxs)(E.__experimentalHStack,{justify:"right",children:[(0,N.jsx)(E.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:()=>{i(),h("")},children:(0,J.__)("Cancel")}),(0,N.jsx)(E.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit","aria-disabled":!g||u,isBusy:u,children:t})]})]})})}var Qe=e(v()),ta=e(V()),At=e(T()),F=e(B()),ea=e(it());function $a(t,a){return t.type!==et.user?a.core?.filter(r=>t.categories?.includes(r.name)).map(r=>r.label):a.user?.filter(r=>t.wp_pattern_category?.includes(r.id)).map(r=>r.label)}function Xt({pattern:t,onSuccess:a}){let{createSuccessNotice:r}=(0,At.useDispatch)(ea.store),i=(0,At.useSelect)(s=>{let{getUserPatternCategories:m,getBlockPatternCategories:f}=s(ta.store);return{core:f(),user:m()}});return t?{content:t.content,defaultCategories:$a(t,i),defaultSyncType:t.type!==et.user?S.unsynced:t.wp_pattern_sync_status||S.full,defaultTitle:(0,F.sprintf)((0,F._x)("%s (Copy)","pattern"),typeof t.title=="string"?t.title:t.title.raw),onSuccess:({pattern:s})=>{r((0,F.sprintf)((0,F._x)('"%s" duplicated.',"pattern"),s.title.raw),{type:"snackbar",id:"patterns-create"}),a?.({pattern:s})}}:null}function aa({pattern:t,onClose:a,onSuccess:r}){let i=Xt({pattern:t,onSuccess:r});return t?(0,Qe.jsx)(ft,{modalTitle:(0,F.__)("Duplicate pattern"),confirmLabel:(0,F.__)("Duplicate"),onClose:a,onError:a,...i}):null}var H=e(v()),M=e(R()),ra=e(V()),Zt=e(T()),Qt=e(L()),oa=e(Et()),at=e(B()),sa=e(it());function la({onClose:t,onError:a,onSuccess:r,pattern:i,...s}){let m=(0,oa.decodeEntities)(i.title),[f,o]=(0,Qt.useState)(m),[l,n]=(0,Qt.useState)(!1),{editEntityRecord:d,__experimentalSaveSpecifiedEntityEdits:p}=(0,Zt.useDispatch)(ra.store),{createSuccessNotice:g,createErrorNotice:h}=(0,Zt.useDispatch)(sa.store),u=async x=>{if(x.preventDefault(),!(!f||f===i.title||l))try{await d("postType",i.type,i.id,{title:f}),n(!0),o(""),t?.();let w=await p("postType",i.type,i.id,["title"],{throwOnError:!0});r?.(w),g((0,at.__)("Pattern renamed"),{type:"snackbar",id:"pattern-update"})}catch(w){a?.();let Q=w.message&&w.code!=="unknown_error"?w.message:(0,at.__)("An error occurred while renaming the pattern.");h(Q,{type:"snackbar",id:"pattern-update"})}finally{n(!1),o("")}},c=()=>{t?.(),o("")};return(0,H.jsx)(M.Modal,{title:(0,at.__)("Rename"),...s,onRequestClose:t,focusOnMount:"firstContentElement",size:"small",children:(0,H.jsx)("form",{onSubmit:u,children:(0,H.jsxs)(M.__experimentalVStack,{spacing:"5",children:[(0,H.jsx)(M.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,at.__)("Name"),value:f,onChange:o,required:!0}),(0,H.jsxs)(M.__experimentalHStack,{justify:"right",children:[(0,H.jsx)(M.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:c,children:(0,at.__)("Cancel")}),(0,H.jsx)(M.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",children:(0,at.__)("Save")})]})]})})})}var K=e(v()),ha=e(Y());var ot=e(v()),U=e(pt()),yt=e(Y()),It=e(L()),fa=e(R());var ee=e(v()),Lt=e(te()),ae=(0,ee.jsx)(Lt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ee.jsx)(Lt.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"})});var re=e(v()),Mt=e(te()),oe=(0,re.jsx)(Mt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,re.jsx)(Mt.Path,{d:"M21.3 10.8l-5.6-5.6c-.7-.7-1.8-.7-2.5 0l-5.6 5.6c-.7.7-.7 1.8 0 2.5l5.6 5.6c.3.3.8.5 1.2.5s.9-.2 1.2-.5l5.6-5.6c.8-.7.8-1.9.1-2.5zm-1 1.4l-5.6 5.6c-.1.1-.3.1-.4 0l-5.6-5.6c-.1-.1-.1-.3 0-.4l5.6-5.6s.1-.1.2-.1.1 0 .2.1l5.6 5.6c.1.1.1.3 0 .4zm-16.6-.4L10 5.5l-1-1-6.3 6.3c-.7.7-.7 1.8 0 2.5L9 19.5l1.1-1.1-6.3-6.3c-.2 0-.2-.2-.1-.3z"})});var $=e(T()),se=e(V()),rt=e(B()),na=e(it());function ma({clientIds:t,rootClientId:a,closeBlockSettingsMenu:r}){let{createSuccessNotice:i}=(0,$.useDispatch)(na.store),{replaceBlocks:s,updateBlockAttributes:m}=(0,$.useDispatch)(yt.store),{setEditingPattern:f}=P((0,$.useDispatch)(A)),[o,l]=(0,It.useState)(!1),{getBlockAttributes:n}=(0,$.useSelect)(yt.store),d=(0,$.useSelect)(u=>{let{canUser:c}=u(se.store),{getBlocksByClientId:x,canInsertBlockType:w,getBlockRootClientId:Q}=u(yt.store),ut=a||(t.length>0?Q(t[0]):void 0),D=x(t)??[],q=W=>{let he=(0,U.getBlockType)(W),Da=he&&"parent"in he;return(0,U.hasBlockSupport)(W,"reusable",!Da)},tt=D.length===1&&D[0]&&(0,U.isReusableBlock)(D[0])&&!!u(se.store).getEntityRecord("postType","wp_block",D[0].attributes.ref);return!(window?.__experimentalContentOnlyPatternInsertion&&D.length===1&&D?.[0]?.attributes?.metadata?.patternName)&&!tt&&w("core/block",ut)&&D.every(W=>!!W&&W.isValid&&q(W.name))&&!!c("create",{kind:"postType",name:"wp_block"})},[t,a]),{getBlocksByClientId:p}=(0,$.useSelect)(yt.store),g=(0,It.useCallback)(()=>(0,U.serialize)(p(t)),[p,t]);if(!d)return null;let h=({pattern:u})=>{if(u.wp_pattern_sync_status===S.unsynced){if(t?.length===1){let c=n(t[0]);m(t[0],{metadata:{...c?.metadata?c.metadata:{},patternName:`core/block/${u.id}`,name:u.title.raw}})}}else{let c=(0,U.createBlock)("core/block",{ref:u.id});s(t,c),f(c.clientId,!0),r()}i(u.wp_pattern_sync_status===S.unsynced?(0,rt.sprintf)((0,rt.__)("Unsynced pattern created: %s"),u.title.raw):(0,rt.sprintf)((0,rt.__)("Synced pattern created: %s"),u.title.raw),{type:"snackbar",id:"convert-to-pattern-success"}),l(!1)};return(0,ot.jsxs)(ot.Fragment,{children:[(0,ot.jsx)(fa.MenuItem,{icon:oe,onClick:()=>l(!0),"aria-expanded":o,"aria-haspopup":"dialog",children:(0,rt.__)("Create pattern")}),o&&(0,ot.jsx)(ft,{content:g,onSuccess:u=>{h(u)},onError:()=>{l(!1)},onClose:()=>{l(!1)}})]})}var st=e(v()),le=e(R()),ie=e(B()),pa=e(pt()),bt=e(T()),fe=e(Y()),ne=e(ua()),ca=e(V());function Ka({clientId:t}){let{attributes:a,canDetach:r,isVisible:i,managePatternsUrl:s,isSyncedPattern:m,isUnsyncedPattern:f}=(0,bt.useSelect)(n=>{let{canRemoveBlock:d,getBlock:p}=n(fe.store),{canUser:g}=n(ca.store),h=p(t),u=window?.__experimentalContentOnlyPatternInsertion&&!!h?.attributes?.metadata?.patternName,c=!!h&&(0,pa.isReusableBlock)(h)&&!!g("update",{kind:"postType",name:"wp_block",id:h.attributes.ref});return{attributes:h.attributes,canDetach:u||c&&d(t),isUnsyncedPattern:u,isSyncedPattern:c,isVisible:u||c,managePatternsUrl:g("create",{kind:"postType",name:"wp_template"})?(0,ne.addQueryArgs)("site-editor.php",{p:"/pattern"}):(0,ne.addQueryArgs)("edit.php",{post_type:"wp_block"})}},[t]),{updateBlockAttributes:o}=(0,bt.useDispatch)(fe.store),{convertSyncedPatternToStatic:l}=P((0,bt.useDispatch)(A));return i?(0,st.jsxs)(st.Fragment,{children:[r&&(0,st.jsx)(le.MenuItem,{onClick:()=>{if(m&&l(t),f){let{patternName:n,...d}=a?.metadata??{};o(t,{metadata:d})}},children:(0,ie.__)("Detach")}),(0,st.jsx)(le.MenuItem,{href:s,children:(0,ie.__)("Manage patterns")})]}):null}var ga=Ka;function _a({rootClientId:t}){return(0,K.jsx)(ha.BlockSettingsMenuControls,{children:({selectedClientIds:a,onClose:r})=>(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(ma,{clientIds:a,rootClientId:t,closeBlockSettingsMenu:r}),a.length===1&&(0,K.jsx)(ga,{clientId:a[0]})]})})}var I=e(v()),O=e(R()),ba=e(V()),de=e(T()),Z=e(L()),Sa=e(Et()),X=e(B()),va=e(it()),ue=e(me());function ka({category:t,existingCategories:a,onClose:r,onError:i,onSuccess:s,...m}){let f=(0,Z.useId)(),o=(0,Z.useRef)(),[l,n]=(0,Z.useState)((0,Sa.decodeEntities)(t.name)),[d,p]=(0,Z.useState)(!1),[g,h]=(0,Z.useState)(!1),u=g?`patterns-rename-pattern-category-modal__validation-message-${f}`:void 0,{saveEntityRecord:c,invalidateResolution:x}=(0,de.useDispatch)(ba.store),{createErrorNotice:w,createSuccessNotice:Q}=(0,de.useDispatch)(va.store),ut=tt=>{g&&h(void 0),n(tt)},D=async tt=>{if(tt.preventDefault(),!d){if(!l||l===t.name){let y=(0,X.__)("Please enter a new name for this category.");(0,ue.speak)(y,"assertive"),h(y),o.current?.focus();return}if(a.patternCategories.find(y=>y.id!==t.id&&y.label.toLowerCase()===l.toLowerCase())){let y=(0,X.__)("This category already exists. Please use a different name.");(0,ue.speak)(y,"assertive"),h(y),o.current?.focus();return}try{p(!0);let y=await c("taxonomy",Nt,{id:t.id,slug:t.slug,name:l});x("getUserPatternCategories"),s?.(y),r(),Q((0,X.__)("Pattern category renamed."),{type:"snackbar",id:"pattern-category-update"})}catch(y){i?.(),w(y.message,{type:"snackbar",id:"pattern-category-update"})}finally{p(!1),n("")}}},q=()=>{r(),n("")};return(0,I.jsx)(O.Modal,{title:(0,X.__)("Rename"),onRequestClose:q,...m,children:(0,I.jsx)("form",{onSubmit:D,children:(0,I.jsxs)(O.__experimentalVStack,{spacing:"5",children:[(0,I.jsxs)(O.__experimentalVStack,{spacing:"2",children:[(0,I.jsx)(O.TextControl,{ref:o,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,X.__)("Name"),value:l,onChange:ut,"aria-describedby":u,required:!0}),g&&(0,I.jsx)("span",{className:"patterns-rename-pattern-category-modal__validation-message",id:u,children:g})]}),(0,I.jsxs)(O.__experimentalHStack,{justify:"right",children:[(0,I.jsx)(O.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:q,children:(0,X.__)("Cancel")}),(0,I.jsx)(O.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit","aria-disabled":!l||l===t.name||d,isBusy:d,children:(0,X.__)("Save")})]})]})})})}var j=e(v()),vt=e(L()),Ut=e(Y()),jt=e(R()),nt=e(B());var b=e(v()),_=e(R()),C=e(B()),St=e(L()),wa=e(me());function Ca({placeholder:t,initialName:a="",onClose:r,onSave:i}){let[s,m]=(0,St.useState)(a),f=(0,St.useId)(),o=!!s.trim(),l=()=>{if(s!==a){let n=(0,C.sprintf)((0,C.__)('Block name changed to: "%s".'),s);(0,wa.speak)(n,"assertive")}i(s),r()};return(0,b.jsx)(_.Modal,{title:(0,C.__)("Enable overrides"),onRequestClose:r,focusOnMount:"firstContentElement",aria:{describedby:f},size:"small",children:(0,b.jsx)("form",{onSubmit:n=>{n.preventDefault(),o&&l()},children:(0,b.jsxs)(_.__experimentalVStack,{spacing:"6",children:[(0,b.jsx)(_.__experimentalText,{id:f,children:(0,C.__)("Overrides are changes you make to a block within a synced pattern instance. Use overrides to customize a synced pattern instance to suit its new context. Name this block to specify an override.")}),(0,b.jsx)(_.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:s,label:(0,C.__)("Name"),help:(0,C.__)('For example, if you are creating a recipe pattern, you use "Recipe Title", "Recipe Description", etc.'),placeholder:t,onChange:m}),(0,b.jsxs)(_.__experimentalHStack,{justify:"right",children:[(0,b.jsx)(_.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:r,children:(0,C.__)("Cancel")}),(0,b.jsx)(_.Button,{__next40pxDefaultSize:!0,"aria-disabled":!o,variant:"primary",type:"submit",children:(0,C.__)("Enable")})]})]})})})}function xa({onClose:t,onSave:a}){let r=(0,St.useId)();return(0,b.jsx)(_.Modal,{title:(0,C.__)("Disable overrides"),onRequestClose:t,aria:{describedby:r},size:"small",children:(0,b.jsx)("form",{onSubmit:i=>{i.preventDefault(),a(),t()},children:(0,b.jsxs)(_.__experimentalVStack,{spacing:"6",children:[(0,b.jsx)(_.__experimentalText,{id:r,children:(0,C.__)("Are you sure you want to disable overrides? Disabling overrides will revert all applied overrides for this block throughout instances of this pattern.")}),(0,b.jsxs)(_.__experimentalHStack,{justify:"right",children:[(0,b.jsx)(_.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:t,children:(0,C.__)("Cancel")}),(0,b.jsx)(_.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",children:(0,C.__)("Disable")})]})]})})})}function Xa({attributes:t,setAttributes:a,name:r}){let i=(0,vt.useId)(),[s,m]=(0,vt.useState)(!1),[f,o]=(0,vt.useState)(!1),l=!!t.metadata?.name,n=t.metadata?.bindings?.__default,d=l&&n?.source===lt,p=n?.source&&n.source!==lt,{updateBlockBindings:g}=(0,Ut.useBlockBindingsUtils)();function h(x,w){w&&a({metadata:{...t.metadata,name:w}}),g({__default:x?{source:lt}:void 0})}if(p)return null;let u=r==="core/image"&&!!t.href?.length,c=!d&&u?(0,nt.__)("Overrides currently don't support image links. Remove the link first before enabling overrides."):(0,nt.__)("Allow changes to this block throughout instances of this pattern.");return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ut.InspectorControls,{group:"advanced",children:(0,j.jsx)(jt.BaseControl,{__nextHasNoMarginBottom:!0,id:i,label:(0,nt.__)("Overrides"),help:c,children:(0,j.jsx)(jt.Button,{__next40pxDefaultSize:!0,className:"pattern-overrides-control__allow-overrides-button",variant:"secondary","aria-haspopup":"dialog",onClick:()=>{d?o(!0):m(!0)},disabled:!d&&u,accessibleWhenDisabled:!0,children:d?(0,nt.__)("Disable overrides"):(0,nt.__)("Enable overrides")})})}),s&&(0,j.jsx)(Ca,{initialName:t.metadata?.name,onClose:()=>m(!1),onSave:x=>{h(!0,x)}}),f&&(0,j.jsx)(xa,{onClose:()=>o(!1),onSave:()=>h(!1)})]})}var Ta=Xa;var zt=e(v()),mt=e(Y()),Vt=e(R()),Yt=e(T()),Pa=e(B()),pe="content";function Ba(t){let a=t.attributes.metadata?.name,r=(0,Yt.useRegistry)(),i=(0,Yt.useSelect)(m=>{if(!a)return;let{getBlockAttributes:f,getBlockParentsByBlockName:o}=m(mt.store),[l]=o(t.clientId,"core/block",!0);if(!l)return;let n=f(l)[pe];if(n)return n.hasOwnProperty(a)},[t.clientId,a]);function s(){let{getBlockAttributes:m,getBlockParentsByBlockName:f}=r.select(mt.store),[o]=f(t.clientId,"core/block",!0);if(!o)return;let l=m(o)[pe];if(!l.hasOwnProperty(a))return;let{updateBlockAttributes:n,__unstableMarkLastChangeAsPersistent:d}=r.dispatch(mt.store);d();let p={...l};delete p[a],Object.keys(p).length||(p=void 0),n(o,{[pe]:p})}return(0,zt.jsx)(mt.__unstableBlockToolbarLastItem,{children:(0,zt.jsx)(Vt.ToolbarGroup,{children:(0,zt.jsx)(Vt.ToolbarButton,{onClick:s,disabled:!i,children:(0,Pa.__)("Reset")})})})}var z=e(v()),Ea=e(L()),kt=e(B()),dt=e(R()),Ra=e(pt()),ce=e(T());var G=e(Y());var{useBlockDisplayTitle:Za}=P(G.privateApis);function Qa({clientIds:t}){let a=t.length===1,{icon:r,firstBlockName:i}=(0,ce.useSelect)(o=>{let{getBlockAttributes:l,getBlockNamesByClientId:n}=o(G.store),{getBlockType:d,getActiveBlockVariation:p}=o(Ra.store),g=n(t),h=g[0],u=d(h),c;return a?c=p(h,l(t[0]))?.icon||u.icon:c=new Set(g).size===1?u.icon:ae,{icon:c,firstBlockName:l(t[0]).metadata.name}},[t,a]),s=Za({clientId:t[0],maximumLength:35}),m=a?(0,kt.sprintf)((0,kt.__)('This %1$s is editable using the "%2$s" override.'),s.toLowerCase(),i):(0,kt.__)("These blocks are editable using overrides."),f=(0,Ea.useId)();return(0,z.jsx)(dt.ToolbarItem,{children:o=>(0,z.jsx)(dt.DropdownMenu,{className:"patterns-pattern-overrides-toolbar-indicator",label:s,popoverProps:{placement:"bottom-start",className:"patterns-pattern-overrides-toolbar-indicator__popover"},icon:(0,z.jsx)(z.Fragment,{children:(0,z.jsx)(G.BlockIcon,{icon:r,className:"patterns-pattern-overrides-toolbar-indicator-icon",showColors:!0})}),toggleProps:{description:m,...o},menuProps:{orientation:"both","aria-describedby":f},children:()=>(0,z.jsx)(dt.__experimentalText,{id:f,children:m})})})}function Na(){let{clientIds:t,hasPatternOverrides:a,hasParentPattern:r}=(0,ce.useSelect)(i=>{let{getBlockAttributes:s,getSelectedBlockClientIds:m,getBlockParentsByBlockName:f}=i(G.store),o=m(),l=o.every(d=>Object.values(s(d)?.metadata?.bindings??{}).some(p=>p?.source===lt)),n=o.every(d=>f(d,"core/block",!0).length>0);return{clientIds:o,hasPatternOverrides:l,hasParentPattern:n}},[]);return a&&r?(0,z.jsx)(G.BlockControls,{group:"parent",children:(0,z.jsx)(Qa,{clientIds:t})}):null}var Oa={};Ne(Oa,{OverridesPanel:je,CreatePatternModal:ft,CreatePatternModalContents:Kt,DuplicatePatternModal:aa,isOverridableBlock:ct,hasOverridableBlocks:qt,useDuplicatePatternProps:Xt,RenamePatternModal:la,PatternsMenuItems:_a,RenamePatternCategoryModal:ka,PatternOverridesControls:Ta,ResetOverridesControl:Ba,PatternOverridesBlockControls:Na,useAddPatternCategory:Dt,PATTERN_TYPES:et,PATTERN_DEFAULT_CATEGORY:Ct,PATTERN_USER_CATEGORY:Ce,EXCLUDED_PATTERN_SOURCES:xe,PATTERN_SYNC_TYPES:S,PARTIAL_SYNCING_SUPPORTED_BLOCKS:xt});return ja(tr);})();
//# sourceMappingURL=index.min.js.map
