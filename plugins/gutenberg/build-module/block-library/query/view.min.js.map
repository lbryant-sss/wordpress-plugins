{
  "version": 3,
  "sources": ["../../../packages/block-library/src/query/view.js"],
  "sourcesContent": ["/**\n * WordPress dependencies\n */\nimport {\n\tstore,\n\tgetContext,\n\tgetElement,\n\twithSyncEvent,\n} from '@wordpress/interactivity';\n\nconst isValidLink = ( ref ) =>\n\tref &&\n\tref instanceof window.HTMLAnchorElement &&\n\tref.href &&\n\t( ! ref.target || ref.target === '_self' ) &&\n\tref.origin === window.location.origin;\n\nconst isValidEvent = ( event ) =>\n\tevent.button === 0 && // Left clicks only.\n\t! event.metaKey && // Open in new tab (Mac).\n\t! event.ctrlKey && // Open in new tab (Windows).\n\t! event.altKey && // Download.\n\t! event.shiftKey &&\n\t! event.defaultPrevented;\n\nstore(\n\t'core/query',\n\t{\n\t\tactions: {\n\t\t\tnavigate: withSyncEvent( function* ( event ) {\n\t\t\t\tconst ctx = getContext();\n\t\t\t\tconst { ref } = getElement();\n\t\t\t\tconst queryRef = ref.closest(\n\t\t\t\t\t'.wp-block-query[data-wp-router-region]'\n\t\t\t\t);\n\n\t\t\t\tif ( isValidLink( ref ) && isValidEvent( event ) ) {\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\tconst { actions } = yield import(\n\t\t\t\t\t\t'@wordpress/interactivity-router'\n\t\t\t\t\t);\n\t\t\t\t\tyield actions.navigate( ref.href );\n\t\t\t\t\tctx.url = ref.href;\n\n\t\t\t\t\t// Focus the first anchor of the Query block.\n\t\t\t\t\tconst firstAnchor = `.wp-block-post-template a[href]`;\n\t\t\t\t\tqueryRef.querySelector( firstAnchor )?.focus();\n\t\t\t\t}\n\t\t\t} ),\n\t\t\t*prefetch() {\n\t\t\t\tconst { ref } = getElement();\n\t\t\t\tif ( isValidLink( ref ) ) {\n\t\t\t\t\tconst { actions } = yield import(\n\t\t\t\t\t\t'@wordpress/interactivity-router'\n\t\t\t\t\t);\n\t\t\t\t\tyield actions.prefetch( ref.href );\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tcallbacks: {\n\t\t\t*prefetch() {\n\t\t\t\tconst { url } = getContext();\n\t\t\t\tconst { ref } = getElement();\n\t\t\t\tif ( url && isValidLink( ref ) ) {\n\t\t\t\t\tconst { actions } = yield import(\n\t\t\t\t\t\t'@wordpress/interactivity-router'\n\t\t\t\t\t);\n\t\t\t\t\tyield actions.prefetch( ref.href );\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t},\n\t{ lock: true }\n);\n"],
  "mappings": "AAGA,OACC,SAAAA,EACA,cAAAC,EACA,cAAAC,EACA,iBAAAC,MACM,2BAEP,IAAMC,EAAgBC,GACrBA,GACAA,aAAe,OAAO,mBACtBA,EAAI,OACF,CAAEA,EAAI,QAAUA,EAAI,SAAW,UACjCA,EAAI,SAAW,OAAO,SAAS,OAE1BC,EAAiBC,GACtBA,EAAM,SAAW,GACjB,CAAEA,EAAM,SACR,CAAEA,EAAM,SACR,CAAEA,EAAM,QACR,CAAEA,EAAM,UACR,CAAEA,EAAM,iBAETP,EACC,aACA,CACC,QAAS,CACR,SAAUG,EAAe,UAAYI,EAAQ,CAC5C,IAAMC,EAAMP,EAAW,EACjB,CAAE,IAAAI,CAAI,EAAIH,EAAW,EACrBO,EAAWJ,EAAI,QACpB,wCACD,EAEA,GAAKD,EAAaC,CAAI,GAAKC,EAAcC,CAAM,EAAI,CAClDA,EAAM,eAAe,EAErB,GAAM,CAAE,QAAAG,CAAQ,EAAI,KAAM,QACzB,iCACD,EACA,MAAMA,EAAQ,SAAUL,EAAI,IAAK,EACjCG,EAAI,IAAMH,EAAI,KAIdI,EAAS,cADW,iCACgB,GAAG,MAAM,CAC9C,CACD,CAAE,EACF,CAAC,UAAW,CACX,GAAM,CAAE,IAAAJ,CAAI,EAAIH,EAAW,EAC3B,GAAKE,EAAaC,CAAI,EAAI,CACzB,GAAM,CAAE,QAAAK,CAAQ,EAAI,KAAM,QACzB,iCACD,EACA,MAAMA,EAAQ,SAAUL,EAAI,IAAK,CAClC,CACD,CACD,EACA,UAAW,CACV,CAAC,UAAW,CACX,GAAM,CAAE,IAAAM,CAAI,EAAIV,EAAW,EACrB,CAAE,IAAAI,CAAI,EAAIH,EAAW,EAC3B,GAAKS,GAAOP,EAAaC,CAAI,EAAI,CAChC,GAAM,CAAE,QAAAK,CAAQ,EAAI,KAAM,QACzB,iCACD,EACA,MAAMA,EAAQ,SAAUL,EAAI,IAAK,CAClC,CACD,CACD,CACD,EACA,CAAE,KAAM,EAAK,CACd",
  "names": ["store", "getContext", "getElement", "withSyncEvent", "isValidLink", "ref", "isValidEvent", "event", "ctx", "queryRef", "actions", "url"]
}
