{
  "version": 3,
  "sources": ["../../../packages/block-library/src/form/view.js"],
  "sourcesContent": ["let formSettings;\ntry {\n\tformSettings = JSON.parse(\n\t\tdocument.getElementById(\n\t\t\t'wp-script-module-data-@wordpress/block-library/form/view'\n\t\t)?.textContent\n\t);\n} catch {}\n\n// eslint-disable-next-line eslint-comments/disable-enable-pair\n/* eslint-disable no-undef */\ndocument.querySelectorAll( 'form.wp-block-form' ).forEach( function ( form ) {\n\t// Bail If the form settings not provided or the form is not using the mailto: action.\n\tif (\n\t\t! formSettings ||\n\t\t! form.action ||\n\t\t! form.action.startsWith( 'mailto:' )\n\t) {\n\t\treturn;\n\t}\n\n\tconst redirectNotification = ( status ) => {\n\t\tconst urlParams = new URLSearchParams( window.location.search );\n\t\turlParams.append( 'wp-form-result', status );\n\t\twindow.location.search = urlParams.toString();\n\t};\n\n\t// Add an event listener for the form submission.\n\tform.addEventListener( 'submit', async function ( event ) {\n\t\tevent.preventDefault();\n\t\t// Get the form data and merge it with the form action and nonce.\n\t\tconst formData = Object.fromEntries( new FormData( form ).entries() );\n\t\tformData.formAction = form.action;\n\t\tformData._ajax_nonce = formSettings.nonce;\n\t\tformData.action = formSettings.action;\n\t\tformData._wp_http_referer = window.location.href;\n\t\tformData.formAction = form.action;\n\n\t\ttry {\n\t\t\tconst response = await fetch( formSettings.ajaxUrl, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t},\n\t\t\t\tbody: new URLSearchParams( formData ).toString(),\n\t\t\t} );\n\t\t\tif ( response.ok ) {\n\t\t\t\tredirectNotification( 'success' );\n\t\t\t} else {\n\t\t\t\tredirectNotification( 'error' );\n\t\t\t}\n\t\t} catch ( error ) {\n\t\t\tredirectNotification( 'error' );\n\t\t}\n\t} );\n} );\n"],
  "mappings": "AAAA,IAAIA,EACJ,GAAI,CACHA,EAAe,KAAK,MACnB,SAAS,eACR,0DACD,GAAG,WACJ,CACD,MAAQ,CAAC,CAIT,SAAS,iBAAkB,oBAAqB,EAAE,QAAS,SAAWC,EAAO,CAE5E,GACC,CAAED,GACF,CAAEC,EAAK,QACP,CAAEA,EAAK,OAAO,WAAY,SAAU,EAEpC,OAGD,IAAMC,EAAyBC,GAAY,CAC1C,IAAMC,EAAY,IAAI,gBAAiB,OAAO,SAAS,MAAO,EAC9DA,EAAU,OAAQ,iBAAkBD,CAAO,EAC3C,OAAO,SAAS,OAASC,EAAU,SAAS,CAC7C,EAGAH,EAAK,iBAAkB,SAAU,eAAiBI,EAAQ,CACzDA,EAAM,eAAe,EAErB,IAAMC,EAAW,OAAO,YAAa,IAAI,SAAUL,CAAK,EAAE,QAAQ,CAAE,EACpEK,EAAS,WAAaL,EAAK,OAC3BK,EAAS,YAAcN,EAAa,MACpCM,EAAS,OAASN,EAAa,OAC/BM,EAAS,iBAAmB,OAAO,SAAS,KAC5CA,EAAS,WAAaL,EAAK,OAE3B,GAAI,EACc,MAAM,MAAOD,EAAa,QAAS,CACnD,OAAQ,OACR,QAAS,CACR,eAAgB,mCACjB,EACA,KAAM,IAAI,gBAAiBM,CAAS,EAAE,SAAS,CAChD,CAAE,GACY,GACbJ,EAAsB,SAAU,EAEhCA,EAAsB,OAAQ,CAEhC,MAAkB,CACjBA,EAAsB,OAAQ,CAC/B,CACD,CAAE,CACH,CAAE",
  "names": ["formSettings", "form", "redirectNotification", "status", "urlParams", "event", "formData"]
}
